annotation { "Feature Type Name" : "%FEATURE_NAME%" }
export const %VAR_NAME% = defineFeature(function(context is Context, id is Id, definition is map)
    precondition
    {
    }
    {
        var queries = makeArray(%M%);
        var fullqueries = makeArray(%M%);
        %CENTER_DEF%
        %NORMAL_DEF%
        %R_DEF%
        for (var i = 0; i != %M%; i += 1)
        {
            var P is Plane = plane(center[i] * %UNIT%, normal[i] * %UNIT%);
            var sketch = newSketchOnPlane(context, id + ("sketch"~i), { "sketchPlane" : P });
            skCircle(sketch, "circle"~i, {
                    "center" : vector(0, 0) * %UNIT%,
                    "radius" : r[i] * %UNIT%
            });
            skSolve(sketch);
            queries[i] = qCreatedBy(id + ("sketch"~i), EntityType.FACE);
            fullqueries[i] = qCreatedBy(id + ("sketch"~i));
        }
        debug(context,queries);
        
        opLoft(context, id + "loftRod", {
                "profileSubqueries" : queries
        });
        opDeleteBodies(context, id + "deleteSketches", {
                "entities" : qUnion(fullqueries)
        });
    });

