# STRAYLIGHT PROTOCOL

## Before Writing Code

### Nix
- Read: `straylight-protocol/docs/rfc/straylight-001-standard-nix.md` OR `straylight-core/docs/rfc/straylight-001-standard-nix.md`
- File locations: `straylight-core/CONTRIBUTING.md` (if exists) OR check project structure

### Bash
- Read: `straylight-core/docs/rfc/straylight-006-safe-bash.md`
- Rule: ONLY `exec "$@"` allowed

### Scripts
- Read: `straylight-core/docs/skills/straylight-script/SKILL.md`
- Rule: Must `import Straylight.Script`

## Rules

### Naming
- lisp-case: `my-thing` not `myThing`

### Nix Patterns
- No `with lib;` → use `inherit (lib) x y;`
- No `rec {` → use `finalAttrs:`
- Packages need `meta` block
- Modules need `_class` attribute

### Bash
- ONLY `exec "$@"` allowed
- No logic → write Haskell script

### Scripts
- Must `import Straylight.Script`

## File Locations

- Packages: `straylight-core/nix/packages/{name}.hs`
- Scripts: `straylight-core/nix/scripts/{name}.hs`
- Tool wrappers: `straylight-core/nix/scripts/Straylight/Script/Tools/{Name}.hs`
- Modules: `straylight-core/nix/modules/flake/{name}.nix`

## Validate

Run `nix run .#lint` before committing.
