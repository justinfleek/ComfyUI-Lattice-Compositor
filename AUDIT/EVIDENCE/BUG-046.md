# BUG-046: fps=0 Produces Infinity in Velocity Calculations

## Summary
The `applyKeyframeVelocity()` function uses `store.fps ?? 16` which handles undefined but not zero. When `fps=0`, dividing velocity by fps produces Infinity, corrupting bezier handle values.

## Severity: LOW

## Location
- File: /ui/src/stores/actions/keyframeActions.ts
- Lines: 1312-1314
- Function: applyKeyframeVelocity

## The Bug
```typescript
export function applyKeyframeVelocity(
  store: VelocityStore,
  layerId: string,
  propertyPath: string,
  keyframeId: string,
  settings: VelocitySettings
): boolean {
  // ...

  // Line 1312 - Nullish coalescing doesn't catch 0
  const fps = store.fps ?? 16;
  // If store.fps = 0: 0 ?? 16 = 0 (nullish coalescing only catches null/undefined)
  // If store.fps = NaN: NaN ?? 16 = NaN

  // Line 1313-1314 - Division by zero
  const inVelocityPerFrame = settings.incomingVelocity / fps;  // velocity / 0 = Infinity
  const outVelocityPerFrame = settings.outgoingVelocity / fps; // velocity / 0 = Infinity

  // Line 1317-1327 - Infinity propagates to handles
  keyframe.inHandle = {
    frame: -inDuration * inInfluence,
    value: -inVelocityPerFrame * inDuration * inInfluence,  // -Infinity * ... = -Infinity or NaN
    enabled: true
  };

  keyframe.outHandle = {
    frame: outDuration * outInfluence,
    value: outVelocityPerFrame * outDuration * outInfluence,  // Infinity * ... = Infinity or NaN
    enabled: true
  };
  // ...
}
```

## Proof of Failure
```typescript
const store = {
  fps: 0,  // Invalid fps
  // ...
};

applyKeyframeVelocity(store, layerId, 'position', keyframeId, {
  incomingVelocity: 100,
  outgoingVelocity: 100,
  incomingInfluence: 33,
  outgoingInfluence: 33
});

// fps = 0 ?? 16 = 0
// inVelocityPerFrame = 100 / 0 = Infinity
// outVelocityPerFrame = 100 / 0 = Infinity

// keyframe.inHandle.value = -Infinity * duration * influence = -Infinity or NaN
// keyframe.outHandle.value = Infinity * duration * influence = Infinity or NaN

// Result: Bezier handles have Infinity values
// Bezier interpolation produces invalid curves
// Animation behavior is undefined/broken
```

## Same Pattern As
- BUG-034: fps=0 in audio keyframe conversion
- BUG-039: fps=0 in createComposition

## Impact
- Bezier handles corrupted with Infinity/NaN values
- Animation interpolation breaks
- Visual artifacts in motion
- Low severity because fps=0 requires upstream bug

## Suggested Fix
Validate fps before division:
```typescript
const fps = store.fps ?? 16;
if (!Number.isFinite(fps) || fps <= 0) {
  storeLogger.warn('applyKeyframeVelocity: Invalid fps', fps);
  return false;
}
const inVelocityPerFrame = settings.incomingVelocity / fps;
const outVelocityPerFrame = settings.outgoingVelocity / fps;
```

Or use `|| 16` instead of `?? 16` (catches 0, NaN, and undefined):
```typescript
const fps = store.fps || 16;  // 0 || 16 = 16, NaN || 16 = 16
```
