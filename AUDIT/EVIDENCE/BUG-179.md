# BUG-179: NaN Bypasses Clamp in smootherstep()

## Summary
Same vulnerability as BUG-178 but in smootherstep(). Division by (edge1-edge0) without validation allows NaN to bypass clamping.

## Severity: MEDIUM

## Location
- File: ui/src/services/expressions/expressionEvaluator.ts
- Lines: 120-123
- Function: mathExpressions.smootherstep()

## The Bug
```typescript
smootherstep(edge0: number, edge1: number, x: number): number {
  const t = mathExpressions.clamp((x - edge0) / (edge1 - edge0), 0, 1);
  return t * t * t * (t * (t * 6 - 15) + 10);
}
```

**Crash Path:**
1. `edge1 = edge0` (e.g., both = 5)
2. `(x - 5) / (5 - 5)` = `(x - 5) / 0` = Infinity or -Infinity
3. If x = 5: `(5 - 5) / 0` = `0 / 0` = NaN
4. `clamp(NaN, 0, 1)` = NaN (Math.min/max don't clamp NaN)
5. `NaN * NaN * NaN * ...` = NaN

**With NaN inputs:**
1. `edge0 = NaN`: `(x - NaN) / (edge1 - NaN)` = NaN / NaN = NaN
2. Propagates through entire calculation

## Code Evidence
```typescript
// Lines 120-123
smootherstep(edge0: number, edge1: number, x: number): number {
  const t = mathExpressions.clamp((x - edge0) / (edge1 - edge0), 0, 1);
  return t * t * t * (t * (t * 6 - 15) + 10);
}
```

## Impact
- Any expression using `smootherstep(a, a, x)` produces NaN
- NaN propagates to layer transforms, breaking rendering
- User sees no error message

## Test Cases
```javascript
mathExpressions.smootherstep(5, 5, 3)    // Returns NaN, should return 0
mathExpressions.smootherstep(5, 5, 5)    // Returns NaN, should return 0.5 or 1
mathExpressions.smootherstep(5, 5, 7)    // Returns NaN, should return 1
mathExpressions.smootherstep(NaN, 10, 5) // Returns NaN
```

## Suggested Fix
```typescript
smootherstep(edge0: number, edge1: number, x: number): number {
  const range = edge1 - edge0;
  if (!Number.isFinite(range) || range === 0) {
    // At threshold: return 0 if below edge0, 1 if above
    return !Number.isFinite(x) ? 0 : (x <= edge0 ? 0 : 1);
  }
  if (!Number.isFinite(edge0) || !Number.isFinite(x)) return 0;
  const t = mathExpressions.clamp((x - edge0) / range, 0, 1);
  return t * t * t * (t * (t * 6 - 15) + 10);
}
```
