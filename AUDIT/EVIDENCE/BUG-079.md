# BUG-079: setCompositionFps Accepts Invalid Values (SYSTEMIC-003 ROOT CAUSE)

## Summary
BaseLayer.setCompositionFps() accepts any number value without validation. This is the ROOT CAUSE that enables all SYSTEMIC-003 division-by-zero bugs throughout the codebase. Setting fps to 0, NaN, or Infinity corrupts all downstream calculations.

## Severity: MEDIUM (Root cause of multiple bugs)

## Location
- File: /ui/src/engine/layers/BaseLayer.ts
- Lines: 1558-1559
- Function: setCompositionFps

## The Bug
```typescript
setCompositionFps(fps: number): void {
  this.compositionFps = fps;  // No validation!
}
```

This allows:
- fps = 0 → Division by zero in all subclasses
- fps = NaN → NaN propagation everywhere
- fps = Infinity → Unexpected behavior
- fps = negative → Inverted time calculations

## Impact Chain
When fps=0 is set here, it causes division-by-zero in:
- BUG-067: GPUParticleSystem.simulateToFrame() `1 / fps`
- BUG-070: VideoLayer.evaluateVideoTime() `layerFrame / compFps`
- BUG-071: VideoLayer.detectVideoFps() `avgFrameDuration`
- BUG-074: ModelLayer.onEvaluateFrame() `1 / this.compositionFps`
- BUG-075: ProceduralMatteLayer.renderPattern() `frame * speed / this.compositionFps`

## Proof of Failure
```typescript
const layer = new ImageLayer(layerData);
layer.setCompositionFps(0);  // Accepted without error!

layer.evaluateFrame(30);
// Any division by this.compositionFps = division by zero!
// Cascades to all time-based calculations
```

## Suggested Fix (Fixes ALL SYSTEMIC-003 at source)
```typescript
setCompositionFps(fps: number): void {
  if (!Number.isFinite(fps) || fps <= 0) {
    console.warn(`[BaseLayer] Invalid fps ${fps}, using default 30`);
    this.compositionFps = 30;
    return;
  }
  this.compositionFps = fps;
}
```
