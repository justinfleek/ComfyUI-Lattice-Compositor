# BUG-013: Division by Zero in jitter() with Specific Parameters

## Summary
The `jitter()` function divides by `1 + (octaves - 1) * amplitudeMultiplier` at line 54. Certain combinations of `octaves` and `amplitudeMultiplier` make this denominator zero, causing division by zero.

## Severity: LOW

## Location
- File: /ui/src/services/expressions/jitterExpressions.ts
- Lines: 54
- Function: jitter

## The Bug
```typescript
// Line 54
return result / (1 + (octaves - 1) * amplitudeMultiplier);
```

The denominator equals zero when:
```
1 + (octaves - 1) * amplitudeMultiplier = 0
amplitudeMultiplier = -1 / (octaves - 1)
```

## Proof of Failure
```typescript
// Test 1: octaves=2, amplitudeMultiplier=-1
jitter({ time: 0, value: 100 }, 5, 50, 2, -1);
// Denominator: 1 + (2-1) * -1 = 0 → returns Infinity

// Test 2: octaves=3, amplitudeMultiplier=-0.5
jitter({ time: 0, value: 100 }, 5, 50, 3, -0.5);
// Denominator: 1 + (3-1) * -0.5 = 0 → returns Infinity
```

## Impact
- Returns Infinity or -Infinity
- Animation values become corrupted
- Low severity because requires specific parameter combination

## Suggested Fix
```typescript
const denominator = 1 + (octaves - 1) * amplitudeMultiplier;
if (denominator === 0) return result;  // or return 0
return result / denominator;
```

---

## Fix Applied
**Date:** 2025-12-27
**Fixed by:** Claude (Forensic Audit)

### Code Change
```typescript
// BEFORE (line 62):
return result / (1 + (octaves - 1) * amplitudeMultiplier);

// AFTER (lines 62-67):
// Guard against division by zero (BUG-013)
const denominator = 1 + (octaves - 1) * amplitudeMultiplier;
if (!Number.isFinite(denominator) || denominator === 0) {
  return result; // Return unnormalized if normalization factor is invalid
}
return result / denominator;
```

### Verification
| Input | Before | After |
|-------|--------|-------|
| octaves=2, ampMult=-1 | Infinity (div/0) | result (unnorm) ✓ |
| octaves=3, ampMult=-0.5 | Infinity (div/0) | result (unnorm) ✓ |
| octaves=1, ampMult=any | Normal | Normal ✓ |
| octaves=4, ampMult=0.5 | Normal | Normal ✓ |

### Pattern Used
SYSTEMIC-003: Division by zero - extract denominator, validate before division
