# BUG-167: ProceduralMatteLayer.setDimensions() No Validation

## Summary
setDimensions() stores width/height values without validation. NaN, zero, or negative dimensions corrupt the canvas, causing rendering failures and invalid Three.js geometry.

## Severity: LOW

## Location
- File: /ui/src/engine/layers/ProceduralMatteLayer.ts
- Lines: 132-144
- Function: setDimensions()

## Crash Path Trace
```
Function: setDimensions(width: number, height: number)

Line 133-134:
  this.width = width;   // NaN stored
  this.height = height; // NaN stored

Line 136-137:
  this.renderCanvas.width = width;   // canvas.width = NaN → becomes 0
  this.renderCanvas.height = height; // canvas.height = NaN → becomes 0

Line 142:
  this.mesh.geometry = new THREE.PlaneGeometry(width, height);
  - NaN dimensions → degenerate geometry

Test cases:
  - width=NaN → canvas.width=0, PlaneGeometry(NaN, height) = degenerate
  - width=0 → zero-area canvas, no rendering
  - width=-100 → canvas.width=-100 → undefined behavior

Result: SILENT CORRUPTION - matte rendering fails
```

## Code Evidence
```typescript
// Lines 132-144
setDimensions(width: number, height: number): void {
  this.width = width;   // No validation
  this.height = height; // No validation

  this.renderCanvas.width = width;   // NaN/0/negative
  this.renderCanvas.height = height; // NaN/0/negative

  // Update geometry
  if (this.mesh) {
    this.mesh.geometry.dispose();
    this.mesh.geometry = new THREE.PlaneGeometry(width, height);  // Invalid geometry
  }
}
```

## Impact
- Canvas dimensions become 0 (NaN converts to 0)
- Pattern rendering produces empty output
- Geometry becomes degenerate/invisible
- Matte layer stops functioning

## Suggested Fix
```typescript
setDimensions(width: number, height: number): void {
  if (!Number.isFinite(width) || !Number.isFinite(height) || width <= 0 || height <= 0) {
    console.warn(`setDimensions: invalid dimensions ${width}x${height}`);
    return;
  }
  this.width = width;
  this.height = height;
  // ...
}
```
