# BUG-177: NaN Propagation in sawtooth/triangle/square

## Summary
Wave functions don't validate frequency/amplitude, causing NaN with invalid inputs.

## Severity: MEDIUM

## Location
- File: ui/src/services/expressions/expressionEvaluator.ts
- Lines: 65-78
- Functions: sawtooth(), triangle(), square()

## The Bug
```typescript
sawtooth(time: number, frequency: number, amplitude: number = 1): number {
  const t = time * frequency;  // NaN if frequency=NaN
  return amplitude * 2 * (t - Math.floor(t + 0.5));  // NaN propagates
}
```

When `frequency=Infinity`:
- `t = time * Infinity = Infinity`
- `Math.floor(Infinity + 0.5) = Infinity`
- `Infinity - Infinity = NaN`

## Code Evidence
```typescript
// Lines 65-78
sawtooth(time: number, frequency: number, amplitude: number = 1): number {
  const t = time * frequency;
  return amplitude * 2 * (t - Math.floor(t + 0.5));
}

triangle(time: number, frequency: number, amplitude: number = 1): number {
  const t = time * frequency;
  return amplitude * (2 * Math.abs(2 * (t - Math.floor(t + 0.5))) - 1);
}

square(time: number, frequency: number, amplitude: number = 1): number {
  const t = time * frequency;
  return amplitude * (t - Math.floor(t) < 0.5 ? 1 : -1);
}
```

## Impact
- Expressions with invalid frequency produce NaN
- Animation values corrupted silently

## Suggested Fix
```typescript
sawtooth(time: number, frequency: number, amplitude: number = 1): number {
  if (!Number.isFinite(frequency) || !Number.isFinite(amplitude)) return 0;
  const t = time * frequency;
  return amplitude * 2 * (t - Math.floor(t + 0.5));
}
```
