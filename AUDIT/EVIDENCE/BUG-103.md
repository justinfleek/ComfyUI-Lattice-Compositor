# BUG-103: LatticeEngine.resize() NaN Bypass

## Summary
The `resize()` method checks `width <= 0 || height <= 0` but NaN bypasses this check because `NaN <= 0` is `false`. NaN dimensions propagate to the renderer, camera, and spline layers.

## Severity: MEDIUM

## Location
- File: /ui/src/engine/LatticeEngine.ts
- Lines: 707-738
- Function: resize

## The Bug
```typescript
// Lines 707-718
resize(
  width: number,
  height: number,
  compositionWidth?: number,
  compositionHeight?: number
): void {
  this.assertNotDisposed();

  if (width <= 0 || height <= 0) {  // NaN <= 0 is FALSE!
    engineLogger.warn('Invalid resize dimensions:', width, height);
    return;
  }

  // NaN proceeds to:
  this.state.viewport = { width, height };  // NaN stored in state
  this.renderer.resize(width, height);       // NaN to WebGL
  // ...
  this.camera.setViewportAspect(width, height);  // NaN aspect ratio
  this.updateSplineResolutions(width, height);   // NaN to all splines
}
```

## Proof of Failure
```typescript
const engine = new LatticeEngine(config);
engine.initialize();

// Attack: resize with NaN
engine.resize(NaN, 1080);

// Check passes because NaN <= 0 is false
// NaN propagates to:
// - state.viewport.width = NaN
// - renderer.resize(NaN, 1080) → WebGL undefined behavior
// - camera.setViewportAspect(NaN, 1080) → aspect = NaN/1080 = NaN
// - updateSplineResolutions(NaN, 1080) → Line2 materials get NaN resolution

// All subsequent renders are corrupted
```

## Impact
- WebGL operations with NaN dimensions undefined behavior
- Camera aspect ratio becomes NaN
- All Line2 spline materials get NaN resolution
- Viewport state stores invalid data
- Can trigger from window resize event with bad input

## Related
- BUG-101: validateConfig() same NaN bypass pattern
- BUG-105: setResolution() identical pattern
- SYSTEMIC-005: NaN bypass via comparison operators
- 14A: Numeric inputs - NaN testing

## Suggested Fix
```typescript
resize(
  width: number,
  height: number,
  compositionWidth?: number,
  compositionHeight?: number
): void {
  this.assertNotDisposed();

  if (!Number.isFinite(width) || !Number.isFinite(height) ||
      width <= 0 || height <= 0) {
    engineLogger.warn('Invalid resize dimensions:', width, height);
    return;
  }

  // Optional params also need validation
  if (compositionWidth !== undefined &&
      (!Number.isFinite(compositionWidth) || compositionWidth <= 0)) {
    engineLogger.warn('Invalid compositionWidth:', compositionWidth);
    return;
  }
  if (compositionHeight !== undefined &&
      (!Number.isFinite(compositionHeight) || compositionHeight <= 0)) {
    engineLogger.warn('Invalid compositionHeight:', compositionHeight);
    return;
  }

  // ... rest of method
}
```
