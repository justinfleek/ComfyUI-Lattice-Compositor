# BUG-106: LatticeEngine.fitCompositionToViewport() No Padding Validation

## Summary
The `fitCompositionToViewport(padding)` method accepts a padding parameter with default value 40, but performs no validation. Negative, NaN, or very large padding values are passed directly to camera calculations, potentially causing invalid viewport fits or division by zero.

## Severity: LOW

## Location
- File: /ui/src/engine/LatticeEngine.ts
- Lines: 827-830
- Function: fitCompositionToViewport

## The Bug
```typescript
// Lines 827-830
fitCompositionToViewport(padding: number = 40): void {
  const { width, height } = this.state.viewport;
  this.camera.fitToViewport(width, height, padding);  // No validation!
}
```

## Proof of Failure
```typescript
const engine = new LatticeEngine(config);

// Attack 1: Negative padding
engine.fitCompositionToViewport(-100);
// Camera fit calculation: availableWidth = width - 2*(-100) = width + 200
// Result: Camera zooms OUT instead of fitting with border

// Attack 2: Padding larger than viewport
engine.fitCompositionToViewport(2000);  // viewport is 1920x1080
// availableWidth = 1920 - 2*2000 = -2080 (NEGATIVE!)
// Division by negative or zero in camera calculations

// Attack 3: NaN padding
engine.fitCompositionToViewport(NaN);
// All camera fit calculations produce NaN
// Camera position/zoom become NaN

// Attack 4: Infinity padding
engine.fitCompositionToViewport(Infinity);
// availableWidth = width - Infinity = -Infinity
// Camera calculations with -Infinity
```

## Impact
- Negative padding causes inverted fit behavior
- Very large padding causes negative available space
- NaN propagates through camera calculations
- Low severity: Requires explicit bad input, UI typically provides fixed options

## Related
- 14A: Numeric inputs - NaN, Infinity, negative testing
- 14G: Boundary conditions - values larger than expected

## Suggested Fix
```typescript
fitCompositionToViewport(padding: number = 40): void {
  const { width, height } = this.state.viewport;

  // Validate padding
  if (!Number.isFinite(padding) || padding < 0) {
    padding = 40;  // Use default
  }

  // Clamp padding to reasonable max (half of smallest dimension)
  const maxPadding = Math.min(width, height) / 2 - 10;
  padding = Math.min(padding, maxPadding);

  this.camera.fitToViewport(width, height, padding);
}
```
