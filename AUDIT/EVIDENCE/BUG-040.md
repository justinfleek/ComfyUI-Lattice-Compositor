# BUG-040: NaN Index Bypasses Bounds Check in navigateToBreadcrumb

## Summary
The `navigateToBreadcrumb()` function checks `if (index < 0 || index >= length)` but this doesn't catch NaN. Since `NaN < 0` and `NaN >= length` are both false, NaN bypasses the guard. `slice(0, NaN + 1)` then returns a copy of the full array, causing unexpected behavior.

## Severity: LOW

## Location
- File: /ui/src/stores/actions/compositionActions.ts
- Lines: 311-330
- Function: navigateToBreadcrumb

## The Bug
```typescript
export function navigateToBreadcrumb(store: CompositionStore, index: number): void {
  // Line 312 - NaN bypasses this check
  if (index < 0 || index >= store.compositionBreadcrumbs.length) {
    return;  // NaN doesn't trigger this!
  }
  // NaN < 0 = false
  // NaN >= 5 = false
  // Both conditions false → continues execution

  // Already at this breadcrumb
  if (index === store.compositionBreadcrumbs.length - 1) {
    return;  // NaN === 4 is false, continues
  }

  // Line 322 - slice with NaN
  store.compositionBreadcrumbs = store.compositionBreadcrumbs.slice(0, index + 1);
  // slice(0, NaN + 1) = slice(0, NaN)
  // JavaScript: slice(0, NaN) returns copy of FULL array (NaN treated as 0 for end, but...)
  // Actually: slice interprets NaN as 0 for the end parameter
  // slice(0, 0) returns [] - empty array!

  const targetId = store.compositionBreadcrumbs[index];  // Line 323
  // breadcrumbs[NaN] = undefined

  if (targetId) {  // Line 325 - undefined is falsy, doesn't switch
    switchComposition(store, targetId);
  }
}
```

## Proof of Failure
```typescript
const store = {
  compositionBreadcrumbs: ["main", "nested1", "nested2"],
  // ...
};

navigateToBreadcrumb(store, NaN);
// index < 0 → false
// index >= 3 → false
// index === 2 → false
// slice(0, NaN + 1) = slice(0, NaN) = []  // Empty array!
// breadcrumbs is now []
// targetId = [][NaN] = undefined
// No switch happens, but breadcrumbs is corrupted to empty array
```

## Impact
- Breadcrumbs array gets cleared (slice returns empty array)
- No composition switch (targetId is undefined)
- Navigation state corrupted
- Low severity because NaN index requires upstream bug

## Suggested Fix
Add NaN check:
```typescript
export function navigateToBreadcrumb(store: CompositionStore, index: number): void {
  if (!Number.isFinite(index) || index < 0 || index >= store.compositionBreadcrumbs.length) {
    return;
  }
  // ...
}
```

Or use `Number.isInteger()`:
```typescript
if (!Number.isInteger(index) || index < 0 || index >= store.compositionBreadcrumbs.length) {
  return;
}
```
