# BUG-098: GPUParticleSystem Constructor maxParticles Not Validated

## Summary
The constructor accepts `config.maxParticles` without validation. When maxParticles is NaN, Infinity, or negative, `new Float32Array(bufferSize)` throws a RangeError, crashing the application.

## Severity: MEDIUM

## Location
- File: /ui/src/engine/particles/GPUParticleSystem.ts
- Lines: 367-378
- Function: constructor

## The Bug
```typescript
// Lines 367-378
constructor(config: Partial<GPUParticleSystemConfig> = {}) {
  this.config = { ...createDefaultConfig(), ...config };

  // Initialize buffers - NO VALIDATION!
  const bufferSize = this.config.maxParticles * PARTICLE_STRIDE;
  this.particleBufferA = new Float32Array(bufferSize);  // THROWS if invalid!
  this.particleBufferB = new Float32Array(bufferSize);
  // ...
}
```

## Proof of Failure
```typescript
// Corrupted config or user error
const config = {
  maxParticles: NaN  // Invalid value
};
const system = new GPUParticleSystem(config);
// -> bufferSize = NaN * 16 = NaN
// -> new Float32Array(NaN) throws RangeError

// Infinity case
const config2 = { maxParticles: Infinity };
const system2 = new GPUParticleSystem(config2);
// -> new Float32Array(Infinity) throws RangeError

// Negative case
const config3 = { maxParticles: -1000 };
const system3 = new GPUParticleSystem(config3);
// -> new Float32Array(-16000) throws RangeError
```

## Impact
- Uncaught RangeError crashes the application
- No graceful degradation or fallback
- User sees cryptic error message

## Related
- 14A: Numeric Input Validation
- Similar pattern to other config validation issues

## Suggested Fix
```typescript
constructor(config: Partial<GPUParticleSystemConfig> = {}) {
  this.config = { ...createDefaultConfig(), ...config };

  // Validate maxParticles
  if (!Number.isFinite(this.config.maxParticles) || this.config.maxParticles <= 0) {
    console.warn('GPUParticleSystem: Invalid maxParticles, using default 100000');
    this.config.maxParticles = 100000;
  }
  // Clamp to reasonable maximum to prevent memory exhaustion
  const MAX_ALLOWED = 1000000;
  if (this.config.maxParticles > MAX_ALLOWED) {
    console.warn(`GPUParticleSystem: maxParticles capped at ${MAX_ALLOWED}`);
    this.config.maxParticles = MAX_ALLOWED;
  }

  const bufferSize = this.config.maxParticles * PARTICLE_STRIDE;
  this.particleBufferA = new Float32Array(bufferSize);
  this.particleBufferB = new Float32Array(bufferSize);
  // ...
}
```
