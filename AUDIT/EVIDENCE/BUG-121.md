# BUG-121: ImageLayer.setDimensions() No Validation - Division by Zero

## Summary
The `setDimensions(width, height)` method accepts parameters without validation. Setting height=0 causes division by zero when `updateMeshSize()` calculates the image aspect ratio.

## Severity: LOW

## Location
- File: /ui/src/engine/layers/ImageLayer.ts
- Lines: 257-261 (setDimensions), 198 (division)
- Functions: setDimensions, updateMeshSize

## The Bug
```typescript
// Lines 257-261
setDimensions(width: number, height: number): void {
  this.imageWidth = width;   // No validation!
  this.imageHeight = height; // height=0 possible!
  this.updateMeshSize();
}

// Line 198 in updateMeshSize():
if (this.targetWidth && this.targetHeight && this.fit !== 'none') {
  const targetAspect = this.targetWidth / this.targetHeight;
  const imageAspect = this.imageWidth / this.imageHeight;
  //                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  // If imageHeight=0: division by zero!
}
```

## Proof of Failure
```typescript
const imageLayer = new ImageLayer(layerData, resources);
await imageLayer.loadImage(imageUrl);

// Set fit mode to trigger aspect ratio calculations
imageLayer.onUpdate({ data: { fit: 'contain', width: 800, height: 600 } });

// Attack: set height to 0
imageLayer.setDimensions(100, 0);
// this.imageHeight = 0
// updateMeshSize() called
// imageAspect = 100 / 0 = Infinity

// Then at line 206: finalWidth = this.targetWidth / imageAspect;
// finalWidth = 800 / Infinity = 0
// Creates a 0-width geometry (invisible or degenerate)

// Attack 2: NaN dimensions
imageLayer.setDimensions(NaN, NaN);
// imageAspect = NaN / NaN = NaN
// All fit calculations produce NaN
// Geometry with NaN dimensions
```

## Impact
- Division by zero produces Infinity aspect ratio
- Degenerate or invisible geometry created
- NaN dimensions produce NaN geometry
- Low severity: Usually called from UI with valid values

## Related
- 14A: Numeric inputs - 0, NaN, negative testing
- 14G: Boundary conditions

## Safe Pattern Observed
Note: `setTexture()` at line 137-138 has proper fallbacks:
```typescript
this.imageWidth = texture.image.width || texture.image.videoWidth || 100;
this.imageHeight = texture.image.height || texture.image.videoHeight || 100;
```
The `|| 100` fallback prevents 0 from texture loading. But `setDimensions()` bypasses this.

## Suggested Fix
```typescript
setDimensions(width: number, height: number): void {
  // Validate dimensions
  if (!Number.isFinite(width) || !Number.isFinite(height) ||
      width <= 0 || height <= 0) {
    console.warn('ImageLayer.setDimensions: Invalid dimensions');
    return;
  }

  this.imageWidth = width;
  this.imageHeight = height;
  this.updateMeshSize();
}
```
