# BUG-027: Division by Zero in Warp Bulge at Center with bend=-1

## Summary
The warp bulge effect divides by `factor = 1 + bend * (1 - rÂ²)`. At the exact center pixel (r=0) with bend=-1, factor becomes 0, causing division by zero. The result is Infinity which gets clamped, but the calculation is undefined behavior.

## Severity: LOW

## Location
- File: /ui/src/services/effects/distortRenderer.ts
- Lines: 264-266
- Function: warpRenderer (bulge case)

## The Bug
```typescript
case 'bulge': {
  const r = Math.sqrt(nx * nx + ny * ny);
  if (r < 1) {
    const factor = 1 + bend * (1 - r * r);  // If bend=-1, r=0: factor = 0
    srcX = centerX + (x - centerX) / factor;  // Division by zero!
    srcY = centerY + (y - centerY) / factor;  // Division by zero!
  }
  break;
}
```

At center pixel:
- nx = 0, ny = 0, r = 0
- factor = 1 + (-1) * (1 - 0) = 1 - 1 = 0
- (x - centerX) / 0 = 0 / 0 = NaN (or Infinity for non-center)

## Proof of Failure
```typescript
const params = {
  warp_style: 'bulge',
  bend: -100,  // Normalized to bend = -1
  horizontal_distortion: 0,
  vertical_distortion: 0
};

warpRenderer(input, params);
// At center pixel (where x = centerX, y = centerY):
// r = 0
// factor = 1 + (-1) * 1 = 0
// srcX = centerX + 0 / 0 = NaN
// srcY = centerY + 0 / 0 = NaN

// Bilinear interpolation with NaN coordinates produces garbage
```

## Impact
- Single pixel artifact at exact center with extreme bend values
- Low severity because it requires bend=-100% and affects only center pixel
- Result is clamped so no crash, but mathematically undefined

## Suggested Fix
Guard against zero factor:
```typescript
const factor = 1 + bend * (1 - r * r);
if (Math.abs(factor) < 0.001) {
  // Near-zero factor would cause extreme distortion, skip
  break;
}
srcX = centerX + (x - centerX) / factor;
srcY = centerY + (y - centerY) / factor;
```
