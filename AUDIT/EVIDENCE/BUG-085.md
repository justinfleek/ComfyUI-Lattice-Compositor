# BUG-085: ParticleLayer.setFPS() Lacks Validation (SYSTEMIC-003)

## Summary
ParticleLayer.setFPS() stores the fps value without any validation. When fps=0 or NaN is passed, it propagates to GPUParticleSystem.simulateToFrame() which performs `1/fps` division, causing division by zero or NaN.

## Severity: LOW (Propagates to existing bug)

## Location
- File: /ui/src/engine/layers/ParticleLayer.ts
- Lines: 747-748
- Function: setFPS

## The Bug
```typescript
// Lines 747-748
setFPS(fps: number): void {
  this.fps = fps;  // NO VALIDATION! Accepts 0, NaN, Infinity
}
```

## How fps is Used
```typescript
// Line 918 - preCacheFrames()
this.particleSystem.simulateToFrame(frame, this.fps);

// Line 949 - onEvaluateFrame()
const stepsPerformed = this.particleSystem.simulateToFrame(frame, this.fps);

// Line 995 - evaluateAtFrame()
this.particleSystem.simulateToFrame(frame, this.fps);
```

## Downstream Impact
In GPUParticleSystem.simulateToFrame() (line 1502):
```typescript
const deltaTime = 1 / fps;  // Division by zero when fps=0!
```

## Proof of Failure
```typescript
const layer = new ParticleLayer(layerData);
layer.setFPS(0);  // Stored without validation
layer.evaluateAtFrame(100);
// -> simulateToFrame(100, 0)
// -> deltaTime = 1 / 0 = Infinity
// -> Particle physics becomes Infinity, system corrupts
```

## Impact
- Already tracked as BUG-067 at GPUParticleSystem level
- This is an additional attack vector for SYSTEMIC-003
- Low severity: Defensive validation should be at both caller and callee

## Related
- BUG-067: GPUParticleSystem fps division
- BUG-079: BaseLayer.setCompositionFps (ROOT CAUSE)
- SYSTEMIC-003: Division by Zero / fps=0 pattern

## Suggested Fix
```typescript
setFPS(fps: number): void {
  if (!Number.isFinite(fps) || fps <= 0) {
    console.warn('ParticleLayer.setFPS: Invalid fps, using default 30');
    fps = 30;
  }
  this.fps = fps;
}
```
