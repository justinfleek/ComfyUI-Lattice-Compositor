# BUG-147: createFrustum() NaN/Infinity Propagation from Camera Properties

## Summary
createFrustum() reads camera properties (nearClip, farClip, angleOfView) without validation. NaN, zero, or extreme values in these properties corrupt the frustum geometry.

## Severity: LOW

## Location
- File: /ui/src/engine/layers/CameraLayer.ts
- Lines: 246-254
- Function: createFrustum()

## Crash Path Trace
```
Function: createFrustum()

Line 246-254:
  const near = camera.nearClip;  // No validation
  const far = Math.min(camera.farClip, 2000);  // Math.min(NaN, 2000) = NaN
  const fov = camera.angleOfView * (Math.PI / 180);  // NaN * constant = NaN
  const aspect = this.compositionAspect;

  const nearHeight = 2 * Math.tan(fov / 2) * near;  // Math.tan(NaN) = NaN
  const nearWidth = nearHeight * aspect;
  const farHeight = 2 * Math.tan(fov / 2) * far;
  const farWidth = farHeight * aspect;

Test cases:
  - camera.nearClip=NaN → near=NaN → nearHeight=NaN → all vertices NaN
  - camera.angleOfView=NaN → fov=NaN → Math.tan(NaN)=NaN → all NaN
  - camera.angleOfView=180 → fov=π → Math.tan(π/2)=16331239353195370 (huge)
  - camera.nearClip=0 → nearHeight=0 → near plane is a point
  - camera.nearClip<0 → negative near plane (behind camera)

Result: SILENT CORRUPTION - frustum geometry invalid
```

## Code Evidence
```typescript
// Line 236-254
private createFrustum(): void {
  const camera = this.getCamera();
  if (!camera) return;

  // ... setup ...

  // Calculate frustum dimensions based on camera properties
  const near = camera.nearClip;  // No validation
  const far = Math.min(camera.farClip, 2000); // Cap for visualization
  const fov = camera.angleOfView * (Math.PI / 180);  // No validation
  const aspect = this.compositionAspect;

  const nearHeight = 2 * Math.tan(fov / 2) * near;  // Math.tan(NaN)=NaN
  const nearWidth = nearHeight * aspect;
  const farHeight = 2 * Math.tan(fov / 2) * far;
  const farWidth = farHeight * aspect;
```

## Impact
- Frustum visualization becomes invisible, degenerate, or glitchy
- Extreme FOV (approaching 180) creates huge frustum
- Zero near clip creates degenerate near plane

## Suggested Fix
```typescript
private createFrustum(): void {
  const camera = this.getCamera();
  if (!camera) return;

  // Validate camera properties
  const near = Number.isFinite(camera.nearClip) && camera.nearClip > 0
    ? camera.nearClip : 0.1;
  const far = Number.isFinite(camera.farClip) && camera.farClip > near
    ? Math.min(camera.farClip, 2000) : 1000;
  const fov = Number.isFinite(camera.angleOfView) && camera.angleOfView > 0 && camera.angleOfView < 180
    ? camera.angleOfView * (Math.PI / 180) : Math.PI / 3;  // Default 60 degrees
  // ...
}
```
