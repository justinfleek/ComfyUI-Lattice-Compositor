# BUG-101: LatticeEngine.validateConfig() NaN Bypass

## Summary
The `validateConfig()` method checks `width <= 0` and `height <= 0` but NaN bypasses these checks because `NaN <= 0` evaluates to `false`. This allows NaN dimensions to pass validation and propagate to the renderer, camera, and scene systems.

## Severity: MEDIUM

## Location
- File: /ui/src/engine/LatticeEngine.ts
- Lines: 183-195
- Function: validateConfig

## The Bug
```typescript
// Lines 183-195
private validateConfig(config: LatticeEngineConfig): void {
  if (!(config.canvas instanceof HTMLCanvasElement)) {
    throw new Error('LatticeEngine requires a valid HTMLCanvasElement');
  }

  if (config.width <= 0 || config.height <= 0) {  // NaN <= 0 is FALSE!
    throw new Error('LatticeEngine requires positive width and height');
  }

  if (config.width > 8192 || config.height > 8192) {  // NaN > 8192 is FALSE!
    throw new Error('LatticeEngine maximum dimension is 8192 pixels');
  }
}
```

## Proof of Failure
```typescript
// NaN comparison behavior:
console.log(NaN <= 0);    // false - PASSES check
console.log(NaN > 8192);  // false - PASSES check

// Attack:
const engine = new LatticeEngine({
  canvas: canvasElement,
  width: NaN,  // Passes validation!
  height: 1080,
});

// NaN propagates to:
// - line 134: this.state.viewport = { width: NaN, height: 1080 }
// - line 147-150: CameraController(NaN, ...)
// - line 154-161: RenderPipeline({ width: NaN, ... })
// - line 166-169: scene.setCompositionSize(NaN, ...)

// Result: Undefined WebGL behavior, potential crashes
```

## Impact
- NaN dimensions propagate through entire engine
- WebGL operations with NaN dimensions are undefined behavior
- Camera aspect ratio calculations produce NaN
- Scene bounds are invalid
- Could originate from user input like `parseInt("abc")` â†’ NaN

## Related
- SYSTEMIC-005: NaN bypass via comparison operators
- BUG-097: Similar pattern in GPUParticleSystem
- 14A: Numeric inputs - NaN testing

## Suggested Fix
```typescript
private validateConfig(config: LatticeEngineConfig): void {
  if (!(config.canvas instanceof HTMLCanvasElement)) {
    throw new Error('LatticeEngine requires a valid HTMLCanvasElement');
  }

  if (!Number.isFinite(config.width) || !Number.isFinite(config.height)) {
    throw new Error('LatticeEngine requires finite width and height');
  }

  if (config.width <= 0 || config.height <= 0) {
    throw new Error('LatticeEngine requires positive width and height');
  }

  if (config.width > 8192 || config.height > 8192) {
    throw new Error('LatticeEngine maximum dimension is 8192 pixels');
  }
}
```
