# BUG-102: LatticeEngine.setCompositionFPS() No Validation

## Summary
The `setCompositionFPS(fps)` method passes the fps parameter directly to `layers.setCompositionFPS()` without any validation. Values like 0, NaN, negative, or Infinity propagate through to particle systems and time calculations, causing division by zero and infinite loops.

## Severity: MEDIUM

## Location
- File: /ui/src/engine/LatticeEngine.ts
- Lines: 399-401
- Function: setCompositionFPS

## The Bug
```typescript
// Lines 399-401
setCompositionFPS(fps: number): void {
  this.layers.setCompositionFPS(fps);  // NO VALIDATION!
}
```

## Proof of Failure
```typescript
const engine = new LatticeEngine(config);

// Attack 1: fps = 0
engine.setCompositionFPS(0);
// In particle systems: deltaTime = 1 / fps = 1 / 0 = Infinity
// Results in infinite particle velocities, position = Infinity

// Attack 2: fps = NaN
engine.setCompositionFPS(NaN);
// deltaTime = 1 / NaN = NaN
// All particle calculations produce NaN

// Attack 3: fps = -30
engine.setCompositionFPS(-30);
// deltaTime = 1 / -30 = -0.033
// Particles move backwards in time unexpectedly

// Attack 4: fps = Infinity
engine.setCompositionFPS(Infinity);
// deltaTime = 1 / Infinity = 0
// No particle movement, stuck simulation

// This feeds into ParticleLayer.setCompositionFps() â†’ BaseLayer.setCompositionFps()
// which was flagged as BUG-090
```

## Impact
- Division by zero when fps=0 (creates Infinity values)
- NaN propagation through all time-based calculations
- Negative fps causes reversed time simulation
- Connects to BUG-090 (BaseLayer has same issue)
- Any external FPS input (user config, project file) can trigger

## Related
- BUG-090: BaseLayer.setCompositionFps no validation
- BUG-097: GPUParticleSystem.simulateToFrame fps validation
- SYSTEMIC-003: Division by zero / fps=0 pattern
- 14A: Numeric inputs - 0, NaN, Infinity testing

## Suggested Fix
```typescript
setCompositionFPS(fps: number): void {
  if (!Number.isFinite(fps) || fps <= 0) {
    console.warn('LatticeEngine.setCompositionFPS: Invalid fps, using 30');
    fps = 30;
  }
  this.layers.setCompositionFPS(fps);
}
```
