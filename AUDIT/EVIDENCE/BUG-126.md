# BUG-126: ShapeLayer.removeContent() NaN Index Bypass

## Summary
The `removeContent(index)` method has no validation on the index parameter. When index is NaN, `Array.splice(NaN, 1)` treats NaN as 0 and removes the first element, which is likely not the intended behavior.

## Severity: LOW

## Location
- File: /ui/src/engine/layers/ShapeLayer.ts
- Lines: 233-236
- Function: removeContent

## The Bug
```typescript
// Lines 233-236
removeContent(index: number): void {
  this.shapeData.contents.splice(index, 1);  // No validation!
  this.renderShape();
}
```

## Proof of Failure
```typescript
const shapeLayer = new ShapeLayer(layerData);
// Assume contents = [rect, ellipse, star]

// Attack: index = NaN
shapeLayer.removeContent(NaN);
// splice(NaN, 1) → splice(0, 1) → removes first element (rect)!
// User intended to remove nothing or get an error
// Instead, silently corrupts shape data

// Attack: index = -1
shapeLayer.removeContent(-1);
// splice(-1, 1) → removes last element
// This is valid JS behavior but may be unexpected

// Attack: index = Infinity
shapeLayer.removeContent(Infinity);
// splice(Infinity, 1) → removes nothing (beyond bounds)
// Silent failure - no error, no removal
```

## Impact
- NaN index silently removes wrong content (first element)
- Data corruption without error indication
- Low severity: Index typically from UI selection, not user input

## Related
- BUG-042: reorderEffects NaN index bypass (same pattern)
- BUG-044: keyframe NaN frame bypass
- 14A: Numeric inputs - NaN testing

## Suggested Fix
```typescript
removeContent(index: number): void {
  // Validate index
  if (!Number.isInteger(index) || index < 0 || index >= this.shapeData.contents.length) {
    console.warn('ShapeLayer.removeContent: Invalid index');
    return;
  }

  this.shapeData.contents.splice(index, 1);
  this.renderShape();
}
```
