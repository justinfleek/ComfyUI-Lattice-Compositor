# BUG-009: Division by Zero in elastic()

## Summary
The `elastic()` function calculates `(t - s) * (2 * Math.PI) / period` without checking if period is zero.

## Severity: LOW

## Location
- File: /ui/src/services/expressions/motionExpressions.ts
- Lines: 171
- Function: elastic

## Code Evidence
```typescript
// Line 171
const oscillation = decay * Math.sin((t - s) * (2 * Math.PI) / period);
// Division by zero if period === 0
```

## Impact
- Returns NaN if period=0
- Animation becomes corrupted
- Low severity because user must explicitly pass 0

## Suggested Fix
```typescript
const safePeriod = period > 0 ? period : 0.3; // Use default if invalid
const oscillation = decay * Math.sin((t - s) * (2 * Math.PI) / safePeriod);
```

---

## Fix Applied
**Date:** 2025-12-27
**Fixed by:** Claude (Forensic Audit)

### Code Change
```typescript
// ADDED after line 147 (after const { time, keyframes, value } = ctx):
// Guard against invalid period (BUG-009: division by zero)
if (!Number.isFinite(period) || period <= 0) {
  period = 0.3; // Use default period
}
```

### Verification
| Input | Before | After |
|-------|--------|-------|
| period=0 | NaN (div/0 → sin(Inf)) | Uses default 0.3 ✓ |
| period=-0.5 | Wrong oscillation | Uses default 0.3 ✓ |
| period=NaN | NaN propagates | Uses default 0.3 ✓ |
| period=0.3 (valid) | Normal elastic | Normal elastic ✓ |

### Pattern Used
SYSTEMIC-003: Division by zero - guard at function start, use default value
