# BUG-091: BaseLayer.computeMotionPath() Infinite Loop with Infinity

## Summary
`computeMotionPath()` uses a for loop `for (frame = start; frame <= end; frame++)`. When `endFrame` or `this.outPoint` is Infinity, the loop condition `frame <= Infinity` is always true for finite frame values, causing an infinite loop.

## Severity: MEDIUM

## Location
- File: /ui/src/engine/layers/BaseLayer.ts
- Lines: 1582-1597
- Function: computeMotionPath

## The Bug
```typescript
// Lines 1582-1597
computeMotionPath(startFrame?: number, endFrame?: number): void {
  const start = startFrame ?? this.inPoint;
  const end = endFrame ?? this.outPoint;  // If outPoint = Infinity...

  this.motionPathPoints = [];

  // BUG: If end = Infinity, this loop NEVER terminates!
  for (let frame = start; frame <= end; frame++) {
    const pos = this.evaluator.evaluate(this.transform.position, frame);
    this.motionPathPoints.push(new THREE.Vector3(pos.x, -pos.y, pos.z ?? 0));
  }

  this.rebuildMotionPath();
}
```

## Proof of Failure
```typescript
const layer = new ImageLayer(layerData);

// Scenario 1: outPoint set to Infinity (from corrupted data)
layer.outPoint = Infinity;
layer.computeMotionPath();
// -> for (frame = 0; frame <= Infinity; frame++)
// -> frame++ never makes frame > Infinity
// -> INFINITE LOOP, browser freezes

// Scenario 2: Explicitly passing Infinity
layer.computeMotionPath(0, Infinity);
// -> Same infinite loop
```

## Impact
- Browser tab freezes
- Memory exhaustion (creating infinite Vector3 objects)
- Application becomes unresponsive

## Related
- SYSTEMIC-006: Unbounded Loop Parameters
- BUG-086, BUG-087: Same infinite loop pattern

## Suggested Fix
```typescript
computeMotionPath(startFrame?: number, endFrame?: number): void {
  const start = startFrame ?? this.inPoint;
  let end = endFrame ?? this.outPoint;

  // Validate bounds
  if (!Number.isFinite(start) || !Number.isFinite(end)) {
    console.warn('BaseLayer.computeMotionPath: Invalid frame bounds');
    return;
  }

  // Limit maximum frames to prevent memory exhaustion
  const MAX_PATH_FRAMES = 10000;
  if (end - start > MAX_PATH_FRAMES) {
    console.warn(`computeMotionPath: Limiting to ${MAX_PATH_FRAMES} frames`);
    end = start + MAX_PATH_FRAMES;
  }

  // ... rest of implementation
}
```
