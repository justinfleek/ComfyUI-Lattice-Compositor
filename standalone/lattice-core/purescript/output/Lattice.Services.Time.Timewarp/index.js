// Generated by purs version 0.15.15
import * as Data_Ord from "../Data.Ord/index.js";
import * as $$Math from "../Math/index.js";
var min = /* #__PURE__ */ Data_Ord.min(Data_Ord.ordNumber);
var WholeFrames = /* #__PURE__ */ (function () {
    function WholeFrames() {

    };
    WholeFrames.value = new WholeFrames();
    return WholeFrames;
})();
var FrameMix = /* #__PURE__ */ (function () {
    function FrameMix() {

    };
    FrameMix.value = new FrameMix();
    return FrameMix;
})();
var PixelMotion = /* #__PURE__ */ (function () {
    function PixelMotion() {

    };
    PixelMotion.value = new PixelMotion();
    return PixelMotion;
})();
var showTimewarpMethod = {
    show: function (v) {
        if (v instanceof WholeFrames) {
            return "whole-frames";
        };
        if (v instanceof FrameMix) {
            return "frame-mix";
        };
        if (v instanceof PixelMotion) {
            return "pixel-motion";
        };
        throw new Error("Failed pattern match at Lattice.Services.Time.Timewarp (line 42, column 1 - line 45, column 36): " + [ v.constructor.name ]);
    }
};
var selectNearestFrame = function (blend) {
    var $12 = blend < 0.5;
    if ($12) {
        return 0;
    };
    return 1;
};
var parseTimewarpMethod = function (s) {
    if (s === "whole-frames") {
        return WholeFrames.value;
    };
    if (s === "frame-mix") {
        return FrameMix.value;
    };
    if (s === "pixel-motion") {
        return PixelMotion.value;
    };
    return WholeFrames.value;
};
var isExactFrame = function (blend) {
    return blend === 0.0 || blend === 1.0;
};
var frameMixPixel = function (src1) {
    return function (src2) {
        return function (blend) {
            return src1 * (1.0 - blend) + src2 * blend;
        };
    };
};
var eqTimewarpMethod = {
    eq: function (x) {
        return function (y) {
            if (x instanceof WholeFrames && y instanceof WholeFrames) {
                return true;
            };
            if (x instanceof FrameMix && y instanceof FrameMix) {
                return true;
            };
            if (x instanceof PixelMotion && y instanceof PixelMotion) {
                return true;
            };
            return false;
        };
    }
};
var defaultMotionBlur = 0.5;
var calculateAdjustedBlend = function (blend) {
    return function (motionBlurAmount) {
        return function (mvX) {
            return function (mvY) {
                var magnitude = $$Math.sqrt(mvX * mvX + mvY * mvY);
                var blurFactor = min(1.0)((motionBlurAmount * magnitude) / 10.0);
                return blend * (1.0 - blurFactor * 0.5);
            };
        };
    };
};
export {
    WholeFrames,
    FrameMix,
    PixelMotion,
    parseTimewarpMethod,
    isExactFrame,
    selectNearestFrame,
    frameMixPixel,
    defaultMotionBlur,
    calculateAdjustedBlend,
    eqTimewarpMethod,
    showTimewarpMethod
};
//# sourceMappingURL=index.js.map
