// Generated by purs version 0.15.15
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Control_Monad_State_Class from "../Control.Monad.State.Class/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Function from "../Data.Function/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Halogen_Component from "../Halogen.Component/index.js";
import * as Halogen_HTML_Core from "../Halogen.HTML.Core/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Events from "../Halogen.HTML.Events/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_Query_HalogenM from "../Halogen.Query.HalogenM/index.js";
import * as Lattice_UI_Core from "../Lattice.UI.Core/index.js";
var pure = /* #__PURE__ */ Control_Applicative.pure(Halogen_Query_HalogenM.applicativeHalogenM);
var modify_ = /* #__PURE__ */ Control_Monad_State_Class.modify_(Halogen_Query_HalogenM.monadStateHalogenM);
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);
var map = /* #__PURE__ */ Data_Functor.map(Data_Functor.functorArray);
var value = /* #__PURE__ */ Halogen_HTML_Properties.value(Halogen_HTML_Core.isPropString);
var Footage = /* #__PURE__ */ (function () {
    function Footage() {

    };
    Footage.value = new Footage();
    return Footage;
})();
var Audio = /* #__PURE__ */ (function () {
    function Audio() {

    };
    Audio.value = new Audio();
    return Audio;
})();
var Image = /* #__PURE__ */ (function () {
    function Image() {

    };
    Image.value = new Image();
    return Image;
})();
var Precomp = /* #__PURE__ */ (function () {
    function Precomp() {

    };
    Precomp.value = new Precomp();
    return Precomp;
})();
var Initialize = /* #__PURE__ */ (function () {
    function Initialize() {

    };
    Initialize.value = new Initialize();
    return Initialize;
})();
var SetCategory = /* #__PURE__ */ (function () {
    function SetCategory(value0) {
        this.value0 = value0;
    };
    SetCategory.create = function (value0) {
        return new SetCategory(value0);
    };
    return SetCategory;
})();
var SetSearch = /* #__PURE__ */ (function () {
    function SetSearch(value0) {
        this.value0 = value0;
    };
    SetSearch.create = function (value0) {
        return new SetSearch(value0);
    };
    return SetSearch;
})();
var SelectAsset = /* #__PURE__ */ (function () {
    function SelectAsset(value0) {
        this.value0 = value0;
    };
    SelectAsset.create = function (value0) {
        return new SelectAsset(value0);
    };
    return SelectAsset;
})();
var ImportAsset = /* #__PURE__ */ (function () {
    function ImportAsset() {

    };
    ImportAsset.value = new ImportAsset();
    return ImportAsset;
})();
var DeleteAsset = /* #__PURE__ */ (function () {
    function DeleteAsset(value0) {
        this.value0 = value0;
    };
    DeleteAsset.create = function (value0) {
        return new DeleteAsset(value0);
    };
    return DeleteAsset;
})();
var titleStyle = /* #__PURE__ */ (function () {
    return "color: var(--lattice-text-primary); font-size: var(--lattice-text-xl); " + "font-weight: var(--lattice-font-semibold); margin: 0;";
})();
var sidebarTitleStyle = /* #__PURE__ */ (function () {
    return "color: var(--lattice-text-muted); font-size: var(--lattice-text-xs); " + "text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 var(--lattice-space-3);";
})();
var sidebarStyle = /* #__PURE__ */ (function () {
    return "width: 200px; background: var(--lattice-surface-1); " + ("border-right: 1px solid var(--lattice-border-subtle); " + "padding: var(--lattice-space-4);");
})();
var searchWrapperStyle = "position: relative;";
var searchInputStyle = "width: 250px;";
var pageStyle = "min-height: 100vh; background: var(--lattice-void);";
var initialState = /* #__PURE__ */ (function () {
    return {
        assets: [  ],
        searchQuery: "",
        selectedCategory: Footage.value,
        selectedAsset: ""
    };
})();
var headerStyle = /* #__PURE__ */ (function () {
    return "display: flex; justify-content: space-between; align-items: center; " + ("padding: var(--lattice-space-4) var(--lattice-space-6); " + "background: var(--lattice-surface-1); border-bottom: 1px solid var(--lattice-border-subtle);");
})();
var handleAction = function (dictMonadAff) {
    return function (v) {
        if (v instanceof Initialize) {
            return pure(Data_Unit.unit);
        };
        if (v instanceof SetCategory) {
            return modify_(function (v1) {
                var $28 = {};
                for (var $29 in v1) {
                    if ({}.hasOwnProperty.call(v1, $29)) {
                        $28[$29] = v1[$29];
                    };
                };
                $28.selectedCategory = v.value0;
                $28.selectedAsset = "";
                return $28;
            });
        };
        if (v instanceof SetSearch) {
            return modify_(function (v1) {
                var $32 = {};
                for (var $33 in v1) {
                    if ({}.hasOwnProperty.call(v1, $33)) {
                        $32[$33] = v1[$33];
                    };
                };
                $32.searchQuery = v.value0;
                return $32;
            });
        };
        if (v instanceof SelectAsset) {
            return modify_(function (v1) {
                var $36 = {};
                for (var $37 in v1) {
                    if ({}.hasOwnProperty.call(v1, $37)) {
                        $36[$37] = v1[$37];
                    };
                };
                $36.selectedAsset = v.value0;
                return $36;
            });
        };
        if (v instanceof ImportAsset) {
            return pure(Data_Unit.unit);
        };
        if (v instanceof DeleteAsset) {
            return pure(Data_Unit.unit);
        };
        throw new Error("Failed pattern match at Lattice.UI.Pages.Assets (line 291, column 16 - line 307, column 14): " + [ v.constructor.name ]);
    };
};
var gridStyle = /* #__PURE__ */ (function () {
    return "display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); " + "gap: var(--lattice-space-3);";
})();
var gridContainerStyle = "flex: 1; overflow-y: auto; padding: var(--lattice-space-4);";
var eqAssetType = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Footage && y instanceof Footage) {
                return true;
            };
            if (x instanceof Audio && y instanceof Audio) {
                return true;
            };
            if (x instanceof Image && y instanceof Image) {
                return true;
            };
            if (x instanceof Precomp && y instanceof Precomp) {
                return true;
            };
            return false;
        };
    }
};
var eq2 = /* #__PURE__ */ Data_Eq.eq(eqAssetType);
var emptyTitleStyle = /* #__PURE__ */ (function () {
    return "color: var(--lattice-text-primary); font-size: var(--lattice-text-lg); " + "margin: 0 0 var(--lattice-space-2);";
})();
var emptyTextStyle = "color: var(--lattice-text-muted); margin: 0 0 var(--lattice-space-4);";
var emptyStateStyle = /* #__PURE__ */ (function () {
    return "display: flex; flex-direction: column; align-items: center; justify-content: center; " + "height: 100%; text-align: center; padding: var(--lattice-space-8);";
})();
var emptyIconStyle = "font-size: 64px; margin-bottom: var(--lattice-space-4); opacity: 0.5;";
var countStyle = "color: var(--lattice-text-muted); font-size: var(--lattice-text-sm); display: block;";
var countByType = function (assets) {
    return function (assetType) {
        return Data_Array.length(Data_Array.filter(function (a) {
            return eq2(a.assetType)(assetType);
        })(assets));
    };
};
var contentStyle = "flex: 1; display: flex; overflow: hidden;";
var contains = function (v) {
    return function (v1) {
        return true;
    };
};
var filterAssets = function (state) {
    var byCategory = Data_Array.filter(function (a) {
        return eq2(a.assetType)(state.selectedCategory);
    })(state.assets);
    var bySearch = (function () {
        var $43 = state.searchQuery === "";
        if ($43) {
            return byCategory;
        };
        return Data_Array.filter(function (a) {
            return contains(state.searchQuery)(a.name);
        })(byCategory);
    })();
    return bySearch;
};
var containerStyle = "height: 100vh; display: flex; flex-direction: column;";
var categoryLabel = function (v) {
    if (v instanceof Footage) {
        return "Footage";
    };
    if (v instanceof Audio) {
        return "Audio";
    };
    if (v instanceof Image) {
        return "Images";
    };
    if (v instanceof Precomp) {
        return "Precomps";
    };
    throw new Error("Failed pattern match at Lattice.UI.Pages.Assets (line 280, column 17 - line 284, column 24): " + [ v.constructor.name ]);
};
var categoryItemStyle = function (isActive) {
    return "width: 100%; display: flex; align-items: center; gap: var(--lattice-space-2); " + ("padding: var(--lattice-space-2) var(--lattice-space-3); " + ("border-radius: var(--lattice-radius-md); border: none; cursor: pointer; " + ("text-align: left; margin-bottom: var(--lattice-space-1); " + ("background: " + ((function () {
        if (isActive) {
            return "var(--lattice-accent-muted)";
        };
        return "transparent";
    })() + ("; " + ("color: " + ((function () {
        if (isActive) {
            return "var(--lattice-accent)";
        };
        return "var(--lattice-text-secondary)";
    })() + ("; " + ("font-weight: " + ((function () {
        if (isActive) {
            return "var(--lattice-font-medium)";
        };
        return "var(--lattice-font-normal)";
    })() + ";")))))))))));
};
var categoryIcon = function (v) {
    if (v instanceof Footage) {
        return "\ud83c\udfac";
    };
    if (v instanceof Audio) {
        return "\ud83c\udfb5";
    };
    if (v instanceof Image) {
        return "\ud83d\uddbc";
    };
    if (v instanceof Precomp) {
        return "\ud83d\udce6";
    };
    throw new Error("Failed pattern match at Lattice.UI.Pages.Assets (line 273, column 16 - line 277, column 17): " + [ v.constructor.name ]);
};
var renderEmptyState = function (state) {
    return Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-empty-state" ]), Halogen_HTML_Properties.attr("style")(emptyStateStyle) ])([ Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-empty-icon" ]), Halogen_HTML_Properties.attr("style")(emptyIconStyle) ])([ Halogen_HTML_Core.text(categoryIcon(state.selectedCategory)) ]), Halogen_HTML_Elements.h3([ Halogen_HTML_Properties.attr("style")(emptyTitleStyle) ])([ Halogen_HTML_Core.text("No " + categoryLabel(state.selectedCategory)) ]), Halogen_HTML_Elements.p([ Halogen_HTML_Properties.attr("style")(emptyTextStyle) ])([ Halogen_HTML_Core.text("Import assets to get started") ]), Halogen_HTML_Elements.button([ Lattice_UI_Core.cls([ "lattice-btn", "lattice-btn-primary" ]), Halogen_HTML_Events.onClick(function (v) {
        return ImportAsset.value;
    }) ])([ Halogen_HTML_Core.text("Import Assets") ]) ]);
};
var categoryCountStyle = "margin-left: auto; font-size: var(--lattice-text-xs); opacity: 0.6;";
var renderCategoryItem = function (state) {
    return function (category) {
        return function (label) {
            return function (count) {
                var isActive = eq2(state.selectedCategory)(category);
                return Halogen_HTML_Elements.button([ Lattice_UI_Core.cls([ "lattice-category-item" ]), Halogen_HTML_Properties.attr("style")(categoryItemStyle(isActive)), Halogen_HTML_Properties.attr("data-active")((function () {
                    if (isActive) {
                        return "true";
                    };
                    return "false";
                })()), Halogen_HTML_Events.onClick(function (v) {
                    return new SetCategory(category);
                }) ])([ Halogen_HTML_Elements.span([ Lattice_UI_Core.cls([ "lattice-category-icon" ]) ])([ Halogen_HTML_Core.text(categoryIcon(category)) ]), Halogen_HTML_Elements.span([ Lattice_UI_Core.cls([ "lattice-category-label" ]) ])([ Halogen_HTML_Core.text(label) ]), Halogen_HTML_Elements.span([ Lattice_UI_Core.cls([ "lattice-category-count" ]), Halogen_HTML_Properties.attr("style")(categoryCountStyle) ])([ Halogen_HTML_Core.text(show(count)) ]) ]);
            };
        };
    };
};
var renderSidebar = function (state) {
    return Halogen_HTML_Elements.aside([ Lattice_UI_Core.cls([ "lattice-assets-sidebar" ]), Halogen_HTML_Properties.attr("style")(sidebarStyle) ])([ Halogen_HTML_Elements.h3([ Halogen_HTML_Properties.attr("style")(sidebarTitleStyle) ])([ Halogen_HTML_Core.text("Categories") ]), Halogen_HTML_Elements.nav([ Lattice_UI_Core.cls([ "lattice-category-nav" ]) ])([ renderCategoryItem(state)(Footage.value)("Footage")(countByType(state.assets)(Footage.value)), renderCategoryItem(state)(Audio.value)("Audio")(countByType(state.assets)(Audio.value)), renderCategoryItem(state)(Image.value)("Images")(countByType(state.assets)(Image.value)), renderCategoryItem(state)(Precomp.value)("Precomps")(countByType(state.assets)(Precomp.value)) ]) ]);
};
var assetThumbStyle = /* #__PURE__ */ (function () {
    return "aspect-ratio: 16/9; background: var(--lattice-surface-0); " + "display: flex; align-items: center; justify-content: center; font-size: 32px;";
})();
var assetNameStyle = /* #__PURE__ */ (function () {
    return "color: var(--lattice-text-primary); font-size: var(--lattice-text-sm); " + ("font-weight: var(--lattice-font-medium); display: block; " + ("padding: var(--lattice-space-2) var(--lattice-space-2) 0; " + "white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"));
})();
var assetMetaStyle = /* #__PURE__ */ (function () {
    return "color: var(--lattice-text-muted); font-size: var(--lattice-text-xs); " + "display: block; padding: 0 var(--lattice-space-2) var(--lattice-space-2);";
})();
var assetCardStyle = function (isSelected) {
    return "background: var(--lattice-surface-1); border-radius: var(--lattice-radius-lg); " + ("overflow: hidden; cursor: pointer; transition: all var(--lattice-transition-fast); " + ("border: 2px solid " + ((function () {
        if (isSelected) {
            return "var(--lattice-accent)";
        };
        return "transparent";
    })() + ";")));
};
var renderAssetCard = function (state) {
    return function (asset) {
        var isSelected = state.selectedAsset === asset.id;
        return Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-asset-card" ]), Halogen_HTML_Properties.attr("style")(assetCardStyle(isSelected)), Halogen_HTML_Properties.attr("data-selected")((function () {
            if (isSelected) {
                return "true";
            };
            return "false";
        })()), Halogen_HTML_Events.onClick(function (v) {
            return new SelectAsset(asset.id);
        }) ])([ Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-asset-thumb" ]), Halogen_HTML_Properties.attr("style")(assetThumbStyle) ])([ Halogen_HTML_Core.text(categoryIcon(asset.assetType)) ]), Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-asset-info" ]) ])([ Halogen_HTML_Elements.span([ Lattice_UI_Core.cls([ "lattice-asset-name" ]), Halogen_HTML_Properties.attr("style")(assetNameStyle) ])([ Halogen_HTML_Core.text(asset.name) ]), Halogen_HTML_Elements.span([ Lattice_UI_Core.cls([ "lattice-asset-meta" ]), Halogen_HTML_Properties.attr("style")(assetMetaStyle) ])([ Halogen_HTML_Core.text(asset.size) ]) ]) ]);
    };
};
var renderAssetGrid = function (state) {
    var filteredAssets = filterAssets(state);
    return Halogen_HTML_Elements.main([ Lattice_UI_Core.cls([ "lattice-assets-grid-container" ]), Halogen_HTML_Properties.attr("style")(gridContainerStyle) ])([ (function () {
        var $52 = Data_Array.length(filteredAssets) === 0;
        if ($52) {
            return renderEmptyState(state);
        };
        return Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-assets-grid" ]), Halogen_HTML_Properties.attr("style")(gridStyle) ])(map(renderAssetCard(state))(filteredAssets));
    })() ]);
};
var actionsStyle = "display: flex; gap: var(--lattice-space-3); align-items: center;";
var renderHeader = function (state) {
    return Halogen_HTML_Elements.header([ Lattice_UI_Core.cls([ "lattice-assets-header" ]), Halogen_HTML_Properties.attr("style")(headerStyle) ])([ Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-assets-title-section" ]) ])([ Halogen_HTML_Elements.h1([ Halogen_HTML_Properties.attr("style")(titleStyle) ])([ Halogen_HTML_Core.text("Asset Library") ]), Halogen_HTML_Elements.span([ Halogen_HTML_Properties.attr("style")(countStyle) ])([ Halogen_HTML_Core.text(show(Data_Array.length(state.assets)) + " assets") ]) ]), Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-assets-actions" ]), Halogen_HTML_Properties.attr("style")(actionsStyle) ])([ Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-search-wrapper" ]), Halogen_HTML_Properties.attr("style")(searchWrapperStyle) ])([ Halogen_HTML_Elements.input([ Lattice_UI_Core.cls([ "lattice-input" ]), Halogen_HTML_Properties.placeholder("Search assets..."), value(state.searchQuery), Halogen_HTML_Properties.attr("style")(searchInputStyle), Halogen_HTML_Events.onValueInput(SetSearch.create) ]) ]), Halogen_HTML_Elements.button([ Lattice_UI_Core.cls([ "lattice-btn", "lattice-btn-primary" ]), Halogen_HTML_Events.onClick(function (v) {
        return ImportAsset.value;
    }) ])([ Halogen_HTML_Core.text("Import") ]) ]) ]);
};
var render = function (state) {
    return Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-page", "lattice-assets-page" ]), Halogen_HTML_Properties.attr("style")(pageStyle) ])([ Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-assets-container" ]), Halogen_HTML_Properties.attr("style")(containerStyle) ])([ renderHeader(state), Halogen_HTML_Elements.div([ Lattice_UI_Core.cls([ "lattice-assets-content" ]), Halogen_HTML_Properties.attr("style")(contentStyle) ])([ renderSidebar(state), renderAssetGrid(state) ]) ]) ]);
};
var component = function (dictMonadAff) {
    return Halogen_Component.mkComponent({
        initialState: Data_Function["const"](initialState),
        render: render,
        "eval": Halogen_Component.mkEval({
            handleQuery: Halogen_Component.defaultEval.handleQuery,
            receive: Halogen_Component.defaultEval.receive,
            finalize: Halogen_Component.defaultEval.finalize,
            handleAction: handleAction(dictMonadAff),
            initialize: new Data_Maybe.Just(Initialize.value)
        })
    });
};
export {
    component
};
//# sourceMappingURL=index.js.map
