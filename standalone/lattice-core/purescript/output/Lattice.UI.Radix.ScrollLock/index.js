// Generated by purs version 0.15.15
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Effect from "../Effect/index.js";
import * as Effect_Ref from "../Effect.Ref/index.js";
import * as Effect_Unsafe from "../Effect.Unsafe/index.js";
import * as Web_DOM_DOMTokenList from "../Web.DOM.DOMTokenList/index.js";
import * as Web_DOM_Element from "../Web.DOM.Element/index.js";
import * as Web_HTML from "../Web.HTML/index.js";
import * as Web_HTML_HTMLDocument from "../Web.HTML.HTMLDocument/index.js";
import * as Web_HTML_HTMLHtmlElement from "../Web.HTML.HTMLHtmlElement/index.js";
import * as Web_HTML_Window from "../Web.HTML.Window/index.js";
var when = /* #__PURE__ */ Control_Applicative.when(Effect.applicativeEffect);
var withDocumentElement = function (action) {
    return function __do() {
        var win = Web_HTML.window();
        var doc = Web_HTML_Window.document(win)();
        var mDocEl = Web_HTML_HTMLDocument.documentElement(doc)();
        if (mDocEl instanceof Data_Maybe.Just) {
            return action(Web_HTML_HTMLHtmlElement.toElement(mDocEl.value0))();
        };
        if (mDocEl instanceof Data_Maybe.Nothing) {
            return Data_Unit.unit;
        };
        throw new Error("Failed pattern match at Lattice.UI.Radix.ScrollLock (line 78, column 3 - line 80, column 25): " + [ mDocEl.constructor.name ]);
    };
};
var scrollLockedClass = "lattice-scroll-locked";
var lockCountRef = /* #__PURE__ */ Effect_Unsafe.unsafePerformEffect(/* #__PURE__ */ Effect_Ref["new"](0));
var unlock = function __do() {
    var count = Effect_Ref.read(lockCountRef)();
    return when(count > 0)(function __do() {
        Effect_Ref.write(count - 1 | 0)(lockCountRef)();
        return when(count === 1)(withDocumentElement(function (el) {
            return function __do() {
                var classList = Web_DOM_Element.classList(el)();
                return Web_DOM_DOMTokenList.remove(classList)(scrollLockedClass)();
            };
        }))();
    })();
};
var lock = function __do() {
    var count = Effect_Ref.read(lockCountRef)();
    Effect_Ref.write(count + 1 | 0)(lockCountRef)();
    return when(count === 0)(withDocumentElement(function (el) {
        return function __do() {
            var classList = Web_DOM_Element.classList(el)();
            return Web_DOM_DOMTokenList.add(classList)(scrollLockedClass)();
        };
    }))();
};
export {
    lock,
    unlock
};
//# sourceMappingURL=index.js.map
