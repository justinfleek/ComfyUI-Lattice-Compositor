// Generated by purs version 0.15.15
import * as Data_Generic_Rep from "../Data.Generic.Rep/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Number from "../Data.Number/index.js";
import * as Data_Show_Generic from "../Data.Show.Generic/index.js";
import * as $$Math from "../Math/index.js";
var genericShowConstructor = /* #__PURE__ */ Data_Show_Generic.genericShowConstructor(Data_Show_Generic.genericShowArgsNoArguments);
var ModelPinhole = /* #__PURE__ */ (function () {
    function ModelPinhole() {

    };
    ModelPinhole.value = new ModelPinhole();
    return ModelPinhole;
})();
var ModelRadial = /* #__PURE__ */ (function () {
    function ModelRadial() {

    };
    ModelRadial.value = new ModelRadial();
    return ModelRadial;
})();
var ModelBrown = /* #__PURE__ */ (function () {
    function ModelBrown() {

    };
    ModelBrown.value = new ModelBrown();
    return ModelBrown;
})();
var ModelFisheye = /* #__PURE__ */ (function () {
    function ModelFisheye() {

    };
    ModelFisheye.value = new ModelFisheye();
    return ModelFisheye;
})();
var genericCameraModel_ = {
    to: function (x) {
        if (x instanceof Data_Generic_Rep.Inl) {
            return ModelPinhole.value;
        };
        if (x instanceof Data_Generic_Rep.Inr && x.value0 instanceof Data_Generic_Rep.Inl) {
            return ModelRadial.value;
        };
        if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0 instanceof Data_Generic_Rep.Inl)) {
            return ModelBrown.value;
        };
        if (x instanceof Data_Generic_Rep.Inr && (x.value0 instanceof Data_Generic_Rep.Inr && x.value0.value0 instanceof Data_Generic_Rep.Inr)) {
            return ModelFisheye.value;
        };
        throw new Error("Failed pattern match at Lattice.Schemas.Imports.CameraTrackingSchema (line 65, column 1 - line 65, column 38): " + [ x.constructor.name ]);
    },
    from: function (x) {
        if (x instanceof ModelPinhole) {
            return new Data_Generic_Rep.Inl(Data_Generic_Rep.NoArguments.value);
        };
        if (x instanceof ModelRadial) {
            return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(Data_Generic_Rep.NoArguments.value));
        };
        if (x instanceof ModelBrown) {
            return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inl(Data_Generic_Rep.NoArguments.value)));
        };
        if (x instanceof ModelFisheye) {
            return new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(new Data_Generic_Rep.Inr(Data_Generic_Rep.NoArguments.value)));
        };
        throw new Error("Failed pattern match at Lattice.Schemas.Imports.CameraTrackingSchema (line 65, column 1 - line 65, column 38): " + [ x.constructor.name ]);
    }
};
var showCameraModel = {
    show: /* #__PURE__ */ Data_Show_Generic.genericShow(genericCameraModel_)(/* #__PURE__ */ Data_Show_Generic.genericShowSum(/* #__PURE__ */ genericShowConstructor({
        reflectSymbol: function () {
            return "ModelPinhole";
        }
    }))(/* #__PURE__ */ Data_Show_Generic.genericShowSum(/* #__PURE__ */ genericShowConstructor({
        reflectSymbol: function () {
            return "ModelRadial";
        }
    }))(/* #__PURE__ */ Data_Show_Generic.genericShowSum(/* #__PURE__ */ genericShowConstructor({
        reflectSymbol: function () {
            return "ModelBrown";
        }
    }))(/* #__PURE__ */ genericShowConstructor({
        reflectSymbol: function () {
            return "ModelFisheye";
        }
    })))))
};
var eqCameraModel = {
    eq: function (x) {
        return function (y) {
            if (x instanceof ModelPinhole && y instanceof ModelPinhole) {
                return true;
            };
            if (x instanceof ModelRadial && y instanceof ModelRadial) {
                return true;
            };
            if (x instanceof ModelBrown && y instanceof ModelBrown) {
                return true;
            };
            if (x instanceof ModelFisheye && y instanceof ModelFisheye) {
                return true;
            };
            return false;
        };
    }
};
var quaternionTolerance = 0.1;
var maxTrackPoints3D = 100000;
var maxTrackPoints2D = 1000000;
var maxTrackIDs = 1000;
var maxTangentialDistortion = 1.0;
var maxFrames = 100000;
var maxFPS = 120.0;
var maxDistortion = 10.0;
var maxDimension = 16384;
var maxCameraPoses = 100000;
var maxBlenderTracks = 10000;
var maxBlenderPoints = 10000000;
var isValidVector3 = function (v) {
    return Data_Number["isFinite"](v.x) && (Data_Number["isFinite"](v.y) && Data_Number["isFinite"](v.z));
};
var isValidVector2 = function (v) {
    return Data_Number["isFinite"](v.x) && Data_Number["isFinite"](v.y);
};
var isValidTrackingMetadata = function (m) {
    return m.sourceWidth > 0 && (m.sourceWidth <= maxDimension && (m.sourceHeight > 0 && (m.sourceHeight <= maxDimension && (m.frameRate > 0.0 && (m.frameRate <= maxFPS && (m.frameCount > 0 && m.frameCount <= maxFrames))))));
};
var isValidRGBColor = function (c) {
    return c.r >= 0 && (c.r <= 255 && (c.g >= 0 && (c.g <= 255 && (c.b >= 0 && c.b <= 255))));
};
var isValidQuaternion = function (q) {
    var len = $$Math.sqrt(q.w * q.w + q.x * q.x + q.y * q.y + q.z * q.z);
    return $$Math.abs(len - 1.0) < quaternionTolerance;
};
var isValidDistortion = function (d) {
    return Data_Maybe.maybe(true)(function (k) {
        return $$Math.abs(k) <= maxDistortion;
    })(d.k1) && (Data_Maybe.maybe(true)(function (k) {
        return $$Math.abs(k) <= maxDistortion;
    })(d.k2) && (Data_Maybe.maybe(true)(function (k) {
        return $$Math.abs(k) <= maxDistortion;
    })(d.k3) && (Data_Maybe.maybe(true)(function (p) {
        return $$Math.abs(p) <= maxTangentialDistortion;
    })(d.p1) && Data_Maybe.maybe(true)(function (p) {
        return $$Math.abs(p) <= maxTangentialDistortion;
    })(d.p2))));
};
var isValidCameraPose = function (cp) {
    return cp.frame <= maxFrames && (isValidVector3(cp.position) && isValidQuaternion(cp.rotation));
};
var isValidCameraIntrinsics = function (ci) {
    return ci.focalLength > 0.0 && (ci.focalLength <= 10000.0 && (ci.width > 0 && (ci.width <= maxDimension && (ci.height > 0 && (ci.height <= maxDimension && isValidVector2(ci.principalPoint))))));
};
var cameraModelToString = function (v) {
    if (v instanceof ModelPinhole) {
        return "pinhole";
    };
    if (v instanceof ModelRadial) {
        return "radial";
    };
    if (v instanceof ModelBrown) {
        return "brown";
    };
    if (v instanceof ModelFisheye) {
        return "fisheye";
    };
    throw new Error("Failed pattern match at Lattice.Schemas.Imports.CameraTrackingSchema (line 79, column 23 - line 83, column 28): " + [ v.constructor.name ]);
};
var cameraModelFromString = function (v) {
    if (v === "pinhole") {
        return new Data_Maybe.Just(ModelPinhole.value);
    };
    if (v === "radial") {
        return new Data_Maybe.Just(ModelRadial.value);
    };
    if (v === "brown") {
        return new Data_Maybe.Just(ModelBrown.value);
    };
    if (v === "fisheye") {
        return new Data_Maybe.Just(ModelFisheye.value);
    };
    return Data_Maybe.Nothing.value;
};
export {
    ModelPinhole,
    ModelRadial,
    ModelBrown,
    ModelFisheye,
    cameraModelFromString,
    cameraModelToString,
    maxDimension,
    maxFrames,
    maxFPS,
    maxTrackIDs,
    maxCameraPoses,
    maxTrackPoints3D,
    maxTrackPoints2D,
    maxBlenderTracks,
    maxBlenderPoints,
    maxDistortion,
    maxTangentialDistortion,
    quaternionTolerance,
    isValidVector2,
    isValidVector3,
    isValidQuaternion,
    isValidRGBColor,
    isValidDistortion,
    isValidCameraIntrinsics,
    isValidCameraPose,
    isValidTrackingMetadata,
    eqCameraModel,
    genericCameraModel_,
    showCameraModel
};
//# sourceMappingURL=index.js.map
