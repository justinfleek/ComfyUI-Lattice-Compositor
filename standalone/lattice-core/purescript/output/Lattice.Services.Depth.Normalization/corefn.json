{"builtWith":"0.15.15","comments":[{"BlockComment":"\n  Lattice.Services.Depth.Normalization - Depth Value Normalization\n\n  Pure mathematical functions for depth map processing:\n  - Depth normalization to [0, 1] range\n  - Bit depth conversion (8-bit, 16-bit, 32-bit)\n  - Depth inversion (near/far swap)\n\n  Source: ui/src/services/export/depthRenderer.ts (lines 600-676)\n"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[45,25],"start":[45,24]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[45,34],"start":[45,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[46,17],"start":[46,15]}},"type":"Var","value":{"identifier":"lessThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[46,21],"start":[46,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"lessThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[53,26],"start":[53,25]}},"type":"Var","value":{"identifier":"div","moduleName":["Data","EuclideanRing"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[53,32],"start":[53,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"euclideanRingNumber","moduleName":["Data","EuclideanRing"]}},"type":"App"},"identifier":"div"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[132,44],"start":[132,43]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[132,57],"start":[132,34]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"lessThan"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[59,12],"start":[59,11]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[59,16],"start":[59,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThan"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[112,31],"start":[112,30]}},"type":"Var","value":{"identifier":"mul","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[112,39],"start":[112,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"mul"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[99,13],"start":[99,12]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[99,63],"start":[99,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[43,45],"start":[43,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[43,45],"start":[43,1]}},"argument":"minDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[43,45],"start":[43,1]}},"argument":"maxDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[46,41],"start":[45,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[45,34],"start":[45,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[45,34],"start":[45,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,23],"start":[45,15]}},"type":"Var","value":{"identifier":"maxDepth","sourcePos":[44,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[45,34],"start":[45,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,34],"start":[45,26]}},"type":"Var","value":{"identifier":"minDepth","sourcePos":[44,1]}},"type":"App"},"identifier":"range"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[46,41],"start":[46,6]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[46,41],"start":[46,6]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[46,30],"start":[46,27]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[46,41],"start":[46,6]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[46,41],"start":[46,36]}},"type":"Var","value":{"identifier":"range","sourcePos":[45,7]}},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThanOrEq","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[46,21],"start":[46,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[46,14],"start":[46,9]}},"type":"Var","value":{"identifier":"range","sourcePos":[45,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[46,21],"start":[46,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[46,21],"start":[46,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"safeDepthRange"},{"annotation":{"meta":null,"sourceSpan":{"end":[50,55],"start":[50,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[50,55],"start":[50,1]}},"argument":"depth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[50,55],"start":[50,1]}},"argument":"minDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[50,55],"start":[50,1]}},"argument":"maxDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[53,32],"start":[52,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[52,47],"start":[52,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[52,29],"start":[52,15]}},"type":"Var","value":{"identifier":"safeDepthRange","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[52,38],"start":[52,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[52,38],"start":[52,30]}},"type":"Var","value":{"identifier":"minDepth","sourcePos":[51,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[52,47],"start":[52,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[52,47],"start":[52,39]}},"type":"Var","value":{"identifier":"maxDepth","sourcePos":[51,1]}},"type":"App"},"identifier":"range"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[53,32],"start":[53,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[53,23],"start":[53,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[53,12],"start":[53,7]}},"type":"Var","value":{"identifier":"depth","sourcePos":[51,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[53,23],"start":[53,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[53,23],"start":[53,15]}},"type":"Var","value":{"identifier":"minDepth","sourcePos":[51,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[53,32],"start":[53,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[53,32],"start":[53,27]}},"type":"Var","value":{"identifier":"range","sourcePos":[52,7]}},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"normalizeDepth"},{"annotation":{"meta":null,"sourceSpan":{"end":[131,40],"start":[131,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[131,40],"start":[131,1]}},"argument":"newDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[131,40],"start":[131,1]}},"argument":"currentDepth","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[132,57],"start":[132,34]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[132,42],"start":[132,34]}},"type":"Var","value":{"identifier":"newDepth","sourcePos":[132,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[132,57],"start":[132,34]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[132,57],"start":[132,45]}},"type":"Var","value":{"identifier":"currentDepth","sourcePos":[132,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"isCloser"},{"annotation":{"meta":null,"sourceSpan":{"end":[84,27],"start":[84,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[84,27],"start":[84,1]}},"argument":"value","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[85,41],"start":[85,19]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[85,27],"start":[85,19]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[85,33],"start":[85,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,33],"start":[85,28]}},"type":"Var","value":{"identifier":"value","sourcePos":[85,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[85,41],"start":[85,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,41],"start":[85,36]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"Abs"},"identifier":"fromUint8"},{"annotation":{"meta":null,"sourceSpan":{"end":[88,28],"start":[88,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[88,28],"start":[88,1]}},"argument":"value","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[89,44],"start":[89,20]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[89,28],"start":[89,20]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[89,34],"start":[89,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[89,34],"start":[89,29]}},"type":"Var","value":{"identifier":"value","sourcePos":[89,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[89,44],"start":[89,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[89,44],"start":[89,37]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":65535}},"type":"App"},"type":"Abs"},"identifier":"fromUint16"},{"annotation":{"meta":null,"sourceSpan":{"end":[135,48],"start":[135,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[135,48],"start":[135,1]}},"argument":"newDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[135,48],"start":[135,1]}},"argument":"currentDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[137,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[137,3]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[137,50],"start":[137,42]}},"type":"Var","value":{"identifier":"newDepth","sourcePos":[136,1]}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[137,3]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[137,56]}},"type":"Var","value":{"identifier":"currentDepth","sourcePos":[136,1]}},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[137,14],"start":[137,6]}},"type":"Var","value":{"identifier":"isCloser","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[137,23],"start":[137,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[137,23],"start":[137,15]}},"type":"Var","value":{"identifier":"newDepth","sourcePos":[136,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[137,36],"start":[137,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[137,36],"start":[137,24]}},"type":"Var","value":{"identifier":"currentDepth","sourcePos":[136,1]}},"type":"App"}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"depthBufferUpdate"},{"annotation":{"meta":null,"sourceSpan":{"end":[56,36],"start":[56,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[56,36],"start":[56,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[56,36],"start":[56,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[57,22],"start":[57,17]}},"binderType":"VarBinder","identifier":"value1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[58,22],"start":[58,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[58,16],"start":[58,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[58,10],"start":[58,5]}},"type":"Var","value":{"identifier":"value1","sourcePos":[57,17]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[58,16],"start":[58,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[58,16],"start":[58,13]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[59,22],"start":[59,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[59,16],"start":[59,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,10],"start":[59,5]}},"type":"Var","value":{"identifier":"value1","sourcePos":[57,17]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[59,16],"start":[59,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,16],"start":[59,13]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[60,24],"start":[60,19]}},"type":"Var","value":{"identifier":"value1","sourcePos":[57,17]}},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[60,14],"start":[60,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[60,24],"start":[57,1]}},"type":"Var","value":{"identifier":"value","sourcePos":[57,17]}}],"type":"Case"},"type":"Abs"},"identifier":"clampNormalized"},{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"argument":"worldDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"argument":"nearClip","body":{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"argument":"farClip","body":{"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[105,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[105,3]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[106,11],"start":[106,8]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[105,3]}},"binderType":"NullBinder"}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[107,23],"start":[107,8]}},"type":"Var","value":{"identifier":"clampNormalized","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[107,8]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[107,71],"start":[107,25]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[107,47],"start":[107,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[107,36],"start":[107,26]}},"type":"Var","value":{"identifier":"worldDepth","sourcePos":[104,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[107,47],"start":[107,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[107,47],"start":[107,39]}},"type":"Var","value":{"identifier":"nearClip","sourcePos":[104,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[107,71],"start":[107,25]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[107,70],"start":[107,52]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[107,59],"start":[107,52]}},"type":"Var","value":{"identifier":"farClip","sourcePos":[104,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[107,70],"start":[107,52]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[107,70],"start":[107,62]}},"type":"Var","value":{"identifier":"nearClip","sourcePos":[104,1]}},"type":"App"},"type":"App"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThanOrEq","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,25],"start":[105,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,13],"start":[105,6]}},"type":"Var","value":{"identifier":"farClip","sourcePos":[104,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,25],"start":[105,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,25],"start":[105,17]}},"type":"Var","value":{"identifier":"nearClip","sourcePos":[104,1]}},"type":"App"}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"fromWorldDepth"},{"annotation":{"meta":null,"sourceSpan":{"end":[64,32],"start":[64,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[64,32],"start":[64,1]}},"argument":"normalized","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[65,58],"start":[65,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[65,29],"start":[65,26]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[65,58],"start":[65,26]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[65,47],"start":[65,32]}},"type":"Var","value":{"identifier":"clampNormalized","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[65,58],"start":[65,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[65,58],"start":[65,48]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[65,1]}},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"invertDepth"},{"annotation":{"meta":null,"sourceSpan":{"end":[110,45],"start":[110,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[110,45],"start":[110,1]}},"argument":"normalized","body":{"annotation":{"meta":null,"sourceSpan":{"end":[110,45],"start":[110,1]}},"argument":"farClip","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,3]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[112,18],"start":[112,3]}},"type":"Var","value":{"identifier":"clampNormalized","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[112,29],"start":[112,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[112,29],"start":[112,19]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[111,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,32]}},"type":"Var","value":{"identifier":"farClip","sourcePos":[111,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"scaleByFarClip"},{"annotation":{"meta":null,"sourceSpan":{"end":[78,26],"start":[78,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[78,26],"start":[78,1]}},"argument":"normalized","body":{"annotation":{"meta":null,"sourceSpan":{"end":[81,31],"start":[80,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[80,43],"start":[80,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[80,32],"start":[80,17]}},"type":"Var","value":{"identifier":"clampNormalized","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[80,43],"start":[80,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[80,43],"start":[80,33]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[79,1]}},"type":"App"},"identifier":"clamped"}],"expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[81,11],"start":[81,6]}},"type":"Var","value":{"identifier":"round","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[81,31],"start":[81,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[81,30],"start":[81,13]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[81,20],"start":[81,13]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[80,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[81,30],"start":[81,13]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[81,30],"start":[81,23]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":65535}},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"identifier":"toUint16"},{"annotation":{"meta":null,"sourceSpan":{"end":[72,25],"start":[72,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[72,25],"start":[72,1]}},"argument":"normalized","body":{"annotation":{"meta":null,"sourceSpan":{"end":[75,29],"start":[74,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[74,43],"start":[74,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[74,32],"start":[74,17]}},"type":"Var","value":{"identifier":"clampNormalized","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[74,43],"start":[74,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[74,43],"start":[74,33]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[73,1]}},"type":"App"},"identifier":"clamped"}],"expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[75,11],"start":[75,6]}},"type":"Var","value":{"identifier":"round","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[75,29],"start":[75,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[75,28],"start":[75,13]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[75,20],"start":[75,13]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[74,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[75,28],"start":[75,13]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[75,28],"start":[75,23]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"identifier":"toUint8"},{"annotation":{"meta":null,"sourceSpan":{"end":[120,68],"start":[120,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[120,68],"start":[120,1]}},"argument":"depth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,68],"start":[120,1]}},"argument":"minDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,68],"start":[120,1]}},"argument":"maxDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,68],"start":[120,1]}},"argument":"invert","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,68],"start":[120,1]}},"argument":"bitDepth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[128,31],"start":[122,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[122,58],"start":[122,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[122,34],"start":[122,20]}},"type":"Var","value":{"identifier":"normalizeDepth","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[122,40],"start":[122,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,40],"start":[122,35]}},"type":"Var","value":{"identifier":"depth","sourcePos":[121,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[122,49],"start":[122,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,49],"start":[122,41]}},"type":"Var","value":{"identifier":"minDepth","sourcePos":[121,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[122,58],"start":[122,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,58],"start":[122,50]}},"type":"Var","value":{"identifier":"maxDepth","sourcePos":[121,1]}},"type":"App"},"identifier":"normalized"},{"annotation":{"meta":null,"sourceSpan":{"end":[123,43],"start":[123,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[123,32],"start":[123,17]}},"type":"Var","value":{"identifier":"clampNormalized","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[123,43],"start":[123,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[123,43],"start":[123,33]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[122,7]}},"type":"App"},"identifier":"clamped"},{"annotation":{"meta":null,"sourceSpan":{"end":[124,65],"start":[124,7]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[124,65],"start":[124,18]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[124,65],"start":[124,18]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[124,44],"start":[124,33]}},"type":"Var","value":{"identifier":"invertDepth","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[124,52],"start":[124,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[124,52],"start":[124,45]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[123,7]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[124,65],"start":[124,18]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[124,65],"start":[124,58]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[123,7]}},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[124,27],"start":[124,21]}},"type":"Var","value":{"identifier":"invert","sourcePos":[121,1]}}],"type":"Case"},"identifier":"inverted"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[128,31],"start":[125,6]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[126,9],"start":[126,8]}},"binderType":"LiteralBinder","literal":{"literalType":"IntLiteral","value":8}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[126,21],"start":[126,14]}},"type":"Var","value":{"identifier":"toUint8","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,30],"start":[126,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,30],"start":[126,22]}},"type":"Var","value":{"identifier":"inverted","sourcePos":[124,7]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[127,10],"start":[127,8]}},"binderType":"LiteralBinder","literal":{"literalType":"IntLiteral","value":16}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[127,22],"start":[127,14]}},"type":"Var","value":{"identifier":"toUint16","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[127,31],"start":[127,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[127,31],"start":[127,23]}},"type":"Var","value":{"identifier":"inverted","sourcePos":[124,7]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[128,9],"start":[128,8]}},"binderType":"NullBinder"}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[128,22],"start":[128,14]}},"type":"Var","value":{"identifier":"toUint16","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[128,31],"start":[128,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[128,31],"start":[128,23]}},"type":"Var","value":{"identifier":"inverted","sourcePos":[124,7]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[125,19],"start":[125,11]}},"type":"Var","value":{"identifier":"bitDepth","sourcePos":[121,1]}}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"convertDepth"},{"annotation":{"meta":null,"sourceSpan":{"end":[97,53],"start":[97,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[97,53],"start":[97,1]}},"argument":"normalized","body":{"annotation":{"meta":null,"sourceSpan":{"end":[97,53],"start":[97,1]}},"argument":"nearClip","body":{"annotation":{"meta":null,"sourceSpan":{"end":[97,53],"start":[97,1]}},"argument":"farClip","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,63],"start":[99,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,11],"start":[99,3]}},"type":"Var","value":{"identifier":"nearClip","sourcePos":[98,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,63],"start":[99,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,63],"start":[99,3]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[99,29],"start":[99,14]}},"type":"Var","value":{"identifier":"clampNormalized","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,40],"start":[99,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,40],"start":[99,30]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[98,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,63],"start":[99,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Depth","Normalization"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,62],"start":[99,44]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,51],"start":[99,44]}},"type":"Var","value":{"identifier":"farClip","sourcePos":[98,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,62],"start":[99,44]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,62],"start":[99,54]}},"type":"Var","value":{"identifier":"nearClip","sourcePos":[98,1]}},"type":"App"},"type":"App"},"type":"App"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"toWorldDepth"}],"exports":["safeDepthRange","normalizeDepth","clampNormalized","invertDepth","toUint8","toUint16","fromUint8","fromUint16","toWorldDepth","fromWorldDepth","scaleByFarClip","convertDepth","isCloser","depthBufferUpdate"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Data","Boolean"]},{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Data","EuclideanRing"]},{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Data","Int"]},{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Lattice","Services","Depth","Normalization"]},{"annotation":{"meta":null,"sourceSpan":{"end":[33,15],"start":[33,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[137,68],"start":[12,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","Depth","Normalization"],"modulePath":"src/Lattice/Services/Depth/Normalization.purs","reExports":{},"sourceSpan":{"end":[137,68],"start":[12,1]}}