{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Services.Audio.BlendTransitions - IPAdapter Blend Transitions"},{"LineComment":" |"},{"LineComment":" | Pure mathematical functions for blending between values/images:"},{"LineComment":" | - Step blend (hard cut)"},{"LineComment":" | - Linear blend (crossfade)"},{"LineComment":" | - Smooth blend (smoothstep crossfade)"},{"LineComment":" |"},{"LineComment":" | Used for IPAdapter weight scheduling and general audio-reactive transitions."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/services/audioReactiveMapping.ts (createIPAdapterSchedule)"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[90,42],"start":[90,41]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[90,48],"start":[90,37]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[122,24],"start":[122,22]}},"type":"Var","value":{"identifier":"eq","moduleName":["Data","Eq"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[122,26],"start":[122,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eqInt","moduleName":["Data","Eq"]}},"type":"App"},"identifier":"eq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[124,35],"start":[124,34]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[124,56],"start":[124,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringInt","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub1"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[125,40],"start":[125,39]}},"type":"Var","value":{"identifier":"div","moduleName":["Data","EuclideanRing"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[125,66],"start":[125,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"euclideanRingNumber","moduleName":["Data","EuclideanRing"]}},"type":"App"},"identifier":"div"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[55,36],"start":[55,34]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[55,40],"start":[55,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[69,13],"start":[69,12]}},"type":"Var","value":{"identifier":"mul","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[69,29],"start":[69,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"mul"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[104,40],"start":[104,37]}},"type":"Var","value":{"identifier":"mod","moduleName":["Data","EuclideanRing"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[104,52],"start":[104,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"euclideanRingInt","moduleName":["Data","EuclideanRing"]}},"type":"App"},"identifier":"mod"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[105,28],"start":[105,27]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[105,30],"start":[105,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringInt","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[40,11],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[40,11],"start":[37,1]}},"constructorName":"Step","fieldNames":[],"type":"Constructor","typeName":"BlendMode"},"identifier":"Step"},{"annotation":{"meta":null,"sourceSpan":{"end":[40,11],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[40,11],"start":[37,1]}},"constructorName":"Linear","fieldNames":[],"type":"Constructor","typeName":"BlendMode"},"identifier":"Linear"},{"annotation":{"meta":null,"sourceSpan":{"end":[40,11],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[40,11],"start":[37,1]}},"constructorName":"Smooth","fieldNames":[],"type":"Constructor","typeName":"BlendMode"},"identifier":"Smooth"},{"annotation":{"meta":null,"sourceSpan":{"end":[88,77],"start":[88,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[88,77],"start":[88,1]}},"argument":"blend","body":{"annotation":{"meta":null,"sourceSpan":{"end":[88,77],"start":[88,1]}},"argument":"minWeight","body":{"annotation":{"meta":null,"sourceSpan":{"end":[92,23],"start":[90,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[91,38],"start":[91,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[91,22],"start":[91,14]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,32],"start":[91,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[91,32],"start":[91,23]}},"type":"Var","value":{"identifier":"minWeight","sourcePos":[89,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,38],"start":[91,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[91,38],"start":[91,33]}},"type":"Var","value":{"identifier":"blend","sourcePos":[89,1]}},"type":"App"},"identifier":"next"},{"annotation":{"meta":null,"sourceSpan":{"end":[90,49],"start":[90,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[90,25],"start":[90,17]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[90,35],"start":[90,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[90,35],"start":[90,26]}},"type":"Var","value":{"identifier":"minWeight","sourcePos":[89,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[90,49],"start":[90,17]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[90,48],"start":[90,37]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[90,40],"start":[90,37]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[90,48],"start":[90,37]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[90,48],"start":[90,43]}},"type":"Var","value":{"identifier":"blend","sourcePos":[89,1]}},"type":"App"},"type":"App"},"identifier":"current"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[92,23],"start":[92,6]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["current",{"annotation":{"meta":null,"sourceSpan":{"end":[92,15],"start":[92,8]}},"type":"Var","value":{"identifier":"current","sourcePos":[90,7]}}],["next",{"annotation":{"meta":null,"sourceSpan":{"end":[92,21],"start":[92,17]}},"type":"Var","value":{"identifier":"next","sourcePos":[91,7]}}]]}},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"twoImageWeights"},{"annotation":{"meta":null,"sourceSpan":{"end":[120,50],"start":[120,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[120,50],"start":[120,1]}},"argument":"currentFrame","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,50],"start":[120,1]}},"argument":"transitionStartFrame","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,50],"start":[120,1]}},"argument":"transitionLength","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,50],"start":[120,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[121,32],"start":[121,20]}},"binderType":"VarBinder","identifier":"currentFrame1"},{"annotation":{"meta":null,"sourceSpan":{"end":[121,53],"start":[121,33]}},"binderType":"VarBinder","identifier":"transitionStartFrame1"},{"annotation":{"meta":null,"sourceSpan":{"end":[121,70],"start":[121,54]}},"binderType":"VarBinder","identifier":"transitionLength1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[122,32],"start":[122,29]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eq","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[122,26],"start":[122,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,21],"start":[122,5]}},"type":"Var","value":{"identifier":"transitionLength1","sourcePos":[121,54]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[122,26],"start":[122,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,26],"start":[122,25]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[126,46],"start":[124,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[124,56],"start":[124,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub1","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[124,56],"start":[124,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[124,33],"start":[124,21]}},"type":"Var","value":{"identifier":"currentFrame1","sourcePos":[121,20]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[124,56],"start":[124,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[124,56],"start":[124,36]}},"type":"Var","value":{"identifier":"transitionStartFrame1","sourcePos":[121,33]}},"type":"App"},"identifier":"elapsed"},{"annotation":{"meta":null,"sourceSpan":{"end":[125,66],"start":[125,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[125,66],"start":[125,22]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[125,30],"start":[125,22]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[125,38],"start":[125,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[125,38],"start":[125,31]}},"type":"Var","value":{"identifier":"elapsed","sourcePos":[124,11]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[125,66],"start":[125,22]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[125,49],"start":[125,41]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[125,66],"start":[125,41]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[125,66],"start":[125,50]}},"type":"Var","value":{"identifier":"transitionLength1","sourcePos":[121,54]}},"type":"App"},"type":"App"},"identifier":"progress"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[126,18],"start":[126,10]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,22],"start":[126,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,22],"start":[126,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,46],"start":[126,10]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[126,32],"start":[126,24]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,36],"start":[126,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,36],"start":[126,33]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,45],"start":[126,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,45],"start":[126,37]}},"type":"Var","value":{"identifier":"progress","sourcePos":[125,11]}},"type":"App"},"type":"App"},"type":"Let"},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[123,14],"start":[123,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[126,46],"start":[121,1]}},"type":"Var","value":{"identifier":"currentFrame","sourcePos":[121,20]}},{"annotation":{"meta":null,"sourceSpan":{"end":[126,46],"start":[121,1]}},"type":"Var","value":{"identifier":"transitionStartFrame","sourcePos":[121,33]}},{"annotation":{"meta":null,"sourceSpan":{"end":[126,46],"start":[121,1]}},"type":"Var","value":{"identifier":"transitionLength","sourcePos":[121,54]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"transitionProgress"},{"annotation":{"meta":null,"sourceSpan":{"end":[54,30],"start":[54,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[54,30],"start":[54,1]}},"argument":"progress","body":{"annotation":{"meta":null,"sourceSpan":{"end":[55,58],"start":[55,22]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[55,58],"start":[55,22]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[55,49],"start":[55,46]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[55,58],"start":[55,22]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[55,58],"start":[55,55]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[55,40],"start":[55,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[55,33],"start":[55,25]}},"type":"Var","value":{"identifier":"progress","sourcePos":[55,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[55,40],"start":[55,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[55,40],"start":[55,37]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.5}},"type":"App"}],"type":"Case"},"type":"Abs"},"identifier":"stepBlend"},{"annotation":{"meta":null,"sourceSpan":{"end":[66,32],"start":[66,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[66,32],"start":[66,1]}},"argument":"progress","body":{"annotation":{"meta":null,"sourceSpan":{"end":[69,29],"start":[68,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[68,47],"start":[68,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[68,19],"start":[68,11]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[68,23],"start":[68,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,23],"start":[68,20]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[68,47],"start":[68,11]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[68,33],"start":[68,25]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[68,37],"start":[68,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,37],"start":[68,34]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[68,46],"start":[68,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,46],"start":[68,38]}},"type":"Var","value":{"identifier":"progress","sourcePos":[67,1]}},"type":"App"},"type":"App"},"identifier":"t"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[69,29],"start":[69,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[69,29],"start":[69,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,7],"start":[69,6]}},"type":"Var","value":{"identifier":"t","sourcePos":[68,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[69,29],"start":[69,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,11],"start":[69,10]}},"type":"Var","value":{"identifier":"t","sourcePos":[68,7]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[69,29],"start":[69,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[69,28],"start":[69,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,18],"start":[69,15]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":3}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[69,28],"start":[69,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[69,28],"start":[69,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,24],"start":[69,21]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":2}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[69,28],"start":[69,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,28],"start":[69,27]}},"type":"Var","value":{"identifier":"t","sourcePos":[68,7]}},"type":"App"},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"identifier":"smoothBlend"},{"annotation":{"meta":null,"sourceSpan":{"end":[60,32],"start":[60,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[60,32],"start":[60,1]}},"argument":"progress","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[61,32],"start":[61,24]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[61,36],"start":[61,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[61,36],"start":[61,33]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[61,60],"start":[61,24]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[61,46],"start":[61,38]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[61,50],"start":[61,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[61,50],"start":[61,47]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[61,59],"start":[61,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[61,59],"start":[61,51]}},"type":"Var","value":{"identifier":"progress","sourcePos":[61,1]}},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"linearBlend"},{"annotation":{"meta":null,"sourceSpan":{"end":[129,42],"start":[129,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[129,42],"start":[129,1]}},"argument":"progress","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[130,48],"start":[130,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[130,41],"start":[130,33]}},"type":"Var","value":{"identifier":"progress","sourcePos":[130,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[130,48],"start":[130,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[130,48],"start":[130,45]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"type":"Abs"},"identifier":"isTransitionComplete"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,44],"start":[42,1]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"Eq$Dict","moduleName":["Data","Eq"]}},"annotation":{"meta":null,"sourceSpan":{"end":[42,44],"start":[42,1]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["eq",{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"argument":"x","body":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"argument":"y","body":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Step","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Step","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Linear","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Linear","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Smooth","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Smooth","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"NullBinder"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"x","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"y","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"type":"Abs"}]]}},"type":"App"},"identifier":"eqBlendMode"},{"annotation":{"meta":null,"sourceSpan":{"end":[100,103],"start":[100,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[100,103],"start":[100,1]}},"argument":"imageCount","body":{"annotation":{"meta":null,"sourceSpan":{"end":[100,103],"start":[100,1]}},"argument":"progress","body":{"annotation":{"meta":null,"sourceSpan":{"end":[100,103],"start":[100,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[101,29],"start":[101,19]}},"binderType":"VarBinder","identifier":"imageCount1"},{"annotation":{"meta":null,"sourceSpan":{"end":[101,38],"start":[101,30]}},"binderType":"VarBinder","identifier":"progress1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[102,74],"start":[102,23]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["currentIndex",{"annotation":{"meta":null,"sourceSpan":{"end":[102,40],"start":[102,39]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}}],["nextIndex",{"annotation":{"meta":null,"sourceSpan":{"end":[102,54],"start":[102,53]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}}],["blendFactor",{"annotation":{"meta":null,"sourceSpan":{"end":[102,72],"start":[102,69]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}]]}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eq","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[102,20],"start":[102,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,15],"start":[102,5]}},"type":"Var","value":{"identifier":"imageCount1","sourcePos":[101,19]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[102,20],"start":[102,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,20],"start":[102,19]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[104,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[104,52],"start":[104,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mod","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[104,52],"start":[104,21]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[104,26],"start":[104,21]}},"type":"Var","value":{"identifier":"floor","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[104,35],"start":[104,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[104,35],"start":[104,27]}},"type":"Var","value":{"identifier":"progress1","sourcePos":[101,30]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[104,52],"start":[104,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[104,52],"start":[104,42]}},"type":"Var","value":{"identifier":"imageCount1","sourcePos":[101,19]}},"type":"App"},"identifier":"current"},{"annotation":{"meta":null,"sourceSpan":{"end":[105,48],"start":[105,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mod","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,48],"start":[105,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,30],"start":[105,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,26],"start":[105,19]}},"type":"Var","value":{"identifier":"current","sourcePos":[104,11]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,30],"start":[105,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,30],"start":[105,29]}},"type":"Literal","value":{"literalType":"IntLiteral","value":1}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,48],"start":[105,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,48],"start":[105,38]}},"type":"Var","value":{"identifier":"imageCount1","sourcePos":[101,19]}},"type":"App"},"identifier":"next"},{"annotation":{"meta":null,"sourceSpan":{"end":[106,55],"start":[106,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[106,55],"start":[106,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[106,27],"start":[106,19]}},"type":"Var","value":{"identifier":"progress1","sourcePos":[101,30]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[106,55],"start":[106,19]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[106,38],"start":[106,30]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[106,55],"start":[106,30]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[106,45],"start":[106,40]}},"type":"Var","value":{"identifier":"floor","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[106,54],"start":[106,40]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[106,54],"start":[106,46]}},"type":"Var","value":{"identifier":"progress1","sourcePos":[101,30]}},"type":"App"},"type":"App"},"type":"App"},"identifier":"blend"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[107,10]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["currentIndex",{"annotation":{"meta":null,"sourceSpan":{"end":[107,33],"start":[107,26]}},"type":"Var","value":{"identifier":"current","sourcePos":[104,11]}}],["nextIndex",{"annotation":{"meta":null,"sourceSpan":{"end":[107,50],"start":[107,46]}},"type":"Var","value":{"identifier":"next","sourcePos":[105,11]}}],["blendFactor",{"annotation":{"meta":null,"sourceSpan":{"end":[107,70],"start":[107,65]}},"type":"Var","value":{"identifier":"blend","sourcePos":[106,11]}}]]}},"type":"Let"},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[103,14],"start":[103,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[101,1]}},"type":"Var","value":{"identifier":"imageCount","sourcePos":[101,19]}},{"annotation":{"meta":null,"sourceSpan":{"end":[107,72],"start":[101,1]}},"type":"Var","value":{"identifier":"progress","sourcePos":[101,30]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"cycleBlendIndices"},{"annotation":{"meta":null,"sourceSpan":{"end":[72,48],"start":[72,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[72,48],"start":[72,1]}},"argument":"progress","body":{"annotation":{"meta":null,"sourceSpan":{"end":[72,48],"start":[72,1]}},"argument":"mode","body":{"annotation":{"meta":null,"sourceSpan":{"end":[76,33],"start":[73,32]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[74,7],"start":[74,3]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Step","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[74,20],"start":[74,11]}},"type":"Var","value":{"identifier":"stepBlend","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[74,29],"start":[74,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[74,29],"start":[74,21]}},"type":"Var","value":{"identifier":"progress","sourcePos":[73,1]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[75,9],"start":[75,3]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Linear","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[75,24],"start":[75,13]}},"type":"Var","value":{"identifier":"linearBlend","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[75,33],"start":[75,13]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[75,33],"start":[75,25]}},"type":"Var","value":{"identifier":"progress","sourcePos":[73,1]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[76,9],"start":[76,3]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Smooth","moduleName":["Lattice","Services","Audio","BlendTransitions"]},"typeName":{"identifier":"BlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[76,24],"start":[76,13]}},"type":"Var","value":{"identifier":"smoothBlend","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[76,33],"start":[76,13]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[76,33],"start":[76,25]}},"type":"Var","value":{"identifier":"progress","sourcePos":[73,1]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[73,41],"start":[73,37]}},"type":"Var","value":{"identifier":"mode","sourcePos":[73,1]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"applyBlendMode"},{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"argument":"currentFrame","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"argument":"transitionStartFrame","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"argument":"transitionLength","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"argument":"currentIndex","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"argument":"imageCount","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"argument":"blendMode","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"argument":"minWeight","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,106],"start":[141,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[143,39],"start":[143,27]}},"binderType":"VarBinder","identifier":"currentFrame1"},{"annotation":{"meta":null,"sourceSpan":{"end":[143,60],"start":[143,40]}},"binderType":"VarBinder","identifier":"transitionStartFrame1"},{"annotation":{"meta":null,"sourceSpan":{"end":[143,77],"start":[143,61]}},"binderType":"VarBinder","identifier":"transitionLength1"},{"annotation":{"meta":null,"sourceSpan":{"end":[144,39],"start":[144,27]}},"binderType":"VarBinder","identifier":"currentIndex1"},{"annotation":{"meta":null,"sourceSpan":{"end":[144,50],"start":[144,40]}},"binderType":"VarBinder","identifier":"imageCount1"},{"annotation":{"meta":null,"sourceSpan":{"end":[144,60],"start":[144,51]}},"binderType":"VarBinder","identifier":"blendMode1"},{"annotation":{"meta":null,"sourceSpan":{"end":[144,70],"start":[144,61]}},"binderType":"VarBinder","identifier":"minWeight1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[145,85],"start":[145,23]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["getWeight",{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[145,41],"start":[145,36]}},"type":"Var","value":{"identifier":"const","moduleName":["Data","Function"]}},"annotation":{"meta":null,"sourceSpan":{"end":[145,45],"start":[145,36]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[145,45],"start":[145,42]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"}],["newCurrentIndex",{"annotation":{"meta":null,"sourceSpan":{"end":[145,65],"start":[145,64]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}}],["isComplete",{"annotation":{"meta":null,"sourceSpan":{"end":[145,83],"start":[145,79]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}}]]}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eq","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[145,20],"start":[145,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[145,15],"start":[145,5]}},"type":"Var","value":{"identifier":"imageCount1","sourcePos":[144,40]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[145,20],"start":[145,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[145,20],"start":[145,19]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[147,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[147,91],"start":[147,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[147,40],"start":[147,22]}},"type":"Var","value":{"identifier":"transitionProgress","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[147,53],"start":[147,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[147,53],"start":[147,41]}},"type":"Var","value":{"identifier":"currentFrame1","sourcePos":[143,27]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[147,74],"start":[147,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[147,74],"start":[147,54]}},"type":"Var","value":{"identifier":"transitionStartFrame1","sourcePos":[143,40]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[147,91],"start":[147,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[147,91],"start":[147,75]}},"type":"Var","value":{"identifier":"transitionLength1","sourcePos":[143,61]}},"type":"App"},"identifier":"progress"},{"annotation":{"meta":null,"sourceSpan":{"end":[150,58],"start":[150,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mod","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[150,58],"start":[150,23]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[150,40],"start":[150,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[150,36],"start":[150,24]}},"type":"Var","value":{"identifier":"currentIndex1","sourcePos":[144,27]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[150,40],"start":[150,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[150,40],"start":[150,39]}},"type":"Literal","value":{"literalType":"IntLiteral","value":1}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[150,58],"start":[150,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[150,58],"start":[150,48]}},"type":"Var","value":{"identifier":"imageCount1","sourcePos":[144,40]}},"type":"App"},"identifier":"nextIndex"},{"annotation":{"meta":null,"sourceSpan":{"end":[148,51],"start":[148,11]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[148,42],"start":[148,22]}},"type":"Var","value":{"identifier":"isTransitionComplete","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[148,51],"start":[148,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[148,51],"start":[148,43]}},"type":"Var","value":{"identifier":"progress","sourcePos":[147,11]}},"type":"App"},"identifier":"complete"},{"annotation":{"meta":null,"sourceSpan":{"end":[158,66],"start":[158,11]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[158,66],"start":[158,22]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[158,66],"start":[158,22]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[158,48],"start":[158,39]}},"type":"Var","value":{"identifier":"nextIndex","sourcePos":[150,11]}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[158,66],"start":[158,22]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[158,66],"start":[158,54]}},"type":"Var","value":{"identifier":"currentIndex1","sourcePos":[144,27]}},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[158,33],"start":[158,25]}},"type":"Var","value":{"identifier":"complete","sourcePos":[148,11]}}],"type":"Case"},"identifier":"newIndex"},{"annotation":{"meta":null,"sourceSpan":{"end":[149,52],"start":[149,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[149,33],"start":[149,19]}},"type":"Var","value":{"identifier":"applyBlendMode","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[149,42],"start":[149,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[149,42],"start":[149,34]}},"type":"Var","value":{"identifier":"progress","sourcePos":[147,11]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[149,52],"start":[149,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[149,52],"start":[149,43]}},"type":"Var","value":{"identifier":"blendMode1","sourcePos":[144,51]}},"type":"App"},"identifier":"blend"},{"annotation":{"meta":null,"sourceSpan":{"end":[151,52],"start":[151,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[151,36],"start":[151,21]}},"type":"Var","value":{"identifier":"twoImageWeights","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[151,42],"start":[151,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[151,42],"start":[151,37]}},"type":"Var","value":{"identifier":"blend","sourcePos":[149,11]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[151,52],"start":[151,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[151,52],"start":[151,43]}},"type":"Var","value":{"identifier":"minWeight1","sourcePos":[144,61]}},"type":"App"},"identifier":"weights"},{"annotation":{"meta":null,"sourceSpan":{"end":[156,36],"start":[153,11]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[156,36],"start":[153,11]}},"argument":"i","body":{"annotation":{"meta":null,"sourceSpan":{"end":[156,36],"start":[153,11]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[153,22],"start":[153,21]}},"binderType":"VarBinder","identifier":"i1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[154,50],"start":[154,35]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[154,42],"start":[154,35]}},"type":"Var","value":{"identifier":"weights","sourcePos":[151,11]}},"fieldName":"current","type":"Accessor"},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eq","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[154,32],"start":[154,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[154,16],"start":[154,15]}},"type":"Var","value":{"identifier":"i1","sourcePos":[153,21]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[154,32],"start":[154,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[154,32],"start":[154,20]}},"type":"Var","value":{"identifier":"currentIndex1","sourcePos":[144,27]}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[155,44],"start":[155,32]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[155,39],"start":[155,32]}},"type":"Var","value":{"identifier":"weights","sourcePos":[151,11]}},"fieldName":"next","type":"Accessor"},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eq","moduleName":["Lattice","Services","Audio","BlendTransitions"]}},"annotation":{"meta":null,"sourceSpan":{"end":[155,29],"start":[155,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[155,16],"start":[155,15]}},"type":"Var","value":{"identifier":"i1","sourcePos":[153,21]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[155,29],"start":[155,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[155,29],"start":[155,20]}},"type":"Var","value":{"identifier":"nextIndex","sourcePos":[150,11]}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[156,36],"start":[156,27]}},"type":"Var","value":{"identifier":"minWeight1","sourcePos":[144,61]}},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[156,24],"start":[156,15]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[156,36],"start":[153,11]}},"type":"Var","value":{"identifier":"i","sourcePos":[153,21]}}],"type":"Case"},"type":"Abs"},"identifier":"getWeight"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[159,10]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["getWeight",{"annotation":{"meta":null,"sourceSpan":{"end":[159,21],"start":[159,12]}},"type":"Var","value":{"identifier":"getWeight","sourcePos":[153,11]}}],["newCurrentIndex",{"annotation":{"meta":null,"sourceSpan":{"end":[159,48],"start":[159,40]}},"type":"Var","value":{"identifier":"newIndex","sourcePos":[158,11]}}],["isComplete",{"annotation":{"meta":null,"sourceSpan":{"end":[159,70],"start":[159,62]}},"type":"Var","value":{"identifier":"complete","sourcePos":[148,11]}}]]}},"type":"Let"},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[146,14],"start":[146,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[143,1]}},"type":"Var","value":{"identifier":"currentFrame","sourcePos":[143,27]}},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[143,1]}},"type":"Var","value":{"identifier":"transitionStartFrame","sourcePos":[143,40]}},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[143,1]}},"type":"Var","value":{"identifier":"transitionLength","sourcePos":[143,61]}},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[143,1]}},"type":"Var","value":{"identifier":"currentIndex","sourcePos":[144,27]}},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[143,1]}},"type":"Var","value":{"identifier":"imageCount","sourcePos":[144,40]}},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[143,1]}},"type":"Var","value":{"identifier":"blendMode","sourcePos":[144,51]}},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[143,1]}},"type":"Var","value":{"identifier":"minWeight","sourcePos":[144,61]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"calculateIPAdapterWeights"}],"exports":["Step","Linear","Smooth","stepBlend","linearBlend","smoothBlend","applyBlendMode","twoImageWeights","cycleBlendIndices","transitionProgress","isTransitionComplete","calculateIPAdapterWeights","eqBlendMode"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","Boolean"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","Eq"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","EuclideanRing"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","Function"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","Int"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Lattice","Services","Audio","BlendTransitions"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Math"]},{"annotation":{"meta":null,"sourceSpan":{"end":[28,15],"start":[28,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[12,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","Audio","BlendTransitions"],"modulePath":"src/Lattice/Services/Audio/BlendTransitions.purs","reExports":{},"sourceSpan":{"end":[159,72],"start":[12,1]}}