{"builtWith":"0.15.15","comments":[{"BlockComment":"\n  Lattice.Services.Blur.Sharpen - Unsharp Mask Mathematics\n\n  Pure mathematical functions for image sharpening:\n  - Unsharp mask formula\n  - High-pass filter simulation\n  - Threshold application\n\n  Unsharp masking: sharpened = original + amount * (original - blurred)\n\n  Source: ui/src/services/effects/blurRenderer.ts (lines 1476-1487)\n"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[39,30],"start":[39,29]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[39,38],"start":[39,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[40,29],"start":[40,28]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[40,49],"start":[40,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[40,42],"start":[40,41]}},"type":"Var","value":{"identifier":"mul","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[40,49],"start":[40,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"mul"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[41,9],"start":[41,6]}},"type":"Var","value":{"identifier":"max","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[41,13],"start":[41,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"max"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[41,18],"start":[41,15]}},"type":"Var","value":{"identifier":"min","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[41,24],"start":[41,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"min"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[68,40],"start":[68,39]}},"type":"Var","value":{"identifier":"div","moduleName":["Data","EuclideanRing"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[68,46],"start":[68,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"euclideanRingNumber","moduleName":["Data","EuclideanRing"]}},"type":"App"},"identifier":"div"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[54,30],"start":[54,28]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[54,40],"start":[54,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[37,52],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[37,52],"start":[37,1]}},"argument":"original","body":{"annotation":{"meta":null,"sourceSpan":{"end":[37,52],"start":[37,1]}},"argument":"blurred","body":{"annotation":{"meta":null,"sourceSpan":{"end":[37,52],"start":[37,1]}},"argument":"amount","body":{"annotation":{"meta":null,"sourceSpan":{"end":[41,35],"start":[39,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[39,38],"start":[39,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[39,38],"start":[39,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[39,28],"start":[39,20]}},"type":"Var","value":{"identifier":"original","sourcePos":[38,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[39,38],"start":[39,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[39,38],"start":[39,31]}},"type":"Var","value":{"identifier":"blurred","sourcePos":[38,1]}},"type":"App"},"identifier":"difference"},{"annotation":{"meta":null,"sourceSpan":{"end":[40,49],"start":[40,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[40,49],"start":[40,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[40,27],"start":[40,19]}},"type":"Var","value":{"identifier":"original","sourcePos":[38,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[40,49],"start":[40,19]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[40,49],"start":[40,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[40,40],"start":[40,30]}},"type":"Var","value":{"identifier":"difference","sourcePos":[39,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[40,49],"start":[40,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[40,49],"start":[40,43]}},"type":"Var","value":{"identifier":"amount","sourcePos":[38,1]}},"type":"App"},"type":"App"},"identifier":"sharpened"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"max","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[41,13],"start":[41,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[41,13],"start":[41,10]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[41,35],"start":[41,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"min","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[41,24],"start":[41,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[41,24],"start":[41,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[41,34],"start":[41,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[41,34],"start":[41,25]}},"type":"Var","value":{"identifier":"sharpened","sourcePos":[40,7]}},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"unsharpMask"},{"annotation":{"meta":null,"sourceSpan":{"end":[67,40],"start":[67,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[67,40],"start":[67,1]}},"argument":"percent","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[68,46],"start":[68,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,38],"start":[68,31]}},"type":"Var","value":{"identifier":"percent","sourcePos":[68,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[68,46],"start":[68,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,46],"start":[68,41]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":100}},"type":"App"},"type":"Abs"},"identifier":"percentToMultiplier"},{"annotation":{"meta":null,"sourceSpan":{"end":[44,48],"start":[44,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[44,48],"start":[44,1]}},"argument":"original","body":{"annotation":{"meta":null,"sourceSpan":{"end":[44,48],"start":[44,1]}},"argument":"blurred","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[45,56],"start":[45,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,46],"start":[45,38]}},"type":"Var","value":{"identifier":"original","sourcePos":[45,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[45,56],"start":[45,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,56],"start":[45,49]}},"type":"Var","value":{"identifier":"blurred","sourcePos":[45,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"highPassComponent"},{"annotation":{"meta":null,"sourceSpan":{"end":[52,58],"start":[52,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[52,58],"start":[52,1]}},"argument":"original","body":{"annotation":{"meta":null,"sourceSpan":{"end":[52,58],"start":[52,1]}},"argument":"blurred","body":{"annotation":{"meta":null,"sourceSpan":{"end":[52,58],"start":[52,1]}},"argument":"threshold","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[54,40],"start":[54,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[54,6],"start":[54,3]}},"type":"Var","value":{"identifier":"abs","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[54,27],"start":[54,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[54,26],"start":[54,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,16],"start":[54,8]}},"type":"Var","value":{"identifier":"original","sourcePos":[53,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[54,26],"start":[54,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,26],"start":[54,19]}},"type":"Var","value":{"identifier":"blurred","sourcePos":[53,1]}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[54,40],"start":[54,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,40],"start":[54,31]}},"type":"Var","value":{"identifier":"threshold","sourcePos":[53,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"exceedsThreshold"},{"annotation":{"meta":null,"sourceSpan":{"end":[57,75],"start":[57,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[57,75],"start":[57,1]}},"argument":"original","body":{"annotation":{"meta":null,"sourceSpan":{"end":[57,75],"start":[57,1]}},"argument":"blurred","body":{"annotation":{"meta":null,"sourceSpan":{"end":[57,75],"start":[57,1]}},"argument":"amount","body":{"annotation":{"meta":null,"sourceSpan":{"end":[57,75],"start":[57,1]}},"argument":"threshold","body":{"annotation":{"meta":null,"sourceSpan":{"end":[57,75],"start":[57,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[58,34],"start":[58,26]}},"binderType":"VarBinder","identifier":"original1"},{"annotation":{"meta":null,"sourceSpan":{"end":[58,42],"start":[58,35]}},"binderType":"VarBinder","identifier":"blurred1"},{"annotation":{"meta":null,"sourceSpan":{"end":[58,49],"start":[58,43]}},"binderType":"VarBinder","identifier":"amount1"},{"annotation":{"meta":null,"sourceSpan":{"end":[58,59],"start":[58,50]}},"binderType":"VarBinder","identifier":"threshold1"}],"expressions":[{"expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[59,62],"start":[59,51]}},"type":"Var","value":{"identifier":"unsharpMask","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[59,71],"start":[59,51]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,71],"start":[59,63]}},"type":"Var","value":{"identifier":"original1","sourcePos":[58,26]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[59,79],"start":[59,51]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,79],"start":[59,72]}},"type":"Var","value":{"identifier":"blurred1","sourcePos":[58,35]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[59,86],"start":[59,51]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,86],"start":[59,80]}},"type":"Var","value":{"identifier":"amount1","sourcePos":[58,43]}},"type":"App"},"guard":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[59,21],"start":[59,5]}},"type":"Var","value":{"identifier":"exceedsThreshold","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[59,30],"start":[59,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,30],"start":[59,22]}},"type":"Var","value":{"identifier":"original1","sourcePos":[58,26]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[59,38],"start":[59,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,38],"start":[59,31]}},"type":"Var","value":{"identifier":"blurred1","sourcePos":[58,35]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[59,48],"start":[59,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[59,48],"start":[59,39]}},"type":"Var","value":{"identifier":"threshold1","sourcePos":[58,50]}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[60,25],"start":[60,17]}},"type":"Var","value":{"identifier":"original1","sourcePos":[58,26]}},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[60,14],"start":[60,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[60,25],"start":[58,1]}},"type":"Var","value":{"identifier":"original","sourcePos":[58,26]}},{"annotation":{"meta":null,"sourceSpan":{"end":[60,25],"start":[58,1]}},"type":"Var","value":{"identifier":"blurred","sourcePos":[58,35]}},{"annotation":{"meta":null,"sourceSpan":{"end":[60,25],"start":[58,1]}},"type":"Var","value":{"identifier":"amount","sourcePos":[58,43]}},{"annotation":{"meta":null,"sourceSpan":{"end":[60,25],"start":[58,1]}},"type":"Var","value":{"identifier":"threshold","sourcePos":[58,50]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"unsharpMaskWithThreshold"},{"annotation":{"meta":null,"sourceSpan":{"end":[79,43],"start":[79,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[79,43],"start":[79,1]}},"argument":"original","body":{"annotation":{"meta":null,"sourceSpan":{"end":[79,43],"start":[79,1]}},"argument":"blurred","body":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[80,36],"start":[80,33]}},"type":"Var","value":{"identifier":"abs","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[80,57],"start":[80,33]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[80,56],"start":[80,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[80,46],"start":[80,38]}},"type":"Var","value":{"identifier":"original","sourcePos":[80,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[80,56],"start":[80,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[80,56],"start":[80,49]}},"type":"Var","value":{"identifier":"blurred","sourcePos":[80,1]}},"type":"App"},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"edgeStrength"},{"annotation":{"meta":null,"sourceSpan":{"end":[83,53],"start":[83,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[83,53],"start":[83,1]}},"argument":"original","body":{"annotation":{"meta":null,"sourceSpan":{"end":[83,53],"start":[83,1]}},"argument":"blurred","body":{"annotation":{"meta":null,"sourceSpan":{"end":[83,53],"start":[83,1]}},"argument":"edgeThreshold","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[85,49],"start":[85,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[85,15],"start":[85,3]}},"type":"Var","value":{"identifier":"edgeStrength","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[85,24],"start":[85,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,24],"start":[85,16]}},"type":"Var","value":{"identifier":"original","sourcePos":[84,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[85,32],"start":[85,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,32],"start":[85,25]}},"type":"Var","value":{"identifier":"blurred","sourcePos":[84,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[85,49],"start":[85,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,49],"start":[85,36]}},"type":"Var","value":{"identifier":"edgeThreshold","sourcePos":[84,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"isEdgePixel"},{"annotation":{"meta":null,"sourceSpan":{"end":[71,32],"start":[71,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[71,32],"start":[71,1]}},"argument":"amount","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"max","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[72,29],"start":[72,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[72,29],"start":[72,26]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[72,46],"start":[72,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"min","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[72,38],"start":[72,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[72,38],"start":[72,35]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":5}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[72,45],"start":[72,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[72,45],"start":[72,39]}},"type":"Var","value":{"identifier":"amount","sourcePos":[72,1]}},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"clampAmount"},{"annotation":{"meta":null,"sourceSpan":{"end":[92,55],"start":[92,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[92,55],"start":[92,1]}},"argument":"original","body":{"annotation":{"meta":null,"sourceSpan":{"end":[92,55],"start":[92,1]}},"argument":"blurred","body":{"annotation":{"meta":null,"sourceSpan":{"end":[92,55],"start":[92,1]}},"argument":"baseAmount","body":{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[94,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[94,47],"start":[94,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[94,30],"start":[94,18]}},"type":"Var","value":{"identifier":"edgeStrength","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[94,39],"start":[94,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[94,39],"start":[94,31]}},"type":"Var","value":{"identifier":"original","sourcePos":[93,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[94,47],"start":[94,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[94,47],"start":[94,40]}},"type":"Var","value":{"identifier":"blurred","sourcePos":[93,1]}},"type":"App"},"identifier":"contrast"},{"annotation":{"meta":null,"sourceSpan":{"end":[95,48],"start":[95,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"min","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,29],"start":[95,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[95,29],"start":[95,26]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[95,48],"start":[95,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,47],"start":[95,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[95,39],"start":[95,31]}},"type":"Var","value":{"identifier":"contrast","sourcePos":[94,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[95,47],"start":[95,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[95,47],"start":[95,42]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":128}},"type":"App"},"type":"App"},"identifier":"contrastNorm"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[96,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[96,16],"start":[96,6]}},"type":"Var","value":{"identifier":"baseAmount","sourcePos":[93,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[96,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[96,44],"start":[96,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[96,23],"start":[96,20]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[96,44],"start":[96,20]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Blur","Sharpen"]}},"annotation":{"meta":null,"sourceSpan":{"end":[96,44],"start":[96,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[96,38],"start":[96,26]}},"type":"Var","value":{"identifier":"contrastNorm","sourcePos":[95,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[96,44],"start":[96,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[96,44],"start":[96,41]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.5}},"type":"App"},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"adaptiveAmount"}],"exports":["unsharpMask","highPassComponent","exceedsThreshold","unsharpMaskWithThreshold","percentToMultiplier","clampAmount","edgeStrength","isEdgePixel","adaptiveAmount"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Data","Boolean"]},{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Data","EuclideanRing"]},{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Lattice","Services","Blur","Sharpen"]},{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Math"]},{"annotation":{"meta":null,"sourceSpan":{"end":[26,15],"start":[26,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[96,45],"start":[14,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","Blur","Sharpen"],"modulePath":"src/Lattice/Services/Blur/Sharpen.purs","reExports":{},"sourceSpan":{"end":[96,45],"start":[14,1]}}