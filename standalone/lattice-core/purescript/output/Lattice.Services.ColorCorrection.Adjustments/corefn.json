{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Services.ColorCorrection.Adjustments - Pixel Adjustment Formulas"},{"LineComment":" |"},{"LineComment":" | Pure mathematical functions for color adjustment calculations:"},{"LineComment":" | - Brightness/Contrast formulas"},{"LineComment":" | - Levels mapping"},{"LineComment":" | - Exposure calculation"},{"LineComment":" | - Vibrance with skin protection"},{"LineComment":" |"},{"LineComment":" | All functions are total and deterministic."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/services/effects/colorRenderer.ts"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[105,34],"start":[105,33]}},"type":"Var","value":{"identifier":"mul","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[105,57],"start":[105,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"mul"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[105,20],"start":[105,19]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[105,31],"start":[105,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[152,45],"start":[152,43]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[152,52],"start":[152,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[98,39],"start":[98,38]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[139,14],"start":[139,13]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[139,16],"start":[139,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordInt","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"lessThan"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[142,23],"start":[142,22]}},"type":"Var","value":{"identifier":"div","moduleName":["Data","EuclideanRing"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[142,39],"start":[142,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"euclideanRingNumber","moduleName":["Data","EuclideanRing"]}},"type":"App"},"identifier":"div"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[66,35],"start":[66,34]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[66,40],"start":[66,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"lessThan1"},{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"argument":"currentSat","body":{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"argument":"skinProt","body":{"annotation":{"meta":null,"sourceSpan":{"end":[103,55],"start":[103,1]}},"argument":"vibrance","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,57],"start":[105,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,57],"start":[105,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,11],"start":[105,3]}},"type":"Var","value":{"identifier":"vibrance","sourcePos":[104,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,57],"start":[105,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,31],"start":[105,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,18],"start":[105,15]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,31],"start":[105,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,31],"start":[105,21]}},"type":"Var","value":{"identifier":"currentSat","sourcePos":[104,1]}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,57],"start":[105,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,56],"start":[105,36]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,39],"start":[105,36]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,56],"start":[105,36]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[105,56],"start":[105,36]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,50],"start":[105,42]}},"type":"Var","value":{"identifier":"skinProt","sourcePos":[104,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[105,56],"start":[105,36]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[105,56],"start":[105,53]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.5}},"type":"App"},"type":"App"},"type":"App"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"vibranceAmount"},{"annotation":{"meta":null,"sourceSpan":{"end":[151,40],"start":[151,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[151,40],"start":[151,1]}},"argument":"luminance","body":{"annotation":{"meta":null,"sourceSpan":{"end":[151,40],"start":[151,1]}},"argument":"thresh","body":{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[152,30]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[152,30]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[152,63],"start":[152,58]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[152,30]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[152,69]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[152,52],"start":[152,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[152,42],"start":[152,33]}},"type":"Var","value":{"identifier":"luminance","sourcePos":[152,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[152,52],"start":[152,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[152,52],"start":[152,46]}},"type":"Var","value":{"identifier":"thresh","sourcePos":[152,1]}},"type":"App"}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"threshold"},{"annotation":{"meta":null,"sourceSpan":{"end":[95,55],"start":[95,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[95,55],"start":[95,1]}},"argument":"r","body":{"annotation":{"meta":null,"sourceSpan":{"end":[95,55],"start":[95,1]}},"argument":"g","body":{"annotation":{"meta":null,"sourceSpan":{"end":[95,55],"start":[95,1]}},"argument":"b","body":{"annotation":{"meta":null,"sourceSpan":{"end":[100,38],"start":[97,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[97,21],"start":[97,18]}},"type":"Var","value":{"identifier":"abs","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[97,31],"start":[97,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[97,30],"start":[97,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[97,24],"start":[97,23]}},"type":"Var","value":{"identifier":"r","sourcePos":[96,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[97,30],"start":[97,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[97,30],"start":[97,27]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.8}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[97,37],"start":[97,34]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":2}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[98,21],"start":[98,18]}},"type":"Var","value":{"identifier":"abs","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[98,31],"start":[98,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[98,30],"start":[98,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[98,24],"start":[98,23]}},"type":"Var","value":{"identifier":"g","sourcePos":[96,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[98,30],"start":[98,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[98,30],"start":[98,27]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.5}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[98,37],"start":[98,34]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":2}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[99,21],"start":[99,18]}},"type":"Var","value":{"identifier":"abs","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,31],"start":[99,18]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,30],"start":[99,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,24],"start":[99,23]}},"type":"Var","value":{"identifier":"b","sourcePos":[96,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,30],"start":[99,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,30],"start":[99,27]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.3}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[97,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,37],"start":[99,34]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":3}},"type":"App"},"type":"App"},"identifier":"distance"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[100,38],"start":[100,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[100,9],"start":[100,6]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[100,38],"start":[100,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[100,15],"start":[100,12]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[100,19],"start":[100,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[100,19],"start":[100,16]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[100,38],"start":[100,12]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[100,24],"start":[100,21]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[100,28],"start":[100,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[100,28],"start":[100,25]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[100,37],"start":[100,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[100,37],"start":[100,29]}},"type":"Var","value":{"identifier":"distance","sourcePos":[97,7]}},"type":"App"},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"skinProtection"},{"annotation":{"meta":null,"sourceSpan":{"end":[121,33],"start":[121,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[121,33],"start":[121,1]}},"argument":"luminance","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[122,29],"start":[122,26]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[122,33],"start":[122,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,33],"start":[122,30]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[122,57],"start":[122,26]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[122,56],"start":[122,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,38],"start":[122,35]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[122,56],"start":[122,35]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[122,56],"start":[122,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,50],"start":[122,41]}},"type":"Var","value":{"identifier":"luminance","sourcePos":[122,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[122,56],"start":[122,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[122,56],"start":[122,53]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":3}},"type":"App"},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"shadowWeight"},{"annotation":{"meta":null,"sourceSpan":{"end":[137,37],"start":[137,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[137,37],"start":[137,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[137,37],"start":[137,1]}},"argument":"levels","body":{"annotation":{"meta":null,"sourceSpan":{"end":[144,28],"start":[139,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[144,28],"start":[139,3]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[139,27],"start":[139,22]}},"type":"Var","value":{"identifier":"value","sourcePos":[138,1]}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[144,28],"start":[139,3]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[144,28],"start":[141,5]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[141,38],"start":[141,9]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[141,31],"start":[141,19]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[141,38],"start":[141,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[141,38],"start":[141,32]}},"type":"Var","value":{"identifier":"levels","sourcePos":[138,1]}},"type":"App"},"identifier":"levelsF"},{"annotation":{"meta":null,"sourceSpan":{"end":[142,39],"start":[142,9]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[142,39],"start":[142,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[142,21],"start":[142,16]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[142,39],"start":[142,16]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[142,38],"start":[142,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[142,32],"start":[142,25]}},"type":"Var","value":{"identifier":"levelsF","sourcePos":[141,9]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[142,38],"start":[142,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[142,38],"start":[142,35]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"type":"App"},"identifier":"step"},{"annotation":{"meta":null,"sourceSpan":{"end":[143,58],"start":[143,9]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[143,22],"start":[143,17]}},"type":"Var","value":{"identifier":"round","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[143,58],"start":[143,17]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[143,57],"start":[143,24]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[143,38],"start":[143,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[143,30],"start":[143,25]}},"type":"Var","value":{"identifier":"value","sourcePos":[138,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[143,38],"start":[143,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[143,38],"start":[143,33]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[143,57],"start":[143,24]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[143,56],"start":[143,43]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[143,50],"start":[143,43]}},"type":"Var","value":{"identifier":"levelsF","sourcePos":[141,9]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[143,56],"start":[143,43]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[143,56],"start":[143,53]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"type":"App"},"type":"App"},"identifier":"level"}],"expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[144,13],"start":[144,8]}},"type":"Var","value":{"identifier":"round","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[144,28],"start":[144,8]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[144,27],"start":[144,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[144,20],"start":[144,15]}},"type":"Var","value":{"identifier":"level","sourcePos":[143,9]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[144,27],"start":[144,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[144,27],"start":[144,23]}},"type":"Var","value":{"identifier":"step","sourcePos":[142,9]}},"type":"App"},"type":"App"},"type":"Let"},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[139,16],"start":[139,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[139,12],"start":[139,6]}},"type":"Var","value":{"identifier":"levels","sourcePos":[138,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[139,16],"start":[139,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[139,16],"start":[139,15]}},"type":"Literal","value":{"literalType":"IntLiteral","value":2}},"type":"App"}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"posterize"},{"annotation":{"meta":null,"sourceSpan":{"end":[129,44],"start":[129,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[129,44],"start":[129,1]}},"argument":"shadowW","body":{"annotation":{"meta":null,"sourceSpan":{"end":[129,44],"start":[129,1]}},"argument":"highlightW","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[130,62],"start":[130,36]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[130,62],"start":[130,36]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[130,39],"start":[130,36]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[130,62],"start":[130,36]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[130,49],"start":[130,42]}},"type":"Var","value":{"identifier":"shadowW","sourcePos":[130,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[130,62],"start":[130,36]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[130,62],"start":[130,52]}},"type":"Var","value":{"identifier":"highlightW","sourcePos":[130,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"midtoneWeight"},{"annotation":{"meta":null,"sourceSpan":{"end":[125,36],"start":[125,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[125,36],"start":[125,1]}},"argument":"luminance","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[126,32],"start":[126,29]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,36],"start":[126,29]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,36],"start":[126,33]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,63],"start":[126,29]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,62],"start":[126,38]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,55],"start":[126,39]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,48],"start":[126,39]}},"type":"Var","value":{"identifier":"luminance","sourcePos":[126,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,55],"start":[126,39]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,55],"start":[126,51]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.67}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,62],"start":[126,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,62],"start":[126,59]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":3}},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"highlightWeight"},{"annotation":{"meta":null,"sourceSpan":{"end":[48,41],"start":[48,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[48,41],"start":[48,1]}},"argument":"contrast","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[49,47],"start":[49,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[49,36],"start":[49,33]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[49,47],"start":[49,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[49,47],"start":[49,39]}},"type":"Var","value":{"identifier":"contrast","sourcePos":[49,1]}},"type":"App"},"type":"Abs"},"identifier":"contrastFactorLegacy"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,35],"start":[42,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[42,35],"start":[42,1]}},"argument":"contrast","body":{"annotation":{"meta":null,"sourceSpan":{"end":[45,57],"start":[44,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[44,30],"start":[44,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[44,30],"start":[44,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[44,22],"start":[44,14]}},"type":"Var","value":{"identifier":"contrast","sourcePos":[43,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[44,30],"start":[44,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[44,30],"start":[44,25]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"identifier":"c255"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[45,57],"start":[45,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[45,29],"start":[45,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,12],"start":[45,7]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":259}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[45,29],"start":[45,7]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[45,28],"start":[45,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,20],"start":[45,16]}},"type":"Var","value":{"identifier":"c255","sourcePos":[44,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[45,28],"start":[45,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,28],"start":[45,23]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[45,57],"start":[45,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[45,56],"start":[45,34]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,39],"start":[45,34]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[45,56],"start":[45,34]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[45,55],"start":[45,43]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,48],"start":[45,43]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":259}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[45,55],"start":[45,43]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[45,55],"start":[45,51]}},"type":"Var","value":{"identifier":"c255","sourcePos":[44,7]}},"type":"App"},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"identifier":"contrastFactor"},{"annotation":{"meta":null,"sourceSpan":{"end":[109,64],"start":[108,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[109,64],"start":[108,1]}},"argument":"r","body":{"annotation":{"meta":null,"sourceSpan":{"end":[109,64],"start":[108,1]}},"argument":"g","body":{"annotation":{"meta":null,"sourceSpan":{"end":[109,64],"start":[108,1]}},"argument":"b","body":{"annotation":{"meta":null,"sourceSpan":{"end":[109,64],"start":[108,1]}},"argument":"lum","body":{"annotation":{"meta":null,"sourceSpan":{"end":[109,64],"start":[108,1]}},"argument":"satAdjust","body":{"annotation":{"meta":null,"sourceSpan":{"end":[114,88],"start":[111,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[111,39],"start":[111,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[111,39],"start":[111,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[111,15],"start":[111,12]}},"type":"Var","value":{"identifier":"lum","sourcePos":[110,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[111,39],"start":[111,12]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[111,39],"start":[111,12]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[111,26],"start":[111,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[111,20],"start":[111,19]}},"type":"Var","value":{"identifier":"r","sourcePos":[110,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[111,26],"start":[111,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[111,26],"start":[111,23]}},"type":"Var","value":{"identifier":"lum","sourcePos":[110,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[111,39],"start":[111,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[111,39],"start":[111,30]}},"type":"Var","value":{"identifier":"satAdjust","sourcePos":[110,1]}},"type":"App"},"type":"App"},"identifier":"r'"},{"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[112,15],"start":[112,12]}},"type":"Var","value":{"identifier":"lum","sourcePos":[110,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,12]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,12]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[112,26],"start":[112,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[112,20],"start":[112,19]}},"type":"Var","value":{"identifier":"g","sourcePos":[110,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[112,26],"start":[112,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[112,26],"start":[112,23]}},"type":"Var","value":{"identifier":"lum","sourcePos":[110,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[112,39],"start":[112,30]}},"type":"Var","value":{"identifier":"satAdjust","sourcePos":[110,1]}},"type":"App"},"type":"App"},"identifier":"g'"},{"annotation":{"meta":null,"sourceSpan":{"end":[113,39],"start":[113,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[113,39],"start":[113,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[113,15],"start":[113,12]}},"type":"Var","value":{"identifier":"lum","sourcePos":[110,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[113,39],"start":[113,12]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[113,39],"start":[113,12]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[113,26],"start":[113,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[113,20],"start":[113,19]}},"type":"Var","value":{"identifier":"b","sourcePos":[110,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[113,26],"start":[113,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[113,26],"start":[113,23]}},"type":"Var","value":{"identifier":"lum","sourcePos":[110,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[113,39],"start":[113,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[113,39],"start":[113,30]}},"type":"Var","value":{"identifier":"satAdjust","sourcePos":[110,1]}},"type":"App"},"type":"App"},"identifier":"b'"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[114,11],"start":[114,6]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,34],"start":[114,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,16],"start":[114,13]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,20],"start":[114,13]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,20],"start":[114,17]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,33],"start":[114,13]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,25],"start":[114,22]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,29],"start":[114,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,29],"start":[114,26]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,32],"start":[114,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,32],"start":[114,30]}},"type":"Var","value":{"identifier":"r'","sourcePos":[111,7]}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,88],"start":[114,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[114,41],"start":[114,36]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,64],"start":[114,36]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,46],"start":[114,43]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,50],"start":[114,43]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,50],"start":[114,47]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,63],"start":[114,43]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,55],"start":[114,52]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,59],"start":[114,52]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,59],"start":[114,56]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,62],"start":[114,52]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,62],"start":[114,60]}},"type":"Var","value":{"identifier":"g'","sourcePos":[112,7]}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,87],"start":[114,36]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,69],"start":[114,66]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,73],"start":[114,66]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,73],"start":[114,70]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,86],"start":[114,66]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,78],"start":[114,75]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,82],"start":[114,75]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,82],"start":[114,79]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,85],"start":[114,75]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,85],"start":[114,83]}},"type":"Var","value":{"identifier":"b'","sourcePos":[113,7]}},"type":"App"},"type":"App"},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"applySaturationAdjustment"},{"annotation":{"meta":null,"sourceSpan":{"end":[63,82],"start":[63,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[63,82],"start":[63,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[63,82],"start":[63,1]}},"argument":"inputBlack","body":{"annotation":{"meta":null,"sourceSpan":{"end":[63,82],"start":[63,1]}},"argument":"inputWhite","body":{"annotation":{"meta":null,"sourceSpan":{"end":[63,82],"start":[63,1]}},"argument":"gamma","body":{"annotation":{"meta":null,"sourceSpan":{"end":[63,82],"start":[63,1]}},"argument":"outputBlack","body":{"annotation":{"meta":null,"sourceSpan":{"end":[63,82],"start":[63,1]}},"argument":"outputWhite","body":{"annotation":{"meta":null,"sourceSpan":{"end":[74,32],"start":[65,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[72,46],"start":[72,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[72,46],"start":[72,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[72,32],"start":[72,21]}},"type":"Var","value":{"identifier":"outputWhite","sourcePos":[64,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[72,46],"start":[72,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[72,46],"start":[72,35]}},"type":"Var","value":{"identifier":"outputBlack","sourcePos":[64,1]}},"type":"App"},"identifier":"outputRange"},{"annotation":{"meta":null,"sourceSpan":{"end":[65,43],"start":[65,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[65,43],"start":[65,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[65,30],"start":[65,20]}},"type":"Var","value":{"identifier":"inputWhite","sourcePos":[64,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[65,43],"start":[65,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[65,43],"start":[65,33]}},"type":"Var","value":{"identifier":"inputBlack","sourcePos":[64,1]}},"type":"App"},"identifier":"inputRange"},{"annotation":{"meta":null,"sourceSpan":{"end":[68,58],"start":[66,7]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[68,58],"start":[66,20]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[68,58],"start":[66,20]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[67,28],"start":[67,25]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[68,58],"start":[66,20]}},"binderType":"NullBinder"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[68,58],"start":[68,25]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[68,44],"start":[68,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,31],"start":[68,26]}},"type":"Var","value":{"identifier":"value","sourcePos":[64,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[68,44],"start":[68,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,44],"start":[68,34]}},"type":"Var","value":{"identifier":"inputBlack","sourcePos":[64,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[68,58],"start":[68,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[68,58],"start":[68,48]}},"type":"Var","value":{"identifier":"inputRange","sourcePos":[65,7]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThan1","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[66,40],"start":[66,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[66,33],"start":[66,23]}},"type":"Var","value":{"identifier":"inputRange","sourcePos":[65,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[66,40],"start":[66,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[66,40],"start":[66,36]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1.0e-2}},"type":"App"}],"type":"Case"},"identifier":"normalized"},{"annotation":{"meta":null,"sourceSpan":{"end":[70,29],"start":[70,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[70,29],"start":[70,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[70,21],"start":[70,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[70,29],"start":[70,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[70,29],"start":[70,24]}},"type":"Var","value":{"identifier":"gamma","sourcePos":[64,1]}},"type":"App"},"identifier":"gammaInv"},{"annotation":{"meta":null,"sourceSpan":{"end":[69,45],"start":[69,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[69,20],"start":[69,17]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[69,24],"start":[69,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,24],"start":[69,21]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[69,45],"start":[69,17]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[69,29],"start":[69,26]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[69,33],"start":[69,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,33],"start":[69,30]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[69,44],"start":[69,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,44],"start":[69,34]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[66,7]}},"type":"App"},"type":"App"},"identifier":"clamped"},{"annotation":{"meta":null,"sourceSpan":{"end":[71,44],"start":[71,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[71,27],"start":[71,24]}},"type":"Var","value":{"identifier":"pow","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[71,35],"start":[71,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[71,35],"start":[71,28]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[69,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[71,44],"start":[71,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[71,44],"start":[71,36]}},"type":"Var","value":{"identifier":"gammaInv","sourcePos":[70,7]}},"type":"App"},"identifier":"gammaCorrected"},{"annotation":{"meta":null,"sourceSpan":{"end":[73,58],"start":[73,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[73,58],"start":[73,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[73,27],"start":[73,16]}},"type":"Var","value":{"identifier":"outputBlack","sourcePos":[64,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[73,58],"start":[73,16]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[73,58],"start":[73,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[73,44],"start":[73,30]}},"type":"Var","value":{"identifier":"gammaCorrected","sourcePos":[71,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[73,58],"start":[73,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[73,58],"start":[73,47]}},"type":"Var","value":{"identifier":"outputRange","sourcePos":[72,7]}},"type":"App"},"type":"App"},"identifier":"output"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[74,9],"start":[74,6]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[74,13],"start":[74,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[74,13],"start":[74,10]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[74,32],"start":[74,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[74,18],"start":[74,15]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[74,24],"start":[74,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[74,24],"start":[74,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[74,31],"start":[74,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[74,31],"start":[74,25]}},"type":"Var","value":{"identifier":"output","sourcePos":[73,7]}},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"applyLevels"},{"annotation":{"meta":null,"sourceSpan":{"end":[81,64],"start":[81,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[81,64],"start":[81,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[81,64],"start":[81,1]}},"argument":"exposure","body":{"annotation":{"meta":null,"sourceSpan":{"end":[81,64],"start":[81,1]}},"argument":"offset","body":{"annotation":{"meta":null,"sourceSpan":{"end":[81,64],"start":[81,1]}},"argument":"gamma","body":{"annotation":{"meta":null,"sourceSpan":{"end":[88,26],"start":[83,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[87,29],"start":[87,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[87,29],"start":[87,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[87,21],"start":[87,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[87,29],"start":[87,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[87,29],"start":[87,24]}},"type":"Var","value":{"identifier":"gamma","sourcePos":[82,1]}},"type":"App"},"identifier":"gammaInv"},{"annotation":{"meta":null,"sourceSpan":{"end":[83,44],"start":[83,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[83,31],"start":[83,28]}},"type":"Var","value":{"identifier":"pow","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[83,35],"start":[83,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[83,35],"start":[83,32]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":2}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[83,44],"start":[83,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[83,44],"start":[83,36]}},"type":"Var","value":{"identifier":"exposure","sourcePos":[82,1]}},"type":"App"},"identifier":"exposureMultiplier"},{"annotation":{"meta":null,"sourceSpan":{"end":[84,48],"start":[84,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[84,48],"start":[84,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[84,27],"start":[84,22]}},"type":"Var","value":{"identifier":"value","sourcePos":[82,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[84,48],"start":[84,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[84,48],"start":[84,30]}},"type":"Var","value":{"identifier":"exposureMultiplier","sourcePos":[83,7]}},"type":"App"},"identifier":"withExposure"},{"annotation":{"meta":null,"sourceSpan":{"end":[85,41],"start":[85,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[85,41],"start":[85,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,32],"start":[85,20]}},"type":"Var","value":{"identifier":"withExposure","sourcePos":[84,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[85,41],"start":[85,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,41],"start":[85,35]}},"type":"Var","value":{"identifier":"offset","sourcePos":[82,1]}},"type":"App"},"identifier":"withOffset"},{"annotation":{"meta":null,"sourceSpan":{"end":[86,45],"start":[86,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[86,20],"start":[86,17]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[86,24],"start":[86,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[86,24],"start":[86,21]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[86,45],"start":[86,17]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[86,29],"start":[86,26]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[86,33],"start":[86,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[86,33],"start":[86,30]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[86,44],"start":[86,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[86,44],"start":[86,34]}},"type":"Var","value":{"identifier":"withOffset","sourcePos":[85,7]}},"type":"App"},"type":"App"},"identifier":"clamped"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[88,9],"start":[88,6]}},"type":"Var","value":{"identifier":"pow","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[88,17],"start":[88,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[88,17],"start":[88,10]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[86,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[88,26],"start":[88,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[88,26],"start":[88,18]}},"type":"Var","value":{"identifier":"gammaInv","sourcePos":[87,7]}},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"applyExposure"},{"annotation":{"meta":null,"sourceSpan":{"end":[52,64],"start":[52,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[52,64],"start":[52,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[52,64],"start":[52,1]}},"argument":"brightness","body":{"annotation":{"meta":null,"sourceSpan":{"end":[52,64],"start":[52,1]}},"argument":"factor","body":{"annotation":{"meta":null,"sourceSpan":{"end":[56,38],"start":[54,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[54,50],"start":[54,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[54,50],"start":[54,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,29],"start":[54,24]}},"type":"Var","value":{"identifier":"value","sourcePos":[53,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[54,50],"start":[54,24]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[54,50],"start":[54,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,42],"start":[54,32]}},"type":"Var","value":{"identifier":"brightness","sourcePos":[53,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[54,50],"start":[54,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,50],"start":[54,45]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"App"},"identifier":"withBrightness"},{"annotation":{"meta":null,"sourceSpan":{"end":[55,63],"start":[55,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[55,63],"start":[55,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[55,63],"start":[55,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[55,28],"start":[55,22]}},"type":"Var","value":{"identifier":"factor","sourcePos":[53,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[55,63],"start":[55,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","ColorCorrection","Adjustments"]}},"annotation":{"meta":null,"sourceSpan":{"end":[55,54],"start":[55,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[55,46],"start":[55,32]}},"type":"Var","value":{"identifier":"withBrightness","sourcePos":[54,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[55,54],"start":[55,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[55,54],"start":[55,49]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":128}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[55,63],"start":[55,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[55,63],"start":[55,58]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":128}},"type":"App"},"identifier":"withContrast"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[56,9],"start":[56,6]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[56,13],"start":[56,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[56,13],"start":[56,10]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[56,38],"start":[56,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[56,18],"start":[56,15]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[56,24],"start":[56,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[56,24],"start":[56,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[56,37],"start":[56,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[56,37],"start":[56,25]}},"type":"Var","value":{"identifier":"withContrast","sourcePos":[55,7]}},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"applyBrightnessContrast"}],"exports":["contrastFactor","contrastFactorLegacy","applyBrightnessContrast","applyLevels","applyExposure","skinProtection","vibranceAmount","applySaturationAdjustment","shadowWeight","highlightWeight","midtoneWeight","posterize","threshold"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Data","EuclideanRing"]},{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Data","Int"]},{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Data","Tuple"]},{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Math"]},{"annotation":{"meta":null,"sourceSpan":{"end":[29,15],"start":[29,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[152,72],"start":[13,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","ColorCorrection","Adjustments"],"modulePath":"src/Lattice/Services/ColorCorrection/Adjustments.purs","reExports":{},"sourceSpan":{"end":[152,72],"start":[13,1]}}