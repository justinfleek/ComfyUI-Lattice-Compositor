{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Services.Effects.ColorCorrection - Basic Color Correction"},{"LineComment":" |"},{"LineComment":" | Pure mathematical functions for color correction:"},{"LineComment":" | - Brightness & Contrast"},{"LineComment":" | - Levels (input/output with gamma)"},{"LineComment":" | - Exposure (photographic stops)"},{"LineComment":" |"},{"LineComment":" | All functions operate on normalized [0,1] color values."},{"LineComment":" | All functions are total and deterministic."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/services/effects/colorRenderer.ts"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[108,20],"start":[108,19]}},"type":"Var","value":{"identifier":"div","moduleName":["Data","EuclideanRing"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[108,22],"start":[108,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"euclideanRingNumber","moduleName":["Data","EuclideanRing"]}},"type":"App"},"identifier":"div"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[116,37],"start":[116,36]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[116,46],"start":[116,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[118,24],"start":[118,23]}},"type":"Var","value":{"identifier":"mul","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[118,30],"start":[118,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"mul"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[119,56],"start":[119,55]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[119,61],"start":[119,49]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[103,23],"start":[103,20]}},"type":"Var","value":{"identifier":"compose","moduleName":["Control","Semigroupoid"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[103,33],"start":[103,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semigroupoidFn","moduleName":["Control","Semigroupoid"]}},"type":"App"},"identifier":"compose"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[201,6],"start":[201,3]}},"type":"Var","value":{"identifier":"map","moduleName":["Data","Functor"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[205,4],"start":[201,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"functorArray","moduleName":["Data","Functor"]}},"type":"App"},"identifier":"map"},{"annotation":{"meta":null,"sourceSpan":{"end":[106,48],"start":[106,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[106,48],"start":[106,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[106,48],"start":[106,1]}},"argument":"v1","body":{"annotation":{"meta":null,"sourceSpan":{"end":[106,48],"start":[106,1]}},"argument":"v2","body":{"annotation":{"meta":null,"sourceSpan":{"end":[106,48],"start":[106,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[107,10],"start":[107,9]}},"binderType":"NullBinder"},{"annotation":{"meta":null,"sourceSpan":{"end":[107,14],"start":[107,11]}},"binderType":"LiteralBinder","literal":{"literalType":"NumberLiteral","value":0}},{"annotation":{"meta":null,"sourceSpan":{"end":[107,23],"start":[107,15]}},"binderType":"VarBinder","identifier":"fallback"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[107,34],"start":[107,26]}},"type":"Var","value":{"identifier":"fallback","sourcePos":[107,15]}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[108,10],"start":[108,9]}},"binderType":"VarBinder","identifier":"a"},{"annotation":{"meta":null,"sourceSpan":{"end":[108,12],"start":[108,11]}},"binderType":"VarBinder","identifier":"b"},{"annotation":{"meta":null,"sourceSpan":{"end":[108,14],"start":[108,13]}},"binderType":"NullBinder"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[108,22],"start":[108,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[108,18],"start":[108,17]}},"type":"Var","value":{"identifier":"a","sourcePos":[108,9]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[108,22],"start":[108,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[108,22],"start":[108,21]}},"type":"Var","value":{"identifier":"b","sourcePos":[108,11]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[107,34],"start":[107,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[107,34],"start":[107,1]}},"type":"Var","value":{"identifier":"v1","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[107,34],"start":[107,1]}},"type":"Var","value":{"identifier":"v2","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"safeDiv"},{"annotation":{"meta":null,"sourceSpan":{"end":[76,36],"start":[76,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[83,4],"start":[78,3]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["inputBlack",{"annotation":{"meta":null,"sourceSpan":{"end":[78,20],"start":[78,17]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["inputWhite",{"annotation":{"meta":null,"sourceSpan":{"end":[79,20],"start":[79,17]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}}],["gamma",{"annotation":{"meta":null,"sourceSpan":{"end":[80,15],"start":[80,12]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}}],["outputBlack",{"annotation":{"meta":null,"sourceSpan":{"end":[81,21],"start":[81,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["outputWhite",{"annotation":{"meta":null,"sourceSpan":{"end":[82,21],"start":[82,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}}]]}},"identifier":"defaultLevelsParams"},{"annotation":{"meta":null,"sourceSpan":{"end":[86,40],"start":[86,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[91,4],"start":[88,3]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["exposure",{"annotation":{"meta":null,"sourceSpan":{"end":[88,18],"start":[88,15]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["offset",{"annotation":{"meta":null,"sourceSpan":{"end":[89,16],"start":[89,13]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["gamma",{"annotation":{"meta":null,"sourceSpan":{"end":[90,15],"start":[90,12]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}}]]}},"identifier":"defaultExposureParams"},{"annotation":{"meta":null,"sourceSpan":{"end":[68,34],"start":[68,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[73,4],"start":[70,3]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["brightness",{"annotation":{"meta":null,"sourceSpan":{"end":[70,20],"start":[70,17]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["contrast",{"annotation":{"meta":null,"sourceSpan":{"end":[71,18],"start":[71,15]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["useLegacy",{"annotation":{"meta":null,"sourceSpan":{"end":[72,21],"start":[72,16]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}}]]}},"identifier":"defaultColorParams"},{"annotation":{"meta":null,"sourceSpan":{"end":[115,46],"start":[115,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[115,46],"start":[115,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[115,46],"start":[115,1]}},"argument":"v1","body":{"annotation":{"meta":null,"sourceSpan":{"end":[115,46],"start":[115,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[116,20],"start":[116,16]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}},{"annotation":{"meta":null,"sourceSpan":{"end":[116,29],"start":[116,21]}},"binderType":"VarBinder","identifier":"contrast"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[116,46],"start":[116,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[116,35],"start":[116,32]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[116,46],"start":[116,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[116,46],"start":[116,38]}},"type":"Var","value":{"identifier":"contrast","sourcePos":[116,21]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[117,21],"start":[117,16]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":false}},{"annotation":{"meta":null,"sourceSpan":{"end":[117,30],"start":[117,22]}},"binderType":"VarBinder","identifier":"contrast"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[119,67],"start":[118,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[118,30],"start":[118,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[118,30],"start":[118,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[118,22],"start":[118,14]}},"type":"Var","value":{"identifier":"contrast","sourcePos":[117,22]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[118,30],"start":[118,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[118,30],"start":[118,25]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"identifier":"c255"}],"expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[119,13],"start":[119,6]}},"type":"Var","value":{"identifier":"safeDiv","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[119,38],"start":[119,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[119,37],"start":[119,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,20],"start":[119,15]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":259}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,37],"start":[119,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[119,36],"start":[119,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,28],"start":[119,24]}},"type":"Var","value":{"identifier":"c255","sourcePos":[118,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,36],"start":[119,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,36],"start":[119,31]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,63],"start":[119,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[119,62],"start":[119,40]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,45],"start":[119,40]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,62],"start":[119,40]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[119,61],"start":[119,49]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,54],"start":[119,49]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":259}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,61],"start":[119,49]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,61],"start":[119,57]}},"type":"Var","value":{"identifier":"c255","sourcePos":[118,7]}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,67],"start":[119,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,67],"start":[119,64]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"type":"Let"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[116,46],"start":[116,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[116,46],"start":[116,1]}},"type":"Var","value":{"identifier":"v1","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"contrastFactor"},{"annotation":{"meta":null,"sourceSpan":{"end":[102,29],"start":[102,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"compose","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[103,33],"start":[103,12]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[103,15],"start":[103,12]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[103,19],"start":[103,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[103,19],"start":[103,16]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[103,33],"start":[103,12]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[103,27],"start":[103,24]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[103,33],"start":[103,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[103,33],"start":[103,28]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"App"},"identifier":"clamp255"},{"annotation":{"meta":null,"sourceSpan":{"end":[98,28],"start":[98,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"compose","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,30],"start":[99,11]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[99,14],"start":[99,11]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,18],"start":[99,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,18],"start":[99,15]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[99,30],"start":[99,11]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[99,26],"start":[99,23]}},"type":"Var","value":{"identifier":"min","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[99,30],"start":[99,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[99,30],"start":[99,27]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"type":"App"},"identifier":"clamp01"},{"annotation":{"meta":null,"sourceSpan":{"end":[171,52],"start":[171,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[171,52],"start":[171,1]}},"argument":"params","body":{"annotation":{"meta":null,"sourceSpan":{"end":[171,52],"start":[171,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[183,18],"start":[173,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[173,43],"start":[173,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[173,23],"start":[173,20]}},"type":"Var","value":{"identifier":"pow","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[173,27],"start":[173,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[173,27],"start":[173,24]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":2}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[173,43],"start":[173,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[173,43],"start":[173,28]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[173,34],"start":[173,28]}},"type":"Var","value":{"identifier":"params","sourcePos":[172,1]}},"fieldName":"exposure","type":"Accessor"},"type":"App"},"identifier":"multiplier"},{"annotation":{"meta":null,"sourceSpan":{"end":[176,40],"start":[176,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[176,40],"start":[176,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[176,27],"start":[176,22]}},"type":"Var","value":{"identifier":"value","sourcePos":[172,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[176,40],"start":[176,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[176,40],"start":[176,30]}},"type":"Var","value":{"identifier":"multiplier","sourcePos":[173,7]}},"type":"App"},"identifier":"withExposure"},{"annotation":{"meta":null,"sourceSpan":{"end":[178,48],"start":[178,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[178,48],"start":[178,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[178,32],"start":[178,20]}},"type":"Var","value":{"identifier":"withExposure","sourcePos":[176,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[178,48],"start":[178,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[178,48],"start":[178,35]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[178,41],"start":[178,35]}},"type":"Var","value":{"identifier":"params","sourcePos":[172,1]}},"fieldName":"offset","type":"Accessor"},"type":"App"},"identifier":"withOffset"},{"annotation":{"meta":null,"sourceSpan":{"end":[174,36],"start":[174,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[174,18],"start":[174,15]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[174,23],"start":[174,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[174,23],"start":[174,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1.0e-2}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[174,36],"start":[174,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[174,36],"start":[174,24]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[174,30],"start":[174,24]}},"type":"Var","value":{"identifier":"params","sourcePos":[172,1]}},"fieldName":"gamma","type":"Accessor"},"type":"App"},"identifier":"gamma"},{"annotation":{"meta":null,"sourceSpan":{"end":[180,35],"start":[180,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[180,24],"start":[180,17]}},"type":"Var","value":{"identifier":"clamp01","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[180,35],"start":[180,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[180,35],"start":[180,25]}},"type":"Var","value":{"identifier":"withOffset","sourcePos":[178,7]}},"type":"App"},"identifier":"clamped"},{"annotation":{"meta":null,"sourceSpan":{"end":[182,47],"start":[182,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[182,25],"start":[182,22]}},"type":"Var","value":{"identifier":"pow","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[182,33],"start":[182,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[182,33],"start":[182,26]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[180,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[182,47],"start":[182,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[182,46],"start":[182,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[182,38],"start":[182,35]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[182,46],"start":[182,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[182,46],"start":[182,41]}},"type":"Var","value":{"identifier":"gamma","sourcePos":[174,7]}},"type":"App"},"type":"App"},"identifier":"gammaApplied"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[183,18],"start":[183,6]}},"type":"Var","value":{"identifier":"gammaApplied","sourcePos":[182,7]}},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"exposurePixel"},{"annotation":{"meta":null,"sourceSpan":{"end":[186,103],"start":[186,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[186,103],"start":[186,1]}},"argument":"params","body":{"annotation":{"meta":null,"sourceSpan":{"end":[186,103],"start":[186,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[186,103],"start":[186,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[187,16],"start":[187,10]}},"binderType":"VarBinder","identifier":"params1"},{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[187,37],"start":[187,18]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[187,25],"start":[187,24]}},"binderType":"VarBinder","identifier":"r"},{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[187,36],"start":[187,27]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[187,34],"start":[187,33]}},"binderType":"VarBinder","identifier":"g"},{"annotation":{"meta":null,"sourceSpan":{"end":[187,36],"start":[187,35]}},"binderType":"VarBinder","identifier":"b"}],"constructorName":{"identifier":"Tuple","moduleName":["Data","Tuple"]},"typeName":{"identifier":"Tuple","moduleName":["Data","Tuple"]}}],"constructorName":{"identifier":"Tuple","moduleName":["Data","Tuple"]},"typeName":{"identifier":"Tuple","moduleName":["Data","Tuple"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[188,8],"start":[188,3]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[189,29],"start":[188,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[189,19],"start":[189,6]}},"type":"Var","value":{"identifier":"exposurePixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[189,26],"start":[189,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[189,26],"start":[189,20]}},"type":"Var","value":{"identifier":"params1","sourcePos":[187,10]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[189,28],"start":[189,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[189,28],"start":[189,27]}},"type":"Var","value":{"identifier":"r","sourcePos":[187,24]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[192,32],"start":[188,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[190,11],"start":[190,6]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[191,31],"start":[190,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[191,21],"start":[191,8]}},"type":"Var","value":{"identifier":"exposurePixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[191,28],"start":[191,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[191,28],"start":[191,22]}},"type":"Var","value":{"identifier":"params1","sourcePos":[187,10]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[191,30],"start":[191,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[191,30],"start":[191,29]}},"type":"Var","value":{"identifier":"g","sourcePos":[187,33]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[192,31],"start":[190,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[192,21],"start":[192,8]}},"type":"Var","value":{"identifier":"exposurePixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[192,28],"start":[192,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[192,28],"start":[192,22]}},"type":"Var","value":{"identifier":"params1","sourcePos":[187,10]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[192,30],"start":[192,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[192,30],"start":[192,29]}},"type":"Var","value":{"identifier":"b","sourcePos":[187,35]}},"type":"App"},"type":"App"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[192,32],"start":[187,1]}},"type":"Var","value":{"identifier":"params","sourcePos":[187,10]}},{"annotation":{"meta":null,"sourceSpan":{"end":[192,32],"start":[187,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"exposure"},{"annotation":{"meta":null,"sourceSpan":{"end":[143,48],"start":[143,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[143,48],"start":[143,1]}},"argument":"params","body":{"annotation":{"meta":null,"sourceSpan":{"end":[143,48],"start":[143,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[155,20],"start":[145,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[146,60],"start":[146,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[146,60],"start":[146,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[146,39],"start":[146,21]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[146,27],"start":[146,21]}},"type":"Var","value":{"identifier":"params","sourcePos":[144,1]}},"fieldName":"outputWhite","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[146,60],"start":[146,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[146,60],"start":[146,42]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[146,48],"start":[146,42]}},"type":"Var","value":{"identifier":"params","sourcePos":[144,1]}},"fieldName":"outputBlack","type":"Accessor"},"type":"App"},"identifier":"outputRange"},{"annotation":{"meta":null,"sourceSpan":{"end":[145,57],"start":[145,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[145,57],"start":[145,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[145,37],"start":[145,20]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[145,26],"start":[145,20]}},"type":"Var","value":{"identifier":"params","sourcePos":[144,1]}},"fieldName":"inputWhite","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[145,57],"start":[145,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[145,57],"start":[145,40]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[145,46],"start":[145,40]}},"type":"Var","value":{"identifier":"params","sourcePos":[144,1]}},"fieldName":"inputBlack","type":"Accessor"},"type":"App"},"identifier":"inputRange"},{"annotation":{"meta":null,"sourceSpan":{"end":[149,66],"start":[149,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[149,23],"start":[149,16]}},"type":"Var","value":{"identifier":"safeDiv","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[149,51],"start":[149,16]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[149,50],"start":[149,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[149,30],"start":[149,25]}},"type":"Var","value":{"identifier":"value","sourcePos":[144,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[149,50],"start":[149,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[149,50],"start":[149,33]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[149,39],"start":[149,33]}},"type":"Var","value":{"identifier":"params","sourcePos":[144,1]}},"fieldName":"inputBlack","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[149,62],"start":[149,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[149,62],"start":[149,52]}},"type":"Var","value":{"identifier":"inputRange","sourcePos":[145,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[149,66],"start":[149,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[149,66],"start":[149,63]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"identifier":"mapped"},{"annotation":{"meta":null,"sourceSpan":{"end":[147,36],"start":[147,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[147,18],"start":[147,15]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[147,23],"start":[147,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[147,23],"start":[147,19]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1.0e-2}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[147,36],"start":[147,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[147,36],"start":[147,24]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[147,30],"start":[147,24]}},"type":"Var","value":{"identifier":"params","sourcePos":[144,1]}},"fieldName":"gamma","type":"Accessor"},"type":"App"},"identifier":"gamma"},{"annotation":{"meta":null,"sourceSpan":{"end":[150,31],"start":[150,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[150,24],"start":[150,17]}},"type":"Var","value":{"identifier":"clamp01","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[150,31],"start":[150,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[150,31],"start":[150,25]}},"type":"Var","value":{"identifier":"mapped","sourcePos":[149,7]}},"type":"App"},"identifier":"clamped"},{"annotation":{"meta":null,"sourceSpan":{"end":[152,47],"start":[152,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[152,25],"start":[152,22]}},"type":"Var","value":{"identifier":"pow","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[152,33],"start":[152,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[152,33],"start":[152,26]}},"type":"Var","value":{"identifier":"clamped","sourcePos":[150,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[152,47],"start":[152,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[152,46],"start":[152,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[152,38],"start":[152,35]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[152,46],"start":[152,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[152,46],"start":[152,41]}},"type":"Var","value":{"identifier":"gamma","sourcePos":[147,7]}},"type":"App"},"type":"App"},"identifier":"gammaApplied"},{"annotation":{"meta":null,"sourceSpan":{"end":[154,63],"start":[154,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[154,63],"start":[154,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[154,34],"start":[154,16]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[154,22],"start":[154,16]}},"type":"Var","value":{"identifier":"params","sourcePos":[144,1]}},"fieldName":"outputBlack","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[154,63],"start":[154,16]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[154,63],"start":[154,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[154,49],"start":[154,37]}},"type":"Var","value":{"identifier":"gammaApplied","sourcePos":[152,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[154,63],"start":[154,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[154,63],"start":[154,52]}},"type":"Var","value":{"identifier":"outputRange","sourcePos":[146,7]}},"type":"App"},"type":"App"},"identifier":"output"}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[155,13],"start":[155,6]}},"type":"Var","value":{"identifier":"clamp01","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[155,20],"start":[155,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[155,20],"start":[155,14]}},"type":"Var","value":{"identifier":"output","sourcePos":[154,7]}},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"levelsPixel"},{"annotation":{"meta":null,"sourceSpan":{"end":[158,99],"start":[158,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[158,99],"start":[158,1]}},"argument":"params","body":{"annotation":{"meta":null,"sourceSpan":{"end":[158,99],"start":[158,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[158,99],"start":[158,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[159,14],"start":[159,8]}},"binderType":"VarBinder","identifier":"params1"},{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[159,35],"start":[159,16]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[159,23],"start":[159,22]}},"binderType":"VarBinder","identifier":"r"},{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[159,34],"start":[159,25]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[159,32],"start":[159,31]}},"binderType":"VarBinder","identifier":"g"},{"annotation":{"meta":null,"sourceSpan":{"end":[159,34],"start":[159,33]}},"binderType":"VarBinder","identifier":"b"}],"constructorName":{"identifier":"Tuple","moduleName":["Data","Tuple"]},"typeName":{"identifier":"Tuple","moduleName":["Data","Tuple"]}}],"constructorName":{"identifier":"Tuple","moduleName":["Data","Tuple"]},"typeName":{"identifier":"Tuple","moduleName":["Data","Tuple"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[160,8],"start":[160,3]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[161,27],"start":[160,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[161,17],"start":[161,6]}},"type":"Var","value":{"identifier":"levelsPixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[161,24],"start":[161,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[161,24],"start":[161,18]}},"type":"Var","value":{"identifier":"params1","sourcePos":[159,8]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[161,26],"start":[161,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[161,26],"start":[161,25]}},"type":"Var","value":{"identifier":"r","sourcePos":[159,22]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[164,30],"start":[160,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[162,11],"start":[162,6]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[163,29],"start":[162,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[163,19],"start":[163,8]}},"type":"Var","value":{"identifier":"levelsPixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[163,26],"start":[163,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[163,26],"start":[163,20]}},"type":"Var","value":{"identifier":"params1","sourcePos":[159,8]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[163,28],"start":[163,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[163,28],"start":[163,27]}},"type":"Var","value":{"identifier":"g","sourcePos":[159,31]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[164,29],"start":[162,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[164,19],"start":[164,8]}},"type":"Var","value":{"identifier":"levelsPixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[164,26],"start":[164,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[164,26],"start":[164,20]}},"type":"Var","value":{"identifier":"params1","sourcePos":[159,8]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[164,28],"start":[164,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[164,28],"start":[164,27]}},"type":"Var","value":{"identifier":"b","sourcePos":[159,33]}},"type":"App"},"type":"App"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[164,30],"start":[159,1]}},"type":"Var","value":{"identifier":"params","sourcePos":[159,8]}},{"annotation":{"meta":null,"sourceSpan":{"end":[164,30],"start":[159,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"levels"},{"annotation":{"meta":null,"sourceSpan":{"end":[199,44],"start":[199,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[199,44],"start":[199,1]}},"argument":"f","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[205,4],"start":[201,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[204,41],"start":[201,8]}},"argument":"i","body":{"annotation":{"meta":null,"sourceSpan":{"end":[204,41],"start":[202,5]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[202,40],"start":[202,9]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[202,40],"start":[202,22]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[202,30],"start":[202,22]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[202,32],"start":[202,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[202,32],"start":[202,31]}},"type":"Var","value":{"identifier":"i","sourcePos":[201,9]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[202,40],"start":[202,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[202,40],"start":[202,35]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"identifier":"normalized"},{"annotation":{"meta":null,"sourceSpan":{"end":[203,30],"start":[203,9]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[203,19],"start":[203,18]}},"type":"Var","value":{"identifier":"f","sourcePos":[200,1]}},"annotation":{"meta":null,"sourceSpan":{"end":[203,30],"start":[203,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[203,30],"start":[203,20]}},"type":"Var","value":{"identifier":"normalized","sourcePos":[202,9]}},"type":"App"},"identifier":"result"}],"expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[204,13],"start":[204,8]}},"type":"Var","value":{"identifier":"round","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[204,41],"start":[204,8]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[204,23],"start":[204,15]}},"type":"Var","value":{"identifier":"clamp255","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[204,40],"start":[204,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[204,39],"start":[204,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[204,31],"start":[204,25]}},"type":"Var","value":{"identifier":"result","sourcePos":[203,9]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[204,39],"start":[204,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[204,39],"start":[204,34]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":255}},"type":"App"},"type":"App"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[201,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[205,10],"start":[205,8]}},"type":"Var","value":{"identifier":"range","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[205,14],"start":[205,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[205,7],"start":[205,6]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[205,14],"start":[205,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[205,14],"start":[205,11]}},"type":"Literal","value":{"literalType":"IntLiteral","value":255}},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"buildLUT"},{"annotation":{"meta":null,"sourceSpan":{"end":[122,59],"start":[122,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[122,59],"start":[122,1]}},"argument":"params","body":{"annotation":{"meta":null,"sourceSpan":{"end":[122,59],"start":[122,1]}},"argument":"value","body":{"annotation":{"meta":null,"sourceSpan":{"end":[127,26],"start":[124,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[125,49],"start":[125,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[125,49],"start":[125,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[125,29],"start":[125,24]}},"type":"Var","value":{"identifier":"value","sourcePos":[123,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[125,49],"start":[125,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[125,49],"start":[125,32]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[125,38],"start":[125,32]}},"type":"Var","value":{"identifier":"params","sourcePos":[123,1]}},"fieldName":"brightness","type":"Accessor"},"type":"App"},"identifier":"withBrightness"},{"annotation":{"meta":null,"sourceSpan":{"end":[124,63],"start":[124,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[124,30],"start":[124,16]}},"type":"Var","value":{"identifier":"contrastFactor","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[124,47],"start":[124,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[124,47],"start":[124,31]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[124,37],"start":[124,31]}},"type":"Var","value":{"identifier":"params","sourcePos":[123,1]}},"fieldName":"useLegacy","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[124,63],"start":[124,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[124,63],"start":[124,48]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[124,54],"start":[124,48]}},"type":"Var","value":{"identifier":"params","sourcePos":[123,1]}},"fieldName":"contrast","type":"Accessor"},"type":"App"},"identifier":"factor"},{"annotation":{"meta":null,"sourceSpan":{"end":[126,59],"start":[126,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,59],"start":[126,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,59],"start":[126,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,28],"start":[126,22]}},"type":"Var","value":{"identifier":"factor","sourcePos":[124,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,59],"start":[126,22]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[126,52],"start":[126,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,46],"start":[126,32]}},"type":"Var","value":{"identifier":"withBrightness","sourcePos":[125,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,52],"start":[126,32]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,52],"start":[126,49]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.5}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[126,59],"start":[126,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[126,59],"start":[126,56]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.5}},"type":"App"},"identifier":"withContrast"}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[127,13],"start":[127,6]}},"type":"Var","value":{"identifier":"clamp01","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[127,26],"start":[127,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[127,26],"start":[127,14]}},"type":"Var","value":{"identifier":"withContrast","sourcePos":[126,7]}},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"brightnessContrastPixel"},{"annotation":{"meta":null,"sourceSpan":{"end":[130,110],"start":[130,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[130,110],"start":[130,1]}},"argument":"params","body":{"annotation":{"meta":null,"sourceSpan":{"end":[130,110],"start":[130,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[130,110],"start":[130,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[131,26],"start":[131,20]}},"binderType":"VarBinder","identifier":"params1"},{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[131,47],"start":[131,28]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[131,35],"start":[131,34]}},"binderType":"VarBinder","identifier":"r"},{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[131,46],"start":[131,37]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[131,44],"start":[131,43]}},"binderType":"VarBinder","identifier":"g"},{"annotation":{"meta":null,"sourceSpan":{"end":[131,46],"start":[131,45]}},"binderType":"VarBinder","identifier":"b"}],"constructorName":{"identifier":"Tuple","moduleName":["Data","Tuple"]},"typeName":{"identifier":"Tuple","moduleName":["Data","Tuple"]}}],"constructorName":{"identifier":"Tuple","moduleName":["Data","Tuple"]},"typeName":{"identifier":"Tuple","moduleName":["Data","Tuple"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[132,8],"start":[132,3]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[133,39],"start":[132,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[133,29],"start":[133,6]}},"type":"Var","value":{"identifier":"brightnessContrastPixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[133,36],"start":[133,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[133,36],"start":[133,30]}},"type":"Var","value":{"identifier":"params1","sourcePos":[131,20]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[133,38],"start":[133,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[133,38],"start":[133,37]}},"type":"Var","value":{"identifier":"r","sourcePos":[131,34]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[136,42],"start":[132,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[134,11],"start":[134,6]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[135,41],"start":[134,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[135,31],"start":[135,8]}},"type":"Var","value":{"identifier":"brightnessContrastPixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[135,38],"start":[135,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[135,38],"start":[135,32]}},"type":"Var","value":{"identifier":"params1","sourcePos":[131,20]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[135,40],"start":[135,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[135,40],"start":[135,39]}},"type":"Var","value":{"identifier":"g","sourcePos":[131,43]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[136,41],"start":[134,6]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[136,31],"start":[136,8]}},"type":"Var","value":{"identifier":"brightnessContrastPixel","moduleName":["Lattice","Services","Effects","ColorCorrection"]}},"annotation":{"meta":null,"sourceSpan":{"end":[136,38],"start":[136,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[136,38],"start":[136,32]}},"type":"Var","value":{"identifier":"params1","sourcePos":[131,20]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[136,40],"start":[136,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[136,40],"start":[136,39]}},"type":"Var","value":{"identifier":"b","sourcePos":[131,45]}},"type":"App"},"type":"App"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[136,42],"start":[131,1]}},"type":"Var","value":{"identifier":"params","sourcePos":[131,20]}},{"annotation":{"meta":null,"sourceSpan":{"end":[136,42],"start":[131,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"brightnessContrast"}],"exports":["defaultColorParams","defaultLevelsParams","defaultExposureParams","brightnessContrast","brightnessContrastPixel","levels","levelsPixel","exposure","exposurePixel","buildLUT"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Control","Semigroupoid"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Data","Array"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Data","EuclideanRing"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Data","Functor"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Data","Int"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Data","Tuple"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Lattice","Services","Effects","ColorCorrection"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Math"]},{"annotation":{"meta":null,"sourceSpan":{"end":[29,15],"start":[29,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[205,15],"start":[13,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","Effects","ColorCorrection"],"modulePath":"src/Lattice/Services/Effects/ColorCorrection.purs","reExports":{},"sourceSpan":{"end":[205,15],"start":[13,1]}}