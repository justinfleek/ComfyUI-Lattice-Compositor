{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Services.Particles.Emitter - Particle Emission Logic"},{"LineComment":" |"},{"LineComment":" | Pure mathematical functions for particle emission:"},{"LineComment":" | - Emission rate calculation with accumulator"},{"LineComment":" | - Burst emission on enable"},{"LineComment":" | - Audio-reactive rate modulation"},{"LineComment":" |"},{"LineComment":" | All functions are total and deterministic."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/services/particleSystem.ts (lines 481-507, 938-1054)"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,25],"start":[114,22]}},"type":"Var","value":{"identifier":"min","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[114,45],"start":[114,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordInt","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"min"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[115,39],"start":[115,38]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[115,63],"start":[115,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[95,48],"start":[95,46]}},"type":"Var","value":{"identifier":"conj","moduleName":["Data","HeytingAlgebra"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"heytingAlgebraBoolean","moduleName":["Data","HeytingAlgebra"]}},"type":"App"},"identifier":"conj"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[95,28],"start":[95,25]}},"type":"Var","value":{"identifier":"not","moduleName":["Data","HeytingAlgebra"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[95,45],"start":[95,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"heytingAlgebraBoolean","moduleName":["Data","HeytingAlgebra"]}},"type":"App"},"identifier":"not"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[95,74],"start":[95,72]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[128,37],"start":[128,36]}},"type":"Var","value":{"identifier":"mul","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[128,55],"start":[128,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"mul"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[129,31],"start":[129,30]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[129,47],"start":[129,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[144,14],"start":[144,13]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[144,18],"start":[144,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThan"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"constructorName":"EmitRandom","fieldNames":[],"type":"Constructor","typeName":"EmitMode"},"identifier":"EmitRandom"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"constructorName":"EmitUniform","fieldNames":[],"type":"Constructor","typeName":"EmitMode"},"identifier":"EmitUniform"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"constructorName":"EmitSequential","fieldNames":[],"type":"Constructor","typeName":"EmitMode"},"identifier":"EmitSequential"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"constructorName":"EmitStart","fieldNames":[],"type":"Constructor","typeName":"EmitMode"},"identifier":"EmitStart"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[42,12],"start":[37,1]}},"constructorName":"EmitEnd","fieldNames":[],"type":"Constructor","typeName":"EmitMode"},"identifier":"EmitEnd"},{"annotation":{"meta":null,"sourceSpan":{"end":[111,53],"start":[111,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[111,53],"start":[111,1]}},"argument":"accumulated","body":{"annotation":{"meta":null,"sourceSpan":{"end":[111,53],"start":[111,1]}},"argument":"maxSpawn","body":{"annotation":{"meta":null,"sourceSpan":{"end":[117,35],"start":[113,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[114,54],"start":[114,5]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"min","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,45],"start":[114,22]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[114,32],"start":[114,27]}},"type":"Var","value":{"identifier":"floor","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[114,44],"start":[114,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,44],"start":[114,33]}},"type":"Var","value":{"identifier":"accumulated","sourcePos":[112,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[114,54],"start":[114,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[114,54],"start":[114,46]}},"type":"Var","value":{"identifier":"maxSpawn","sourcePos":[112,1]}},"type":"App"},"identifier":"wholeParticles"},{"annotation":{"meta":null,"sourceSpan":{"end":[115,64],"start":[115,5]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[115,20],"start":[115,17]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[115,24],"start":[115,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[115,24],"start":[115,21]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[115,64],"start":[115,17]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[115,63],"start":[115,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[115,37],"start":[115,26]}},"type":"Var","value":{"identifier":"accumulated","sourcePos":[112,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[115,63],"start":[115,26]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[115,48],"start":[115,40]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[115,63],"start":[115,40]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[115,63],"start":[115,49]}},"type":"Var","value":{"identifier":"wholeParticles","sourcePos":[114,5]}},"type":"App"},"type":"App"},"type":"App"},"identifier":"remaining"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"constructorType":"ProductType","identifiers":["value0","value1"],"metaType":"IsConstructor"},"sourceSpan":{"end":[117,10],"start":[117,5]}},"type":"Var","value":{"identifier":"Tuple","moduleName":["Data","Tuple"]}},"annotation":{"meta":null,"sourceSpan":{"end":[117,25],"start":[117,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[117,25],"start":[117,11]}},"type":"Var","value":{"identifier":"wholeParticles","sourcePos":[114,5]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[117,35],"start":[117,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[117,35],"start":[117,26]}},"type":"Var","value":{"identifier":"remaining","sourcePos":[115,5]}},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"stepAccumulator"},{"annotation":{"meta":null,"sourceSpan":{"end":[51,27],"start":[46,1]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[51,27],"start":[46,1]}},"type":"Var","value":{"identifier":"Show$Dict","moduleName":["Data","Show"]}},"annotation":{"meta":null,"sourceSpan":{"end":[51,27],"start":[46,1]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[51,27],"start":[46,1]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["show",{"annotation":{"meta":null,"sourceSpan":{"end":[51,27],"start":[46,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[51,27],"start":[46,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[47,18],"start":[47,8]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitRandom","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[47,33],"start":[47,21]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"EmitRandom"}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[48,19],"start":[48,8]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitUniform","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[48,35],"start":[48,22]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"EmitUniform"}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[49,22],"start":[49,8]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitSequential","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[49,41],"start":[49,25]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"EmitSequential"}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[50,17],"start":[50,8]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitStart","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[50,31],"start":[50,20]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"EmitStart"}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[51,15],"start":[51,8]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitEnd","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[51,27],"start":[51,18]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"EmitEnd"}},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[47,33],"start":[47,3]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"}]]}},"type":"App"},"identifier":"showEmitMode"},{"annotation":{"meta":null,"sourceSpan":{"end":[74,36],"start":[74,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[80,4],"start":[76,3]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["accumulator",{"annotation":{"meta":null,"sourceSpan":{"end":[76,21],"start":[76,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["sequentialT",{"annotation":{"meta":null,"sourceSpan":{"end":[77,21],"start":[77,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["burstTriggered",{"annotation":{"meta":null,"sourceSpan":{"end":[78,26],"start":[78,21]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}}],["enabled",{"annotation":{"meta":null,"sourceSpan":{"end":[79,19],"start":[79,14]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}}]]}},"identifier":"initialEmitterState"},{"annotation":{"meta":null,"sourceSpan":{"end":[44,42],"start":[44,1]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"Eq$Dict","moduleName":["Data","Eq"]}},"annotation":{"meta":null,"sourceSpan":{"end":[44,42],"start":[44,1]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["eq",{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"argument":"x","body":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"argument":"y","body":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitRandom","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitRandom","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitUniform","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitUniform","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitSequential","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitSequential","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitStart","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitStart","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitEnd","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}},{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"EmitEnd","moduleName":["Lattice","Services","Particles","Emitter"]},"typeName":{"identifier":"EmitMode","moduleName":["Lattice","Services","Particles","Emitter"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"NullBinder"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"x","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"y","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"type":"Abs"}]]}},"type":"App"},"identifier":"eqEmitMode"},{"annotation":{"meta":null,"sourceSpan":{"end":[89,58],"start":[89,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[89,58],"start":[89,1]}},"argument":"baseRate","body":{"annotation":{"meta":null,"sourceSpan":{"end":[89,58],"start":[89,1]}},"argument":"audioValue","body":{"annotation":{"meta":{"metaType":"IsWhere"},"sourceSpan":{"end":[93,26],"start":[91,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,5]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,5]}},"argument":"x","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"conj","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"not","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,45],"start":[95,25]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[95,42],"start":[95,30]}},"type":"Var","value":{"identifier":"isNaN","moduleName":["Data","Number"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,44],"start":[95,30]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[95,44],"start":[95,43]}},"type":"Var","value":{"identifier":"x","sourcePos":[95,5]}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"conj","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[95,64],"start":[95,49]}},"type":"Var","value":{"identifier":"isFinite","moduleName":["Data","Number"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,66],"start":[95,49]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[95,66],"start":[95,65]}},"type":"Var","value":{"identifier":"x","sourcePos":[95,5]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[95,71],"start":[95,70]}},"type":"Var","value":{"identifier":"x","sourcePos":[95,5]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[95,78],"start":[95,75]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"isValidPositive"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[93,26],"start":[91,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[92,11],"start":[92,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[92,11],"start":[92,10]}},"binderType":"VarBinder","identifier":"v"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[92,36],"start":[92,35]}},"type":"Var","value":{"identifier":"v","sourcePos":[92,10]}},"guard":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[92,29],"start":[92,14]}},"type":"Var","value":{"identifier":"isValidPositive","sourcePos":[95,5]}},"annotation":{"meta":null,"sourceSpan":{"end":[92,31],"start":[92,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[92,31],"start":[92,30]}},"type":"Var","value":{"identifier":"v","sourcePos":[92,10]}},"type":"App"}}],"isGuarded":true},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[93,6],"start":[93,5]}},"binderType":"NullBinder"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[93,13],"start":[93,10]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[93,17],"start":[93,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[93,17],"start":[93,14]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[93,26],"start":[93,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[93,26],"start":[93,18]}},"type":"Var","value":{"identifier":"baseRate","sourcePos":[90,1]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[91,18],"start":[91,8]}},"type":"Var","value":{"identifier":"audioValue","sourcePos":[90,1]}}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"effectiveEmissionRate"},{"annotation":{"meta":null,"sourceSpan":{"end":[125,22],"start":[120,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[125,22],"start":[120,1]}},"argument":"emissionRate","body":{"annotation":{"meta":null,"sourceSpan":{"end":[125,22],"start":[120,1]}},"argument":"deltaTime","body":{"annotation":{"meta":null,"sourceSpan":{"end":[125,22],"start":[120,1]}},"argument":"currentAcc","body":{"annotation":{"meta":null,"sourceSpan":{"end":[125,22],"start":[120,1]}},"argument":"maxSpawn","body":{"annotation":{"meta":null,"sourceSpan":{"end":[131,41],"start":[127,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[128,55],"start":[128,5]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[128,55],"start":[128,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[128,35],"start":[128,23]}},"type":"Var","value":{"identifier":"emissionRate","sourcePos":[126,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[128,55],"start":[128,23]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[128,41],"start":[128,38]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[128,45],"start":[128,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[128,45],"start":[128,42]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[128,55],"start":[128,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[128,55],"start":[128,46]}},"type":"Var","value":{"identifier":"deltaTime","sourcePos":[126,1]}},"type":"App"},"type":"App"},"identifier":"particlesToEmit"},{"annotation":{"meta":null,"sourceSpan":{"end":[129,47],"start":[129,5]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[129,47],"start":[129,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[129,29],"start":[129,19]}},"type":"Var","value":{"identifier":"currentAcc","sourcePos":[126,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[129,47],"start":[129,19]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[129,47],"start":[129,32]}},"type":"Var","value":{"identifier":"particlesToEmit","sourcePos":[128,5]}},"type":"App"},"identifier":"accumulated"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[131,20],"start":[131,5]}},"type":"Var","value":{"identifier":"stepAccumulator","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[131,32],"start":[131,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[131,32],"start":[131,21]}},"type":"Var","value":{"identifier":"accumulated","sourcePos":[129,5]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[131,41],"start":[131,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[131,41],"start":[131,33]}},"type":"Var","value":{"identifier":"maxSpawn","sourcePos":[126,1]}},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"calculateEmission"},{"annotation":{"meta":null,"sourceSpan":{"end":[100,38],"start":[100,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[100,38],"start":[100,1]}},"argument":"emissionRate","body":{"annotation":{"meta":null,"sourceSpan":{"end":[100,38],"start":[100,1]}},"argument":"burstMultiplier","body":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[102,8],"start":[102,3]}},"type":"Var","value":{"identifier":"floor","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[102,56],"start":[102,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[102,55],"start":[102,10]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[102,55],"start":[102,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,22],"start":[102,10]}},"type":"Var","value":{"identifier":"emissionRate","sourcePos":[101,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[102,55],"start":[102,10]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[102,28],"start":[102,25]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[102,32],"start":[102,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,32],"start":[102,29]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[102,48],"start":[102,25]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,48],"start":[102,33]}},"type":"Var","value":{"identifier":"burstMultiplier","sourcePos":[101,1]}},"type":"App"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[102,55],"start":[102,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,55],"start":[102,51]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":10}},"type":"App"},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"burstCount"},{"annotation":{"meta":null,"sourceSpan":{"end":[138,49],"start":[138,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[138,49],"start":[138,1]}},"argument":"currentT","body":{"annotation":{"meta":null,"sourceSpan":{"end":[138,49],"start":[138,1]}},"argument":"speed","body":{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[140,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[141,32],"start":[141,5]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[141,20],"start":[141,17]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[141,26],"start":[141,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[141,26],"start":[141,21]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1.0e-3}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[141,32],"start":[141,17]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[141,32],"start":[141,27]}},"type":"Var","value":{"identifier":"speed","sourcePos":[139,1]}},"type":"App"},"identifier":"safeSpeed"},{"annotation":{"meta":null,"sourceSpan":{"end":[142,32],"start":[142,5]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[142,32],"start":[142,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[142,20],"start":[142,12]}},"type":"Var","value":{"identifier":"currentT","sourcePos":[139,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[142,32],"start":[142,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[142,32],"start":[142,23]}},"type":"Var","value":{"identifier":"safeSpeed","sourcePos":[141,5]}},"type":"App"},"identifier":"newT"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[144,5]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[144,5]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[144,34],"start":[144,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[144,28],"start":[144,24]}},"type":"Var","value":{"identifier":"newT","sourcePos":[142,5]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[144,34],"start":[144,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[144,34],"start":[144,31]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[144,5]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[144,40]}},"type":"Var","value":{"identifier":"newT","sourcePos":[142,5]}},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Lattice","Services","Particles","Emitter"]}},"annotation":{"meta":null,"sourceSpan":{"end":[144,18],"start":[144,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[144,12],"start":[144,8]}},"type":"Var","value":{"identifier":"newT","sourcePos":[142,5]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[144,18],"start":[144,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[144,18],"start":[144,15]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"Abs"},"identifier":"advanceSequentialT"}],"exports":["EmitRandom","EmitUniform","EmitSequential","EmitStart","EmitEnd","initialEmitterState","effectiveEmissionRate","burstCount","calculateEmission","stepAccumulator","advanceSequentialT","eqEmitMode","showEmitMode"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Eq"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","HeytingAlgebra"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Int"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Maybe"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Number"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Show"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Data","Tuple"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Lattice","Services","Particles","Emitter"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Math"]},{"annotation":{"meta":null,"sourceSpan":{"end":[24,15],"start":[24,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[144,44],"start":[12,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","Particles","Emitter"],"modulePath":"src/Lattice/Services/Particles/Emitter.purs","reExports":{},"sourceSpan":{"end":[144,44],"start":[12,1]}}