{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Services.Export.WanMoveExport.Composite - Multi-layer composition"},{"LineComment":" |"},{"LineComment":" | Functions for compositing multiple flow layers into combined trajectories."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/services/export/wanMoveExport.ts"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[44,36],"start":[44,33]}},"type":"Var","value":{"identifier":"map","moduleName":["Data","Functor"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[44,68],"start":[44,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"functorArray","moduleName":["Data","Functor"]}},"type":"App"},"identifier":"map"},{"annotation":{"meta":null,"sourceSpan":{"end":[29,60],"start":[29,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[29,60],"start":[29,1]}},"argument":"layers","body":{"annotation":{"meta":null,"sourceSpan":{"end":[55,10],"start":[31,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[29,60],"start":[29,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[31,17],"start":[31,15]}},"type":"Var","value":{"identifier":"index","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[31,19],"start":[31,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[31,14],"start":[31,8]}},"type":"Var","value":{"identifier":"layers","sourcePos":[30,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[31,19],"start":[31,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[31,19],"start":[31,18]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}},"type":"App"},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[55,10],"start":[31,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[32,12],"start":[32,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[37,8],"start":[34,7]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["tracks",{"annotation":{"meta":null,"sourceSpan":{"end":[34,19],"start":[34,17]}},"type":"Literal","value":{"literalType":"ArrayLiteral","value":[]}}],["visibility",{"annotation":{"meta":null,"sourceSpan":{"end":[35,23],"start":[35,21]}},"type":"Literal","value":{"literalType":"ArrayLiteral","value":[]}}],["metadata",{"annotation":{"meta":null,"sourceSpan":{"end":[36,83],"start":[36,19]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["numPoints",{"annotation":{"meta":null,"sourceSpan":{"end":[36,33],"start":[36,32]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}}],["numFrames",{"annotation":{"meta":null,"sourceSpan":{"end":[36,47],"start":[36,46]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}}],["width",{"annotation":{"meta":null,"sourceSpan":{"end":[36,59],"start":[36,56]}},"type":"Literal","value":{"literalType":"IntLiteral","value":512}}],["height",{"annotation":{"meta":null,"sourceSpan":{"end":[36,72],"start":[36,69]}},"type":"Literal","value":{"literalType":"IntLiteral","value":512}}],["fps",{"annotation":{"meta":null,"sourceSpan":{"end":[36,81],"start":[36,79]}},"type":"Literal","value":{"literalType":"IntLiteral","value":16}}]]}}]]}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[38,20],"start":[38,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[38,20],"start":[38,10]}},"binderType":"VarBinder","identifier":"firstLayer"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[55,10],"start":[39,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[40,51],"start":[40,9]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[40,51],"start":[40,21]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[40,51],"start":[40,21]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[40,31],"start":[40,21]}},"type":"Var","value":{"identifier":"firstLayer","sourcePos":[38,10]}},"fieldName":"trajectory","type":"Accessor"},"fieldName":"metadata","type":"Accessor"},"identifier":"firstMeta"},{"annotation":{"meta":null,"sourceSpan":{"end":[44,76],"start":[44,9]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[44,31],"start":[44,25]}},"type":"Var","value":{"identifier":"concat","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[44,76],"start":[44,25]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["Lattice","Services","Export","WanMoveExport","Composite"]}},"annotation":{"meta":null,"sourceSpan":{"end":[44,68],"start":[44,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[44,67],"start":[44,38]}},"argument":"l","body":{"annotation":{"meta":null,"sourceSpan":{"end":[44,67],"start":[44,44]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[44,67],"start":[44,44]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[44,45],"start":[44,44]}},"type":"Var","value":{"identifier":"l","sourcePos":[44,39]}},"fieldName":"trajectory","type":"Accessor"},"fieldName":"visibility","type":"Accessor"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[44,75],"start":[44,33]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[44,75],"start":[44,69]}},"type":"Var","value":{"identifier":"layers","sourcePos":[30,1]}},"type":"App"},"type":"App"},"identifier":"allVisibility"},{"annotation":{"meta":null,"sourceSpan":{"end":[43,68],"start":[43,9]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[43,27],"start":[43,21]}},"type":"Var","value":{"identifier":"concat","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[43,68],"start":[43,21]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["Lattice","Services","Export","WanMoveExport","Composite"]}},"annotation":{"meta":null,"sourceSpan":{"end":[43,60],"start":[43,29]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[43,59],"start":[43,34]}},"argument":"l","body":{"annotation":{"meta":null,"sourceSpan":{"end":[43,59],"start":[43,40]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[43,59],"start":[43,40]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[43,41],"start":[43,40]}},"type":"Var","value":{"identifier":"l","sourcePos":[43,35]}},"fieldName":"trajectory","type":"Accessor"},"fieldName":"tracks","type":"Accessor"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[43,67],"start":[43,29]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[43,67],"start":[43,61]}},"type":"Var","value":{"identifier":"layers","sourcePos":[30,1]}},"type":"App"},"type":"App"},"identifier":"allTracks"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[55,10],"start":[46,9]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["tracks",{"annotation":{"meta":null,"sourceSpan":{"end":[46,28],"start":[46,19]}},"type":"Var","value":{"identifier":"allTracks","sourcePos":[43,9]}}],["visibility",{"annotation":{"meta":null,"sourceSpan":{"end":[47,36],"start":[47,23]}},"type":"Var","value":{"identifier":"allVisibility","sourcePos":[44,9]}}],["metadata",{"annotation":{"meta":null,"sourceSpan":{"end":[54,14],"start":[49,13]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["numPoints",{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[49,32],"start":[49,26]}},"type":"Var","value":{"identifier":"length","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[49,42],"start":[49,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[49,42],"start":[49,33]}},"type":"Var","value":{"identifier":"allTracks","sourcePos":[43,9]}},"type":"App"}],["numFrames",{"annotation":{"meta":null,"sourceSpan":{"end":[50,45],"start":[50,26]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[50,35],"start":[50,26]}},"type":"Var","value":{"identifier":"firstMeta","sourcePos":[40,9]}},"fieldName":"numFrames","type":"Accessor"}],["width",{"annotation":{"meta":null,"sourceSpan":{"end":[51,37],"start":[51,22]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[51,31],"start":[51,22]}},"type":"Var","value":{"identifier":"firstMeta","sourcePos":[40,9]}},"fieldName":"width","type":"Accessor"}],["height",{"annotation":{"meta":null,"sourceSpan":{"end":[52,39],"start":[52,23]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[52,32],"start":[52,23]}},"type":"Var","value":{"identifier":"firstMeta","sourcePos":[40,9]}},"fieldName":"height","type":"Accessor"}],["fps",{"annotation":{"meta":null,"sourceSpan":{"end":[53,33],"start":[53,20]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[53,29],"start":[53,20]}},"type":"Var","value":{"identifier":"firstMeta","sourcePos":[40,9]}},"fieldName":"fps","type":"Accessor"}]]}}]]}},"type":"Let"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[29,60],"start":[29,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Let"},"type":"Abs"},"identifier":"compositeFlowLayers"},{"annotation":{"meta":null,"sourceSpan":{"end":[58,63],"start":[58,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[58,63],"start":[58,1]}},"argument":"layers","body":{"annotation":{"meta":null,"sourceSpan":{"end":[79,6],"start":[60,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[71,14],"start":[64,5]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[64,20],"start":[64,14]}},"type":"Var","value":{"identifier":"concat","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[71,14],"start":[64,14]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["Lattice","Services","Export","WanMoveExport","Composite"]}},"annotation":{"meta":null,"sourceSpan":{"end":[71,6],"start":[64,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[70,34],"start":[64,27]}},"argument":"layer","body":{"annotation":{"meta":null,"sourceSpan":{"end":[70,34],"start":[65,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[66,70],"start":[66,9]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[66,31],"start":[66,22]}},"type":"Var","value":{"identifier":"fromMaybe","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[66,58],"start":[66,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[66,58],"start":[66,32]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["r",{"annotation":{"meta":null,"sourceSpan":{"end":[66,40],"start":[66,37]}},"type":"Literal","value":{"literalType":"IntLiteral","value":255}}],["g",{"annotation":{"meta":null,"sourceSpan":{"end":[66,48],"start":[66,45]}},"type":"Literal","value":{"literalType":"IntLiteral","value":255}}],["b",{"annotation":{"meta":null,"sourceSpan":{"end":[66,56],"start":[66,53]}},"type":"Literal","value":{"literalType":"IntLiteral","value":255}}]]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[66,70],"start":[66,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[66,70],"start":[66,59]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[66,64],"start":[66,59]}},"type":"Var","value":{"identifier":"layer","sourcePos":[64,28]}},"fieldName":"color","type":"Accessor"},"type":"App"},"identifier":"layerColor"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["Lattice","Services","Export","WanMoveExport","Composite"]}},"annotation":{"meta":null,"sourceSpan":{"end":[70,10],"start":[68,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,39],"start":[68,14]}},"argument":"track","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["Lattice","Services","Export","WanMoveExport","Composite"]}},"annotation":{"meta":null,"sourceSpan":{"end":[69,33],"start":[69,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,32],"start":[69,16]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[69,32],"start":[69,22]}},"type":"Var","value":{"identifier":"layerColor","sourcePos":[66,9]}},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[69,39],"start":[69,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[69,39],"start":[69,34]}},"type":"Var","value":{"identifier":"track","sourcePos":[68,15]}},"type":"App"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[70,34],"start":[68,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[70,34],"start":[70,11]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[70,34],"start":[70,11]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[70,16],"start":[70,11]}},"type":"Var","value":{"identifier":"layer","sourcePos":[64,28]}},"fieldName":"trajectory","type":"Accessor"},"fieldName":"tracks","type":"Accessor"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[71,13],"start":[64,22]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[71,13],"start":[71,7]}},"type":"Var","value":{"identifier":"layers","sourcePos":[59,1]}},"type":"App"},"type":"App"},"identifier":"colors"},{"annotation":{"meta":null,"sourceSpan":{"end":[61,38],"start":[61,5]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[61,31],"start":[61,12]}},"type":"Var","value":{"identifier":"compositeFlowLayers","moduleName":["Lattice","Services","Export","WanMoveExport","Composite"]}},"annotation":{"meta":null,"sourceSpan":{"end":[61,38],"start":[61,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[61,38],"start":[61,32]}},"type":"Var","value":{"identifier":"layers","sourcePos":[59,1]}},"type":"App"},"identifier":"base"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[79,6],"start":[73,5]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["tracks",{"annotation":{"meta":null,"sourceSpan":{"end":[73,26],"start":[73,15]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[73,19],"start":[73,15]}},"type":"Var","value":{"identifier":"base","sourcePos":[61,5]}},"fieldName":"tracks","type":"Accessor"}],["visibility",{"annotation":{"meta":null,"sourceSpan":{"end":[74,34],"start":[74,19]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[74,23],"start":[74,19]}},"type":"Var","value":{"identifier":"base","sourcePos":[61,5]}},"fieldName":"visibility","type":"Accessor"}],["metadata",{"annotation":{"meta":null,"sourceSpan":{"end":[75,30],"start":[75,17]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[75,21],"start":[75,17]}},"type":"Var","value":{"identifier":"base","sourcePos":[61,5]}},"fieldName":"metadata","type":"Accessor"}],["colors",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[76,19],"start":[76,15]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[76,26],"start":[76,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[76,26],"start":[76,20]}},"type":"Var","value":{"identifier":"colors","sourcePos":[64,5]}},"type":"App"}],["dataValues",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[77,26],"start":[77,19]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}],["trailLength",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[78,27],"start":[78,20]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}]]}},"type":"Let"},"type":"Abs"},"identifier":"compositeColoredLayers"}],"exports":["compositeFlowLayers","compositeColoredLayers"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[79,6],"start":[7,1]}},"moduleName":["Data","Array"]},{"annotation":{"meta":null,"sourceSpan":{"end":[79,6],"start":[7,1]}},"moduleName":["Data","Functor"]},{"annotation":{"meta":null,"sourceSpan":{"end":[79,6],"start":[7,1]}},"moduleName":["Data","Maybe"]},{"annotation":{"meta":null,"sourceSpan":{"end":[79,6],"start":[7,1]}},"moduleName":["Lattice","Services","Export","WanMoveExport","Composite"]},{"annotation":{"meta":null,"sourceSpan":{"end":[21,4],"start":[17,1]}},"moduleName":["Lattice","Services","Export","WanMoveExport","Types"]},{"annotation":{"meta":null,"sourceSpan":{"end":[13,15],"start":[13,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[79,6],"start":[7,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","Export","WanMoveExport","Composite"],"modulePath":"src/Lattice/Services/Export/WanMoveExport/Composite.purs","reExports":{},"sourceSpan":{"end":[79,6],"start":[7,1]}}