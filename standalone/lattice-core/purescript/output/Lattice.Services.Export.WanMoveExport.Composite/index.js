// Generated by purs version 0.15.15
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
var map = /* #__PURE__ */ Data_Functor.map(Data_Functor.functorArray);
var compositeFlowLayers = function (layers) {
    var v = Data_Array.index(layers)(0);
    if (v instanceof Data_Maybe.Nothing) {
        return {
            tracks: [  ],
            visibility: [  ],
            metadata: {
                numPoints: 0,
                numFrames: 0,
                width: 512,
                height: 512,
                fps: 16
            }
        };
    };
    if (v instanceof Data_Maybe.Just) {
        var allVisibility = Data_Array.concat(map(function (l) {
            return l.trajectory.visibility;
        })(layers));
        var allTracks = Data_Array.concat(map(function (l) {
            return l.trajectory.tracks;
        })(layers));
        return {
            tracks: allTracks,
            visibility: allVisibility,
            metadata: {
                numPoints: Data_Array.length(allTracks),
                numFrames: v.value0.trajectory.metadata.numFrames,
                width: v.value0.trajectory.metadata.width,
                height: v.value0.trajectory.metadata.height,
                fps: v.value0.trajectory.metadata.fps
            }
        };
    };
    throw new Error("Failed pattern match at Lattice.Services.Export.WanMoveExport.Composite (line 31, column 3 - line 55, column 10): " + [ v.constructor.name ]);
};
var compositeColoredLayers = function (layers) {
    var colors = Data_Array.concat(map(function (layer) {
        var layerColor = Data_Maybe.fromMaybe({
            r: 255,
            g: 255,
            b: 255
        })(layer.color);
        return map(function (track) {
            return map(function (v) {
                return layerColor;
            })(track);
        })(layer.trajectory.tracks);
    })(layers));
    var base = compositeFlowLayers(layers);
    return {
        tracks: base.tracks,
        visibility: base.visibility,
        metadata: base.metadata,
        colors: new Data_Maybe.Just(colors),
        dataValues: Data_Maybe.Nothing.value,
        trailLength: Data_Maybe.Nothing.value
    };
};
export {
    compositeFlowLayers,
    compositeColoredLayers
};
//# sourceMappingURL=index.js.map
