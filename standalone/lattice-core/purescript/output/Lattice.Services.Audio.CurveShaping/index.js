// Generated by purs version 0.15.15
import * as Data_Boolean from "../Data.Boolean/index.js";
import * as $$Math from "../Math/index.js";
var Linear = /* #__PURE__ */ (function () {
    function Linear() {

    };
    Linear.value = new Linear();
    return Linear;
})();
var Exponential = /* #__PURE__ */ (function () {
    function Exponential() {

    };
    Exponential.value = new Exponential();
    return Exponential;
})();
var Logarithmic = /* #__PURE__ */ (function () {
    function Logarithmic() {

    };
    Logarithmic.value = new Logarithmic();
    return Logarithmic;
})();
var Smoothstep = /* #__PURE__ */ (function () {
    function Smoothstep() {

    };
    Smoothstep.value = new Smoothstep();
    return Smoothstep;
})();
var Bounce = /* #__PURE__ */ (function () {
    function Bounce() {

    };
    Bounce.value = new Bounce();
    return Bounce;
})();
var eqCurveType = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Linear && y instanceof Linear) {
                return true;
            };
            if (x instanceof Exponential && y instanceof Exponential) {
                return true;
            };
            if (x instanceof Logarithmic && y instanceof Logarithmic) {
                return true;
            };
            if (x instanceof Smoothstep && y instanceof Smoothstep) {
                return true;
            };
            if (x instanceof Bounce && y instanceof Bounce) {
                return true;
            };
            return false;
        };
    }
};
var clamp01 = function (v) {
    return $$Math.max(0.0)($$Math.min(1.0)(v));
};
var exponentialCurve = function (value) {
    var clamped = clamp01(value);
    return clamped * clamped;
};
var logarithmicCurve = function (value) {
    var clamped = clamp01(value);
    return $$Math.sqrt(clamped);
};
var smoothstepCurve = function (value) {
    var clamped = clamp01(value);
    return clamped * clamped * (3.0 - 2.0 * clamped);
};
var bounceCurve = function (value) {
    var clamped = clamp01(value);
    var $12 = clamped < 0.5;
    if ($12) {
        return 2.0 * clamped * clamped;
    };
    var t = clamped - 0.5;
    var overshoot = 1.0 - 2.0 * t;
    return 0.5 + 0.5 * (1.0 - overshoot * overshoot);
};
var applyThreshold = function (value) {
    return function (threshold) {
        if (value < threshold) {
            return 0.0;
        };
        if (Data_Boolean.otherwise) {
            return value;
        };
        throw new Error("Failed pattern match at Lattice.Services.Audio.CurveShaping (line 134, column 1 - line 134, column 45): " + [ value.constructor.name, threshold.constructor.name ]);
    };
};
var applyThresholdSoftKnee = function (value) {
    return function (threshold) {
        return function (knee) {
            var kneeStart = threshold - knee / 2.0;
            var kneeEnd = threshold + knee / 2.0;
            var $15 = knee <= 0.0;
            if ($15) {
                return applyThreshold(value)(threshold);
            };
            var $16 = value < kneeStart;
            if ($16) {
                return 0.0;
            };
            var $17 = value > kneeEnd;
            if ($17) {
                return value;
            };
            var t = (value - kneeStart) / knee;
            var curved = t * t;
            return value * curved;
        };
    };
};
var applyCurve = function (value) {
    return function (curve) {
        if (curve instanceof Linear) {
            return clamp01(value);
        };
        if (curve instanceof Exponential) {
            return exponentialCurve(value);
        };
        if (curve instanceof Logarithmic) {
            return logarithmicCurve(value);
        };
        if (curve instanceof Smoothstep) {
            return smoothstepCurve(value);
        };
        if (curve instanceof Bounce) {
            return bounceCurve(value);
        };
        throw new Error("Failed pattern match at Lattice.Services.Audio.CurveShaping (line 103, column 26 - line 108, column 30): " + [ curve.constructor.name ]);
    };
};
var applyAmplitudeCurve = function (value) {
    return function (power) {
        if (power === 1.0) {
            return value;
        };
        if (Data_Boolean.otherwise) {
            return $$Math.pow($$Math.max(0.0)(value))(power);
        };
        throw new Error("Failed pattern match at Lattice.Services.Audio.CurveShaping (line 121, column 1 - line 121, column 50): " + [ value.constructor.name, power.constructor.name ]);
    };
};
var processAudioValue = function (value) {
    return function (threshold) {
        return function (amplitudeCurve) {
            return function (curve) {
                return function (invert) {
                    var v1 = applyThreshold(value)(threshold);
                    var v2 = applyAmplitudeCurve(v1)(amplitudeCurve);
                    var v3 = applyCurve(v2)(curve);
                    if (invert) {
                        return 1.0 - v3;
                    };
                    return v3;
                };
            };
        };
    };
};
export {
    Linear,
    Exponential,
    Logarithmic,
    Smoothstep,
    Bounce,
    clamp01,
    exponentialCurve,
    logarithmicCurve,
    smoothstepCurve,
    bounceCurve,
    applyCurve,
    applyAmplitudeCurve,
    applyThreshold,
    applyThresholdSoftKnee,
    processAudioValue,
    eqCurveType
};
//# sourceMappingURL=index.js.map
