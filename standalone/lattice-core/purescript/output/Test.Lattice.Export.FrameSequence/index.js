// Generated by purs version 0.15.15
import * as Control_Bind from "../Control.Bind/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Identity from "../Data.Identity/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Effect_Aff from "../Effect.Aff/index.js";
import * as Lattice_Services_Export_FrameSequence from "../Lattice.Services.Export.FrameSequence/index.js";
import * as Test_Spec from "../Test.Spec/index.js";
import * as Test_Spec_Assertions from "../Test.Spec.Assertions/index.js";
var describe = /* #__PURE__ */ Test_Spec.describe(Data_Identity.monadIdentity);
var discard = /* #__PURE__ */ Control_Bind.discard(Control_Bind.discardUnit);
var discard1 = /* #__PURE__ */ discard(/* #__PURE__ */ Test_Spec.bindSpecT(Data_Identity.bindIdentity));
var it = /* #__PURE__ */ Test_Spec.it(Data_Identity.monadIdentity)(Test_Spec.exampleMUnit);
var discard2 = /* #__PURE__ */ discard(Effect_Aff.bindAff);
var shouldEqual = /* #__PURE__ */ Test_Spec_Assertions.shouldEqual(Effect_Aff.monadThrowAff);
var shouldEqual1 = /* #__PURE__ */ shouldEqual(Data_Show.showBoolean)(Data_Eq.eqBoolean);
var shouldEqual2 = /* #__PURE__ */ shouldEqual(Data_Show.showString)(Data_Eq.eqString);
var isBrowserFormatTests = /* #__PURE__ */ (function () {
    return describe("isBrowserFormat")(discard1(it("returns true for browser formats (PNG, JPEG, WebP)")(discard2(shouldEqual1(Lattice_Services_Export_FrameSequence.isBrowserFormat(Lattice_Services_Export_FrameSequence.FormatPNG.value))(true))(function () {
        return discard2(shouldEqual1(Lattice_Services_Export_FrameSequence.isBrowserFormat(Lattice_Services_Export_FrameSequence.FormatJPEG.value))(true))(function () {
            return shouldEqual1(Lattice_Services_Export_FrameSequence.isBrowserFormat(Lattice_Services_Export_FrameSequence.FormatWebP.value))(true);
        });
    })))(function () {
        return it("returns false for backend formats (TIFF, EXR, DPX)")(discard2(shouldEqual1(Lattice_Services_Export_FrameSequence.isBrowserFormat(Lattice_Services_Export_FrameSequence.FormatTIFF.value))(false))(function () {
            return discard2(shouldEqual1(Lattice_Services_Export_FrameSequence.isBrowserFormat(Lattice_Services_Export_FrameSequence.FormatEXR.value))(false))(function () {
                return shouldEqual1(Lattice_Services_Export_FrameSequence.isBrowserFormat(Lattice_Services_Export_FrameSequence.FormatDPX.value))(false);
            });
        }));
    }));
})();
var getFormatInfoTests = /* #__PURE__ */ describe("getFormatInfo")(/* #__PURE__ */ discard1(/* #__PURE__ */ it("returns correct info for PNG")(/* #__PURE__ */ (function () {
    var info = Lattice_Services_Export_FrameSequence.getFormatInfo(Lattice_Services_Export_FrameSequence.FormatPNG.value);
    return discard2(shouldEqual2(info.name)("PNG"))(function () {
        return discard2(shouldEqual2(info.extension)("png"))(function () {
            return discard2(shouldEqual1(info.requiresBackend)(false))(function () {
                return discard2(shouldEqual1(info.supportsAlpha)(true))(function () {
                    return shouldEqual1(info.lossy)(false);
                });
            });
        });
    });
})()))(function () {
    return discard1(it("returns correct info for JPEG")((function () {
        var info = Lattice_Services_Export_FrameSequence.getFormatInfo(Lattice_Services_Export_FrameSequence.FormatJPEG.value);
        return discard2(shouldEqual2(info.name)("JPEG"))(function () {
            return discard2(shouldEqual2(info.extension)("jpg"))(function () {
                return discard2(shouldEqual1(info.supportsAlpha)(false))(function () {
                    return shouldEqual1(info.lossy)(true);
                });
            });
        });
    })()))(function () {
        return discard1(it("returns correct info for EXR")((function () {
            var info = Lattice_Services_Export_FrameSequence.getFormatInfo(Lattice_Services_Export_FrameSequence.FormatEXR.value);
            return discard2(shouldEqual2(info.name)("OpenEXR"))(function () {
                return discard2(shouldEqual2(info.extension)("exr"))(function () {
                    return discard2(shouldEqual1(info.requiresBackend)(true))(function () {
                        return shouldEqual1(info.supportsAlpha)(true);
                    });
                });
            });
        })()))(function () {
            return discard1(it("returns correct info for DPX")((function () {
                var info = Lattice_Services_Export_FrameSequence.getFormatInfo(Lattice_Services_Export_FrameSequence.FormatDPX.value);
                return discard2(shouldEqual2(info.name)("DPX"))(function () {
                    return discard2(shouldEqual2(info.extension)("dpx"))(function () {
                        return discard2(shouldEqual1(info.requiresBackend)(true))(function () {
                            return shouldEqual1(info.supportsAlpha)(false);
                        });
                    });
                });
            })()))(function () {
                return it("all formats have at least one bit depth")((function () {
                    var checkFormat = function (fmt) {
                        return shouldEqual1(Data_Array.length((Lattice_Services_Export_FrameSequence.getFormatInfo(fmt)).bitDepths) > 0)(true);
                    };
                    return discard2(checkFormat(Lattice_Services_Export_FrameSequence.FormatPNG.value))(function () {
                        return discard2(checkFormat(Lattice_Services_Export_FrameSequence.FormatJPEG.value))(function () {
                            return discard2(checkFormat(Lattice_Services_Export_FrameSequence.FormatWebP.value))(function () {
                                return discard2(checkFormat(Lattice_Services_Export_FrameSequence.FormatTIFF.value))(function () {
                                    return discard2(checkFormat(Lattice_Services_Export_FrameSequence.FormatEXR.value))(function () {
                                        return checkFormat(Lattice_Services_Export_FrameSequence.FormatDPX.value);
                                    });
                                });
                            });
                        });
                    });
                })());
            });
        });
    });
}));
var generateFilenameTests = /* #__PURE__ */ describe("generateFilename")(/* #__PURE__ */ discard1(/* #__PURE__ */ it("appends correct extension for PNG")(/* #__PURE__ */ (function () {
    var result = Lattice_Services_Export_FrameSequence.generateFilename("frame_{frame:04d}")(1)(Lattice_Services_Export_FrameSequence.FormatPNG.value);
    return shouldEqual2(result)("frame_0001.png");
})()))(function () {
    return discard1(it("appends correct extension for JPEG")((function () {
        var result = Lattice_Services_Export_FrameSequence.generateFilename("frame_{frame:04d}")(10)(Lattice_Services_Export_FrameSequence.FormatJPEG.value);
        return shouldEqual2(result)("frame_0010.jpg");
    })()))(function () {
        return it("appends correct extension for EXR")((function () {
            var result = Lattice_Services_Export_FrameSequence.generateFilename("render_{frame:04d}")(5)(Lattice_Services_Export_FrameSequence.FormatEXR.value);
            return shouldEqual2(result)("render_0005.exr");
        })());
    });
}));
var formatFrameNumberTests = /* #__PURE__ */ describe("formatFrameNumber")(/* #__PURE__ */ discard1(/* #__PURE__ */ it("pads frame number to specified digits")(/* #__PURE__ */ (function () {
    var result = Lattice_Services_Export_FrameSequence.formatFrameNumber("frame_{frame:04d}")(42);
    return shouldEqual2(result)("frame_0042");
})()))(function () {
    return discard1(it("handles different padding widths")((function () {
        var r2 = Lattice_Services_Export_FrameSequence.formatFrameNumber("f_{frame:02d}")(5);
        return shouldEqual2(r2)("f_05");
    })()))(function () {
        return discard1(it("handles zero frame number")((function () {
            var result = Lattice_Services_Export_FrameSequence.formatFrameNumber("frame_{frame:04d}")(0);
            return shouldEqual2(result)("frame_0000");
        })()))(function () {
            return it("returns pattern unchanged if no placeholder")((function () {
                var result = Lattice_Services_Export_FrameSequence.formatFrameNumber("static_name")(42);
                return shouldEqual2(result)("static_name");
            })());
        });
    });
}));
var spec = /* #__PURE__ */ describe("FrameSequence")(/* #__PURE__ */ discard1(isBrowserFormatTests)(function () {
    return discard1(formatFrameNumberTests)(function () {
        return discard1(generateFilenameTests)(function () {
            return getFormatInfoTests;
        });
    });
}));
export {
    spec
};
//# sourceMappingURL=index.js.map
