{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Utils.CanvasPool - Canvas buffer pool for effect processing"},{"LineComment":" |"},{"LineComment":" | @module Lattice.Utils.CanvasPool"},{"LineComment":" | @description Reuses canvas elements to reduce allocation overhead and"},{"LineComment":" | prevent memory leaks. Used by effect processors and layer style renderers."},{"LineComment":" |"},{"LineComment":" | ## Architecture"},{"LineComment":" |"},{"LineComment":" | The pool maintains a fixed-size collection of canvas elements that can be"},{"LineComment":" | borrowed and returned. When a canvas is requested:"},{"LineComment":" |"},{"LineComment":" | 1. Check if an unused canvas with matching dimensions exists"},{"LineComment":" | 2. If yes, mark it in-use and return it"},{"LineComment":" | 3. If no matching canvas exists, return Nothing (canvas must be provided externally)"},{"LineComment":" | 4. Old unused canvases are periodically cleaned up"},{"LineComment":" |"},{"LineComment":" | ## Canvas Creation"},{"LineComment":" |"},{"LineComment":" | This module does NOT create canvas elements - canvas creation requires"},{"LineComment":" | DOM access which should be handled by the rendering system. Use `register`"},{"LineComment":" | to add externally-created canvases to the pool."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/utils/canvasPool.ts"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[141,17],"start":[141,3]}},"type":"Var","value":{"identifier":"bind","moduleName":["Control","Bind"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[141,17],"start":[141,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bindEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"bind"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[143,7],"start":[143,3]}},"type":"Var","value":{"identifier":"pure","moduleName":["Control","Applicative"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[143,10],"start":[143,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"applicativeEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"pure"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[163,7],"start":[163,3]}},"type":"Var","value":{"identifier":"when","moduleName":["Control","Applicative"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[163,39],"start":[163,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"applicativeEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"when"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[163,23],"start":[163,22]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[163,38],"start":[163,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordInt","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"lessThan"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[260,19],"start":[260,16]}},"type":"Var","value":{"identifier":"map","moduleName":["Data","Functor"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[263,16],"start":[260,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"functorArray","moduleName":["Data","Functor"]}},"type":"App"},"identifier":"map"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[302,25],"start":[302,24]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[302,36],"start":[302,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringInt","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[229,24],"start":[229,22]}},"type":"Var","value":{"identifier":"conj","moduleName":["Data","HeytingAlgebra"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"heytingAlgebraBoolean","moduleName":["Data","HeytingAlgebra"]}},"type":"App"},"identifier":"conj"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[229,10],"start":[229,7]}},"type":"Var","value":{"identifier":"not","moduleName":["Data","HeytingAlgebra"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[229,21],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"heytingAlgebraBoolean","moduleName":["Data","HeytingAlgebra"]}},"type":"App"},"identifier":"not"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[230,20],"start":[230,18]}},"type":"Var","value":{"identifier":"eq","moduleName":["Data","Eq"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eqInt","moduleName":["Data","Eq"]}},"type":"App"},"identifier":"eq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[276,18],"start":[276,16]}},"type":"Var","value":{"identifier":"disj","moduleName":["Data","HeytingAlgebra"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[276,63],"start":[276,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"heytingAlgebraBoolean","moduleName":["Data","HeytingAlgebra"]}},"type":"App"},"identifier":"disj"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[276,48],"start":[276,46]}},"type":"Var","value":{"identifier":"lessThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[276,62],"start":[276,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"lessThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[276,31],"start":[276,30]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[276,62],"start":[276,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub1"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[203,58],"start":[203,11]}},"type":"Var","value":{"identifier":"discard","moduleName":["Control","Bind"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[203,58],"start":[203,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discardUnit","moduleName":["Control","Bind"]}},"type":"App"},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[203,58],"start":[203,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bindEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"discard"},{"annotation":{"meta":null,"sourceSpan":{"end":[112,4],"start":[109,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[112,4],"start":[109,1]}},"argument":"x","body":{"annotation":{"meta":null,"sourceSpan":{"end":[112,4],"start":[109,1]}},"type":"Var","value":{"identifier":"x","sourcePos":[0,0]}},"type":"Abs"},"identifier":"CanvasPool"},{"annotation":{"meta":null,"sourceSpan":{"end":[139,23],"start":[139,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[141,17],"start":[141,3]}},"argument":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[141,17],"start":[141,14]}},"type":"Var","value":{"identifier":"now","moduleName":["Effect","Now"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[141,17],"start":[141,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[141,17],"start":[141,3]}},"argument":"instant","body":{"annotation":{"meta":null,"sourceSpan":{"end":[142,44],"start":[142,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[139,23],"start":[139,1]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[142,36],"start":[142,27]}},"type":"Var","value":{"identifier":"unInstant","moduleName":["Data","DateTime","Instant"]}},"annotation":{"meta":null,"sourceSpan":{"end":[142,44],"start":[142,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[142,44],"start":[142,37]}},"type":"Var","value":{"identifier":"instant","sourcePos":[141,3]}},"type":"App"},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[142,44],"start":[142,7]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[142,23],"start":[142,8]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[142,23],"start":[142,21]}},"binderType":"VarBinder","identifier":"ms"}],"constructorName":{"identifier":"Milliseconds","moduleName":["Data","Time","Duration"]},"typeName":{"identifier":"Milliseconds","moduleName":["Data","Time","Duration"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[143,10],"start":[143,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[143,10],"start":[143,8]}},"type":"Var","value":{"identifier":"ms","sourcePos":[142,21]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[139,23],"start":[139,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"App"},"identifier":"nowMs"},{"annotation":{"meta":null,"sourceSpan":{"end":[158,96],"start":[158,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[158,96],"start":[158,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[158,96],"start":[158,1]}},"argument":"canvas","body":{"annotation":{"meta":null,"sourceSpan":{"end":[158,96],"start":[158,1]}},"argument":"ctx","body":{"annotation":{"meta":null,"sourceSpan":{"end":[158,96],"start":[158,1]}},"argument":"width","body":{"annotation":{"meta":null,"sourceSpan":{"end":[158,96],"start":[158,1]}},"argument":"height","body":{"annotation":{"meta":null,"sourceSpan":{"end":[158,96],"start":[158,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[159,47],"start":[159,11]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[159,47],"start":[159,22]}},"binderType":"LiteralBinder","literal":{"literalType":"ObjectLiteral","value":[["pool",{"annotation":{"meta":null,"sourceSpan":{"end":[159,37],"start":[159,30]}},"binderType":"VarBinder","identifier":"poolRef"}],["config",{"annotation":{"meta":null,"sourceSpan":{"end":[159,45],"start":[159,39]}},"binderType":"VarBinder","identifier":"config"}]]}}],"constructorName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]},"typeName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]}},{"annotation":{"meta":null,"sourceSpan":{"end":[159,55],"start":[159,49]}},"binderType":"VarBinder","identifier":"canvas1"},{"annotation":{"meta":null,"sourceSpan":{"end":[159,59],"start":[159,56]}},"binderType":"VarBinder","identifier":"ctx1"},{"annotation":{"meta":null,"sourceSpan":{"end":[159,65],"start":[159,60]}},"binderType":"VarBinder","identifier":"width1"},{"annotation":{"meta":null,"sourceSpan":{"end":[159,72],"start":[159,66]}},"binderType":"VarBinder","identifier":"height1"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[160,21],"start":[160,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[160,21],"start":[160,16]}},"type":"Var","value":{"identifier":"nowMs","moduleName":["Lattice","Utils","CanvasPool"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[160,21],"start":[160,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[160,21],"start":[160,3]}},"argument":"timestamp","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[161,28],"start":[161,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[161,20],"start":[161,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[161,28],"start":[161,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[161,28],"start":[161,21]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[159,30]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[161,28],"start":[161,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[161,28],"start":[161,3]}},"argument":"items","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"when","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[163,39],"start":[163,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThan","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[163,38],"start":[163,9]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[163,15],"start":[163,9]}},"type":"Var","value":{"identifier":"length","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[163,21],"start":[163,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[163,21],"start":[163,16]}},"type":"Var","value":{"identifier":"items","sourcePos":[161,3]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[163,38],"start":[163,9]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[163,38],"start":[163,24]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[163,30],"start":[163,24]}},"type":"Var","value":{"identifier":"config","sourcePos":[159,39]}},"fieldName":"maxSize","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[163,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[171,12],"start":[164,5]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[171,12],"start":[164,9]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[171,12],"start":[165,11]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["canvas",{"annotation":{"meta":null,"sourceSpan":{"end":[165,19],"start":[165,13]}},"type":"Var","value":{"identifier":"canvas1","sourcePos":[159,49]}}],["ctx",{"annotation":{"meta":null,"sourceSpan":{"end":[166,16],"start":[166,13]}},"type":"Var","value":{"identifier":"ctx1","sourcePos":[159,56]}}],["width",{"annotation":{"meta":null,"sourceSpan":{"end":[167,18],"start":[167,13]}},"type":"Var","value":{"identifier":"width1","sourcePos":[159,60]}}],["height",{"annotation":{"meta":null,"sourceSpan":{"end":[168,19],"start":[168,13]}},"type":"Var","value":{"identifier":"height1","sourcePos":[159,66]}}],["inUse",{"annotation":{"meta":null,"sourceSpan":{"end":[169,25],"start":[169,20]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}}],["lastUsed",{"annotation":{"meta":null,"sourceSpan":{"end":[170,32],"start":[170,23]}},"type":"Var","value":{"identifier":"timestamp","sourcePos":[160,3]}}]]}},"identifier":"entry"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[172,16],"start":[172,5]}},"type":"Var","value":{"identifier":"modify_","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[172,41],"start":[172,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[172,40],"start":[172,18]}},"argument":"arr","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[172,30],"start":[172,26]}},"type":"Var","value":{"identifier":"snoc","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[172,34],"start":[172,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[172,34],"start":[172,31]}},"type":"Var","value":{"identifier":"arr","sourcePos":[172,19]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[172,40],"start":[172,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[172,40],"start":[172,35]}},"type":"Var","value":{"identifier":"entry","sourcePos":[164,9]}},"type":"App"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[172,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[172,42]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[159,30]}},"type":"App"},"type":"Let"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[159,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[159,1]}},"type":"Var","value":{"identifier":"canvas","sourcePos":[159,49]}},{"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[159,1]}},"type":"Var","value":{"identifier":"ctx","sourcePos":[159,56]}},{"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[159,1]}},"type":"Var","value":{"identifier":"width","sourcePos":[159,60]}},{"annotation":{"meta":null,"sourceSpan":{"end":[172,49],"start":[159,1]}},"type":"Var","value":{"identifier":"height","sourcePos":[159,66]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"register"},{"annotation":{"meta":null,"sourceSpan":{"end":[257,61],"start":[257,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[257,61],"start":[257,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[257,61],"start":[257,1]}},"argument":"canvas","body":{"annotation":{"meta":null,"sourceSpan":{"end":[257,61],"start":[257,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[258,38],"start":[258,10]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[258,38],"start":[258,21]}},"binderType":"LiteralBinder","literal":{"literalType":"ObjectLiteral","value":[["pool",{"annotation":{"meta":null,"sourceSpan":{"end":[258,36],"start":[258,29]}},"binderType":"VarBinder","identifier":"poolRef"}]]}}],"constructorName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]},"typeName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]}},{"annotation":{"meta":null,"sourceSpan":{"end":[258,46],"start":[258,40]}},"binderType":"VarBinder","identifier":"canvas1"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[259,21],"start":[259,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[259,21],"start":[259,16]}},"type":"Var","value":{"identifier":"nowMs","moduleName":["Lattice","Utils","CanvasPool"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[259,21],"start":[259,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[259,21],"start":[259,3]}},"argument":"timestamp","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[260,14],"start":[260,3]}},"type":"Var","value":{"identifier":"modify_","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[264,4],"start":[260,3]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[263,16],"start":[260,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[263,16],"start":[260,20]}},"argument":"item","body":{"annotation":{"meta":null,"sourceSpan":{"end":[263,16],"start":[261,5]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[263,16],"start":[261,5]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[262,56],"start":[262,12]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[264,12],"start":[258,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[262,16],"start":[262,12]}},"type":"Var","value":{"identifier":"item","sourcePos":[260,21]}},"identifier":"v1"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[262,56],"start":[262,12]}},"copy":["canvas","ctx","height","width"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v1","sourcePos":[258,1]}},"type":"ObjectUpdate","updates":[["inUse",{"annotation":{"meta":null,"sourceSpan":{"end":[262,32],"start":[262,27]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}}],["lastUsed",{"annotation":{"meta":null,"sourceSpan":{"end":[262,54],"start":[262,45]}},"type":"Var","value":{"identifier":"timestamp","sourcePos":[259,3]}}]]},"type":"Let"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[263,16],"start":[261,5]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[263,16],"start":[263,12]}},"type":"Var","value":{"identifier":"item","sourcePos":[260,21]}},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[261,19],"start":[261,8]}},"type":"Var","value":{"identifier":"unsafeRefEq","moduleName":["Unsafe","Reference"]}},"annotation":{"meta":null,"sourceSpan":{"end":[261,31],"start":[261,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[261,31],"start":[261,20]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[261,24],"start":[261,20]}},"type":"Var","value":{"identifier":"item","sourcePos":[260,21]}},"fieldName":"canvas","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[261,38],"start":[261,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[261,38],"start":[261,32]}},"type":"Var","value":{"identifier":"canvas1","sourcePos":[258,40]}},"type":"App"}],"type":"Case"},"type":"Abs"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[264,12],"start":[260,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[264,12],"start":[264,5]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[258,29]}},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[264,12],"start":[258,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[264,12],"start":[258,1]}},"type":"Var","value":{"identifier":"canvas","sourcePos":[258,40]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"identifier":"release"},{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"argument":"idx","body":{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"argument":"timestamp","body":{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"argument":"arr","body":{"annotation":{"meta":null,"sourceSpan":{"end":[248,32],"start":[243,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[243,13],"start":[243,8]}},"type":"Var","value":{"identifier":"index","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[243,17],"start":[243,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[243,17],"start":[243,14]}},"type":"Var","value":{"identifier":"arr","sourcePos":[242,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[243,21],"start":[243,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[243,21],"start":[243,18]}},"type":"Var","value":{"identifier":"idx","sourcePos":[242,1]}},"type":"App"},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[248,32],"start":[243,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[244,12],"start":[244,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[244,19],"start":[244,16]}},"type":"Var","value":{"identifier":"arr","sourcePos":[242,1]}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[245,14],"start":[245,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[245,14],"start":[245,10]}},"binderType":"VarBinder","identifier":"item"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[248,32],"start":[246,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[246,20],"start":[246,12]}},"type":"Var","value":{"identifier":"updateAt","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[246,24],"start":[246,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,24],"start":[246,21]}},"type":"Var","value":{"identifier":"idx","sourcePos":[242,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[246,70],"start":[246,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,69],"start":[246,26]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[248,32],"start":[242,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[246,30],"start":[246,26]}},"type":"Var","value":{"identifier":"item","sourcePos":[245,10]}},"identifier":"v2"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[246,69],"start":[246,26]}},"copy":["canvas","ctx","height","width"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v2","sourcePos":[242,1]}},"type":"ObjectUpdate","updates":[["inUse",{"annotation":{"meta":null,"sourceSpan":{"end":[246,45],"start":[246,41]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}}],["lastUsed",{"annotation":{"meta":null,"sourceSpan":{"end":[246,67],"start":[246,58]}},"type":"Var","value":{"identifier":"timestamp","sourcePos":[242,1]}}]]},"type":"Let"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[246,74],"start":[246,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,74],"start":[246,71]}},"type":"Var","value":{"identifier":"arr","sourcePos":[242,1]}},"type":"App"},"identifier":"v1"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[248,32],"start":[246,7]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[247,16],"start":[247,9]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[247,23],"start":[247,20]}},"type":"Var","value":{"identifier":"arr","sourcePos":[242,1]}},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[248,21],"start":[248,9]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[248,21],"start":[248,14]}},"binderType":"VarBinder","identifier":"updated"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[248,32],"start":[248,25]}},"type":"Var","value":{"identifier":"updated","sourcePos":[248,14]}},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"type":"Var","value":{"identifier":"v1","sourcePos":[0,0]}}],"type":"Case"},"type":"Let"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[241,73],"start":[241,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"markInUseAt"},{"annotation":{"meta":null,"sourceSpan":{"end":[294,43],"start":[294,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[294,43],"start":[294,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[294,43],"start":[294,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[295,39],"start":[295,11]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[295,39],"start":[295,22]}},"binderType":"LiteralBinder","literal":{"literalType":"ObjectLiteral","value":[["pool",{"annotation":{"meta":null,"sourceSpan":{"end":[295,37],"start":[295,30]}},"binderType":"VarBinder","identifier":"poolRef"}]]}}],"constructorName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]},"typeName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[296,28],"start":[296,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[296,20],"start":[296,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[296,28],"start":[296,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[296,28],"start":[296,21]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[295,30]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[296,28],"start":[296,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[296,28],"start":[296,3]}},"argument":"items","body":{"annotation":{"meta":null,"sourceSpan":{"end":[297,27],"start":[297,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[297,27],"start":[297,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[297,21],"start":[297,15]}},"type":"Var","value":{"identifier":"length","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[297,27],"start":[297,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[297,27],"start":[297,22]}},"type":"Var","value":{"identifier":"items","sourcePos":[296,3]}},"type":"App"},"identifier":"total"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[298,49],"start":[298,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[298,49],"start":[298,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[298,26],"start":[298,20]}},"type":"Var","value":{"identifier":"length","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[298,49],"start":[298,20]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[298,34],"start":[298,28]}},"type":"Var","value":{"identifier":"filter","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[298,42],"start":[298,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[298,42],"start":[298,35]}},"argument":"v1","body":{"annotation":{"meta":null,"sourceSpan":{"end":[298,42],"start":[298,35]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v1","sourcePos":[0,0]}},"fieldName":"inUse","type":"Accessor"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[298,48],"start":[298,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[298,48],"start":[298,43]}},"type":"Var","value":{"identifier":"items","sourcePos":[296,3]}},"type":"App"},"type":"App"},"identifier":"inUseCount"}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[299,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[300,5]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["total",{"annotation":{"meta":null,"sourceSpan":{"end":[300,12],"start":[300,7]}},"type":"Var","value":{"identifier":"total","sourcePos":[297,7]}}],["inUse",{"annotation":{"meta":null,"sourceSpan":{"end":[301,24],"start":[301,14]}},"type":"Var","value":{"identifier":"inUseCount","sourcePos":[298,7]}}],["available",{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[302,36],"start":[302,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[302,23],"start":[302,18]}},"type":"Var","value":{"identifier":"total","sourcePos":[297,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[302,36],"start":[302,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[302,36],"start":[302,26]}},"type":"Var","value":{"identifier":"inUseCount","sourcePos":[298,7]}},"type":"App"}]]}},"type":"App"},"type":"Let"},"type":"Let"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[295,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"identifier":"getStats"},{"annotation":{"meta":null,"sourceSpan":{"end":[224,68],"start":[224,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[224,68],"start":[224,1]}},"argument":"items","body":{"annotation":{"meta":null,"sourceSpan":{"end":[224,68],"start":[224,1]}},"argument":"targetWidth","body":{"annotation":{"meta":null,"sourceSpan":{"end":[224,68],"start":[224,1]}},"argument":"targetHeight","body":{"annotation":{"meta":{"metaType":"IsWhere"},"sourceSpan":{"end":[226,32],"start":[226,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[228,5]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[228,5]}},"argument":"item","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"conj","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"not","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[229,21],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[229,21],"start":[229,11]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[229,15],"start":[229,11]}},"type":"Var","value":{"identifier":"item","sourcePos":[228,5]}},"fieldName":"inUse","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"conj","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eq","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[230,17],"start":[230,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[230,11],"start":[230,7]}},"type":"Var","value":{"identifier":"item","sourcePos":[228,5]}},"fieldName":"width","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[230,32],"start":[230,21]}},"type":"Var","value":{"identifier":"targetWidth","sourcePos":[225,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"eq","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[231,18],"start":[231,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[231,11],"start":[231,7]}},"type":"Var","value":{"identifier":"item","sourcePos":[228,5]}},"fieldName":"height","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[231,34],"start":[231,22]}},"type":"Var","value":{"identifier":"targetHeight","sourcePos":[225,1]}},"type":"App"},"type":"App"},"type":"App"},"type":"Abs"},"identifier":"isMatch"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[226,18],"start":[226,3]}},"type":"Var","value":{"identifier":"findIndex","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[226,26],"start":[226,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[226,26],"start":[226,19]}},"type":"Var","value":{"identifier":"isMatch","sourcePos":[228,5]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[226,32],"start":[226,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[226,32],"start":[226,27]}},"type":"Var","value":{"identifier":"items","sourcePos":[225,1]}},"type":"App"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"findAvailableIndex"},{"annotation":{"meta":null,"sourceSpan":{"end":[122,28],"start":[122,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[126,4],"start":[124,3]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["maxSize",{"annotation":{"meta":null,"sourceSpan":{"end":[124,16],"start":[124,14]}},"type":"Literal","value":{"literalType":"IntLiteral","value":20}}],["maxAge",{"annotation":{"meta":null,"sourceSpan":{"end":[125,20],"start":[125,13]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":60000}}]]}},"identifier":"defaultConfig"},{"annotation":{"meta":null,"sourceSpan":{"end":[131,34],"start":[131,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[133,24],"start":[133,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[133,21],"start":[133,14]}},"type":"Var","value":{"identifier":"new","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[133,24],"start":[133,14]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[133,24],"start":[133,22]}},"type":"Literal","value":{"literalType":"ArrayLiteral","value":[]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[133,24],"start":[133,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[133,24],"start":[133,3]}},"argument":"poolRef","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[134,61],"start":[134,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[134,20],"start":[134,10]}},"type":"Var","value":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[134,61],"start":[134,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[134,61],"start":[134,21]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["pool",{"annotation":{"meta":null,"sourceSpan":{"end":[134,36],"start":[134,29]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[133,3]}}],["config",{"annotation":{"meta":null,"sourceSpan":{"end":[134,59],"start":[134,46]}},"type":"Var","value":{"identifier":"defaultConfig","moduleName":["Lattice","Utils","CanvasPool"]}}]]}},"type":"App"},"type":"App"},"type":"Abs"},"type":"App"},"identifier":"mkCanvasPool"},{"annotation":{"meta":null,"sourceSpan":{"end":[286,35],"start":[286,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[286,35],"start":[286,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[286,35],"start":[286,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[287,36],"start":[287,8]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[287,36],"start":[287,19]}},"binderType":"LiteralBinder","literal":{"literalType":"ObjectLiteral","value":[["pool",{"annotation":{"meta":null,"sourceSpan":{"end":[287,34],"start":[287,27]}},"binderType":"VarBinder","identifier":"poolRef"}]]}}],"constructorName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]},"typeName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[288,12],"start":[288,3]}},"type":"Var","value":{"identifier":"write","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[288,15],"start":[288,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[288,15],"start":[288,13]}},"type":"Literal","value":{"literalType":"ArrayLiteral","value":[]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[288,23],"start":[288,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[288,23],"start":[288,16]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[287,27]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[288,23],"start":[287,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"identifier":"clear"},{"annotation":{"meta":null,"sourceSpan":{"end":[272,37],"start":[272,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[272,37],"start":[272,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[272,37],"start":[272,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[273,46],"start":[273,10]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[273,46],"start":[273,21]}},"binderType":"LiteralBinder","literal":{"literalType":"ObjectLiteral","value":[["pool",{"annotation":{"meta":null,"sourceSpan":{"end":[273,36],"start":[273,29]}},"binderType":"VarBinder","identifier":"poolRef"}],["config",{"annotation":{"meta":null,"sourceSpan":{"end":[273,44],"start":[273,38]}},"binderType":"VarBinder","identifier":"config"}]]}}],"constructorName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]},"typeName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[274,21],"start":[274,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[274,21],"start":[274,16]}},"type":"Var","value":{"identifier":"nowMs","moduleName":["Lattice","Utils","CanvasPool"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[274,21],"start":[274,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[274,21],"start":[274,3]}},"argument":"timestamp","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[275,14],"start":[275,3]}},"type":"Var","value":{"identifier":"modify_","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[277,4],"start":[275,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[275,22],"start":[275,16]}},"type":"Var","value":{"identifier":"filter","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[276,63],"start":[275,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[276,63],"start":[275,23]}},"argument":"item","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"disj","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[276,63],"start":[276,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[276,15],"start":[276,5]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[276,9],"start":[276,5]}},"type":"Var","value":{"identifier":"item","sourcePos":[275,24]}},"fieldName":"inUse","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[276,63],"start":[276,5]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThanOrEq","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[276,62],"start":[276,20]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub1","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[276,62],"start":[276,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[276,29],"start":[276,20]}},"type":"Var","value":{"identifier":"timestamp","sourcePos":[274,3]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[276,62],"start":[276,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[276,45],"start":[276,32]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[276,36],"start":[276,32]}},"type":"Var","value":{"identifier":"item","sourcePos":[275,24]}},"fieldName":"lastUsed","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[276,62],"start":[276,20]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[276,62],"start":[276,49]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[276,55],"start":[276,49]}},"type":"Var","value":{"identifier":"config","sourcePos":[273,38]}},"fieldName":"maxAge","type":"Accessor"},"type":"App"},"type":"App"},"type":"Abs"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[277,12],"start":[275,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[277,12],"start":[277,5]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[273,29]}},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[277,12],"start":[273,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}}],"type":"Case"},"type":"Abs"},"identifier":"cleanup"},{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"argument":"width","body":{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"argument":"height","body":{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"metaType":"IsNewtype"},"sourceSpan":{"end":[192,38],"start":[192,10]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[192,38],"start":[192,21]}},"binderType":"LiteralBinder","literal":{"literalType":"ObjectLiteral","value":[["pool",{"annotation":{"meta":null,"sourceSpan":{"end":[192,36],"start":[192,29]}},"binderType":"VarBinder","identifier":"poolRef"}]]}}],"constructorName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]},"typeName":{"identifier":"CanvasPool","moduleName":["Lattice","Utils","CanvasPool"]}},{"annotation":{"meta":null,"sourceSpan":{"end":[192,45],"start":[192,40]}},"binderType":"VarBinder","identifier":"width1"},{"annotation":{"meta":null,"sourceSpan":{"end":[192,52],"start":[192,46]}},"binderType":"VarBinder","identifier":"height1"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[193,21],"start":[193,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[193,21],"start":[193,16]}},"type":"Var","value":{"identifier":"nowMs","moduleName":["Lattice","Utils","CanvasPool"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[193,21],"start":[193,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[193,21],"start":[193,3]}},"argument":"timestamp","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[194,28],"start":[194,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[194,20],"start":[194,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[194,28],"start":[194,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[194,28],"start":[194,21]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[192,29]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[194,28],"start":[194,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[194,28],"start":[194,3]}},"argument":"items","body":{"annotation":{"meta":null,"sourceSpan":{"end":[214,19],"start":[197,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[197,26],"start":[197,8]}},"type":"Var","value":{"identifier":"findAvailableIndex","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[197,32],"start":[197,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[197,32],"start":[197,27]}},"type":"Var","value":{"identifier":"items","sourcePos":[194,3]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[197,38],"start":[197,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[197,38],"start":[197,33]}},"type":"Var","value":{"identifier":"width1","sourcePos":[192,40]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[197,45],"start":[197,8]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[197,45],"start":[197,39]}},"type":"Var","value":{"identifier":"height1","sourcePos":[192,46]}},"type":"App"},"identifier":"v1"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[214,19],"start":[197,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[198,13],"start":[198,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[198,13],"start":[198,10]}},"binderType":"VarBinder","identifier":"idx"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[210,23],"start":[200,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[200,17],"start":[200,12]}},"type":"Var","value":{"identifier":"index","moduleName":["Data","Array"]}},"annotation":{"meta":null,"sourceSpan":{"end":[200,23],"start":[200,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[200,23],"start":[200,18]}},"type":"Var","value":{"identifier":"items","sourcePos":[194,3]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[200,27],"start":[200,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[200,27],"start":[200,24]}},"type":"Var","value":{"identifier":"idx","sourcePos":[198,10]}},"type":"App"},"identifier":"v2"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[210,23],"start":[200,7]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[201,18],"start":[201,9]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[201,18],"start":[201,14]}},"binderType":"VarBinder","identifier":"item"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[203,58],"start":[203,11]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[203,22],"start":[203,11]}},"type":"Var","value":{"identifier":"modify_","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[203,50],"start":[203,11]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[203,35],"start":[203,24]}},"type":"Var","value":{"identifier":"markInUseAt","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[203,39],"start":[203,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[203,39],"start":[203,36]}},"type":"Var","value":{"identifier":"idx","sourcePos":[198,10]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[203,49],"start":[203,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[203,49],"start":[203,40]}},"type":"Var","value":{"identifier":"timestamp","sourcePos":[193,3]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[203,58],"start":[203,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[203,58],"start":[203,51]}},"type":"Var","value":{"identifier":"poolRef","sourcePos":[192,29]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[203,58],"start":[203,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[203,58],"start":[203,11]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[206,87],"start":[205,11]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[205,27],"start":[205,11]}},"type":"Var","value":{"identifier":"clearRect","moduleName":["Graphics","Canvas"]}},"annotation":{"meta":null,"sourceSpan":{"end":[205,36],"start":[205,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[205,36],"start":[205,28]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[205,32],"start":[205,28]}},"type":"Var","value":{"identifier":"item","sourcePos":[201,14]}},"fieldName":"ctx","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[206,87],"start":[205,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[206,87],"start":[206,13]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["x",{"annotation":{"meta":null,"sourceSpan":{"end":[206,21],"start":[206,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["y",{"annotation":{"meta":null,"sourceSpan":{"end":[206,29],"start":[206,26]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}],["width",{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[206,50],"start":[206,38]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[206,56],"start":[206,38]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[206,56],"start":[206,51]}},"type":"Var","value":{"identifier":"width1","sourcePos":[192,40]}},"type":"App"}],["height",{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[206,78],"start":[206,66]}},"type":"Var","value":{"identifier":"toNumber","moduleName":["Data","Int"]}},"annotation":{"meta":null,"sourceSpan":{"end":[206,85],"start":[206,66]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[206,85],"start":[206,79]}},"type":"Var","value":{"identifier":"height1","sourcePos":[192,46]}},"type":"App"}]]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[206,87],"start":[205,11]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[206,87],"start":[205,11]}},"argument":"$__unused","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[207,61],"start":[207,11]}},"argument":{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[207,22],"start":[207,18]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[207,61],"start":[207,18]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[207,61],"start":[207,23]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["canvas",{"annotation":{"meta":null,"sourceSpan":{"end":[207,44],"start":[207,33]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[207,37],"start":[207,33]}},"type":"Var","value":{"identifier":"item","sourcePos":[201,14]}},"fieldName":"canvas","type":"Accessor"}],["ctx",{"annotation":{"meta":null,"sourceSpan":{"end":[207,59],"start":[207,51]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[207,55],"start":[207,51]}},"type":"Var","value":{"identifier":"item","sourcePos":[201,14]}},"fieldName":"ctx","type":"Accessor"}]]}},"type":"App"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[208,16],"start":[208,9]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[210,23],"start":[210,11]}},"argument":{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[210,23],"start":[210,16]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"type":"Var","value":{"identifier":"v2","sourcePos":[0,0]}}],"type":"Case"},"type":"Let"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[212,12],"start":[212,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["Lattice","Utils","CanvasPool"]}},"annotation":{"meta":null,"sourceSpan":{"end":[214,19],"start":[214,7]}},"argument":{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[214,19],"start":[214,12]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[191,67],"start":[191,1]}},"type":"Var","value":{"identifier":"v1","sourcePos":[0,0]}}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[214,19],"start":[192,1]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},{"annotation":{"meta":null,"sourceSpan":{"end":[214,19],"start":[192,1]}},"type":"Var","value":{"identifier":"width","sourcePos":[192,40]}},{"annotation":{"meta":null,"sourceSpan":{"end":[214,19],"start":[192,1]}},"type":"Var","value":{"identifier":"height","sourcePos":[192,46]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"acquire"}],"exports":["mkCanvasPool","register","acquire","release","cleanup","clear","getStats"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Control","Applicative"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Control","Bind"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Array"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","DateTime","Instant"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Eq"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Function"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Functor"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","HeytingAlgebra"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Int"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Maybe"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Data","Time","Duration"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Effect"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Effect","Now"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Effect","Ref"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Graphics","Canvas"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Lattice","Utils","CanvasPool"]},{"annotation":{"meta":null,"sourceSpan":{"end":[41,15],"start":[41,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Prim"]},{"annotation":{"meta":null,"sourceSpan":{"end":[303,6],"start":[25,1]}},"moduleName":["Unsafe","Reference"]}],"moduleName":["Lattice","Utils","CanvasPool"],"modulePath":"src/Lattice/Utils/CanvasPool.purs","reExports":{},"sourceSpan":{"end":[303,6],"start":[25,1]}}