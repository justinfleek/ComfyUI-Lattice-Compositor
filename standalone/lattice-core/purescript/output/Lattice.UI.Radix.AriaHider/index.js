// Generated by purs version 0.15.15
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Foldable from "../Data.Foldable/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Effect from "../Effect/index.js";
import * as Effect_Ref from "../Effect.Ref/index.js";
import * as Unsafe_Reference from "../Unsafe.Reference/index.js";
import * as Web_DOM_Element from "../Web.DOM.Element/index.js";
import * as Web_DOM_Node from "../Web.DOM.Node/index.js";
import * as Web_DOM_NodeList from "../Web.DOM.NodeList/index.js";
import * as Web_HTML from "../Web.HTML/index.js";
import * as Web_HTML_HTMLDocument from "../Web.HTML.HTMLDocument/index.js";
import * as Web_HTML_HTMLElement from "../Web.HTML.HTMLElement/index.js";
import * as Web_HTML_Window from "../Web.HTML.Window/index.js";
var traverse_ = /* #__PURE__ */ Data_Foldable.traverse_(Effect.applicativeEffect)(Data_Foldable.foldableArray);
var when = /* #__PURE__ */ Control_Applicative.when(Effect.applicativeEffect);
var pure = /* #__PURE__ */ Control_Applicative.pure(Effect.applicativeEffect);
var AriaHiderState = function (x) {
    return x;
};
var restoreOthers = function (v) {
    var restoreEntry = function (entry) {
        if (entry.originalValue instanceof Data_Maybe.Just) {
            return Web_DOM_Element.setAttribute("aria-hidden")(entry.originalValue.value0)(entry.element);
        };
        if (entry.originalValue instanceof Data_Maybe.Nothing) {
            return Web_DOM_Element.removeAttribute("aria-hidden")(entry.element);
        };
        throw new Error("Failed pattern match at Lattice.UI.Radix.AriaHider (line 113, column 26 - line 115, column 69): " + [ entry.originalValue.constructor.name ]);
    };
    return function __do() {
        var entries = Effect_Ref.read(v)();
        traverse_(restoreEntry)(entries)();
        return Effect_Ref.write([  ])(v)();
    };
};
var hideSiblingIfElement = function (currentNode) {
    return function (entriesRef) {
        return function (siblingNode) {
            var isSame = Unsafe_Reference.unsafeRefEq(currentNode)(siblingNode);
            return when(!isSame)((function () {
                var v = Web_DOM_Element.fromNode(siblingNode);
                if (v instanceof Data_Maybe.Nothing) {
                    return pure(Data_Unit.unit);
                };
                if (v instanceof Data_Maybe.Just) {
                    var tagName = Web_DOM_Element.tagName(v.value0);
                    return when(tagName !== "SCRIPT" && tagName !== "STYLE")(function __do() {
                        var originalValue = Web_DOM_Element.getAttribute("aria-hidden")(v.value0)();
                        Web_DOM_Element.setAttribute("aria-hidden")("true")(v.value0)();
                        return Effect_Ref.modify_(function (arr) {
                            return Data_Array.snoc(arr)({
                                element: v.value0,
                                originalValue: originalValue
                            });
                        })(entriesRef)();
                    });
                };
                throw new Error("Failed pattern match at Lattice.UI.Radix.AriaHider (line 90, column 5 - line 103, column 89): " + [ v.constructor.name ]);
            })());
        };
    };
};
var walkAndHide = function (node) {
    return function (entriesRef) {
        return function __do() {
            var mParent = Web_DOM_Node.parentNode(node)();
            if (mParent instanceof Data_Maybe.Nothing) {
                return Data_Unit.unit;
            };
            if (mParent instanceof Data_Maybe.Just) {
                var children = Web_DOM_Node.childNodes(mParent.value0)();
                var childArray = Web_DOM_NodeList.toArray(children)();
                traverse_(hideSiblingIfElement(node)(entriesRef))(childArray)();
                var parentName = Web_DOM_Node.nodeName(mParent.value0);
                return when(parentName !== "BODY" && parentName !== "HTML")(walkAndHide(mParent.value0)(entriesRef))();
            };
            throw new Error("Failed pattern match at Lattice.UI.Radix.AriaHider (line 68, column 3 - line 81, column 38): " + [ mParent.constructor.name ]);
        };
    };
};
var hideOthers = function (element) {
    return function __do() {
        var entriesRef = Effect_Ref["new"]([  ])();
        var win = Web_HTML.window();
        var doc = Web_HTML_Window.document(win)();
        var mBody = Web_HTML_HTMLDocument.body(doc)();
        (function () {
            if (mBody instanceof Data_Maybe.Nothing) {
                return Data_Unit.unit;
            };
            if (mBody instanceof Data_Maybe.Just) {
                return walkAndHide(Web_HTML_HTMLElement.toNode(element))(entriesRef)();
            };
            throw new Error("Failed pattern match at Lattice.UI.Radix.AriaHider (line 56, column 3 - line 60, column 58): " + [ mBody.constructor.name ]);
        })();
        return entriesRef;
    };
};
export {
    hideOthers,
    restoreOthers
};
//# sourceMappingURL=index.js.map
