// Generated by purs version 0.15.15
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Int from "../Data.Int/index.js";
import * as Lattice_Services_Video_Types from "../Lattice.Services.Video.Types/index.js";
var map = /* #__PURE__ */ Data_Functor.map(Data_Functor.functorArray);
var FrameToBase64Request = /* #__PURE__ */ (function () {
    function FrameToBase64Request(value0) {
        this.value0 = value0;
    };
    FrameToBase64Request.create = function (value0) {
        return new FrameToBase64Request(value0);
    };
    return FrameToBase64Request;
})();
var Base64ToImageDataRequest = /* #__PURE__ */ (function () {
    function Base64ToImageDataRequest(value0) {
        this.value0 = value0;
    };
    Base64ToImageDataRequest.create = function (value0) {
        return new Base64ToImageDataRequest(value0);
    };
    return Base64ToImageDataRequest;
})();
var Base64ToBlobRequest = /* #__PURE__ */ (function () {
    function Base64ToBlobRequest(value0) {
        this.value0 = value0;
    };
    Base64ToBlobRequest.create = function (value0) {
        return new Base64ToBlobRequest(value0);
    };
    return Base64ToBlobRequest;
})();
var ClientInterpolationRequest = /* #__PURE__ */ (function () {
    function ClientInterpolationRequest(value0) {
        this.value0 = value0;
    };
    ClientInterpolationRequest.create = function (value0) {
        return new ClientInterpolationRequest(value0);
    };
    return ClientInterpolationRequest;
})();
var mkSlowMoRequest = function (endpoint) {
    return function (req) {
        return {
            url: endpoint + "/slowmo",
            frames: req.frames,
            model: Lattice_Services_Video_Types.rifeModelToString(req.model),
            slowdownFactor: req.slowdownFactor,
            targetFps: req.targetFps,
            sourceFps: req.sourceFps,
            ensemble: req.ensemble,
            fastMode: req.fastMode
        };
    };
};
var mkSequenceInterpolationRequest = function (endpoint) {
    return function (req) {
        return {
            url: endpoint + "/sequence",
            frames: req.frames,
            model: Lattice_Services_Video_Types.rifeModelToString(req.model),
            factor: Lattice_Services_Video_Types.factorToInt(req.factor),
            ensemble: req.ensemble,
            fastMode: req.fastMode,
            preserveOriginal: req.preserveOriginal
        };
    };
};
var mkPairInterpolationRequest = function (endpoint) {
    return function (req) {
        return {
            url: endpoint + "/pair",
            frame1: req.frame1,
            frame2: req.frame2,
            model: Lattice_Services_Video_Types.rifeModelToString(req.model),
            factor: Lattice_Services_Video_Types.factorToInt(req.factor),
            ensemble: req.ensemble,
            fastMode: req.fastMode
        };
    };
};
var mkGetModelsRequest = function (endpoint) {
    return {
        url: endpoint + "/models"
    };
};
var mkFrameToBase64Request = function (elementId) {
    return function (format) {
        return function (quality) {
            return new FrameToBase64Request({
                elementId: elementId,
                format: format,
                quality: quality
            });
        };
    };
};
var mkClientInterpolationRequest = function (frame1) {
    return function (frame2) {
        return function (count) {
            return new ClientInterpolationRequest({
                frame1: frame1,
                frame2: frame2,
                count: count
            });
        };
    };
};
var mkBase64ToImageDataRequest = function (base64) {
    return new Base64ToImageDataRequest({
        base64: base64
    });
};
var mkBase64ToBlobRequest = function (base64) {
    return function (mimeType) {
        return new Base64ToBlobRequest({
            base64: base64,
            mimeType: mimeType
        });
    };
};
var clampNumber = function (minVal) {
    return function (maxVal) {
        return function (value) {
            var $9 = value < minVal;
            if ($9) {
                return minVal;
            };
            var $10 = value > maxVal;
            if ($10) {
                return maxVal;
            };
            return value;
        };
    };
};
var mkBlendFramesRequest = function (frame1) {
    return function (frame2) {
        return function (ratio) {
            return {
                frame1: frame1,
                frame2: frame2,
                ratio: clampNumber(0.0)(1.0)(ratio)
            };
        };
    };
};
var calculateRequiredFrames = function (sourceFps) {
    return function (targetFps) {
        return function (frameCount) {
            var ratio = targetFps / sourceFps;
            var totalFrames = Data_Int.toNumber(frameCount) * ratio;
            return Data_Int.floor(totalFrames);
        };
    };
};
var calculateInterpolationTimestamps = function (count) {
    var toTimestamp = function (idx) {
        return function (v) {
            return {
                frameIndex: idx + 1 | 0,
                timestamp: Data_Int.toNumber(idx + 1 | 0) / Data_Int.toNumber(count + 1 | 0),
                confidence: 0.5
            };
        };
    };
    return Data_Array.mapWithIndex(toTimestamp)(Data_Array.range(0)(count - 1 | 0));
};
var calculateBlendRatios = function (count) {
    var total = count + 1 | 0;
    return map(function (i) {
        return Data_Int.toNumber(i + 1 | 0) / Data_Int.toNumber(total);
    })(Data_Array.range(0)(count - 1 | 0));
};
export {
    FrameToBase64Request,
    Base64ToImageDataRequest,
    Base64ToBlobRequest,
    ClientInterpolationRequest,
    mkGetModelsRequest,
    mkPairInterpolationRequest,
    mkSequenceInterpolationRequest,
    mkSlowMoRequest,
    mkBlendFramesRequest,
    mkFrameToBase64Request,
    mkBase64ToImageDataRequest,
    mkBase64ToBlobRequest,
    mkClientInterpolationRequest,
    calculateRequiredFrames,
    clampNumber,
    calculateBlendRatios,
    calculateInterpolationTimestamps
};
//# sourceMappingURL=index.js.map
