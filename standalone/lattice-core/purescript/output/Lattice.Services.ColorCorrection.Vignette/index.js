// Generated by purs version 0.15.15
import * as Data_Tuple from "../Data.Tuple/index.js";
import * as $$Math from "../Math/index.js";
var smoothstep = function (t) {
    return t * t * (3.0 - 2.0 * t);
};
var smoothstepClamped = function (edge0) {
    return function (edge1) {
        return function (x) {
            var range = edge1 - edge0;
            var t = (function () {
                var $9 = range < 1.0e-4;
                if ($9) {
                    return 0.0;
                };
                return $$Math.max(0.0)($$Math.min(1.0)((x - edge0) / range));
            })();
            return smoothstep(t);
        };
    };
};
var vignetteFactor = function (dist) {
    return function (midpoint) {
        return function (feather) {
            var $10 = dist <= midpoint;
            if ($10) {
                return 0.0;
            };
            var safeFeather = $$Math.max(1.0e-2)(feather);
            var range = (1.0 - midpoint) + 1.0e-3;
            var t = (dist - midpoint) / range;
            var smoothT = smoothstep(t);
            return $$Math.pow(smoothT)(1.0 / safeFeather);
        };
    };
};
var normalizedDistance = function (x) {
    return function (y) {
        return function (centerX) {
            return function (centerY) {
                return function (maxDist) {
                    return function (aspectX) {
                        return function (aspectY) {
                            var dy = (y - centerY) * aspectY;
                            var dx = (x - centerX) * aspectX;
                            var dist = $$Math.sqrt(dx * dx + dy * dy);
                            var $11 = maxDist < 1.0e-4;
                            if ($11) {
                                return 0.0;
                            };
                            return dist / maxDist;
                        };
                    };
                };
            };
        };
    };
};
var maxDistanceFromCenter = function (width) {
    return function (height) {
        var cy = height / 2.0;
        var cx = width / 2.0;
        return $$Math.sqrt(cx * cx + cy * cy);
    };
};
var aspectFromRoundness = function (roundness) {
    var aspectY = 1.0 + (function () {
        var $12 = roundness < 0.0;
        if ($12) {
            return -roundness * 0.5;
        };
        return 0.0;
    })();
    var aspectX = 1.0 + (function () {
        var $13 = roundness > 0.0;
        if ($13) {
            return roundness * 0.5;
        };
        return 0.0;
    })();
    return new Data_Tuple.Tuple(aspectX, aspectY);
};
var vignetteMultiplier = function (x) {
    return function (y) {
        return function (width) {
            return function (height) {
                return function (amount) {
                    return function (midpoint) {
                        return function (roundness) {
                            return function (feather) {
                                var maxDist = maxDistanceFromCenter(width)(height);
                                var centerY = height / 2.0;
                                var centerX = width / 2.0;
                                var v = aspectFromRoundness(roundness);
                                var dist = normalizedDistance(x)(y)(centerX)(centerY)(maxDist)(v.value0)(v.value1);
                                var factor = vignetteFactor(dist)(midpoint)(feather);
                                return 1.0 - factor * amount;
                            };
                        };
                    };
                };
            };
        };
    };
};
var applyVignette = function (value) {
    return function (factor) {
        return function (amount) {
            var multiplier = 1.0 - factor * amount;
            return $$Math.max(0.0)($$Math.min(255.0)(value * multiplier));
        };
    };
};
export {
    smoothstep,
    smoothstepClamped,
    normalizedDistance,
    maxDistanceFromCenter,
    aspectFromRoundness,
    vignetteFactor,
    applyVignette,
    vignetteMultiplier
};
//# sourceMappingURL=index.js.map
