{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Services.Audio.EnvelopeFollower - Envelope Follower Math"},{"LineComment":" |"},{"LineComment":" | Pure mathematical functions for audio envelope following:"},{"LineComment":" | - Attack/release envelope calculation"},{"LineComment":" | - Smoothing (low-pass filter)"},{"LineComment":" | - Peak hold and decay"},{"LineComment":" |"},{"LineComment":" | These are the stateless mathematical kernels - actual state management"},{"LineComment":" | happens in the TypeScript AudioReactiveMapper class."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/services/audioReactiveMapping.ts (release envelope logic)"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[79,33],"start":[79,32]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[79,21],"start":[79,20]}},"type":"Var","value":{"identifier":"mul","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"mul"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[79,55],"start":[79,54]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[79,65],"start":[79,50]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[86,11],"start":[86,9]}},"type":"Var","value":{"identifier":"lessThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[86,15],"start":[86,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"lessThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[87,33],"start":[87,32]}},"type":"Var","value":{"identifier":"div","moduleName":["Data","EuclideanRing"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[87,37],"start":[87,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"euclideanRingNumber","moduleName":["Data","EuclideanRing"]}},"type":"App"},"identifier":"div"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[87,31],"start":[87,27]}},"type":"Var","value":{"identifier":"negate","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[87,31],"start":[87,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringNumber","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"negate"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[101,19],"start":[101,18]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[101,29],"start":[101,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThan"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[102,18],"start":[102,17]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[102,20],"start":[102,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordInt","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThan1"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[102,74],"start":[102,73]}},"type":"Var","value":{"identifier":"sub","moduleName":["Data","Ring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[102,76],"start":[102,61]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ringInt","moduleName":["Data","Ring"]}},"type":"App"},"identifier":"sub1"},{"annotation":{"meta":null,"sourceSpan":{"end":[77,54],"start":[77,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[77,54],"start":[77,1]}},"argument":"currentValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[77,54],"start":[77,1]}},"argument":"previousSmoothed","body":{"annotation":{"meta":null,"sourceSpan":{"end":[77,54],"start":[77,1]}},"argument":"smoothing","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[79,19],"start":[79,3]}},"type":"Var","value":{"identifier":"previousSmoothed","sourcePos":[78,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[79,31],"start":[79,22]}},"type":"Var","value":{"identifier":"smoothing","sourcePos":[78,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[79,46],"start":[79,34]}},"type":"Var","value":{"identifier":"currentValue","sourcePos":[78,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[79,66],"start":[79,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[79,65],"start":[79,50]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[79,53],"start":[79,50]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[79,65],"start":[79,50]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[79,65],"start":[79,56]}},"type":"Var","value":{"identifier":"smoothing","sourcePos":[78,1]}},"type":"App"},"type":"App"},"type":"App"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"smoothingStep"},{"annotation":{"meta":null,"sourceSpan":{"end":[84,46],"start":[84,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[84,46],"start":[84,1]}},"argument":"tau","body":{"annotation":{"meta":null,"sourceSpan":{"end":[84,46],"start":[84,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[85,30],"start":[85,27]}},"binderType":"VarBinder","identifier":"tau1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[86,21],"start":[86,18]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"lessThanOrEq","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[86,15],"start":[86,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[86,8],"start":[86,5]}},"type":"Var","value":{"identifier":"tau1","sourcePos":[85,27]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[86,15],"start":[86,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[86,15],"start":[86,12]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}},"type":"App"}},{"expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[87,25],"start":[87,17]}},"type":"Var","value":{"identifier":"exp","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[87,38],"start":[87,17]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"div","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[87,37],"start":[87,27]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"negate","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[87,31],"start":[87,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[87,31],"start":[87,28]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[87,37],"start":[87,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[87,37],"start":[87,34]}},"type":"Var","value":{"identifier":"tau1","sourcePos":[85,27]}},"type":"App"},"type":"App"},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[87,14],"start":[87,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[87,38],"start":[85,1]}},"type":"Var","value":{"identifier":"tau","sourcePos":[85,27]}}],"type":"Case"},"type":"Abs"},"identifier":"smoothingFromTimeConstant"},{"annotation":{"meta":null,"sourceSpan":{"end":[99,60],"start":[98,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[99,60],"start":[98,1]}},"argument":"currentValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[99,60],"start":[98,1]}},"argument":"peakValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[99,60],"start":[98,1]}},"argument":"holdCounter","body":{"annotation":{"meta":null,"sourceSpan":{"end":[99,60],"start":[98,1]}},"argument":"holdFrames","body":{"annotation":{"meta":null,"sourceSpan":{"end":[99,60],"start":[98,1]}},"argument":"decayRate","body":{"annotation":{"meta":null,"sourceSpan":{"end":[99,60],"start":[98,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[100,26],"start":[100,14]}},"binderType":"VarBinder","identifier":"currentValue1"},{"annotation":{"meta":null,"sourceSpan":{"end":[100,36],"start":[100,27]}},"binderType":"VarBinder","identifier":"peakValue1"},{"annotation":{"meta":null,"sourceSpan":{"end":[100,48],"start":[100,37]}},"binderType":"VarBinder","identifier":"holdCounter1"},{"annotation":{"meta":null,"sourceSpan":{"end":[100,59],"start":[100,49]}},"binderType":"VarBinder","identifier":"holdFrames1"},{"annotation":{"meta":null,"sourceSpan":{"end":[100,69],"start":[100,60]}},"binderType":"VarBinder","identifier":"decayRate1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[101,85],"start":[101,32]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["newPeak",{"annotation":{"meta":null,"sourceSpan":{"end":[101,55],"start":[101,43]}},"type":"Var","value":{"identifier":"currentValue1","sourcePos":[100,14]}}],["newHoldCounter",{"annotation":{"meta":null,"sourceSpan":{"end":[101,83],"start":[101,73]}},"type":"Var","value":{"identifier":"holdFrames1","sourcePos":[100,49]}}]]}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[101,29],"start":[101,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[101,17],"start":[101,5]}},"type":"Var","value":{"identifier":"currentValue1","sourcePos":[100,14]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[101,29],"start":[101,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[101,29],"start":[101,20]}},"type":"Var","value":{"identifier":"peakValue1","sourcePos":[100,27]}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[102,78],"start":[102,23]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["newPeak",{"annotation":{"meta":null,"sourceSpan":{"end":[102,43],"start":[102,34]}},"type":"Var","value":{"identifier":"peakValue1","sourcePos":[100,27]}}],["newHoldCounter",{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub1","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[102,76],"start":[102,61]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,72],"start":[102,61]}},"type":"Var","value":{"identifier":"holdCounter1","sourcePos":[100,37]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[102,76],"start":[102,61]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,76],"start":[102,75]}},"type":"Literal","value":{"literalType":"IntLiteral","value":1}},"type":"App"}]]}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThan1","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[102,20],"start":[102,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,16],"start":[102,5]}},"type":"Var","value":{"identifier":"holdCounter1","sourcePos":[100,37]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[102,20],"start":[102,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[102,20],"start":[102,19]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[103,70],"start":[103,17]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["newPeak",{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[103,49],"start":[103,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[103,37],"start":[103,28]}},"type":"Var","value":{"identifier":"peakValue1","sourcePos":[100,27]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[103,49],"start":[103,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[103,49],"start":[103,40]}},"type":"Var","value":{"identifier":"decayRate1","sourcePos":[100,60]}},"type":"App"}],["newHoldCounter",{"annotation":{"meta":null,"sourceSpan":{"end":[103,68],"start":[103,67]}},"type":"Literal","value":{"literalType":"IntLiteral","value":0}}]]}},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[103,14],"start":[103,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[103,70],"start":[100,1]}},"type":"Var","value":{"identifier":"currentValue","sourcePos":[100,14]}},{"annotation":{"meta":null,"sourceSpan":{"end":[103,70],"start":[100,1]}},"type":"Var","value":{"identifier":"peakValue","sourcePos":[100,27]}},{"annotation":{"meta":null,"sourceSpan":{"end":[103,70],"start":[100,1]}},"type":"Var","value":{"identifier":"holdCounter","sourcePos":[100,37]}},{"annotation":{"meta":null,"sourceSpan":{"end":[103,70],"start":[100,1]}},"type":"Var","value":{"identifier":"holdFrames","sourcePos":[100,49]}},{"annotation":{"meta":null,"sourceSpan":{"end":[103,70],"start":[100,1]}},"type":"Var","value":{"identifier":"decayRate","sourcePos":[100,60]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"peakHoldStep"},{"annotation":{"meta":null,"sourceSpan":{"end":[42,53],"start":[42,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[42,53],"start":[42,1]}},"argument":"currentValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[42,53],"start":[42,1]}},"argument":"envelopeValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[42,53],"start":[42,1]}},"argument":"release","body":{"annotation":{"meta":null,"sourceSpan":{"end":[42,53],"start":[42,1]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[43,26],"start":[43,14]}},"binderType":"VarBinder","identifier":"currentValue1"},{"annotation":{"meta":null,"sourceSpan":{"end":[43,40],"start":[43,27]}},"binderType":"VarBinder","identifier":"envelopeValue1"},{"annotation":{"meta":null,"sourceSpan":{"end":[43,48],"start":[43,41]}},"binderType":"VarBinder","identifier":"release1"}],"expressions":[{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[44,48],"start":[44,36]}},"type":"Var","value":{"identifier":"currentValue1","sourcePos":[43,14]}},"guard":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThan","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[44,33],"start":[44,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[44,17],"start":[44,5]}},"type":"Var","value":{"identifier":"currentValue1","sourcePos":[43,14]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[44,33],"start":[44,5]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[44,33],"start":[44,20]}},"type":"Var","value":{"identifier":"envelopeValue1","sourcePos":[43,27]}},"type":"App"}},{"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[47,35],"start":[46,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[46,43],"start":[46,11]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"sub","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[46,43],"start":[46,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[46,26],"start":[46,23]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[46,43],"start":[46,23]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[46,43],"start":[46,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[46,36],"start":[46,29]}},"type":"Var","value":{"identifier":"release1","sourcePos":[43,41]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[46,43],"start":[46,23]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[46,43],"start":[46,39]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0.98}},"type":"App"},"type":"App"},"identifier":"decayRate"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"mul","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[47,35],"start":[47,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[47,23],"start":[47,10]}},"type":"Var","value":{"identifier":"envelopeValue1","sourcePos":[43,27]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[47,35],"start":[47,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[47,35],"start":[47,26]}},"type":"Var","value":{"identifier":"decayRate","sourcePos":[46,11]}},"type":"App"},"type":"Let"},"guard":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[45,14],"start":[45,5]}},"type":"Var","value":{"identifier":"otherwise","moduleName":["Data","Boolean"]}}}],"isGuarded":true}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[47,35],"start":[43,1]}},"type":"Var","value":{"identifier":"currentValue","sourcePos":[43,14]}},{"annotation":{"meta":null,"sourceSpan":{"end":[47,35],"start":[43,1]}},"type":"Var","value":{"identifier":"envelopeValue","sourcePos":[43,27]}},{"annotation":{"meta":null,"sourceSpan":{"end":[47,35],"start":[43,1]}},"type":"Var","value":{"identifier":"release","sourcePos":[43,41]}}],"type":"Case"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"envelopeStep"},{"annotation":{"meta":null,"sourceSpan":{"end":[53,45],"start":[53,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[53,45],"start":[53,1]}},"argument":"currentValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[53,45],"start":[53,1]}},"argument":"envelopeValue","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[54,53],"start":[54,45]}},"type":"Var","value":{"identifier":"max","moduleName":["Math"]}},"annotation":{"meta":null,"sourceSpan":{"end":[54,66],"start":[54,45]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,66],"start":[54,54]}},"type":"Var","value":{"identifier":"currentValue","sourcePos":[54,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[54,80],"start":[54,45]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[54,80],"start":[54,67]}},"type":"Var","value":{"identifier":"envelopeValue","sourcePos":[54,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"envelopeOutput"},{"annotation":{"meta":null,"sourceSpan":{"end":[60,67],"start":[59,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[60,67],"start":[59,1]}},"argument":"currentValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[60,67],"start":[59,1]}},"argument":"envelopeValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[60,67],"start":[59,1]}},"argument":"release","body":{"annotation":{"meta":null,"sourceSpan":{"end":[64,29],"start":[62,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[62,68],"start":[62,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[62,33],"start":[62,21]}},"type":"Var","value":{"identifier":"envelopeStep","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[62,46],"start":[62,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[62,46],"start":[62,34]}},"type":"Var","value":{"identifier":"currentValue","sourcePos":[61,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[62,60],"start":[62,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[62,60],"start":[62,47]}},"type":"Var","value":{"identifier":"envelopeValue","sourcePos":[61,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[62,68],"start":[62,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[62,68],"start":[62,61]}},"type":"Var","value":{"identifier":"release","sourcePos":[61,1]}},"type":"App"},"identifier":"newEnvelope"},{"annotation":{"meta":null,"sourceSpan":{"end":[63,55],"start":[63,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[63,30],"start":[63,16]}},"type":"Var","value":{"identifier":"envelopeOutput","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[63,43],"start":[63,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[63,43],"start":[63,31]}},"type":"Var","value":{"identifier":"currentValue","sourcePos":[61,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[63,55],"start":[63,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[63,55],"start":[63,44]}},"type":"Var","value":{"identifier":"newEnvelope","sourcePos":[62,7]}},"type":"App"},"identifier":"output"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[64,29],"start":[64,6]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["newEnvelope",{"annotation":{"meta":null,"sourceSpan":{"end":[64,19],"start":[64,8]}},"type":"Var","value":{"identifier":"newEnvelope","sourcePos":[62,7]}}],["output",{"annotation":{"meta":null,"sourceSpan":{"end":[64,27],"start":[64,21]}},"type":"Var","value":{"identifier":"output","sourcePos":[63,7]}}]]}},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"envelopeFollowerStep"},{"annotation":{"meta":null,"sourceSpan":{"end":[116,86],"start":[115,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[116,86],"start":[115,1]}},"argument":"currentValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[116,86],"start":[115,1]}},"argument":"envelopeValue","body":{"annotation":{"meta":null,"sourceSpan":{"end":[116,86],"start":[115,1]}},"argument":"previousSmoothed","body":{"annotation":{"meta":null,"sourceSpan":{"end":[116,86],"start":[115,1]}},"argument":"release","body":{"annotation":{"meta":null,"sourceSpan":{"end":[116,86],"start":[115,1]}},"argument":"smoothing","body":{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[118,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[118,71],"start":[118,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[118,36],"start":[118,16]}},"type":"Var","value":{"identifier":"envelopeFollowerStep","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[118,49],"start":[118,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[118,49],"start":[118,37]}},"type":"Var","value":{"identifier":"currentValue","sourcePos":[117,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[118,63],"start":[118,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[118,63],"start":[118,50]}},"type":"Var","value":{"identifier":"envelopeValue","sourcePos":[117,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[118,71],"start":[118,16]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[118,71],"start":[118,64]}},"type":"Var","value":{"identifier":"release","sourcePos":[117,1]}},"type":"App"},"identifier":"result"},{"annotation":{"meta":null,"sourceSpan":{"end":[119,78],"start":[119,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[119,37],"start":[119,24]}},"type":"Var","value":{"identifier":"smoothingStep","moduleName":["Lattice","Services","Audio","EnvelopeFollower"]}},"annotation":{"meta":null,"sourceSpan":{"end":[119,51],"start":[119,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,51],"start":[119,38]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[119,44],"start":[119,38]}},"type":"Var","value":{"identifier":"result","sourcePos":[118,7]}},"fieldName":"output","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,68],"start":[119,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,68],"start":[119,52]}},"type":"Var","value":{"identifier":"previousSmoothed","sourcePos":[117,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[119,78],"start":[119,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[119,78],"start":[119,69]}},"type":"Var","value":{"identifier":"smoothing","sourcePos":[117,1]}},"type":"App"},"identifier":"smoothedOutput"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[120,6]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["newEnvelope",{"annotation":{"meta":null,"sourceSpan":{"end":[120,39],"start":[120,21]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[120,27],"start":[120,21]}},"type":"Var","value":{"identifier":"result","sourcePos":[118,7]}},"fieldName":"newEnvelope","type":"Accessor"}],["smoothedOutput",{"annotation":{"meta":null,"sourceSpan":{"end":[120,55],"start":[120,41]}},"type":"Var","value":{"identifier":"smoothedOutput","sourcePos":[119,7]}}]]}},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"processWithEnvelopeAndSmoothing"}],"exports":["envelopeStep","envelopeOutput","envelopeFollowerStep","smoothingStep","smoothingFromTimeConstant","peakHoldStep","processWithEnvelopeAndSmoothing"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Data","Boolean"]},{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Data","EuclideanRing"]},{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Data","Ring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Lattice","Services","Audio","EnvelopeFollower"]},{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Math"]},{"annotation":{"meta":null,"sourceSpan":{"end":[27,15],"start":[27,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[120,57],"start":[13,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","Audio","EnvelopeFollower"],"modulePath":"src/Lattice/Services/Audio/EnvelopeFollower.purs","reExports":{},"sourceSpan":{"end":[120,57],"start":[13,1]}}