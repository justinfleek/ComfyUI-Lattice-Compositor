{"builtWith":"0.15.15","comments":[{"LineComment":" | Lattice.Services.GLSL.Library - GLSL shader library"},{"LineComment":" |"},{"LineComment":" | Built-in GLSL functions and shader templates."},{"LineComment":" | Pure data - GLSL source code as strings."},{"LineComment":" |"},{"LineComment":" | Source: ui/src/services/glsl/GLSLEngine.ts (library section)"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[85,5],"start":[85,3]}},"type":"Var","value":{"identifier":"append","moduleName":["Data","Semigroup"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semigroupString","moduleName":["Data","Semigroup"]}},"type":"App"},"identifier":"append"},{"annotation":{"meta":null,"sourceSpan":{"end":[223,26],"start":[223,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[239,4],"start":[224,19]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// Texture sampling with edge modes\nvec4 sampleClamp(sampler2D tex, vec2 uv) {\n  return texture2D(tex, clamp(uv, 0.0, 1.0));\n}\n\nvec4 sampleWrap(sampler2D tex, vec2 uv) {\n  return texture2D(tex, fract(uv));\n}\n\nvec4 sampleMirror(sampler2D tex, vec2 uv) {\n  vec2 m = mod(uv, 2.0);\n  m = mix(m, 2.0 - m, step(1.0, m));\n  return texture2D(tex, m);\n}\n"}},"identifier":"textureSampling"},{"annotation":{"meta":null,"sourceSpan":{"end":[307,25],"start":[307,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[329,4],"start":[308,18]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// Shape SDFs\nfloat circle(vec2 uv, vec2 center, float radius) {\n  return smoothstep(radius, radius - 0.01, length(uv - center));\n}\n\nfloat rectangle(vec2 uv, vec2 center, vec2 size) {\n  vec2 d = abs(uv - center) - size;\n  return 1.0 - smoothstep(0.0, 0.01, max(d.x, d.y));\n}\n\nfloat roundedRect(vec2 uv, vec2 center, vec2 size, float radius) {\n  vec2 d = abs(uv - center) - size + radius;\n  return 1.0 - smoothstep(0.0, 0.01, min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius);\n}\n\nfloat line(vec2 uv, vec2 a, vec2 b, float thickness) {\n  vec2 pa = uv - a, ba = b - a;\n  float h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0);\n  return smoothstep(thickness, thickness - 0.01, length(pa - ba * h));\n}\n"}},"identifier":"shapeFunctions"},{"annotation":{"meta":null,"sourceSpan":{"end":[49,23],"start":[49,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[66,4],"start":[50,16]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\nprecision highp float;\n\n// Shadertoy-compatible uniforms\nuniform vec3 iResolution;      // viewport resolution (pixels)\nuniform float iTime;           // shader playback time (seconds)\nuniform float iTimeDelta;      // render time (seconds)\nuniform int iFrame;            // frame number\nuniform vec4 iMouse;           // mouse pixel coords\nuniform vec4 iDate;            // year, month, day, time in seconds\nuniform float iSampleRate;     // sound sample rate\nuniform sampler2D iChannel0;   // input texture\n\n// Texture coordinate from vertex shader\nvarying vec2 v_texCoord;\nvarying vec2 fragCoord;\n"}},"identifier":"shaderHeader"},{"annotation":{"meta":null,"sourceSpan":{"end":[69,23],"start":[69,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[76,4],"start":[70,16]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\nvoid main() {\n  vec4 fragColor;\n  mainImage(fragColor, fragCoord);\n  gl_FragColor = fragColor;\n}\n"}},"identifier":"shaderFooter"},{"annotation":{"meta":null,"sourceSpan":{"end":[121,25],"start":[121,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[188,4],"start":[122,18]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// Noise functions\nfloat hash(float n) {\n  return fract(sin(n) * 43758.5453123);\n}\n\nfloat hash2(vec2 p) {\n  return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec2 hash22(vec2 p) {\n  p = vec2(dot(p, vec2(127.1, 311.7)), dot(p, vec2(269.5, 183.3)));\n  return -1.0 + 2.0 * fract(sin(p) * 43758.5453123);\n}\n\nfloat noise(vec2 p) {\n  vec2 i = floor(p);\n  vec2 f = fract(p);\n  f = f * f * (3.0 - 2.0 * f);\n  float a = hash2(i);\n  float b = hash2(i + vec2(1.0, 0.0));\n  float c = hash2(i + vec2(0.0, 1.0));\n  float d = hash2(i + vec2(1.0, 1.0));\n  return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);\n}\n\n// Simplex noise helpers\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec2 mod289_2(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec3 permute(vec3 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat snoise(vec2 v) {\n  const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);\n  vec2 i = floor(v + dot(v, C.yy));\n  vec2 x0 = v - i + dot(i, C.xx);\n  vec2 i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n  i = mod289_2(i);\n  vec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0)) + i.x + vec3(0.0, i1.x, 1.0));\n  vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);\n  m = m * m;\n  m = m * m;\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n  m *= 1.79284291400159 - 0.85373472095314 * (a0 * a0 + h * h);\n  vec3 g;\n  g.x = a0.x * x0.x + h.x * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nfloat fbm(vec2 p, int octaves) {\n  float value = 0.0;\n  float amplitude = 0.5;\n  float frequency = 1.0;\n  for (int i = 0; i < 8; i++) {\n    if (i >= octaves) break;\n    value += amplitude * snoise(p * frequency);\n    frequency *= 2.0;\n    amplitude *= 0.5;\n  }\n  return value;\n}\n"}},"identifier":"noiseFunctions"},{"annotation":{"meta":null,"sourceSpan":{"end":[97,24],"start":[97,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[115,4],"start":[98,17]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// Math constants and utilities\n#define PI 3.14159265359\n#define TAU 6.28318530718\n#define E 2.71828182846\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nfloat saturate(float x) {\n  return clamp(x, 0.0, 1.0);\n}\n\nvec3 saturate3(vec3 x) {\n  return clamp(x, 0.0, 1.0);\n}\n"}},"identifier":"mathUtilities"},{"annotation":{"meta":null,"sourceSpan":{"end":[335,28],"start":[335,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[354,4],"start":[336,21]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// Gradient functions\nvec3 linearGradient(vec2 uv, vec2 start, vec2 end, vec3 colorA, vec3 colorB) {\n  vec2 dir = normalize(end - start);\n  float t = dot(uv - start, dir) / length(end - start);\n  return mix(colorA, colorB, clamp(t, 0.0, 1.0));\n}\n\nvec3 radialGradient(vec2 uv, vec2 center, float radius, vec3 colorA, vec3 colorB) {\n  float t = length(uv - center) / radius;\n  return mix(colorA, colorB, clamp(t, 0.0, 1.0));\n}\n\nvec3 angularGradient(vec2 uv, vec2 center, vec3 colorA, vec3 colorB) {\n  float angle = atan(uv.y - center.y, uv.x - center.x);\n  float t = (angle + PI) / TAU;\n  return mix(colorA, colorB, t);\n}\n"}},"identifier":"gradientFunctions"},{"annotation":{"meta":null,"sourceSpan":{"end":[276,30],"start":[276,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[301,4],"start":[277,23]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// Barrel distortion\nvec2 barrel(vec2 uv, float amount) {\n  vec2 cc = uv - 0.5;\n  float dist = dot(cc, cc);\n  return uv + cc * dist * amount;\n}\n\nvec2 pincushion(vec2 uv, float amount) {\n  return barrel(uv, -amount);\n}\n\nvec2 swirl(vec2 uv, vec2 center, float angle, float radius) {\n  vec2 tc = uv - center;\n  float dist = length(tc);\n  float percent = (radius - dist) / radius;\n  if (percent > 0.0) {\n    float theta = percent * percent * angle;\n    float s = sin(theta);\n    float c = cos(theta);\n    tc = vec2(tc.x * c - tc.y * s, tc.x * s + tc.y * c);\n  }\n  return center + tc;\n}\n"}},"identifier":"distortionFunctions"},{"annotation":{"meta":null,"sourceSpan":{"end":[33,30],"start":[33,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[46,4],"start":[34,23]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\nvarying vec2 fragCoord;\nuniform vec3 iResolution;\n\nvoid main() {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_texCoord = a_texCoord;\n  fragCoord = a_texCoord * iResolution.xy;\n}\n"}},"identifier":"defaultVertexShader"},{"annotation":{"meta":null,"sourceSpan":{"end":[194,32],"start":[194,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[217,4],"start":[195,25]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// RGB to HSV\nvec3 rgb2hsv(vec3 c) {\n  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n  float d = q.x - min(q.w, q.y);\n  float e = 1.0e-10;\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n// HSV to RGB\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n// Luminance calculation\nfloat luminance(vec3 c) {\n  return dot(c, vec3(0.299, 0.587, 0.114));\n}\n"}},"identifier":"colorSpaceConversions"},{"annotation":{"meta":null,"sourceSpan":{"end":[245,24],"start":[245,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[270,4],"start":[246,17]}},"type":"Literal","value":{"literalType":"StringLiteral","value":"\n// Gaussian blur\nvec4 blur(sampler2D tex, vec2 uv, vec2 resolution, float radius) {\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  vec2 texelSize = 1.0 / resolution;\n  for (float x = -4.0; x <= 4.0; x += 1.0) {\n    for (float y = -4.0; y <= 4.0; y += 1.0) {\n      float weight = exp(-(x*x + y*y) / (2.0 * radius * radius));\n      color += texture2D(tex, uv + vec2(x, y) * texelSize * radius) * weight;\n      total += weight;\n    }\n  }\n  return color / total;\n}\n\nvec4 directionalBlur(sampler2D tex, vec2 uv, vec2 direction, float strength) {\n  vec4 color = vec4(0.0);\n  for (float i = -4.0; i <= 4.0; i += 1.0) {\n    float weight = exp(-abs(i) * 0.5);\n    color += texture2D(tex, uv + direction * i * strength) * weight;\n  }\n  return color / 9.0;\n}\n"}},"identifier":"blurFunctions"},{"annotation":{"meta":null,"sourceSpan":{"end":[83,22],"start":[83,1]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"append","moduleName":["Lattice","Services","GLSL","Library"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[84,28],"start":[84,15]}},"type":"Var","value":{"identifier":"mathUtilities","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"append","moduleName":["Lattice","Services","GLSL","Library"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[85,20],"start":[85,6]}},"type":"Var","value":{"identifier":"noiseFunctions","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"append","moduleName":["Lattice","Services","GLSL","Library"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[86,27],"start":[86,6]}},"type":"Var","value":{"identifier":"colorSpaceConversions","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"append","moduleName":["Lattice","Services","GLSL","Library"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[87,21],"start":[87,6]}},"type":"Var","value":{"identifier":"textureSampling","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"append","moduleName":["Lattice","Services","GLSL","Library"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[88,19],"start":[88,6]}},"type":"Var","value":{"identifier":"blurFunctions","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"append","moduleName":["Lattice","Services","GLSL","Library"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[89,25],"start":[89,6]}},"type":"Var","value":{"identifier":"distortionFunctions","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"append","moduleName":["Lattice","Services","GLSL","Library"]}},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[90,20],"start":[90,6]}},"type":"Var","value":{"identifier":"shapeFunctions","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[84,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[91,23],"start":[91,6]}},"type":"Var","value":{"identifier":"gradientFunctions","moduleName":["Lattice","Services","GLSL","Library"]}},"type":"App"},"type":"App"},"type":"App"},"type":"App"},"type":"App"},"type":"App"},"type":"App"},"identifier":"glslLibrary"}],"exports":["defaultVertexShader","shaderHeader","shaderFooter","glslLibrary","mathUtilities","noiseFunctions","colorSpaceConversions","textureSampling","blurFunctions","distortionFunctions","shapeFunctions","gradientFunctions"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[354,4],"start":[8,1]}},"moduleName":["Data","Semigroup"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,4],"start":[8,1]}},"moduleName":["Lattice","Services","GLSL","Library"]},{"annotation":{"meta":null,"sourceSpan":{"end":[26,15],"start":[26,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,4],"start":[8,1]}},"moduleName":["Prim"]}],"moduleName":["Lattice","Services","GLSL","Library"],"modulePath":"src/Lattice/Services/GLSL/Library.purs","reExports":{},"sourceSpan":{"end":[354,4],"start":[8,1]}}