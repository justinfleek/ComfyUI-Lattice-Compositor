{
  "generated": "2026-01-13T15:43:24.808Z",
  "total": 5359,
  "patterns": [
    {
      "id": "composables/useCurveEditorCoords.ts:129:38",
      "file": "composables/useCurveEditorCoords.ts",
      "line": 129,
      "column": 38,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function getNumericValue(value: any): number {",
      "context": {
        "before": [
          "/**",
          " * Extract numeric value from keyframe value (handles number and object types)",
          " */"
        ],
        "after": [
          "  if (typeof value === \"number\") return value;",
          "  if (typeof value === \"object\") return value.x ?? value.y ?? value.z ?? 0;",
          "  return 0;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useShapeDrawing.ts:32:12",
      "file": "composables/useShapeDrawing.ts",
      "line": 32,
      "column": 12,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "keyframes: any[];",
      "context": {
        "before": [
          "function createAnimatableProp<T>(value: T): {",
          "  value: T;",
          "  animated: boolean;"
        ],
        "after": [
          "} {",
          "  return {",
          "    value,"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useShapeDrawing.ts:251:37",
      "file": "composables/useShapeDrawing.ts",
      "line": 251,
      "column": 37,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const shapeData = newLayer.data as any;",
      "context": {
        "before": [
          "    const options = store.shapeToolOptions;",
          "",
          "    // Create the appropriate shape generator based on type"
        ],
        "after": [
          "    if (!shapeData.contents || !Array.isArray(shapeData.contents)) {",
          "      shapeData.contents = [];",
          "    }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useShapeDrawing.ts:257:43",
      "file": "composables/useShapeDrawing.ts",
      "line": 257,
      "column": 43,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "let group = shapeData.contents.find((c: any) => c.type === \"group\");",
      "context": {
        "before": [
          "    }",
          "",
          "    // Find or create a default group"
        ],
        "after": [
          "    if (!group) {",
          "      group = {",
          "        type: \"group\","
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useShapeDrawing.ts:273:18",
      "file": "composables/useShapeDrawing.ts",
      "line": 273,
      "column": 18,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "let generator: any;",
      "context": {
        "before": [
          "    group.contents = [];",
          "",
          "    // Create the shape generator"
        ],
        "after": [
          "    switch (shapeType) {",
          "      case \"rectangle\":",
          "        generator = {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:63:8",
      "file": "composables/useSplineInteraction.ts",
      "line": 63,
      "column": 8,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "store: any;",
      "context": {
        "before": [
          "    y: number;",
          "  };",
          "  // Store references"
        ],
        "after": [
          "  layerStore: any;",
          "  // Callbacks",
          "  emit: {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:64:13",
      "file": "composables/useSplineInteraction.ts",
      "line": 64,
      "column": 13,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "layerStore: any;",
      "context": {
        "before": [
          "  };",
          "  // Store references",
          "  store: any;"
        ],
        "after": [
          "  // Callbacks",
          "  emit: {",
          "    pointAdded: (point: ControlPoint) => void;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:310:39",
      "file": "composables/useSplineInteraction.ts",
      "line": 310,
      "column": 39,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const layer = store.layers.find((l: any) => l.id === layerId.value);",
      "context": {
        "before": [
          "    const layerPos = inverseTransformPoint(pos);",
          "",
          "    if (!layerId.value) return;"
        ],
        "after": [
          "    if (!layer || !isSplineOrPathType(layer.type)) return;",
          "",
          "    if (penSubMode.value === \"add\") {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:453:40",
      "file": "composables/useSplineInteraction.ts",
      "line": 453,
      "column": 40,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;",
      "context": {
        "before": [
          "        const prevPointIndex = newPointIndex - 1;",
          "",
          "        const layerPos = inverseTransformPoint(pos);"
        ],
        "after": [
          "        const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
          "",
          "        if (newPoint && prevPointIndex >= 0) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:454:40",
      "file": "composables/useSplineInteraction.ts",
      "line": 454,
      "column": 40,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
      "context": {
        "before": [
          "",
          "        const layerPos = inverseTransformPoint(pos);",
          "        const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;"
        ],
        "after": [
          "",
          "        if (newPoint && prevPointIndex >= 0) {",
          "          const prevPoint = points[prevPointIndex];"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:502:41",
      "file": "composables/useSplineInteraction.ts",
      "line": 502,
      "column": 41,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const layer = store.layers.find((l: any) => l.id === layerId.value);",
      "context": {
        "before": [
          "",
          "    // Handle dragging",
          "    if (dragTarget.value && layerId.value) {"
        ],
        "after": [
          "      if (!layer || !isSplineOrPathType(layer.type)) return;",
          "",
          "      const layerData = layer.data as SplineData | PathLayerData;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:517:22",
      "file": "composables/useSplineInteraction.ts",
      "line": 517,
      "column": 22,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const updates: any = { x: layerPos.x, y: layerPos.y };",
      "context": {
        "before": [
          "        const dx = layerPos.x - point.x;",
          "        const dy = layerPos.y - point.y;",
          ""
        ],
        "after": [
          "        if (point.handleIn) {",
          "          updates.handleIn = {",
          "            x: point.handleIn.x + dx,"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:534:22",
      "file": "composables/useSplineInteraction.ts",
      "line": 534,
      "column": 22,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const updates: any = { handleIn: { x: layerPos.x, y: layerPos.y } };",
      "context": {
        "before": [
          "        options.layerStore.updateSplineControlPoint(options.store, layerId.value, point.id, updates);",
          "        emit.pointMoved(point.id, layerPos.x, layerPos.y);",
          "      } else if (dragTarget.value.type === \"handleIn\") {"
        ],
        "after": [
          "",
          "        if (point.type === \"smooth\") {",
          "          const dx = layerPos.x - point.x;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:545:22",
      "file": "composables/useSplineInteraction.ts",
      "line": 545,
      "column": 22,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const updates: any = { handleOut: { x: layerPos.x, y: layerPos.y } };",
      "context": {
        "before": [
          "        options.layerStore.updateSplineControlPoint(options.store, layerId.value, point.id, updates);",
          "        emit.handleMoved(point.id, \"in\", layerPos.x, layerPos.y);",
          "      } else if (dragTarget.value.type === \"handleOut\") {"
        ],
        "after": [
          "",
          "        if (point.type === \"smooth\") {",
          "          const dx = layerPos.x - point.x;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:574:22",
      "file": "composables/useSplineInteraction.ts",
      "line": 574,
      "column": 22,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const updates: any = { x: newX };",
      "context": {
        "before": [
          "        const newX = (dragTarget.value.originalX ?? point.x) + dx;",
          "",
          "        const handleDx = newX - point.x;"
        ],
        "after": [
          "        if (point.handleIn) {",
          "          updates.handleIn = {",
          "            x: point.handleIn.x + handleDx,"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:597:22",
      "file": "composables/useSplineInteraction.ts",
      "line": 597,
      "column": 22,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const updates: any = { y: newY };",
      "context": {
        "before": [
          "        const newY = (dragTarget.value.originalY ?? point.y) + dy;",
          "",
          "        const handleDy = newY - point.y;"
        ],
        "after": [
          "        if (point.handleIn) {",
          "          updates.handleIn = {",
          "            x: point.handleIn.x,"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:630:41",
      "file": "composables/useSplineInteraction.ts",
      "line": 630,
      "column": 41,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const layer = store.layers.find((l: any) => l.id === layerId.value);",
      "context": {
        "before": [
          "        return;",
          "      }",
          ""
        ],
        "after": [
          "      if (layer && isSplineOrPathType(layer.type)) {",
          "        const layerData = layer.data as SplineData | PathLayerData;",
          "        const point = layerData.controlPoints?.find("
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:834:26",
      "file": "composables/useSplineInteraction.ts",
      "line": 834,
      "column": 26,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "startDepth: (point as any).depth ?? 0,",
      "context": {
        "before": [
          "      pointId,",
          "      startX: event.clientX,",
          "      startY: event.clientY,"
        ],
        "after": [
          "      screenStartX: event.clientX,",
          "      screenStartY: event.clientY,",
          "    };"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:844:43",
      "file": "composables/useSplineInteraction.ts",
      "line": 844,
      "column": 43,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const layer = store.layers.find((l: any) => l.id === layerId.value);",
      "context": {
        "before": [
          "  function handleKeyDown(event: KeyboardEvent) {",
          "    if (event.key === \"Delete\" || event.key === \"Backspace\") {",
          "      if (selectedPointId.value && layerId.value) {"
        ],
        "after": [
          "        if (layer && isSplineOrPathType(layer.type)) {",
          "          const pointId = selectedPointId.value;",
          "          options.layerStore.deleteSplineControlPoint(options.store, layerId.value, pointId);"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:20:52",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 20,
      "column": 52,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "private cache: Map<string, { frame: number; value: any }> = new Map();",
      "context": {
        "before": [
          "",
          "export class KeyframeEvaluator {",
          "  // Cache for recent evaluations (cleared per frame batch)"
        ],
        "after": [
          "",
          "  /**",
          "   * Evaluate an animatable property at a given frame"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:308:10",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 308,
      "column": 10,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "value: any,",
      "context": {
        "before": [
          "   * Check if value is position-like (has x, y properties)",
          "   */",
          "  private isPositionLike("
        ],
        "after": [
          "  ): value is { x: number; y: number; z?: number } {",
          "    return (",
          "      value !== null &&"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:166:32",
      "file": "engine/core/LayerManager.ts",
      "line": 166,
      "column": 32,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const layerData = (layer as any).layerData;",
      "context": {
        "before": [
          "",
          "    // Update existing effect layers",
          "    for (const layer of this.layers.values()) {"
        ],
        "after": [
          "      if (",
          "        layer.type === \"solid\" &&",
          "        (layerData?.effectLayer || layerData?.adjustmentLayer)"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:404:9",
      "file": "engine/core/RenderPipeline.ts",
      "line": 404,
      "column": 9,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "} as any, // width/height are needed but not in types",
      "context": {
        "before": [
          "        focus: this.dofConfig.focusDistance,",
          "        aperture: this.dofConfig.aperture,",
          "        maxblur: this.dofConfig.maxBlur,"
        ],
        "after": [
          "    );",
          "",
          "    // Insert before output pass"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:417:38",
      "file": "engine/core/RenderPipeline.ts",
      "line": 417,
      "column": 38,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const uniforms = (this.bokehPass as any).uniforms;",
      "context": {
        "before": [
          "  private updateBokehPass(): void {",
          "    if (!this.bokehPass) return;",
          ""
        ],
        "after": [
          "    if (uniforms) {",
          "      uniforms.focus.value = this.dofConfig.focusDistance;",
          "      uniforms.aperture.value = this.dofConfig.aperture;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:1052:20",
      "file": "engine/core/RenderPipeline.ts",
      "line": 1052,
      "column": 20,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.composer as any).renderTarget1 = this.colorTarget.clone();",
      "context": {
        "before": [
          "    // Update composer's render target",
          "    this.composer.renderTarget1.dispose();",
          "    this.composer.renderTarget2.dispose();"
        ],
        "after": [
          "    (this.composer as any).renderTarget2 = this.colorTarget.clone();",
          "",
          "    // Resize capture canvas"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:1053:20",
      "file": "engine/core/RenderPipeline.ts",
      "line": 1053,
      "column": 20,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.composer as any).renderTarget2 = this.colorTarget.clone();",
      "context": {
        "before": [
          "    this.composer.renderTarget1.dispose();",
          "    this.composer.renderTarget2.dispose();",
          "    (this.composer as any).renderTarget1 = this.colorTarget.clone();"
        ],
        "after": [
          "",
          "    // Resize capture canvas",
          "    this.captureCanvas.width = scaledWidth;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:273:24",
      "file": "engine/core/SceneManager.ts",
      "line": 273,
      "column": 24,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const obj = object as any;",
      "context": {
        "before": [
          "    // Ensure the object has required methods by binding them from our THREE.Object3D",
          "    // This is a compatibility shim for multi-Three.js environments",
          "    const proto = THREE.Object3D.prototype;"
        ],
        "after": [
          "",
          "    // Patch missing methods if they don't exist or are from wrong prototype",
          "    if (typeof obj.updateMatrixWorld !== \"function\") {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:285:32",
      "file": "engine/core/SceneManager.ts",
      "line": 285,
      "column": 32,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const patchChild = (child: any) => {",
      "context": {
        "before": [
          "",
          "    // Recursively patch children",
          "    if (obj.children && Array.isArray(obj.children)) {"
        ],
        "after": [
          "        if (typeof child.updateMatrixWorld !== \"function\") {",
          "          child.updateMatrixWorld = proto.updateMatrixWorld.bind(child);",
          "        }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:328:56",
      "file": "engine/core/SceneManager.ts",
      "line": 328,
      "column": 56,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const index = this.scene.children.indexOf(object as any);",
      "context": {
        "before": [
          "",
          "    // If remove() failed, manually remove from children array",
          "    if (this.scene.children.length === childCountBefore) {"
        ],
        "after": [
          "      if (index !== -1) {",
          "        this.scene.children.splice(index, 1);",
          "        (object as any).parent = null;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:331:17",
      "file": "engine/core/SceneManager.ts",
      "line": 331,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(object as any).parent = null;",
      "context": {
        "before": [
          "      const index = this.scene.children.indexOf(object as any);",
          "      if (index !== -1) {",
          "        this.scene.children.splice(index, 1);"
        ],
        "after": [
          "        object.dispatchEvent?.({ type: \"removed\" });",
          "      }",
          "    }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:347:31",
      "file": "engine/core/SceneManager.ts",
      "line": 347,
      "column": 31,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const ensureMethods = (obj: any, depth = 0) => {",
      "context": {
        "before": [
          "   * internal structures (like children arrays) to be incompatible.",
          "   */",
          "  prepareForRender(): void {"
        ],
        "after": [
          "      // Safety check",
          "      if (!obj || depth > 50) return;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:802:23",
      "file": "engine/LatticeEngine.ts",
      "line": 802,
      "column": 23,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "typeof (layer as any).setResolution === \"function\"",
      "context": {
        "before": [
          "    for (const layer of layers) {",
          "      if (",
          "        \"setResolution\" in layer &&"
        ],
        "after": [
          "      ) {",
          "        (layer as any).setResolution(width, height);",
          "      }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:804:16",
      "file": "engine/LatticeEngine.ts",
      "line": 804,
      "column": 16,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(layer as any).setResolution(width, height);",
      "context": {
        "before": [
          "        \"setResolution\" in layer &&",
          "        typeof (layer as any).setResolution === \"function\"",
          "      ) {"
        ],
        "after": [
          "      }",
          "    }",
          "  }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:93:33",
      "file": "engine/layers/ImageLayer.ts",
      "line": 93,
      "column": 33,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const data = layerData.data as any;",
      "context": {
        "before": [
          "    targetHeight: number | null;",
          "    fit: \"none\" | \"contain\" | \"cover\" | \"fill\";",
          "  } {"
        ],
        "after": [
          "",
          "    return {",
          "      source: data?.source ?? data?.url ?? data?.assetId ?? null,"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:400:34",
      "file": "engine/layers/ImageLayer.ts",
      "line": 400,
      "column": 34,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const data = properties.data as any;",
      "context": {
        "before": [
          "  }",
          "",
          "  protected onUpdate(properties: Partial<Layer>): void {"
        ],
        "after": [
          "    let needsResize = false;",
          "",
          "    // Handle source change"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:276:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 276,
      "column": 33,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const data = layerData.data as any;",
      "context": {
        "before": [
          "  // ============================================================================",
          "",
          "  private extractLightData(layerData: Layer): LightData {"
        ],
        "after": [
          "",
          "    return {",
          "      lightType: data?.lightType ?? \"point\","
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:502:24",
      "file": "engine/layers/LightLayer.ts",
      "line": 502,
      "column": 24,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if ((this.helper as any).dispose) {",
      "context": {
        "before": [
          "  private createHelper(): void {",
          "    if (this.helper) {",
          "      this.group.remove(this.helper);"
        ],
        "after": [
          "        (this.helper as any).dispose();",
          "      }",
          "    }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:503:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 503,
      "column": 22,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.helper as any).dispose();",
      "context": {
        "before": [
          "    if (this.helper) {",
          "      this.group.remove(this.helper);",
          "      if ((this.helper as any).dispose) {"
        ],
        "after": [
          "      }",
          "    }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:683:21",
      "file": "engine/layers/LightLayer.ts",
      "line": 683,
      "column": 21,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if ((this.light as any).dispose) {",
      "context": {
        "before": [
          "    this.lightData.lightType = type;",
          "",
          "    this.group.remove(this.light);"
        ],
        "after": [
          "      (this.light as any).dispose();",
          "    }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:684:19",
      "file": "engine/layers/LightLayer.ts",
      "line": 684,
      "column": 19,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.light as any).dispose();",
      "context": {
        "before": [
          "",
          "    this.group.remove(this.light);",
          "    if ((this.light as any).dispose) {"
        ],
        "after": [
          "    }",
          "",
          "    this.light = this.createLight();"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1201:21",
      "file": "engine/layers/LightLayer.ts",
      "line": 1201,
      "column": 21,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if ((this.light as any).dispose) {",
      "context": {
        "before": [
          "  }",
          "",
          "  protected onDispose(): void {"
        ],
        "after": [
          "      (this.light as any).dispose();",
          "    }",
          "    if (this.helper && (this.helper as any).dispose) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1202:19",
      "file": "engine/layers/LightLayer.ts",
      "line": 1202,
      "column": 19,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.light as any).dispose();",
      "context": {
        "before": [
          "",
          "  protected onDispose(): void {",
          "    if ((this.light as any).dispose) {"
        ],
        "after": [
          "    }",
          "    if (this.helper && (this.helper as any).dispose) {",
          "      (this.helper as any).dispose();"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1204:37",
      "file": "engine/layers/LightLayer.ts",
      "line": 1204,
      "column": 37,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if (this.helper && (this.helper as any).dispose) {",
      "context": {
        "before": [
          "    if ((this.light as any).dispose) {",
          "      (this.light as any).dispose();",
          "    }"
        ],
        "after": [
          "      (this.helper as any).dispose();",
          "    }",
          "  }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1205:20",
      "file": "engine/layers/LightLayer.ts",
      "line": 1205,
      "column": 20,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.helper as any).dispose();",
      "context": {
        "before": [
          "      (this.light as any).dispose();",
          "    }",
          "    if (this.helper && (this.helper as any).dispose) {"
        ],
        "after": [
          "    }",
          "  }",
          "}"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:590:17",
      "file": "engine/layers/ModelLayer.ts",
      "line": 590,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(material as any).wireframe = override.wireframe;",
      "context": {
        "before": [
          "",
          "    // Apply overrides",
          "    if (override.wireframe !== undefined) {"
        ],
        "after": [
          "    }",
          "",
          "    if (override.wireframeColor && override.wireframe) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:599:17",
      "file": "engine/layers/ModelLayer.ts",
      "line": 599,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(material as any).color = new THREE.Color(override.colorOverride);",
      "context": {
        "before": [
          "        wireframe: true,",
          "      });",
          "    } else if (override.colorOverride) {"
        ],
        "after": [
          "    }",
          "",
          "    if (override.opacityOverride !== undefined) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:556:34",
      "file": "engine/layers/PoseLayer.ts",
      "line": 556,
      "column": 34,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "this.layerData.data = data as any;",
      "context": {
        "before": [
          "",
          "    if (newPoses.length > 0) {",
          "      data.poses = newPoses;"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:593:32",
      "file": "engine/layers/PoseLayer.ts",
      "line": 593,
      "column": 32,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "this.layerData.data = data as any;",
      "context": {
        "before": [
          "      }",
          "    }",
          ""
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:160:56",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 160,
      "column": 56,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "this.texture = new THREE.CanvasTexture(this.canvas as any);",
      "context": {
        "before": [
          "    this.ctx = this.canvas.getContext(\"2d\")!;",
          "",
          "    // Create texture"
        ],
        "after": [
          "    this.texture.colorSpace = THREE.SRGBColorSpace;",
          "    this.texture.minFilter = THREE.LinearFilter;",
          "    this.texture.magFilter = THREE.LinearFilter;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:211:38",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 211,
      "column": 38,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "this.texture.image = this.canvas as any;",
      "context": {
        "before": [
          "    this.ctx = this.canvas.getContext(\"2d\")!;",
          "",
          "    // Update texture"
        ],
        "after": [
          "    this.texture.needsUpdate = true;",
          "",
          "    // Update mesh geometry"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:282:30",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 282,
      "column": 30,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "onApplyEvaluatedState(state: any): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    // Shape-specific state could include animated shape properties",
          "    if (state.shapeData) {",
          "      this.shapeData = state.shapeData;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1609:33",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1609,
      "column": 33,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const value = (audioMod as any)[key];",
      "context": {
        "before": [
          "    const audioMod = this.currentAudioModifiers;",
          "    for (const key in audioMod) {",
          "      if (key.startsWith(\"splineControlPoint_\")) {"
        ],
        "after": [
          "        if (value !== undefined && value !== 0) {",
          "          return true;",
          "        }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1637:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1637,
      "column": 30,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const xMod = (audioMod as any)[`splineControlPoint_${index}_x`] as",
      "context": {
        "before": [
          "    // Apply modifiers to each control point",
          "    return points.map((point, index) => {",
          "      // Get audio modifiers for this control point index"
        ],
        "after": [
          "        | number",
          "        | undefined;",
          "      const yMod = (audioMod as any)[`splineControlPoint_${index}_y`] as"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1640:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1640,
      "column": 30,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const yMod = (audioMod as any)[`splineControlPoint_${index}_y`] as",
      "context": {
        "before": [
          "      const xMod = (audioMod as any)[`splineControlPoint_${index}_x`] as",
          "        | number",
          "        | undefined;"
        ],
        "after": [
          "        | number",
          "        | undefined;",
          "      const depthMod = (audioMod as any)[`splineControlPoint_${index}_depth`] as"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1643:34",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1643,
      "column": 34,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const depthMod = (audioMod as any)[`splineControlPoint_${index}_depth`] as",
      "context": {
        "before": [
          "      const yMod = (audioMod as any)[`splineControlPoint_${index}_y`] as",
          "        | number",
          "        | undefined;"
        ],
        "after": [
          "        | number",
          "        | undefined;",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:366:11",
      "file": "engine/layers/TextLayer.ts",
      "line": 366,
      "column": 11,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(text as any).fontWeight = this.textData.fontWeight || \"400\";",
      "context": {
        "before": [
          "    text.fontSize = this.textData.fontSize;",
          "",
          "    // Font weight and style (using type assertions - Troika supports these but types are incomplete)"
        ],
        "after": [
          "    (text as any).fontStyle = this.textData.fontStyle || \"normal\";",
          "",
          "    // Colors"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:367:11",
      "file": "engine/layers/TextLayer.ts",
      "line": 367,
      "column": 11,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(text as any).fontStyle = this.textData.fontStyle || \"normal\";",
      "context": {
        "before": [
          "",
          "    // Font weight and style (using type assertions - Troika supports these but types are incomplete)",
          "    (text as any).fontWeight = this.textData.fontWeight || \"400\";"
        ],
        "after": [
          "",
          "    // Colors",
          "    text.color = this.textData.fill;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:391:11",
      "file": "engine/layers/TextLayer.ts",
      "line": 391,
      "column": 11,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(text as any).sdfGlyphSize = 256; // Default is 64, higher = sharper text",
      "context": {
        "before": [
          "",
          "    // Improve text rendering quality - higher SDF glyph size for sharper edges",
          "    // Max useful value is around 256 (higher = better quality but more memory)"
        ],
        "after": [
          "",
          "    // GPU texture precision for better rendering",
          "    (text as any).gpuAccelerateSDF = true;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:394:11",
      "file": "engine/layers/TextLayer.ts",
      "line": 394,
      "column": 11,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(text as any).gpuAccelerateSDF = true;",
      "context": {
        "before": [
          "    (text as any).sdfGlyphSize = 256; // Default is 64, higher = sharper text",
          "",
          "    // GPU texture precision for better rendering"
        ],
        "after": [
          "",
          "    // Enable smooth outline edges",
          "    if (this.textData.strokeWidth > 0) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:398:13",
      "file": "engine/layers/TextLayer.ts",
      "line": 398,
      "column": 13,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(text as any).outlineBlur = 0.003; // Slight blur for smoother outline edges",
      "context": {
        "before": [
          "",
          "    // Enable smooth outline edges",
          "    if (this.textData.strokeWidth > 0) {"
        ],
        "after": [
          "    }",
          "",
          "    // Trigger initial sync"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:708:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 708,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).fontWeight = this.textData.fontWeight || \"400\";",
      "context": {
        "before": [
          "      charMesh.text = char;",
          "      charMesh.font = this.getFontUrl(this.textData.fontFamily) ?? null;",
          "      charMesh.fontSize = this.textData.fontSize;"
        ],
        "after": [
          "      (charMesh as any).fontStyle = this.textData.fontStyle || \"normal\";",
          "      charMesh.color = this.textData.fill;",
          "      charMesh.anchorX = \"center\";"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:709:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 709,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).fontStyle = this.textData.fontStyle || \"normal\";",
      "context": {
        "before": [
          "      charMesh.font = this.getFontUrl(this.textData.fontFamily) ?? null;",
          "      charMesh.fontSize = this.textData.fontSize;",
          "      (charMesh as any).fontWeight = this.textData.fontWeight || \"400\";"
        ],
        "after": [
          "      charMesh.color = this.textData.fill;",
          "      charMesh.anchorX = \"center\";",
          "      charMesh.anchorY = \"middle\";"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:718:19",
      "file": "engine/layers/TextLayer.ts",
      "line": 718,
      "column": 19,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).outlineBlur = 0.005;",
      "context": {
        "before": [
          "        charMesh.outlineWidth =",
          "          this.textData.strokeWidth / this.textData.fontSize;",
          "        charMesh.outlineColor = this.textData.stroke;"
        ],
        "after": [
          "      }",
          "",
          "      // Quality settings for character mesh"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:722:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 722,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).sdfGlyphSize = 128;",
      "context": {
        "before": [
          "      }",
          "",
          "      // Quality settings for character mesh"
        ],
        "after": [
          "",
          "      // Position character (for horizontal layout)",
          "      const charWidth = this.characterWidths[i];"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:820:20",
      "file": "engine/layers/TextLayer.ts",
      "line": 820,
      "column": 20,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.textMesh as any).fontWeight = weight;",
      "context": {
        "before": [
          "",
          "  setFontWeight(weight: string): void {",
          "    this.textData.fontWeight = weight;"
        ],
        "after": [
          "    this.textMesh.sync();",
          "",
          "    for (const charMesh of this.characterMeshes) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:824:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 824,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).fontWeight = weight;",
      "context": {
        "before": [
          "    this.textMesh.sync();",
          "",
          "    for (const charMesh of this.characterMeshes) {"
        ],
        "after": [
          "      charMesh.sync();",
          "    }",
          "  }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:831:20",
      "file": "engine/layers/TextLayer.ts",
      "line": 831,
      "column": 20,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.textMesh as any).fontStyle = style;",
      "context": {
        "before": [
          "",
          "  setFontStyle(style: string): void {",
          "    this.textData.fontStyle = style as \"normal\" | \"italic\";"
        ],
        "after": [
          "    this.textMesh.sync();",
          "",
          "    for (const charMesh of this.characterMeshes) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:835:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 835,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).fontStyle = style;",
      "context": {
        "before": [
          "    this.textMesh.sync();",
          "",
          "    for (const charMesh of this.characterMeshes) {"
        ],
        "after": [
          "      charMesh.sync();",
          "    }",
          "  }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1331:21",
      "file": "engine/layers/TextLayer.ts",
      "line": 1331,
      "column": 21,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).__blurX = blurVal.x * influence;",
      "context": {
        "before": [
          "          // Blur requires special handling - Troika doesn't support per-character blur",
          "          // Store blur value for potential post-processing",
          "          const blurVal = this.getAnimatorPropertyValue(props.blur, frame);"
        ],
        "after": [
          "          (charMesh as any).__blurY = blurVal.y * influence;",
          "        }",
          "      }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1332:21",
      "file": "engine/layers/TextLayer.ts",
      "line": 1332,
      "column": 21,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(charMesh as any).__blurY = blurVal.y * influence;",
      "context": {
        "before": [
          "          // Store blur value for potential post-processing",
          "          const blurVal = this.getAnimatorPropertyValue(props.blur, frame);",
          "          (charMesh as any).__blurX = blurVal.x * influence;"
        ],
        "after": [
          "        }",
          "      }",
          "    }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:343:44",
      "file": "engine/layers/VideoLayer.ts",
      "line": 343,
      "column": 44,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const audioTracks = (this.videoElement as any).audioTracks;",
      "context": {
        "before": [
          "    if (!this.videoElement) return false;",
          "",
          "    // Check for audio tracks (if available)"
        ],
        "after": [
          "    if (audioTracks) {",
          "      return audioTracks.length > 0;",
          "    }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:1105:14",
      "file": "engine/layers/VideoLayer.ts",
      "line": 1105,
      "column": 14,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(video as any).requestVideoFrameCallback(onFrame);",
      "context": {
        "before": [
          "        return;",
          "      }",
          ""
        ],
        "after": [
          "    };",
          "",
          "    video"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:1111:16",
      "file": "engine/layers/VideoLayer.ts",
      "line": 1111,
      "column": 16,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(video as any).requestVideoFrameCallback(onFrame);",
      "context": {
        "before": [
          "    video",
          "      .play()",
          "      .then(() => {"
        ],
        "after": [
          "      })",
          "      .catch(() => {",
          "        clearTimeout(timeoutId);"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1895:18",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1895,
      "column": 18,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "type: type as any,",
      "context": {
        "before": [
          "",
          "  private emit(type: string, data: Record<string, unknown>): void {",
          "    const event: ParticleEvent = {"
        ],
        "after": [
          "      timestamp: performance.now(),",
          "      data,",
          "    };"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:63:14",
      "file": "engine/TransformControlsManager.ts",
      "line": 63,
      "column": 14,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if ((obj as any).children === undefined || (obj as any).children === null) {",
      "context": {
        "before": [
          "    if (!obj || depth > 50) return;",
          "",
          "    // Ensure children is an array"
        ],
        "after": [
          "      (obj as any).children = [];",
          "    }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:63:53",
      "file": "engine/TransformControlsManager.ts",
      "line": 63,
      "column": 53,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if ((obj as any).children === undefined || (obj as any).children === null) {",
      "context": {
        "before": [
          "    if (!obj || depth > 50) return;",
          "",
          "    // Ensure children is an array"
        ],
        "after": [
          "      (obj as any).children = [];",
          "    }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:64:12",
      "file": "engine/TransformControlsManager.ts",
      "line": 64,
      "column": 12,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(obj as any).children = [];",
      "context": {
        "before": [
          "",
          "    // Ensure children is an array",
          "    if ((obj as any).children === undefined || (obj as any).children === null) {"
        ],
        "after": [
          "    }",
          "",
          "    // Ensure matrix properties exist"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:68:15",
      "file": "engine/TransformControlsManager.ts",
      "line": 68,
      "column": 15,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if (!(obj as any).matrix) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Ensure matrix properties exist"
        ],
        "after": [
          "      (obj as any).matrix = new THREE.Matrix4();",
          "    }",
          "    if (!(obj as any).matrixWorld) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:69:12",
      "file": "engine/TransformControlsManager.ts",
      "line": 69,
      "column": 12,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(obj as any).matrix = new THREE.Matrix4();",
      "context": {
        "before": [
          "",
          "    // Ensure matrix properties exist",
          "    if (!(obj as any).matrix) {"
        ],
        "after": [
          "    }",
          "    if (!(obj as any).matrixWorld) {",
          "      (obj as any).matrixWorld = new THREE.Matrix4();"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:71:15",
      "file": "engine/TransformControlsManager.ts",
      "line": 71,
      "column": 15,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if (!(obj as any).matrixWorld) {",
      "context": {
        "before": [
          "    if (!(obj as any).matrix) {",
          "      (obj as any).matrix = new THREE.Matrix4();",
          "    }"
        ],
        "after": [
          "      (obj as any).matrixWorld = new THREE.Matrix4();",
          "    }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:72:12",
      "file": "engine/TransformControlsManager.ts",
      "line": 72,
      "column": 12,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(obj as any).matrixWorld = new THREE.Matrix4();",
      "context": {
        "before": [
          "      (obj as any).matrix = new THREE.Matrix4();",
          "    }",
          "    if (!(obj as any).matrixWorld) {"
        ],
        "after": [
          "    }",
          "",
          "    // Recursively process children"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:76:27",
      "file": "engine/TransformControlsManager.ts",
      "line": 76,
      "column": 27,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const children = (obj as any).children;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Recursively process children"
        ],
        "after": [
          "    if (Array.isArray(children)) {",
          "      for (const child of children) {",
          "        this.ensureObjectChildren(child, depth + 1);"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:126:13",
      "file": "engine/TransformControlsManager.ts",
      "line": 126,
      "column": 13,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "(event: any) => {",
      "context": {
        "before": [
          "    // Disable orbit/pan during transform and track dragging state",
          "    this.transformControls.addEventListener(",
          "      \"dragging-changed\","
        ],
        "after": [
          "        isDragging = event.value;",
          "        this.deps.emit(\"transform-dragging\", { dragging: event.value });",
          "      },"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:146:65",
      "file": "engine/TransformControlsManager.ts",
      "line": 146,
      "column": 65,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
      "context": {
        "before": [
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;"
        ],
        "after": [
          "",
          "      // Convert 3D position back to layer position by adding anchor point back",
          "      // The 3D object position is offset by anchor point in applyTransform()"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:274:31",
      "file": "engine/TransformControlsManager.ts",
      "line": 274,
      "column": 31,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(this.transformControls as any).visible = visible;",
      "context": {
        "before": [
          "   */",
          "  setVisible(visible: boolean): void {",
          "    if (this.transformControls) {"
        ],
        "after": [
          "      this.transformControls.enabled = visible;",
          "    }",
          "  }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/utils/PerformanceMonitor.ts:82:33",
      "file": "engine/utils/PerformanceMonitor.ts",
      "line": 82,
      "column": 33,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const memory = (performance as any).memory;",
      "context": {
        "before": [
          "    const info = renderer.info;",
          "",
          "    // Get memory usage (Chrome only)"
        ],
        "after": [
          "    const memoryUsed = memory?.usedJSHeapSize ?? 0;",
          "",
          "    // Calculate average frame time"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1866:11",
      "file": "services/ai/actionExecutor.ts",
      "line": 1866,
      "column": 11,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): { state: any; message: string } {",
      "context": {
        "before": [
          "function executeGetProjectState(",
          "  context: ExecutionContext,",
          "  _args: Record<string, any>,"
        ],
        "after": [
          "  const { store } = context;",
          "  const comp = store.getActiveComp();",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1902:31",
      "file": "services/ai/actionExecutor.ts",
      "line": 1902,
      "column": 31,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "function setNestedProperty(obj: any, path: string[], value: any): void {",
      "context": {
        "before": [
          "/**",
          " * Set a nested property value using dot notation path",
          " */"
        ],
        "after": [
          "  let current = obj;",
          "  for (let i = 0; i < path.length - 1; i++) {",
          "    if (!(path[i] in current)) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1902:59",
      "file": "services/ai/actionExecutor.ts",
      "line": 1902,
      "column": 59,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "function setNestedProperty(obj: any, path: string[], value: any): void {",
      "context": {
        "before": [
          "/**",
          " * Set a nested property value using dot notation path",
          " */"
        ],
        "after": [
          "  let current = obj;",
          "  for (let i = 0; i < path.length - 1; i++) {",
          "    if (!(path[i] in current)) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:312:49",
      "file": "services/ai/depthEstimation.ts",
      "line": 312,
      "column": 49,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "layers: (parsed.layers || []).map((layer: any) => ({",
      "context": {
        "before": [
          "",
          "      return {",
          "        sceneDescription: parsed.sceneDescription || \"Scene analyzed\","
        ],
        "after": [
          "          index: layer.index ?? 0,",
          "          depth: Math.max(0, Math.min(100, layer.depth ?? 50)),",
          "          content: layer.content || \"Unknown\","
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:166:8",
      "file": "services/ai/stateSerializer.ts",
      "line": 166,
      "column": 8,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "value: any;",
      "context": {
        "before": [
          "}",
          "",
          "export interface SerializedAnimatableProperty {"
        ],
        "after": [
          "  animated: boolean;",
          "  keyframeCount?: number;",
          "  keyframes?: SerializedKeyframe[];"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:174:8",
      "file": "services/ai/stateSerializer.ts",
      "line": 174,
      "column": 8,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "value: any;",
      "context": {
        "before": [
          "",
          "export interface SerializedKeyframe {",
          "  frame: number;"
        ],
        "after": [
          "  interpolation: string;",
          "}",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:526:47",
      "file": "services/ai/stateSerializer.ts",
      "line": 526,
      "column": 47,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "function serializeLayerData(type: string, data: any): Record<string, any> {",
      "context": {
        "before": [
          "  };",
          "}",
          ""
        ],
        "after": [
          "  // Return a summarized version of layer-specific data",
          "  // SECURITY: Sanitize all user-controlled string fields",
          "  switch (type) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/ai/toolDefinitions.ts:21:10",
      "file": "services/ai/toolDefinitions.ts",
      "line": 21,
      "column": 10,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "result?: any;",
      "context": {
        "before": [
          "export interface ToolResult {",
          "  toolCallId: string;",
          "  success: boolean;"
        ],
        "after": [
          "  error?: string;",
          "}",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:330:15",
      "file": "services/arcLength.ts",
      "line": 330,
      "column": 15,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "pathCommands: any[],",
      "context": {
        "before": [
          " * Converts SVG-style path commands to a Three.js curve",
          " */",
          "export function pathCommandsToBezier("
        ],
        "after": [
          "): THREE.CubicBezierCurve3 | null {",
          "  if (!pathCommands || pathCommands.length < 2) {",
          "    return null;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:1137:18",
      "file": "services/audioReactiveMapping.ts",
      "line": 1137,
      "column": 18,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "(modifiers as any)[key] = value;",
      "context": {
        "before": [
          "      const prop = splineMatch[2] as \"x\" | \"y\" | \"depth\";",
          "      const key =",
          "        `splineControlPoint_${index}_${prop}` as keyof AudioReactiveModifiers;"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:450:62",
      "file": "services/cameraTrackingImport.ts",
      "line": 450,
      "column": 62,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const cameraLayer = layerStore.createCameraLayer(store as any);",
      "context": {
        "before": [
          "      });",
          "",
          "      // Create camera layer"
        ],
        "after": [
          "      cameraLayer.name = `Tracked Camera (${solve.source})`;",
          "",
          "      if (cameraLayer) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:463:52",
      "file": "services/cameraTrackingImport.ts",
      "line": 463,
      "column": 52,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "positionProp.keyframes = positionKeyframes as any; // keyframes match the value type",
      "context": {
        "before": [
          "          \"Transform\",",
          "        );",
          "        positionProp.animated = true;"
        ],
        "after": [
          "",
          "        // Use orientation for 3D rotation (vector3), rotation is for 2D (number)",
          "        const orientationProp = createAnimatableProperty("
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:473:55",
      "file": "services/cameraTrackingImport.ts",
      "line": 473,
      "column": 55,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "orientationProp.keyframes = rotationKeyframes as any;",
      "context": {
        "before": [
          "          \"Transform\",",
          "        );",
          "        orientationProp.animated = true;"
        ],
        "after": [
          "",
          "        // Update the camera layer with camera-specific data and transform",
          "        layerStore.updateLayer(store, cameraLayer.id, {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:480:36",
      "file": "services/cameraTrackingImport.ts",
      "line": 480,
      "column": 36,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "position: positionProp as any, // Cast needed due to z optional mismatch",
      "context": {
        "before": [
          "          threeD: true,",
          "          transform: {",
          "            ...cameraLayer.transform,"
        ],
        "after": [
          "            orientation: orientationProp,",
          "          },",
          "        });"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:524:17",
      "file": "services/cameraTrackingImport.ts",
      "line": 524,
      "column": 17,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": ") as any,",
      "context": {
        "before": [
          "                pos,",
          "                \"position\",",
          "                \"Transform\","
        ],
        "after": [
          "            },",
          "          });",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:580:13",
      "file": "services/cameraTrackingImport.ts",
      "line": 580,
      "column": 13,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "} as any,",
      "context": {
        "before": [
          "            colors: new Float32Array(colors),",
          "            pointSize,",
          "            format: \"xyz_rgb\","
        ],
        "after": [
          "        });",
          "        result.pointCloudLayerId = pointCloudLayer.id;",
          "      }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:64:45",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 64,
      "column": 45,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "private messageHandlers: Map<string, (data: any) => void> = new Map();",
      "context": {
        "before": [
          "  private serverAddress: string;",
          "  private clientId: string;",
          "  private ws: WebSocket | null = null;"
        ],
        "after": [
          "",
          "  constructor(config: ComfyUIClientConfig) {",
          "    this.serverAddress = config.serverAddress.replace(/\\/$/, \"\");"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:414:41",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 414,
      "column": 41,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "onMessage(type: string, handler: (data: any) => void): void {",
      "context": {
        "before": [
          "  /**",
          "   * Register a message handler for a specific message type",
          "   */"
        ],
        "after": [
          "    this.messageHandlers.set(type, handler);",
          "  }",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:425:38",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 425,
      "column": 38,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "private handleWebSocketMessage(data: any): void {",
      "context": {
        "before": [
          "    this.messageHandlers.delete(type);",
          "  }",
          ""
        ],
        "after": [
          "    const { type } = data;",
          "",
          "    // Call registered handler"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:32:14",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 32,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "cameraData?: any;",
      "context": {
        "before": [
          "  controlImages?: string[];",
          "",
          "  // Camera data"
        ],
        "after": [
          "",
          "  // Generation settings",
          "  prompt: string;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:59:14",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 59,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "motionData?: any;",
      "context": {
        "before": [
          "",
          "  // Uni3C specific",
          "  trajType?: Uni3CTrajType;"
        ],
        "after": [
          "",
          "  // MotionCtrl specific",
          "  motionPreset?: MotionCtrlSVDPreset;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:485:2",
      "file": "services/dataImport.ts",
      "line": 485,
      "column": 2,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): any[] | null {",
      "context": {
        "before": [
          "export function extractArrayFromJSON(",
          "  asset: JSONDataAsset,",
          "  path: string,"
        ],
        "after": [
          "  const parts = path.split(\".\");",
          "  let current = asset.sourceData;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:502:65",
      "file": "services/dataImport.ts",
      "line": 502,
      "column": 65,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function getJSONValue(asset: JSONDataAsset, path: string): any {",
      "context": {
        "before": [
          "/**",
          " * Get value from JSON data at path",
          " */"
        ],
        "after": [
          "  const parts = path.split(\".\");",
          "  let current = asset.sourceData;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:291:16",
      "file": "services/effectProcessor.ts",
      "line": 291,
      "column": 16,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "[key: string]: any;",
      "context": {
        "before": [
          " * All animatable values resolved to their concrete values",
          " */",
          "export interface EvaluatedEffectParams {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:224:29",
      "file": "services/export/depthRenderer.ts",
      "line": 224,
      "column": 29,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const layerWidth = (layer as any).width || screenWidth;",
      "context": {
        "before": [
          "  }",
          "",
          "  // Get layer dimensions (assuming they're stored or can be derived)"
        ],
        "after": [
          "  const layerHeight = (layer as any).height || screenHeight;",
          "",
          "  // Get scale from transform"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:225:30",
      "file": "services/export/depthRenderer.ts",
      "line": 225,
      "column": 30,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const layerHeight = (layer as any).height || screenHeight;",
      "context": {
        "before": [
          "",
          "  // Get layer dimensions (assuming they're stored or can be derived)",
          "  const layerWidth = (layer as any).width || screenWidth;"
        ],
        "after": [
          "",
          "  // Get scale from transform",
          "  let scaleX = 1,"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:285:49",
      "file": "services/export/depthRenderer.ts",
      "line": 285,
      "column": 49,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "return layer.type === \"depthflow\" && !!(layer as any).depthMapData;",
      "context": {
        "before": [
          " * Check if layer has depth data (depthflow layers)",
          " */",
          "function hasDepthData(layer: Layer): boolean {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:300:28",
      "file": "services/export/depthRenderer.ts",
      "line": 300,
      "column": 28,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const depthData = (layer as any).depthMapData as Uint8Array | Float32Array;",
      "context": {
        "before": [
          "  nearClip: number,",
          "  farClip: number,",
          "): void {"
        ],
        "after": [
          "  const depthWidth = (layer as any).depthWidth || bounds.width;",
          "  const depthHeight = (layer as any).depthHeight || bounds.height;",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:301:29",
      "file": "services/export/depthRenderer.ts",
      "line": 301,
      "column": 29,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const depthWidth = (layer as any).depthWidth || bounds.width;",
      "context": {
        "before": [
          "  farClip: number,",
          "): void {",
          "  const depthData = (layer as any).depthMapData as Uint8Array | Float32Array;"
        ],
        "after": [
          "  const depthHeight = (layer as any).depthHeight || bounds.height;",
          "",
          "  for (let y = 0; y < bounds.height; y++) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:302:30",
      "file": "services/export/depthRenderer.ts",
      "line": 302,
      "column": 30,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const depthHeight = (layer as any).depthHeight || bounds.height;",
      "context": {
        "before": [
          "): void {",
          "  const depthData = (layer as any).depthMapData as Uint8Array | Float32Array;",
          "  const depthWidth = (layer as any).depthWidth || bounds.width;"
        ],
        "after": [
          "",
          "  for (let y = 0; y < bounds.height; y++) {",
          "    for (let x = 0; x < bounds.width; x++) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:360:26",
      "file": "services/export/depthRenderer.ts",
      "line": 360,
      "column": 26,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const engine = (window as any).__latticeEngine;",
      "context": {
        "before": [
          "  farClip: number,",
          "): void {",
          "  // Access the engine's particle layer to get active particles"
        ],
        "after": [
          "  if (!engine) return;",
          "",
          "  // Get the particle layer from the engine"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:449:12",
      "file": "services/export/depthRenderer.ts",
      "line": 449,
      "column": 12,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "keyframes: any[],",
      "context": {
        "before": [
          " * Interpolate value from keyframes",
          " */",
          "function interpolateValue("
        ],
        "after": [
          "  frame: number,",
          "  index?: number,",
          "): number | null {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:348:42",
      "file": "services/export/exportPipeline.ts",
      "line": 348,
      "column": 42,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": ": ((evaluated.transform.rotation as any)?.z ?? 0);",
      "context": {
        "before": [
          "    const rotation =",
          "      typeof evaluated.transform.rotation === \"number\"",
          "        ? evaluated.transform.rotation"
        ],
        "after": [
          "    const opacity = evaluated.opacity;",
          "",
          "    ctx.save();"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:360:34",
      "file": "services/export/exportPipeline.ts",
      "line": 360,
      "column": 34,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const layerData = layer.data as any;",
      "context": {
        "before": [
          "    ctx.scale(scaleVal.x / 100, scaleVal.y / 100);",
          "",
          "    // Draw layer content"
        ],
        "after": [
          "    if (layer.type === \"image\" && layerData?.src) {",
          "      // Create image from content URL",
          "      const img = await this.loadImage(layerData.src);"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/fontService.ts:122:35",
      "file": "services/fontService.ts",
      "line": 122,
      "column": 35,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const fonts = await (window as any).queryLocalFonts();",
      "context": {
        "before": [
          "  private async loadSystemFonts(): Promise<void> {",
          "    try {",
          "      // This will prompt for permission"
        ],
        "after": [
          "",
          "      // Group by family, keep one entry per family",
          "      const familyMap = new Map<string, FontInfo>();"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/gpuDetection.ts:48:33",
      "file": "services/gpuDetection.ts",
      "line": 48,
      "column": 33,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const info = (adapter as any).info;",
      "context": {
        "before": [
          "        let deviceName = \"\";",
          "        if (\"info\" in adapter) {",
          "          // Newer API"
        ],
        "after": [
          "          deviceName = info?.device || info?.description || \"\";",
          "        }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:596:37",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 596,
      "column": 37,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const renderer = webgpuRenderer as any;",
      "context": {
        "before": [
          "    params: Record<string, any>,",
          "    methodName: string,",
          "  ): Promise<ImageData> {"
        ],
        "after": [
          "",
          "    if (typeof renderer[methodName] !== \"function\") {",
          "      throw new Error(`WebGPU method ${methodName} not found`);"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:643:4",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 643,
      "column": 4,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): any {",
      "context": {
        "before": [
          "  private mapParamsToWebGPU(",
          "    effectKey: string,",
          "    params: Record<string, any>,"
        ],
        "after": [
          "    switch (effectKey) {",
          "      case \"gaussian-blur\":",
          "      case \"box-blur\":"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/jsonValidation.ts:35:7",
      "file": "services/jsonValidation.ts",
      "line": 35,
      "column": 7,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "data: any,",
      "context": {
        "before": [
          " * Safely stringify JSON with circular reference handling",
          " */",
          "export function safeJSONStringify("
        ],
        "after": [
          "  indent: number = 2,",
          "): { success: true; json: string } | { success: false; error: string } {",
          "  try {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:377:52",
      "file": "services/matteExporter.ts",
      "line": 377,
      "column": 52,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "private buildPathCommands(splineData: SplineData): any[] | null {",
      "context": {
        "before": [
          "  /**",
          "   * Build path commands from spline control points",
          "   */"
        ],
        "after": [
          "    const cp = splineData.controlPoints;",
          "    if (!cp || cp.length < 2) return null;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:381:23",
      "file": "services/matteExporter.ts",
      "line": 381,
      "column": 23,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const pathCommands: any[] = [];",
      "context": {
        "before": [
          "    const cp = splineData.controlPoints;",
          "    if (!cp || cp.length < 2) return null;",
          ""
        ],
        "after": [
          "",
          "    // Move to first point",
          "    pathCommands.push([\"M\", cp[0].x, cp[0].y]);"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:572:43",
      "file": "services/modelExport.ts",
      "line": 572,
      "column": 43,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if (cameras.length < 2) return \"static\" as any;",
      "context": {
        "before": [
          " * Detect motion style from camera animation",
          " */",
          "export function detectMotionStyle(cameras: Camera3D[]): LightXMotionStyle {"
        ],
        "after": [
          "",
          "  const first = cameras[0];",
          "  const last = cameras[cameras.length - 1];"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:660:7",
      "file": "services/modelExport.ts",
      "line": 660,
      "column": 7,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "data: any;",
      "context": {
        "before": [
          "export interface UnifiedExportResult {",
          "  success: boolean;",
          "  target: ModelTarget;"
        ],
        "after": [
          "  files: {",
          "    name: string;",
          "    content: string | Blob;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1344:11",
      "file": "services/particleSystem.ts",
      "line": 1344,
      "column": 11,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "config: any,",
      "context": {
        "before": [
          "   * Sample valid emission points from a depth map",
          "   */",
          "  private sampleDepthMapEmissionPoints("
        ],
        "after": [
          "  ): Array<{ x: number; y: number; depth: number }> {",
          "    const points: Array<{ x: number; y: number; depth: number }> = [];",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1443:11",
      "file": "services/particleSystem.ts",
      "line": 1443,
      "column": 11,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "config: any,",
      "context": {
        "before": [
          "   * Sample valid emission points from a mask",
          "   */",
          "  private sampleMaskEmissionPoints("
        ],
        "after": [
          "  ): Array<{ x: number; y: number }> {",
          "    const points: Array<{ x: number; y: number }> = [];",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2239:26",
      "file": "services/particleSystem.ts",
      "line": 2239,
      "column": 26,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "static deserialize(data: any): ParticleSystem {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    const system = new ParticleSystem(data.config);",
          "",
          "    if (data.emitters) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/pathMorphing.ts:767:25",
      "file": "services/pathMorphing.ts",
      "line": 767,
      "column": 25,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if (typeof (v.point as any)?.x !== \"number\") return false;",
      "context": {
        "before": [
          "  if (obj.vertices.length > 0) {",
          "    const v = obj.vertices[0] as Record<string, unknown>;",
          "    if (typeof v !== \"object\" || v === null) return false;"
        ],
        "after": [
          "    if (typeof (v.point as any)?.y !== \"number\") return false;",
          "  }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/pathMorphing.ts:768:25",
      "file": "services/pathMorphing.ts",
      "line": 768,
      "column": 25,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "if (typeof (v.point as any)?.y !== \"number\") return false;",
      "context": {
        "before": [
          "    const v = obj.vertices[0] as Record<string, unknown>;",
          "    if (typeof v !== \"object\" || v === null) return false;",
          "    if (typeof (v.point as any)?.x !== \"number\") return false;"
        ],
        "after": [
          "  }",
          "",
          "  return true;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:59:15",
      "file": "services/plugins/PluginManager.ts",
      "line": 59,
      "column": 15,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "getProject(): any;",
      "context": {
        "before": [
          "",
          "export interface LatticePluginAPI {",
          "  // Read-only project access"
        ],
        "after": [
          "  getCurrentFrame(): number;",
          "  getSelectedLayers(): string[];",
          "  getLayer(id: string): any;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:62:23",
      "file": "services/plugins/PluginManager.ts",
      "line": 62,
      "column": 23,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "getLayer(id: string): any;",
      "context": {
        "before": [
          "  getProject(): any;",
          "  getCurrentFrame(): number;",
          "  getSelectedLayers(): string[];"
        ],
        "after": [
          "  getComposition(id: string): any;",
          "  getAsset(id: string): any;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:63:29",
      "file": "services/plugins/PluginManager.ts",
      "line": 63,
      "column": 29,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "getComposition(id: string): any;",
      "context": {
        "before": [
          "  getCurrentFrame(): number;",
          "  getSelectedLayers(): string[];",
          "  getLayer(id: string): any;"
        ],
        "after": [
          "  getAsset(id: string): any;",
          "",
          "  // Events"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:64:23",
      "file": "services/plugins/PluginManager.ts",
      "line": 64,
      "column": 23,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "getAsset(id: string): any;",
      "context": {
        "before": [
          "  getSelectedLayers(): string[];",
          "  getLayer(id: string): any;",
          "  getComposition(id: string): any;"
        ],
        "after": [
          "",
          "  // Events",
          "  on(event: PluginEvent, callback: (...args: any[]) => void): () => void;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:67:44",
      "file": "services/plugins/PluginManager.ts",
      "line": 67,
      "column": 44,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "on(event: PluginEvent, callback: (...args: any[]) => void): () => void;",
      "context": {
        "before": [
          "  getAsset(id: string): any;",
          "",
          "  // Events"
        ],
        "after": [
          "  off(event: PluginEvent, callback: (...args: any[]) => void): void;",
          "",
          "  // UI registration"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:68:45",
      "file": "services/plugins/PluginManager.ts",
      "line": 68,
      "column": 45,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "off(event: PluginEvent, callback: (...args: any[]) => void): void;",
      "context": {
        "before": [
          "",
          "  // Events",
          "  on(event: PluginEvent, callback: (...args: any[]) => void): () => void;"
        ],
        "after": [
          "",
          "  // UI registration",
          "  registerPanel(panel: PanelDefinition): void;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:92:18",
      "file": "services/plugins/PluginManager.ts",
      "line": 92,
      "column": 18,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "debug(...args: any[]): void;",
      "context": {
        "before": [
          "",
          "  // Logging",
          "  log: {"
        ],
        "after": [
          "    info(...args: any[]): void;",
          "    warn(...args: any[]): void;",
          "    error(...args: any[]): void;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:93:17",
      "file": "services/plugins/PluginManager.ts",
      "line": 93,
      "column": 17,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "info(...args: any[]): void;",
      "context": {
        "before": [
          "  // Logging",
          "  log: {",
          "    debug(...args: any[]): void;"
        ],
        "after": [
          "    warn(...args: any[]): void;",
          "    error(...args: any[]): void;",
          "  };"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:94:17",
      "file": "services/plugins/PluginManager.ts",
      "line": 94,
      "column": 17,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "warn(...args: any[]): void;",
      "context": {
        "before": [
          "  log: {",
          "    debug(...args: any[]): void;",
          "    info(...args: any[]): void;"
        ],
        "after": [
          "    error(...args: any[]): void;",
          "  };",
          "}"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:95:18",
      "file": "services/plugins/PluginManager.ts",
      "line": 95,
      "column": 18,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "error(...args: any[]): void;",
      "context": {
        "before": [
          "    debug(...args: any[]): void;",
          "    info(...args: any[]): void;",
          "    warn(...args: any[]): void;"
        ],
        "after": [
          "  };",
          "}",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:111:12",
      "file": "services/plugins/PluginManager.ts",
      "line": 111,
      "column": 12,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "component: any; // Vue component",
      "context": {
        "before": [
          "  id: string;",
          "  name: string;",
          "  icon?: string;"
        ],
        "after": [
          "  position?: \"left\" | \"right\" | \"bottom\";",
          "}",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:130:23",
      "file": "services/plugins/PluginManager.ts",
      "line": 130,
      "column": 23,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "action: (contextData: any) => void;",
      "context": {
        "before": [
          "  label: string;",
          "  icon?: string;",
          "  context: \"layer\" | \"keyframe\" | \"composition\" | \"asset\";"
        ],
        "after": [
          "}",
          "",
          "export interface EffectDefinition {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:149:15",
      "file": "services/plugins/PluginManager.ts",
      "line": 149,
      "column": 15,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "defaultValue: any;",
      "context": {
        "before": [
          "  id: string;",
          "  name: string;",
          "  type: \"number\" | \"color\" | \"point\" | \"angle\" | \"dropdown\" | \"checkbox\";"
        ],
        "after": [
          "  min?: number;",
          "  max?: number;",
          "  step?: number;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:153:35",
      "file": "services/plugins/PluginManager.ts",
      "line": 153,
      "column": 35,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "options?: { label: string; value: any }[];",
      "context": {
        "before": [
          "  min?: number;",
          "  max?: number;",
          "  step?: number;"
        ],
        "after": [
          "}",
          "",
          "export interface ExporterDefinition {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:161:40",
      "file": "services/plugins/PluginManager.ts",
      "line": 161,
      "column": 40,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export: (frames: ImageData[], options: any) => Promise<Blob>;",
      "context": {
        "before": [
          "  name: string;",
          "  extension: string;",
          "  mimeType: string;"
        ],
        "after": [
          "}",
          "",
          "export interface ToolDefinition {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:483:35",
      "file": "services/plugins/PluginManager.ts",
      "line": 483,
      "column": 35,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "emit(event: PluginEvent, ...args: any[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Emit an event to all plugins",
          "   */"
        ],
        "after": [
          "    const listeners = this.eventListeners.get(event);",
          "    if (!listeners) return;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/preprocessorService.ts:44:10",
      "file": "services/preprocessorService.ts",
      "line": 44,
      "column": 10,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "default: any;",
      "context": {
        "before": [
          "",
          "export interface PreprocessorInput {",
          "  type: \"combo\" | \"int\" | \"float\" | \"bool\" | \"string\";"
        ],
        "after": [
          "  min?: number;",
          "  max?: number;",
          "  step?: number;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/preprocessorService.ts:743:28",
      "file": "services/preprocessorService.ts",
      "line": 743,
      "column": 28,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const engine = (window as any).__latticeEngine;",
      "context": {
        "before": [
          "): Promise<string | null> {",
          "  try {",
          "    // Get the canvas from the engine"
        ],
        "after": [
          "    if (!engine) {",
          "      console.error(\"[PreprocessorService] Engine not available\");",
          "      return null;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:33:16",
      "file": "services/projectMigration.ts",
      "line": 33,
      "column": 16,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "[key: string]: any;",
      "context": {
        "before": [
          "  /** Project file format version (semantic) */",
          "  version: string;",
          "  /** Rest of project data */"
        ],
        "after": [
          "}",
          "",
          "export interface MigrationResult {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:53:41",
      "file": "services/projectMigration.ts",
      "line": 53,
      "column": 41,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export type MigrationFunction = (project: any) => any;",
      "context": {
        "before": [
          "  changes: string[];",
          "}",
          ""
        ],
        "after": [
          "",
          "export interface Migration {",
          "  /** Source version */"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:76:22",
      "file": "services/projectMigration.ts",
      "line": 76,
      "column": 22,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "migrate: (project: any) => {",
      "context": {
        "before": [
          "    from: 1,",
          "    to: 2,",
          "    description: \"Rename anchorPoint to origin, update trade dress terminology\","
        ],
        "after": [
          "      const migrated = JSON.parse(JSON.stringify(project));",
          "",
          "      // Migrate compositions"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:141:42",
      "file": "services/projectMigration.ts",
      "line": 141,
      "column": 42,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function getProjectVersion(project: any): number {",
      "context": {
        "before": [
          "/**",
          " * Get the schema version from a project",
          " */"
        ],
        "after": [
          "  if (typeof project?.schemaVersion === \"number\") {",
          "    return project.schemaVersion;",
          "  }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:153:39",
      "file": "services/projectMigration.ts",
      "line": 153,
      "column": 39,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function needsMigration(project: any): boolean {",
      "context": {
        "before": [
          "/**",
          " * Check if a project needs migration",
          " */"
        ],
        "after": [
          "  const version = getProjectVersion(project);",
          "  return version < CURRENT_SCHEMA_VERSION;",
          "}"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:180:39",
      "file": "services/projectMigration.ts",
      "line": 180,
      "column": 39,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function migrateProject(project: any): MigrationResult {",
      "context": {
        "before": [
          "/**",
          " * Migrate a project to the current schema version",
          " */"
        ],
        "after": [
          "  const fromVersion = getProjectVersion(project);",
          "  const toVersion = CURRENT_SCHEMA_VERSION;",
          "  const warnings: string[] = [];"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:268:44",
      "file": "services/projectMigration.ts",
      "line": 268,
      "column": 44,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function stampProjectVersion(project: any): any {",
      "context": {
        "before": [
          "/**",
          " * Stamp project with current version",
          " */"
        ],
        "after": [
          "  return {",
          "    ...project,",
          "    schemaVersion: CURRENT_SCHEMA_VERSION,"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:268:50",
      "file": "services/projectMigration.ts",
      "line": 268,
      "column": 50,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function stampProjectVersion(project: any): any {",
      "context": {
        "before": [
          "/**",
          " * Stamp project with current version",
          " */"
        ],
        "after": [
          "  return {",
          "    ...project,",
          "    schemaVersion: CURRENT_SCHEMA_VERSION,"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:392:69",
      "file": "services/templateBuilder.ts",
      "line": 392,
      "column": 69,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "export function getPropertyValue(layer: Layer, propertyPath: string): any {",
      "context": {
        "before": [
          "/**",
          " * Get the value of a property at a path",
          " */"
        ],
        "after": [
          "  const parts = propertyPath.split(\".\");",
          "  let current: any = layer;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:394:14",
      "file": "services/templateBuilder.ts",
      "line": 394,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "let current: any = layer;",
      "context": {
        "before": [
          " */",
          "export function getPropertyValue(layer: Layer, propertyPath: string): any {",
          "  const parts = propertyPath.split(\".\");"
        ],
        "after": [
          "",
          "  for (const part of parts) {",
          "    if (current === undefined || current === null) return undefined;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:422:8",
      "file": "services/templateBuilder.ts",
      "line": 422,
      "column": 8,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "value: any,",
      "context": {
        "before": [
          "export function setPropertyValue(",
          "  layer: Layer,",
          "  propertyPath: string,"
        ],
        "after": [
          "): boolean {",
          "  const parts = propertyPath.split(\".\");",
          "  let current: any = layer;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:425:14",
      "file": "services/templateBuilder.ts",
      "line": 425,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "let current: any = layer;",
      "context": {
        "before": [
          "  value: any,",
          "): boolean {",
          "  const parts = propertyPath.split(\".\");"
        ],
        "after": [
          "",
          "  // Navigate to parent",
          "  for (let i = 0; i < parts.length - 1; i++) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:470:2",
      "file": "services/templateBuilder.ts",
      "line": 470,
      "column": 2,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): any {",
      "context": {
        "before": [
          "  layer: Layer,",
          "  effectName: string,",
          "  parameterName: string,"
        ],
        "after": [
          "  if (!layer.effects) return null;",
          "",
          "  // Find effect by name"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:565:56",
      "file": "services/templateBuilder.ts",
      "line": 565,
      "column": 56,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "function serializeComposition(composition: Composition): any {",
      "context": {
        "before": [
          "/**",
          " * Serialize composition for template export",
          " */"
        ],
        "after": [
          "  // Deep clone and strip runtime-only data",
          "  const serialized = JSON.parse(JSON.stringify(composition));",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:582:2",
      "file": "services/templateBuilder.ts",
      "line": 582,
      "column": 2,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): any[] {",
      "context": {
        "before": [
          "  composition: Composition,",
          "  assets: Record<string, any>,",
          "  settings: TemplateExportSettings,"
        ],
        "after": [
          "  if (!settings.includeMedia) return [];",
          "",
          "  const usedAssetIds = new Set<string>();"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:590:31",
      "file": "services/templateBuilder.ts",
      "line": 590,
      "column": 31,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const data = layer.data as any;",
      "context": {
        "before": [
          "  // Find all asset references in layers",
          "  composition.layers.forEach((layer) => {",
          "    if (layer.data && typeof layer.data === \"object\") {"
        ],
        "after": [
          "      if (data.source && typeof data.source === \"string\") {",
          "        usedAssetIds.add(data.source);",
          "      }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:601:24",
      "file": "services/templateBuilder.ts",
      "line": 601,
      "column": 24,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const collectedAssets: any[] = [];",
      "context": {
        "before": [
          "  });",
          "",
          "  // Collect referenced assets"
        ],
        "after": [
          "  usedAssetIds.forEach((assetId) => {",
          "    const asset = assets[assetId];",
          "    if (asset) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:624:2",
      "file": "services/templateBuilder.ts",
      "line": 624,
      "column": 2,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): any[] {",
      "context": {
        "before": [
          "function collectFonts(",
          "  composition: Composition,",
          "  settings: TemplateExportSettings,"
        ],
        "after": [
          "  const fonts: any[] = [];",
          "  const fontFamilies = new Set<string>();",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:625:14",
      "file": "services/templateBuilder.ts",
      "line": 625,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "const fonts: any[] = [];",
      "context": {
        "before": [
          "  composition: Composition,",
          "  settings: TemplateExportSettings,",
          "): any[] {"
        ],
        "after": [
          "  const fontFamilies = new Set<string>();",
          "",
          "  // Find all font references in text layers"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:631:31",
      "file": "services/templateBuilder.ts",
      "line": 631,
      "column": 31,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const data = layer.data as any;",
      "context": {
        "before": [
          "  // Find all font references in text layers",
          "  composition.layers.forEach((layer) => {",
          "    if (layer.type === \"text\" && layer.data) {"
        ],
        "after": [
          "      if (data.fontFamily) {",
          "        fontFamilies.add(data.fontFamily);",
          "      }"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:401:56",
      "file": "services/textToVector.ts",
      "line": 401,
      "column": 56,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;",
      "context": {
        "before": [
          "  const layers: Partial<Layer>[] = [];",
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          ""
        ],
        "after": [
          "  const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
          "",
          "  if (groupByCharacter) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:402:56",
      "file": "services/textToVector.ts",
      "line": 402,
      "column": 56,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
      "context": {
        "before": [
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          "",
          "  const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;"
        ],
        "after": [
          "",
          "  if (groupByCharacter) {",
          "    for (const charGroup of result.characters) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:322:21",
      "file": "services/videoDecoder.ts",
      "line": 322,
      "column": 21,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "return (video as any).audioTracks.length > 0;",
      "context": {
        "before": [
          "  private hasAudioTrack(video: HTMLVideoElement): boolean {",
          "    // Check audioTracks API if available",
          "    if (\"audioTracks\" in video) {"
        ],
        "after": [
          "    }",
          "    // Assume it has audio if we can't detect",
          "    return true;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:414:78",
      "file": "stores/layerStore/index.ts",
      "line": 414,
      "column": 78,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): Promise<{ status: string; layer?: Layer; error?: string; [key: string]: any }> {",
      "context": {
        "before": [
          "      },",
          "      file: File,",
          "      autoResizeComposition: boolean = true,"
        ],
        "after": [
          "      return createVideoLayerImpl(compositorStore, file, autoResizeComposition);",
          "    },",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:368:74",
      "file": "stores/layerStore/specialized.ts",
      "line": 368,
      "column": 74,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "): Promise<{ status: string; layer?: Layer; error?: string; [key: string]: any }> {",
      "context": {
        "before": [
          "  },",
          "  file: File,",
          "  autoResizeComposition: boolean = true,"
        ],
        "after": [
          "  // Import videoStore to delegate video import logic",
          "  const { useVideoStore } = await import(\"@/stores/videoStore\");",
          "  const videoStore = useVideoStore();"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/assets.ts:149:14",
      "file": "types/assets.ts",
      "line": 149,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "sourceData?: any;",
      "context": {
        "before": [
          "  lastModified: number; // Timestamp",
          "",
          "  // For JSON: the parsed data"
        ],
        "after": [
          "",
          "  // For CSV/TSV: tabular structure",
          "  headers?: string[];"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/dataAsset.ts:36:13",
      "file": "types/dataAsset.ts",
      "line": 36,
      "column": 13,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "sourceData: any; // Parsed JSON object",
      "context": {
        "before": [
          " */",
          "export interface JSONDataAsset extends DataAssetBase {",
          "  type: \"json\" | \"mgjson\";"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/dataAsset.ts:68:13",
      "file": "types/dataAsset.ts",
      "line": 68,
      "column": 13,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "sourceData: any;",
      "context": {
        "before": [
          " * Provides access to parsed JSON structure.",
          " */",
          "export interface JSONDataAccessor {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/dataAsset.ts:123:14",
      "file": "types/dataAsset.ts",
      "line": 123,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "sourceData?: any;",
      "context": {
        "before": [
          " */",
          "export interface FootageDataAccessor {",
          "  // For JSON files"
        ],
        "after": [
          "",
          "  // For CSV files",
          "  dataValue?: (coords: [number, number | string]) => string | number;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/dataAsset.ts:178:16",
      "file": "types/dataAsset.ts",
      "line": 178,
      "column": 16,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "[key: string]: any; // Additional properties",
      "context": {
        "before": [
          "export interface ChartDataPoint {",
          "  label: string;",
          "  value: number;"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/effects.ts:38:8",
      "file": "types/effects.ts",
      "line": 38,
      "column": 8,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "value: any;",
      "context": {
        "before": [
          "    | \"string\"",
          "    | \"curve\"",
          "    | \"data\";"
        ],
        "after": [
          "  defaultValue: any;",
          "  min?: number;",
          "  max?: number;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/effects.ts:39:15",
      "file": "types/effects.ts",
      "line": 39,
      "column": 15,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "defaultValue: any;",
      "context": {
        "before": [
          "    | \"curve\"",
          "    | \"data\";",
          "  value: any;"
        ],
        "after": [
          "  min?: number;",
          "  max?: number;",
          "  step?: number;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/effects.ts:43:41",
      "file": "types/effects.ts",
      "line": 43,
      "column": 41,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "options?: Array<{ label: string; value: any }>;",
      "context": {
        "before": [
          "  min?: number;",
          "  max?: number;",
          "  step?: number;"
        ],
        "after": [
          "  animatable: boolean;",
          "  group?: string;",
          "}"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/effects.ts:3200:12",
      "file": "types/effects.ts",
      "line": 3200,
      "column": 12,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "value: any;",
      "context": {
        "before": [
          "    property: string;",
          "    keyframes: Array<{",
          "      time: number; // 0-1 normalized"
        ],
        "after": [
          "      inHandle?: { x: number; y: number };",
          "      outHandle?: { x: number; y: number };",
          "    }>;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/presets.ts:778:9",
      "file": "types/presets.ts",
      "line": 778,
      "column": 9,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "} as any,",
      "context": {
        "before": [
          "          keyframes: [],",
          "        },",
          "        seed: 12345,"
        ],
        "after": [
          "    ],",
          "  },",
          "  {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/presets.ts:821:9",
      "file": "types/presets.ts",
      "line": 821,
      "column": 9,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "} as any,",
      "context": {
        "before": [
          "          keyframes: [],",
          "        },",
          "        waveType: \"sine\","
        ],
        "after": [
          "    ],",
          "  },",
          "];"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/project.ts:185:14",
      "file": "types/project.ts",
      "line": 185,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "sourceData?: any;",
      "context": {
        "before": [
          "  lastModified: number; // Timestamp",
          "",
          "  // For JSON: the parsed data"
        ],
        "after": [
          "",
          "  // For CSV/TSV: tabular structure",
          "  headers?: string[];"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/ses-ambient.d.ts:13:60",
      "file": "types/ses-ambient.d.ts",
      "line": 13,
      "column": 60,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "evaluate(code: string, options?: Record<string, unknown>): any;",
      "context": {
        "before": [
          "export interface SESCompartment {\r",
          "  globalThis: Record<PropertyKey, any>;\r",
          "  name: string;\r"
        ],
        "after": [
          "}\r",
          "\r",
          "interface SESCompartmentConstructor {\r"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/templateBuilder.ts:135:16",
      "file": "types/templateBuilder.ts",
      "line": 135,
      "column": 16,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "defaultValue?: any;",
      "context": {
        "before": [
          "  comment?: string;",
          "",
          "  // Value snapshot for template export/import"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/templateBuilder.ts:258:14",
      "file": "types/templateBuilder.ts",
      "line": 258,
      "column": 14,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "composition: any; // Serialized composition",
      "context": {
        "before": [
          "  templateConfig: TemplateConfig;",
          "",
          "  // Composition data (serialized LatticeProject subset)"
        ],
        "after": [
          "",
          "  // Embedded assets",
          "  assets: TemplateAsset[];"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "types/templateBuilder.ts:361:19",
      "file": "types/templateBuilder.ts",
      "line": 361,
      "column": 19,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "let defaultValue: any;",
      "context": {
        "before": [
          "): ExpressionControl {",
          "  const id = `ctrl_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;",
          ""
        ],
        "after": [
          "  let config: ExpressionControlConfig = {};",
          "",
          "  switch (type) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:93:35",
      "file": "utils/logger.ts",
      "line": 93,
      "column": 35,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "debug(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          " */",
          "export function createLogger(context: string) {",
          "  return {"
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.log(formatMessage(\"DEBUG\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:99:34",
      "file": "utils/logger.ts",
      "line": 99,
      "column": 34,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "info(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"info\")) {",
          "        console.info(formatMessage(\"INFO\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:105:34",
      "file": "utils/logger.ts",
      "line": 105,
      "column": 34,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "warn(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"warn\")) {",
          "        console.warn(formatMessage(\"WARN\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:111:35",
      "file": "utils/logger.ts",
      "line": 111,
      "column": 35,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "error(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"error\")) {",
          "        console.error(formatMessage(\"ERROR\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:120:50",
      "file": "utils/logger.ts",
      "line": 120,
      "column": 50,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "log(level: LogLevel, message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Log with a specific level",
          "     */"
        ],
        "after": [
          "      switch (level) {",
          "        case \"debug\":",
          "          this.debug(message, ...args);"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:155:15",
      "file": "utils/logger.ts",
      "line": 155,
      "column": 15,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "table(data: any): void {",
      "context": {
        "before": [
          "    /**",
          "     * Log a table (useful for arrays/objects)",
          "     */"
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.log(formatMessage(\"\", context, \"Table:\"));",
          "        console.table(data);"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "workers/expressionWorker.ts:14:16",
      "file": "workers/expressionWorker.ts",
      "line": 14,
      "column": 16,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "let Compartment: any = null;",
      "context": {
        "before": [
          "",
          "// Worker-side SES initialization",
          "let sesReady = false;"
        ],
        "after": [
          "let harden: any = null;",
          "",
          "async function initSES(): Promise<boolean> {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "workers/expressionWorker.ts:15:11",
      "file": "workers/expressionWorker.ts",
      "line": 15,
      "column": 11,
      "pattern": ": any",
      "severity": "CRITICAL",
      "code": "let harden: any = null;",
      "context": {
        "before": [
          "// Worker-side SES initialization",
          "let sesReady = false;",
          "let Compartment: any = null;"
        ],
        "after": [
          "",
          "async function initSES(): Promise<boolean> {",
          "  if (sesReady) return true;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Replace with proper type annotation",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "workers/expressionWorker.ts:22:26",
      "file": "workers/expressionWorker.ts",
      "line": 22,
      "column": 26,
      "pattern": "as any",
      "severity": "CRITICAL",
      "code": "const g = globalThis as any;",
      "context": {
        "before": [
          "",
          "  try {",
          "    await import(\"ses\");"
        ],
        "after": [
          "",
          "    if (!g.lockdown) {",
          "      return false;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Replace with proper type assertion or fix underlying type issue",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:839:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 839,
      "column": 31,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerW = data?.width || compW;",
          "      const layerH = data?.height || compH;",
          ""
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:839:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 839,
      "column": 31,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerW = data?.width || compW;",
          "      const layerH = data?.height || compH;",
          ""
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:870:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 870,
      "column": 31,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerW = data?.width || compW;",
          "",
          "      const scale = compW / layerW;"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:870:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 870,
      "column": 31,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerW = data?.width || compW;",
          "",
          "      const scale = compW / layerW;"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:893:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 893,
      "column": 31,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerH = data?.height || compH;",
          "",
          "      const scale = compH / layerH;"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:893:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 893,
      "column": 31,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerH = data?.height || compH;",
          "",
          "      const scale = compH / layerH;"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:932:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 932,
      "column": 31,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerW = data?.width || compWidth.value;",
          "      const layerH = data?.height || compHeight.value;",
          ""
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:932:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 932,
      "column": 31,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (!layer) continue;",
          ""
        ],
        "after": [
          "      const layerW = data?.width || compWidth.value;",
          "      const layerH = data?.height || compHeight.value;",
          ""
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1015:29",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1015,
      "column": 29,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "    const layer = layerStore.getLayerById(store, selectedIds[0]);",
          "    if (!layer) return;",
          ""
        ],
        "after": [
          "    let assetId: string | null = null;",
          "",
          "    if (data?.assetId) {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1015:29",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1015,
      "column": 29,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "    const layer = layerStore.getLayerById(store, selectedIds[0]);",
          "    if (!layer) return;",
          ""
        ],
        "after": [
          "    let assetId: string | null = null;",
          "",
          "    if (data?.assetId) {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1067:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1067,
      "column": 31,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "        }",
          "      }",
          ""
        ],
        "after": [
          "      if (data) {",
          "        const checkForKeyframes = (obj: unknown): void => {",
          "          if (!obj || typeof obj !== \"object\" || obj === null) return;"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1067:31",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1067,
      "column": 31,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as LayerDataWithDimensions;",
      "context": {
        "before": [
          "        }",
          "      }",
          ""
        ],
        "after": [
          "      if (data) {",
          "        const checkForKeyframes = (obj: unknown): void => {",
          "          if (!obj || typeof obj !== \"object\" || obj === null) return;"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1155:39",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1155,
      "column": 39,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "            const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "            const layer = layerStore.createLayer(store, \"image\", layerName);",
          "            if (layer?.data) {"
        ],
        "after": [
          "              data.src = url;",
          "              data.width = img.width;",
          "              data.height = img.height;"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1155:39",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1155,
      "column": 39,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "            const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "            const layer = layerStore.createLayer(store, \"image\", layerName);",
          "            if (layer?.data) {"
        ],
        "after": [
          "              data.src = url;",
          "              data.width = img.width;",
          "              data.height = img.height;"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1169:46",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1169,
      "column": 46,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = result.layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "          const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "          layerStore.createVideoLayer(store, file).then((result) => {",
          "            if (result.status === \"success\" && result.layer?.data) {"
        ],
        "after": [
          "              data.originalFilename = file.name;",
          "            }",
          "          });"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1169:46",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1169,
      "column": 46,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = result.layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "          const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "          layerStore.createVideoLayer(store, file).then((result) => {",
          "            if (result.status === \"success\" && result.layer?.data) {"
        ],
        "after": [
          "              data.originalFilename = file.name;",
          "            }",
          "          });"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1179:37",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1179,
      "column": 37,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "          const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "          const layer = layerStore.createLayer(store, \"model\", layerName);",
          "          if (layer?.data) {"
        ],
        "after": [
          "            data.src = url;",
          "            data.format = ext;",
          "            data.originalFilename = file.name;"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1179:37",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1179,
      "column": 37,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "          const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "          const layer = layerStore.createLayer(store, \"model\", layerName);",
          "          if (layer?.data) {"
        ],
        "after": [
          "            data.src = url;",
          "            data.format = ext;",
          "            data.originalFilename = file.name;"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:173:18",
      "file": "engine/core/LayerManager.ts",
      "line": 173,
      "column": 18,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(layer as unknown as EffectLayer).setRenderContext(context);",
      "context": {
        "before": [
          "      ) {",
          "        // Check if method exists before calling (SolidLayer doesn't have setRenderContext)",
          "        if (\"setRenderContext\" in layer) {"
        ],
        "after": [
          "        }",
          "      }",
          "    }"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:173:18",
      "file": "engine/core/LayerManager.ts",
      "line": 173,
      "column": 18,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(layer as unknown as EffectLayer).setRenderContext(context);",
      "context": {
        "before": [
          "      ) {",
          "        // Check if method exists before calling (SolidLayer doesn't have setRenderContext)",
          "        if (\"setRenderContext\" in layer) {"
        ],
        "after": [
          "        }",
          "      }",
          "    }"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:380:16",
      "file": "engine/core/LayerManager.ts",
      "line": 380,
      "column": 16,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(layer as unknown as EffectLayer).setRenderContext(",
      "context": {
        "before": [
          "      // The layer might be a solid or any other type with effect layer flag",
          "      // Cast to access setRenderContext if available",
          "      if (\"setRenderContext\" in layer) {"
        ],
        "after": [
          "          this.effectLayerRenderContext,",
          "        );",
          "      }"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:380:16",
      "file": "engine/core/LayerManager.ts",
      "line": 380,
      "column": 16,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(layer as unknown as EffectLayer).setRenderContext(",
      "context": {
        "before": [
          "      // The layer might be a solid or any other type with effect layer flag",
          "      // Cast to access setRenderContext if available",
          "      if (\"setRenderContext\" in layer) {"
        ],
        "after": [
          "          this.effectLayerRenderContext,",
          "        );",
          "      }"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1291:13",
      "file": "engine/core/LayerManager.ts",
      "line": 1291,
      "column": 13,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "layer as unknown as { getSourceCanvas(): HTMLCanvasElement | null }",
      "context": {
        "before": [
          "    // Cast to access protected method via any type assertion",
          "    // In production, BaseLayer would expose a public getRenderedCanvas() method",
          "    const sourceCanvas = ("
        ],
        "after": [
          "    ).getSourceCanvas?.();",
          "",
          "    if (sourceCanvas) {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1291:13",
      "file": "engine/core/LayerManager.ts",
      "line": 1291,
      "column": 13,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "layer as unknown as { getSourceCanvas(): HTMLCanvasElement | null }",
      "context": {
        "before": [
          "    // Cast to access protected method via any type assertion",
          "    // In production, BaseLayer would expose a public getRenderedCanvas() method",
          "    const sourceCanvas = ("
        ],
        "after": [
          "    ).getSourceCanvas?.();",
          "",
          "    if (sourceCanvas) {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:158:20",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 158,
      "column": 20,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(emitter as unknown as Record<string, unknown>)[binding.parameter] =",
      "context": {
        "before": [
          "      if (binding.target === \"emitter\") {",
          "        const emitter = emitters.get(binding.targetId);",
          "        if (emitter) {"
        ],
        "after": [
          "            output;",
          "        }",
          "      } else if (binding.target === \"forceField\") {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:158:20",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 158,
      "column": 20,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(emitter as unknown as Record<string, unknown>)[binding.parameter] =",
      "context": {
        "before": [
          "      if (binding.target === \"emitter\") {",
          "        const emitter = emitters.get(binding.targetId);",
          "        if (emitter) {"
        ],
        "after": [
          "            output;",
          "        }",
          "      } else if (binding.target === \"forceField\") {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:164:18",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 164,
      "column": 18,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(field as unknown as Record<string, unknown>)[binding.parameter] =",
      "context": {
        "before": [
          "      } else if (binding.target === \"forceField\") {",
          "        const field = forceFields.get(binding.targetId);",
          "        if (field) {"
        ],
        "after": [
          "            output;",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:164:18",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 164,
      "column": 18,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(field as unknown as Record<string, unknown>)[binding.parameter] =",
      "context": {
        "before": [
          "      } else if (binding.target === \"forceField\") {",
          "        const field = forceFields.get(binding.targetId);",
          "        if (field) {"
        ],
        "after": [
          "            output;",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:258:31",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 258,
      "column": 31,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "this.forceFieldBuffer as unknown as BufferSource,",
      "context": {
        "before": [
          "      // Create force field texture",
          "      this.forceFieldBuffer = new Float32Array(MAX_FORCE_FIELDS * 16);",
          "      this.forceFieldTexture = new THREE.DataTexture("
        ],
        "after": [
          "        MAX_FORCE_FIELDS,",
          "        4,",
          "        THREE.RGBAFormat,"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:258:31",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 258,
      "column": 31,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "this.forceFieldBuffer as unknown as BufferSource,",
      "context": {
        "before": [
          "      // Create force field texture",
          "      this.forceFieldBuffer = new Float32Array(MAX_FORCE_FIELDS * 16);",
          "      this.forceFieldTexture = new THREE.DataTexture("
        ],
        "after": [
          "        MAX_FORCE_FIELDS,",
          "        4,",
          "        THREE.RGBAFormat,"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:107:32",
      "file": "engine/TransformControlsManager.ts",
      "line": 107,
      "column": 32,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "this.transformControls as unknown as THREE.Object3D,",
      "context": {
        "before": [
          "      // Ensure all gizmo objects have proper children arrays",
          "      // (fixes multi-Three.js instance issues)",
          "      this.ensureObjectChildren("
        ],
        "after": [
          "      );",
          "",
          "      // Add to scene (TransformControls extends Object3D internally)"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:107:32",
      "file": "engine/TransformControlsManager.ts",
      "line": 107,
      "column": 32,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "this.transformControls as unknown as THREE.Object3D,",
      "context": {
        "before": [
          "      // Ensure all gizmo objects have proper children arrays",
          "      // (fixes multi-Three.js instance issues)",
          "      this.ensureObjectChildren("
        ],
        "after": [
          "      );",
          "",
          "      // Add to scene (TransformControls extends Object3D internally)"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:112:32",
      "file": "engine/TransformControlsManager.ts",
      "line": 112,
      "column": 32,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "this.transformControls as unknown as THREE.Object3D,",
      "context": {
        "before": [
          "",
          "      // Add to scene (TransformControls extends Object3D internally)",
          "      this.deps.scene.addUIElement("
        ],
        "after": [
          "      );",
          "    } catch (e) {",
          "      console.error(\"[TransformControlsManager] Failed to initialize:\", e);"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:112:32",
      "file": "engine/TransformControlsManager.ts",
      "line": 112,
      "column": 32,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "this.transformControls as unknown as THREE.Object3D,",
      "context": {
        "before": [
          "",
          "      // Add to scene (TransformControls extends Object3D internally)",
          "      this.deps.scene.addUIElement("
        ],
        "after": [
          "      );",
          "    } catch (e) {",
          "      console.error(\"[TransformControlsManager] Failed to initialize:\", e);"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:508:16",
      "file": "services/effects/audioVisualizer.ts",
      "line": 508,
      "column": 16,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "params as unknown as AudioSpectrumParams,",
      "context": {
        "before": [
          "    (input: EffectStackResult, params: EvaluatedEffectParams) => {",
          "      return renderAudioSpectrum(",
          "        input,"
        ],
        "after": [
          "        0,",
          "      );",
          "    },"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:508:16",
      "file": "services/effects/audioVisualizer.ts",
      "line": 508,
      "column": 16,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "params as unknown as AudioSpectrumParams,",
      "context": {
        "before": [
          "    (input: EffectStackResult, params: EvaluatedEffectParams) => {",
          "      return renderAudioSpectrum(",
          "        input,"
        ],
        "after": [
          "        0,",
          "      );",
          "    },"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:520:16",
      "file": "services/effects/audioVisualizer.ts",
      "line": 520,
      "column": 16,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "params as unknown as AudioWaveformParams,",
      "context": {
        "before": [
          "    (input: EffectStackResult, params: EvaluatedEffectParams) => {",
          "      return renderAudioWaveform(",
          "        input,"
        ],
        "after": [
          "        0,",
          "      );",
          "    },"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:520:16",
      "file": "services/effects/audioVisualizer.ts",
      "line": 520,
      "column": 16,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "params as unknown as AudioWaveformParams,",
      "context": {
        "before": [
          "    (input: EffectStackResult, params: EvaluatedEffectParams) => {",
          "      return renderAudioWaveform(",
          "        input,"
        ],
        "after": [
          "        0,",
          "      );",
          "    },"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/backendDepthService.ts:305:26",
      "file": "services/export/backendDepthService.ts",
      "line": 305,
      "column": 26,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "ctx.drawImage(canvas as unknown as CanvasImageSource, 0, 0);",
      "context": {
        "before": [
          "  tempCanvas.height = canvas.height;",
          "  const ctx = tempCanvas.getContext(\"2d\");",
          "  if (ctx) {"
        ],
        "after": [
          "  }",
          "  const dataUrl = tempCanvas.toDataURL(\"image/png\");",
          "  return dataUrl.replace(/^data:image\\/png;base64,/, \"\");"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/export/backendDepthService.ts:305:26",
      "file": "services/export/backendDepthService.ts",
      "line": 305,
      "column": 26,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "ctx.drawImage(canvas as unknown as CanvasImageSource, 0, 0);",
      "context": {
        "before": [
          "  tempCanvas.height = canvas.height;",
          "  const ctx = tempCanvas.getContext(\"2d\");",
          "  if (ctx) {"
        ],
        "after": [
          "  }",
          "  const dataUrl = tempCanvas.toDataURL(\"image/png\");",
          "  return dataUrl.replace(/^data:image\\/png;base64,/, \"\");"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:301:34",
      "file": "services/projectCollection.ts",
      "line": 301,
      "column": 34,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const rawData = asset.data as unknown;",
      "context": {
        "before": [
          "      }",
          "",
          "      // If asset has raw data (cast to unknown first for type compatibility)"
        ],
        "after": [
          "      if (rawData instanceof Blob) {",
          "        return rawData;",
          "      }"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:149:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 149,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        lineJoin: \"round\",",
          "        dashArray: \"\",",
          "        dashOffset: 0,"
        ],
        "after": [
          "",
          "    case \"path\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:149:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 149,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        lineJoin: \"round\",",
          "        dashArray: \"\",",
          "        dashOffset: 0,"
        ],
        "after": [
          "",
          "    case \"path\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:215:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 215,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        audioMappings: [],",
          "        exportEnabled: false,",
          "        exportFormat: \"wan-move\","
        ],
        "after": [
          "",
          "    case \"depthflow\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:215:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 215,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        audioMappings: [],",
          "        exportEnabled: false,",
          "        exportFormat: \"wan-move\","
        ],
        "after": [
          "",
          "    case \"depthflow\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:237:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 237,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "          edgeDilation: 0,",
          "          inpaintEdges: false,",
          "        },"
        ],
        "after": [
          "",
          "    case \"light\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:237:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 237,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "          edgeDilation: 0,",
          "          inpaintEdges: false,",
          "        },"
        ],
        "after": [
          "",
          "    case \"light\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:250:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 250,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        castShadows: false,",
          "        shadowDarkness: 100,",
          "        shadowDiffusion: 0,"
        ],
        "after": [
          "",
          "    case \"camera\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:250:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 250,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        castShadows: false,",
          "        shadowDarkness: 100,",
          "        shadowDiffusion: 0,"
        ],
        "after": [
          "",
          "    case \"camera\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:256:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 256,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "      return {",
          "        cameraId: null,",
          "        isActiveCamera: false,"
        ],
        "after": [
          "",
          "    case \"image\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:256:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 256,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "      return {",
          "        cameraId: null,",
          "        isActiveCamera: false,"
        ],
        "after": [
          "",
          "    case \"image\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:262:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 262,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "      return {",
          "        assetId: null,",
          "        fit: \"contain\","
        ],
        "after": [
          "",
          "    case \"video\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:262:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 262,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "      return {",
          "        assetId: null,",
          "        fit: \"contain\","
        ],
        "after": [
          "",
          "    case \"video\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:270:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 270,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        loop: false,",
          "        startTime: 0,",
          "        speed: 1.0,"
        ],
        "after": [
          "",
          "    case \"shape\": {",
          "      const data = createDefaultShapeLayerData();"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:270:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 270,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        loop: false,",
          "        startTime: 0,",
          "        speed: 1.0,"
        ],
        "after": [
          "",
          "    case \"shape\": {",
          "      const data = createDefaultShapeLayerData();"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:292:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 292,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        speedMapEnabled: false,",
          "        timeRemap: null,",
          "        timeRemapEnabled: false,"
        ],
        "after": [
          "",
          "    case \"matte\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:292:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 292,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        speedMapEnabled: false,",
          "        timeRemap: null,",
          "        timeRemapEnabled: false,"
        ],
        "after": [
          "",
          "    case \"matte\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:303:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 303,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        expansion: 0,",
          "        sourceLayerId: null,",
          "        previewMode: \"matte\" as const,"
        ],
        "after": [
          "",
          "    case \"model\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:303:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 303,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        expansion: 0,",
          "        sourceLayerId: null,",
          "        previewMode: \"matte\" as const,"
        ],
        "after": [
          "",
          "    case \"model\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:390:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 390,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        ),",
          "        meshResolution: 128,",
          "        wireframe: false,"
        ],
        "after": [
          "",
          "    case \"normal\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:390:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 390,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        ),",
          "        meshResolution: 128,",
          "        wireframe: false,"
        ],
        "after": [
          "",
          "    case \"normal\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:406:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 406,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        lightDirection: { x: 0.5, y: 0.5, z: 1.0 },",
          "        lightIntensity: 1.0,",
          "        ambientIntensity: 0.2,"
        ],
        "after": [
          "",
          "    case \"audio\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:406:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 406,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        lightDirection: { x: 0.5, y: 0.5, z: 1.0 },",
          "        lightIntensity: 1.0,",
          "        ambientIntensity: 0.2,"
        ],
        "after": [
          "",
          "    case \"audio\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:421:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 421,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        showWaveform: true,",
          "        waveformColor: \"#4a90d9\",",
          "        exposeFeatures: true,"
        ],
        "after": [
          "",
          "    case \"generated\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:421:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 421,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        showWaveform: true,",
          "        waveformColor: \"#4a90d9\",",
          "        exposeFeatures: true,"
        ],
        "after": [
          "",
          "    case \"generated\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:432:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 432,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        generatedAssetId: null,",
          "        status: \"pending\" as const,",
          "        autoRegenerate: false,"
        ],
        "after": [
          "",
          "    case \"group\":",
          "      return {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:432:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 432,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        generatedAssetId: null,",
          "        status: \"pending\" as const,",
          "        autoRegenerate: false,"
        ],
        "after": [
          "",
          "    case \"group\":",
          "      return {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:440:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 440,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        color: null,",
          "        passThrough: true,",
          "        isolate: false,"
        ],
        "after": [
          "",
          "    case \"particle\":",
          "      // Legacy particle layer (backwards compatibility)"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:440:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 440,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        color: null,",
          "        passThrough: true,",
          "        isolate: false,"
        ],
        "after": [
          "",
          "    case \"particle\":",
          "      // Legacy particle layer (backwards compatibility)"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:453:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 453,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        gravity: -9.8,",
          "        color: \"#ffffff\",",
          "        size: 5,"
        ],
        "after": [
          "",
          "    case \"adjustment\":",
          "    case \"effectLayer\":"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:453:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 453,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        gravity: -9.8,",
          "        color: \"#ffffff\",",
          "        size: 5,"
        ],
        "after": [
          "",
          "    case \"adjustment\":",
          "    case \"effectLayer\":"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:461:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 461,
      "column": 9,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        color: \"#808080\",",
          "        effectLayer: true,",
          "        adjustmentLayer: true,"
        ],
        "after": [
          "",
          "    default:",
          "      throw new Error("
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/actions/layer/layerDefaults.ts:461:9",
      "file": "stores/actions/layer/layerDefaults.ts",
      "line": 461,
      "column": 9,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "} as unknown as AnyLayerData;",
      "context": {
        "before": [
          "        color: \"#808080\",",
          "        effectLayer: true,",
          "        adjustmentLayer: true,"
        ],
        "after": [
          "",
          "    default:",
          "      throw new Error("
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:372:24",
      "file": "stores/assetStore.ts",
      "line": 372,
      "column": 24,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(stored.config as unknown as Record<string, string>)[textureType] = url;",
      "context": {
        "before": [
          "      try {",
          "        const url = URL.createObjectURL(file);",
          "        // Dynamic property assignment for texture URL"
        ],
        "after": [
          "        stored.modifiedAt = Date.now();",
          "        this.materials.set(materialId, stored);",
          "      } catch (error) {"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:372:24",
      "file": "stores/assetStore.ts",
      "line": 372,
      "column": 24,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(stored.config as unknown as Record<string, string>)[textureType] = url;",
      "context": {
        "before": [
          "      try {",
          "        const url = URL.createObjectURL(file);",
          "        // Dynamic property assignment for texture URL"
        ],
        "after": [
          "        stored.modifiedAt = Date.now();",
          "        this.materials.set(materialId, stored);",
          "      } catch (error) {"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:982:40",
      "file": "stores/assetStore.ts",
      "line": 982,
      "column": 40,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const value = (stored.config as unknown as Record<string, unknown>)[key];",
      "context": {
        "before": [
          "      for (const stored of this.materials.values()) {",
          "        for (const key of Object.keys(stored.config)) {",
          "          // Dynamic property access for cleanup"
        ],
        "after": [
          "          if (typeof value === \"string\" && value.startsWith(\"blob:\")) {",
          "            URL.revokeObjectURL(value);",
          "          }"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:982:40",
      "file": "stores/assetStore.ts",
      "line": 982,
      "column": 40,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const value = (stored.config as unknown as Record<string, unknown>)[key];",
      "context": {
        "before": [
          "      for (const stored of this.materials.values()) {",
          "        for (const key of Object.keys(stored.config)) {",
          "          // Dynamic property access for cleanup"
        ],
        "after": [
          "          if (typeof value === \"string\" && value.startsWith(\"blob:\")) {",
          "            URL.revokeObjectURL(value);",
          "          }"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:153:15",
      "file": "stores/cameraStore.ts",
      "line": 153,
      "column": 15,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "store as unknown as Parameters<typeof layerStore.selectLayer>[0],",
      "context": {
        "before": [
          "      const layerStore = useLayerStore();\r",
          "      // Type assertion: compositorStore passed at runtime implements required interface\r",
          "      layerStore.selectLayer(\r"
        ],
        "after": [
          "        layerId\r",
          "      );\r",
          "\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:153:15",
      "file": "stores/cameraStore.ts",
      "line": 153,
      "column": 15,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "store as unknown as Parameters<typeof layerStore.selectLayer>[0],",
      "context": {
        "before": [
          "      const layerStore = useLayerStore();\r",
          "      // Type assertion: compositorStore passed at runtime implements required interface\r",
          "      layerStore.selectLayer(\r"
        ],
        "after": [
          "        layerId\r",
          "      );\r",
          "\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:64:34",
      "file": "stores/layerStore/crud.ts",
      "line": 64,
      "column": 34,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const splineData = layerData as unknown as {",
      "context": {
        "before": [
          "",
          "  // Spline layer properties for timeline",
          "  if (type === \"spline\") {"
        ],
        "after": [
          "      strokeWidth?: number;",
          "      strokeOpacity?: number;",
          "    };"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:64:34",
      "file": "stores/layerStore/crud.ts",
      "line": 64,
      "column": 34,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const splineData = layerData as unknown as {",
      "context": {
        "before": [
          "",
          "  // Spline layer properties for timeline",
          "  if (type === \"spline\") {"
        ],
        "after": [
          "      strokeWidth?: number;",
          "      strokeOpacity?: number;",
          "    };"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:178:19",
      "file": "stores/layerStore/crud.ts",
      "line": 178,
      "column": 19,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(layer.data as unknown as Record<string, unknown>).pathLayerId === layerId",
      "context": {
        "before": [
          "    if (",
          "      layer.type === \"text\" &&",
          "      layer.data &&"
        ],
        "after": [
          "    ) {",
          "      (layer.data as unknown as Record<string, unknown>).pathLayerId = null;",
          "    }"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:178:19",
      "file": "stores/layerStore/crud.ts",
      "line": 178,
      "column": 19,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(layer.data as unknown as Record<string, unknown>).pathLayerId === layerId",
      "context": {
        "before": [
          "    if (",
          "      layer.type === \"text\" &&",
          "      layer.data &&"
        ],
        "after": [
          "    ) {",
          "      (layer.data as unknown as Record<string, unknown>).pathLayerId = null;",
          "    }"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:180:19",
      "file": "stores/layerStore/crud.ts",
      "line": 180,
      "column": 19,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(layer.data as unknown as Record<string, unknown>).pathLayerId = null;",
      "context": {
        "before": [
          "      layer.data &&",
          "      (layer.data as unknown as Record<string, unknown>).pathLayerId === layerId",
          "    ) {"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:180:19",
      "file": "stores/layerStore/crud.ts",
      "line": 180,
      "column": 19,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(layer.data as unknown as Record<string, unknown>).pathLayerId = null;",
      "context": {
        "before": [
          "      layer.data &&",
          "      (layer.data as unknown as Record<string, unknown>).pathLayerId === layerId",
          "    ) {"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:275:45",
      "file": "stores/layerStore/crud.ts",
      "line": 275,
      "column": 45,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const transformRecord = layer.transform as unknown as Record<",
      "context": {
        "before": [
          "  type TransformProp = AnimatableProperty<PropertyValue> | undefined;",
          "",
          "  if (layer.transform) {"
        ],
        "after": [
          "      string,",
          "      TransformProp",
          "    >;"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:275:45",
      "file": "stores/layerStore/crud.ts",
      "line": 275,
      "column": 45,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const transformRecord = layer.transform as unknown as Record<",
      "context": {
        "before": [
          "  type TransformProp = AnimatableProperty<PropertyValue> | undefined;",
          "",
          "  if (layer.transform) {"
        ],
        "after": [
          "      string,",
          "      TransformProp",
          "    >;"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:376:21",
      "file": "stores/layerStore/specialized.ts",
      "line": 376,
      "column": 21,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "compositorStore as unknown as Parameters<typeof videoStore.createVideoLayer>[0],",
      "context": {
        "before": [
          "  // Delegate to videoStore which handles metadata extraction and asset creation",
          "  // Type assertion: compositorStore implements required interface at runtime",
          "  return videoStore.createVideoLayer("
        ],
        "after": [
          "    file,",
          "    autoResizeComposition",
          "  );"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:376:21",
      "file": "stores/layerStore/specialized.ts",
      "line": 376,
      "column": 21,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "compositorStore as unknown as Parameters<typeof videoStore.createVideoLayer>[0],",
      "context": {
        "before": [
          "  // Delegate to videoStore which handles metadata extraction and asset creation",
          "  // Type assertion: compositorStore implements required interface at runtime",
          "  return videoStore.createVideoLayer("
        ],
        "after": [
          "    file,",
          "    autoResizeComposition",
          "  );"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:240:39",
      "file": "stores/physicsStore.ts",
      "line": 240,
      "column": 39,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer) return;\r",
          "\r"
        ],
        "after": [
          "        | PhysicsLayerData\r",
          "        | undefined;\r",
          "      if (!physicsData?.physicsEnabled || !physicsData.rigidBody) return;\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:240:39",
      "file": "stores/physicsStore.ts",
      "line": 240,
      "column": 39,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer) return;\r",
          "\r"
        ],
        "after": [
          "        | PhysicsLayerData\r",
          "        | undefined;\r",
          "      if (!physicsData?.physicsEnabled || !physicsData.rigidBody) return;\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:371:41",
      "file": "stores/physicsStore.ts",
      "line": 371,
      "column": 41,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      if (!comp) return;\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (physicsData?.physicsEnabled && physicsData.rigidBody) {\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:371:41",
      "file": "stores/physicsStore.ts",
      "line": 371,
      "column": 41,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      if (!comp) return;\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (physicsData?.physicsEnabled && physicsData.rigidBody) {\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:400:41",
      "file": "stores/physicsStore.ts",
      "line": 400,
      "column": 41,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      if (!comp) return;\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (!physicsData?.physicsEnabled) continue;\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:400:41",
      "file": "stores/physicsStore.ts",
      "line": 400,
      "column": 41,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      if (!comp) return;\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (!physicsData?.physicsEnabled) continue;\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:515:41",
      "file": "stores/physicsStore.ts",
      "line": 515,
      "column": 41,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      const results: BakeResult[] = [];\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (physicsData?.physicsEnabled) {\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:515:41",
      "file": "stores/physicsStore.ts",
      "line": 515,
      "column": 41,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      const results: BakeResult[] = [];\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (physicsData?.physicsEnabled) {\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:214:26",
      "file": "stores/projectStore.ts",
      "line": 214,
      "column": 26,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const engine = (window as unknown as {",
      "context": {
        "before": [
          "// ============================================================================\r",
          "\r",
          "function invalidateParticleCaches(): void {\r"
        ],
        "after": [
          "    __latticeEngine?: { getLayers?: () => Array<{ clearCache?: () => void }> };\r",
          "  }).__latticeEngine;\r",
          "  if (!engine) return;\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:214:26",
      "file": "stores/projectStore.ts",
      "line": 214,
      "column": 26,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const engine = (window as unknown as {",
      "context": {
        "before": [
          "// ============================================================================\r",
          "\r",
          "function invalidateParticleCaches(): void {\r"
        ],
        "after": [
          "    __latticeEngine?: { getLayers?: () => Array<{ clearCache?: () => void }> };\r",
          "  }).__latticeEngine;\r",
          "  if (!engine) return;\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:241:33",
      "file": "stores/projectStore.ts",
      "line": 241,
      "column": 33,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "  for (const comp of Object.values(store.project.compositions)) {\r",
          "    for (const layer of comp.layers) {\r",
          "      if (layer.data && typeof layer.data === \"object\") {\r"
        ],
        "after": [
          "\r",
          "        if (data.assetId && typeof data.assetId === \"string\") usedIds.add(data.assetId);\r",
          "        if (data.sourceAssetId && typeof data.sourceAssetId === \"string\") usedIds.add(data.sourceAssetId);\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:241:33",
      "file": "stores/projectStore.ts",
      "line": 241,
      "column": 33,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const data = layer.data as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "  for (const comp of Object.values(store.project.compositions)) {\r",
          "    for (const layer of comp.layers) {\r",
          "      if (layer.data && typeof layer.data === \"object\") {\r"
        ],
        "after": [
          "\r",
          "        if (data.assetId && typeof data.assetId === \"string\") usedIds.add(data.assetId);\r",
          "        if (data.sourceAssetId && typeof data.sourceAssetId === \"string\") usedIds.add(data.sourceAssetId);\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:482:39",
      "file": "stores/projectStore.ts",
      "line": 482,
      "column": 39,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const oldVersion = (project as unknown as { schemaVersion?: number }).schemaVersion ?? 1;",
      "context": {
        "before": [
          "        let project = parseResult.data;\r",
          "\r",
          "        if (needsMigration(project)) {\r"
        ],
        "after": [
          "          storeLogger.info(`Migrating project from schema v${oldVersion} to v${CURRENT_SCHEMA_VERSION}`);\r",
          "          const migrationResult = migrateProject(project);\r",
          "          if (migrationResult.success && migrationResult.project) {\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:482:39",
      "file": "stores/projectStore.ts",
      "line": 482,
      "column": 39,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const oldVersion = (project as unknown as { schemaVersion?: number }).schemaVersion ?? 1;",
      "context": {
        "before": [
          "        let project = parseResult.data;\r",
          "\r",
          "        if (needsMigration(project)) {\r"
        ],
        "after": [
          "          storeLogger.info(`Migrating project from schema v${oldVersion} to v${CURRENT_SCHEMA_VERSION}`);\r",
          "          const migrationResult = migrateProject(project);\r",
          "          if (migrationResult.success && migrationResult.project) {\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:500:41",
      "file": "stores/projectStore.ts",
      "line": 500,
      "column": 41,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const projectWithSnap = project as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "          return false;\r",
          "        }\r",
          "\r"
        ],
        "after": [
          "        const animationStore = useAnimationStore();\r",
          "        if (projectWithSnap.snapConfig) {\r",
          "          try {\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:500:41",
      "file": "stores/projectStore.ts",
      "line": 500,
      "column": 41,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const projectWithSnap = project as unknown as Record<string, unknown>;",
      "context": {
        "before": [
          "          return false;\r",
          "        }\r",
          "\r"
        ],
        "after": [
          "        const animationStore = useAnimationStore();\r",
          "        if (projectWithSnap.snapConfig) {\r",
          "          try {\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:511:50",
      "file": "stores/projectStore.ts",
      "line": 511,
      "column": 50,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "store.project = projectWithoutSnapConfig as unknown as LatticeProject;",
      "context": {
        "before": [
          "        }\r",
          "\r",
          "        const { snapConfig: _, ...projectWithoutSnapConfig } = projectWithSnap;\r"
        ],
        "after": [
          "        pushHistoryFn();\r",
          "        return true;\r",
          "      } catch (err) {\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:511:50",
      "file": "stores/projectStore.ts",
      "line": 511,
      "column": 50,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "store.project = projectWithoutSnapConfig as unknown as LatticeProject;",
      "context": {
        "before": [
          "        }\r",
          "\r",
          "        const { snapConfig: _, ...projectWithoutSnapConfig } = projectWithSnap;\r"
        ],
        "after": [
          "        pushHistoryFn();\r",
          "        return true;\r",
          "      } catch (err) {\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:589:41",
      "file": "stores/projectStore.ts",
      "line": 589,
      "column": 41,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "const oldVersion = (project as unknown as { schemaVersion?: number }).schemaVersion ?? 1;",
      "context": {
        "before": [
          "          let project = result.project;\r",
          "\r",
          "          if (needsMigration(project)) {\r"
        ],
        "after": [
          "            storeLogger.info(`Migrating project from schema v${oldVersion} to v${CURRENT_SCHEMA_VERSION}`);\r",
          "            const migrationResult = migrateProject(project);\r",
          "            if (migrationResult.success && migrationResult.project) {\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:589:41",
      "file": "stores/projectStore.ts",
      "line": 589,
      "column": 41,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "const oldVersion = (project as unknown as { schemaVersion?: number }).schemaVersion ?? 1;",
      "context": {
        "before": [
          "          let project = result.project;\r",
          "\r",
          "          if (needsMigration(project)) {\r"
        ],
        "after": [
          "            storeLogger.info(`Migrating project from schema v${oldVersion} to v${CURRENT_SCHEMA_VERSION}`);\r",
          "            const migrationResult = migrateProject(project);\r",
          "            if (migrationResult.success && migrationResult.project) {\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:796:27",
      "file": "stores/projectStore.ts",
      "line": 796,
      "column": 27,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(exportProject.meta as unknown as Record<string, unknown>).exportedAt = new Date().toISOString();",
      "context": {
        "before": [
          "      }\r",
          "\r",
          "      const exportProject = structuredClone(toRaw(store.project));\r"
        ],
        "after": [
          "      (exportProject as unknown as Record<string, unknown>)._assetManifest = assetManifest;\r",
          "\r",
          "      folder.file(\"project.lattice.json\", JSON.stringify(exportProject, null, 2));\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:796:27",
      "file": "stores/projectStore.ts",
      "line": 796,
      "column": 27,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(exportProject.meta as unknown as Record<string, unknown>).exportedAt = new Date().toISOString();",
      "context": {
        "before": [
          "      }\r",
          "\r",
          "      const exportProject = structuredClone(toRaw(store.project));\r"
        ],
        "after": [
          "      (exportProject as unknown as Record<string, unknown>)._assetManifest = assetManifest;\r",
          "\r",
          "      folder.file(\"project.lattice.json\", JSON.stringify(exportProject, null, 2));\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:797:22",
      "file": "stores/projectStore.ts",
      "line": 797,
      "column": 22,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "(exportProject as unknown as Record<string, unknown>)._assetManifest = assetManifest;",
      "context": {
        "before": [
          "\r",
          "      const exportProject = structuredClone(toRaw(store.project));\r",
          "      (exportProject.meta as unknown as Record<string, unknown>).exportedAt = new Date().toISOString();\r"
        ],
        "after": [
          "\r",
          "      folder.file(\"project.lattice.json\", JSON.stringify(exportProject, null, 2));\r",
          "\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:797:22",
      "file": "stores/projectStore.ts",
      "line": 797,
      "column": 22,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "(exportProject as unknown as Record<string, unknown>)._assetManifest = assetManifest;",
      "context": {
        "before": [
          "\r",
          "      const exportProject = structuredClone(toRaw(store.project));\r",
          "      (exportProject.meta as unknown as Record<string, unknown>).exportedAt = new Date().toISOString();\r"
        ],
        "after": [
          "\r",
          "      folder.file(\"project.lattice.json\", JSON.stringify(exportProject, null, 2));\r",
          "\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/segmentationStore.ts:110:17",
      "file": "stores/segmentationStore.ts",
      "line": 110,
      "column": 17,
      "pattern": "as unknown",
      "severity": "HIGH",
      "code": "store as unknown as Parameters<typeof layerStore.createLayer>[0],",
      "context": {
        "before": [
          "        const layerStore = useLayerStore();\r",
          "        // Type assertion: compositorStore passed at runtime implements required interface\r",
          "        const layer = layerStore.createLayer(\r"
        ],
        "after": [
          "          \"image\",\r",
          "          name || \"Segmented\"\r",
          "        );\r"
        ]
      },
      "suggestion": "Consider if proper type narrowing is possible",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "stores/segmentationStore.ts:110:17",
      "file": "stores/segmentationStore.ts",
      "line": 110,
      "column": 17,
      "pattern": "as unknown as",
      "severity": "HIGH",
      "code": "store as unknown as Parameters<typeof layerStore.createLayer>[0],",
      "context": {
        "before": [
          "        const layerStore = useLayerStore();\r",
          "        // Type assertion: compositorStore passed at runtime implements required interface\r",
          "        const layer = layerStore.createLayer(\r"
        ],
        "after": [
          "          \"image\",\r",
          "          name || \"Segmented\"\r",
          "        );\r"
        ]
      },
      "suggestion": "Review if type definitions can be improved",
      "category": "Type Escape",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:65:32",
      "file": "composables/useAssetHandlers.ts",
      "line": 65,
      "column": 32,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: config?.depth || 0,",
      "context": {
        "before": [
          "            ...layer.transform.position,",
          "            value: {",
          "              ...layer.transform.position.value,"
        ],
        "after": [
          "            },",
          "          },",
          "        },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:105:52",
      "file": "composables/useAssetHandlers.ts",
      "line": 105,
      "column": 52,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const existingEmitters = particleData.emitters || [];",
      "context": {
        "before": [
          "",
          "    // Now TypeScript knows layer.data is ParticleLayerData",
          "    const particleData: ParticleLayerData = layer.data;"
        ],
        "after": [
          "",
          "    // Update first emitter with mesh shape, or create new one",
          "    const updatedEmitters = existingEmitters.length > 0"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCanvasSelection.ts:200:45",
      "file": "composables/useCanvasSelection.ts",
      "line": 200,
      "column": 45,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const current = currentSelection?.value || [];",
      "context": {
        "before": [
          "    selectedIds: string[],",
          "    mode: SelectionMode,",
          "  ): string[] {"
        ],
        "after": [
          "",
          "    switch (mode) {",
          "      case \"replace\":"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorCoords.ts:131:71",
      "file": "composables/useCurveEditorCoords.ts",
      "line": 131,
      "column": 71,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "if (typeof value === \"object\") return value.x ?? value.y ?? value.z ?? 0;",
      "context": {
        "before": [
          " */",
          "export function getNumericValue(value: any): number {",
          "  if (typeof value === \"number\") return value;"
        ],
        "after": [
          "  return 0;",
          "}",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorCoords.ts:148:18",
      "file": "composables/useCurveEditorCoords.ts",
      "line": 148,
      "column": 18,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "? (value.x ?? 0)",
      "context": {
        "before": [
          "  return typeof value === \"number\"",
          "    ? value",
          "    : typeof value === \"object\""
        ],
        "after": [
          "      : 0;",
          "}",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:192:45",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 192,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "kf1.frame + (kf1.outHandle?.frame ?? 0),",
      "context": {
        "before": [
          "      } else {",
          "        // Bezier curve using absolute handle offsets",
          "        const cp1x = frameToScreenX("
        ],
        "after": [
          "          viewState,",
          "          canvasWidth,",
          "          margin,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:198:62",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 198,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "getNumericValue(kf1.value) + (kf1.outHandle?.value ?? 0),",
      "context": {
        "before": [
          "          margin,",
          "        );",
          "        const cp1y = valueToScreenY("
        ],
        "after": [
          "          viewState,",
          "          canvasHeight,",
          "          margin,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:204:44",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 204,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "kf2.frame + (kf2.inHandle?.frame ?? 0),",
      "context": {
        "before": [
          "          margin,",
          "        );",
          "        const cp2x = frameToScreenX("
        ],
        "after": [
          "          viewState,",
          "          canvasWidth,",
          "          margin,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:210:61",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 210,
      "column": 61,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "getNumericValue(kf2.value) + (kf2.inHandle?.value ?? 0),",
      "context": {
        "before": [
          "          margin,",
          "        );",
          "        const cp2y = valueToScreenY("
        ],
        "after": [
          "          viewState,",
          "          canvasHeight,",
          "          margin,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:159:47",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 159,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dx = x - (dragTarget.value.startX ?? 0);",
      "context": {
        "before": [
          "    if (!dragTarget.value) return;",
          "",
          "    if (dragTarget.value.type === \"pan\") {"
        ],
        "after": [
          "      const dy = y - (dragTarget.value.startY ?? 0);",
          "",
          "      const graphWidth = canvasWidth.value - margin.left - margin.right;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:160:47",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 160,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dy = y - (dragTarget.value.startY ?? 0);",
      "context": {
        "before": [
          "",
          "    if (dragTarget.value.type === \"pan\") {",
          "      const dx = x - (dragTarget.value.startX ?? 0);"
        ],
        "after": [
          "",
          "      const graphWidth = canvasWidth.value - margin.left - margin.right;",
          "      const graphHeight = canvasHeight.value - margin.top - margin.bottom;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:179:46",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 179,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const startX = dragTarget.value.startX ?? 0;",
      "context": {
        "before": [
          "      dragTarget.value.startY = y;",
          "      drawGraph();",
          "    } else if (dragTarget.value.type === \"select\" && selectionBox.value) {"
        ],
        "after": [
          "      const startY = dragTarget.value.startY ?? 0;",
          "",
          "      selectionBox.value = {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:180:46",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 180,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const startY = dragTarget.value.startY ?? 0;",
      "context": {
        "before": [
          "      drawGraph();",
          "    } else if (dragTarget.value.type === \"select\" && selectionBox.value) {",
          "      const startX = dragTarget.value.startX ?? 0;"
        ],
        "after": [
          "",
          "      selectionBox.value = {",
          "        x: Math.min(x, startX),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:59:18",
      "file": "composables/useCurveEditorView.ts",
      "line": 59,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minFrame = Infinity;",
      "context": {
        "before": [
          "): void {",
          "  if (visibleProperties.length === 0) return;",
          ""
        ],
        "after": [
          "  let maxFrame = -Infinity;",
          "  let minValue = Infinity;",
          "  let maxValue = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:60:19",
      "file": "composables/useCurveEditorView.ts",
      "line": 60,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxFrame = -Infinity;",
      "context": {
        "before": [
          "  if (visibleProperties.length === 0) return;",
          "",
          "  let minFrame = Infinity;"
        ],
        "after": [
          "  let minValue = Infinity;",
          "  let maxValue = -Infinity;",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:61:18",
      "file": "composables/useCurveEditorView.ts",
      "line": 61,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minValue = Infinity;",
      "context": {
        "before": [
          "",
          "  let minFrame = Infinity;",
          "  let maxFrame = -Infinity;"
        ],
        "after": [
          "  let maxValue = -Infinity;",
          "",
          "  for (const prop of visibleProperties) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:62:19",
      "file": "composables/useCurveEditorView.ts",
      "line": 62,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxValue = -Infinity;",
      "context": {
        "before": [
          "  let minFrame = Infinity;",
          "  let maxFrame = -Infinity;",
          "  let minValue = Infinity;"
        ],
        "after": [
          "",
          "  for (const prop of visibleProperties) {",
          "    for (const kf of prop.keyframes) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:97:18",
      "file": "composables/useCurveEditorView.ts",
      "line": 97,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minFrame = Infinity;",
      "context": {
        "before": [
          "    return;",
          "  }",
          ""
        ],
        "after": [
          "  let maxFrame = -Infinity;",
          "  let minValue = Infinity;",
          "  let maxValue = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:98:19",
      "file": "composables/useCurveEditorView.ts",
      "line": 98,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxFrame = -Infinity;",
      "context": {
        "before": [
          "  }",
          "",
          "  let minFrame = Infinity;"
        ],
        "after": [
          "  let minValue = Infinity;",
          "  let maxValue = -Infinity;",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:99:18",
      "file": "composables/useCurveEditorView.ts",
      "line": 99,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minValue = Infinity;",
      "context": {
        "before": [
          "",
          "  let minFrame = Infinity;",
          "  let maxFrame = -Infinity;"
        ],
        "after": [
          "  let maxValue = -Infinity;",
          "",
          "  for (const sk of selectedKeyframes) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:100:19",
      "file": "composables/useCurveEditorView.ts",
      "line": 100,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxValue = -Infinity;",
      "context": {
        "before": [
          "  let minFrame = Infinity;",
          "  let maxFrame = -Infinity;",
          "  let minValue = Infinity;"
        ],
        "after": [
          "",
          "  for (const sk of selectedKeyframes) {",
          "    minFrame = Math.min(minFrame, sk.keyframe.frame);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:339:21",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 339,
      "column": 21,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let nextFrame = Infinity;",
      "context": {
        "before": [
          "    const selectedIds = store.selectedLayerIds;",
          "    if (selectedIds.length === 0) return;",
          ""
        ],
        "after": [
          "    const currentFrame = animationStore.getCurrentFrame(store);",
          "",
          "    for (const layerId of selectedIds) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:360:21",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 360,
      "column": 21,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "if (nextFrame < Infinity) {",
      "context": {
        "before": [
          "      }",
          "    }",
          ""
        ],
        "after": [
          "      animationStore.setFrame(store, nextFrame);",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:548:52",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 548,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "animationStore.setFrame(store, layer.inPoint ?? 0);",
      "context": {
        "before": [
          "    if (selectedIds.length === 0) return;",
          "    const layer = layerStore.getLayerById(store, selectedIds[0]);",
          "    if (layer) {"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:583:41",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 583,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const currentIn = layer.inPoint ?? 0;",
      "context": {
        "before": [
          "    for (const id of selectedIds) {",
          "      const layer = layerStore.getLayerById(store, id);",
          "      if (layer) {"
        ],
        "after": [
          "        const currentFrame = animationStore.getCurrentFrame(store);",
          "        if (currentFrame > currentIn) {",
          "          layerStore.updateLayer(store, id, { inPoint: currentFrame });"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:666:37",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 666,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const inPoint = layer.inPoint ?? 0;",
      "context": {
        "before": [
          "      if (!layer) continue;",
          "",
          "      const currentFrame = animationStore.getCurrentFrame(store);"
        ],
        "after": [
          "      const outPoint = layer.outPoint ?? projectStore.getFrameCount(store);",
          "",
          "      if (currentFrame > inPoint && currentFrame < outPoint) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:945:50",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 945,
      "column": 50,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const offsetX = centerX - (currentAnchor.x || 0);",
      "context": {
        "before": [
          "        transform.anchorPoint?.value ?? { x: 0, y: 0, z: 0 };",
          "      const currentPos = transform.position?.value ?? { x: 0, y: 0, z: 0 };",
          ""
        ],
        "after": [
          "      const offsetY = centerY - (currentAnchor.y || 0);",
          "",
          "      layerStore.updateLayerTransform(store, id, {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:946:50",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 946,
      "column": 50,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const offsetY = centerY - (currentAnchor.y || 0);",
      "context": {
        "before": [
          "      const currentPos = transform.position?.value ?? { x: 0, y: 0, z: 0 };",
          "",
          "      const offsetX = centerX - (currentAnchor.x || 0);"
        ],
        "after": [
          "",
          "      layerStore.updateLayerTransform(store, id, {",
          "        anchor: { x: centerX, y: centerY, z: currentAnchor.z || 0 },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:949:62",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 949,
      "column": 62,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "anchor: { x: centerX, y: centerY, z: currentAnchor.z || 0 },",
      "context": {
        "before": [
          "      const offsetY = centerY - (currentAnchor.y || 0);",
          "",
          "      layerStore.updateLayerTransform(store, id, {"
        ],
        "after": [
          "        position: {",
          "          x: (currentPos.x || 0) + offsetX,",
          "          y: (currentPos.y || 0) + offsetY,"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:951:28",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 951,
      "column": 28,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "x: (currentPos.x || 0) + offsetX,",
      "context": {
        "before": [
          "      layerStore.updateLayerTransform(store, id, {",
          "        anchor: { x: centerX, y: centerY, z: currentAnchor.z || 0 },",
          "        position: {"
        ],
        "after": [
          "          y: (currentPos.y || 0) + offsetY,",
          "          z: currentPos.z || 0,",
          "        },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:952:28",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 952,
      "column": 28,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "y: (currentPos.y || 0) + offsetY,",
      "context": {
        "before": [
          "        anchor: { x: centerX, y: centerY, z: currentAnchor.z || 0 },",
          "        position: {",
          "          x: (currentPos.x || 0) + offsetX,"
        ],
        "after": [
          "          z: currentPos.z || 0,",
          "        },",
          "      });"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:953:27",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 953,
      "column": 27,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: currentPos.z || 0,",
      "context": {
        "before": [
          "        position: {",
          "          x: (currentPos.x || 0) + offsetX,",
          "          y: (currentPos.y || 0) + offsetY,"
        ],
        "after": [
          "        },",
          "      });",
          "    }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:979:61",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 979,
      "column": 61,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "position: { x: centerX, y: centerY, z: currentPos.z || 0 },",
      "context": {
        "before": [
          "      const currentPos = transform.position?.value ?? { x: 0, y: 0, z: 0 };",
          "",
          "      layerStore.updateLayerTransform(store, id, {"
        ],
        "after": [
          "      });",
          "    }",
          ""
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useShapeDrawing.ts:150:52",
      "file": "composables/useShapeDrawing.ts",
      "line": 150,
      "column": 52,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const innerRatio = options.starInnerRadius || 0.5;",
      "context": {
        "before": [
          "",
          "      case \"star\": {",
          "        const numPoints = options.starPoints || 5;"
        ],
        "after": [
          "        const cx = width / 2;",
          "        const cy = height / 2;",
          "        const outerR = Math.min(width, height) / 2;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:453:69",
      "file": "composables/useSplineInteraction.ts",
      "line": 453,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;",
      "context": {
        "before": [
          "        const prevPointIndex = newPointIndex - 1;",
          "",
          "        const layerPos = inverseTransformPoint(pos);"
        ],
        "after": [
          "        const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
          "",
          "        if (newPoint && prevPointIndex >= 0) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:454:69",
      "file": "composables/useSplineInteraction.ts",
      "line": 454,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
      "context": {
        "before": [
          "",
          "        const layerPos = inverseTransformPoint(pos);",
          "        const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;"
        ],
        "after": [
          "",
          "        if (newPoint && prevPointIndex >= 0) {",
          "          const prevPoint = points[prevPointIndex];"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:561:40",
      "file": "composables/useSplineInteraction.ts",
      "line": 561,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(dragTarget.value.startDepth ?? 0) - screenDy * depthScale,",
      "context": {
        "before": [
          "        const depthScale = 2;",
          "        const newDepth = Math.max(",
          "          0,"
        ],
        "after": [
          "        );",
          "",
          "        options.layerStore.updateSplineControlPoint(options.store, layerId.value, point.id, {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:834:40",
      "file": "composables/useSplineInteraction.ts",
      "line": 834,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startDepth: (point as any).depth ?? 0,",
      "context": {
        "before": [
          "      pointId,",
          "      startX: event.clientX,",
          "      startY: event.clientY,"
        ],
        "after": [
          "      screenStartX: event.clientX,",
          "      screenStartY: event.clientY,",
          "    };"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:332:26",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 332,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.z = (from.z ?? 0) + ((to.z ?? 0) - (from.z ?? 0)) * t;",
      "context": {
        "before": [
          "    };",
          "",
          "    if (\"z\" in from || \"z\" in to) {"
        ],
        "after": [
          "    }",
          "",
          "    return result;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:332:41",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 332,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.z = (from.z ?? 0) + ((to.z ?? 0) - (from.z ?? 0)) * t;",
      "context": {
        "before": [
          "    };",
          "",
          "    if (\"z\" in from || \"z\" in to) {"
        ],
        "after": [
          "    }",
          "",
          "    return result;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:332:57",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 332,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.z = (from.z ?? 0) + ((to.z ?? 0) - (from.z ?? 0)) * t;",
      "context": {
        "before": [
          "    };",
          "",
          "    if (\"z\" in from || \"z\" in to) {"
        ],
        "after": [
          "    }",
          "",
          "    return result;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:360:31",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 360,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const fromVal = from[i] ?? 0;",
      "context": {
        "before": [
          "    const result: number[] = [];",
          "",
          "    for (let i = 0; i < length; i++) {"
        ],
        "after": [
          "      const toVal = to[i] ?? 0;",
          "      result.push(fromVal + (toVal - fromVal) * t);",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:361:27",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 361,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const toVal = to[i] ?? 0;",
      "context": {
        "before": [
          "",
          "    for (let i = 0; i < length; i++) {",
          "      const fromVal = from[i] ?? 0;"
        ],
        "after": [
          "      result.push(fromVal + (toVal - fromVal) * t);",
          "    }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:542:51",
      "file": "engine/core/CameraController.ts",
      "line": 542,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.setTarget(target.x, target.y, target.z ?? 0);",
      "context": {
        "before": [
          "",
          "    if (this.targetProp) {",
          "      const target = this.evaluator.evaluate(this.targetProp, frame);"
        ],
        "after": [
          "    }",
          "",
          "    if (this.fovProp) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:598:28",
      "file": "engine/core/LayerManager.ts",
      "line": 598,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frameNum = frame ?? 0;",
      "context": {
        "before": [
          "    evaluatedLayers: readonly EvaluatedLayer[],",
          "    frame?: number,",
          "  ): void {"
        ],
        "after": [
          "    // Store current frame for particle spline queries",
          "    this.currentFrame = frameNum;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:178:43",
      "file": "engine/core/SceneManager.ts",
      "line": 178,
      "column": 43,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const currentZ = child.position.z || 0;",
      "context": {
        "before": [
          "      let hasChanges = false;",
          "      for (const child of this.compositionGroup.children) {",
          "        const cachedZ = this.zPositionCache.get(child);"
        ],
        "after": [
          "        if (cachedZ === undefined || cachedZ !== currentZ) {",
          "          hasChanges = true;",
          "          break;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:191:28",
      "file": "engine/core/SceneManager.ts",
      "line": 191,
      "column": 28,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return (a.position.z || 0) - (b.position.z || 0);",
      "context": {
        "before": [
          "",
          "    // Perform the sort",
          "    this.compositionGroup.children.sort((a, b) => {"
        ],
        "after": [
          "    });",
          "",
          "    // Update the Z position cache"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:191:50",
      "file": "engine/core/SceneManager.ts",
      "line": 191,
      "column": 50,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return (a.position.z || 0) - (b.position.z || 0);",
      "context": {
        "before": [
          "",
          "    // Perform the sort",
          "    this.compositionGroup.children.sort((a, b) => {"
        ],
        "after": [
          "    });",
          "",
          "    // Update the Z position cache"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:196:55",
      "file": "engine/core/SceneManager.ts",
      "line": 196,
      "column": 55,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "this.zPositionCache.set(child, child.position.z || 0);",
      "context": {
        "before": [
          "",
          "    // Update the Z position cache",
          "    for (const child of this.compositionGroup.children) {"
        ],
        "after": [
          "    }",
          "",
          "    // Clear the dirty flag"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:70:34",
      "file": "engine/layers/AudioLayer.ts",
      "line": 70,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startTime: data?.startTime ?? 0,",
      "context": {
        "before": [
          "      solo: data?.solo ?? false,",
          "      pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),",
          "      loop: data?.loop ?? false,"
        ],
        "after": [
          "      speed: data?.speed ?? 1,",
          "      showWaveform: data?.showWaveform ?? true,",
          "      waveformColor: data?.waveformColor ?? \"#4a90d9\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:264:49",
      "file": "engine/layers/AudioLayer.ts",
      "line": 264,
      "column": 49,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.updateGain(this.audioData.level?.value ?? 0);",
      "context": {
        "before": [
          "    };",
          "",
          "    // Apply initial level"
        ],
        "after": [
          "    this.updatePan(this.audioData.pan?.value ?? 0);",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:265:46",
      "file": "engine/layers/AudioLayer.ts",
      "line": 265,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.updatePan(this.audioData.pan?.value ?? 0);",
      "context": {
        "before": [
          "",
          "    // Apply initial level",
          "    this.updateGain(this.audioData.level?.value ?? 0);"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:211:62",
      "file": "engine/layers/BaseLayer.ts",
      "line": 211,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.inPoint = layerData.startFrame ?? layerData.inPoint ?? 0;",
      "context": {
        "before": [
          "    // Copy properties",
          "    this.visible = layerData.visible;",
          "    this.locked = layerData.locked;"
        ],
        "after": [
          "    this.outPoint = layerData.endFrame ?? layerData.outPoint ?? 80;",
          "    this.opacity = layerData.opacity;",
          "    this.transform = layerData.transform;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:219:38",
      "file": "engine/layers/BaseLayer.ts",
      "line": 219,
      "column": 38,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "this.effects = layerData.effects ?? [];",
      "context": {
        "before": [
          "    this.autoOrient = layerData.autoOrient ?? \"off\";",
          "    this.blendMode = layerData.blendMode ?? \"normal\";",
          "    this.parentId = layerData.parentId ?? null;"
        ],
        "after": [
          "    this.effectsEnabled = layerData.effectsEnabled !== false; // Default true",
          "    this.layerStyles = layerData.layerStyles;",
          "    this.quality = layerData.quality ?? \"best\";"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:230:34",
      "file": "engine/layers/BaseLayer.ts",
      "line": 230,
      "column": 34,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "this.masks = layerData.masks ?? [];",
      "context": {
        "before": [
          "    this.layerData = layerData;",
          "",
          "    // Mask & matte properties (with backwards compatibility for old property names)"
        ],
        "after": [
          "    this.matteType = layerData.matteType ?? layerData.trackMatteType ?? \"none\";",
          "    this.matteLayerId =",
          "      layerData.matteLayerId ?? layerData.trackMatteLayerId ?? null;"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:308:22",
      "file": "engine/layers/BaseLayer.ts",
      "line": 308,
      "column": 22,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "basePosition.z ?? 0,",
      "context": {
        "before": [
          "    let posY = this.getDrivenOrBase(\"transform.position.y\", basePosition.y);",
          "    const posZ = this.getDrivenOrBase(",
          "      \"transform.position.z\","
        ],
        "after": [
          "    );",
          "",
          "    // Apply audio reactive modulation to position (additive)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:342:66",
      "file": "engine/layers/BaseLayer.ts",
      "line": 342,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x: this.getDrivenOrBase(\"transform.origin.x\", baseOrigin.x ?? 0),",
      "context": {
        "before": [
          "      ? this.evaluator.evaluate(originProp, frame)",
          "      : { x: 0, y: 0, z: 0 };",
          "    const origin = {"
        ],
        "after": [
          "      y: this.getDrivenOrBase(\"transform.origin.y\", baseOrigin.y ?? 0),",
          "      z: this.getDrivenOrBase(\"transform.origin.z\", baseOrigin.z ?? 0),",
          "    };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:343:66",
      "file": "engine/layers/BaseLayer.ts",
      "line": 343,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y: this.getDrivenOrBase(\"transform.origin.y\", baseOrigin.y ?? 0),",
      "context": {
        "before": [
          "      : { x: 0, y: 0, z: 0 };",
          "    const origin = {",
          "      x: this.getDrivenOrBase(\"transform.origin.x\", baseOrigin.x ?? 0),"
        ],
        "after": [
          "      z: this.getDrivenOrBase(\"transform.origin.z\", baseOrigin.z ?? 0),",
          "    };",
          "    // Keep anchorPoint alias for backwards compatibility"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:344:66",
      "file": "engine/layers/BaseLayer.ts",
      "line": 344,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: this.getDrivenOrBase(\"transform.origin.z\", baseOrigin.z ?? 0),",
      "context": {
        "before": [
          "    const origin = {",
          "      x: this.getDrivenOrBase(\"transform.origin.x\", baseOrigin.x ?? 0),",
          "      y: this.getDrivenOrBase(\"transform.origin.y\", baseOrigin.y ?? 0),"
        ],
        "after": [
          "    };",
          "    // Keep anchorPoint alias for backwards compatibility",
          "    const _anchorPoint = origin;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:589:43",
      "file": "engine/layers/BaseLayer.ts",
      "line": 589,
      "column": 43,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "const audioMod = state.audioModifiers || {};",
      "context": {
        "before": [
          "    this.applyOpacity(opacity);",
          "",
          "    // Get audio modifiers (additive values from audio mappings)"
        ],
        "after": [
          "",
          "    // Store audio modifiers for color/blur adjustment processing",
          "    this.currentAudioModifiers = audioMod;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:612:28",
      "file": "engine/layers/BaseLayer.ts",
      "line": 612,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "transform.position.z ?? 0,",
      "context": {
        "before": [
          "    );",
          "    const posZ = this.getDrivenOrBase(",
          "      \"transform.position.z\","
        ],
        "after": [
          "    );",
          "    let scaleX =",
          "      this.getDrivenOrBase(\"transform.scale.x\", transform.scale.x ?? 100) / 100;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:642:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 642,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "transform.rotationX ?? 0,",
      "context": {
        "before": [
          "      rotation: {",
          "        x: this.getDrivenOrBase(",
          "          \"transform.rotationX\","
        ],
        "after": [
          "        ),",
          "        y: this.getDrivenOrBase(",
          "          \"transform.rotationY\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:646:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 646,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "transform.rotationY ?? 0,",
      "context": {
        "before": [
          "        ),",
          "        y: this.getDrivenOrBase(",
          "          \"transform.rotationY\","
        ],
        "after": [
          "        ),",
          "        z: rotZ,",
          "      },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:654:67",
      "file": "engine/layers/BaseLayer.ts",
      "line": 654,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: this.getDrivenOrBase(\"transform.origin.z\", originVal.z ?? 0),",
      "context": {
        "before": [
          "      origin: {",
          "        x: this.getDrivenOrBase(\"transform.origin.x\", originVal.x),",
          "        y: this.getDrivenOrBase(\"transform.origin.y\", originVal.y),"
        ],
        "after": [
          "      },",
          "    });",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:849:49",
      "file": "engine/layers/BaseLayer.ts",
      "line": 849,
      "column": 49,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return this.audioReactiveValues.get(target) ?? 0;",
      "context": {
        "before": [
          "   * Returns 0 if no mapping exists (additive identity)",
          "   */",
          "  protected getAudioReactiveValue(target: TargetParameter): number {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1842:48",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1842,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "marker.position.set(pos.x, -pos.y, pos.z ?? 0);",
      "context": {
        "before": [
          "        markerGeometry.clone(),",
          "        markerMaterial.clone(),",
          "      );"
        ],
        "after": [
          "      marker.userData.frame = kf.frame;",
          "      this.motionPathMarkers.add(marker);",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1881:55",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1881,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return (this.transform.position.keyframes?.length ?? 0) > 0;",
      "context": {
        "before": [
          "   * Check if layer has position animation",
          "   */",
          "  hasPositionAnimation(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1955:74",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1955,
      "column": 74,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.axisGizmo.position.set(-originVal.x, originVal.y, -(originVal.z ?? 0));",
      "context": {
        "before": [
          "    // Position at origin (formerly anchor point)",
          "    const originProp = this.transform.origin || this.transform.anchorPoint;",
          "    const originVal = originProp?.value || { x: 0, y: 0, z: 0 };"
        ],
        "after": [
          "",
          "    this.axisGizmo.visible = this.showAxisGizmo;",
          "    this.group.add(this.axisGizmo);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:2027:74",
      "file": "engine/layers/BaseLayer.ts",
      "line": 2027,
      "column": 74,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.axisGizmo.position.set(-originVal.x, originVal.y, -(originVal.z ?? 0));",
      "context": {
        "before": [
          "",
          "    const originProp = this.transform.origin || this.transform.anchorPoint;",
          "    const originVal = originProp?.value || { x: 0, y: 0, z: 0 };"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:182:40",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 182,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "offsetX: data?.config?.offsetX ?? 0,",
      "context": {
        "before": [
          "      config: {",
          "        preset: data?.config?.preset ?? \"static\",",
          "        zoom: data?.config?.zoom ?? 1,"
        ],
        "after": [
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:183:40",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 183,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "offsetY: data?.config?.offsetY ?? 0,",
      "context": {
        "before": [
          "        preset: data?.config?.preset ?? \"static\",",
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,"
        ],
        "after": [
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:184:42",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 184,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "rotation: data?.config?.rotation ?? 0,",
      "context": {
        "before": [
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,"
        ],
        "after": [
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:185:46",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 185,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depthScale: data?.config?.depthScale ?? 0.1,",
      "context": {
        "before": [
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,"
        ],
        "after": [
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:186:46",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 186,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "focusDepth: data?.config?.focusDepth ?? 0.5,",
      "context": {
        "before": [
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,"
        ],
        "after": [
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:187:44",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 187,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "dollyZoom: data?.config?.dollyZoom ?? 0,",
      "context": {
        "before": [
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,"
        ],
        "after": [
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:188:48",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 188,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "orbitRadius: data?.config?.orbitRadius ?? 0.1,",
      "context": {
        "before": [
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,"
        ],
        "after": [
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:190:54",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 190,
      "column": 54,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
      "context": {
        "before": [
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,"
        ],
        "after": [
          "        swingFrequency: data?.config?.swingFrequency ?? 1,",
          "        edgeDilation: data?.config?.edgeDilation ?? 0,",
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:192:50",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 192,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "edgeDilation: data?.config?.edgeDilation ?? 0,",
      "context": {
        "before": [
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,"
        ],
        "after": [
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,",
          "      },",
          "      animatedZoom: data?.animatedZoom,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:53:32",
      "file": "engine/layers/DepthLayer.ts",
      "line": 53,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "minDepth: data?.minDepth ?? 0,",
      "context": {
        "before": [
          "      visualizationMode: data?.visualizationMode ?? \"colormap\",",
          "      colorMap: data?.colorMap ?? \"turbo\",",
          "      invert: data?.invert ?? false,"
        ],
        "after": [
          "      maxDepth: data?.maxDepth ?? 1,",
          "      autoNormalize: data?.autoNormalize ?? true,",
          "      contourLevels: data?.contourLevels ?? 10,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:42:36",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 42,
      "column": 36,
      "pattern": "?? {}",
      "severity": "MEDIUM",
      "code": "parameters: data?.parameters ?? {},",
      "context": {
        "before": [
          "      generationType: data?.generationType ?? \"depth\",",
          "      sourceLayerId: data?.sourceLayerId ?? null,",
          "      model: data?.model ?? \"depth-anything-v2\","
        ],
        "after": [
          "      generatedAssetId: data?.generatedAssetId ?? null,",
          "      status: data?.status ?? \"pending\",",
          "      autoRegenerate: data?.autoRegenerate ?? false,"
        ]
      },
      "suggestion": "Verify if empty object is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:307:53",
      "file": "engine/layers/LightLayer.ts",
      "line": 307,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "smoothing: data?.pointOfInterest?.smoothing ?? 0,",
      "context": {
        "before": [
          "        },",
          "        targetLayerId: data?.pointOfInterest?.targetLayerId,",
          "        offset: data?.pointOfInterest?.offset ?? { x: 0, y: 0, z: 0 },"
        ],
        "after": [
          "      },",
          "",
          "      pathFollowing: {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:339:46",
      "file": "engine/layers/LightLayer.ts",
      "line": 339,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "normalBias: data?.shadow?.normalBias ?? 0,",
      "context": {
        "before": [
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,"
        ],
        "after": [
          "        cameraNear: data?.shadow?.cameraNear ?? 1,",
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,",
          "        cameraSize: data?.shadow?.cameraSize ?? 500,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:347:44",
      "file": "engine/layers/LightLayer.ts",
      "line": 347,
      "column": 44,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "layers: data?.lightLinking?.layers ?? [],",
      "context": {
        "before": [
          "",
          "      lightLinking: {",
          "        mode: data?.lightLinking?.mode ?? \"include\","
        ],
        "after": [
          "      },",
          "",
          "      animatedIntensity: data?.animatedIntensity,"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:155:38",
      "file": "engine/layers/ModelLayer.ts",
      "line": 155,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "renderOrder: data?.renderOrder ?? 0,",
      "context": {
        "before": [
          "      castShadow: data?.castShadow ?? true,",
          "      receiveShadow: data?.receiveShadow ?? true,",
          "      frustumCulled: data?.frustumCulled ?? true,"
        ],
        "after": [
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      showSkeleton: data?.showSkeleton ?? false,",
          "      envMapIntensity: data?.envMapIntensity ?? 1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:502:7",
      "file": "engine/layers/ModelLayer.ts",
      "line": 502,
      "column": 7,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "Infinity,",
      "context": {
        "before": [
          "    this.currentAction = this.mixer.clipAction(clip);",
          "    this.currentAction.setLoop(",
          "      this.modelData.animation?.loop ? THREE.LoopRepeat : THREE.LoopOnce,"
        ],
        "after": [
          "    );",
          "    this.currentAction.play();",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:758:44",
      "file": "engine/layers/ModelLayer.ts",
      "line": 758,
      "column": 44,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "return this.modelData.animation?.clips ?? [];",
      "context": {
        "before": [
          "   * Get available animation clips",
          "   */",
          "  getAnimationClips(): ModelAnimationClip[] {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:885:48",
      "file": "engine/layers/ModelLayer.ts",
      "line": 885,
      "column": 48,
      "pattern": "?? {}",
      "severity": "MEDIUM",
      "code": "Object.assign(this.modelData.animation ?? {}, data.animation);",
      "context": {
        "before": [
          "",
          "      // Handle animation settings",
          "      if (data.animation !== undefined) {"
        ],
        "after": [
          "        if (data.animation.activeClip) {",
          "          this.playAnimation(data.animation.activeClip);",
          "        }"
        ]
      },
      "suggestion": "Verify if empty object is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:242:55",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 242,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStartFrame = this.layerData.startFrame ?? 0;",
      "context": {
        "before": [
          "    const stretchFactor = timeStretch !== 0 ? 100 / Math.abs(timeStretch) : 0;",
          "",
          "    // Calculate frame relative to layer start"
        ],
        "after": [
          "    const layerFrame = parentFrame - layerStartFrame;",
          "",
          "    // Apply time stretch and frame rate conversion"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:47:48",
      "file": "engine/layers/NormalLayer.ts",
      "line": 47,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "ambientIntensity: data?.ambientIntensity ?? 0.2,",
      "context": {
        "before": [
          "      arrowColor: data?.arrowColor ?? \"#00ff00\",",
          "      lightDirection: data?.lightDirection ?? { x: 0.5, y: 0.5, z: 1.0 },",
          "      lightIntensity: data?.lightIntensity ?? 1.0,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:196:35",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 196,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: emitter.shapeDepth ?? 0,",
      "context": {
        "before": [
          "          boxSize: {",
          "            x: emitter.shapeWidth ?? 100,",
          "            y: emitter.shapeHeight ?? 100,"
        ],
        "after": [
          "          },",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:214:52",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 214,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "radiusVariance: emitter.shapeInnerRadius ?? 0,",
      "context": {
        "before": [
          "        return {",
          "          type: \"circle\",",
          "          radius: emitter.shapeRadius ?? 50,"
        ],
        "after": [
          "          emitFromEdge: true, // Ring always emits from edge",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:224:56",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 224,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "splineOffset: emitter.splinePath.parameter ?? 0,",
      "context": {
        "before": [
          "          return {",
          "            type: \"spline\",",
          "            splineId: emitter.splinePath.layerId,"
        ],
        "after": [
          "          };",
          "        }",
          "        return { type: \"point\" }; // Fallback if no spline configured"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:234:65",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 234,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "emissionThreshold: emitter.depthMapEmission?.depthMin ?? 0.1,",
      "context": {
        "before": [
          "        // Image data must be set via setEmitterImageData() at runtime",
          "        return {",
          "          type: \"depthEdge\", // Use depth edge emission (emits from depth discontinuities)"
        ],
        "after": [
          "          // imageData and depthData will be provided at runtime",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:243:62",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 243,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "emissionThreshold: emitter.maskEmission?.threshold ?? 0.5,",
      "context": {
        "before": [
          "        // Image data must be set via setEmitterImageData() at runtime",
          "        return {",
          "          type: \"image\","
        ],
        "after": [
          "          // imageData will be provided at runtime",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:294:45",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 294,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "((data.systemConfig.windDirection ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "      // Add global wind as a force field",
          "      if (data.systemConfig.windStrength !== 0) {",
          "        const windAngle ="
        ],
        "after": [
          "        config.forceFields.push({",
          "          id: \"global_wind\",",
          "          name: \"Wind\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:362:44",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 362,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dirRad = ((emitter.direction ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "      for (const emitter of data.emitters) {",
          "        if (!emitter.enabled) continue;",
          ""
        ],
        "after": [
          "",
          "        // Convert emitter shape from project format to GPU format",
          "        const shapeConfig = this.convertEmitterShape(emitter);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:560:47",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 560,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "bounciness: data.collision.bounciness ?? 0.5,",
      "context": {
        "before": [
          "        enabled: true,",
          "        particleCollision: data.collision.particleCollision ?? false,",
          "        particleRadius: data.collision.particleRadius ?? 5,"
        ],
        "after": [
          "        friction: data.collision.friction ?? 0.1,",
          "        bounds: data.collision.boundaryEnabled",
          "          ? {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:561:43",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 561,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "friction: data.collision.friction ?? 0.1,",
      "context": {
        "before": [
          "        particleCollision: data.collision.particleCollision ?? false,",
          "        particleRadius: data.collision.particleRadius ?? 5,",
          "        bounciness: data.collision.bounciness ?? 0.5,"
        ],
        "after": [
          "        bounds: data.collision.boundaryEnabled",
          "          ? {",
          "              min: {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:585:47",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 585,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "data.renderOptions.motionBlurStrength ?? 0.5;",
      "context": {
        "before": [
          "      config.render.blendMode = data.renderOptions.blendMode ?? \"normal\";",
          "      config.render.motionBlur = data.renderOptions.motionBlur ?? false;",
          "      config.render.motionBlurStrength ="
        ],
        "after": [
          "      config.render.motionBlurSamples =",
          "        data.renderOptions.motionBlurSamples ?? 4;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:594:55",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 594,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "1 - (data.renderOptions.trailOpacityFalloff ?? 0.8);",
      "context": {
        "before": [
          "        config.render.mode = \"trail\";",
          "        config.render.trailLength = data.renderOptions.trailLength;",
          "        config.render.trailWidthEnd ="
        ],
        "after": [
          "      }",
          "",
          "      // Particle shape affects procedural rendering"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:614:67",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 614,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "lineOpacity: data.renderOptions.connections.lineOpacity ?? 0.5,",
      "context": {
        "before": [
          "          maxDistance: data.renderOptions.connections.maxDistance ?? 100,",
          "          maxConnections: data.renderOptions.connections.maxConnections ?? 5,",
          "          lineWidth: data.renderOptions.connections.lineWidth ?? 1,"
        ],
        "after": [
          "          fadeByDistance: data.renderOptions.connections.fadeByDistance ?? true,",
          "          color: data.renderOptions.connections.color,",
          "        };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:625:55",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 625,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intensity: data.renderOptions.glowIntensity ?? 0.5,",
      "context": {
        "before": [
          "        this.pendingGlowConfig = {",
          "          enabled: true,",
          "          radius: data.renderOptions.glowRadius ?? 10,"
        ],
        "after": [
          "        };",
          "      }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1197:55",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1197,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStartFrame = this.layerData.startFrame ?? 0;",
      "context": {
        "before": [
          "    const stretchFactor = timeStretch !== 0 ? 100 / Math.abs(timeStretch) : 0;",
          "",
          "    // Calculate frame relative to layer start"
        ],
        "after": [
          "    const relativeFrame = compositionFrame - layerStartFrame;",
          "",
          "    // Apply time stretch"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1253:31",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1253,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = state.frame ?? 0;",
      "context": {
        "before": [
          "  ): void {",
          "    // ParticleLayer needs to step the simulation for the current frame",
          "    // The evaluated state includes the frame number for deterministic simulation"
        ],
        "after": [
          "",
          "    // Store per-emitter audio modifiers for targeted emission rate control",
          "    this.currentEmitterAudioModifiers = state.emitterAudioModifiers as"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:82:42",
      "file": "engine/layers/PathLayer.ts",
      "line": 82,
      "column": 42,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "controlPoints: data?.controlPoints ?? [],",
      "context": {
        "before": [
          "    const data = layerData.data as PathLayerData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      closed: data?.closed ?? false,",
          "      pathData: data?.pathData ?? \"\",",
          "      showGuide: data?.showGuide ?? true,"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:111:27",
      "file": "engine/layers/PathLayer.ts",
      "line": 111,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const z0 = p0.depth ?? 0;",
      "context": {
        "before": [
          "      const p1 = points[i + 1];",
          "",
          "      // Use depth for Z position (if available)"
        ],
        "after": [
          "      const z1 = p1.depth ?? 0;",
          "",
          "      // Create bezier curve segment"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:112:27",
      "file": "engine/layers/PathLayer.ts",
      "line": 112,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const z1 = p1.depth ?? 0;",
      "context": {
        "before": [
          "",
          "      // Use depth for Z position (if available)",
          "      const z0 = p0.depth ?? 0;"
        ],
        "after": [
          "",
          "      // Create bezier curve segment",
          "      // Handles are stored as ABSOLUTE positions"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:139:37",
      "file": "engine/layers/PathLayer.ts",
      "line": 139,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const zLast = lastPoint.depth ?? 0;",
      "context": {
        "before": [
          "      const lastPoint = points[points.length - 1];",
          "      const firstPoint = points[0];",
          ""
        ],
        "after": [
          "      const zFirst = firstPoint.depth ?? 0;",
          "",
          "      const closingBezier = new THREE.CubicBezierCurve3("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:140:39",
      "file": "engine/layers/PathLayer.ts",
      "line": 140,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const zFirst = firstPoint.depth ?? 0;",
      "context": {
        "before": [
          "      const firstPoint = points[0];",
          "",
          "      const zLast = lastPoint.depth ?? 0;"
        ],
        "after": [
          "",
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:325:25",
      "file": "engine/layers/PathLayer.ts",
      "line": 325,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depth: cp.depth ?? 0,",
      "context": {
        "before": [
          "        id: cp.id,",
          "        x: cp.x,",
          "        y: cp.y,"
        ],
        "after": [
          "        handleIn: cp.handleIn,",
          "        handleOut: cp.handleOut,",
          "        type: cp.type,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:126:36",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 126,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "pointCount: data?.pointCount ?? 0,",
      "context": {
        "before": [
          "    return {",
          "      assetId: data?.assetId ?? \"\",",
          "      format: data?.format ?? \"ply\","
        ],
        "after": [
          "      pointSize: data?.pointSize ?? defaultPointSize,",
          "      sizeAttenuation: data?.sizeAttenuation ?? true,",
          "      minPointSize: data?.minPointSize ?? 1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:918:17",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 918,
      "column": 17,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let min = Infinity,",
      "context": {
        "before": [
          "      const colors = new Float32Array(count * 3);",
          "",
          "      // Find min/max intensity"
        ],
        "after": [
          "        max = -Infinity;",
          "      for (let i = 0; i < count; i++) {",
          "        min = Math.min(min, intensities[i]);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:919:16",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 919,
      "column": 16,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "max = -Infinity;",
      "context": {
        "before": [
          "",
          "      // Find min/max intensity",
          "      let min = Infinity,"
        ],
        "after": [
          "      for (let i = 0; i < count; i++) {",
          "        min = Math.min(min, intensities[i]);",
          "        max = Math.max(max, intensities[i]);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:300:66",
      "file": "engine/layers/PoseLayer.ts",
      "line": 300,
      "column": 66,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "const data = (this.layerData.data as Partial<PoseLayerData>) || {};",
      "context": {
        "before": [
          "   * Get pose data with defaults",
          "   */",
          "  private getPoseData(): PoseLayerData {"
        ],
        "after": [
          "    return {",
          "      ...createDefaultPoseLayerData(),",
          "      ...data,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:168:42",
      "file": "engine/layers/SplineLayer.ts",
      "line": 168,
      "column": 42,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "controlPoints: data?.controlPoints ?? [],",
      "context": {
        "before": [
          "    const data = layerData.data as SplineData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      closed: data?.closed ?? false,",
          "      stroke: data?.stroke ?? \"#00ff00\",",
          "      strokeWidth: data?.strokeWidth ?? 2,"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:444:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 444,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const z0 = p0.depth ?? 0;",
      "context": {
        "before": [
          "      const p1 = points[i + 1];",
          "",
          "      // Use depth for Z position (depth map sampled value)"
        ],
        "after": [
          "      const z1 = p1.depth ?? 0;",
          "",
          "      // Create bezier curve segment"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:445:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 445,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const z1 = p1.depth ?? 0;",
      "context": {
        "before": [
          "",
          "      // Use depth for Z position (depth map sampled value)",
          "      const z0 = p0.depth ?? 0;"
        ],
        "after": [
          "",
          "      // Create bezier curve segment",
          "      // Handles are stored as ABSOLUTE positions, not relative offsets"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:472:37",
      "file": "engine/layers/SplineLayer.ts",
      "line": 472,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const zLast = lastPoint.depth ?? 0;",
      "context": {
        "before": [
          "      const lastPoint = points[points.length - 1];",
          "      const firstPoint = points[0];",
          ""
        ],
        "after": [
          "      const zFirst = firstPoint.depth ?? 0;",
          "",
          "      // Closing bezier also uses absolute handle positions"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:473:39",
      "file": "engine/layers/SplineLayer.ts",
      "line": 473,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const zFirst = firstPoint.depth ?? 0;",
      "context": {
        "before": [
          "      const firstPoint = points[0];",
          "",
          "      const zLast = lastPoint.depth ?? 0;"
        ],
        "after": [
          "",
          "      // Closing bezier also uses absolute handle positions",
          "      const closingBezier = new THREE.CubicBezierCurve3("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:968:73",
      "file": "engine/layers/SplineLayer.ts",
      "line": 968,
      "column": 73,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depth: this.getDrivenControlPointValue(index, \"depth\", cp.depth ?? 0),",
      "context": {
        "before": [
          "        id: cp.id,",
          "        x: this.getDrivenControlPointValue(index, \"x\", cp.x),",
          "        y: this.getDrivenControlPointValue(index, \"y\", cp.y),"
        ],
        "after": [
          "        handleIn: cp.handleIn,",
          "        handleOut: cp.handleOut,",
          "        type: cp.type,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1475:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1475,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depth: cp.depth ?? 0,",
      "context": {
        "before": [
          "          id: cp.id,",
          "          x: cp.x,",
          "          y: cp.y,"
        ],
        "after": [
          "          handleIn: cp.handleIn,",
          "          handleOut: cp.handleOut,",
          "          type: cp.type,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1520:29",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1520,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depth: cp.depth ?? 0,",
      "context": {
        "before": [
          "            y: cp.y,",
          "            handleIn: cp.handleIn ?? { x: cp.x, y: cp.y },",
          "            handleOut: cp.handleOut ?? { x: cp.x, y: cp.y },"
        ],
        "after": [
          "            type: cp.type,",
          "            group: cp.group,",
          "          }));"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1655:28",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1655,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x: point.x + (xMod ?? 0),",
      "context": {
        "before": [
          "      // Apply additive modifiers",
          "      return {",
          "        ...point,"
        ],
        "after": [
          "        y: point.y + (yMod ?? 0),",
          "        depth: point.depth + (depthMod ?? 0),",
          "      };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1656:28",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1656,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y: point.y + (yMod ?? 0),",
      "context": {
        "before": [
          "      return {",
          "        ...point,",
          "        x: point.x + (xMod ?? 0),"
        ],
        "after": [
          "        depth: point.depth + (depthMod ?? 0),",
          "      };",
          "    });"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1657:40",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1657,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depth: point.depth + (depthMod ?? 0),",
      "context": {
        "before": [
          "        ...point,",
          "        x: point.x + (xMod ?? 0),",
          "        y: point.y + (yMod ?? 0),"
        ],
        "after": [
          "      };",
          "    });",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:163:46",
      "file": "engine/layers/TextLayer.ts",
      "line": 163,
      "column": 46,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "this.animators = this.textData.animators ?? [];",
      "context": {
        "before": [
          "    this.textData = this.extractTextData(layerData);",
          "",
          "    // Initialize animators from text data (for quick access during frame evaluation)"
        ],
        "after": [
          "",
          "    // Extract animatable properties",
          "    this.extractAnimatableProperties(layerData);"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:250:38",
      "file": "engine/layers/TextLayer.ts",
      "line": 250,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "strokeWidth: data?.strokeWidth ?? 0,",
      "context": {
        "before": [
          "      fontStyle: data?.fontStyle ?? \"normal\",",
          "      fill: data?.fill ?? \"#ffffff\",",
          "      stroke: data?.stroke ?? \"\","
        ],
        "after": [
          "",
          "      // Character properties",
          "      tracking: data?.tracking ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:253:32",
      "file": "engine/layers/TextLayer.ts",
      "line": 253,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tracking: data?.tracking ?? 0,",
      "context": {
        "before": [
          "      strokeWidth: data?.strokeWidth ?? 0,",
          "",
          "      // Character properties"
        ],
        "after": [
          "      lineSpacing: data?.lineSpacing ?? 0,",
          "      lineAnchor: data?.lineAnchor ?? 50,",
          "      characterOffset: data?.characterOffset ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:254:38",
      "file": "engine/layers/TextLayer.ts",
      "line": 254,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "lineSpacing: data?.lineSpacing ?? 0,",
      "context": {
        "before": [
          "",
          "      // Character properties",
          "      tracking: data?.tracking ?? 0,"
        ],
        "after": [
          "      lineAnchor: data?.lineAnchor ?? 50,",
          "      characterOffset: data?.characterOffset ?? 0,",
          "      characterValue: data?.characterValue ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:256:46",
      "file": "engine/layers/TextLayer.ts",
      "line": 256,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "characterOffset: data?.characterOffset ?? 0,",
      "context": {
        "before": [
          "      tracking: data?.tracking ?? 0,",
          "      lineSpacing: data?.lineSpacing ?? 0,",
          "      lineAnchor: data?.lineAnchor ?? 50,"
        ],
        "after": [
          "      characterValue: data?.characterValue ?? 0,",
          "      blur: data?.blur ?? { x: 0, y: 0 },",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:257:44",
      "file": "engine/layers/TextLayer.ts",
      "line": 257,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "characterValue: data?.characterValue ?? 0,",
      "context": {
        "before": [
          "      lineSpacing: data?.lineSpacing ?? 0,",
          "      lineAnchor: data?.lineAnchor ?? 50,",
          "      characterOffset: data?.characterOffset ?? 0,"
        ],
        "after": [
          "      blur: data?.blur ?? { x: 0, y: 0 },",
          "",
          "      // Paragraph (aliases)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:261:60",
      "file": "engine/layers/TextLayer.ts",
      "line": 261,
      "column": 60,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "letterSpacing: data?.letterSpacing ?? data?.tracking ?? 0,",
      "context": {
        "before": [
          "      blur: data?.blur ?? { x: 0, y: 0 },",
          "",
          "      // Paragraph (aliases)"
        ],
        "after": [
          "      lineHeight: data?.lineHeight ?? data?.lineSpacing ?? 1.2,",
          "      textAlign: data?.textAlign ?? \"left\",",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:270:46",
      "file": "engine/layers/TextLayer.ts",
      "line": 270,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "pathFirstMargin: data?.pathFirstMargin ?? 0,",
      "context": {
        "before": [
          "      pathReversed: data?.pathReversed ?? false,",
          "      pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,",
          "      pathForceAlignment: data?.pathForceAlignment ?? false,"
        ],
        "after": [
          "      pathLastMargin: data?.pathLastMargin ?? 0,",
          "      pathOffset: data?.pathOffset ?? 0,",
          "      pathAlign: data?.pathAlign ?? \"left\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:271:44",
      "file": "engine/layers/TextLayer.ts",
      "line": 271,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "pathLastMargin: data?.pathLastMargin ?? 0,",
      "context": {
        "before": [
          "      pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,",
          "      pathForceAlignment: data?.pathForceAlignment ?? false,",
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,"
        ],
        "after": [
          "      pathOffset: data?.pathOffset ?? 0,",
          "      pathAlign: data?.pathAlign ?? \"left\",",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:272:36",
      "file": "engine/layers/TextLayer.ts",
      "line": 272,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "pathOffset: data?.pathOffset ?? 0,",
      "context": {
        "before": [
          "      pathForceAlignment: data?.pathForceAlignment ?? false,",
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,",
          "      pathLastMargin: data?.pathLastMargin ?? 0,"
        ],
        "after": [
          "      pathAlign: data?.pathAlign ?? \"left\",",
          "",
          "      // More Options"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:285:34",
      "file": "engine/layers/TextLayer.ts",
      "line": 285,
      "column": 34,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "animators: data?.animators ?? [],",
      "context": {
        "before": [
          "      perCharacter3D: data?.perCharacter3D ?? false,",
          "",
          "      // Text animators"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:377:50",
      "file": "engine/layers/TextLayer.ts",
      "line": 377,
      "column": 50,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "text.letterSpacing = (this.textData.tracking || 0) / 1000;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Spacing - Troika uses em units for letter spacing"
        ],
        "after": [
          "    text.lineHeight = this.textData.lineHeight || 1.2;",
          "",
          "    // Alignment"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:593:49",
      "file": "engine/layers/TextLayer.ts",
      "line": 593,
      "column": 49,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "letterSpacing: this.textData.tracking ?? 0,",
      "context": {
        "before": [
          "        fontSize,",
          "        {",
          "          kern: this.textData.kerning ?? true,"
        ],
        "after": [
          "        },",
          "      );",
          "      this.characterWidthsDirty = false;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1208:41",
      "file": "engine/layers/TextLayer.ts",
      "line": 1208,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "letterSpacing: mesh.letterSpacing ?? 0,",
      "context": {
        "before": [
          "      scaleY: mesh.scale.y,",
          "      opacity: mesh.fillOpacity ?? 1,",
          "      color: mesh.color,"
        ],
        "after": [
          "    }));",
          "",
          "    // Track if any layout properties were modified (require Troika sync)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:129:34",
      "file": "engine/layers/VideoLayer.ts",
      "line": 129,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startTime: data?.startTime ?? 0,",
      "context": {
        "before": [
          "      assetId: data?.assetId ?? null,",
          "      loop: data?.loop ?? false,",
          "      pingPong: data?.pingPong ?? false,"
        ],
        "after": [
          "      endTime: data?.endTime,",
          "      speed: data?.speed ?? 1,",
          "      // Speed map (new naming)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:142:38",
      "file": "engine/layers/VideoLayer.ts",
      "line": 142,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "posterFrame: data?.posterFrame ?? 0,",
      "context": {
        "before": [
          "      frameBlending: data?.frameBlending ?? \"none\",",
          "      audioEnabled: data?.audioEnabled ?? true,",
          "      audioLevel: data?.audioLevel ?? 100,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:537:55",
      "file": "engine/layers/VideoLayer.ts",
      "line": 537,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStartFrame = this.layerData.startFrame ?? 0;",
      "context": {
        "before": [
          "    const effectiveSpeed = stretchFactor * speed;",
          "",
          "    // Calculate time relative to layer start"
        ],
        "after": [
          "    const layerFrame = compositionFrame - layerStartFrame;",
          "    // Validate FPS (NaN would cause division issues)",
          "    const compFps ="
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:312:47",
      "file": "engine/MotionEngine.ts",
      "line": 312,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startFrame: l.startFrame ?? l.inPoint ?? 0,",
      "context": {
        "before": [
          "      layerStates: comp.layers.map((l) => ({",
          "        id: l.id,",
          "        visible: l.visible,"
        ],
        "after": [
          "        endFrame: l.endFrame ?? l.outPoint ?? 80,",
          "        kfCount: l.properties.reduce(",
          "          (sum, p) => sum + (p.keyframes?.length || 0),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:315:50",
      "file": "engine/MotionEngine.ts",
      "line": 315,
      "column": 50,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(sum, p) => sum + (p.keyframes?.length || 0),",
      "context": {
        "before": [
          "        startFrame: l.startFrame ?? l.inPoint ?? 0,",
          "        endFrame: l.endFrame ?? l.outPoint ?? 80,",
          "        kfCount: l.properties.reduce("
        ],
        "after": [
          "          0,",
          "        ),",
          "      })),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:654:53",
      "file": "engine/MotionEngine.ts",
      "line": 654,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "   * Check if a layer is visible at a given frame",
          "   */",
          "  isLayerVisibleAtFrame(layer: Layer, frame: number): boolean {"
        ],
        "after": [
          "    const end = layer.endFrame ?? layer.outPoint ?? 80;",
          "    return layer.visible && frame >= start && frame <= end;",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:673:55",
      "file": "engine/MotionEngine.ts",
      "line": 673,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "    const evaluated: EvaluatedLayer[] = [];",
          "",
          "    for (const layer of layers) {"
        ],
        "after": [
          "      const end = layer.endFrame ?? layer.outPoint ?? 80;",
          "      const inRange = frame >= start && frame <= end;",
          "      const visible = layer.visible && inRange;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1048:47",
      "file": "engine/MotionEngine.ts",
      "line": 1048,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "frame >= (l.startFrame ?? l.inPoint ?? 0) &&",
      "context": {
        "before": [
          "        (l) =>",
          "          l.type === \"camera\" &&",
          "          l.visible &&"
        ],
        "after": [
          "          frame <= (l.endFrame ?? l.outPoint ?? 80),",
          "      );",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1086:49",
      "file": "engine/MotionEngine.ts",
      "line": 1086,
      "column": 49,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "position = { x: pos.x, y: pos.y, z: pos.z ?? 0 };",
      "context": {
        "before": [
          "        fps,",
          "        cameraLayer.id,",
          "      );"
        ],
        "after": [
          "    }",
          "",
          "    if (cameraData.animatedTarget) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1096:47",
      "file": "engine/MotionEngine.ts",
      "line": 1096,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "target = { x: tgt.x, y: tgt.y, z: tgt.z ?? 0 };",
      "context": {
        "before": [
          "        fps,",
          "        cameraLayer.id,",
          "      );"
        ],
        "after": [
          "    }",
          "",
          "    if (cameraData.animatedFov) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1362:55",
      "file": "engine/MotionEngine.ts",
      "line": 1362,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "",
          "    for (const layer of layers) {",
          "      if (layer.type !== \"particles\" || !layer.visible) continue;"
        ],
        "after": [
          "      const end = layer.endFrame ?? layer.outPoint ?? 80;",
          "      if (frame < start || frame > end) continue;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1404:46",
      "file": "engine/MotionEngine.ts",
      "line": 1404,
      "column": 46,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "turbulenceFields: sys.turbulenceFields ?? [],",
      "context": {
        "before": [
          "      respectMaskBoundary: sys.respectMaskBoundary,",
          "      boundaryBehavior: sys.boundaryBehavior,",
          "      friction: sys.friction,"
        ],
        "after": [
          "      subEmitters: sys.subEmitters ?? [],",
          "      collision: {",
          "        enabled: false,"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1405:36",
      "file": "engine/MotionEngine.ts",
      "line": 1405,
      "column": 36,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "subEmitters: sys.subEmitters ?? [],",
      "context": {
        "before": [
          "      boundaryBehavior: sys.boundaryBehavior,",
          "      friction: sys.friction,",
          "      turbulenceFields: sys.turbulenceFields ?? [],"
        ],
        "after": [
          "      collision: {",
          "        enabled: false,",
          "        particleCollision: false,"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:724:55",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 724,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "trailWidthEnd: this.config.render.trailWidthEnd ?? 0.5,",
      "context": {
        "before": [
          "      trailLength: this.config.render.trailLength,",
          "      trailSegments: this.config.render.trailSegments ?? 8,",
          "      trailWidthStart: this.config.render.trailWidthStart ?? 1,"
        ],
        "after": [
          "      trailFadeMode: this.config.render.trailFadeMode ?? \"alpha\",",
          "    };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:924:37",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 924,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "strength: config.strength ?? 0.1,",
      "context": {
        "before": [
          "      this.textureSystem.setMotionBlur(",
          "        {",
          "          enabled: config.enabled,"
        ],
        "after": [
          "          minStretch: config.minStretch ?? 1.0,",
          "          maxStretch: config.maxStretch ?? 4.0,",
          "        },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1307:77",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1307,
      "column": 77,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "buffer[offset + 8] = Math.max(rawMass, 0.001); // Minimum mass prevents Infinity forces",
      "context": {
        "before": [
          "    // Validate mass: must be positive to avoid division by zero in force calculations",
          "    const rawMass =",
          "      emitter.initialMass + (this.rng() - 0.5) * 2 * emitter.massVariance;"
        ],
        "after": [
          "",
          "    // Validate size: must be positive for rendering",
          "    const rawSize ="
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1387:56",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1387,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const randomOffset = initialValues?.randomOffset ?? 0.5;",
      "context": {
        "before": [
          "      const initialValues = this.particleInitialValues.get(i);",
          "      const initialSize = initialValues?.size ?? buffer[offset + 9];",
          "      const initialOpacity = initialValues?.opacity ?? buffer[offset + 15];"
        ],
        "after": [
          "",
          "      // Evaluate all lifetime modulation curves before physics simulation",
          "      const lifeRatio = age / lifetime;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1824:54",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1824,
      "column": 54,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "value: this.config.render.motionBlurStrength ?? 0.1,",
      "context": {
        "before": [
          "      // Motion blur uniforms",
          "      motionBlurEnabled: { value: this.config.render.motionBlur ? 1 : 0 },",
          "      motionBlurStrength: {"
        ],
        "after": [
          "      },",
          "      minStretch: { value: this.config.render.minStretch ?? 1.0 },",
          "      maxStretch: { value: this.config.render.maxStretch ?? 4.0 },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1836:55",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1836,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "u_shadowBias: { value: shadowConfig?.shadowBias ?? 0.001 },",
      "context": {
        "before": [
          "      u_shadowMap: { value: null },",
          "      u_shadowMatrix: { value: new THREE.Matrix4() },",
          "      u_shadowSoftness: { value: shadowConfig?.shadowSoftness ?? 1.0 },"
        ],
        "after": [
          "      // Ambient occlusion uniforms",
          "      u_aoEnabled: { value: shadowConfig?.aoEnabled ? 1 : 0 },",
          "      u_aoTexture: { value: null },"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1849:52",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1849,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.config.render.lodSizeMultipliers?.[1] ?? 0.5,",
      "context": {
        "before": [
          "      )},",
          "      lodSizeMultipliers: { value: new THREE.Vector3(",
          "        this.config.render.lodSizeMultipliers?.[0] ?? 1.0,"
        ],
        "after": [
          "        this.config.render.lodSizeMultipliers?.[2] ?? 0.25,",
          "      )},",
          "      // 3D mesh mode (0 = billboard, 1 = 3D mesh)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1850:52",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1850,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.config.render.lodSizeMultipliers?.[2] ?? 0.25,",
      "context": {
        "before": [
          "      lodSizeMultipliers: { value: new THREE.Vector3(",
          "        this.config.render.lodSizeMultipliers?.[0] ?? 1.0,",
          "        this.config.render.lodSizeMultipliers?.[1] ?? 0.5,"
        ],
        "after": [
          "      )},",
          "      // 3D mesh mode (0 = billboard, 1 = 3D mesh)",
          "      meshMode3D: { value: this.config.render.meshGeometry !== \"billboard\" ? 1 : 0 },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1858:58",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1858,
      "column": 58,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "dofMaxBlur: { value: this.config.render.dofMaxBlur ?? 0.5 },",
      "context": {
        "before": [
          "      dofEnabled: { value: this.config.render.dofEnabled ? 1 : 0 },",
          "      dofFocusDistance: { value: this.config.render.dofFocusDistance ?? 500 },",
          "      dofFocusRange: { value: this.config.render.dofFocusRange ?? 200 },"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2076:53",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2076,
      "column": 53,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const warmupFrames = this.config.warmupFrames || 0;",
      "context": {
        "before": [
          "    // If starting from 0, reset first",
          "    if (startFrame === 0) {",
          "      this.reset();"
        ],
        "after": [
          "      if (warmupFrames > 0) {",
          "        for (let w = 0; w < warmupFrames; w++) {",
          "          this.step(deltaTime);"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:69:45",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 69,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "surfaceTension: config.surfaceTension ?? 0.0728,",
      "context": {
        "before": [
          "      restDensity: config.restDensity ?? 1000,",
          "      gasConstant: config.gasConstant ?? 2000,",
          "      viscosity: config.viscosity ?? 200,"
        ],
        "after": [
          "      enableSurfaceTension: config.enableSurfaceTension ?? false,",
          "      gravity: config.gravity ?? { x: 0, y: -980, z: 0 },",
          "      maxTimeStep: config.maxTimeStep ?? 0.004,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:72:39",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 72,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "maxTimeStep: config.maxTimeStep ?? 0.004,",
      "context": {
        "before": [
          "      surfaceTension: config.surfaceTension ?? 0.0728,",
          "      enableSurfaceTension: config.enableSurfaceTension ?? false,",
          "      gravity: config.gravity ?? { x: 0, y: -980, z: 0 },"
        ],
        "after": [
          "    };",
          "",
          "    // Create CPU fallback"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:272:38",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 272,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "breakThreshold: breakThreshold ?? 0,",
      "context": {
        "before": [
          "      restLength: Math.max(0.001, restLength),",
          "      stiffness: stiffness ?? this.config.globalStiffness,",
          "      damping: damping ?? this.config.globalDamping,"
        ],
        "after": [
          "      active: true,",
          "    });",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:55:44",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 55,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return this.audioFeatures.get(feature) ?? 0;",
      "context": {
        "before": [
          "   * Get audio feature value",
          "   */",
          "  getFeature(feature: AudioFeature): number {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:101:68",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 101,
      "column": 68,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const featureValue = this.audioFeatures.get(binding.feature) ?? 0;",
      "context": {
        "before": [
          "  ): void {",
          "    for (let i = 0; i < this.audioBindings.length; i++) {",
          "      const binding = this.audioBindings[i];"
        ],
        "after": [
          "",
          "      // Apply exponential moving average (EMA) smoothing",
          "      // smoothing = 0 means no smoothing (instant response)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:149:61",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 149,
      "column": 61,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const onsetValue = this.audioFeatures.get(\"onsets\") ?? 0;",
      "context": {
        "before": [
          "        if (t < threshold) continue;",
          "      } else if (triggerMode === \"onBeat\") {",
          "        // Only apply when beat/onset is detected"
        ],
        "after": [
          "        if (onsetValue < 0.5) continue;",
          "      }",
          "      // triggerMode === 'continuous' - always apply (default behavior)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:185:70",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 185,
      "column": 70,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const featureValue = this.audioFeatures.get(binding.feature) ?? 0;",
      "context": {
        "before": [
          "        binding.targetId === targetId &&",
          "        binding.parameter === parameter",
          "      ) {"
        ],
        "after": [
          "        // Validate min/max separately to handle NaN",
          "        const safeMin = Number.isFinite(binding.min) ? binding.min : 0;",
          "        const safeMax = Number.isFinite(binding.max) ? binding.max : 1;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:83:37",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 83,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "bounciness: config.bounciness ?? 0.5,",
      "context": {
        "before": [
          "      enabled: config.enabled ?? true,",
          "      particleCollision: config.particleCollision ?? false,",
          "      particleRadius: config.particleRadius ?? 5,"
        ],
        "after": [
          "      friction: config.friction ?? 0.1,",
          "      collisionResponse: config.collisionResponse ?? 0.5,",
          "      bounceDamping: config.bounceDamping ?? 0.8,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:84:33",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 84,
      "column": 33,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "friction: config.friction ?? 0.1,",
      "context": {
        "before": [
          "      particleCollision: config.particleCollision ?? false,",
          "      particleRadius: config.particleRadius ?? 5,",
          "      bounciness: config.bounciness ?? 0.5,"
        ],
        "after": [
          "      collisionResponse: config.collisionResponse ?? 0.5,",
          "      bounceDamping: config.bounceDamping ?? 0.8,",
          "      bounds: config.bounds,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:85:51",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 85,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "collisionResponse: config.collisionResponse ?? 0.5,",
      "context": {
        "before": [
          "      particleRadius: config.particleRadius ?? 5,",
          "      bounciness: config.bounciness ?? 0.5,",
          "      friction: config.friction ?? 0.1,"
        ],
        "after": [
          "      bounceDamping: config.bounceDamping ?? 0.8,",
          "      bounds: config.bounds,",
          "      boundsBehavior: config.boundsBehavior ?? \"none\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:86:43",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 86,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "bounceDamping: config.bounceDamping ?? 0.8,",
      "context": {
        "before": [
          "      bounciness: config.bounciness ?? 0.5,",
          "      friction: config.friction ?? 0.1,",
          "      collisionResponse: config.collisionResponse ?? 0.5,"
        ],
        "after": [
          "      bounds: config.bounds,",
          "      boundsBehavior: config.boundsBehavior ?? \"none\",",
          "      planes: config.planes ?? [],  // Must explicitly copy - collision planes wouldn't work otherwise"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:89:29",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 89,
      "column": 29,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "planes: config.planes ?? [],  // Must explicitly copy - collision planes wouldn't work otherwise",
      "context": {
        "before": [
          "      bounceDamping: config.bounceDamping ?? 0.8,",
          "      bounds: config.bounds,",
          "      boundsBehavior: config.boundsBehavior ?? \"none\","
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:629:36",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 629,
      "column": 36,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return [...(this.config.planes || [])];",
      "context": {
        "before": [
          "   * Get all collision planes",
          "   */",
          "  getPlanes(): CollisionPlane[] {"
        ],
        "after": [
          "  }",
          "}",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:162:59",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 162,
      "column": 59,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const p1Connections = connectionCount.get(p1.index) ?? 0;",
      "context": {
        "before": [
          "    const processedPairs = new Set<string>();",
          "",
          "    for (const p1 of activeParticles) {"
        ],
        "after": [
          "      if (p1Connections >= this.config.maxConnections) continue;",
          "",
          "      // Query 3x3x3 neighborhood of cells"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:184:67",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 184,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const p2Connections = connectionCount.get(p2.index) ?? 0;",
      "context": {
        "before": [
          "              if (processedPairs.has(pairKey)) continue;",
          "              processedPairs.add(pairKey);",
          ""
        ],
        "after": [
          "              if (p2Connections >= this.config.maxConnections) continue;",
          "",
          "              // Calculate distance"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:235:50",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 235,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(connectionCount.get(p1.index) ?? 0) + 1,",
      "context": {
        "before": [
          "                // Update connection counts",
          "                connectionCount.set(",
          "                  p1.index,"
        ],
        "after": [
          "                );",
          "                connectionCount.set(p2.index, p2Connections + 1);",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:241:50",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 241,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(connectionCount.get(p1.index) ?? 0) >=",
      "context": {
        "before": [
          "",
          "                // Check if we've maxed out this particle's connections",
          "                if ("
        ],
        "after": [
          "                  this.config.maxConnections",
          "                )",
          "                  break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:248:46",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 248,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(connectionCount.get(p1.index) ?? 0) >= this.config.maxConnections",
      "context": {
        "before": [
          "              }",
          "            }",
          "            if ("
        ],
        "after": [
          "            )",
          "              break;",
          "          }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:253:44",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 253,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(connectionCount.get(p1.index) ?? 0) >= this.config.maxConnections",
      "context": {
        "before": [
          "              break;",
          "          }",
          "          if ("
        ],
        "after": [
          "          )",
          "            break;",
          "        }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:257:44",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 257,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "if ((connectionCount.get(p1.index) ?? 0) >= this.config.maxConnections)",
      "context": {
        "before": [
          "          )",
          "            break;",
          "        }"
        ],
        "after": [
          "          break;",
          "      }",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:138:52",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 138,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawThreshold = shape.emissionThreshold ?? 0.1;",
      "context": {
        "before": [
          "",
          "      const { width, height, data } = shape.imageData;",
          "      // Validate threshold"
        ],
        "after": [
          "      const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.1;",
          "",
          "      // Try up to 100 times to find a valid pixel"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:173:52",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 173,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawThreshold = shape.emissionThreshold ?? 0.05;",
      "context": {
        "before": [
          "",
          "      const depthData = shape.depthData;",
          "      // Validate threshold"
        ],
        "after": [
          "      const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.05;",
          "",
          "      // Try up to 100 times to find an edge pixel"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:223:61",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 223,
      "column": 61,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return new THREE.Vector3(point.x, -point.y, point.z ?? 0);",
      "context": {
        "before": [
          "",
          "      const point = splineProvider(shape.splineId, t);",
          "      if (point) {"
        ],
        "after": [
          "      }",
          "      return base;",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:80:29",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 80,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(field.direction?.x ?? 0) * strength,",
      "context": {
        "before": [
          "  switch (field.type) {",
          "    case \"gravity\":",
          "      force.set("
        ],
        "after": [
          "        (field.direction?.y ?? 1) * strength,",
          "        (field.direction?.z ?? 0) * strength,",
          "      );"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:82:29",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 82,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(field.direction?.z ?? 0) * strength,",
      "context": {
        "before": [
          "      force.set(",
          "        (field.direction?.x ?? 0) * strength,",
          "        (field.direction?.y ?? 1) * strength,"
        ],
        "after": [
          "      );",
          "      break;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:98:31",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 98,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.vortexAxis?.x ?? 0,",
      "context": {
        "before": [
          "    case \"vortex\":",
          "      if (dist > 0.001) {",
          "        const axis = new THREE.Vector3("
        ],
        "after": [
          "          field.vortexAxis?.y ?? 0,",
          "          field.vortexAxis?.z ?? 1,",
          "        ).normalize();"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:99:31",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 99,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.vortexAxis?.y ?? 0,",
      "context": {
        "before": [
          "      if (dist > 0.001) {",
          "        const axis = new THREE.Vector3(",
          "          field.vortexAxis?.x ?? 0,"
        ],
        "after": [
          "          field.vortexAxis?.z ?? 1,",
          "        ).normalize();",
          "        const toParticle = new THREE.Vector3(dx, dy, dz);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:108:47",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 108,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": ".multiplyScalar(-(field.inwardForce ?? 0));",
      "context": {
        "before": [
          "          .normalize();",
          "        const inward = toParticle",
          "          .normalize()"
        ],
        "after": [
          "        force.copy(tangent).multiplyScalar(strength).add(inward);",
          "      }",
          "      break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:114:41",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 114,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawScale = field.noiseScale ?? 0.01;",
      "context": {
        "before": [
          "      break;",
          "",
          "    case \"turbulence\": {"
        ],
        "after": [
          "      const scale = Number.isFinite(rawScale) ? rawScale : 0.01;",
          "      const rawSpeed = field.noiseSpeed ?? 0.5;",
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:116:41",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 116,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawSpeed = field.noiseSpeed ?? 0.5;",
      "context": {
        "before": [
          "    case \"turbulence\": {",
          "      const rawScale = field.noiseScale ?? 0.01;",
          "      const scale = Number.isFinite(rawScale) ? rawScale : 0.01;"
        ],
        "after": [
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN",
          "      const time = Number.isFinite(simulationTime * speed) ? simulationTime * speed : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:140:48",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 140,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawLinearDrag = field.linearDrag ?? 0.1;",
      "context": {
        "before": [
          "      const speed = Math.sqrt(vx * vx + vy * vy + vz * vz);",
          "      if (speed > 0.001) {",
          "        // Validate drag coefficients to prevent NaN"
        ],
        "after": [
          "        const linearDrag = Number.isFinite(rawLinearDrag) ? rawLinearDrag : 0.1;",
          "        const rawQuadDrag = field.quadraticDrag ?? 0.01;",
          "        const quadDrag = Number.isFinite(rawQuadDrag) ? rawQuadDrag : 0.01;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:142:49",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 142,
      "column": 49,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawQuadDrag = field.quadraticDrag ?? 0.01;",
      "context": {
        "before": [
          "        // Validate drag coefficients to prevent NaN",
          "        const rawLinearDrag = field.linearDrag ?? 0.1;",
          "        const linearDrag = Number.isFinite(rawLinearDrag) ? rawLinearDrag : 0.1;"
        ],
        "after": [
          "        const quadDrag = Number.isFinite(rawQuadDrag) ? rawQuadDrag : 0.01;",
          "        const dragMag = linearDrag * speed + quadDrag * speed * speed;",
          "        // Drag opposes velocity: F = -c * v_normalized * |v|^n"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:158:32",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 158,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.windDirection?.y ?? 0,",
      "context": {
        "before": [
          "    case \"wind\": {",
          "      const windDir = new THREE.Vector3(",
          "        field.windDirection?.x ?? 1,"
        ],
        "after": [
          "        field.windDirection?.z ?? 0,",
          "      ).normalize();",
          "      const gust ="
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:159:32",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 159,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.windDirection?.z ?? 0,",
      "context": {
        "before": [
          "      const windDir = new THREE.Vector3(",
          "        field.windDirection?.x ?? 1,",
          "        field.windDirection?.y ?? 0,"
        ],
        "after": [
          "      ).normalize();",
          "      const gust =",
          "        Math.sin(simulationTime * (field.gustFrequency ?? 0.5)) *"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:162:56",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 162,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "Math.sin(simulationTime * (field.gustFrequency ?? 0.5)) *",
      "context": {
        "before": [
          "        field.windDirection?.z ?? 0,",
          "      ).normalize();",
          "      const gust ="
        ],
        "after": [
          "        (field.gustStrength ?? 0);",
          "      force.copy(windDir).multiplyScalar(strength + gust);",
          "      break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:163:29",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 163,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(field.gustStrength ?? 0);",
      "context": {
        "before": [
          "      ).normalize();",
          "      const gust =",
          "        Math.sin(simulationTime * (field.gustFrequency ?? 0.5)) *"
        ],
        "after": [
          "      force.copy(windDir).multiplyScalar(strength + gust);",
          "      break;",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:184:41",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 184,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawScale = field.noiseScale ?? 0.01;",
      "context": {
        "before": [
          "",
          "    case \"curl\": {",
          "      // Curl noise - divergence-free flow field"
        ],
        "after": [
          "      const scale = Number.isFinite(rawScale) ? rawScale : 0.01;",
          "      const rawSpeed = field.noiseSpeed ?? 0.5;",
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:186:41",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 186,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawSpeed = field.noiseSpeed ?? 0.5;",
      "context": {
        "before": [
          "      // Curl noise - divergence-free flow field",
          "      const rawScale = field.noiseScale ?? 0.01;",
          "      const scale = Number.isFinite(rawScale) ? rawScale : 0.01;"
        ],
        "after": [
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN",
          "      const time = Number.isFinite(simulationTime * speed) ? simulationTime * speed : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:227:29",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 227,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.vortexAxis?.x ?? 0,",
      "context": {
        "before": [
          "      // Lorentz force: F = q(v  B)",
          "      // B field direction is the vortexAxis",
          "      const B = new THREE.Vector3("
        ],
        "after": [
          "        field.vortexAxis?.y ?? 1,",
          "        field.vortexAxis?.z ?? 0,",
          "      ).multiplyScalar(strength);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:229:29",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 229,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.vortexAxis?.z ?? 0,",
      "context": {
        "before": [
          "      const B = new THREE.Vector3(",
          "        field.vortexAxis?.x ?? 0,",
          "        field.vortexAxis?.y ?? 1,"
        ],
        "after": [
          "      ).multiplyScalar(strength);",
          "      const v = new THREE.Vector3(vx, vy, vz);",
          "      force.crossVectors(v, B);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:247:31",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 247,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.vortexAxis?.x ?? 0,",
      "context": {
        "before": [
          "",
          "        // Add tangential component for orbit",
          "        const axis = new THREE.Vector3("
        ],
        "after": [
          "          field.vortexAxis?.y ?? 1,",
          "          field.vortexAxis?.z ?? 0,",
          "        ).normalize();"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:249:31",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 249,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "field.vortexAxis?.z ?? 0,",
      "context": {
        "before": [
          "        const axis = new THREE.Vector3(",
          "          field.vortexAxis?.x ?? 0,",
          "          field.vortexAxis?.y ?? 1,"
        ],
        "after": [
          "        ).normalize();",
          "        const tangent = new THREE.Vector3()",
          "          .crossVectors(axis, centripetal)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFrameCache.ts:148:53",
      "file": "engine/particles/ParticleFrameCache.ts",
      "line": 148,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "emitterBurstTimers.set(id, emitter.burstTimer ?? 0);",
      "context": {
        "before": [
          "    const emitterBurstTimers = new Map<string, number>();",
          "    for (const [id, emitter] of emitters) {",
          "      emitterAccumulators.set(id, emitter.accumulator);"
        ],
        "after": [
          "    }",
          "",
          "    this.frameCache.set(frame, {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:111:31",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 111,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "damping: config.damping ?? 0.99,",
      "context": {
        "before": [
          "        min: [-10000, -10000, -10000],",
          "        max: [10000, 10000, 10000],",
          "      },"
        ],
        "after": [
          "      noiseScale: config.noiseScale ?? 0.005,",
          "      noiseSpeed: config.noiseSpeed ?? 0.5,",
          "    };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:112:37",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 112,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "noiseScale: config.noiseScale ?? 0.005,",
      "context": {
        "before": [
          "        max: [10000, 10000, 10000],",
          "      },",
          "      damping: config.damping ?? 0.99,"
        ],
        "after": [
          "      noiseSpeed: config.noiseSpeed ?? 0.5,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:113:37",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 113,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "noiseSpeed: config.noiseSpeed ?? 0.5,",
      "context": {
        "before": [
          "      },",
          "      damping: config.damping ?? 0.99,",
          "      noiseScale: config.noiseScale ?? 0.005,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:137:31",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 137,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "h3 * (p0.outTangent ?? 0) +",
      "context": {
        "before": [
          "        return (",
          "          h1 * p0.value +",
          "          h2 * p1.value +"
        ],
        "after": [
          "          h4 * (p1.inTangent ?? 0)",
          "        );",
          "      }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:138:30",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 138,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "h4 * (p1.inTangent ?? 0)",
      "context": {
        "before": [
          "          h1 * p0.value +",
          "          h2 * p1.value +",
          "          h3 * (p0.outTangent ?? 0) +"
        ],
        "after": [
          "        );",
          "      }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:131:45",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 131,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "surfaceTension: config.surfaceTension ?? 0.0728,",
      "context": {
        "before": [
          "      restDensity: config.restDensity ?? 1000,",
          "      gasConstant: config.gasConstant ?? 2000,",
          "      viscosity: config.viscosity ?? 200,"
        ],
        "after": [
          "      enableSurfaceTension: config.enableSurfaceTension ?? false,",
          "      gravity: config.gravity ?? { x: 0, y: -980, z: 0 },",
          "      maxTimeStep: config.maxTimeStep ?? 0.004,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:134:39",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 134,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "maxTimeStep: config.maxTimeStep ?? 0.004,",
      "context": {
        "before": [
          "      surfaceTension: config.surfaceTension ?? 0.0728,",
          "      enableSurfaceTension: config.enableSurfaceTension ?? false,",
          "      gravity: config.gravity ?? { x: 0, y: -980, z: 0 },"
        ],
        "after": [
          "    };",
          "",
          "    // Initialize SPH data array"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:213:57",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 213,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawInheritSize = subEmitter.inheritSize ?? 0;",
      "context": {
        "before": [
          "",
          "          const rawInitialSize = overrides.initialSize ?? 5;",
          "          const safeInitialSize = (Number.isFinite(rawInitialSize) && rawInitialSize > 0) ? rawInitialSize : 5;"
        ],
        "after": [
          "          const safeInheritSize = Number.isFinite(rawInheritSize) ? rawInheritSize : 0;",
          "          const rawSize = safeInitialSize * (safeInheritSize > 0 ? parentSize * safeInheritSize : 1);",
          "          particleBuffer[subOffset + 9] = Number.isFinite(rawSize) ? Math.max(rawSize, 0.001) : 5; // size"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:219:60",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 219,
      "column": 60,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawInheritRot = subEmitter.inheritRotation ?? 0;",
      "context": {
        "before": [
          "          particleBuffer[subOffset + 9] = Number.isFinite(rawSize) ? Math.max(rawSize, 0.001) : 5; // size",
          "",
          "          // Rotation (validate inheritRotation)"
        ],
        "after": [
          "          const inheritRot = Number.isFinite(rawInheritRot) ? rawInheritRot : 0;",
          "          particleBuffer[subOffset + 10] =",
          "            inheritRot > 0"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:225:62",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 225,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawAngVel = overrides.initialAngularVelocity ?? 0;",
      "context": {
        "before": [
          "            inheritRot > 0",
          "              ? parentRotation * inheritRot",
          "              : this.rng() * Math.PI * 2;"
        ],
        "after": [
          "          const angVel = Number.isFinite(rawAngVel) ? rawAngVel : 0;",
          "          particleBuffer[subOffset + 11] = angVel;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:237:57",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 237,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawInheritCol = subEmitter.inheritColor ?? 0;",
      "context": {
        "before": [
          "            Number.isFinite(rawColorStart[2]) ? rawColorStart[2] : 1,",
          "            Number.isFinite(rawColorStart[3]) ? rawColorStart[3] : 1,",
          "          ];"
        ],
        "after": [
          "          const inheritCol = Number.isFinite(rawInheritCol) ? rawInheritCol : 0;",
          "          if (inheritCol > 0) {",
          "            particleBuffer[subOffset + 12] ="
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:103:32",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 103,
      "column": 32,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "return this.cells.get(key) ?? [];",
      "context": {
        "before": [
          "   * Get all particle indices in a cell",
          "   */",
          "  getCell(key: string): number[] {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:144:67",
      "file": "engine/TransformControlsManager.ts",
      "line": 144,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
      "context": {
        "before": [
          "      // Get the layer to access anchor point",
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();"
        ],
        "after": [
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:145:67",
      "file": "engine/TransformControlsManager.ts",
      "line": 145,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
      "context": {
        "before": [
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;"
        ],
        "after": [
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          "",
          "      // Convert 3D position back to layer position by adding anchor point back"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:146:76",
      "file": "engine/TransformControlsManager.ts",
      "line": 146,
      "column": 76,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
      "context": {
        "before": [
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;"
        ],
        "after": [
          "",
          "      // Convert 3D position back to layer position by adding anchor point back",
          "      // The 3D object position is offset by anchor point in applyTransform()"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "engine/utils/PerformanceMonitor.ts:83:47",
      "file": "engine/utils/PerformanceMonitor.ts",
      "line": 83,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const memoryUsed = memory?.usedJSHeapSize ?? 0;",
      "context": {
        "before": [
          "",
          "    // Get memory usage (Chrome only)",
          "    const memory = (performance as any).memory;"
        ],
        "after": [
          "",
          "    // Calculate average frame time",
          "    const avgFrameTime ="
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "schemas/exports/ati-schema.ts:28:32",
      "file": "schemas/exports/ati-schema.ts",
      "line": 28,
      "column": 32,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Primitive Schemas",
          "// ============================================================================",
          ""
        ],
        "after": [
          "const finiteNumber = z.number().finite();",
          "",
          "/** Positive integer for dimensions */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "schemas/exports/ati-schema.ts:28:40",
      "file": "schemas/exports/ati-schema.ts",
      "line": 28,
      "column": 40,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Primitive Schemas",
          "// ============================================================================",
          ""
        ],
        "after": [
          "const finiteNumber = z.number().finite();",
          "",
          "/** Positive integer for dimensions */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "schemas/exports/wanmove-schema.ts:30:32",
      "file": "schemas/exports/wanmove-schema.ts",
      "line": 30,
      "column": 32,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Primitive Schemas",
          "// ============================================================================",
          ""
        ],
        "after": [
          "const finiteNumber = z.number().finite();",
          "",
          "/** Positive finite number */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "schemas/exports/wanmove-schema.ts:30:40",
      "file": "schemas/exports/wanmove-schema.ts",
      "line": 30,
      "column": 40,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Primitive Schemas",
          "// ============================================================================",
          ""
        ],
        "after": [
          "const finiteNumber = z.number().finite();",
          "",
          "/** Positive finite number */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "schemas/imports/cameraTracking-schema.ts:14:32",
      "file": "schemas/imports/cameraTracking-schema.ts",
      "line": 14,
      "column": 32,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Primitive Schemas with Validation",
          "// ============================================================================",
          ""
        ],
        "after": [
          "const finiteNumber = z.number().finite();",
          "",
          "/** Positive finite number */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "schemas/imports/cameraTracking-schema.ts:14:40",
      "file": "schemas/imports/cameraTracking-schema.ts",
      "line": 14,
      "column": 40,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Primitive Schemas with Validation",
          "// ============================================================================",
          ""
        ],
        "after": [
          "const finiteNumber = z.number().finite();",
          "",
          "/** Positive finite number */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "schemas/layers/primitives-schema.ts:14:32",
      "file": "schemas/layers/primitives-schema.ts",
      "line": 14,
      "column": 32,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Finite Number Primitives",
          "// ============================================================================",
          ""
        ],
        "after": [
          "export const finiteNumber = z.number().finite();",
          "",
          "/** Positive finite number */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "schemas/layers/primitives-schema.ts:14:40",
      "file": "schemas/layers/primitives-schema.ts",
      "line": 14,
      "column": 40,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "/** Finite number that rejects NaN and Infinity */",
      "context": {
        "before": [
          "// Finite Number Primitives",
          "// ============================================================================",
          ""
        ],
        "after": [
          "export const finiteNumber = z.number().finite();",
          "",
          "/** Positive finite number */"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:320:30",
      "file": "services/ai/actionExecutor.ts",
      "line": 320,
      "column": 30,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "Object.assign(layer.data || {}, properties);",
      "context": {
        "before": [
          "    layer.outPoint = outPoint;",
          "  }",
          "  if (properties) {"
        ],
        "after": [
          "  }",
          "",
          "  return {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:730:20",
      "file": "services/ai/actionExecutor.ts",
      "line": 730,
      "column": 20,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "params: params || {},",
      "context": {
        "before": [
          "    enabled: true,",
          "    type: \"preset\" as const,",
          "    name: expressionType,"
        ],
        "after": [
          "  };",
          "",
          "  // Record modification and save to undo history"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:895:61",
      "file": "services/ai/actionExecutor.ts",
      "line": 895,
      "column": 61,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "particleData.systemConfig.gravity = physics.gravity.y || 0;",
      "context": {
        "before": [
          "  // Update physics",
          "  if (physics && particleData.systemConfig) {",
          "    if (physics.gravity) {"
        ],
        "after": [
          "    }",
          "    if (physics.wind) {",
          "      // Default to zero if wind components are undefined"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:899:36",
      "file": "services/ai/actionExecutor.ts",
      "line": 899,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const windX = physics.wind.x ?? 0;",
      "context": {
        "before": [
          "    }",
          "    if (physics.wind) {",
          "      // Default to zero if wind components are undefined"
        ],
        "after": [
          "      const windY = physics.wind.y ?? 0;",
          "      particleData.systemConfig.windStrength = Math.sqrt(",
          "        windX ** 2 + windY ** 2,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:900:36",
      "file": "services/ai/actionExecutor.ts",
      "line": 900,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const windY = physics.wind.y ?? 0;",
      "context": {
        "before": [
          "    if (physics.wind) {",
          "      // Default to zero if wind components are undefined",
          "      const windX = physics.wind.x ?? 0;"
        ],
        "after": [
          "      particleData.systemConfig.windStrength = Math.sqrt(",
          "        windX ** 2 + windY ** 2,",
          "      );"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1038:29",
      "file": "services/ai/actionExecutor.ts",
      "line": 1038,
      "column": 29,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(keyframes.zoom?.length || 0);",
      "context": {
        "before": [
          "  const totalKeyframes =",
          "    keyframes.position.length +",
          "    keyframes.pointOfInterest.length +"
        ],
        "after": [
          "",
          "  return {",
          "    success: true,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1091:38",
      "file": "services/ai/actionExecutor.ts",
      "line": 1091,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intensity: shakeConfig.intensity ?? 0.3,",
      "context": {
        "before": [
          "  cameraData.shake = {",
          "    enabled: true,",
          "    type: shakeType,"
        ],
        "after": [
          "    frequency: shakeConfig.frequency ?? 1.0,",
          "    rotationEnabled: shakeConfig.rotationEnabled ?? true,",
          "    rotationScale: 0.5,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1096:30",
      "file": "services/ai/actionExecutor.ts",
      "line": 1096,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "decay: shakeConfig.decay ?? 0,",
      "context": {
        "before": [
          "    rotationEnabled: shakeConfig.rotationEnabled ?? true,",
          "    rotationScale: 0.5,",
          "    seed: shakeConfig.seed!,"
        ],
        "after": [
          "    startFrame,",
          "    duration: duration ?? compDuration,",
          "  };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1450:28",
      "file": "services/ai/actionExecutor.ts",
      "line": 1450,
      "column": 28,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "keyframes: keyframes || [],",
      "context": {
        "before": [
          "  if (layer.data) {",
          "    const speedMapData = {",
          "      enabled: enabled !== false,"
        ],
        "after": [
          "    };",
          "    // Use Object.assign for dynamic property assignment on existing data",
          "    Object.assign(layer.data, { speedMap: speedMapData, timeRemap: speedMapData });"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:223:40",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 223,
      "column": 40,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "startFrame: Number(seg.startFrame) || 0,",
      "context": {
        "before": [
          "  const segments = (",
          "    (data.segments as Array<Record<string, unknown>>) || []",
          "  ).map((seg) => ({"
        ],
        "after": [
          "    endFrame: Number(seg.endFrame) || 0,",
          "    motion: (seg.motion as CameraMotionPrimitive) || \"unknown\",",
          "    confidence: Number(seg.confidence) || 0.5,"
        ]
      },
      "typeInfo": "Function type detected",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:224:36",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 224,
      "column": 36,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "endFrame: Number(seg.endFrame) || 0,",
      "context": {
        "before": [
          "    (data.segments as Array<Record<string, unknown>>) || []",
          "  ).map((seg) => ({",
          "    startFrame: Number(seg.startFrame) || 0,"
        ],
        "after": [
          "    motion: (seg.motion as CameraMotionPrimitive) || \"unknown\",",
          "    confidence: Number(seg.confidence) || 0.5,",
          "    description: String(seg.description || \"\"),"
        ]
      },
      "typeInfo": "Function type detected",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:226:40",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 226,
      "column": 40,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "confidence: Number(seg.confidence) || 0.5,",
      "context": {
        "before": [
          "    startFrame: Number(seg.startFrame) || 0,",
          "    endFrame: Number(seg.endFrame) || 0,",
          "    motion: (seg.motion as CameraMotionPrimitive) || \"unknown\","
        ],
        "after": [
          "    description: String(seg.description || \"\"),",
          "  }));",
          ""
        ]
      },
      "typeInfo": "Function type detected",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:490:43",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 490,
      "column": 43,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const trackPoints = solve.trackPoints3D ?? [];",
      "context": {
        "before": [
          "  });",
          "",
          "  // Convert 3D track points to point cloud"
        ],
        "after": [
          "  const point_cloud =",
          "    trackPoints.length > 0",
          "      ? {"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:312:32",
      "file": "services/ai/depthEstimation.ts",
      "line": 312,
      "column": 32,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "layers: (parsed.layers || []).map((layer: any) => ({",
      "context": {
        "before": [
          "",
          "      return {",
          "        sceneDescription: parsed.sceneDescription || \"Scene analyzed\","
        ],
        "after": [
          "          index: layer.index ?? 0,",
          "          depth: Math.max(0, Math.min(100, layer.depth ?? 50)),",
          "          content: layer.content || \"Unknown\","
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:313:30",
      "file": "services/ai/depthEstimation.ts",
      "line": 313,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "index: layer.index ?? 0,",
      "context": {
        "before": [
          "      return {",
          "        sceneDescription: parsed.sceneDescription || \"Scene analyzed\",",
          "        layers: (parsed.layers || []).map((layer: any) => ({"
        ],
        "after": [
          "          depth: Math.max(0, Math.min(100, layer.depth ?? 50)),",
          "          content: layer.content || \"Unknown\",",
          "          confidence: Math.max(0, Math.min(1, layer.confidence ?? 0.5)),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:316:64",
      "file": "services/ai/depthEstimation.ts",
      "line": 316,
      "column": 64,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "confidence: Math.max(0, Math.min(1, layer.confidence ?? 0.5)),",
      "context": {
        "before": [
          "          index: layer.index ?? 0,",
          "          depth: Math.max(0, Math.min(100, layer.depth ?? 50)),",
          "          content: layer.content || \"Unknown\","
        ],
        "after": [
          "          reasoning: layer.reasoning || \"\",",
          "        })),",
          "      };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/secureActionExecutor.ts:115:37",
      "file": "services/ai/secureActionExecutor.ts",
      "line": 115,
      "column": 37,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "await logToolCallAudit(name, args || {}, userAction);",
      "context": {
        "before": [
          "  const { name, arguments: args } = toolCall;\r",
          "\r",
          "  // Log the tool call attempt\r"
        ],
        "after": [
          "\r",
          "  // 2. Check for prompt injection in string arguments\r",
          "  if (args && typeof args === \"object\") {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:894:66",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 894,
      "column": 66,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "return hardenedScopeManager.checkToolPermission(toolName, args || {});",
      "context": {
        "before": [
          "  toolName: string,\r",
          "  args?: Record<string, unknown>,\r",
          "): ToolPermission {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "export function getCurrentScope(): ScopeLevel {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:842:64",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 842,
      "column": 64,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const combiningCharsCount = (input.match(/[\\u0300-\\u036F]/g) || []).length;",
      "context": {
        "before": [
          "  }\r",
          "\r",
          "  // Check for combining characters abuse (can stack diacritics to obscure)\r"
        ],
        "after": [
          "  if (combiningCharsCount > 10) {\r",
          "    return {\r",
          "      detected: true,\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:1091:30",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 1091,
      "column": 30,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "freq[char] = (freq[char] || 0) + 1;",
      "context": {
        "before": [
          "\r",
          "  const freq: Record<string, number> = {};\r",
          "  for (const char of str) {\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  let entropy = 0;\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:1262:56",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 1262,
      "column": 56,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "nameGroups[layer.name] = (nameGroups[layer.name] || 0) + 1;",
      "context": {
        "before": [
          "  const nameGroups: Record<string, number> = {};\r",
          "  for (const layer of allLayers) {\r",
          "    if (layer.name) {\r"
        ],
        "after": [
          "    }\r",
          "  }\r",
          "  for (const [name, count] of Object.entries(nameGroups)) {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:230:51",
      "file": "services/ai/stateSerializer.ts",
      "line": 230,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startFrame: layer.startFrame ?? layer.inPoint ?? 0,",
      "context": {
        "before": [
          "    name: sanitizeForLLM(layer.name), // SECURITY: Sanitize",
          "    type: layer.type,",
          "    visible: layer.visible,"
        ],
        "after": [
          "    endFrame: layer.endFrame ?? layer.outPoint ?? 80,",
          "  }));",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:351:38",
      "file": "services/ai/stateSerializer.ts",
      "line": 351,
      "column": 38,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const effectTypes = (layer.effects || []).map((e) => e.effectKey);",
      "context": {
        "before": [
          "  if (layer.opacity.animated) animatedProperties.push(\"opacity\");",
          "",
          "  // Collect effect types only (not names or parameters)"
        ],
        "after": [
          "",
          "  return {",
          "    id: layer.id,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:359:51",
      "file": "services/ai/stateSerializer.ts",
      "line": 359,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startFrame: layer.startFrame ?? layer.inPoint ?? 0,",
      "context": {
        "before": [
          "    type: layer.type,",
          "    visible: layer.visible,",
          "    locked: layer.locked,"
        ],
        "after": [
          "    endFrame: layer.endFrame ?? layer.outPoint ?? 80,",
          "    parentId: layer.parentId,",
          "    hasAnimation: animatedProperties.length > 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:364:33",
      "file": "services/ai/stateSerializer.ts",
      "line": 364,
      "column": 33,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "effectCount: (layer.effects || []).length,",
      "context": {
        "before": [
          "    parentId: layer.parentId,",
          "    hasAnimation: animatedProperties.length > 0,",
          "    animatedProperties,"
        ],
        "after": [
          "    effectTypes,",
          "  };",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:444:51",
      "file": "services/ai/stateSerializer.ts",
      "line": 444,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startFrame: layer.startFrame ?? layer.inPoint ?? 0,",
      "context": {
        "before": [
          "    type: layer.type,",
          "    visible: layer.visible,",
          "    locked: layer.locked,"
        ],
        "after": [
          "    endFrame: layer.endFrame ?? layer.outPoint ?? 80,",
          "    parentId: layer.parentId,",
          "    transform: {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:549:48",
      "file": "services/ai/stateSerializer.ts",
      "line": 549,
      "column": 48,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "pointCount: data.controlPoints?.length || 0,",
      "context": {
        "before": [
          "",
          "    case \"spline\":",
          "      return {"
        ],
        "after": [
          "        closed: data.closed,",
          "        stroke: data.stroke,",
          "        strokeWidth: data.strokeWidth,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:557:45",
      "file": "services/ai/stateSerializer.ts",
      "line": 557,
      "column": 45,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "emitterCount: data.emitters?.length || 0,",
      "context": {
        "before": [
          "",
          "    case \"particles\":",
          "      return {"
        ],
        "after": [
          "        maxParticles: data.systemConfig?.maxParticles,",
          "        gravity: data.systemConfig?.gravity,",
          "        firstEmitter: data.emitters?.[0]"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:595:41",
      "file": "services/ai/stateSerializer.ts",
      "line": 595,
      "column": 41,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "shapeCount: data.shapes?.length || 0,",
      "context": {
        "before": [
          "",
          "    case \"shape\":",
          "      return {"
        ],
        "after": [
          "        fill: data.fill,",
          "        stroke: data.stroke,",
          "        strokeWidth: data.strokeWidth,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:717:72",
      "file": "services/ai/stateSerializer.ts",
      "line": 717,
      "column": 72,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const beforeKfCount = beforeLayer.transform.position.keyframeCount || 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Check keyframe counts"
        ],
        "after": [
          "    const afterKfCount = afterLayer.transform.position.keyframeCount || 0;",
          "    if (beforeKfCount !== afterKfCount) {",
          "      changes.push("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:718:70",
      "file": "services/ai/stateSerializer.ts",
      "line": 718,
      "column": 70,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const afterKfCount = afterLayer.transform.position.keyframeCount || 0;",
      "context": {
        "before": [
          "",
          "    // Check keyframe counts",
          "    const beforeKfCount = beforeLayer.transform.position.keyframeCount || 0;"
        ],
        "after": [
          "    if (beforeKfCount !== afterKfCount) {",
          "      changes.push(",
          "        `Layer \"${afterLayer.name}\": position keyframes ${beforeKfCount}  ${afterKfCount}`,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:726:55",
      "file": "services/ai/stateSerializer.ts",
      "line": 726,
      "column": 55,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const beforeEffects = beforeLayer.effects?.length || 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Check effects"
        ],
        "after": [
          "    const afterLayerEffects = afterLayer.effects?.length || 0;",
          "    if (beforeEffects !== afterLayerEffects) {",
          "      changes.push("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:727:58",
      "file": "services/ai/stateSerializer.ts",
      "line": 727,
      "column": 58,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const afterLayerEffects = afterLayer.effects?.length || 0;",
      "context": {
        "before": [
          "",
          "    // Check effects",
          "    const beforeEffects = beforeLayer.effects?.length || 0;"
        ],
        "after": [
          "    if (beforeEffects !== afterLayerEffects) {",
          "      changes.push(",
          "        `Layer \"${afterLayer.name}\": effects ${beforeEffects}  ${afterLayerEffects}`,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/aiGeneration.ts:459:23",
      "file": "services/aiGeneration.ts",
      "line": 459,
      "column": 23,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "(result.masks || []).map((maskBase64: string) =>",
      "context": {
        "before": [
          "",
          "      // Convert mask data to ImageData",
          "      const masks = await Promise.all("
        ],
        "after": [
          "          this.base64ToImageData(maskBase64),",
          "        ),",
          "      );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:131:51",
      "file": "services/arcLength.ts",
      "line": 131,
      "column": 51,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "point: { x: point.x, y: point.y, z: point.z || 0 },",
      "context": {
        "before": [
          "    const tangent = this.curve.getTangentAt(u) as THREE.Vector3;",
          "",
          "    return {"
        ],
        "after": [
          "      tangent: { x: tangent.x, y: tangent.y, z: tangent.z || 0 },",
          "      t: this.distanceToT(distance),",
          "    };"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:132:59",
      "file": "services/arcLength.ts",
      "line": 132,
      "column": 59,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "tangent: { x: tangent.x, y: tangent.y, z: tangent.z || 0 },",
      "context": {
        "before": [
          "",
          "    return {",
          "      point: { x: point.x, y: point.y, z: point.z || 0 },"
        ],
        "after": [
          "      t: this.distanceToT(distance),",
          "    };",
          "  }"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:221:60",
      "file": "services/arcLength.ts",
      "line": 221,
      "column": 60,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const h1 = p1.handleOut || { x: p1.x, y: p1.y, z: p1.z || 0 };",
      "context": {
        "before": [
          "    const p1 = controlPoints[i];",
          "    const p2 = controlPoints[i + 1];",
          ""
        ],
        "after": [
          "    const h2 = p2.handleIn || { x: p2.x, y: p2.y, z: p2.z || 0 };",
          "",
          "    beziers.push("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:222:59",
      "file": "services/arcLength.ts",
      "line": 222,
      "column": 59,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const h2 = p2.handleIn || { x: p2.x, y: p2.y, z: p2.z || 0 };",
      "context": {
        "before": [
          "    const p2 = controlPoints[i + 1];",
          "",
          "    const h1 = p1.handleOut || { x: p1.x, y: p1.y, z: p1.z || 0 };"
        ],
        "after": [
          "",
          "    beziers.push(",
          "      createBezierCurve("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:226:37",
      "file": "services/arcLength.ts",
      "line": 226,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: p1.x, y: p1.y, z: p1.z || 0 },",
      "context": {
        "before": [
          "",
          "    beziers.push(",
          "      createBezierCurve("
        ],
        "after": [
          "        { x: h1.x, y: h1.y, z: h1.z || 0 },",
          "        { x: h2.x, y: h2.y, z: h2.z || 0 },",
          "        { x: p2.x, y: p2.y, z: p2.z || 0 },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:227:37",
      "file": "services/arcLength.ts",
      "line": 227,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: h1.x, y: h1.y, z: h1.z || 0 },",
      "context": {
        "before": [
          "    beziers.push(",
          "      createBezierCurve(",
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },"
        ],
        "after": [
          "        { x: h2.x, y: h2.y, z: h2.z || 0 },",
          "        { x: p2.x, y: p2.y, z: p2.z || 0 },",
          "      ),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:228:37",
      "file": "services/arcLength.ts",
      "line": 228,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: h2.x, y: h2.y, z: h2.z || 0 },",
      "context": {
        "before": [
          "      createBezierCurve(",
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },",
          "        { x: h1.x, y: h1.y, z: h1.z || 0 },"
        ],
        "after": [
          "        { x: p2.x, y: p2.y, z: p2.z || 0 },",
          "      ),",
          "    );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:229:37",
      "file": "services/arcLength.ts",
      "line": 229,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: p2.x, y: p2.y, z: p2.z || 0 },",
      "context": {
        "before": [
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },",
          "        { x: h1.x, y: h1.y, z: h1.z || 0 },",
          "        { x: h2.x, y: h2.y, z: h2.z || 0 },"
        ],
        "after": [
          "      ),",
          "    );",
          "  }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:342:63",
      "file": "services/arcLength.ts",
      "line": 342,
      "column": 63,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "startPoint = { x: coords[0], y: coords[1], z: coords[2] || 0 };",
      "context": {
        "before": [
          "    const [command, ...coords] = cmd;",
          "",
          "    if (command === \"M\") {"
        ],
        "after": [
          "    } else if (command === \"C\" && startPoint) {",
          "      // Cubic bezier: startPoint, control1, control2, endPoint",
          "      return new THREE.CubicBezierCurve3("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:347:59",
      "file": "services/arcLength.ts",
      "line": 347,
      "column": 59,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "new THREE.Vector3(coords[0], coords[1], coords[2] || 0),",
      "context": {
        "before": [
          "      // Cubic bezier: startPoint, control1, control2, endPoint",
          "      return new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(startPoint.x, startPoint.y, startPoint.z),"
        ],
        "after": [
          "        new THREE.Vector3(",
          "          coords[3] || coords[2],",
          "          coords[4] || coords[3],"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:351:21",
      "file": "services/arcLength.ts",
      "line": 351,
      "column": 21,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "coords[5] || 0,",
      "context": {
        "before": [
          "        new THREE.Vector3(",
          "          coords[3] || coords[2],",
          "          coords[4] || coords[3],"
        ],
        "after": [
          "        ),",
          "        new THREE.Vector3(",
          "          coords[6] || coords[4],"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:356:21",
      "file": "services/arcLength.ts",
      "line": 356,
      "column": 21,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "coords[8] || 0,",
      "context": {
        "before": [
          "        new THREE.Vector3(",
          "          coords[6] || coords[4],",
          "          coords[7] || coords[5],"
        ],
        "after": [
          "        ),",
          "      );",
          "    } else if (command === \"Q\" && startPoint) {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:362:62",
      "file": "services/arcLength.ts",
      "line": 362,
      "column": 62,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const qcp = { x: coords[0], y: coords[1], z: coords[2] || 0 };",
      "context": {
        "before": [
          "    } else if (command === \"Q\" && startPoint) {",
          "      // Quadratic bezier - convert to cubic for consistency",
          "      // Q: start, control, end -> C: start, (start+2*control)/3, (2*control+end)/3, end"
        ],
        "after": [
          "      const end = {",
          "        x: coords[3] || coords[2],",
          "        y: coords[4] || coords[3],"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/arcLength.ts:366:22",
      "file": "services/arcLength.ts",
      "line": 366,
      "column": 22,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: coords[5] || 0,",
      "context": {
        "before": [
          "      const end = {",
          "        x: coords[3] || coords[2],",
          "        y: coords[4] || coords[3],"
        ],
        "after": [
          "      };",
          "",
          "      const cp1 = {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audio/enhancedBeatDetection.ts:316:62",
      "file": "services/audio/enhancedBeatDetection.ts",
      "line": 316,
      "column": 62,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const amplitude = analysis.amplitudeEnvelope[clampedFrame] || 0;",
      "context": {
        "before": [
          "  );",
          "",
          "  // Combine multiple features for strength estimation"
        ],
        "after": [
          "  const bass = analysis.frequencyBands.bass[clampedFrame] || 0;",
          "  const flux = analysis.spectralFlux?.[clampedFrame] || 0;",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audio/enhancedBeatDetection.ts:317:59",
      "file": "services/audio/enhancedBeatDetection.ts",
      "line": 317,
      "column": 59,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const bass = analysis.frequencyBands.bass[clampedFrame] || 0;",
      "context": {
        "before": [
          "",
          "  // Combine multiple features for strength estimation",
          "  const amplitude = analysis.amplitudeEnvelope[clampedFrame] || 0;"
        ],
        "after": [
          "  const flux = analysis.spectralFlux?.[clampedFrame] || 0;",
          "",
          "  // Weight: bass and spectral flux are most important for beats"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audio/enhancedBeatDetection.ts:318:54",
      "file": "services/audio/enhancedBeatDetection.ts",
      "line": 318,
      "column": 54,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const flux = analysis.spectralFlux?.[clampedFrame] || 0;",
      "context": {
        "before": [
          "  // Combine multiple features for strength estimation",
          "  const amplitude = analysis.amplitudeEnvelope[clampedFrame] || 0;",
          "  const bass = analysis.frequencyBands.bass[clampedFrame] || 0;"
        ],
        "after": [
          "",
          "  // Weight: bass and spectral flux are most important for beats",
          "  return amplitude * 0.3 + bass * 0.4 + flux * 0.3;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:440:31",
      "file": "services/audioFeatures.ts",
      "line": 440,
      "column": 31,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "windowed[i] = (samples[i] || 0) * windowValue;",
      "context": {
        "before": [
          "  const windowed = new Float32Array(n);",
          "  for (let i = 0; i < n; i++) {",
          "    const windowValue = 0.5 * (1 - Math.cos((2 * Math.PI * i) / (n - 1)));"
        ],
        "after": [
          "  }",
          "",
          "  // Simple DFT (not optimized, but works for our purposes)"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1004:55",
      "file": "services/audioFeatures.ts",
      "line": 1004,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.amplitudeEnvelope[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "  switch (feature) {",
          "    case \"amplitude\":"
        ],
        "after": [
          "",
          "    case \"rms\":",
          "      return analysis.rmsEnergy[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1007:47",
      "file": "services/audioFeatures.ts",
      "line": 1007,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.rmsEnergy[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.amplitudeEnvelope[clampedFrame] ?? 0;",
          "",
          "    case \"rms\":"
        ],
        "after": [
          "",
          "    case \"spectralCentroid\":",
          "      return analysis.spectralCentroid[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1010:54",
      "file": "services/audioFeatures.ts",
      "line": 1010,
      "column": 54,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.spectralCentroid[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.rmsEnergy[clampedFrame] ?? 0;",
          "",
          "    case \"spectralCentroid\":"
        ],
        "after": [
          "",
          "    case \"sub\":",
          "      return analysis.frequencyBands.sub[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1013:56",
      "file": "services/audioFeatures.ts",
      "line": 1013,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.frequencyBands.sub[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.spectralCentroid[clampedFrame] ?? 0;",
          "",
          "    case \"sub\":"
        ],
        "after": [
          "",
          "    case \"bass\":",
          "      return analysis.frequencyBands.bass[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1016:57",
      "file": "services/audioFeatures.ts",
      "line": 1016,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.frequencyBands.bass[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.frequencyBands.sub[clampedFrame] ?? 0;",
          "",
          "    case \"bass\":"
        ],
        "after": [
          "",
          "    case \"lowMid\":",
          "      return analysis.frequencyBands.lowMid[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1019:59",
      "file": "services/audioFeatures.ts",
      "line": 1019,
      "column": 59,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.frequencyBands.lowMid[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.frequencyBands.bass[clampedFrame] ?? 0;",
          "",
          "    case \"lowMid\":"
        ],
        "after": [
          "",
          "    case \"mid\":",
          "      return analysis.frequencyBands.mid[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1022:56",
      "file": "services/audioFeatures.ts",
      "line": 1022,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.frequencyBands.mid[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.frequencyBands.lowMid[clampedFrame] ?? 0;",
          "",
          "    case \"mid\":"
        ],
        "after": [
          "",
          "    case \"highMid\":",
          "      return analysis.frequencyBands.highMid[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1025:60",
      "file": "services/audioFeatures.ts",
      "line": 1025,
      "column": 60,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.frequencyBands.highMid[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.frequencyBands.mid[clampedFrame] ?? 0;",
          "",
          "    case \"highMid\":"
        ],
        "after": [
          "",
          "    case \"high\":",
          "      return analysis.frequencyBands.high[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1028:57",
      "file": "services/audioFeatures.ts",
      "line": 1028,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.frequencyBands.high[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.frequencyBands.highMid[clampedFrame] ?? 0;",
          "",
          "    case \"high\":"
        ],
        "after": [
          "",
          "    case \"onsets\":",
          "      // Return 1 if this frame is an onset, 0 otherwise"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1036:52",
      "file": "services/audioFeatures.ts",
      "line": 1036,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.spectralFlux?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    // Enhanced features",
          "    case \"spectralFlux\":"
        ],
        "after": [
          "",
          "    case \"zeroCrossingRate\":",
          "    case \"zcr\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1040:56",
      "file": "services/audioFeatures.ts",
      "line": 1040,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.zeroCrossingRate?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"zeroCrossingRate\":",
          "    case \"zcr\":"
        ],
        "after": [
          "",
          "    case \"spectralRolloff\":",
          "    case \"rolloff\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1044:55",
      "file": "services/audioFeatures.ts",
      "line": 1044,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.spectralRolloff?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"spectralRolloff\":",
          "    case \"rolloff\":"
        ],
        "after": [
          "",
          "    case \"spectralFlatness\":",
          "    case \"flatness\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1048:56",
      "file": "services/audioFeatures.ts",
      "line": 1048,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.spectralFlatness?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"spectralFlatness\":",
          "    case \"flatness\":"
        ],
        "after": [
          "",
          "    case \"chromaEnergy\":",
          "      return analysis.chromaFeatures?.chromaEnergy[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1051:66",
      "file": "services/audioFeatures.ts",
      "line": 1051,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chromaEnergy[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.spectralFlatness?.[clampedFrame] ?? 0;",
          "",
          "    case \"chromaEnergy\":"
        ],
        "after": [
          "",
          "    // Individual chroma pitch classes (C, C#, D, etc.)",
          "    case \"chromaC\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1055:65",
      "file": "services/audioFeatures.ts",
      "line": 1055,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[0] ?? 0;",
      "context": {
        "before": [
          "",
          "    // Individual chroma pitch classes (C, C#, D, etc.)",
          "    case \"chromaC\":"
        ],
        "after": [
          "    case \"chromaCs\":",
          "    case \"chromaDb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1058:65",
      "file": "services/audioFeatures.ts",
      "line": 1058,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[0] ?? 0;",
          "    case \"chromaCs\":",
          "    case \"chromaDb\":"
        ],
        "after": [
          "    case \"chromaD\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
          "    case \"chromaDs\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1060:65",
      "file": "services/audioFeatures.ts",
      "line": 1060,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaDb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;",
          "    case \"chromaD\":"
        ],
        "after": [
          "    case \"chromaDs\":",
          "    case \"chromaEb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1063:65",
      "file": "services/audioFeatures.ts",
      "line": 1063,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
          "    case \"chromaDs\":",
          "    case \"chromaEb\":"
        ],
        "after": [
          "    case \"chromaE\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
          "    case \"chromaF\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1065:65",
      "file": "services/audioFeatures.ts",
      "line": 1065,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaEb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;",
          "    case \"chromaE\":"
        ],
        "after": [
          "    case \"chromaF\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
          "    case \"chromaFs\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1067:65",
      "file": "services/audioFeatures.ts",
      "line": 1067,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaE\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
          "    case \"chromaF\":"
        ],
        "after": [
          "    case \"chromaFs\":",
          "    case \"chromaGb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1070:65",
      "file": "services/audioFeatures.ts",
      "line": 1070,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
          "    case \"chromaFs\":",
          "    case \"chromaGb\":"
        ],
        "after": [
          "    case \"chromaG\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
          "    case \"chromaGs\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1072:65",
      "file": "services/audioFeatures.ts",
      "line": 1072,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaGb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;",
          "    case \"chromaG\":"
        ],
        "after": [
          "    case \"chromaGs\":",
          "    case \"chromaAb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1075:65",
      "file": "services/audioFeatures.ts",
      "line": 1075,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
          "    case \"chromaGs\":",
          "    case \"chromaAb\":"
        ],
        "after": [
          "    case \"chromaA\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
          "    case \"chromaAs\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1077:65",
      "file": "services/audioFeatures.ts",
      "line": 1077,
      "column": 65,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaAb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;",
          "    case \"chromaA\":"
        ],
        "after": [
          "    case \"chromaAs\":",
          "    case \"chromaBb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1080:66",
      "file": "services/audioFeatures.ts",
      "line": 1080,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
          "    case \"chromaAs\":",
          "    case \"chromaBb\":"
        ],
        "after": [
          "    case \"chromaB\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[11] ?? 0;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1082:66",
      "file": "services/audioFeatures.ts",
      "line": 1082,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[11] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaBb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;",
          "    case \"chromaB\":"
        ],
        "after": [
          "",
          "    // Harmonic-Percussive Source Separation (HPSS) features",
          "    case \"harmonicEnergy\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1087:54",
      "file": "services/audioFeatures.ts",
      "line": 1087,
      "column": 54,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.harmonicEnergy?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "    // Harmonic-Percussive Source Separation (HPSS) features",
          "    case \"harmonicEnergy\":",
          "    case \"harmonic\":"
        ],
        "after": [
          "",
          "    case \"percussiveEnergy\":",
          "    case \"percussive\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1091:56",
      "file": "services/audioFeatures.ts",
      "line": 1091,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.percussiveEnergy?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"percussiveEnergy\":",
          "    case \"percussive\":"
        ],
        "after": [
          "",
          "    case \"hpRatio\":",
          "    case \"harmonicPercussiveRatio\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1095:47",
      "file": "services/audioFeatures.ts",
      "line": 1095,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return analysis.hpRatio?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"hpRatio\":",
          "    case \"harmonicPercussiveRatio\":"
        ],
        "after": [
          "",
          "    // MFCC coefficients with per-coefficient normalization",
          "    // MFCC0 (log energy) has different range than MFCC1-12 (spectral shape)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1609:36",
      "file": "services/audioFeatures.ts",
      "line": 1609,
      "column": 36,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "min: new Array(numCoeffs).fill(Infinity),",
      "context": {
        "before": [
          "  // Compute per-coefficient min/max statistics for proper MFCC normalization.",
          "  // MFCC0 (log energy) has different range than MFCC1-12 (spectral shape).",
          "  const stats = {"
        ],
        "after": [
          "    max: new Array(numCoeffs).fill(-Infinity),",
          "  };",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1610:37",
      "file": "services/audioFeatures.ts",
      "line": 1610,
      "column": 37,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "max: new Array(numCoeffs).fill(-Infinity),",
      "context": {
        "before": [
          "  // MFCC0 (log energy) has different range than MFCC1-12 (spectral shape).",
          "  const stats = {",
          "    min: new Array(numCoeffs).fill(Infinity),"
        ],
        "after": [
          "  };",
          "",
          "  for (const frame of mfccFrames) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:87:53",
      "file": "services/audioPathAnimator.ts",
      "line": 87,
      "column": 53,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "this.config = { ...DEFAULT_CONFIG, ...(config || {}) };",
      "context": {
        "before": [
          "    // Handle overloaded constructor signatures",
          "    if (typeof pathDataOrConfig === \"string\") {",
          "      // Called as: new AudioPathAnimator(pathData, config)"
        ],
        "after": [
          "      this.setPath(pathDataOrConfig);",
          "    } else {",
          "      // Called as: new AudioPathAnimator(config) or new AudioPathAnimator()"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:91:63",
      "file": "services/audioPathAnimator.ts",
      "line": 91,
      "column": 63,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "this.config = { ...DEFAULT_CONFIG, ...(pathDataOrConfig || {}) };",
      "context": {
        "before": [
          "      this.setPath(pathDataOrConfig);",
          "    } else {",
          "      // Called as: new AudioPathAnimator(config) or new AudioPathAnimator()"
        ],
        "after": [
          "    }",
          "",
          "    this.state = {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:120:59",
      "file": "services/audioPathAnimator.ts",
      "line": 120,
      "column": 59,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const commands = pathData.match(/[MLCQZ][^MLCQZ]*/gi) || [];",
      "context": {
        "before": [
          "   */",
          "  private parsePath(pathData: string): PathSegment[] {",
          "    const segments: PathSegment[] = [];"
        ],
        "after": [
          "",
          "    let currentX = 0;",
          "    let currentY = 0;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:136:30",
      "file": "services/audioPathAnimator.ts",
      "line": 136,
      "column": 30,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "currentX = nums[0] || 0;",
      "context": {
        "before": [
          "",
          "      switch (type) {",
          "        case \"M\":"
        ],
        "after": [
          "          currentY = nums[1] || 0;",
          "          segments.push({",
          "            type: \"M\","
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:137:30",
      "file": "services/audioPathAnimator.ts",
      "line": 137,
      "column": 30,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "currentY = nums[1] || 0;",
      "context": {
        "before": [
          "      switch (type) {",
          "        case \"M\":",
          "          currentX = nums[0] || 0;"
        ],
        "after": [
          "          segments.push({",
          "            type: \"M\",",
          "            points: [currentX, currentY],"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:321:66",
      "file": "services/audioReactiveMapping.ts",
      "line": 321,
      "column": 66,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const releaseEnvelope = this.releaseEnvelopes.get(mappingId) || 0;",
      "context": {
        "before": [
          "",
          "    // Apply release envelope (ATI style)",
          "    // Value decays slowly after peak, creating smooth response"
        ],
        "after": [
          "    if (value > releaseEnvelope) {",
          "      // Attack: follow input immediately",
          "      this.releaseEnvelopes.set(mappingId, value);"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:342:68",
      "file": "services/audioReactiveMapping.ts",
      "line": 342,
      "column": 68,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const currentToggle = this.beatToggleStates.get(mappingId) || 0;",
      "context": {
        "before": [
          "        this.getFeatureAtFrame(mapping.feature, frame) > mapping.beatThreshold;",
          "",
          "      if (isBeat) {"
        ],
        "after": [
          "",
          "        switch (mapping.beatResponse) {",
          "          case \"flip\":"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:365:61",
      "file": "services/audioReactiveMapping.ts",
      "line": 365,
      "column": 61,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const toggle = this.beatToggleStates.get(mappingId) || 0;",
      "context": {
        "before": [
          "",
          "      // Apply flip effect if active",
          "      if (mapping.beatResponse === \"flip\") {"
        ],
        "after": [
          "        if (toggle === 1) {",
          "          value = 1 - value;",
          "        }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:390:61",
      "file": "services/audioReactiveMapping.ts",
      "line": 390,
      "column": 61,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const prevSmoothed = this.smoothedValues.get(mappingId) || 0;",
      "context": {
        "before": [
          "    value = Math.max(mapping.min, Math.min(mapping.max, value));",
          "",
          "    // Apply smoothing"
        ],
        "after": [
          "    const smoothed =",
          "      prevSmoothed * mapping.smoothing + value * (1 - mapping.smoothing);",
          "    this.smoothedValues.set(mappingId, smoothed);"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/cameraEnhancements.ts:358:31",
      "file": "services/cameraEnhancements.ts",
      "line": 358,
      "column": 31,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "if (!before) return after || {};",
      "context": {
        "before": [
          "      }",
          "    }",
          ""
        ],
        "after": [
          "    if (!after) return before;",
          "    if (before.frame === after.frame) return before;",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:320:9",
      "file": "services/cameraTrackingImport.ts",
      "line": 320,
      "column": 9,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "})) || [];",
      "context": {
        "before": [
          "        y: pose.rotation[2],",
          "        z: pose.rotation[3],",
          "      },"
        ],
        "after": [
          "",
          "  // Convert 3D points",
          "  const trackPoints3D: TrackPoint3D[] ="
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:335:9",
      "file": "services/cameraTrackingImport.ts",
      "line": 335,
      "column": 9,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "})) || [];",
      "context": {
        "before": [
          "          }",
          "        : undefined,",
          "      track2DIDs: [],"
        ],
        "after": [
          "",
          "  // Get frame count from tracks",
          "  let maxFrame = 0;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:403:45",
      "file": "services/cameraTrackingImport.ts",
      "line": 403,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frameOffset = options.frameOffset ?? 0;",
      "context": {
        "before": [
          "  try {",
          "    const scale = options.scale ?? 1;",
          "    const offset = options.offset ?? { x: 0, y: 0, z: 0 };"
        ],
        "after": [
          "",
          "    // Apply coordinate transformations to camera path",
          "    const transformedPath = solve.cameraPath.map((pose) => ({"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:705:12",
      "file": "services/cameraTrackingImport.ts",
      "line": 705,
      "column": 12,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: v.z ?? 0,",
      "context": {
        "before": [
          "  }): { x: number; y: number; z: number } => ({",
          "    x: v.x,",
          "    y: v.y,"
        ],
        "after": [
          "  });",
          "",
          "  // If no keyframes, just export default pose"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:831:30",
      "file": "services/cameraTrackingImport.ts",
      "line": 831,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const prevZ = prev.value.z ?? 0;",
      "context": {
        "before": [
          "",
          "  // Linear interpolation",
          "  const t = (frame - prev.frame) / (next.frame - prev.frame);"
        ],
        "after": [
          "  const nextZ = next.value.z ?? 0;",
          "  return {",
          "    x: prev.value.x + (next.value.x - prev.value.x) * t,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:832:30",
      "file": "services/cameraTrackingImport.ts",
      "line": 832,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const nextZ = next.value.z ?? 0;",
      "context": {
        "before": [
          "  // Linear interpolation",
          "  const t = (frame - prev.frame) / (next.frame - prev.frame);",
          "  const prevZ = prev.value.z ?? 0;"
        ],
        "after": [
          "  return {",
          "    x: prev.value.x + (next.value.x - prev.value.x) * t,",
          "    y: prev.value.y + (next.value.y - prev.value.y) * t,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/colorDepthReactivity.ts:287:19",
      "file": "services/colorDepthReactivity.ts",
      "line": 287,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxValue = -Infinity;",
      "context": {
        "before": [
          "  radius: number,",
          "  feature: ColorFeature = \"brightness\",",
          "): ColorSample {"
        ],
        "after": [
          "  let maxSample: ColorSample | null = null;",
          "",
          "  const startX = Math.max(0, Math.floor(centerX - radius));"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/colorDepthReactivity.ts:323:18",
      "file": "services/colorDepthReactivity.ts",
      "line": 323,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minValue = Infinity;",
      "context": {
        "before": [
          "  radius: number,",
          "  feature: ColorFeature = \"brightness\",",
          "): ColorSample {"
        ],
        "after": [
          "  let minSample: ColorSample | null = null;",
          "",
          "  const startX = Math.max(0, Math.floor(centerX - radius));"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1079:31",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1079,
      "column": 31,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "denoise: params.denoise || 0.75,",
      "context": {
        "before": [
          "      seed: params.seed,",
          "      steps: params.steps || 20,",
          "      cfg: params.cfgScale || 7,"
        ],
        "after": [
          "    },",
          "  );",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1355:35",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1355,
      "column": 35,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const layers = params.ttmLayers || [];",
      "context": {
        "before": [
          "  const workflow: ComfyUIWorkflow = {};",
          "",
          "  const ttmModel = params.ttmModel || \"wan\";"
        ],
        "after": [
          "",
          "  // TTM (Time-to-Move) currently only has official support for Wan models.",
          "  // Other model backends may produce unexpected results."
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1495:43",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1495,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tweak_index: params.ttmTweakIndex ?? 0,",
      "context": {
        "before": [
          "        image: conn(resizeId),",
          "        motion_mask: conn(combinedMaskId),",
          "        layer_data: combinedLayerDataId ? conn(combinedLayerDataId) : null,"
        ],
        "after": [
          "        tstrong_index: params.ttmTstrongIndex ?? 0,",
          "      },",
          "      \"Apply TTM Motion\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1496:47",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1496,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tstrong_index: params.ttmTstrongIndex ?? 0,",
      "context": {
        "before": [
          "        motion_mask: conn(combinedMaskId),",
          "        layer_data: combinedLayerDataId ? conn(combinedLayerDataId) : null,",
          "        tweak_index: params.ttmTweakIndex ?? 0,"
        ],
        "after": [
          "      },",
          "      \"Apply TTM Motion\",",
          "    );"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1595:43",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1595,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tweak_index: params.ttmTweakIndex ?? 0,",
      "context": {
        "before": [
          "        image: conn(resizeId),",
          "        motion_mask: conn(combinedMaskId),",
          "        layer_data: combinedLayerDataId ? conn(combinedLayerDataId) : null,"
        ],
        "after": [
          "        tstrong_index: params.ttmTstrongIndex ?? 0,",
          "      },",
          "      \"Apply TTM Motion\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1596:47",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1596,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tstrong_index: params.ttmTstrongIndex ?? 0,",
      "context": {
        "before": [
          "        motion_mask: conn(combinedMaskId),",
          "        layer_data: combinedLayerDataId ? conn(combinedLayerDataId) : null,",
          "        tweak_index: params.ttmTweakIndex ?? 0,"
        ],
        "after": [
          "      },",
          "      \"Apply TTM Motion\",",
          "    );"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1655:43",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1655,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tweak_index: params.ttmTweakIndex ?? 0,",
      "context": {
        "before": [
          "        image: conn(resizeId),",
          "        motion_mask: conn(combinedMaskId),",
          "        layer_data: combinedLayerDataId ? conn(combinedLayerDataId) : null,"
        ],
        "after": [
          "        tstrong_index: params.ttmTstrongIndex ?? 0,",
          "      },",
          "      \"Apply TTM Motion\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:1656:47",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 1656,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tstrong_index: params.ttmTstrongIndex ?? 0,",
      "context": {
        "before": [
          "        motion_mask: conn(combinedMaskId),",
          "        layer_data: combinedLayerDataId ? conn(combinedLayerDataId) : null,",
          "        tweak_index: params.ttmTweakIndex ?? 0,"
        ],
        "after": [
          "      },",
          "      \"Apply TTM Motion\",",
          "    );"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2234:56",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2234,
      "column": 56,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "tracks: JSON.stringify(params.motionData?.tracks || []),",
      "context": {
        "before": [
          "    \"WanVideoAddWanMoveTracks\",",
          "    {",
          "      wan_model: conn(wanLoaderId),"
        ],
        "after": [
          "      num_frames: params.frameCount,",
          "      width: params.width,",
          "      height: params.height,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2371:68",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2371,
      "column": 68,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "trajectories: JSON.stringify(params.motionData?.trajectories || []),",
      "context": {
        "before": [
          "    \"WanVideoATITracks\",",
          "    {",
          "      wan_model: conn(wanLoaderId),"
        ],
        "after": [
          "      num_frames: params.frameCount,",
          "      width: params.width,",
          "      height: params.height,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2478:60",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2478,
      "column": 60,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "matrices: JSON.stringify(params.cameraData?.matrices || []),",
      "context": {
        "before": [
          "  workflow[cameraMatricesId] = createNode(",
          "    \"CameraComfyUI_LoadMatrices\",",
          "    {"
        ],
        "after": [
          "      num_frames: params.frameCount,",
          "    },",
          "    \"Load Camera Matrices\","
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:147:25",
      "file": "services/conditioningRenderer.ts",
      "line": 147,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "near: config.near ?? 0.1,",
      "context": {
        "before": [
          "      cameraPosition: config.cameraPosition ?? { x: 0, y: 0, z: 1000 },",
          "      cameraTarget: config.cameraTarget ?? { x: 0, y: 0, z: 0 },",
          "      fov: config.fov ?? 60,"
        ],
        "after": [
          "      far: config.far ?? 10000,",
          "      depthNear: config.depthNear ?? 0,",
          "      depthFar: config.depthFar ?? 1000,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:149:35",
      "file": "services/conditioningRenderer.ts",
      "line": 149,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depthNear: config.depthNear ?? 0,",
      "context": {
        "before": [
          "      fov: config.fov ?? 60,",
          "      near: config.near ?? 0.1,",
          "      far: config.far ?? 10000,"
        ],
        "after": [
          "      depthFar: config.depthFar ?? 1000,",
          "      depthInvert: config.depthInvert ?? false,",
          "      particleSize: config.particleSize ?? 2,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:154:45",
      "file": "services/conditioningRenderer.ts",
      "line": 154,
      "column": 45,
      "pattern": "?? {}",
      "severity": "MEDIUM",
      "code": "categoryColors: config.categoryColors ?? {},",
      "context": {
        "before": [
          "      depthInvert: config.depthInvert ?? false,",
          "      particleSize: config.particleSize ?? 2,",
          "      backgroundColor: config.backgroundColor ?? \"#000000\","
        ],
        "after": [
          "    };",
          "",
          "    // Create canvas (prefer OffscreenCanvas for worker support)"
        ]
      },
      "suggestion": "Verify if empty object is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:503:37",
      "file": "services/conditioningRenderer.ts",
      "line": 503,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dataValue = p.dataValue ?? 0;",
      "context": {
        "before": [
          "    const valueRange = maxValue - minValue || 1;",
          "",
          "    for (const p of particles) {"
        ],
        "after": [
          "",
          "      // Normalize value to 0-1",
          "      const t = Math.max(0, Math.min(1, (dataValue - minValue) / valueRange));"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:721:49",
      "file": "services/conditioningRenderer.ts",
      "line": 721,
      "column": 49,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const x = (parseFloat(row[mapping.xColumn]) || 0) * xScale + xOffset;",
      "context": {
        "before": [
          "  } = options;",
          "",
          "  return rows.map((row) => {"
        ],
        "after": [
          "    const y = (parseFloat(row[mapping.yColumn]) || 0) * yScale + yOffset;",
          "    const z =",
          "      mapping.zColumn !== undefined"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:722:49",
      "file": "services/conditioningRenderer.ts",
      "line": 722,
      "column": 49,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const y = (parseFloat(row[mapping.yColumn]) || 0) * yScale + yOffset;",
      "context": {
        "before": [
          "",
          "  return rows.map((row) => {",
          "    const x = (parseFloat(row[mapping.xColumn]) || 0) * xScale + xOffset;"
        ],
        "after": [
          "    const z =",
          "      mapping.zColumn !== undefined",
          "        ? (parseFloat(row[mapping.zColumn]) || 0) * zScale + zOffset"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:725:45",
      "file": "services/conditioningRenderer.ts",
      "line": 725,
      "column": 45,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "? (parseFloat(row[mapping.zColumn]) || 0) * zScale + zOffset",
      "context": {
        "before": [
          "    const y = (parseFloat(row[mapping.yColumn]) || 0) * yScale + yOffset;",
          "    const z =",
          "      mapping.zColumn !== undefined"
        ],
        "after": [
          "        : 0;",
          "",
          "    const particle: ParticleData = {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:741:69",
      "file": "services/conditioningRenderer.ts",
      "line": 741,
      "column": 69,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "particle.dataValue = parseFloat(row[mapping.dataValueColumn]) || 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    if (mapping.dataValueColumn !== undefined) {"
        ],
        "after": [
          "    }",
          "",
          "    return particle;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:598:14",
      "file": "services/dataImport.ts",
      "line": 598,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let max = -Infinity;",
      "context": {
        "before": [
          "    return 0;",
          "  }",
          ""
        ],
        "after": [
          "  for (const row of asset.rows) {",
          "    const value = parseFloat(row[colIndex]);",
          "    if (!Number.isNaN(value) && value > max) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:606:19",
      "file": "services/dataImport.ts",
      "line": 606,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "return max === -Infinity ? 0 : max;",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:623:13",
      "file": "services/dataImport.ts",
      "line": 623,
      "column": 13,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let min = Infinity;",
      "context": {
        "before": [
          "    return 0;",
          "  }",
          ""
        ],
        "after": [
          "  for (const row of asset.rows) {",
          "    const value = parseFloat(row[colIndex]);",
          "    if (!Number.isNaN(value) && value < min) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:631:18",
      "file": "services/dataImport.ts",
      "line": 631,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "return min === Infinity ? 0 : min;",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "}",
          "",
          "// ============================================================================"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:280:34",
      "file": "services/depthflow.ts",
      "line": 280,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const phase = motion.phase ?? 0;",
      "context": {
        "before": [
          "      const amplitude =",
          "        motion.amplitude ?? (motion.endValue - motion.startValue) / 2;",
          "      const frequency = motion.frequency ?? 1;"
        ],
        "after": [
          "      const loops = motion.loops ?? 1;",
          "      const baseValue = (motion.startValue + motion.endValue) / 2;",
          "      return ("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:293:34",
      "file": "services/depthflow.ts",
      "line": 293,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const phase = motion.phase ?? 0;",
      "context": {
        "before": [
          "      const amplitude =",
          "        motion.amplitude ?? (motion.endValue - motion.startValue) / 2;",
          "      const frequency = motion.frequency ?? 1;"
        ],
        "after": [
          "      const loops = motion.loops ?? 1;",
          "      const baseValue = (motion.startValue + motion.endValue) / 2;",
          "      return ("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:277:28",
      "file": "services/effects/audioVisualizer.ts",
      "line": 277,
      "column": 28,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "value = sub[frame] || 0;",
      "context": {
        "before": [
          "      let value = 0;",
          "",
          "      if (t < 0.05) {"
        ],
        "after": [
          "      } else if (t < 0.15) {",
          "        value = bass[frame] || 0;",
          "      } else if (t < 0.3) {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:279:29",
      "file": "services/effects/audioVisualizer.ts",
      "line": 279,
      "column": 29,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "value = bass[frame] || 0;",
      "context": {
        "before": [
          "      if (t < 0.05) {",
          "        value = sub[frame] || 0;",
          "      } else if (t < 0.15) {"
        ],
        "after": [
          "      } else if (t < 0.3) {",
          "        value = lowMid[frame] || 0;",
          "      } else if (t < 0.5) {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:281:31",
      "file": "services/effects/audioVisualizer.ts",
      "line": 281,
      "column": 31,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "value = lowMid[frame] || 0;",
      "context": {
        "before": [
          "      } else if (t < 0.15) {",
          "        value = bass[frame] || 0;",
          "      } else if (t < 0.3) {"
        ],
        "after": [
          "      } else if (t < 0.5) {",
          "        value = mid[frame] || 0;",
          "      } else if (t < 0.7) {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:283:28",
      "file": "services/effects/audioVisualizer.ts",
      "line": 283,
      "column": 28,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "value = mid[frame] || 0;",
      "context": {
        "before": [
          "      } else if (t < 0.3) {",
          "        value = lowMid[frame] || 0;",
          "      } else if (t < 0.5) {"
        ],
        "after": [
          "      } else if (t < 0.7) {",
          "        value = highMid[frame] || 0;",
          "      } else {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:285:32",
      "file": "services/effects/audioVisualizer.ts",
      "line": 285,
      "column": 32,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "value = highMid[frame] || 0;",
      "context": {
        "before": [
          "      } else if (t < 0.5) {",
          "        value = mid[frame] || 0;",
          "      } else if (t < 0.7) {"
        ],
        "after": [
          "      } else {",
          "        value = high[frame] || 0;",
          "      }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:287:29",
      "file": "services/effects/audioVisualizer.ts",
      "line": 287,
      "column": 29,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "value = high[frame] || 0;",
      "context": {
        "before": [
          "      } else if (t < 0.7) {",
          "        value = highMid[frame] || 0;",
          "      } else {"
        ],
        "after": [
          "      }",
          "",
          "      // Add some variation within bands"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1022:41",
      "file": "services/effects/blurRenderer.ts",
      "line": 1022,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const directionRaw = params.direction ?? 0;",
      "context": {
        "before": [
          "  input: EffectStackResult,",
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {"
        ],
        "after": [
          "  const direction = Number.isFinite(directionRaw)",
          "    ? (directionRaw * Math.PI) / 180",
          "    : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1364:41",
      "file": "services/effects/blurRenderer.ts",
      "line": 1364,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const thresholdRaw = params.threshold ?? 0;",
      "context": {
        "before": [
          "  const radius = Number.isFinite(radiusRaw)",
          "    ? Math.max(1, Math.min(100, radiusRaw))",
          "    : 1;"
        ],
        "after": [
          "  const threshold = Number.isFinite(thresholdRaw)",
          "    ? Math.max(0, Math.min(255, thresholdRaw))",
          "    : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:674:62",
      "file": "services/effects/cinematicBloom.ts",
      "line": 674,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const threshold = Math.max(0, Math.min(1, params.threshold ?? 0.8));",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Extract parameters with defaults",
          "  const intensity = Math.max(0, Math.min(10, params.intensity ?? 1.0));"
        ],
        "after": [
          "  const radius = Math.max(0, Math.min(200, params.radius ?? 50));",
          "  const falloffMode = (params.falloff_mode ?? \"inverse_square\") as",
          "    | \"gaussian\""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:688:61",
      "file": "services/effects/cinematicBloom.ts",
      "line": 688,
      "column": 61,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const exposure = Math.max(-5, Math.min(5, params.exposure ?? 0));",
      "context": {
        "before": [
          "  const radiusG = Math.max(0, Math.min(2, params.radius_g ?? 1.0)) * radius;",
          "  const radiusB = Math.max(0, Math.min(2, params.radius_b ?? 1.0)) * radius;",
          "  const tonemap = (params.tonemap ?? \"aces\") as TonemapOperator;"
        ],
        "after": [
          "  const chromaticAberration = Math.max(",
          "    0,",
          "    Math.min(20, params.chromatic_aberration ?? 0),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:691:46",
      "file": "services/effects/cinematicBloom.ts",
      "line": 691,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "Math.min(20, params.chromatic_aberration ?? 0),",
      "context": {
        "before": [
          "  const exposure = Math.max(-5, Math.min(5, params.exposure ?? 0));",
          "  const chromaticAberration = Math.max(",
          "    0,"
        ],
        "after": [
          "  );",
          "  const lensDirtEnabled = params.lens_dirt_enabled ?? false;",
          "  const lensDirtIntensity = Math.max("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:696:44",
      "file": "services/effects/cinematicBloom.ts",
      "line": 696,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "Math.min(1, params.lens_dirt_intensity ?? 0.5),",
      "context": {
        "before": [
          "  const lensDirtEnabled = params.lens_dirt_enabled ?? false;",
          "  const lensDirtIntensity = Math.max(",
          "    0,"
        ],
        "after": [
          "  );",
          "  const lensDirtScale = Math.max(0.5, Math.min(2, params.lens_dirt_scale ?? 1));",
          "  const blendMode = (params.blend_mode ?? \"add\") as BloomBlendMode;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:38:36",
      "file": "services/effects/colorGrading.ts",
      "line": 38,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const liftRRaw = params.lift_red ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Lift (shadow adjustment) - validate for NaN"
        ],
        "after": [
          "  const liftGRaw = params.lift_green ?? 0;",
          "  const liftBRaw = params.lift_blue ?? 0;",
          "  const liftR = Number.isFinite(liftRRaw)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:39:38",
      "file": "services/effects/colorGrading.ts",
      "line": 39,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const liftGRaw = params.lift_green ?? 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Lift (shadow adjustment) - validate for NaN",
          "  const liftRRaw = params.lift_red ?? 0;"
        ],
        "after": [
          "  const liftBRaw = params.lift_blue ?? 0;",
          "  const liftR = Number.isFinite(liftRRaw)",
          "    ? Math.max(-1, Math.min(1, liftRRaw))"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:40:37",
      "file": "services/effects/colorGrading.ts",
      "line": 40,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const liftBRaw = params.lift_blue ?? 0;",
      "context": {
        "before": [
          "  // Lift (shadow adjustment) - validate for NaN",
          "  const liftRRaw = params.lift_red ?? 0;",
          "  const liftGRaw = params.lift_green ?? 0;"
        ],
        "after": [
          "  const liftR = Number.isFinite(liftRRaw)",
          "    ? Math.max(-1, Math.min(1, liftRRaw))",
          "    : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:386:71",
      "file": "services/effects/colorGrading.ts",
      "line": 386,
      "column": 71,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const hueVsHue: Array<{ x: number; y: number }> = params.hue_vs_hue ?? [];",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Parse curve data (arrays of control points)"
        ],
        "after": [
          "  const hueVsSat: Array<{ x: number; y: number }> = params.hue_vs_sat ?? [];",
          "  const hueVsLum: Array<{ x: number; y: number }> = params.hue_vs_lum ?? [];",
          "  const lumVsSat: Array<{ x: number; y: number }> = params.lum_vs_sat ?? [];"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:387:71",
      "file": "services/effects/colorGrading.ts",
      "line": 387,
      "column": 71,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const hueVsSat: Array<{ x: number; y: number }> = params.hue_vs_sat ?? [];",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Parse curve data (arrays of control points)",
          "  const hueVsHue: Array<{ x: number; y: number }> = params.hue_vs_hue ?? [];"
        ],
        "after": [
          "  const hueVsLum: Array<{ x: number; y: number }> = params.hue_vs_lum ?? [];",
          "  const lumVsSat: Array<{ x: number; y: number }> = params.lum_vs_sat ?? [];",
          "  const satVsSat: Array<{ x: number; y: number }> = params.sat_vs_sat ?? [];"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:388:71",
      "file": "services/effects/colorGrading.ts",
      "line": 388,
      "column": 71,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const hueVsLum: Array<{ x: number; y: number }> = params.hue_vs_lum ?? [];",
      "context": {
        "before": [
          "  // Parse curve data (arrays of control points)",
          "  const hueVsHue: Array<{ x: number; y: number }> = params.hue_vs_hue ?? [];",
          "  const hueVsSat: Array<{ x: number; y: number }> = params.hue_vs_sat ?? [];"
        ],
        "after": [
          "  const lumVsSat: Array<{ x: number; y: number }> = params.lum_vs_sat ?? [];",
          "  const satVsSat: Array<{ x: number; y: number }> = params.sat_vs_sat ?? [];",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:389:71",
      "file": "services/effects/colorGrading.ts",
      "line": 389,
      "column": 71,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const lumVsSat: Array<{ x: number; y: number }> = params.lum_vs_sat ?? [];",
      "context": {
        "before": [
          "  const hueVsHue: Array<{ x: number; y: number }> = params.hue_vs_hue ?? [];",
          "  const hueVsSat: Array<{ x: number; y: number }> = params.hue_vs_sat ?? [];",
          "  const hueVsLum: Array<{ x: number; y: number }> = params.hue_vs_lum ?? [];"
        ],
        "after": [
          "  const satVsSat: Array<{ x: number; y: number }> = params.sat_vs_sat ?? [];",
          "",
          "  // No curves defined = no change"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:390:71",
      "file": "services/effects/colorGrading.ts",
      "line": 390,
      "column": 71,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const satVsSat: Array<{ x: number; y: number }> = params.sat_vs_sat ?? [];",
      "context": {
        "before": [
          "  const hueVsSat: Array<{ x: number; y: number }> = params.hue_vs_sat ?? [];",
          "  const hueVsLum: Array<{ x: number; y: number }> = params.hue_vs_lum ?? [];",
          "  const lumVsSat: Array<{ x: number; y: number }> = params.lum_vs_sat ?? [];"
        ],
        "after": [
          "",
          "  // No curves defined = no change",
          "  if ("
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:63:43",
      "file": "services/effects/colorRenderer.ts",
      "line": 63,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawBrightness = params.brightness ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)"
        ],
        "after": [
          "  const brightness = Number.isFinite(rawBrightness) ? rawBrightness / 100 : 0;",
          "  const rawContrast = params.contrast ?? 0;",
          "  const contrast = Number.isFinite(rawContrast) ? rawContrast / 100 : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:65:39",
      "file": "services/effects/colorRenderer.ts",
      "line": 65,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawContrast = params.contrast ?? 0;",
      "context": {
        "before": [
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawBrightness = params.brightness ?? 0;",
          "  const brightness = Number.isFinite(rawBrightness) ? rawBrightness / 100 : 0;"
        ],
        "after": [
          "  const contrast = Number.isFinite(rawContrast) ? rawContrast / 100 : 0;",
          "  const useLegacy = params.use_legacy ?? false;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:194:36",
      "file": "services/effects/colorRenderer.ts",
      "line": 194,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawHue = params.master_hue ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)"
        ],
        "after": [
          "  const hueShift = Number.isFinite(rawHue) ? rawHue / 360 : 0;",
          "  const rawSat = params.master_saturation ?? 0;",
          "  const saturationShift = Number.isFinite(rawSat) ? rawSat / 100 : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:196:43",
      "file": "services/effects/colorRenderer.ts",
      "line": 196,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawSat = params.master_saturation ?? 0;",
      "context": {
        "before": [
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawHue = params.master_hue ?? 0;",
          "  const hueShift = Number.isFinite(rawHue) ? rawHue / 360 : 0;"
        ],
        "after": [
          "  const saturationShift = Number.isFinite(rawSat) ? rawSat / 100 : 0;",
          "  const rawLight = params.master_lightness ?? 0;",
          "  const lightnessShift = Number.isFinite(rawLight) ? rawLight / 100 : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:198:44",
      "file": "services/effects/colorRenderer.ts",
      "line": 198,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawLight = params.master_lightness ?? 0;",
      "context": {
        "before": [
          "  const hueShift = Number.isFinite(rawHue) ? rawHue / 360 : 0;",
          "  const rawSat = params.master_saturation ?? 0;",
          "  const saturationShift = Number.isFinite(rawSat) ? rawSat / 100 : 0;"
        ],
        "after": [
          "  const lightnessShift = Number.isFinite(rawLight) ? rawLight / 100 : 0;",
          "  const colorize = params.colorize ?? false;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:278:44",
      "file": "services/effects/colorRenderer.ts",
      "line": 278,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawInputBlack = params.input_black ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)"
        ],
        "after": [
          "  const inputBlack = Number.isFinite(rawInputBlack) ? rawInputBlack : 0;",
          "  const rawInputWhite = params.input_white ?? 255;",
          "  const inputWhite = Number.isFinite(rawInputWhite) ? rawInputWhite : 255;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:284:46",
      "file": "services/effects/colorRenderer.ts",
      "line": 284,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawOutputBlack = params.output_black ?? 0;",
      "context": {
        "before": [
          "  const inputWhite = Number.isFinite(rawInputWhite) ? rawInputWhite : 255;",
          "  const rawGamma = params.gamma ?? 1;",
          "  const gamma = Number.isFinite(rawGamma) && rawGamma > 0 ? rawGamma : 1;"
        ],
        "after": [
          "  const outputBlack = Number.isFinite(rawOutputBlack) ? rawOutputBlack : 0;",
          "  const rawOutputWhite = params.output_white ?? 255;",
          "  const outputWhite = Number.isFinite(rawOutputWhite) ? rawOutputWhite : 255;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1099:39",
      "file": "services/effects/colorRenderer.ts",
      "line": 1099,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawExposure = params.exposure ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)"
        ],
        "after": [
          "  const exposure = Number.isFinite(rawExposure) ? rawExposure : 0;",
          "  const rawOffset = params.offset ?? 0;",
          "  const offset = Number.isFinite(rawOffset) ? rawOffset : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1101:35",
      "file": "services/effects/colorRenderer.ts",
      "line": 1101,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawOffset = params.offset ?? 0;",
      "context": {
        "before": [
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawExposure = params.exposure ?? 0;",
          "  const exposure = Number.isFinite(rawExposure) ? rawExposure : 0;"
        ],
        "after": [
          "  const offset = Number.isFinite(rawOffset) ? rawOffset : 0;",
          "  const rawGamma = params.gamma ?? 1;",
          "  const gamma = Number.isFinite(rawGamma) && rawGamma > 0 ? rawGamma : 1;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1170:39",
      "file": "services/effects/colorRenderer.ts",
      "line": 1170,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawVibrance = params.vibrance ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)"
        ],
        "after": [
          "  const vibrance = Number.isFinite(rawVibrance) ? rawVibrance / 100 : 0;",
          "  const rawSaturation = params.saturation ?? 0;",
          "  const saturation = Number.isFinite(rawSaturation) ? rawSaturation / 100 : 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1172:43",
      "file": "services/effects/colorRenderer.ts",
      "line": 1172,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawSaturation = params.saturation ?? 0;",
      "context": {
        "before": [
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawVibrance = params.vibrance ?? 0;",
          "  const vibrance = Number.isFinite(rawVibrance) ? rawVibrance / 100 : 0;"
        ],
        "after": [
          "  const saturation = Number.isFinite(rawSaturation) ? rawSaturation / 100 : 0;",
          "",
          "  // No change if all values are 0"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1443:35",
      "file": "services/effects/colorRenderer.ts",
      "line": 1443,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawAmount = params.amount ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)"
        ],
        "after": [
          "  const amount = Number.isFinite(rawAmount) ? rawAmount / 100 : 0;",
          "  const rawMidpoint = params.midpoint ?? 50;",
          "  const midpoint = Number.isFinite(rawMidpoint) ? rawMidpoint / 100 : 0.5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1447:41",
      "file": "services/effects/colorRenderer.ts",
      "line": 1447,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawRoundness = params.roundness ?? 0;",
      "context": {
        "before": [
          "  const amount = Number.isFinite(rawAmount) ? rawAmount / 100 : 0;",
          "  const rawMidpoint = params.midpoint ?? 50;",
          "  const midpoint = Number.isFinite(rawMidpoint) ? rawMidpoint / 100 : 0.5;"
        ],
        "after": [
          "  const roundness = Number.isFinite(rawRoundness) ? rawRoundness / 100 : 0;",
          "  const rawFeather = params.feather ?? 50;",
          "  const feather = Number.isFinite(rawFeather) ? rawFeather / 100 : 0.5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1551:29",
      "file": "services/effects/colorRenderer.ts",
      "line": 1551,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "domainMin = [parts[0] ?? 0, parts[1] ?? 0, parts[2] ?? 0];",
      "context": {
        "before": [
          "      size = parseInt(trimmed.split(/\\s+/)[1], 10);",
          "    } else if (trimmed.startsWith(\"DOMAIN_MIN\")) {",
          "      const parts = trimmed.split(/\\s+/).slice(1).map(Number);"
        ],
        "after": [
          "    } else if (trimmed.startsWith(\"DOMAIN_MAX\")) {",
          "      const parts = trimmed.split(/\\s+/).slice(1).map(Number);",
          "      domainMax = [parts[0] ?? 1, parts[1] ?? 1, parts[2] ?? 1];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1551:44",
      "file": "services/effects/colorRenderer.ts",
      "line": 1551,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "domainMin = [parts[0] ?? 0, parts[1] ?? 0, parts[2] ?? 0];",
      "context": {
        "before": [
          "      size = parseInt(trimmed.split(/\\s+/)[1], 10);",
          "    } else if (trimmed.startsWith(\"DOMAIN_MIN\")) {",
          "      const parts = trimmed.split(/\\s+/).slice(1).map(Number);"
        ],
        "after": [
          "    } else if (trimmed.startsWith(\"DOMAIN_MAX\")) {",
          "      const parts = trimmed.split(/\\s+/).slice(1).map(Number);",
          "      domainMax = [parts[0] ?? 1, parts[1] ?? 1, parts[2] ?? 1];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1551:59",
      "file": "services/effects/colorRenderer.ts",
      "line": 1551,
      "column": 59,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "domainMin = [parts[0] ?? 0, parts[1] ?? 0, parts[2] ?? 0];",
      "context": {
        "before": [
          "      size = parseInt(trimmed.split(/\\s+/)[1], 10);",
          "    } else if (trimmed.startsWith(\"DOMAIN_MIN\")) {",
          "      const parts = trimmed.split(/\\s+/).slice(1).map(Number);"
        ],
        "after": [
          "    } else if (trimmed.startsWith(\"DOMAIN_MAX\")) {",
          "      const parts = trimmed.split(/\\s+/).slice(1).map(Number);",
          "      domainMax = [parts[0] ?? 1, parts[1] ?? 1, parts[2] ?? 1];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1567:28",
      "file": "services/effects/colorRenderer.ts",
      "line": 1567,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "data[i * 3] = parts[0] ?? 0;",
      "context": {
        "before": [
          "  const data = new Float32Array(size * size * size * 3);",
          "  for (let i = 0; i < dataLines.length && i < size * size * size; i++) {",
          "    const parts = dataLines[i].split(/\\s+/).map(Number);"
        ],
        "after": [
          "    data[i * 3 + 1] = parts[1] ?? 0;",
          "    data[i * 3 + 2] = parts[2] ?? 0;",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1568:32",
      "file": "services/effects/colorRenderer.ts",
      "line": 1568,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "data[i * 3 + 1] = parts[1] ?? 0;",
      "context": {
        "before": [
          "  for (let i = 0; i < dataLines.length && i < size * size * size; i++) {",
          "    const parts = dataLines[i].split(/\\s+/).map(Number);",
          "    data[i * 3] = parts[0] ?? 0;"
        ],
        "after": [
          "    data[i * 3 + 2] = parts[2] ?? 0;",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1569:32",
      "file": "services/effects/colorRenderer.ts",
      "line": 1569,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "data[i * 3 + 2] = parts[2] ?? 0;",
      "context": {
        "before": [
          "    const parts = dataLines[i].split(/\\s+/).map(Number);",
          "    data[i * 3] = parts[0] ?? 0;",
          "    data[i * 3 + 1] = parts[1] ?? 0;"
        ],
        "after": [
          "  }",
          "",
          "  return { title, size, domainMin, domainMax, data };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1612:26",
      "file": "services/effects/colorRenderer.ts",
      "line": 1612,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return lut.data[idx] ?? 0;",
      "context": {
        "before": [
          "    channel: number,",
          "  ): number => {",
          "    const idx = ((bi * size + gi) * size + ri) * 3 + channel;"
        ],
        "after": [
          "  };",
          "",
          "  // Trilinear interpolation for each channel"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:183:21",
      "file": "services/effects/generateRenderer.ts",
      "line": 183,
      "column": 21,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const g = color.g ?? 0;",
      "context": {
        "before": [
          "",
          "  // Normalize color",
          "  const r = color.r ?? 255;"
        ],
        "after": [
          "  const b = color.b ?? 0;",
          "  const a = (color.a ?? 1) * 255 * opacity;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:184:21",
      "file": "services/effects/generateRenderer.ts",
      "line": 184,
      "column": 21,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const b = color.b ?? 0;",
      "context": {
        "before": [
          "  // Normalize color",
          "  const r = color.r ?? 255;",
          "  const g = color.g ?? 0;"
        ],
        "after": [
          "  const a = (color.a ?? 1) * 255 * opacity;",
          "",
          "  for (let i = 0; i < src.length; i += 4) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:240:40",
      "file": "services/effects/generateRenderer.ts",
      "line": 240,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const scatter = (params.ramp_scatter ?? 0) / 100;",
      "context": {
        "before": [
          "  const endPoint = params.end_of_ramp ?? { x: 1, y: 0.5 };",
          "  const endColor = params.end_color ?? { r: 255, g: 255, b: 255, a: 1 };",
          "  const rampShape = params.ramp_shape ?? \"linear\";"
        ],
        "after": [
          "  const blend = (params.blend_with_original ?? 0) / 100;",
          "",
          "  const { width, height } = input.canvas;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:241:45",
      "file": "services/effects/generateRenderer.ts",
      "line": 241,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const blend = (params.blend_with_original ?? 0) / 100;",
      "context": {
        "before": [
          "  const endColor = params.end_color ?? { r: 255, g: 255, b: 255, a: 1 };",
          "  const rampShape = params.ramp_shape ?? \"linear\";",
          "  const scatter = (params.ramp_scatter ?? 0) / 100;"
        ],
        "after": [
          "",
          "  const { width, height } = input.canvas;",
          "  const output = createMatchingCanvas(input.canvas);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:281:45",
      "file": "services/effects/generateRenderer.ts",
      "line": 281,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = (params._frame as number) ?? 0;",
      "context": {
        "before": [
          "    const outputData = output.ctx.getImageData(0, 0, width, height);",
          "    const dst = outputData.data;",
          "    const scatterAmount = scatter * 25;"
        ],
        "after": [
          "",
          "    // Mulberry32 seeded random for deterministic scatter",
          "    const seededRandom = (seed: number) => {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:418:41",
      "file": "services/effects/generateRenderer.ts",
      "line": 418,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const brightness = (params.brightness ?? 0) / 100;",
      "context": {
        "before": [
          "  const fractalType = params.fractal_type ?? \"basic\";",
          "  const invert = params.invert ?? false;",
          "  const contrast = (params.contrast ?? 100) / 100;"
        ],
        "after": [
          "  const scale = params.scale ?? 100;",
          "  const complexity = Math.max(1, Math.min(20, params.complexity ?? 6));",
          "  const evolution = ((params.evolution ?? 0) * Math.PI) / 180;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:421:40",
      "file": "services/effects/generateRenderer.ts",
      "line": 421,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const evolution = ((params.evolution ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "  const brightness = (params.brightness ?? 0) / 100;",
          "  const scale = params.scale ?? 100;",
          "  const complexity = Math.max(1, Math.min(20, params.complexity ?? 6));"
        ],
        "after": [
          "",
          "  const { width, height } = input.canvas;",
          "  const output = createMatchingCanvas(input.canvas);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:506:38",
      "file": "services/effects/generateRenderer.ts",
      "line": 506,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const intensity = params.intensity ?? 0.5;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "  frame?: number,",
          "): EffectStackResult {"
        ],
        "after": [
          "  const size = params.size ?? 1;",
          "  const softness = params.softness ?? 0;",
          "  const animate = params.animate ?? true;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:508:36",
      "file": "services/effects/generateRenderer.ts",
      "line": 508,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const softness = params.softness ?? 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  const intensity = params.intensity ?? 0.5;",
          "  const size = params.size ?? 1;"
        ],
        "after": [
          "  const animate = params.animate ?? true;",
          "  const colorGrain = params.color ?? false;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:537:33",
      "file": "services/effects/generateRenderer.ts",
      "line": 537,
      "column": 33,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const seed = animate ? (frame ?? 0) * 12345 : 42;",
      "context": {
        "before": [
          "  const grain = grainData.data;",
          "",
          "  // Seed for deterministic grain when not animating"
        ],
        "after": [
          "  let rngState = seed;",
          "",
          "  // Simple seeded random"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:629:40",
      "file": "services/effects/generateRenderer.ts",
      "line": 629,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const fadeStart = (params.fade_start ?? 0) / 100;",
      "context": {
        "before": [
          "    b: 128,",
          "    a: 1,",
          "  };"
        ],
        "after": [
          "  const fadeEnd = (params.fade_end ?? 100) / 100;",
          "  const invert = params.invert ?? false;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:731:37",
      "file": "services/effects/generateRenderer.ts",
      "line": 731,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const softness = (params.softness ?? 0) / 100;",
      "context": {
        "before": [
          "  const center = params.center ?? { x: 0.5, y: 0.5 };",
          "  const ellipseWidth = params.ellipse_width ?? 200;",
          "  const ellipseHeight = params.ellipse_height ?? 200;"
        ],
        "after": [
          "  const strokeWidth = params.stroke_width ?? 0;",
          "  const strokeColor = params.stroke_color ?? { r: 255, g: 255, b: 255, a: 1 };",
          "  const backgroundColor = params.background_color ?? { r: 0, g: 0, b: 0, a: 1 };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:732:43",
      "file": "services/effects/generateRenderer.ts",
      "line": 732,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const strokeWidth = params.stroke_width ?? 0;",
      "context": {
        "before": [
          "  const ellipseWidth = params.ellipse_width ?? 200;",
          "  const ellipseHeight = params.ellipse_height ?? 200;",
          "  const softness = (params.softness ?? 0) / 100;"
        ],
        "after": [
          "  const strokeColor = params.stroke_color ?? { r: 255, g: 255, b: 255, a: 1 };",
          "  const backgroundColor = params.background_color ?? { r: 0, g: 0, b: 0, a: 1 };",
          "  const invertShape = params.invert ?? false;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:772:31",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 772,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = params._frame ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  const effectInstance = params._effectInstance;"
        ],
        "after": [
          "  const showMesh = params.show_mesh ?? false;",
          "  const showPins = params.show_pins ?? true;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:777:48",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 777,
      "column": 48,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const pins: WarpPin[] = effectInstance?.pins ?? [];",
      "context": {
        "before": [
          "  const showPins = params.show_pins ?? true;",
          "",
          "  // Get pins from effect instance (injected by render pipeline)"
        ],
        "after": [
          "",
          "  // No pins = no deformation",
          "  if (pins.length === 0) {"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:48:41",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 48,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawThreshold = params.threshold ?? 0.25;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  const direction = params.direction ?? \"horizontal\";",
          "  // Validate numeric params (NaN causes visual corruption)"
        ],
        "after": [
          "  const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.25;",
          "  const rawSmoothing = params.smoothing ?? 0.1;",
          "  const smoothing = Number.isFinite(rawSmoothing) ? rawSmoothing : 0.1;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:50:41",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 50,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawSmoothing = params.smoothing ?? 0.1;",
      "context": {
        "before": [
          "  // Validate numeric params (NaN causes visual corruption)",
          "  const rawThreshold = params.threshold ?? 0.25;",
          "  const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.25;"
        ],
        "after": [
          "  const smoothing = Number.isFinite(rawSmoothing) ? rawSmoothing : 0.1;",
          "  const sortBy = params.sort_by ?? \"saturation\";",
          "  const reverse = params.reverse ?? false;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:207:46",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 207,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rng = new SeededRandom(seed + (frame ?? 0));",
      "context": {
        "before": [
          "  const imageData = output.ctx.getImageData(0, 0, width, height);",
          "  const data = imageData.data;",
          ""
        ],
        "after": [
          "",
          "  // Horizontal block shifts",
          "  const numBlocks = Math.floor(glitchAmount * 3);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:307:36",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 307,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const tracking = params.tracking ?? 0.5;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "  frame?: number,",
          "): EffectStackResult {"
        ],
        "after": [
          "  const noise = params.noise ?? 0.3;",
          "  const colorBleed = params.color_bleed ?? 3;",
          "  const jitter = params.jitter ?? 0.5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:308:30",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 308,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const noise = params.noise ?? 0.3;",
      "context": {
        "before": [
          "  frame?: number,",
          "): EffectStackResult {",
          "  const tracking = params.tracking ?? 0.5;"
        ],
        "after": [
          "  const colorBleed = params.color_bleed ?? 3;",
          "  const jitter = params.jitter ?? 0.5;",
          "  const rollingBands = params.rolling_bands ?? true;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:310:32",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 310,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const jitter = params.jitter ?? 0.5;",
      "context": {
        "before": [
          "  const tracking = params.tracking ?? 0.5;",
          "  const noise = params.noise ?? 0.3;",
          "  const colorBleed = params.color_bleed ?? 3;"
        ],
        "after": [
          "  const rollingBands = params.rolling_bands ?? true;",
          "",
          "  const output = createMatchingCanvas(input.canvas);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:321:47",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 321,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rng = new SeededRandom(12345 + (frame ?? 0));",
      "context": {
        "before": [
          "  const imageData = output.ctx.getImageData(0, 0, width, height);",
          "  const data = imageData.data;",
          ""
        ],
        "after": [
          "",
          "  // Color bleeding (smear horizontally)",
          "  if (colorBleed > 0) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:436:42",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 436,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const redOffsetY = params.red_offset_y ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  const redOffsetX = params.red_offset_x ?? 5;"
        ],
        "after": [
          "  const greenOffsetX = params.green_offset_x ?? 0;",
          "  const greenOffsetY = params.green_offset_y ?? 0;",
          "  const blueOffsetX = params.blue_offset_x ?? -5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:437:46",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 437,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const greenOffsetX = params.green_offset_x ?? 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  const redOffsetX = params.red_offset_x ?? 5;",
          "  const redOffsetY = params.red_offset_y ?? 0;"
        ],
        "after": [
          "  const greenOffsetY = params.green_offset_y ?? 0;",
          "  const blueOffsetX = params.blue_offset_x ?? -5;",
          "  const blueOffsetY = params.blue_offset_y ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:438:46",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 438,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const greenOffsetY = params.green_offset_y ?? 0;",
      "context": {
        "before": [
          "  const redOffsetX = params.red_offset_x ?? 5;",
          "  const redOffsetY = params.red_offset_y ?? 0;",
          "  const greenOffsetX = params.green_offset_x ?? 0;"
        ],
        "after": [
          "  const blueOffsetX = params.blue_offset_x ?? -5;",
          "  const blueOffsetY = params.blue_offset_y ?? 0;",
          "  const blendMode = params.blend_mode ?? \"screen\";"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:440:44",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 440,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const blueOffsetY = params.blue_offset_y ?? 0;",
      "context": {
        "before": [
          "  const greenOffsetX = params.green_offset_x ?? 0;",
          "  const greenOffsetY = params.green_offset_y ?? 0;",
          "  const blueOffsetX = params.blue_offset_x ?? -5;"
        ],
        "after": [
          "  const blendMode = params.blend_mode ?? \"screen\";",
          "",
          "  // No offset = no change"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:528:34",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 528,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const opacity = params.opacity ?? 0.3;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  const lineWidth = params.line_width ?? 2;",
          "  const lineSpacing = params.line_spacing ?? 2;"
        ],
        "after": [
          "  const direction = params.direction ?? \"horizontal\";",
          "  const animate = params.animate ?? false;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:877:28",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 877,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "let phase = params.phase ?? 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  const amplitude = params.amplitude ?? 10;",
          "  const wavelength = params.wavelength ?? 50;"
        ],
        "after": [
          "  const centerX = (params.center_x ?? 50) / 100;",
          "  const centerY = (params.center_y ?? 50) / 100;",
          "  const decay = params.decay ?? 0.5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:880:30",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 880,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const decay = params.decay ?? 0.5;",
      "context": {
        "before": [
          "  let phase = params.phase ?? 0;",
          "  const centerX = (params.center_x ?? 50) / 100;",
          "  const centerY = (params.center_y ?? 50) / 100;"
        ],
        "after": [
          "",
          "  // Animate phase if frame is provided",
          "  if (frame !== undefined && params.animate !== false) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:1011:45",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 1011,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const blend = (params.blend_with_original ?? 0) / 100;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  const invert = params.invert ?? false;"
        ],
        "after": [
          "",
          "  const output = createMatchingCanvas(input.canvas);",
          "  const { width, height } = input.canvas;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:227:31",
      "file": "services/effects/timeRenderer.ts",
      "line": 227,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = params._frame ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  // Get frame info from extended params (needed for echoTime default calculation)"
        ],
        "after": [
          "  // Validate fps (nullish coalescing doesn't catch NaN)",
          "  const fps =",
          "    Number.isFinite(params._fps) && params._fps > 0 ? params._fps : 16;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:244:33",
      "file": "services/effects/timeRenderer.ts",
      "line": 244,
      "column": 33,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawDecay = params.decay ?? 0.5;",
      "context": {
        "before": [
          "  const startingIntensity = Number.isFinite(rawIntensity)",
          "    ? Math.max(0, Math.min(1, rawIntensity))",
          "    : 1.0;"
        ],
        "after": [
          "  const decay = Number.isFinite(rawDecay)",
          "    ? Math.max(0, Math.min(1, rawDecay))",
          "    : 0.5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:287:59",
      "file": "services/effects/timeRenderer.ts",
      "line": 287,
      "column": 59,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const intensity = intensities[echoData.echoIndex - 1] ?? 0;",
      "context": {
        "before": [
          "",
          "  // Composite echoes based on operator",
          "  for (const echoData of echoFrames) {"
        ],
        "after": [
          "    if (intensity <= 0.001) continue;",
          "",
          "    // Create temp canvas for this echo"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:376:31",
      "file": "services/effects/timeRenderer.ts",
      "line": 376,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = params._frame ?? 0;",
      "context": {
        "before": [
          "  const targetFps = Number.isFinite(rawTargetFps)",
          "    ? Math.max(1, Math.min(60, rawTargetFps))",
          "    : 12;"
        ],
        "after": [
          "  // Validate fps to prevent division by NaN",
          "  const fps =",
          "    Number.isFinite(params._fps) && params._fps > 0 ? params._fps : 16;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:499:43",
      "file": "services/effects/timeRenderer.ts",
      "line": 499,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawBias = params.time_offset_bias ?? 0;",
      "context": {
        "before": [
          "  const mapType = params.map_type ?? \"gradient-h\";",
          "  const rawMapScale = params.map_scale ?? 1;",
          "  const mapScale = Number.isFinite(rawMapScale) ? rawMapScale : 1;"
        ],
        "after": [
          "  const bias = Number.isFinite(rawBias) ? rawBias : 0;",
          "  const frame = params._frame ?? 0;",
          "  const layerId = params._layerId ?? \"default\";"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:501:31",
      "file": "services/effects/timeRenderer.ts",
      "line": 501,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = params._frame ?? 0;",
      "context": {
        "before": [
          "  const mapScale = Number.isFinite(rawMapScale) ? rawMapScale : 1;",
          "  const rawBias = params.time_offset_bias ?? 0;",
          "  const bias = Number.isFinite(rawBias) ? rawBias : 0;"
        ],
        "after": [
          "  const layerId = params._layerId ?? \"default\";",
          "",
          "  // No effect if max displacement is 0"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:583:71",
      "file": "services/effects/timeRenderer.ts",
      "line": 583,
      "column": 71,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const freezeAtFrame = Math.max(0, Math.round(params.freeze_at_frame ?? 0));",
      "context": {
        "before": [
          "  input: EffectStackResult,",
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {"
        ],
        "after": [
          "  const frame = params._frame ?? 0;",
          "  const layerId = params._layerId ?? \"default\";",
          "  const cacheKey = `${layerId}_freeze`;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:584:31",
      "file": "services/effects/timeRenderer.ts",
      "line": 584,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = params._frame ?? 0;",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  const freezeAtFrame = Math.max(0, Math.round(params.freeze_at_frame ?? 0));"
        ],
        "after": [
          "  const layerId = params._layerId ?? \"default\";",
          "  const cacheKey = `${layerId}_freeze`;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:848:21",
      "file": "services/effects/timeRenderer.ts",
      "line": 848,
      "column": 21,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let bestSAD = Infinity;",
      "context": {
        "before": [
          "",
          "      let bestDx = 0;",
          "      let bestDy = 0;"
        ],
        "after": [
          "",
          "      // Search within radius for best match",
          "      for (let dy = -searchRadius; dy <= searchRadius; dy++) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/export/atiExport.ts:297:39",
      "file": "services/export/atiExport.ts",
      "line": 297,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const numFrames = points[0]?.length ?? 0;",
      "context": {
        "before": [
          "  fps: number = 16,",
          "): WanMoveTrajectory {",
          "  const numPoints = points.length;"
        ],
        "after": [
          "",
          "  // Convert to WanMove format",
          "  const tracks: number[][][] = points.map((track) =>"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:105:33",
      "file": "services/export/cameraExportFormats.ts",
      "line": 105,
      "column": 33,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const prevFrame = prev?.frame ?? 0;",
      "context": {
        "before": [
          "  }",
          "",
          "  // Interpolate"
        ],
        "after": [
          "  const nextFrame = next?.frame ?? prevFrame;",
          "  const t = nextFrame === prevFrame ? 0 : (frame - prevFrame) / (nextFrame - prevFrame);",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:60:18",
      "file": "services/export/depthRenderer.ts",
      "line": 60,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minDepth = Infinity;",
      "context": {
        "before": [
          "",
          "  // Initialize min/max to opposite extremes so any real depth value updates them.",
          "  // Handles empty scenes gracefully by keeping these values until validated below."
        ],
        "after": [
          "  let maxDepth = -Infinity;",
          "",
          "  // Sort layers by Z depth (front to back from camera's perspective)"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:61:19",
      "file": "services/export/depthRenderer.ts",
      "line": 61,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxDepth = -Infinity;",
      "context": {
        "before": [
          "  // Initialize min/max to opposite extremes so any real depth value updates them.",
          "  // Handles empty scenes gracefully by keeping these values until validated below.",
          "  let minDepth = Infinity;"
        ],
        "after": [
          "",
          "  // Sort layers by Z depth (front to back from camera's perspective)",
          "  const sortedLayers = [...layers]"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:163:59",
      "file": "services/export/depthRenderer.ts",
      "line": 163,
      "column": 59,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return interpolateValue(position.keyframes, frame, 2) || 0;",
      "context": {
        "before": [
          "  // Check for animated position",
          "  if (position.keyframes && position.keyframes.length > 0) {",
          "    // Interpolate keyframes"
        ],
        "after": [
          "  }",
          "",
          "  // Static position"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:170:42",
      "file": "services/export/depthRenderer.ts",
      "line": 170,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return (value as { z?: number }).z ?? 0;",
      "context": {
        "before": [
          "  if (position.value) {",
          "    const value = position.value;",
          "    if (typeof value === \"object\" && \"z\" in value) {"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:218:20",
      "file": "services/export/depthRenderer.ts",
      "line": 218,
      "column": 20,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "x = value[0] || 0;",
      "context": {
        "before": [
          "  if (position && \"value\" in position) {",
          "    const value = position.value;",
          "    if (Array.isArray(value)) {"
        ],
        "after": [
          "      y = value[1] || 0;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:219:20",
      "file": "services/export/depthRenderer.ts",
      "line": 219,
      "column": 20,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "y = value[1] || 0;",
      "context": {
        "before": [
          "    const value = position.value;",
          "    if (Array.isArray(value)) {",
          "      x = value[0] || 0;"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:250:27",
      "file": "services/export/depthRenderer.ts",
      "line": 250,
      "column": 27,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "anchorX = (value[0] || 0) / layerWidth + 0.5;",
      "context": {
        "before": [
          "  if (anchorPoint && \"value\" in anchorPoint) {",
          "    const value = anchorPoint.value;",
          "    if (Array.isArray(value)) {"
        ],
        "after": [
          "      anchorY = (value[1] || 0) / layerHeight + 0.5;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:251:27",
      "file": "services/export/depthRenderer.ts",
      "line": 251,
      "column": 27,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "anchorY = (value[1] || 0) / layerHeight + 0.5;",
      "context": {
        "before": [
          "    const value = anchorPoint.value;",
          "    if (Array.isArray(value)) {",
          "      anchorX = (value[0] || 0) / layerWidth + 0.5;"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:317:52",
      "file": "services/export/exportPipeline.ts",
      "line": 317,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const az = a.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "    const sortedLayers = [...this.layers]",
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {"
        ],
        "after": [
          "        const bz = b.transform?.position?.value?.z ?? 0;",
          "        return az - bz;",
          "      });"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:318:52",
      "file": "services/export/exportPipeline.ts",
      "line": 318,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bz = b.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {",
          "        const az = a.transform?.position?.value?.z ?? 0;"
        ],
        "after": [
          "        return az - bz;",
          "      });",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:348:53",
      "file": "services/export/exportPipeline.ts",
      "line": 348,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": ": ((evaluated.transform.rotation as any)?.z ?? 0);",
      "context": {
        "before": [
          "    const rotation =",
          "      typeof evaluated.transform.rotation === \"number\"",
          "        ? evaluated.transform.rotation"
        ],
        "after": [
          "    const opacity = evaluated.opacity;",
          "",
          "    ctx.save();"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:181:37",
      "file": "services/export/vaceControlExport.ts",
      "line": 181,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: p0.x, y: p0.y, z: p0.z || 0 },",
      "context": {
        "before": [
          "",
          "      // Create cubic bezier curve from control points",
          "      const curve = createBezierCurve("
        ],
        "after": [
          "        {",
          "          x: p0.x + (p0.handleOut?.x || 0),",
          "          y: p0.y + (p0.handleOut?.y || 0),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:183:38",
      "file": "services/export/vaceControlExport.ts",
      "line": 183,
      "column": 38,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "x: p0.x + (p0.handleOut?.x || 0),",
      "context": {
        "before": [
          "      const curve = createBezierCurve(",
          "        { x: p0.x, y: p0.y, z: p0.z || 0 },",
          "        {"
        ],
        "after": [
          "          y: p0.y + (p0.handleOut?.y || 0),",
          "          z: (p0.z || 0) + (p0.handleOut?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:184:38",
      "file": "services/export/vaceControlExport.ts",
      "line": 184,
      "column": 38,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "y: p0.y + (p0.handleOut?.y || 0),",
      "context": {
        "before": [
          "        { x: p0.x, y: p0.y, z: p0.z || 0 },",
          "        {",
          "          x: p0.x + (p0.handleOut?.x || 0),"
        ],
        "after": [
          "          z: (p0.z || 0) + (p0.handleOut?.z || 0),",
          "        },",
          "        {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:185:20",
      "file": "services/export/vaceControlExport.ts",
      "line": 185,
      "column": 20,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (p0.z || 0) + (p0.handleOut?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: p0.x + (p0.handleOut?.x || 0),",
          "          y: p0.y + (p0.handleOut?.y || 0),"
        ],
        "after": [
          "        },",
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:185:45",
      "file": "services/export/vaceControlExport.ts",
      "line": 185,
      "column": 45,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (p0.z || 0) + (p0.handleOut?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: p0.x + (p0.handleOut?.x || 0),",
          "          y: p0.y + (p0.handleOut?.y || 0),"
        ],
        "after": [
          "        },",
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:188:37",
      "file": "services/export/vaceControlExport.ts",
      "line": 188,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "x: p1.x + (p1.handleIn?.x || 0),",
      "context": {
        "before": [
          "          z: (p0.z || 0) + (p0.handleOut?.z || 0),",
          "        },",
          "        {"
        ],
        "after": [
          "          y: p1.y + (p1.handleIn?.y || 0),",
          "          z: (p1.z || 0) + (p1.handleIn?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:189:37",
      "file": "services/export/vaceControlExport.ts",
      "line": 189,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "y: p1.y + (p1.handleIn?.y || 0),",
      "context": {
        "before": [
          "        },",
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),"
        ],
        "after": [
          "          z: (p1.z || 0) + (p1.handleIn?.z || 0),",
          "        },",
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:190:20",
      "file": "services/export/vaceControlExport.ts",
      "line": 190,
      "column": 20,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (p1.z || 0) + (p1.handleIn?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),",
          "          y: p1.y + (p1.handleIn?.y || 0),"
        ],
        "after": [
          "        },",
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },",
          "      );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:190:44",
      "file": "services/export/vaceControlExport.ts",
      "line": 190,
      "column": 44,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (p1.z || 0) + (p1.handleIn?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),",
          "          y: p1.y + (p1.handleIn?.y || 0),"
        ],
        "after": [
          "        },",
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },",
          "      );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:192:37",
      "file": "services/export/vaceControlExport.ts",
      "line": 192,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: p1.x, y: p1.y, z: p1.z || 0 },",
      "context": {
        "before": [
          "          y: p1.y + (p1.handleIn?.y || 0),",
          "          z: (p1.z || 0) + (p1.handleIn?.z || 0),",
          "        },"
        ],
        "after": [
          "      );",
          "",
          "      curvePath.add(curve);"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:204:43",
      "file": "services/export/vaceControlExport.ts",
      "line": 204,
      "column": 43,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: last.x, y: last.y, z: last.z || 0 },",
      "context": {
        "before": [
          "      const first = controlPoints[0];",
          "",
          "      const closingCurve = createBezierCurve("
        ],
        "after": [
          "        {",
          "          x: last.x + (last.handleOut?.x || 0),",
          "          y: last.y + (last.handleOut?.y || 0),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:206:42",
      "file": "services/export/vaceControlExport.ts",
      "line": 206,
      "column": 42,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "x: last.x + (last.handleOut?.x || 0),",
      "context": {
        "before": [
          "      const closingCurve = createBezierCurve(",
          "        { x: last.x, y: last.y, z: last.z || 0 },",
          "        {"
        ],
        "after": [
          "          y: last.y + (last.handleOut?.y || 0),",
          "          z: (last.z || 0) + (last.handleOut?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:207:42",
      "file": "services/export/vaceControlExport.ts",
      "line": 207,
      "column": 42,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "y: last.y + (last.handleOut?.y || 0),",
      "context": {
        "before": [
          "        { x: last.x, y: last.y, z: last.z || 0 },",
          "        {",
          "          x: last.x + (last.handleOut?.x || 0),"
        ],
        "after": [
          "          z: (last.z || 0) + (last.handleOut?.z || 0),",
          "        },",
          "        {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:208:22",
      "file": "services/export/vaceControlExport.ts",
      "line": 208,
      "column": 22,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (last.z || 0) + (last.handleOut?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: last.x + (last.handleOut?.x || 0),",
          "          y: last.y + (last.handleOut?.y || 0),"
        ],
        "after": [
          "        },",
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:208:49",
      "file": "services/export/vaceControlExport.ts",
      "line": 208,
      "column": 49,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (last.z || 0) + (last.handleOut?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: last.x + (last.handleOut?.x || 0),",
          "          y: last.y + (last.handleOut?.y || 0),"
        ],
        "after": [
          "        },",
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:211:43",
      "file": "services/export/vaceControlExport.ts",
      "line": 211,
      "column": 43,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "x: first.x + (first.handleIn?.x || 0),",
      "context": {
        "before": [
          "          z: (last.z || 0) + (last.handleOut?.z || 0),",
          "        },",
          "        {"
        ],
        "after": [
          "          y: first.y + (first.handleIn?.y || 0),",
          "          z: (first.z || 0) + (first.handleIn?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:212:43",
      "file": "services/export/vaceControlExport.ts",
      "line": 212,
      "column": 43,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "y: first.y + (first.handleIn?.y || 0),",
      "context": {
        "before": [
          "        },",
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),"
        ],
        "after": [
          "          z: (first.z || 0) + (first.handleIn?.z || 0),",
          "        },",
          "        { x: first.x, y: first.y, z: first.z || 0 },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:213:23",
      "file": "services/export/vaceControlExport.ts",
      "line": 213,
      "column": 23,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (first.z || 0) + (first.handleIn?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),",
          "          y: first.y + (first.handleIn?.y || 0),"
        ],
        "after": [
          "        },",
          "        { x: first.x, y: first.y, z: first.z || 0 },",
          "      );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:213:50",
      "file": "services/export/vaceControlExport.ts",
      "line": 213,
      "column": 50,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "z: (first.z || 0) + (first.handleIn?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),",
          "          y: first.y + (first.handleIn?.y || 0),"
        ],
        "after": [
          "        },",
          "        { x: first.x, y: first.y, z: first.z || 0 },",
          "      );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:215:46",
      "file": "services/export/vaceControlExport.ts",
      "line": 215,
      "column": 46,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "{ x: first.x, y: first.y, z: first.z || 0 },",
      "context": {
        "before": [
          "          y: first.y + (first.handleIn?.y || 0),",
          "          z: (first.z || 0) + (first.handleIn?.z || 0),",
          "        },"
        ],
        "after": [
          "      );",
          "",
          "      curvePath.add(closingCurve);"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:556:36",
      "file": "services/export/vaceControlExport.ts",
      "line": 556,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startFrame: options.startFrame ?? 0,",
      "context": {
        "before": [
          "    fillColor: options.fillColor ?? \"#FFFFFF\",",
          "    strokeColor: options.strokeColor,",
          "    strokeWidth: options.strokeWidth,"
        ],
        "after": [
          "    duration: options.duration ?? 60,",
          "    easing: options.easing ?? \"ease-in-out\",",
          "    alignToPath: options.alignToPath ?? true,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:560:44",
      "file": "services/export/vaceControlExport.ts",
      "line": 560,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "rotationOffset: options.rotationOffset ?? 0,",
      "context": {
        "before": [
          "    duration: options.duration ?? 60,",
          "    easing: options.easing ?? \"ease-in-out\",",
          "    alignToPath: options.alignToPath ?? true,"
        ],
        "after": [
          "    loop: options.loop ?? false,",
          "    loopMode: options.loopMode ?? \"restart\",",
          "    scaleStart: options.scaleStart ?? 1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:580:36",
      "file": "services/export/vaceControlExport.ts",
      "line": 580,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "startFrame: options.startFrame ?? 0,",
      "context": {
        "before": [
          "  return {",
          "    width: options.width ?? 512,",
          "    height: options.height ?? 512,"
        ],
        "after": [
          "    endFrame: options.endFrame ?? 80,",
          "    frameRate: options.frameRate ?? 16,",
          "    backgroundColor: options.backgroundColor ?? \"#000000\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:203:39",
      "file": "services/export/wanMoveExport.ts",
      "line": 203,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dataVal = normalizedData[i] ?? 0.5;",
      "context": {
        "before": [
          "",
          "  // Modify trajectories based on data mapping",
          "  const modifiedTracks = baseFlow.tracks.map((track, i) => {"
        ],
        "after": [
          "",
          "    return track.map((point, f) => {",
          "      const [x, y] = point;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:761:24",
      "file": "services/export/wanMoveExport.ts",
      "line": 761,
      "column": 24,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dt = config.dt ?? 0.005;",
      "context": {
        "before": [
          "  config: AttractorConfig,",
          "): WanMoveTrajectory {",
          "  const { numPoints, numFrames, width, height, seed = 42 } = config;"
        ],
        "after": [
          "  const scale = config.scale ?? 8;",
          "  const center = config.center ?? { x: width / 2, y: height / 2 };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:836:24",
      "file": "services/export/wanMoveExport.ts",
      "line": 836,
      "column": 24,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dt = config.dt ?? 0.02;",
      "context": {
        "before": [
          "  config: AttractorConfig,",
          "): WanMoveTrajectory {",
          "  const { numPoints, numFrames, width, height, seed = 42 } = config;"
        ],
        "after": [
          "  const scale = config.scale ?? 15;",
          "  const center = config.center ?? { x: width / 2, y: height / 2 };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:906:24",
      "file": "services/export/wanMoveExport.ts",
      "line": 906,
      "column": 24,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dt = config.dt ?? 0.01;",
      "context": {
        "before": [
          "  config: AttractorConfig,",
          "): WanMoveTrajectory {",
          "  const { numPoints, numFrames, width, height, seed = 42 } = config;"
        ],
        "after": [
          "  const scale = config.scale ?? 80;",
          "  const center = config.center ?? { x: width / 2, y: height / 2 };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:1053:37",
      "file": "services/export/wanMoveExport.ts",
      "line": 1053,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const padding = shape.padding ?? 0.1;",
      "context": {
        "before": [
          "    case \"grid\": {",
          "      const cols = shape.columns ?? Math.ceil(Math.sqrt(numPoints));",
          "      const rows = shape.rows ?? Math.ceil(numPoints / cols);"
        ],
        "after": [
          "      const points: Array<{ x: number; y: number }> = [];",
          "",
          "      for (let i = 0; i < numPoints; i++) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:1188:40",
      "file": "services/export/wanMoveExport.ts",
      "line": 1188,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const morphNoise = config.morphNoise ?? 0.1;",
      "context": {
        "before": [
          "    target,",
          "    seed = 42,",
          "  } = config;"
        ],
        "after": [
          "  const easing = config.easing ?? \"ease-in-out\";",
          "",
          "  const rng = new SeededRandom(seed);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:1316:34",
      "file": "services/export/wanMoveExport.ts",
      "line": 1316,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const damping = config.damping ?? 0.98;",
      "context": {
        "before": [
          "  config: ForceFieldConfig,",
          "): WanMoveTrajectory {",
          "  const { numPoints, numFrames, width, height, forces, seed = 42 } = config;"
        ],
        "after": [
          "  const maxSpeed = config.maxSpeed ?? 15;",
          "  const distribution = config.initialDistribution ?? \"random\";",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:106:38",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 106,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const noise = params.noiseStrength ?? 0.1;",
      "context": {
        "before": [
          "",
          "  const turns = params.spiralTurns ?? 3;",
          "  const expansion = params.spiralExpansion ?? 1.5;"
        ],
        "after": [
          "",
          "  const centerX = width / 2;",
          "  const centerY = height / 2;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:168:34",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 168,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const speed = params.waveSpeed ?? 0.1;",
      "context": {
        "before": [
          "",
          "  const amplitude = params.waveAmplitude ?? height * 0.15;",
          "  const frequency = params.waveFrequency ?? 3;"
        ],
        "after": [
          "  const layers = params.waveLayers ?? 5;",
          "  const noise = params.noiseStrength ?? 0.05;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:170:38",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 170,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const noise = params.noiseStrength ?? 0.05;",
      "context": {
        "before": [
          "  const frequency = params.waveFrequency ?? 3;",
          "  const speed = params.waveSpeed ?? 0.1;",
          "  const layers = params.waveLayers ?? 5;"
        ],
        "after": [
          "",
          "  const tracks: number[][][] = [];",
          "  const visibility: boolean[][] = [];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:235:39",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 235,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const decay = params.explosionDecay ?? 0.95;",
      "context": {
        "before": [
          "  const rng = new SeededRandom(params.seed ?? 42);",
          "",
          "  const explosionSpeed = params.explosionSpeed ?? 1.0;"
        ],
        "after": [
          "  const center = params.explosionCenter ?? { x: width / 2, y: height / 2 };",
          "  const noise = params.noiseStrength ?? 0.1;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:237:38",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 237,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const noise = params.noiseStrength ?? 0.1;",
      "context": {
        "before": [
          "  const explosionSpeed = params.explosionSpeed ?? 1.0;",
          "  const decay = params.explosionDecay ?? 0.95;",
          "  const center = params.explosionCenter ?? { x: width / 2, y: height / 2 };"
        ],
        "after": [
          "",
          "  const tracks: number[][][] = [];",
          "  const visibility: boolean[][] = [];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:311:42",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 311,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const strength = params.vortexStrength ?? 0.5;",
      "context": {
        "before": [
          "  const { numPoints, numFrames, width, height, params } = config;",
          "  const rng = new SeededRandom(params.seed ?? 42);",
          ""
        ],
        "after": [
          "  const maxRadius = params.vortexRadius ?? Math.min(width, height) * 0.4;",
          "  const center = params.vortexCenter ?? { x: width / 2, y: height / 2 };",
          "  const noise = params.noiseStrength ?? 0.05;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:314:38",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 314,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const noise = params.noiseStrength ?? 0.05;",
      "context": {
        "before": [
          "  const strength = params.vortexStrength ?? 0.5;",
          "  const maxRadius = params.vortexRadius ?? Math.min(width, height) * 0.4;",
          "  const center = params.vortexCenter ?? { x: width / 2, y: height / 2 };"
        ],
        "after": [
          "",
          "  const tracks: number[][][] = [];",
          "  const visibility: boolean[][] = [];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:371:35",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 371,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const curve = params.riverCurve ?? 0.5;",
      "context": {
        "before": [
          "  const rng = new SeededRandom(params.seed ?? 42);",
          "",
          "  const riverWidth = params.riverWidth ?? height * 0.3;"
        ],
        "after": [
          "  const turbulence = params.riverTurbulence ?? 0.1;",
          "",
          "  const tracks: number[][][] = [];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:372:45",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 372,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const turbulence = params.riverTurbulence ?? 0.1;",
      "context": {
        "before": [
          "",
          "  const riverWidth = params.riverWidth ?? height * 0.3;",
          "  const curve = params.riverCurve ?? 0.5;"
        ],
        "after": [
          "",
          "  const tracks: number[][][] = [];",
          "  const visibility: boolean[][] = [];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:560:41",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 560,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const cohesion = params.swarmCohesion ?? 0.01;",
      "context": {
        "before": [
          "  const { numPoints, numFrames, width, height, params } = config;",
          "  const rng = new SeededRandom(params.seed ?? 42);",
          ""
        ],
        "after": [
          "  const separation = params.swarmSeparation ?? 30;",
          "  const alignment = params.swarmAlignment ?? 0.05;",
          "  const maxSpeed = params.swarmSpeed ?? 5;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveFlowGenerators.ts:562:43",
      "file": "services/export/wanMoveFlowGenerators.ts",
      "line": 562,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const alignment = params.swarmAlignment ?? 0.05;",
      "context": {
        "before": [
          "",
          "  const cohesion = params.swarmCohesion ?? 0.01;",
          "  const separation = params.swarmSeparation ?? 30;"
        ],
        "after": [
          "  const maxSpeed = params.swarmSpeed ?? 5;",
          "",
          "  // Initialize particles"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:39:26",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 39,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dx = (toPoint[0] ?? 0) - (fromPoint[0] ?? 0);",
      "context": {
        "before": [
          " * @returns Rotation angles [rx, ry, rz] in degrees",
          " */",
          "export function lookAt(fromPoint: number[], toPoint: number[]): number[] {"
        ],
        "after": [
          "  const dy = (toPoint[1] ?? 0) - (fromPoint[1] ?? 0);",
          "  const dz = (toPoint[2] ?? 0) - (fromPoint[2] ?? 0);",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:39:48",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 39,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dx = (toPoint[0] ?? 0) - (fromPoint[0] ?? 0);",
      "context": {
        "before": [
          " * @returns Rotation angles [rx, ry, rz] in degrees",
          " */",
          "export function lookAt(fromPoint: number[], toPoint: number[]): number[] {"
        ],
        "after": [
          "  const dy = (toPoint[1] ?? 0) - (fromPoint[1] ?? 0);",
          "  const dz = (toPoint[2] ?? 0) - (fromPoint[2] ?? 0);",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:40:26",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 40,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dy = (toPoint[1] ?? 0) - (fromPoint[1] ?? 0);",
      "context": {
        "before": [
          " */",
          "export function lookAt(fromPoint: number[], toPoint: number[]): number[] {",
          "  const dx = (toPoint[0] ?? 0) - (fromPoint[0] ?? 0);"
        ],
        "after": [
          "  const dz = (toPoint[2] ?? 0) - (fromPoint[2] ?? 0);",
          "",
          "  // Calculate yaw (Y rotation) and pitch (X rotation)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:40:48",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 40,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dy = (toPoint[1] ?? 0) - (fromPoint[1] ?? 0);",
      "context": {
        "before": [
          " */",
          "export function lookAt(fromPoint: number[], toPoint: number[]): number[] {",
          "  const dx = (toPoint[0] ?? 0) - (fromPoint[0] ?? 0);"
        ],
        "after": [
          "  const dz = (toPoint[2] ?? 0) - (fromPoint[2] ?? 0);",
          "",
          "  // Calculate yaw (Y rotation) and pitch (X rotation)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:41:26",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 41,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dz = (toPoint[2] ?? 0) - (fromPoint[2] ?? 0);",
      "context": {
        "before": [
          "export function lookAt(fromPoint: number[], toPoint: number[]): number[] {",
          "  const dx = (toPoint[0] ?? 0) - (fromPoint[0] ?? 0);",
          "  const dy = (toPoint[1] ?? 0) - (fromPoint[1] ?? 0);"
        ],
        "after": [
          "",
          "  // Calculate yaw (Y rotation) and pitch (X rotation)",
          "  const yaw = (Math.atan2(dx, dz) * 180) / Math.PI;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:41:48",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 41,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dz = (toPoint[2] ?? 0) - (fromPoint[2] ?? 0);",
      "context": {
        "before": [
          "export function lookAt(fromPoint: number[], toPoint: number[]): number[] {",
          "  const dx = (toPoint[0] ?? 0) - (fromPoint[0] ?? 0);",
          "  const dy = (toPoint[1] ?? 0) - (fromPoint[1] ?? 0);"
        ],
        "after": [
          "",
          "  // Calculate yaw (Y rotation) and pitch (X rotation)",
          "  const yaw = (Math.atan2(dx, dz) * 180) / Math.PI;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:63:22",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 63,
      "column": 22,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dxVal = dx ?? 0;",
      "context": {
        "before": [
          "  // If tangent provided, use it directly",
          "  if (tangentVector) {",
          "    const [dx, dy, dz] = tangentVector;"
        ],
        "after": [
          "    const dyVal = dy ?? 0;",
          "    const dzVal = dz ?? 1;",
          "    const yaw = (Math.atan2(dxVal, dzVal) * 180) / Math.PI;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:64:22",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 64,
      "column": 22,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dyVal = dy ?? 0;",
      "context": {
        "before": [
          "  if (tangentVector) {",
          "    const [dx, dy, dz] = tangentVector;",
          "    const dxVal = dx ?? 0;"
        ],
        "after": [
          "    const dzVal = dz ?? 1;",
          "    const yaw = (Math.atan2(dxVal, dzVal) * 180) / Math.PI;",
          "    const dist = Math.sqrt(dxVal ** 2 + dzVal ** 2);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:75:23",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 75,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dx = vel[0] ?? 0;",
      "context": {
        "before": [
          "  // Calculate tangent from velocity",
          "  const vel = ctx.velocity;",
          "  if (Array.isArray(vel) && vel.length >= 2) {"
        ],
        "after": [
          "    const dy = vel[1] ?? 0;",
          "    const dz = vel[2] ?? 1;",
          "    const yaw = (Math.atan2(dx, dz) * 180) / Math.PI;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:76:23",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 76,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const dy = vel[1] ?? 0;",
      "context": {
        "before": [
          "  const vel = ctx.velocity;",
          "  if (Array.isArray(vel) && vel.length >= 2) {",
          "    const dx = vel[0] ?? 0;"
        ],
        "after": [
          "    const dz = vel[2] ?? 1;",
          "    const yaw = (Math.atan2(dx, dz) * 180) / Math.PI;",
          "    const dist = Math.sqrt(dx ** 2 + dz ** 2);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:119:27",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 119,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "let x = px - (anchor[0] ?? 0);",
      "context": {
        "before": [
          "  const { position, scale, rotation, anchor } = layerTransform;",
          "",
          "  // Apply anchor offset"
        ],
        "after": [
          "  let y = py - (anchor[1] ?? 0);",
          "  let z = pz - (anchor[2] ?? 0);",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:120:27",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 120,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "let y = py - (anchor[1] ?? 0);",
      "context": {
        "before": [
          "",
          "  // Apply anchor offset",
          "  let x = px - (anchor[0] ?? 0);"
        ],
        "after": [
          "  let z = pz - (anchor[2] ?? 0);",
          "",
          "  // Apply scale (use ?? to preserve intentional 0)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:121:27",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 121,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "let z = pz - (anchor[2] ?? 0);",
      "context": {
        "before": [
          "  // Apply anchor offset",
          "  let x = px - (anchor[0] ?? 0);",
          "  let y = py - (anchor[1] ?? 0);"
        ],
        "after": [
          "",
          "  // Apply scale (use ?? to preserve intentional 0)",
          "  x *= (scale[0] ?? 100) / 100;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:129:43",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 129,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rz = ((rotation[2] ?? rotation[0] ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "  z *= (scale[2] ?? 100) / 100;",
          "",
          "  // Apply rotation (Z, then Y, then X - matching AE order)"
        ],
        "after": [
          "  const ry = ((rotation[1] ?? 0) * Math.PI) / 180;",
          "  const rx = ((rotation[0] ?? 0) * Math.PI) / 180;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:130:28",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 130,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const ry = ((rotation[1] ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "",
          "  // Apply rotation (Z, then Y, then X - matching AE order)",
          "  const rz = ((rotation[2] ?? rotation[0] ?? 0) * Math.PI) / 180;"
        ],
        "after": [
          "  const rx = ((rotation[0] ?? 0) * Math.PI) / 180;",
          "",
          "  // Rotate around Z"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:131:28",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 131,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rx = ((rotation[0] ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "  // Apply rotation (Z, then Y, then X - matching AE order)",
          "  const rz = ((rotation[2] ?? rotation[0] ?? 0) * Math.PI) / 180;",
          "  const ry = ((rotation[1] ?? 0) * Math.PI) / 180;"
        ],
        "after": [
          "",
          "  // Rotate around Z",
          "  const x1 = x * Math.cos(rz) - y * Math.sin(rz);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:149:21",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 149,
      "column": 21,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x3 += position[0] ?? 0;",
      "context": {
        "before": [
          "  let z3 = y2 * Math.sin(rx) + z2 * Math.cos(rx);",
          "",
          "  // Apply position offset"
        ],
        "after": [
          "  y3 += position[1] ?? 0;",
          "  z3 += position[2] ?? 0;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:150:21",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 150,
      "column": 21,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y3 += position[1] ?? 0;",
      "context": {
        "before": [
          "",
          "  // Apply position offset",
          "  x3 += position[0] ?? 0;"
        ],
        "after": [
          "  z3 += position[2] ?? 0;",
          "",
          "  // Recursively apply parent transforms"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:151:21",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 151,
      "column": 21,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z3 += position[2] ?? 0;",
      "context": {
        "before": [
          "  // Apply position offset",
          "  x3 += position[0] ?? 0;",
          "  y3 += position[1] ?? 0;"
        ],
        "after": [
          "",
          "  // Recursively apply parent transforms",
          "  if (layerTransform.parent) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:192:31",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 192,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const x = px - (position[0] ?? 0);",
      "context": {
        "before": [
          "  const { position, scale, rotation, anchor } = layerTransform;",
          "",
          "  // Subtract position"
        ],
        "after": [
          "  const y = py - (position[1] ?? 0);",
          "  const z = pz - (position[2] ?? 0);",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:193:31",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 193,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const y = py - (position[1] ?? 0);",
      "context": {
        "before": [
          "",
          "  // Subtract position",
          "  const x = px - (position[0] ?? 0);"
        ],
        "after": [
          "  const z = pz - (position[2] ?? 0);",
          "",
          "  // Inverse rotation (X, then Y, then Z - reverse order)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:194:31",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 194,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const z = pz - (position[2] ?? 0);",
      "context": {
        "before": [
          "  // Subtract position",
          "  const x = px - (position[0] ?? 0);",
          "  const y = py - (position[1] ?? 0);"
        ],
        "after": [
          "",
          "  // Inverse rotation (X, then Y, then Z - reverse order)",
          "  const rz = (-(rotation[2] ?? rotation[0] ?? 0) * Math.PI) / 180;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:197:44",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 197,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rz = (-(rotation[2] ?? rotation[0] ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "  const z = pz - (position[2] ?? 0);",
          "",
          "  // Inverse rotation (X, then Y, then Z - reverse order)"
        ],
        "after": [
          "  const ry = (-(rotation[1] ?? 0) * Math.PI) / 180;",
          "  const rx = (-(rotation[0] ?? 0) * Math.PI) / 180;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:198:29",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 198,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const ry = (-(rotation[1] ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "",
          "  // Inverse rotation (X, then Y, then Z - reverse order)",
          "  const rz = (-(rotation[2] ?? rotation[0] ?? 0) * Math.PI) / 180;"
        ],
        "after": [
          "  const rx = (-(rotation[0] ?? 0) * Math.PI) / 180;",
          "",
          "  // Rotate around X (inverse)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:199:29",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 199,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rx = (-(rotation[0] ?? 0) * Math.PI) / 180;",
      "context": {
        "before": [
          "  // Inverse rotation (X, then Y, then Z - reverse order)",
          "  const rz = (-(rotation[2] ?? rotation[0] ?? 0) * Math.PI) / 180;",
          "  const ry = (-(rotation[1] ?? 0) * Math.PI) / 180;"
        ],
        "after": [
          "",
          "  // Rotate around X (inverse)",
          "  const x1 = x;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:230:19",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 230,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x3 += anchor[0] ?? 0;",
      "context": {
        "before": [
          "  z3 /= sz || 1;",
          "",
          "  // Add anchor"
        ],
        "after": [
          "  y3 += anchor[1] ?? 0;",
          "  z3 += anchor[2] ?? 0;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:231:19",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 231,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y3 += anchor[1] ?? 0;",
      "context": {
        "before": [
          "",
          "  // Add anchor",
          "  x3 += anchor[0] ?? 0;"
        ],
        "after": [
          "  z3 += anchor[2] ?? 0;",
          "",
          "  return point.length === 2 ? [x3, y3] : [x3, y3, z3];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/coordinateConversion.ts:232:19",
      "file": "services/expressions/coordinateConversion.ts",
      "line": 232,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z3 += anchor[2] ?? 0;",
      "context": {
        "before": [
          "  // Add anchor",
          "  x3 += anchor[0] ?? 0;",
          "  y3 += anchor[1] ?? 0;"
        ],
        "after": [
          "",
          "  return point.length === 2 ? [x3, y3] : [x3, y3, z3];",
          "}"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:479:38",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 479,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "numLayers: ctx.allLayers?.length ?? 0,",
      "context": {
        "before": [
          "    frameDuration: 1 / fps,",
          "    width: ctx.compWidth ?? 1920,",
          "    height: ctx.compHeight ?? 1080,"
        ],
        "after": [
          "    layer: (nameOrIndex: string | number) => {",
          "      const getLayerProperty = ctx.getLayerProperty;",
          "      const getLayerEffectParam = ctx.getLayerEffectParam;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:513:72",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 513,
      "column": 72,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return getLayerEffectParam?.(layerId, effectName, paramName) ?? 0;",
      "context": {
        "before": [
          "",
          "      const createEffectAccessor = (effectName: string) => {",
          "        const accessor = (paramName: string) => {"
        ],
        "after": [
          "        };",
          "        accessor.param = accessor;",
          "        // Slider Control"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:518:63",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 518,
      "column": 63,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "getLayerEffectParam?.(layerId, effectName, \"value\") ?? 0;",
      "context": {
        "before": [
          "        accessor.param = accessor;",
          "        // Slider Control",
          "        accessor.value ="
        ],
        "after": [
          "        accessor.slider =",
          "          getLayerEffectParam?.(layerId, effectName, \"slider\") ??",
          "          getLayerEffectParam?.(layerId, effectName, \"Slider\") ??"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:560:68",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 560,
      "column": 68,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
      "context": {
        "before": [
          "",
          "      return {",
          "        name: ctx.allLayers?.find((l) => l.id === layerId)?.name ?? \"\","
        ],
        "after": [
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],",
          "        rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:563:69",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 563,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,",
      "context": {
        "before": [
          "        index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],"
        ],
        "after": [
          "        opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,",
          "        anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
          "          0, 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:622:42",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 622,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return eff.parameters[paramName] ?? 0;",
      "context": {
        "before": [
          "      );",
          "      const accessor = (paramName: string) => {",
          "        if (!eff) return 0;"
        ],
        "after": [
          "      };",
          "      accessor.param = accessor;",
          "      // Slider Control"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:626:46",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 626,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "accessor.value = eff?.parameters.value ?? 0;",
      "context": {
        "before": [
          "      };",
          "      accessor.param = accessor;",
          "      // Slider Control"
        ],
        "after": [
          "      accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
          "      // Angle Control",
          "      accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:627:74",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 627,
      "column": 74,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
      "context": {
        "before": [
          "      accessor.param = accessor;",
          "      // Slider Control",
          "      accessor.value = eff?.parameters.value ?? 0;"
        ],
        "after": [
          "      // Angle Control",
          "      accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
          "      // Checkbox Control"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:629:71",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 629,
      "column": 71,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
      "context": {
        "before": [
          "      accessor.value = eff?.parameters.value ?? 0;",
          "      accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
          "      // Angle Control"
        ],
        "after": [
          "      // Checkbox Control",
          "      accessor.checkbox =",
          "        eff?.parameters.checkbox ?? eff?.parameters.Checkbox ?? false;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:104:14",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 104,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minX = Infinity,",
      "context": {
        "before": [
          "  data: ShapeLayerData,",
          "  includeExtents: boolean,",
          "): SourceRect {"
        ],
        "after": [
          "    minY = Infinity;",
          "  let maxX = -Infinity,",
          "    maxY = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:105:12",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 105,
      "column": 12,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "minY = Infinity;",
      "context": {
        "before": [
          "  includeExtents: boolean,",
          "): SourceRect {",
          "  let minX = Infinity,"
        ],
        "after": [
          "  let maxX = -Infinity,",
          "    maxY = -Infinity;",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:106:15",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 106,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxX = -Infinity,",
      "context": {
        "before": [
          "): SourceRect {",
          "  let minX = Infinity,",
          "    minY = Infinity;"
        ],
        "after": [
          "    maxY = -Infinity;",
          "",
          "  // Extract paths from shape layer contents"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:107:13",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 107,
      "column": 13,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxY = -Infinity;",
      "context": {
        "before": [
          "  let minX = Infinity,",
          "    minY = Infinity;",
          "  let maxX = -Infinity,"
        ],
        "after": [
          "",
          "  // Extract paths from shape layer contents",
          "  const paths: BezierPath[] = [];"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:126:30",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 126,
      "column": 30,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "extractPaths(data.contents ?? []);",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "",
          "  if (paths.length === 0) {",
          "    return { top: 0, left: 0, width: 100, height: 100 };"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:133:36",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 133,
      "column": 36,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const vertices = path.vertices ?? [];",
      "context": {
        "before": [
          "  }",
          "",
          "  paths.forEach((path: BezierPath) => {"
        ],
        "after": [
          "    vertices.forEach((vertex: BezierVertex) => {",
          "      const x = vertex.point?.x ?? 0;",
          "      const y = vertex.point?.y ?? 0;"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:135:33",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 135,
      "column": 33,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const x = vertex.point?.x ?? 0;",
      "context": {
        "before": [
          "  paths.forEach((path: BezierPath) => {",
          "    const vertices = path.vertices ?? [];",
          "    vertices.forEach((vertex: BezierVertex) => {"
        ],
        "after": [
          "      const y = vertex.point?.y ?? 0;",
          "      minX = Math.min(minX, x);",
          "      minY = Math.min(minY, y);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:136:33",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 136,
      "column": 33,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const y = vertex.point?.y ?? 0;",
      "context": {
        "before": [
          "    const vertices = path.vertices ?? [];",
          "    vertices.forEach((vertex: BezierVertex) => {",
          "      const x = vertex.point?.x ?? 0;"
        ],
        "after": [
          "      minX = Math.min(minX, x);",
          "      minY = Math.min(minY, y);",
          "      maxX = Math.max(maxX, x);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:164:35",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 164,
      "column": 35,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "findStrokeWidth(data.contents ?? []);",
      "context": {
        "before": [
          "        }",
          "      }",
          "    }"
        ],
        "after": [
          "    ",
          "    if (maxStrokeWidth > 0) {",
          "      const strokeExtent = maxStrokeWidth / 2;"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:232:41",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 232,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "strokeWidth: layerData?.strokeWidth ?? 0,",
      "context": {
        "before": [
          "    fontStyle: layerData?.fontStyle ?? \"normal\",",
          "    fillColor: layerData?.fill ?? \"#FFFFFF\",",
          "    strokeColor: layerData?.stroke ?? \"#000000\","
        ],
        "after": [
          "    tracking: layerData?.letterSpacing ?? 0,",
          "    leading: layerData?.lineHeight ?? 1.2,",
          "  };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:233:40",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 233,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "tracking: layerData?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "    fillColor: layerData?.fill ?? \"#FFFFFF\",",
          "    strokeColor: layerData?.stroke ?? \"#000000\",",
          "    strokeWidth: layerData?.strokeWidth ?? 0,"
        ],
        "after": [
          "    leading: layerData?.lineHeight ?? 1.2,",
          "  };",
          "}"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/loopExpressions.ts:95:53",
      "file": "services/expressions/loopExpressions.ts",
      "line": 95,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return value.map((v, i) => v + (velocity[i] ?? 0) * elapsed);",
      "context": {
        "before": [
          "        return value + velocity * elapsed;",
          "      }",
          "      if (Array.isArray(velocity) && Array.isArray(value)) {"
        ],
        "after": [
          "      }",
          "      // Type mismatch - return unchanged",
          "      console.warn("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/loopExpressions.ts:167:53",
      "file": "services/expressions/loopExpressions.ts",
      "line": 167,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return value.map((v, i) => v - (velocity[i] ?? 0) * elapsed);",
      "context": {
        "before": [
          "        return value - velocity * elapsed;",
          "      }",
          "      if (Array.isArray(velocity) && Array.isArray(value)) {"
        ],
        "after": [
          "      }",
          "      // Type mismatch - return unchanged",
          "      console.warn("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:60:19",
      "file": "services/expressions/motionExpressions.ts",
      "line": 60,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return arr[0] ?? 0;",
      "context": {
        "before": [
          "  originalValue: number | number[] | { x: number; y: number; z?: number }",
          "): number | number[] | { x: number; y: number; z?: number } {",
          "  if (typeof originalValue === 'number') {"
        ],
        "after": [
          "  }",
          "  if (Array.isArray(originalValue)) {",
          "    return arr;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:68:17",
      "file": "services/expressions/motionExpressions.ts",
      "line": 68,
      "column": 17,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x: arr[0] ?? 0,",
      "context": {
        "before": [
          "  // Object format",
          "  if (typeof originalValue === 'object' && originalValue !== null && 'x' in originalValue) {",
          "    const result: { x: number; y: number; z?: number } = {"
        ],
        "after": [
          "      y: arr[1] ?? 0,",
          "    };",
          "    if ('z' in originalValue && originalValue.z !== undefined) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:69:17",
      "file": "services/expressions/motionExpressions.ts",
      "line": 69,
      "column": 17,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y: arr[1] ?? 0,",
      "context": {
        "before": [
          "  if (typeof originalValue === 'object' && originalValue !== null && 'x' in originalValue) {",
          "    const result: { x: number; y: number; z?: number } = {",
          "      x: arr[0] ?? 0,"
        ],
        "after": [
          "    };",
          "    if ('z' in originalValue && originalValue.z !== undefined) {",
          "      result.z = arr[2] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:72:25",
      "file": "services/expressions/motionExpressions.ts",
      "line": 72,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.z = arr[2] ?? 0;",
      "context": {
        "before": [
          "      y: arr[1] ?? 0,",
          "    };",
          "    if ('z' in originalValue && originalValue.z !== undefined) {"
        ],
        "after": [
          "    }",
          "    return result;",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:127:41",
      "file": "services/expressions/motionExpressions.ts",
      "line": 127,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const componentVel = velocityArr[i] ?? 0;",
      "context": {
        "before": [
          "",
          "  // Apply oscillation to each component",
          "  const resultArr = valueArr.map((v, i) => {"
        ],
        "after": [
          "    const oscillation =",
          "      (componentVel * safeAmplitude * Math.sin(safeFrequency * t * 2 * Math.PI)) /",
          "      Math.exp(safeDecay * t);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:171:5",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 171,
      "column": 5,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "NaN: Number.NaN,",
      "context": {
        "before": [
          "    EPSILON: Number.EPSILON,",
          "    POSITIVE_INFINITY: Number.POSITIVE_INFINITY,",
          "    NEGATIVE_INFINITY: Number.NEGATIVE_INFINITY,"
        ],
        "after": [
          "  });",
          "",
          "  // Utility functions for expressions"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:171:17",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 171,
      "column": 17,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "NaN: Number.NaN,",
      "context": {
        "before": [
          "    EPSILON: Number.EPSILON,",
          "    POSITIVE_INFINITY: Number.POSITIVE_INFINITY,",
          "    NEGATIVE_INFINITY: Number.NEGATIVE_INFINITY,"
        ],
        "after": [
          "  });",
          "",
          "  // Utility functions for expressions"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:227:31",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 227,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const diff = (arrA[i] ?? 0) - (arrB[i] ?? 0);",
      "context": {
        "before": [
          "      const arrB = Array.isArray(b) ? b : [b];",
          "      let sum = 0;",
          "      for (let i = 0; i < Math.max(arrA.length, arrB.length); i++) {"
        ],
        "after": [
          "        sum += diff * diff;",
          "      }",
          "      return Math.sqrt(sum);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:227:48",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 227,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const diff = (arrA[i] ?? 0) - (arrB[i] ?? 0);",
      "context": {
        "before": [
          "      const arrB = Array.isArray(b) ? b : [b];",
          "      let sum = 0;",
          "      for (let i = 0; i < Math.max(arrA.length, arrB.length); i++) {"
        ],
        "after": [
          "        sum += diff * diff;",
          "      }",
          "      return Math.sqrt(sum);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:241:30",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 241,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.push((arrA[i] ?? 0) + (arrB[i] ?? 0));",
      "context": {
        "before": [
          "      const len = Math.max(arrA.length, arrB.length);",
          "      const result = [];",
          "      for (let i = 0; i < len; i++) {"
        ],
        "after": [
          "      }",
          "      return result;",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:241:47",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 241,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.push((arrA[i] ?? 0) + (arrB[i] ?? 0));",
      "context": {
        "before": [
          "      const len = Math.max(arrA.length, arrB.length);",
          "      const result = [];",
          "      for (let i = 0; i < len; i++) {"
        ],
        "after": [
          "      }",
          "      return result;",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:254:30",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 254,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.push((arrA[i] ?? 0) - (arrB[i] ?? 0));",
      "context": {
        "before": [
          "      const len = Math.max(arrA.length, arrB.length);",
          "      const result = [];",
          "      for (let i = 0; i < len; i++) {"
        ],
        "after": [
          "      }",
          "      return result;",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:254:47",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 254,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.push((arrA[i] ?? 0) - (arrB[i] ?? 0));",
      "context": {
        "before": [
          "      const len = Math.max(arrA.length, arrB.length);",
          "      const result = [];",
          "      for (let i = 0; i < len; i++) {"
        ],
        "after": [
          "      }",
          "      return result;",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:273:30",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 273,
      "column": 30,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.push((arrA[i] ?? 0) * (arrB[i] ?? 0));",
      "context": {
        "before": [
          "      const len = Math.max(arrA.length, arrB.length);",
          "      const result = [];",
          "      for (let i = 0; i < len; i++) {"
        ],
        "after": [
          "      }",
          "      return result;",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:273:47",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 273,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.push((arrA[i] ?? 0) * (arrB[i] ?? 0));",
      "context": {
        "before": [
          "      const len = Math.max(arrA.length, arrB.length);",
          "      const result = [];",
          "      for (let i = 0; i < len; i++) {"
        ],
        "after": [
          "      }",
          "      return result;",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:295:46",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 295,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "result.push(divisor !== 0 ? (arrA[i] ?? 0) / divisor : 0);",
      "context": {
        "before": [
          "      const result = [];",
          "      for (let i = 0; i < len; i++) {",
          "        const divisor = arrB[i] ?? 1;"
        ],
        "after": [
          "      }",
          "      return result;",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:316:5",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 316,
      "column": 5,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "Infinity,",
      "context": {
        "before": [
          "    parseFloat: Number.parseFloat,",
          "",
          "    // Constants"
        ],
        "after": [
          "    NaN,",
          "    undefined,",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:317:5",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 317,
      "column": 5,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "NaN,",
      "context": {
        "before": [
          "",
          "    // Constants",
          "    Infinity,"
        ],
        "after": [
          "    undefined,",
          "",
          "    // Context values (frozen)"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:560:9",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 560,
      "column": 9,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "Infinity,",
      "context": {
        "before": [
          "        Math: safeMath,",
          "        isNaN: Number.isNaN,",
          "        isFinite: Number.isFinite,"
        ],
        "after": [
          "        NaN,",
          "        undefined,",
          "        // Deterministic seeded random function"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:561:9",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 561,
      "column": 9,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "NaN,",
      "context": {
        "before": [
          "        isNaN: Number.isNaN,",
          "        isFinite: Number.isFinite,",
          "        Infinity,"
        ],
        "after": [
          "        undefined,",
          "        // Deterministic seeded random function",
          "        random: seededRandom,"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/textAnimator.ts:97:39",
      "file": "services/expressions/textAnimator.ts",
      "line": 97,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const wordIndex = ${ctx.wordIndex ?? 0};",
      "context": {
        "before": [
          "    const textTotal = ${ctx.textTotal};",
          "    const selectorValue = ${ctx.selectorValue};",
          "    const char = ${JSON.stringify(ctx.char)};"
        ],
        "after": [
          "    const lineIndex = ${ctx.lineIndex ?? 0};",
          "    const charInWord = ${ctx.charInWord ?? 0};",
          "    const charInLine = ${ctx.charInLine ?? 0};"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/textAnimator.ts:98:39",
      "file": "services/expressions/textAnimator.ts",
      "line": 98,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const lineIndex = ${ctx.lineIndex ?? 0};",
      "context": {
        "before": [
          "    const selectorValue = ${ctx.selectorValue};",
          "    const char = ${JSON.stringify(ctx.char)};",
          "    const wordIndex = ${ctx.wordIndex ?? 0};"
        ],
        "after": [
          "    const charInWord = ${ctx.charInWord ?? 0};",
          "    const charInLine = ${ctx.charInLine ?? 0};",
          "    ${code}"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/textAnimator.ts:99:41",
      "file": "services/expressions/textAnimator.ts",
      "line": 99,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const charInWord = ${ctx.charInWord ?? 0};",
      "context": {
        "before": [
          "    const char = ${JSON.stringify(ctx.char)};",
          "    const wordIndex = ${ctx.wordIndex ?? 0};",
          "    const lineIndex = ${ctx.lineIndex ?? 0};"
        ],
        "after": [
          "    const charInLine = ${ctx.charInLine ?? 0};",
          "    ${code}",
          "  `;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/textAnimator.ts:100:41",
      "file": "services/expressions/textAnimator.ts",
      "line": 100,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const charInLine = ${ctx.charInLine ?? 0};",
      "context": {
        "before": [
          "    const wordIndex = ${ctx.wordIndex ?? 0};",
          "    const lineIndex = ${ctx.lineIndex ?? 0};",
          "    const charInWord = ${ctx.charInWord ?? 0};"
        ],
        "after": [
          "    ${code}",
          "  `;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:20:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 20,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const aVal = a[i] ?? 0;",
      "context": {
        "before": [
          "  const maxLen = Math.max(a.length, b.length);",
          "  const result: number[] = [];",
          "  for (let i = 0; i < maxLen; i++) {"
        ],
        "after": [
          "    const bVal = b[i] ?? 0;",
          "    result.push(aVal + bVal);",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:21:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 21,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bVal = b[i] ?? 0;",
      "context": {
        "before": [
          "  const result: number[] = [];",
          "  for (let i = 0; i < maxLen; i++) {",
          "    const aVal = a[i] ?? 0;"
        ],
        "after": [
          "    result.push(aVal + bVal);",
          "  }",
          "  return result;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:35:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 35,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const aVal = a[i] ?? 0;",
      "context": {
        "before": [
          "  const maxLen = Math.max(a.length, b.length);",
          "  const result: number[] = [];",
          "  for (let i = 0; i < maxLen; i++) {"
        ],
        "after": [
          "    const bVal = b[i] ?? 0;",
          "    result.push(aVal - bVal);",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:36:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 36,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bVal = b[i] ?? 0;",
      "context": {
        "before": [
          "  const result: number[] = [];",
          "  for (let i = 0; i < maxLen; i++) {",
          "    const aVal = a[i] ?? 0;"
        ],
        "after": [
          "    result.push(aVal - bVal);",
          "  }",
          "  return result;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:60:25",
      "file": "services/expressions/vectorMath.ts",
      "line": 60,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const aVal = a[i] ?? 0;",
      "context": {
        "before": [
          "    const maxLen = Math.max(a.length, b.length);",
          "    const result: number[] = [];",
          "    for (let i = 0; i < maxLen; i++) {"
        ],
        "after": [
          "      const bVal = b[i] ?? 0;",
          "      result.push(aVal * bVal);",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:61:25",
      "file": "services/expressions/vectorMath.ts",
      "line": 61,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bVal = b[i] ?? 0;",
      "context": {
        "before": [
          "    const result: number[] = [];",
          "    for (let i = 0; i < maxLen; i++) {",
          "      const aVal = a[i] ?? 0;"
        ],
        "after": [
          "      result.push(aVal * bVal);",
          "    }",
          "    return result;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:87:25",
      "file": "services/expressions/vectorMath.ts",
      "line": 87,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const aVal = a[i] ?? 0;",
      "context": {
        "before": [
          "    const maxLen = Math.max(a.length, b.length);",
          "    const result: number[] = [];",
          "    for (let i = 0; i < maxLen; i++) {"
        ],
        "after": [
          "      const bVal = b[i] ?? 1;",
          "      result.push(aVal / bVal);",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:114:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 114,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const aVal = a[i] ?? 0;",
      "context": {
        "before": [
          "  let sum = 0;",
          "  const maxLen = Math.min(a.length, b.length);",
          "  for (let i = 0; i < maxLen; i++) {"
        ],
        "after": [
          "    const bVal = b[i] ?? 0;",
          "    sum += aVal * bVal;",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:115:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 115,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bVal = b[i] ?? 0;",
      "context": {
        "before": [
          "  const maxLen = Math.min(a.length, b.length);",
          "  for (let i = 0; i < maxLen; i++) {",
          "    const aVal = a[i] ?? 0;"
        ],
        "after": [
          "    sum += aVal * bVal;",
          "  }",
          "  return sum;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:127:19",
      "file": "services/expressions/vectorMath.ts",
      "line": 127,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const ax = a[0] ?? 0;",
      "context": {
        "before": [
          " */",
          "export function vectorCross(a: number[], b: number[]): number[] {",
          "  // Ensure 3D vectors"
        ],
        "after": [
          "  const ay = a[1] ?? 0;",
          "  const az = a[2] ?? 0;",
          "  const bx = b[0] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:128:19",
      "file": "services/expressions/vectorMath.ts",
      "line": 128,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const ay = a[1] ?? 0;",
      "context": {
        "before": [
          "export function vectorCross(a: number[], b: number[]): number[] {",
          "  // Ensure 3D vectors",
          "  const ax = a[0] ?? 0;"
        ],
        "after": [
          "  const az = a[2] ?? 0;",
          "  const bx = b[0] ?? 0;",
          "  const by = b[1] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:129:19",
      "file": "services/expressions/vectorMath.ts",
      "line": 129,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const az = a[2] ?? 0;",
      "context": {
        "before": [
          "  // Ensure 3D vectors",
          "  const ax = a[0] ?? 0;",
          "  const ay = a[1] ?? 0;"
        ],
        "after": [
          "  const bx = b[0] ?? 0;",
          "  const by = b[1] ?? 0;",
          "  const bz = b[2] ?? 0;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:130:19",
      "file": "services/expressions/vectorMath.ts",
      "line": 130,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bx = b[0] ?? 0;",
      "context": {
        "before": [
          "  const ax = a[0] ?? 0;",
          "  const ay = a[1] ?? 0;",
          "  const az = a[2] ?? 0;"
        ],
        "after": [
          "  const by = b[1] ?? 0;",
          "  const bz = b[2] ?? 0;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:131:19",
      "file": "services/expressions/vectorMath.ts",
      "line": 131,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const by = b[1] ?? 0;",
      "context": {
        "before": [
          "  const ay = a[1] ?? 0;",
          "  const az = a[2] ?? 0;",
          "  const bx = b[0] ?? 0;"
        ],
        "after": [
          "  const bz = b[2] ?? 0;",
          "",
          "  return [ay * bz - az * by, az * bx - ax * bz, ax * by - ay * bx];"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:132:19",
      "file": "services/expressions/vectorMath.ts",
      "line": 132,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bz = b[2] ?? 0;",
      "context": {
        "before": [
          "  const az = a[2] ?? 0;",
          "  const bx = b[0] ?? 0;",
          "  const by = b[1] ?? 0;"
        ],
        "after": [
          "",
          "  return [ay * bz - az * by, az * bx - ax * bz, ax * by - ay * bx];",
          "}"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:150:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 150,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const aVal = a[i] ?? 0;",
      "context": {
        "before": [
          "  let sum = 0;",
          "  const maxLen = Math.max(a.length, b.length);",
          "  for (let i = 0; i < maxLen; i++) {"
        ],
        "after": [
          "    const bVal = b[i] ?? 0;",
          "    const diff = aVal - bVal;",
          "    sum += diff * diff;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:151:23",
      "file": "services/expressions/vectorMath.ts",
      "line": 151,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const bVal = b[i] ?? 0;",
      "context": {
        "before": [
          "  const maxLen = Math.max(a.length, b.length);",
          "  for (let i = 0; i < maxLen; i++) {",
          "    const aVal = a[i] ?? 0;"
        ],
        "after": [
          "    const diff = aVal - bVal;",
          "    sum += diff * diff;",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:169:53",
      "file": "services/expressions/vectorMath.ts",
      "line": 169,
      "column": 53,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "const minVal = Array.isArray(min) ? (min[i] ?? -Infinity) : min;",
      "context": {
        "before": [
          "): number[] {",
          "  // Use Infinity defaults for missing array elements (pass through unclamped)",
          "  return vec.map((v, i) => {"
        ],
        "after": [
          "    const maxVal = Array.isArray(max) ? (max[i] ?? Infinity) : max;",
          "    return Math.max(minVal, Math.min(maxVal, v));",
          "  });"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/vectorMath.ts:170:52",
      "file": "services/expressions/vectorMath.ts",
      "line": 170,
      "column": 52,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "const maxVal = Array.isArray(max) ? (max[i] ?? Infinity) : max;",
      "context": {
        "before": [
          "  // Use Infinity defaults for missing array elements (pass through unclamped)",
          "  return vec.map((v, i) => {",
          "    const minVal = Array.isArray(min) ? (min[i] ?? -Infinity) : min;"
        ],
        "after": [
          "    return Math.max(minVal, Math.min(maxVal, v));",
          "  });",
          "}"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/expressions/workerEvaluator.ts:74:42",
      "file": "services/expressions/workerEvaluator.ts",
      "line": 74,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "req.resolve({ value: data.result ?? 0, timedOut: false });",
      "context": {
        "before": [
          "      pending.delete(data.id);",
          "",
          "      if (data.success) {"
        ],
        "after": [
          "      } else {",
          "        req.resolve({ value: 0, timedOut: false, error: data.error });",
          "      }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:655:35",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 655,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "centerX: params.centerX ?? 0.5,",
      "context": {
        "before": [
          "",
          "      case \"radial-blur\":",
          "        return {"
        ],
        "after": [
          "          centerY: params.centerY ?? 0.5,",
          "          amount: params.amount ?? 50,",
          "          samples: params.samples ?? 32,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:656:35",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 656,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "centerY: params.centerY ?? 0.5,",
      "context": {
        "before": [
          "      case \"radial-blur\":",
          "        return {",
          "          centerX: params.centerX ?? 0.5,"
        ],
        "after": [
          "          amount: params.amount ?? 50,",
          "          samples: params.samples ?? 32,",
          "        };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:663:31",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 663,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "angle: params.angle ?? 0,",
      "context": {
        "before": [
          "",
          "      case \"directional-blur\":",
          "        return {"
        ],
        "after": [
          "          length: params.length ?? 20,",
          "          samples: params.samples ?? 32,",
          "        };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:670:42",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 670,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "brightness: (params.brightness ?? 0) / 100, // Convert 0-100 to 0-1",
      "context": {
        "before": [
          "",
          "      case \"brightness-contrast\":",
          "        return {"
        ],
        "after": [
          "          contrast: (params.contrast ?? 0) / 100,",
          "          saturation: 0,",
          "          hue: 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:671:38",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 671,
      "column": 38,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "contrast: (params.contrast ?? 0) / 100,",
      "context": {
        "before": [
          "      case \"brightness-contrast\":",
          "        return {",
          "          brightness: (params.brightness ?? 0) / 100, // Convert 0-100 to 0-1"
        ],
        "after": [
          "          saturation: 0,",
          "          hue: 0,",
          "        };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:680:42",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 680,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "saturation: (params.saturation ?? 0) / 100,",
      "context": {
        "before": [
          "        return {",
          "          brightness: 0,",
          "          contrast: 0,"
        ],
        "after": [
          "          hue: params.hue ?? 0,",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:681:27",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 681,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "hue: params.hue ?? 0,",
      "context": {
        "before": [
          "          brightness: 0,",
          "          contrast: 0,",
          "          saturation: (params.saturation ?? 0) / 100,"
        ],
        "after": [
          "        };",
          "",
          "      case \"levels\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:686:42",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 686,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "inputBlack: (params.inputBlack ?? 0) / 255,",
      "context": {
        "before": [
          "",
          "      case \"levels\":",
          "        return {"
        ],
        "after": [
          "          inputWhite: (params.inputWhite ?? 255) / 255,",
          "          gamma: params.gamma ?? 1,",
          "          outputBlack: (params.outputBlack ?? 0) / 255,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:689:44",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 689,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "outputBlack: (params.outputBlack ?? 0) / 255,",
      "context": {
        "before": [
          "          inputBlack: (params.inputBlack ?? 0) / 255,",
          "          inputWhite: (params.inputWhite ?? 255) / 255,",
          "          gamma: params.gamma ?? 1,"
        ],
        "after": [
          "          outputWhite: (params.outputWhite ?? 255) / 255,",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:697:39",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 697,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "threshold: params.threshold ?? 0.5,",
      "context": {
        "before": [
          "        return {",
          "          radius: params.radius ?? 20,",
          "          intensity: params.intensity ?? 1,"
        ],
        "after": [
          "          color: params.color,",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:706:46",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 706,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "bend: params.amount ?? params.bend ?? 0.5,",
      "context": {
        "before": [
          "      case \"ripple-distort\":",
          "        return {",
          "          style: params.style ?? \"wave\","
        ],
        "after": [
          "          hDistort: params.hDistort ?? 0,",
          "          vDistort: params.vDistort ?? 0,",
          "        };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:707:37",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 707,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "hDistort: params.hDistort ?? 0,",
      "context": {
        "before": [
          "        return {",
          "          style: params.style ?? \"wave\",",
          "          bend: params.amount ?? params.bend ?? 0.5,"
        ],
        "after": [
          "          vDistort: params.vDistort ?? 0,",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:708:37",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 708,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "vDistort: params.vDistort ?? 0,",
      "context": {
        "before": [
          "          style: params.style ?? \"wave\",",
          "          bend: params.amount ?? params.bend ?? 0.5,",
          "          hDistort: params.hDistort ?? 0,"
        ],
        "after": [
          "        };",
          "",
          "      case \"displacement-map\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:733:29",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 733,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "iTime: (params._frame ?? 0) / (params._fps ?? 30),",
      "context": {
        "before": [
          "  ): Record<string, any> {",
          "    // Base uniforms - frame time for animated effects",
          "    const baseUniforms: Record<string, any> = {"
        ],
        "after": [
          "      iFrame: params._frame ?? 0,",
          "    };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:734:29",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 734,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "iFrame: params._frame ?? 0,",
      "context": {
        "before": [
          "    // Base uniforms - frame time for animated effects",
          "    const baseUniforms: Record<string, any> = {",
          "      iTime: (params._frame ?? 0) / (params._fps ?? 30),"
        ],
        "after": [
          "    };",
          "",
          "    switch (effectKey) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:742:31",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 742,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "angle: params.angle ?? 0,",
      "context": {
        "before": [
          "        return {",
          "          ...baseUniforms,",
          "          amount: (params.amount ?? 10) / 1000, // Convert pixels to UV offset"
        ],
        "after": [
          "        };",
          "",
          "      case \"mosaic\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:761:39",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 761,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "threshold: params.threshold ?? 0.1,",
      "context": {
        "before": [
          "      case \"find-edges\":",
          "        return {",
          "          ...baseUniforms,"
        ],
        "after": [
          "          invert: params.invert ? 1 : 0,",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:769:67",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 769,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "lineIntensity: params.intensity ?? params.lineIntensity ?? 0.15,",
      "context": {
        "before": [
          "        return {",
          "          ...baseUniforms,",
          "          lineSpacing: params.spacing ?? params.lineSpacing ?? 2,"
        ],
        "after": [
          "        };",
          "",
          "      case \"halftone\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:776:31",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 776,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "angle: params.angle ?? 0,",
      "context": {
        "before": [
          "        return {",
          "          ...baseUniforms,",
          "          dotSize: params.dotSize ?? params.size ?? 4,"
        ],
        "after": [
          "        };",
          "",
          "      case \"vhs\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:783:63",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 783,
      "column": 63,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "noiseStrength: params.noise ?? params.noiseStrength ?? 0.08,",
      "context": {
        "before": [
          "        return {",
          "          ...baseUniforms,",
          "          aberration: (params.chromaShift ?? params.aberration ?? 2) / 1000,"
        ],
        "after": [
          "          scanlineStrength: params.scanlines ?? params.scanlineStrength ?? 0.04,",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:784:73",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 784,
      "column": 73,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "scanlineStrength: params.scanlines ?? params.scanlineStrength ?? 0.04,",
      "context": {
        "before": [
          "          ...baseUniforms,",
          "          aberration: (params.chromaShift ?? params.aberration ?? 2) / 1000,",
          "          noiseStrength: params.noise ?? params.noiseStrength ?? 0.08,"
        ],
        "after": [
          "        };",
          "",
          "      case \"ripple\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:793:35",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 793,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "centerX: params.centerX ?? 0.5,",
      "context": {
        "before": [
          "          amplitude: (params.amplitude ?? 3) / 100,",
          "          frequency: params.frequency ?? 20,",
          "          speed: params.speed ?? 2,"
        ],
        "after": [
          "          centerY: params.centerY ?? 0.5,",
          "        };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:794:35",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 794,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "centerY: params.centerY ?? 0.5,",
      "context": {
        "before": [
          "          frequency: params.frequency ?? 20,",
          "          speed: params.speed ?? 2,",
          "          centerX: params.centerX ?? 0.5,"
        ],
        "after": [
          "        };",
          "",
          "      case \"glitch\":"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:218:53",
      "file": "services/gpuParticleRenderer.ts",
      "line": 218,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "motionBlurStrength: config.motionBlurStrength ?? 0.5,",
      "context": {
        "before": [
          "      softParticles: config.softParticles ?? false,",
          "      softParticleDistance: config.softParticleDistance ?? 50,",
          "      velocityMotionBlur: config.velocityMotionBlur ?? true,"
        ],
        "after": [
          "      emissive: config.emissive ?? false,",
          "      emissiveIntensity: config.emissiveIntensity ?? 2.0,",
          "    };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/imageTrace.ts:404:28",
      "file": "services/imageTrace.ts",
      "line": 404,
      "column": 28,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const tl = bitmap[idx] || 0;",
      "context": {
        "before": [
          "",
          "    // Get marching squares pattern",
          "    const idx = y * width + x;"
        ],
        "after": [
          "    const tr = bitmap[idx + 1] || 0;",
          "    const bl = bitmap[idx + width] || 0;",
          "    const br = bitmap[idx + width + 1] || 0;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/imageTrace.ts:405:32",
      "file": "services/imageTrace.ts",
      "line": 405,
      "column": 32,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const tr = bitmap[idx + 1] || 0;",
      "context": {
        "before": [
          "    // Get marching squares pattern",
          "    const idx = y * width + x;",
          "    const tl = bitmap[idx] || 0;"
        ],
        "after": [
          "    const bl = bitmap[idx + width] || 0;",
          "    const br = bitmap[idx + width + 1] || 0;",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/imageTrace.ts:406:36",
      "file": "services/imageTrace.ts",
      "line": 406,
      "column": 36,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const bl = bitmap[idx + width] || 0;",
      "context": {
        "before": [
          "    const idx = y * width + x;",
          "    const tl = bitmap[idx] || 0;",
          "    const tr = bitmap[idx + 1] || 0;"
        ],
        "after": [
          "    const br = bitmap[idx + width + 1] || 0;",
          "",
          "    const pattern = (tl << 3) | (tr << 2) | (br << 1) | bl;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/imageTrace.ts:407:40",
      "file": "services/imageTrace.ts",
      "line": 407,
      "column": 40,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const br = bitmap[idx + width + 1] || 0;",
      "context": {
        "before": [
          "    const tl = bitmap[idx] || 0;",
          "    const tr = bitmap[idx + 1] || 0;",
          "    const bl = bitmap[idx + width] || 0;"
        ],
        "after": [
          "",
          "    const pattern = (tl << 3) | (tr << 2) | (br << 1) | bl;",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:49:46",
      "file": "services/layerEvaluationCache.ts",
      "line": 49,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const current = layerVersions.get(layerId) ?? 0;",
      "context": {
        "before": [
          " * Should be called whenever a layer property is modified",
          " */",
          "export function markLayerDirty(layerId: string): void {"
        ],
        "after": [
          "  layerVersions.set(layerId, current + 1);",
          "  globalVersion++;",
          "}"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:66:37",
      "file": "services/layerEvaluationCache.ts",
      "line": 66,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return layerVersions.get(layerId) ?? 0;",
      "context": {
        "before": [
          " * Get current version for a layer",
          " */",
          "export function getLayerVersion(layerId: string): number {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:390:51",
      "file": "services/layerEvaluationCache.ts",
      "line": 390,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "  }",
          "",
          "  // Evaluate layer"
        ],
        "after": [
          "  const end = layer.endFrame ?? layer.outPoint ?? 80;",
          "  const inRange = frame >= start && frame <= end;",
          "  const visible = layer.visible && inRange;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/layerTime.ts:125:44",
      "file": "services/layerTime.ts",
      "line": 125,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStartFrame = layer.startFrame ?? 0;",
      "context": {
        "before": [
          "  }",
          "",
          "  // Calculate time relative to layer start"
        ],
        "after": [
          "  const layerFrame = compFrame - layerStartFrame;",
          "",
          "  // Apply time stretch to get source frame"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/layerTime.ts:263:34",
      "file": "services/layerTime.ts",
      "line": 263,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? 0;",
      "context": {
        "before": [
          "  layer: Layer,",
          "  compFrame: number,",
          "): boolean {"
        ],
        "after": [
          "  const end = layer.endFrame ?? 80;",
          "  return compFrame >= start && compFrame <= end;",
          "}"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/maskGenerator.ts:343:17",
      "file": "services/maskGenerator.ts",
      "line": 343,
      "column": 17,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minR0 = Infinity;",
      "context": {
        "before": [
          "",
          "    // Precompute R0 for each pixel",
          "    const R0 = new Float32Array(width * height);"
        ],
        "after": [
          "",
          "    for (let y = 0; y < height; y++) {",
          "      for (let x = 0; x < width; x++) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:174:55",
      "file": "services/matteExporter.ts",
      "line": 174,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "",
          "    // Find text layers that are visible at this frame",
          "    const textLayers = project.layers.filter((layer) => {"
        ],
        "after": [
          "      const end = layer.endFrame ?? layer.outPoint ?? 80;",
          "      return (",
          "        layer.type === \"text\" && layer.visible && frame >= start && frame <= end"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:194:55",
      "file": "services/matteExporter.ts",
      "line": 194,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "",
          "    // Find particle layers that are visible at this frame",
          "    const particleLayers = project.layers.filter((layer) => {"
        ],
        "after": [
          "      const end = layer.endFrame ?? layer.outPoint ?? 80;",
          "      return (",
          "        layer.type === \"particles\" &&"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:517:42",
      "file": "services/matteExporter.ts",
      "line": 517,
      "column": 42,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "for (const mod of data.modulations ?? []) {",
      "context": {
        "before": [
          "      }",
          "",
          "      // Add modulations (if defined)"
        ],
        "after": [
          "        system.addModulation(mod);",
          "      }",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:522:59",
      "file": "services/matteExporter.ts",
      "line": 522,
      "column": 59,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const warmupFrames = data.systemConfig.warmupPeriod || 0;",
      "context": {
        "before": [
          "      }",
          "",
          "      // Run warmup period"
        ],
        "after": [
          "      for (let i = 0; i < warmupFrames; i++) {",
          "        system.step();",
          "      }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:550:55",
      "file": "services/matteExporter.ts",
      "line": 550,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "      if (!system) continue;",
          "",
          "      // Only step if layer is visible at this frame"
        ],
        "after": [
          "      const end = layer.endFrame ?? layer.outPoint ?? 80;",
          "      if (layer.visible && frame >= start && frame <= end) {",
          "        system.step();"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshDeformation3D.ts:484:48",
      "file": "services/meshDeformation3D.ts",
      "line": 484,
      "column": 48,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const pins = this.pinsByLayer.get(layerId) ?? [];",
      "context": {
        "before": [
          "   * Add a pin to a layer",
          "   */",
          "  addPin(layerId: string, position: Vec3): Deformation3DPin {"
        ],
        "after": [
          "    const id = `pin_${layerId}_${Date.now()}_${Math.random().toString(36).slice(2, 6)}`;",
          "    const pin = createDefault3DPin(id, position);",
          "    pins.push(pin);"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshDeformation3D.ts:496:42",
      "file": "services/meshDeformation3D.ts",
      "line": 496,
      "column": 42,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "return this.pinsByLayer.get(layerId) ?? [];",
      "context": {
        "before": [
          "   * Get pins for a layer",
          "   */",
          "  getPins(layerId: string): Deformation3DPin[] {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:164:61",
      "file": "services/meshParticleManager.ts",
      "line": 164,
      "column": 61,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "vertexCount: geometry.getAttribute(\"position\")?.count ?? 0,",
      "context": {
        "before": [
          "      geometry,",
          "      boundingBox: geometry.boundingBox?.clone() ?? new THREE.Box3(),",
          "      boundingSphere: geometry.boundingSphere?.clone() ?? new THREE.Sphere(),"
        ],
        "after": [
          "      faceCount: geometry.index",
          "        ? geometry.index.count / 3",
          "        : (geometry.getAttribute(\"position\")?.count ?? 0) / 3,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:167:53",
      "file": "services/meshParticleManager.ts",
      "line": 167,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": ": (geometry.getAttribute(\"position\")?.count ?? 0) / 3,",
      "context": {
        "before": [
          "      vertexCount: geometry.getAttribute(\"position\")?.count ?? 0,",
          "      faceCount: geometry.index",
          "        ? geometry.index.count / 3"
        ],
        "after": [
          "      config,",
          "    };",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:208:28",
      "file": "services/meshParticleManager.ts",
      "line": 208,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "scale: options.scale ?? 0.01,",
      "context": {
        "before": [
          "      svgDocumentId,",
          "      svgPathId,",
          "      svgExtrusionDepth: options.extrusionDepth ?? 1,"
        ],
        "after": [
          "      centerOrigin: options.centerOrigin ?? true,",
          "      simplify: options.simplify ?? true,",
          "      simplifyTolerance: options.simplifyTolerance ?? 0.1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:211:52",
      "file": "services/meshParticleManager.ts",
      "line": 211,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "simplifyTolerance: options.simplifyTolerance ?? 0.1,",
      "context": {
        "before": [
          "      scale: options.scale ?? 0.01,",
          "      centerOrigin: options.centerOrigin ?? true,",
          "      simplify: options.simplify ?? true,"
        ],
        "after": [
          "    });",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:233:28",
      "file": "services/meshParticleManager.ts",
      "line": 233,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "scale: options.scale ?? 0.01,",
      "context": {
        "before": [
          "      source: \"svg\",",
          "      svgPathId: path.id,",
          "      svgExtrusionDepth: options.extrusionDepth ?? 1,"
        ],
        "after": [
          "      centerOrigin: options.centerOrigin ?? true,",
          "      simplify: options.simplify ?? true,",
          "      simplifyTolerance: options.simplifyTolerance ?? 0.1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:236:52",
      "file": "services/meshParticleManager.ts",
      "line": 236,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "simplifyTolerance: options.simplifyTolerance ?? 0.1,",
      "context": {
        "before": [
          "      scale: options.scale ?? 0.01,",
          "      centerOrigin: options.centerOrigin ?? true,",
          "      simplify: options.simplify ?? true,"
        ],
        "after": [
          "    });",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:438:35",
      "file": "services/meshParticleManager.ts",
      "line": 438,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "metalness: config.metalness ?? 0,",
      "context": {
        "before": [
          "",
          "    return new THREE.MeshStandardMaterial({",
          "      color: new THREE.Color(config.color ?? \"#ffffff\"),"
        ],
        "after": [
          "      roughness: config.roughness ?? 0.5,",
          "      emissive: new THREE.Color(config.emissive ?? \"#000000\"),",
          "      emissiveIntensity: config.emissiveIntensity ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:439:35",
      "file": "services/meshParticleManager.ts",
      "line": 439,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "roughness: config.roughness ?? 0.5,",
      "context": {
        "before": [
          "    return new THREE.MeshStandardMaterial({",
          "      color: new THREE.Color(config.color ?? \"#ffffff\"),",
          "      metalness: config.metalness ?? 0,"
        ],
        "after": [
          "      emissive: new THREE.Color(config.emissive ?? \"#000000\"),",
          "      emissiveIntensity: config.emissiveIntensity ?? 0,",
          "      side: THREE.DoubleSide,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:441:51",
      "file": "services/meshParticleManager.ts",
      "line": 441,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "emissiveIntensity: config.emissiveIntensity ?? 0,",
      "context": {
        "before": [
          "      metalness: config.metalness ?? 0,",
          "      roughness: config.roughness ?? 0.5,",
          "      emissive: new THREE.Color(config.emissive ?? \"#000000\"),"
        ],
        "after": [
          "      side: THREE.DoubleSide,",
          "    });",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:658:46",
      "file": "services/meshWarpDeformation.ts",
      "line": 658,
      "column": 46,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "return this.meshCache.get(layerId)?.pins ?? [];",
      "context": {
        "before": [
          "   * Get all pins for a layer",
          "   */",
          "  getPins(layerId: string): WarpPin[] {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:534:75",
      "file": "services/midi/MIDIService.ts",
      "line": 534,
      "column": 75,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "inputValue = this.getCCValue(message.channel, message.controller) || 0;",
      "context": {
        "before": [
          "            ? (message.value / 16383) * 127 // Normalize pitch bend to 0-127",
          "            : message.value;",
          "      } else if (message.controller !== undefined) {"
        ],
        "after": [
          "      }",
          "    } else {",
          "      // Use stored CC value (for continuous display)"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/midiToKeyframes.ts:661:67",
      "file": "services/midiToKeyframes.ts",
      "line": 661,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(config.noteRange?.max ?? 127) - (config.noteRange?.min ?? 0);",
      "context": {
        "before": [
          "      case \"notePitch\": {",
          "        // Value based on note number",
          "        const pitchRange ="
        ],
        "after": [
          "        const normalizedPitch =",
          "          (note.noteNumber - (config.noteRange?.min ?? 0)) / pitchRange;",
          "        value ="
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/midiToKeyframes.ts:663:53",
      "file": "services/midiToKeyframes.ts",
      "line": 663,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(note.noteNumber - (config.noteRange?.min ?? 0)) / pitchRange;",
      "context": {
        "before": [
          "        const pitchRange =",
          "          (config.noteRange?.max ?? 127) - (config.noteRange?.min ?? 0);",
          "        const normalizedPitch ="
        ],
        "after": [
          "        value =",
          "          config.valueMin +",
          "          normalizedPitch * (config.valueMax - config.valueMin);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:141:52",
      "file": "services/modelExport.ts",
      "line": 141,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const numFrames = trajectories[0]?.points.length ?? 0;",
      "context": {
        "before": [
          "  height: number,",
          "  fps: number,",
          "): WanMoveTrajectory {"
        ],
        "after": [
          "",
          "  return {",
          "    tracks: trajectories.map((t) => t.points.map((p) => [p.x, p.y])),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:251:58",
      "file": "services/modelExport.ts",
      "line": 251,
      "column": 58,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStart = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "  const scale: Array<{ frame: number; x: number; y: number }> = [];",
          "",
          "  for (let frame = startFrame; frame <= endFrame; frame++) {"
        ],
        "after": [
          "    const layerEnd = layer.endFrame ?? layer.outPoint ?? 80;",
          "    const inRange = frame >= layerStart && frame <= layerEnd;",
          "    visibility.push(inRange && layer.visible);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:443:56",
      "file": "services/modelExport.ts",
      "line": 443,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStart = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "  ctx.fillRect(0, 0, compWidth, compHeight);",
          "",
          "  // Draw white rectangle for layer bounds (motion region)"
        ],
        "after": [
          "  const bounds = getLayerBounds(layer, layerStart);",
          "  ctx.fillStyle = \"white\";",
          "  ctx.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:476:63",
      "file": "services/modelExport.ts",
      "line": 476,
      "column": 63,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStartFrame = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "  // Draw each layer's bounds in white",
          "  ctx.fillStyle = \"white\";",
          "  for (const layer of layers) {"
        ],
        "after": [
          "    const bounds = getLayerBounds(layer, layerStartFrame);",
          "    ctx.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:1189:63",
      "file": "services/modelExport.ts",
      "line": 1189,
      "column": 63,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const shape = [trajectories.length, trajectories[0]?.length || 0, 2];",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "  const header = createNpyHeader(shape, \"<f4\");",
          "",
          "  // Create float32 data"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/motionRecording.ts:560:14",
      "file": "services/motionRecording.ts",
      "line": 560,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minX = Infinity;",
      "context": {
        "before": [
          "    return { minX: 0, maxX: 0, minY: 0, maxY: 0, width: 0, height: 0 };",
          "  }",
          ""
        ],
        "after": [
          "  let maxX = -Infinity;",
          "  let minY = Infinity;",
          "  let maxY = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/motionRecording.ts:561:15",
      "file": "services/motionRecording.ts",
      "line": 561,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxX = -Infinity;",
      "context": {
        "before": [
          "  }",
          "",
          "  let minX = Infinity;"
        ],
        "after": [
          "  let minY = Infinity;",
          "  let maxY = -Infinity;",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/motionRecording.ts:562:14",
      "file": "services/motionRecording.ts",
      "line": 562,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minY = Infinity;",
      "context": {
        "before": [
          "",
          "  let minX = Infinity;",
          "  let maxX = -Infinity;"
        ],
        "after": [
          "  let maxY = -Infinity;",
          "",
          "  for (const sample of motion.samples) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/motionRecording.ts:563:15",
      "file": "services/motionRecording.ts",
      "line": 563,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxY = -Infinity;",
      "context": {
        "before": [
          "  let minX = Infinity;",
          "  let maxX = -Infinity;",
          "  let minY = Infinity;"
        ],
        "after": [
          "",
          "  for (const sample of motion.samples) {",
          "    if (sample.x < minX) minX = sample.x;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:447:44",
      "file": "services/particleSystem.ts",
      "line": 447,
      "column": 44,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(this.emissionAccumulators.get(id) || 0) + particlesToEmit;",
      "context": {
        "before": [
          "",
          "      // Accumulate fractional particles",
          "      let accumulated ="
        ],
        "after": [
          "",
          "      while (",
          "        accumulated >= 1 &&"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1143:47",
      "file": "services/particleSystem.ts",
      "line": 1143,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const coneRadius = emitter.coneRadius ?? 0.1;",
      "context": {
        "before": [
          "        // Emit from cone volume",
          "        // Cone opens along Y axis from emitter position",
          "        const coneAngle = ((emitter.coneAngle ?? 45) * Math.PI) / 180;"
        ],
        "after": [
          "        const coneLength = emitter.coneLength ?? 0.2;",
          "",
          "        // Random point in cone"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1144:47",
      "file": "services/particleSystem.ts",
      "line": 1144,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const coneLength = emitter.coneLength ?? 0.2;",
      "context": {
        "before": [
          "        // Cone opens along Y axis from emitter position",
          "        const coneAngle = ((emitter.coneAngle ?? 45) * Math.PI) / 180;",
          "        const coneRadius = emitter.coneRadius ?? 0.1;"
        ],
        "after": [
          "",
          "        // Random point in cone",
          "        const t = this.rng.next(); // 0-1 along cone length"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1233:63",
      "file": "services/particleSystem.ts",
      "line": 1233,
      "column": 63,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const currentT = this.sequentialEmitT.get(emitter.id) ?? 0;",
      "context": {
        "before": [
          "      case \"sequential\": {",
          "        // Emit sequentially along path, advancing each emission",
          "        // Uses parameter as speed (how much t advances per emission)"
        ],
        "after": [
          "        t = currentT;",
          "        // Advance for next emission",
          "        const speed = Math.max(0.001, splinePath.parameter);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1557:49",
      "file": "services/particleSystem.ts",
      "line": 1557,
      "column": 49,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const threshold = emitter.emissionThreshold ?? 0.1;",
      "context": {
        "before": [
          "    y: number;",
          "  } {",
          "    const sourceLayerId = emitter.imageSourceLayerId;"
        ],
        "after": [
          "",
          "    // Fall back to point emission if no source layer configured",
          "    if (!sourceLayerId) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1639:50",
      "file": "services/particleSystem.ts",
      "line": 1639,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const threshold = emitter.depthEdgeThreshold ?? 0.05;",
      "context": {
        "before": [
          "    y: number;",
          "  } {",
          "    const sourceLayerId = emitter.depthSourceLayerId;"
        ],
        "after": [
          "",
          "    // Fall back to point emission if no source layer configured",
          "    if (!sourceLayerId) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1855:53",
      "file": "services/particleSystem.ts",
      "line": 1855,
      "column": 53,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const turbFields = this.config.turbulenceFields || [];",
      "context": {
        "before": [
          "  // ============================================================================",
          "",
          "  private applyTurbulence(p: Particle, deltaTime: number): void {"
        ],
        "after": [
          "    for (const turb of turbFields) {",
          "      if (!turb.enabled) continue;",
          "      const nx = p.x * turb.scale * 1000; // Scale up for noise variation"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1887:41",
      "file": "services/particleSystem.ts",
      "line": 1887,
      "column": 41,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return this.config.turbulenceFields || [];",
      "context": {
        "before": [
          "  }",
          "",
          "  getTurbulenceFields(): TurbulenceConfig[] {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1899:49",
      "file": "services/particleSystem.ts",
      "line": 1899,
      "column": 49,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const subEmitters = this.config.subEmitters || [];",
      "context": {
        "before": [
          "   * DETERMINISM: Uses seeded RNG (this.rng) for all randomness",
          "   */",
          "  private triggerSubEmitters(deadParticle: Particle): void {"
        ],
        "after": [
          "    for (const sub of subEmitters) {",
          "      if (!sub.enabled) continue;",
          "      if ("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1974:36",
      "file": "services/particleSystem.ts",
      "line": 1974,
      "column": 36,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return this.config.subEmitters || [];",
      "context": {
        "before": [
          "  }",
          "",
          "  getSubEmitters(): SubEmitterConfig[] {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2140:48",
      "file": "services/particleSystem.ts",
      "line": 2140,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "angularVelocity: state.angularVelocity ?? 0,",
      "context": {
        "before": [
          "        isSubParticle: state.isSubParticle ?? false,",
          "        rotation: state.rotation,",
          "        // Restore angular velocity for sprite rotation"
        ],
        "after": [
          "        // Restore sprite frame for animation continuity",
          "        spriteIndex: state.spriteIndex ?? 0,",
          "        // Restore collision count for physics interactions"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2142:40",
      "file": "services/particleSystem.ts",
      "line": 2142,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "spriteIndex: state.spriteIndex ?? 0,",
      "context": {
        "before": [
          "        // Restore angular velocity for sprite rotation",
          "        angularVelocity: state.angularVelocity ?? 0,",
          "        // Restore sprite frame for animation continuity"
        ],
        "after": [
          "        // Restore collision count for physics interactions",
          "        collisionCount: state.collisionCount ?? 0,",
          "      };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2144:46",
      "file": "services/particleSystem.ts",
      "line": 2144,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "collisionCount: state.collisionCount ?? 0,",
      "context": {
        "before": [
          "        // Restore sprite frame for animation continuity",
          "        spriteIndex: state.spriteIndex ?? 0,",
          "        // Restore collision count for physics interactions"
        ],
        "after": [
          "      };",
          "",
          "      this.particles.push(particle);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/pathMorphing.ts:457:22",
      "file": "services/pathMorphing.ts",
      "line": 457,
      "column": 22,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let bestDistance = Infinity;",
      "context": {
        "before": [
          "  const n = source.vertices.length;",
          "  let bestOffset = 0;",
          "  let bestReversed = false;"
        ],
        "after": [
          "",
          "  // Try all rotation offsets",
          "  for (let offset = 0; offset < n; offset++) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:354:54",
      "file": "services/persistenceService.ts",
      "line": 354,
      "column": 54,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "request.onsuccess = () => resolve(request.result || []);",
      "context": {
        "before": [
          "    const index = store.index(\"projectId\");",
          "    const request = index.getAll(projectId);",
          ""
        ],
        "after": [
          "    request.onerror = () => reject(request.error);",
          "  });",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:444:54",
      "file": "services/persistenceService.ts",
      "line": 444,
      "column": 54,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "request.onsuccess = () => resolve(request.result || []);",
      "context": {
        "before": [
          "    const index = store.index(\"projectId\");",
          "    const request = index.getAll(projectId);",
          ""
        ],
        "after": [
          "    request.onerror = () => reject(request.error);",
          "  });",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:588:31",
      "file": "services/persistenceService.ts",
      "line": 588,
      "column": 31,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "usage: estimate.usage || 0,",
      "context": {
        "before": [
          "    try {",
          "      const estimate = await navigator.storage.estimate();",
          "      return {"
        ],
        "after": [
          "        quota: estimate.quota || 0,",
          "      };",
          "    } catch {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:589:31",
      "file": "services/persistenceService.ts",
      "line": 589,
      "column": 31,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "quota: estimate.quota || 0,",
      "context": {
        "before": [
          "      const estimate = await navigator.storage.estimate();",
          "      return {",
          "        usage: estimate.usage || 0,"
        ],
        "after": [
          "      };",
          "    } catch {",
          "      return null;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:561:49",
      "file": "services/physics/JointSystem.ts",
      "line": 561,
      "column": 49,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const dampingRatio = joint.dampingRatio || 0.7;",
      "context": {
        "before": [
          "      if (joint.frequency && joint.frequency > 0) {",
          "        // Soft weld - spring-like behavior",
          "        const omega = 2 * Math.PI * joint.frequency;"
        ],
        "after": [
          "        const c = 2 * dampingRatio * omega;",
          "",
          "        const relAngVel = bodyB.angularVelocity - bodyA.angularVelocity;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:918:46",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 918,
      "column": 46,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const brokenConstraints = (constraintIds || [])",
      "context": {
        "before": [
          "      };",
          "    });",
          ""
        ],
        "after": [
          "      .filter((id) => this.constraints.get(id)?.broken)",
          "      .map((id) => id);",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:384:57",
      "file": "services/plugins/PluginManager.ts",
      "line": 384,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "getCurrentFrame: () => this.getCurrentFrameFn?.() ?? 0,",
      "context": {
        "before": [
          "    return {",
          "      // Read-only access",
          "      getProject: () => this.getProjectFn?.() ?? null,"
        ],
        "after": [
          "      getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],",
          "      getLayer: (id) => this.getLayerFn?.(id) ?? null,",
          "      getComposition: (id) => this.getCompositionFn?.(id) ?? null,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:385:61",
      "file": "services/plugins/PluginManager.ts",
      "line": 385,
      "column": 61,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],",
      "context": {
        "before": [
          "      // Read-only access",
          "      getProject: () => this.getProjectFn?.() ?? null,",
          "      getCurrentFrame: () => this.getCurrentFrameFn?.() ?? 0,"
        ],
        "after": [
          "      getLayer: (id) => this.getLayerFn?.(id) ?? null,",
          "      getComposition: (id) => this.getCompositionFn?.(id) ?? null,",
          "      getAsset: (id) => this.getAssetFn?.(id) ?? null,"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/preprocessorService.ts:645:31",
      "file": "services/preprocessorService.ts",
      "line": 645,
      "column": 31,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return data.preprocessors || [];",
      "context": {
        "before": [
          "      throw new Error(`HTTP ${response.status}: ${response.statusText}`);",
          "    }",
          "    const data = await response.json();"
        ],
        "after": [
          "  } catch (error) {",
          "    console.warn(",
          "      \"[PreprocessorService] Failed to fetch from backend, using local registry:\","
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:160:56",
      "file": "services/projectCollection.ts",
      "line": 160,
      "column": 56,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": ": (assetData as ArrayBuffer).byteLength) || 0;",
      "context": {
        "before": [
          "          const sizeBytes =",
          "            (assetData instanceof Blob",
          "              ? assetData.size"
        ],
        "after": [
          "          manifest.files.push({",
          "            path: assetPath,",
          "            originalName: asset.name || asset.filename || assetId,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/projectStorage.ts:168:52",
      "file": "services/projectStorage.ts",
      "line": 168,
      "column": 52,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "logger.info(`Found ${result.projects?.length || 0} projects`);",
      "context": {
        "before": [
          "    const result = await response.json();",
          "",
          "    if (result.status === \"success\") {"
        ],
        "after": [
          "    } else {",
          "      logger.error(`Failed to list projects: ${result.message}`);",
          "    }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:470:42",
      "file": "services/propertyDriver.ts",
      "line": 470,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return value + (transform.amount ?? 0);",
      "context": {
        "before": [
          "        return value * (transform.factor ?? 1);",
          "",
          "      case \"offset\":"
        ],
        "after": [
          "",
          "      case \"clamp\":",
          "        return Math.max("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:474:29",
      "file": "services/propertyDriver.ts",
      "line": 474,
      "column": 29,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "transform.min ?? -Infinity,",
      "context": {
        "before": [
          "",
          "      case \"clamp\":",
          "        return Math.max("
        ],
        "after": [
          "          Math.min(transform.max ?? Infinity, value),",
          "        );",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:475:37",
      "file": "services/propertyDriver.ts",
      "line": 475,
      "column": 37,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "Math.min(transform.max ?? Infinity, value),",
      "context": {
        "before": [
          "      case \"clamp\":",
          "        return Math.max(",
          "          transform.min ?? -Infinity,"
        ],
        "after": [
          "        );",
          "",
          "      case \"smooth\": {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:480:47",
      "file": "services/propertyDriver.ts",
      "line": 480,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const smoothing = transform.smoothing ?? 0.5;",
      "context": {
        "before": [
          "",
          "      case \"smooth\": {",
          "        const prevValue = this.smoothedValues.get(driverId) ?? value;"
        ],
        "after": [
          "        const smoothed = prevValue * smoothing + value * (1 - smoothing);",
          "        this.smoothedValues.set(driverId, smoothed);",
          "        return smoothed;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:490:39",
      "file": "services/propertyDriver.ts",
      "line": 490,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const inMin = transform.inMin ?? 0;",
      "context": {
        "before": [
          "        return 1 - value;",
          "",
          "      case \"remap\": {"
        ],
        "after": [
          "        const inMax = transform.inMax ?? 1;",
          "        const outMin = transform.outMin ?? 0;",
          "        const outMax = transform.outMax ?? 1;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:492:41",
      "file": "services/propertyDriver.ts",
      "line": 492,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const outMin = transform.outMin ?? 0;",
      "context": {
        "before": [
          "      case \"remap\": {",
          "        const inMin = transform.inMin ?? 0;",
          "        const inMax = transform.inMax ?? 1;"
        ],
        "after": [
          "        const outMax = transform.outMax ?? 1;",
          "        // Guard against zero-range input (would cause division by zero)",
          "        const inRange = inMax - inMin;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:505:45",
      "file": "services/propertyDriver.ts",
      "line": 505,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return value > (transform.threshold ?? 0.5) ? 1 : 0;",
      "context": {
        "before": [
          "      }",
          "",
          "      case \"threshold\":"
        ],
        "after": [
          "",
          "      case \"oscillate\": {",
          "        const freq = transform.frequency ?? 1;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:510:39",
      "file": "services/propertyDriver.ts",
      "line": 510,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const phase = transform.phase ?? 0;",
      "context": {
        "before": [
          "      case \"oscillate\": {",
          "        const freq = transform.frequency ?? 1;",
          "        const amp = transform.amplitude ?? 1;"
        ],
        "after": [
          "        return Math.sin((value * freq + phase) * Math.PI * 2) * amp;",
          "      }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:563:63",
      "file": "services/propertyDriver.ts",
      "line": 563,
      "column": 63,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const baseValue = baseValues.get(driver.targetProperty) ?? 0;",
      "context": {
        "before": [
          "    for (const driver of drivers) {",
          "      if (!driver.enabled) continue;",
          ""
        ],
        "after": [
          "      const drivenValue = this.evaluateDriver(driver, frame, baseValue);",
          "",
          "      // If multiple drivers target same property, combine them"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:652:45",
      "file": "services/propertyDriver.ts",
      "line": 652,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "driver.audioThreshold = options.threshold ?? 0;",
      "context": {
        "before": [
          "): PropertyDriver {",
          "  const driver = createPropertyDriver(targetLayerId, targetProperty, \"audio\");",
          "  driver.audioFeature = audioFeature;"
        ],
        "after": [
          "  driver.audioAboveThreshold = options.threshold !== undefined;",
          "",
          "  // Add transforms based on options"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:747:45",
      "file": "services/propertyDriver.ts",
      "line": 747,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "driver.audioThreshold = options.threshold ?? 0;",
      "context": {
        "before": [
          "  const driver = createPropertyDriver(lightLayerId, \"light.intensity\", \"audio\");",
          "  driver.name = \"Audio Light Pulse\";",
          "  driver.audioFeature = audioFeature;"
        ],
        "after": [
          "  driver.blendMode = \"replace\";",
          "",
          "  // Remap 0-1 audio to intensity range"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:751:37",
      "file": "services/propertyDriver.ts",
      "line": 751,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const minI = options.minIntensity ?? 0.2;",
      "context": {
        "before": [
          "  driver.blendMode = \"replace\";",
          "",
          "  // Remap 0-1 audio to intensity range"
        ],
        "after": [
          "  const maxI = options.maxIntensity ?? 2.0;",
          "  driver.transforms.push({",
          "    type: \"remap\","
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:175:62",
      "file": "services/propertyEvaluator.ts",
      "line": 175,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "if (normalizedPath === \"position\") return [p.x, p.y, p.z ?? 0];",
      "context": {
        "before": [
          "  if (normalizedPath === \"position\" || normalizedPath === \"position.x\" || normalizedPath === \"position.y\" || normalizedPath === \"position.z\") {\r",
          "    if (!t.position) return null;\r",
          "    const p = interpolateProperty(t.position, frame, fps, layerId, duration);\r"
        ],
        "after": [
          "    if (normalizedPath === \"position.x\") return p.x;\r",
          "    if (normalizedPath === \"position.y\") return p.y;\r",
          "    if (normalizedPath === \"position.z\") return p.z ?? 0;\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:178:53",
      "file": "services/propertyEvaluator.ts",
      "line": 178,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "if (normalizedPath === \"position.z\") return p.z ?? 0;",
      "context": {
        "before": [
          "    if (normalizedPath === \"position\") return [p.x, p.y, p.z ?? 0];\r",
          "    if (normalizedPath === \"position.x\") return p.x;\r",
          "    if (normalizedPath === \"position.y\") return p.y;\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  if (normalizedPath === \"scale\" || normalizedPath === \"scale.x\" || normalizedPath === \"scale.y\" || normalizedPath === \"scale.z\") {\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:211:29",
      "file": "services/propertyEvaluator.ts",
      "line": 211,
      "column": 29,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return [a.x, a.y, a.z ?? 0];",
      "context": {
        "before": [
          "    if (!originProp) return null;\r",
          "    const a = interpolateProperty(originProp, frame, fps, layerId, duration);\r",
          "    if (normalizedPath === \"anchorPoint\" || normalizedPath === \"origin\") {\r"
        ],
        "after": [
          "    }\r",
          "    if (normalizedPath.endsWith(\".x\")) return a.x;\r",
          "    if (normalizedPath.endsWith(\".y\")) return a.y;\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:215:51",
      "file": "services/propertyEvaluator.ts",
      "line": 215,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "if (normalizedPath.endsWith(\".z\")) return a.z ?? 0;",
      "context": {
        "before": [
          "    }\r",
          "    if (normalizedPath.endsWith(\".x\")) return a.x;\r",
          "    if (normalizedPath.endsWith(\".y\")) return a.y;\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  if (normalizedPath === \"orientation\" && t.orientation) {\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:220:27",
      "file": "services/propertyEvaluator.ts",
      "line": 220,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return [o.x, o.y, o.z ?? 0];",
      "context": {
        "before": [
          "\r",
          "  if (normalizedPath === \"orientation\" && t.orientation) {\r",
          "    const o = interpolateProperty(t.orientation, frame, fps, layerId, duration);\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  // Opacity\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:236:50",
      "file": "services/propertyEvaluator.ts",
      "line": 236,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return [posValue.x, posValue.y, posValue.z ?? 0];",
      "context": {
        "before": [
          "    const value = interpolateProperty(customProp, frame, fps, layerId, duration);\r",
          "    if (value && typeof value === \"object\" && \"x\" in value && \"y\" in value) {\r",
          "      const posValue = value as { x: number; y: number; z?: number };\r"
        ],
        "after": [
          "    }\r",
          "    return value as PropertyValueResult;\r",
          "  }\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:281:66",
      "file": "services/propertyEvaluator.ts",
      "line": 281,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "\r",
          "  switch (mapping.feature) {\r",
          "    case \"amplitude\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"bass\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:284:69",
      "file": "services/propertyEvaluator.ts",
      "line": 284,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"bass\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"mid\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:287:68",
      "file": "services/propertyEvaluator.ts",
      "line": 287,
      "column": 68,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"mid\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"high\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.high?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:290:69",
      "file": "services/propertyEvaluator.ts",
      "line": 290,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "audioValue = audioAnalysis.frequencyBands?.high?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"high\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"spectralFlux\":\r",
          "    case \"onsets\":\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:298:66",
      "file": "services/propertyEvaluator.ts",
      "line": 298,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.beats?.includes(frameIndex) ? 1 : 0;\r",
          "      break;\r",
          "    default:\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  // Apply threshold (noise gate)\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:214:56",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 214,
      "column": 56,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "request.onsuccess = () => resolve(request.result || []);",
      "context": {
        "before": [
          "      const store = transaction.objectStore(JOBS_STORE);",
          "      const request = store.getAll();",
          ""
        ],
        "after": [
          "      request.onerror = () => reject(request.error);",
          "    });",
          "  }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:275:56",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 275,
      "column": 56,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "request.onsuccess = () => resolve(request.result || []);",
      "context": {
        "before": [
          "      const index = store.index(\"jobId\");",
          "      const request = index.getAll(IDBKeyRange.only(jobId));",
          ""
        ],
        "after": [
          "      request.onerror = () => reject(request.error);",
          "    });",
          "  }"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:808:70",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 808,
      "column": 70,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "? (this.jobs.get(this.activeJobId)?.progress.framesPerSecond ?? 0)",
      "context": {
        "before": [
          "        return sum + (j.progress.currentFrame - j.startFrame);",
          "      }, 0),",
          "      averageFps: this.activeJobId"
        ],
        "after": [
          "        : 0,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/rovingKeyframes.ts:38:22",
      "file": "services/rovingKeyframes.ts",
      "line": 38,
      "column": 22,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return [value[0] || 0, value[1] || 0, value[2] || 0];",
      "context": {
        "before": [
          "/** Extract x, y, z from either position format */",
          "function extractXYZ(value: PositionValue): [number, number, number] {",
          "  if (Array.isArray(value)) {"
        ],
        "after": [
          "  }",
          "  return [value.x || 0, value.y || 0, value.z || 0];",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/rovingKeyframes.ts:38:37",
      "file": "services/rovingKeyframes.ts",
      "line": 38,
      "column": 37,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return [value[0] || 0, value[1] || 0, value[2] || 0];",
      "context": {
        "before": [
          "/** Extract x, y, z from either position format */",
          "function extractXYZ(value: PositionValue): [number, number, number] {",
          "  if (Array.isArray(value)) {"
        ],
        "after": [
          "  }",
          "  return [value.x || 0, value.y || 0, value.z || 0];",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/rovingKeyframes.ts:38:52",
      "file": "services/rovingKeyframes.ts",
      "line": 38,
      "column": 52,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return [value[0] || 0, value[1] || 0, value[2] || 0];",
      "context": {
        "before": [
          "/** Extract x, y, z from either position format */",
          "function extractXYZ(value: PositionValue): [number, number, number] {",
          "  if (Array.isArray(value)) {"
        ],
        "after": [
          "  }",
          "  return [value.x || 0, value.y || 0, value.z || 0];",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/rovingKeyframes.ts:40:19",
      "file": "services/rovingKeyframes.ts",
      "line": 40,
      "column": 19,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return [value.x || 0, value.y || 0, value.z || 0];",
      "context": {
        "before": [
          "  if (Array.isArray(value)) {",
          "    return [value[0] || 0, value[1] || 0, value[2] || 0];",
          "  }"
        ],
        "after": [
          "}",
          "",
          "export interface RovingOptions {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/rovingKeyframes.ts:40:33",
      "file": "services/rovingKeyframes.ts",
      "line": 40,
      "column": 33,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return [value.x || 0, value.y || 0, value.z || 0];",
      "context": {
        "before": [
          "  if (Array.isArray(value)) {",
          "    return [value[0] || 0, value[1] || 0, value[2] || 0];",
          "  }"
        ],
        "after": [
          "}",
          "",
          "export interface RovingOptions {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/rovingKeyframes.ts:40:47",
      "file": "services/rovingKeyframes.ts",
      "line": 40,
      "column": 47,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return [value.x || 0, value.y || 0, value.z || 0];",
      "context": {
        "before": [
          "  if (Array.isArray(value)) {",
          "    return [value[0] || 0, value[1] || 0, value[2] || 0];",
          "  }"
        ],
        "after": [
          "}",
          "",
          "export interface RovingOptions {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/auditLog.ts:356:35",
      "file": "services/security/auditLog.ts",
      "line": 356,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const offset = query.offset ?? 0;",
      "context": {
        "before": [
          "      }",
          "",
          "      const limit = query.limit ?? 100;"
        ],
        "after": [
          "      let skipped = 0;",
          "",
          "      cursor.onsuccess = () => {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/auditLog.ts:441:45",
      "file": "services/security/auditLog.ts",
      "line": 441,
      "column": 45,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(stats.byCategory[entry.category] || 0) + 1;",
      "context": {
        "before": [
          "",
          "        // Track by category",
          "        stats.byCategory[entry.category] ="
        ],
        "after": [
          "",
          "        // Track by severity",
          "        stats.bySeverity[entry.severity] ="
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/auditLog.ts:445:45",
      "file": "services/security/auditLog.ts",
      "line": 445,
      "column": 45,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(stats.bySeverity[entry.severity] || 0) + 1;",
      "context": {
        "before": [
          "",
          "        // Track by severity",
          "        stats.bySeverity[entry.severity] ="
        ],
        "after": [
          "",
          "        // Track by tool name",
          "        if (entry.toolName) {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/auditLog.ts:450:47",
      "file": "services/security/auditLog.ts",
      "line": 450,
      "column": 47,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(stats.byToolName[entry.toolName] || 0) + 1;",
      "context": {
        "before": [
          "        // Track by tool name",
          "        if (entry.toolName) {",
          "          stats.byToolName[entry.toolName] ="
        ],
        "after": [
          "        }",
          "",
          "        // Track oldest/newest"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:230:18",
      "file": "services/security/rateLimits.ts",
      "line": 230,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxPerDay: Infinity,",
      "context": {
        "before": [
          "    return {",
          "      toolName,",
          "      callsToday: 0,"
        ],
        "after": [
          "      callsThisSession: sessionCounts[toolName] || 0,",
          "      canCall: true,",
          "      resetsAt: getTomorrowMidnightUTC(),"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:231:49",
      "file": "services/security/rateLimits.ts",
      "line": 231,
      "column": 49,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "callsThisSession: sessionCounts[toolName] || 0,",
      "context": {
        "before": [
          "      toolName,",
          "      callsToday: 0,",
          "      maxPerDay: Infinity,"
        ],
        "after": [
          "      canCall: true,",
          "      resetsAt: getTomorrowMidnightUTC(),",
          "      resetsIn: getTimeUntilReset(),"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:239:46",
      "file": "services/security/rateLimits.ts",
      "line": 239,
      "column": 46,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const callsToday = stored.counts[toolName] || 0;",
      "context": {
        "before": [
          "  }",
          "",
          "  const stored = loadStoredLimits();"
        ],
        "after": [
          "  const callsThisSession = sessionCounts[toolName] || 0;",
          "",
          "  // Check daily limit"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:240:52",
      "file": "services/security/rateLimits.ts",
      "line": 240,
      "column": 52,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const callsThisSession = sessionCounts[toolName] || 0;",
      "context": {
        "before": [
          "",
          "  const stored = loadStoredLimits();",
          "  const callsToday = stored.counts[toolName] || 0;"
        ],
        "after": [
          "",
          "  // Check daily limit",
          "  if (callsToday >= config.maxPerDay) {"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:291:54",
      "file": "services/security/rateLimits.ts",
      "line": 291,
      "column": 54,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "stored.counts[toolName] = (stored.counts[toolName] || 0) + 1;",
      "context": {
        "before": [
          "export async function recordToolCall(toolName: string): Promise<void> {",
          "  // Increment daily count",
          "  const stored = loadStoredLimits();"
        ],
        "after": [
          "  saveStoredLimits(stored);",
          "",
          "  // Increment session count"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:295:54",
      "file": "services/security/rateLimits.ts",
      "line": 295,
      "column": 54,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "sessionCounts[toolName] = (sessionCounts[toolName] || 0) + 1;",
      "context": {
        "before": [
          "  saveStoredLimits(stored);",
          "",
          "  // Increment session count"
        ],
        "after": [
          "  saveSessionCounts();",
          "",
          "  const config = customLimits[toolName] || DEFAULT_LIMITS[toolName];"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:318:44",
      "file": "services/security/rateLimits.ts",
      "line": 318,
      "column": 44,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const oldCount = sessionCounts[toolName] || 0;",
      "context": {
        "before": [
          " * Requires user action - logs the reset.",
          " */",
          "export async function resetSessionLimit(toolName: string): Promise<void> {"
        ],
        "after": [
          "  sessionCounts[toolName] = 0;",
          "  saveSessionCounts();",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:392:9",
      "file": "services/security/rateLimits.ts",
      "line": 392,
      "column": 9,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": ": Infinity,",
      "context": {
        "before": [
          "    remainingToday: Math.max(0, status.maxPerDay - status.callsToday),",
          "    remainingSession: status.maxPerSession",
          "      ? Math.max(0, status.maxPerSession - status.callsThisSession)"
        ],
        "after": [
          "  };",
          "}",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/security/urlValidator.ts:306:42",
      "file": "services/security/urlValidator.ts",
      "line": 306,
      "column": 42,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const matches = text.match(urlPattern) || [];",
      "context": {
        "before": [
          "  // URL regex pattern",
          "  const urlPattern =",
          "    /https?:\\/\\/[^\\s<>\"{}|\\\\^`[\\]]+|data:[^\\s<>\"{}|\\\\^`[\\]]+/gi;"
        ],
        "after": [
          "",
          "  return matches.map((url) => validateURL(url));",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/segmentToMask.ts:90:33",
      "file": "services/segmentToMask.ts",
      "line": 90,
      "column": 33,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const width = data[0]?.length ?? 0;",
      "context": {
        "before": [
          "    : imageDataToArray(mask, threshold);",
          "",
          "  const height = data.length;"
        ],
        "after": [
          "",
          "  if (height === 0 || width === 0) return [];",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/shape/pathModifiers.ts:264:14",
      "file": "services/shape/pathModifiers.ts",
      "line": 264,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minX = Infinity,",
      "context": {
        "before": [
          "  width: number;",
          "  height: number;",
          "} {"
        ],
        "after": [
          "    minY = Infinity;",
          "  let maxX = -Infinity,",
          "    maxY = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/shape/pathModifiers.ts:265:12",
      "file": "services/shape/pathModifiers.ts",
      "line": 265,
      "column": 12,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "minY = Infinity;",
      "context": {
        "before": [
          "  height: number;",
          "} {",
          "  let minX = Infinity,"
        ],
        "after": [
          "  let maxX = -Infinity,",
          "    maxY = -Infinity;",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/shape/pathModifiers.ts:266:15",
      "file": "services/shape/pathModifiers.ts",
      "line": 266,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxX = -Infinity,",
      "context": {
        "before": [
          "} {",
          "  let minX = Infinity,",
          "    minY = Infinity;"
        ],
        "after": [
          "    maxY = -Infinity;",
          "",
          "  for (const v of path.vertices) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/shape/pathModifiers.ts:267:13",
      "file": "services/shape/pathModifiers.ts",
      "line": 267,
      "column": 13,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxY = -Infinity;",
      "context": {
        "before": [
          "  let minX = Infinity,",
          "    minY = Infinity;",
          "  let maxX = -Infinity,"
        ],
        "after": [
          "",
          "  for (const v of path.vertices) {",
          "    minX = Math.min(minX, v.point.x);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/shape/pathModifiers.ts:703:14",
      "file": "services/shape/pathModifiers.ts",
      "line": 703,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minY = Infinity,",
      "context": {
        "before": [
          "  }",
          "",
          "  // Find the bounding box to determine twist falloff"
        ],
        "after": [
          "    maxY = -Infinity;",
          "  for (const v of path.vertices) {",
          "    minY = Math.min(minY, v.point.y);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/shape/pathModifiers.ts:704:13",
      "file": "services/shape/pathModifiers.ts",
      "line": 704,
      "column": 13,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxY = -Infinity;",
      "context": {
        "before": [
          "",
          "  // Find the bounding box to determine twist falloff",
          "  let minY = Infinity,"
        ],
        "after": [
          "  for (const v of path.vertices) {",
          "    minY = Math.min(minY, v.point.y);",
          "    maxY = Math.max(maxY, v.point.y);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:278:43",
      "file": "services/spriteSheet.ts",
      "line": 278,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "frameWidth: frames[0]?.source.width ?? 0,",
      "context": {
        "before": [
          "      rows,",
          "      frames,",
          "      totalFrames: frames.length,"
        ],
        "after": [
          "      frameHeight: frames[0]?.source.height ?? 0,",
          "      imageWidth,",
          "      imageHeight,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:279:45",
      "file": "services/spriteSheet.ts",
      "line": 279,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "frameHeight: frames[0]?.source.height ?? 0,",
      "context": {
        "before": [
          "      frames,",
          "      totalFrames: frames.length,",
          "      frameWidth: frames[0]?.source.width ?? 0,"
        ],
        "after": [
          "      imageWidth,",
          "      imageHeight,",
          "      animations: new Map(),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:267:42",
      "file": "services/svgExport.ts",
      "line": 267,
      "column": 42,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "transforms.push(`translate(${pos.x || 0},${pos.y || 0})`);",
      "context": {
        "before": [
          "",
          "    const pos = t.position?.value as { x?: number; y?: number } | undefined;",
          "    if (pos && (pos.x || pos.y)) {"
        ],
        "after": [
          "    }",
          "",
          "    const rot = t.rotation?.value as number | undefined;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:267:56",
      "file": "services/svgExport.ts",
      "line": 267,
      "column": 56,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "transforms.push(`translate(${pos.x || 0},${pos.y || 0})`);",
      "context": {
        "before": [
          "",
          "    const pos = t.position?.value as { x?: number; y?: number } | undefined;",
          "    if (pos && (pos.x || pos.y)) {"
        ],
        "after": [
          "    }",
          "",
          "    const rot = t.rotation?.value as number | undefined;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:287:16",
      "file": "services/svgExport.ts",
      "line": 287,
      "column": 16,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minX = Infinity,",
      "context": {
        "before": [
          "",
          "  private calculateBounds(points: ControlPoint[]) {",
          "    if (points.length === 0) return { minX: 0, minY: 0, maxX: 0, maxY: 0 };"
        ],
        "after": [
          "      minY = Infinity,",
          "      maxX = -Infinity,",
          "      maxY = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:288:14",
      "file": "services/svgExport.ts",
      "line": 288,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "minY = Infinity,",
      "context": {
        "before": [
          "  private calculateBounds(points: ControlPoint[]) {",
          "    if (points.length === 0) return { minX: 0, minY: 0, maxX: 0, maxY: 0 };",
          "    let minX = Infinity,"
        ],
        "after": [
          "      maxX = -Infinity,",
          "      maxY = -Infinity;",
          "    for (const p of points) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:289:15",
      "file": "services/svgExport.ts",
      "line": 289,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxX = -Infinity,",
      "context": {
        "before": [
          "    if (points.length === 0) return { minX: 0, minY: 0, maxX: 0, maxY: 0 };",
          "    let minX = Infinity,",
          "      minY = Infinity,"
        ],
        "after": [
          "      maxY = -Infinity;",
          "    for (const p of points) {",
          "      minX = Math.min(minX, p.x);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:290:15",
      "file": "services/svgExport.ts",
      "line": 290,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxY = -Infinity;",
      "context": {
        "before": [
          "    let minX = Infinity,",
          "      minY = Infinity,",
          "      maxX = -Infinity,"
        ],
        "after": [
          "    for (const p of points) {",
          "      minX = Math.min(minX, p.x);",
          "      minY = Math.min(minY, p.y);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:355:16",
      "file": "services/svgExtrusion.ts",
      "line": 355,
      "column": 16,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minX = Infinity,",
      "context": {
        "before": [
          "    const id = `svg_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;",
          "    const paths: ParsedSVGPath[] = [];",
          ""
        ],
        "after": [
          "      minY = Infinity;",
          "    let maxX = -Infinity,",
          "      maxY = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:356:14",
      "file": "services/svgExtrusion.ts",
      "line": 356,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "minY = Infinity;",
      "context": {
        "before": [
          "    const paths: ParsedSVGPath[] = [];",
          "",
          "    let minX = Infinity,"
        ],
        "after": [
          "    let maxX = -Infinity,",
          "      maxY = -Infinity;",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:357:17",
      "file": "services/svgExtrusion.ts",
      "line": 357,
      "column": 17,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxX = -Infinity,",
      "context": {
        "before": [
          "",
          "    let minX = Infinity,",
          "      minY = Infinity;"
        ],
        "after": [
          "      maxY = -Infinity;",
          "",
          "    // Parse each path"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:358:15",
      "file": "services/svgExtrusion.ts",
      "line": 358,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxY = -Infinity;",
      "context": {
        "before": [
          "    let minX = Infinity,",
          "      minY = Infinity;",
          "    let maxX = -Infinity,"
        ],
        "after": [
          "",
          "    // Parse each path",
          "    data.paths.forEach((shapePath, index) => {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:377:66",
      "file": "services/svgExtrusion.ts",
      "line": 377,
      "column": 66,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const strokeWidth = shapePath.userData?.style?.strokeWidth ?? 0;",
      "context": {
        "before": [
          "",
          "      // Get stroke",
          "      const strokeColor = shapePath.userData?.style?.stroke;"
        ],
        "after": [
          "",
          "      // Calculate bounds for this path",
          "      const pathBounds = this.calculatePathBounds(shapes);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:439:16",
      "file": "services/svgExtrusion.ts",
      "line": 439,
      "column": 16,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minX = Infinity,",
      "context": {
        "before": [
          "   * Calculate bounds for a set of shapes",
          "   */",
          "  private calculatePathBounds(shapes: THREE.Shape[]): ParsedSVGPath[\"bounds\"] {"
        ],
        "after": [
          "      minY = Infinity;",
          "    let maxX = -Infinity,",
          "      maxY = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:440:14",
      "file": "services/svgExtrusion.ts",
      "line": 440,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "minY = Infinity;",
      "context": {
        "before": [
          "   */",
          "  private calculatePathBounds(shapes: THREE.Shape[]): ParsedSVGPath[\"bounds\"] {",
          "    let minX = Infinity,"
        ],
        "after": [
          "    let maxX = -Infinity,",
          "      maxY = -Infinity;",
          ""
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:441:17",
      "file": "services/svgExtrusion.ts",
      "line": 441,
      "column": 17,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxX = -Infinity,",
      "context": {
        "before": [
          "  private calculatePathBounds(shapes: THREE.Shape[]): ParsedSVGPath[\"bounds\"] {",
          "    let minX = Infinity,",
          "      minY = Infinity;"
        ],
        "after": [
          "      maxY = -Infinity;",
          "",
          "    for (const shape of shapes) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:442:15",
      "file": "services/svgExtrusion.ts",
      "line": 442,
      "column": 15,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxY = -Infinity;",
      "context": {
        "before": [
          "    let minX = Infinity,",
          "      minY = Infinity;",
          "    let maxX = -Infinity,"
        ],
        "after": [
          "",
          "    for (const shape of shapes) {",
          "      const points = shape.getPoints(50);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:506:35",
      "file": "services/svgExtrusion.ts",
      "line": 506,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "bevelSize: config.bevelSize ?? 0.5,",
      "context": {
        "before": [
          "      depth: config.depth ?? 10,",
          "      bevelEnabled: config.bevelEnabled ?? false,",
          "      bevelThickness: config.bevelThickness ?? 1,"
        ],
        "after": [
          "      bevelOffset: config.bevelOffset ?? 0,",
          "      bevelSegments: config.bevelSegments ?? 3,",
          "      curveSegments: config.curveSegments ?? 12,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:507:39",
      "file": "services/svgExtrusion.ts",
      "line": 507,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "bevelOffset: config.bevelOffset ?? 0,",
      "context": {
        "before": [
          "      bevelEnabled: config.bevelEnabled ?? false,",
          "      bevelThickness: config.bevelThickness ?? 1,",
          "      bevelSize: config.bevelSize ?? 0.5,"
        ],
        "after": [
          "      bevelSegments: config.bevelSegments ?? 3,",
          "      curveSegments: config.curveSegments ?? 12,",
          "      steps: config.steps ?? 1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:756:39",
      "file": "services/svgExtrusion.ts",
      "line": 756,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "else totalIndices += pos?.count ?? 0;",
      "context": {
        "before": [
          "",
          "      const idx = geom.getIndex();",
          "      if (idx) totalIndices += idx.count;"
        ],
        "after": [
          "",
          "      if (!geom.getAttribute(\"normal\")) hasNormals = false;",
          "      if (!geom.getAttribute(\"uv\")) hasUVs = false;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:868:39",
      "file": "services/svgExtrusion.ts",
      "line": 868,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "metalness: config.metalness ?? 0,",
      "context": {
        "before": [
          "      case \"physical\":",
          "        return new THREE.MeshPhysicalMaterial({",
          "          ...baseParams,"
        ],
        "after": [
          "          roughness: config.roughness ?? 0.5,",
          "          emissive: new THREE.Color(config.emissive ?? \"#000000\"),",
          "          emissiveIntensity: config.emissiveIntensity ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:869:39",
      "file": "services/svgExtrusion.ts",
      "line": 869,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "roughness: config.roughness ?? 0.5,",
      "context": {
        "before": [
          "        return new THREE.MeshPhysicalMaterial({",
          "          ...baseParams,",
          "          metalness: config.metalness ?? 0,"
        ],
        "after": [
          "          emissive: new THREE.Color(config.emissive ?? \"#000000\"),",
          "          emissiveIntensity: config.emissiveIntensity ?? 0,",
          "        });"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:871:55",
      "file": "services/svgExtrusion.ts",
      "line": 871,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "emissiveIntensity: config.emissiveIntensity ?? 0,",
      "context": {
        "before": [
          "          metalness: config.metalness ?? 0,",
          "          roughness: config.roughness ?? 0.5,",
          "          emissive: new THREE.Color(config.emissive ?? \"#000000\"),"
        ],
        "after": [
          "        });",
          "      default:",
          "        return new THREE.MeshStandardMaterial({"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:876:39",
      "file": "services/svgExtrusion.ts",
      "line": 876,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "metalness: config.metalness ?? 0,",
      "context": {
        "before": [
          "      default:",
          "        return new THREE.MeshStandardMaterial({",
          "          ...baseParams,"
        ],
        "after": [
          "          roughness: config.roughness ?? 0.5,",
          "          emissive: new THREE.Color(config.emissive ?? \"#000000\"),",
          "          emissiveIntensity: config.emissiveIntensity ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:877:39",
      "file": "services/svgExtrusion.ts",
      "line": 877,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "roughness: config.roughness ?? 0.5,",
      "context": {
        "before": [
          "        return new THREE.MeshStandardMaterial({",
          "          ...baseParams,",
          "          metalness: config.metalness ?? 0,"
        ],
        "after": [
          "          emissive: new THREE.Color(config.emissive ?? \"#000000\"),",
          "          emissiveIntensity: config.emissiveIntensity ?? 0,",
          "        });"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:879:55",
      "file": "services/svgExtrusion.ts",
      "line": 879,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "emissiveIntensity: config.emissiveIntensity ?? 0,",
      "context": {
        "before": [
          "          metalness: config.metalness ?? 0,",
          "          roughness: config.roughness ?? 0.5,",
          "          emissive: new THREE.Color(config.emissive ?? \"#000000\"),"
        ],
        "after": [
          "        });",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:1003:34",
      "file": "services/svgExtrusion.ts",
      "line": 1003,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "config.simplifyTolerance ?? 0.1,",
      "context": {
        "before": [
          "    if (config.simplify) {",
          "      geometry = this.simplifyGeometry(",
          "        geometry,"
        ],
        "after": [
          "      );",
          "    }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:778:35",
      "file": "services/templateBuilder.ts",
      "line": 778,
      "column": 35,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "items: groups.get(group.id) || [],",
      "context": {
        "before": [
          "    ungrouped,",
          "    groups: config.groups.map((group) => ({",
          "      group,"
        ],
        "after": [
          "    })),",
          "  };",
          "}"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textMeasurement.ts:84:58",
      "file": "services/textMeasurement.ts",
      "line": 84,
      "column": 58,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "actualBoundingBoxLeft: metrics.actualBoundingBoxLeft ?? 0,",
      "context": {
        "before": [
          "    actualBoundingBoxAscent: metrics.actualBoundingBoxAscent ?? fontSize * 0.8,",
          "    actualBoundingBoxDescent:",
          "      metrics.actualBoundingBoxDescent ?? fontSize * 0.2,"
        ],
        "after": [
          "    actualBoundingBoxRight: metrics.actualBoundingBoxRight ?? metrics.width,",
          "    fontBoundingBoxAscent: metrics.fontBoundingBoxAscent ?? fontSize * 0.8,",
          "    fontBoundingBoxDescent: metrics.fontBoundingBoxDescent ?? fontSize * 0.2,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textMeasurement.ts:168:44",
      "file": "services/textMeasurement.ts",
      "line": 168,
      "column": 44,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const letterSpacing = data.letterSpacing || 0;",
      "context": {
        "before": [
          "  const fontWeight = data.fontWeight || \"normal\";",
          "  const fontStyle = data.fontStyle || \"normal\";",
          "  const lineHeight = data.lineHeight || 1.2;"
        ],
        "after": [
          "  const textAlign = data.textAlign || \"left\";",
          "",
          "  const rect = measureMultilineText("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:205:27",
      "file": "services/textOnPath.ts",
      "line": 205,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const z0 = p0.depth ?? 0;",
      "context": {
        "before": [
          "      const p0 = controlPoints[i];",
          "      const p1 = controlPoints[i + 1];",
          ""
        ],
        "after": [
          "      const z1 = p1.depth ?? 0;",
          "",
          "      const bezier = new THREE.CubicBezierCurve3("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:206:27",
      "file": "services/textOnPath.ts",
      "line": 206,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const z1 = p1.depth ?? 0;",
      "context": {
        "before": [
          "      const p1 = controlPoints[i + 1];",
          "",
          "      const z0 = p0.depth ?? 0;"
        ],
        "after": [
          "",
          "      const bezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(p0.x, -p0.y, z0),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:211:35",
      "file": "services/textOnPath.ts",
      "line": 211,
      "column": 35,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "p0.x + (p0.handleOut?.x ?? 0),",
      "context": {
        "before": [
          "      const bezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p0.y + (p0.handleOut?.y ?? 0)),",
          "          z0,",
          "        ),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:212:37",
      "file": "services/textOnPath.ts",
      "line": 212,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "-(p0.y + (p0.handleOut?.y ?? 0)),",
      "context": {
        "before": [
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3(",
          "          p0.x + (p0.handleOut?.x ?? 0),"
        ],
        "after": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:216:34",
      "file": "services/textOnPath.ts",
      "line": 216,
      "column": 34,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "p1.x + (p1.handleIn?.x ?? 0),",
      "context": {
        "before": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p1.y + (p1.handleIn?.y ?? 0)),",
          "          z1,",
          "        ),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:217:36",
      "file": "services/textOnPath.ts",
      "line": 217,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "-(p1.y + (p1.handleIn?.y ?? 0)),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          p1.x + (p1.handleIn?.x ?? 0),"
        ],
        "after": [
          "          z1,",
          "        ),",
          "        new THREE.Vector3(p1.x, -p1.y, z1),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:231:37",
      "file": "services/textOnPath.ts",
      "line": 231,
      "column": 37,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const zLast = lastPoint.depth ?? 0;",
      "context": {
        "before": [
          "      const lastPoint = controlPoints[controlPoints.length - 1];",
          "      const firstPoint = controlPoints[0];",
          ""
        ],
        "after": [
          "      const zFirst = firstPoint.depth ?? 0;",
          "",
          "      const closingBezier = new THREE.CubicBezierCurve3("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:232:39",
      "file": "services/textOnPath.ts",
      "line": 232,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const zFirst = firstPoint.depth ?? 0;",
      "context": {
        "before": [
          "      const firstPoint = controlPoints[0];",
          "",
          "      const zLast = lastPoint.depth ?? 0;"
        ],
        "after": [
          "",
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:237:49",
      "file": "services/textOnPath.ts",
      "line": 237,
      "column": 49,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "lastPoint.x + (lastPoint.handleOut?.x ?? 0),",
      "context": {
        "before": [
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(lastPoint.y + (lastPoint.handleOut?.y ?? 0)),",
          "          zLast,",
          "        ),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:238:51",
      "file": "services/textOnPath.ts",
      "line": 238,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "-(lastPoint.y + (lastPoint.handleOut?.y ?? 0)),",
      "context": {
        "before": [
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3(",
          "          lastPoint.x + (lastPoint.handleOut?.x ?? 0),"
        ],
        "after": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:242:50",
      "file": "services/textOnPath.ts",
      "line": 242,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "firstPoint.x + (firstPoint.handleIn?.x ?? 0),",
      "context": {
        "before": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(firstPoint.y + (firstPoint.handleIn?.y ?? 0)),",
          "          zFirst,",
          "        ),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:243:52",
      "file": "services/textOnPath.ts",
      "line": 243,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "-(firstPoint.y + (firstPoint.handleIn?.y ?? 0)),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          firstPoint.x + (firstPoint.handleIn?.x ?? 0),"
        ],
        "after": [
          "          zFirst,",
          "        ),",
          "        new THREE.Vector3(firstPoint.x, -firstPoint.y, zFirst),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:268:45",
      "file": "services/textOnPath.ts",
      "line": 268,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return this.arcLengthTable?.totalLength ?? 0;",
      "context": {
        "before": [
          "   * Get total path length",
          "   */",
          "  getTotalLength(): number {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:274:80",
      "file": "services/textShaper.ts",
      "line": 274,
      "column": 80,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "lineGap: (font.tables as { hhea?: { lineGap?: number } })?.hhea?.lineGap ?? 0,",
      "context": {
        "before": [
          "      ascender: font.ascender,",
          "      descender: font.descender,",
          "      // Access internal OpenType tables - not fully typed in opentype.js definitions"
        ],
        "after": [
          "      capHeight: (font.tables as { os2?: { sCapHeight?: number } })?.os2?.sCapHeight ?? font.ascender * 0.7,",
          "      xHeight: (font.tables as { os2?: { sxHeight?: number } })?.os2?.sxHeight ?? font.ascender * 0.5,",
          "      hasKerning:"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:342:48",
      "file": "services/textShaper.ts",
      "line": 342,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const advanceWidth = (glyph.advanceWidth ?? 0) * scale;",
      "context": {
        "before": [
          "      }",
          "",
          "      // Get glyph metrics"
        ],
        "after": [
          "      const bbox = glyph.getBoundingBox();",
          "",
          "      // Apply word spacing"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:448:48",
      "file": "services/textShaper.ts",
      "line": 448,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const advanceWidth = (glyph.advanceWidth ?? 0) * scale;",
      "context": {
        "before": [
          "        continue;",
          "      }",
          ""
        ],
        "after": [
          "      const bbox = glyph.getBoundingBox();",
          "",
          "      let finalAdvance = advanceWidth;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:519:47",
      "file": "services/textShaper.ts",
      "line": 519,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "letterSpacing: options?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "      const shaped = this.shapeSync(text, fontFamily, {",
          "        fontSize,",
          "        kern: options?.kern ?? true,"
        ],
        "after": [
          "      });",
          "      return shaped.glyphs.map((g) => g.xAdvance);",
          "    } catch {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:541:47",
      "file": "services/textShaper.ts",
      "line": 541,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "letterSpacing: options?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "      const shaped = this.shapeSync(text, fontFamily, {",
          "        fontSize,",
          "        kern: options?.kern ?? true,"
        ],
        "after": [
          "      });",
          "      return shaped.glyphs.map((g) => g.x);",
          "    } catch {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:256:27",
      "file": "services/textToVector.ts",
      "line": 256,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(glyph.advanceWidth ?? 0) * (opts.fontSize / font.unitsPerEm);",
      "context": {
        "before": [
          "",
          "    // Calculate advance width",
          "    const advanceWidth ="
        ],
        "after": [
          "",
          "    groups.push({",
          "      character: char,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:401:67",
      "file": "services/textToVector.ts",
      "line": 401,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;",
      "context": {
        "before": [
          "  const layers: Partial<Layer>[] = [];",
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          ""
        ],
        "after": [
          "  const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
          "",
          "  if (groupByCharacter) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:402:67",
      "file": "services/textToVector.ts",
      "line": 402,
      "column": 67,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
      "context": {
        "before": [
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          "",
          "  const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;"
        ],
        "after": [
          "",
          "  if (groupByCharacter) {",
          "    for (const charGroup of result.characters) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:575:19",
      "file": "services/textToVector.ts",
      "line": 575,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x: options?.x ?? 0,",
      "context": {
        "before": [
          "  options?: TextToVectorFromUrlOptions,",
          "): Promise<TextToVectorResult> {",
          "  const opts = {"
        ],
        "after": [
          "    y: options?.y ?? 0,",
          "    kerning: options?.kerning ?? true,",
          "    letterSpacing: options?.letterSpacing ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:576:19",
      "file": "services/textToVector.ts",
      "line": 576,
      "column": 19,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y: options?.y ?? 0,",
      "context": {
        "before": [
          "): Promise<TextToVectorResult> {",
          "  const opts = {",
          "    x: options?.x ?? 0,"
        ],
        "after": [
          "    kerning: options?.kerning ?? true,",
          "    letterSpacing: options?.letterSpacing ?? 0,",
          "  };"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:578:43",
      "file": "services/textToVector.ts",
      "line": 578,
      "column": 43,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "letterSpacing: options?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "    x: options?.x ?? 0,",
          "    y: options?.y ?? 0,",
          "    kerning: options?.kerning ?? true,"
        ],
        "after": [
          "  };",
          "",
          "  // Load font from URL"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:623:27",
      "file": "services/textToVector.ts",
      "line": 623,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "(glyph.advanceWidth ?? 0) * (fontSize / font.unitsPerEm);",
      "context": {
        "before": [
          "",
          "    // Calculate advance width",
          "    const advanceWidth ="
        ],
        "after": [
          "",
          "    characters.push({",
          "      character: char,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:143:60",
      "file": "services/timelineSnap.ts",
      "line": 143,
      "column": 60,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStart = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "    for (const layer of context.layers) {",
          "      if (layer.id === context.selectedLayerId) continue;",
          ""
        ],
        "after": [
          "      const layerEnd = layer.endFrame ?? layer.outPoint ?? 80;",
          "      const inDistance = Math.abs(frame - layerStart);",
          "      const outDistance = Math.abs(frame - layerEnd);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:250:32",
      "file": "services/timelineSnap.ts",
      "line": 250,
      "column": 32,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "return audioAnalysis?.onsets ?? [];",
      "context": {
        "before": [
          " * Get all beat frames from audio analysis",
          " */",
          "export function getBeatFrames(audioAnalysis: AudioAnalysis | null): number[] {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:257:28",
      "file": "services/timelineSnap.ts",
      "line": 257,
      "column": 28,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "return peakData?.indices ?? [];",
      "context": {
        "before": [
          " * Get all peak frames from peak data",
          " */",
          "export function getPeakFrames(peakData: PeakData | null): number[] {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:495:18",
      "file": "services/trackPointService.ts",
      "line": 495,
      "column": 18,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minFrame = Infinity;",
      "context": {
        "before": [
          "} {",
          "  let totalPoints = 0;",
          "  let tracksWithPositions = 0;"
        ],
        "after": [
          "  let maxFrame = -Infinity;",
          "",
          "  for (const track of state.tracks.values()) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:496:19",
      "file": "services/trackPointService.ts",
      "line": 496,
      "column": 19,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let maxFrame = -Infinity;",
      "context": {
        "before": [
          "  let totalPoints = 0;",
          "  let tracksWithPositions = 0;",
          "  let minFrame = Infinity;"
        ],
        "after": [
          "",
          "  for (const track of state.tracks.values()) {",
          "    const pointCount = track.positions.size;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:549:14",
      "file": "services/vectorize.ts",
      "line": 549,
      "column": 14,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let minX = Infinity,",
      "context": {
        "before": [
          "  if (controlPoints.length === 0) return [];",
          "",
          "  // Calculate bounds"
        ],
        "after": [
          "    minY = Infinity,",
          "    maxX = -Infinity,",
          "    maxY = -Infinity;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:550:12",
      "file": "services/vectorize.ts",
      "line": 550,
      "column": 12,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "minY = Infinity,",
      "context": {
        "before": [
          "",
          "  // Calculate bounds",
          "  let minX = Infinity,"
        ],
        "after": [
          "    maxX = -Infinity,",
          "    maxY = -Infinity;",
          "  for (const cp of controlPoints) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:551:13",
      "file": "services/vectorize.ts",
      "line": 551,
      "column": 13,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxX = -Infinity,",
      "context": {
        "before": [
          "  // Calculate bounds",
          "  let minX = Infinity,",
          "    minY = Infinity,"
        ],
        "after": [
          "    maxY = -Infinity;",
          "  for (const cp of controlPoints) {",
          "    minX = Math.min(minX, cp.x);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:552:13",
      "file": "services/vectorize.ts",
      "line": 552,
      "column": 13,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "maxY = -Infinity;",
      "context": {
        "before": [
          "  let minX = Infinity,",
          "    minY = Infinity,",
          "    maxX = -Infinity,"
        ],
        "after": [
          "  for (const cp of controlPoints) {",
          "    minX = Math.min(minX, cp.x);",
          "    minY = Math.min(minY, cp.y);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "services/vectorLOD.ts:201:51",
      "file": "services/vectorLOD.ts",
      "line": 201,
      "column": 51,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "let bestDiff = Math.abs((levels[0].complexity ?? 0) - targetQuality);",
      "context": {
        "before": [
          "",
          "    // Find level closest to target quality",
          "    let bestLevel = levels[0];"
        ],
        "after": [
          "",
          "    for (const level of levels) {",
          "      const diff = Math.abs((level.complexity ?? 0) - targetQuality);"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/vectorLOD.ts:204:47",
      "file": "services/vectorLOD.ts",
      "line": 204,
      "column": 47,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const diff = Math.abs((level.complexity ?? 0) - targetQuality);",
      "context": {
        "before": [
          "    let bestDiff = Math.abs((levels[0].complexity ?? 0) - targetQuality);",
          "",
          "    for (const level of levels) {"
        ],
        "after": [
          "      if (diff < bestDiff) {",
          "        bestDiff = diff;",
          "        bestLevel = level;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:422:42",
      "file": "services/videoDecoder.ts",
      "line": 422,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "width: this.videoInfo?.width ?? 0,",
      "context": {
        "before": [
          "          resolve({",
          "            frameNumber,",
          "            timestamp,"
        ],
        "after": [
          "            height: this.videoInfo?.height ?? 0,",
          "            bitmap,",
          "          });"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:423:44",
      "file": "services/videoDecoder.ts",
      "line": 423,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "height: this.videoInfo?.height ?? 0,",
      "context": {
        "before": [
          "            frameNumber,",
          "            timestamp,",
          "            width: this.videoInfo?.width ?? 0,"
        ],
        "after": [
          "            bitmap,",
          "          });",
          "        } catch (error) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:89:40",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 89,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "temperature: config?.temperature ?? 0.7,",
      "context": {
        "before": [
          "      apiEndpoint: config?.apiEndpoint,",
          "      apiKey: config?.apiKey,",
          "      maxTokens: config?.maxTokens ?? 2048,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:339:42",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 339,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const depth = depthMap[pixelIndex] ?? 0.5;",
      "context": {
        "before": [
          "",
          "      // Sample depth at this position",
          "      const pixelIndex = Math.floor(y) * width + Math.floor(x);"
        ],
        "after": [
          "",
          "      points.push(this.createControlPoint(`dp${i}`, x, y, depth));",
          "    }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:550:41",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 550,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "confidence: parsed.confidence ?? 0.8,",
      "context": {
        "before": [
          "        const parsed = JSON.parse(jsonMatch[0]);",
          "        return {",
          "          description: parsed.description ?? \"AI-generated motion suggestion\","
        ],
        "after": [
          "          cameraIntents: parsed.cameraIntents ?? [],",
          "          splineIntents: parsed.splineIntents ?? [],",
          "          particleIntents: parsed.particleIntents ?? [],"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:551:47",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 551,
      "column": 47,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "cameraIntents: parsed.cameraIntents ?? [],",
      "context": {
        "before": [
          "        return {",
          "          description: parsed.description ?? \"AI-generated motion suggestion\",",
          "          confidence: parsed.confidence ?? 0.8,"
        ],
        "after": [
          "          splineIntents: parsed.splineIntents ?? [],",
          "          particleIntents: parsed.particleIntents ?? [],",
          "          layerIntents: parsed.layerIntents ?? [],"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:552:47",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 552,
      "column": 47,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "splineIntents: parsed.splineIntents ?? [],",
      "context": {
        "before": [
          "          description: parsed.description ?? \"AI-generated motion suggestion\",",
          "          confidence: parsed.confidence ?? 0.8,",
          "          cameraIntents: parsed.cameraIntents ?? [],"
        ],
        "after": [
          "          particleIntents: parsed.particleIntents ?? [],",
          "          layerIntents: parsed.layerIntents ?? [],",
          "          rawResponse: content,"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:553:51",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 553,
      "column": 51,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "particleIntents: parsed.particleIntents ?? [],",
      "context": {
        "before": [
          "          confidence: parsed.confidence ?? 0.8,",
          "          cameraIntents: parsed.cameraIntents ?? [],",
          "          splineIntents: parsed.splineIntents ?? [],"
        ],
        "after": [
          "          layerIntents: parsed.layerIntents ?? [],",
          "          rawResponse: content,",
          "        };"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:554:45",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 554,
      "column": 45,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "layerIntents: parsed.layerIntents ?? [],",
      "context": {
        "before": [
          "          cameraIntents: parsed.cameraIntents ?? [],",
          "          splineIntents: parsed.splineIntents ?? [],",
          "          particleIntents: parsed.particleIntents ?? [],"
        ],
        "after": [
          "          rawResponse: content,",
          "        };",
          "      }"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:253:32",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 253,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intent.noiseAmount ?? 0.5,",
      "context": {
        "before": [
          "            cameraLayerId,",
          "            currentPosition,",
          "            duration,"
        ],
        "after": [
          "          ),",
          "        );",
          "        break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:310:24",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 310,
      "column": 24,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depth: p.depth ?? 0,",
      "context": {
        "before": [
          "        id: p.id ?? `sp_${i}`,",
          "        x: p.x,",
          "        y: p.y,"
        ],
        "after": [
          "        handleIn: this.generateHandle(",
          "          intent.suggestedPoints,",
          "          i,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:444:26",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 444,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intent.phase ?? 0,",
      "context": {
        "before": [
          "            amplitude * 50,",
          "            duration,",
          "            frequency,"
        ],
        "after": [
          "          ),",
          "        );",
          "        break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:458:26",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 458,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intent.phase ?? 0,",
      "context": {
        "before": [
          "            amplitude * 30,",
          "            duration,",
          "            frequency,"
        ],
        "after": [
          "          ),",
          "        );",
          "        break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:472:26",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 472,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intent.phase ?? 0,",
      "context": {
        "before": [
          "            amplitude * 40,",
          "            duration,",
          "            frequency,"
        ],
        "after": [
          "          ),",
          "        );",
          "        break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:486:26",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 486,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intent.phase ?? 0,",
      "context": {
        "before": [
          "            100 + amplitude * 10,",
          "            duration,",
          "            frequency,"
        ],
        "after": [
          "          ),",
          "          this.createOscillatingKeyframes(",
          "            layer.id,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:495:26",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 495,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intent.phase ?? 0,",
      "context": {
        "before": [
          "            100 + amplitude * 10,",
          "            duration,",
          "            frequency,"
        ],
        "after": [
          "          ),",
          "        );",
          "        break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentTranslator.ts:509:26",
      "file": "services/visionAuthoring/MotionIntentTranslator.ts",
      "line": 509,
      "column": 26,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "intent.phase ?? 0,",
      "context": {
        "before": [
          "            100 - amplitude * 30,",
          "            duration,",
          "            frequency * 2,"
        ],
        "after": [
          "          ),",
          "        );",
          "        break;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1217:32",
      "file": "services/webgpuRenderer.ts",
      "line": 1217,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "styleMap[params.style] ?? 0,",
      "context": {
        "before": [
          "      this.warpPipeline!,",
          "      this.warpBindGroupLayout!,",
          "      ["
        ],
        "after": [
          "        params.bend,",
          "        params.hDistort ?? 0,",
          "        params.vDistort ?? 0,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1219:25",
      "file": "services/webgpuRenderer.ts",
      "line": 1219,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "params.hDistort ?? 0,",
      "context": {
        "before": [
          "      [",
          "        styleMap[params.style] ?? 0,",
          "        params.bend,"
        ],
        "after": [
          "        params.vDistort ?? 0,",
          "      ],",
          "    );"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1220:25",
      "file": "services/webgpuRenderer.ts",
      "line": 1220,
      "column": 25,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "params.vDistort ?? 0,",
      "context": {
        "before": [
          "        styleMap[params.style] ?? 0,",
          "        params.bend,",
          "        params.hDistort ?? 0,"
        ],
        "after": [
          "      ],",
          "    );",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1252:24",
      "file": "services/webgpuRenderer.ts",
      "line": 1252,
      "column": 24,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "params.threshold ?? 0.5,",
      "context": {
        "before": [
          "    const paramsData = new Float32Array([",
          "      params.radius,",
          "      params.intensity,"
        ],
        "after": [
          "      0, // padding",
          "      params.color?.r ?? 1,",
          "      params.color?.g ?? 1,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:175:25",
      "file": "services/workerPool.ts",
      "line": 175,
      "column": 25,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let bestTaskCount = Infinity;",
      "context": {
        "before": [
          "  private getAvailableWorker(): WorkerState | null {",
          "    // Find least busy worker",
          "    let best: WorkerState | null = null;"
        ],
        "after": [
          "",
          "    for (const state of this.workers) {",
          "      if (!state.busy && state.taskCount < bestTaskCount) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:82:57",
      "file": "stores/animationStore/index.ts",
      "line": 82,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "effectiveStartFrame: (state) => state.workAreaStart ?? 0,",
      "context": {
        "before": [
          "      state.workAreaStart !== null && state.workAreaEnd !== null,",
          "",
          "    /** Get effective start frame (work area or 0) */"
        ],
        "after": [
          "",
          "    /** Whether playback is currently active (delegated to playbackStore) */",
          "    isPlaying(): boolean {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:313:55",
      "file": "stores/animationStore/index.ts",
      "line": 313,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const targetFrame = frame ?? comp?.currentFrame ?? 0;",
      "context": {
        "before": [
          "     */",
          "    getFrameState(store: FrameEvaluationAccess, frame?: number): FrameState {",
          "      const comp = store.getActiveComp();"
        ],
        "after": [
          "",
          "      // Get audio reactive data from audioStore",
          "      const audioStore = useAudioStore();"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:266:54",
      "file": "stores/assetStore.ts",
      "line": 266,
      "column": 54,
      "pattern": "|| {}",
      "severity": "MEDIUM",
      "code": "const presetConfig = presetConfigs[presetName] || {};",
      "context": {
        "before": [
          "        },",
          "      };",
          ""
        ],
        "after": [
          "      const config: PBRMaterialConfig = this.createDefaultMaterialConfig(",
          "        id,",
          "        customName || presetName,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:287:57",
      "file": "stores/audioKeyframeStore.ts",
      "line": 287,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = store.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      const audioStore = useAudioStore();\r",
          "      if (!audioStore.audioAnalysis) return;\r",
          "\r"
        ],
        "after": [
          "      const amplitude = audioStore.getFeatureAtFrame(store, \"amplitude\", frame);\r",
          "      const isBeat = audioStore.isBeatAtFrame(frame);\r",
          "\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:106:54",
      "file": "stores/audioStore.ts",
      "line": 106,
      "column": 54,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "duration: (state) => state.audioBuffer?.duration ?? 0,",
      "context": {
        "before": [
          "    isLoading: (state) =>",
          "      state.loadingState === \"decoding\" || state.loadingState === \"analyzing\",",
          "    hasError: (state) => state.loadingState === \"error\","
        ],
        "after": [
          "    bpm: (state) => state.audioAnalysis?.bpm ?? 0,",
          "    frameCount: (state) => state.audioAnalysis?.frameCount ?? 0,",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:107:46",
      "file": "stores/audioStore.ts",
      "line": 107,
      "column": 46,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "bpm: (state) => state.audioAnalysis?.bpm ?? 0,",
      "context": {
        "before": [
          "      state.loadingState === \"decoding\" || state.loadingState === \"analyzing\",",
          "    hasError: (state) => state.loadingState === \"error\",",
          "    duration: (state) => state.audioBuffer?.duration ?? 0,"
        ],
        "after": [
          "    frameCount: (state) => state.audioAnalysis?.frameCount ?? 0,",
          "",
          "    // Waveform integration helpers"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:108:60",
      "file": "stores/audioStore.ts",
      "line": 108,
      "column": 60,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "frameCount: (state) => state.audioAnalysis?.frameCount ?? 0,",
      "context": {
        "before": [
          "    hasError: (state) => state.loadingState === \"error\",",
          "    duration: (state) => state.audioBuffer?.duration ?? 0,",
          "    bpm: (state) => state.audioAnalysis?.bpm ?? 0,"
        ],
        "after": [
          "",
          "    // Waveform integration helpers",
          "    /** Check if audio buffer is loaded (for waveform rendering) */"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:279:55",
      "file": "stores/audioStore.ts",
      "line": 279,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "frame ?? store?.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "    ): number {",
          "      if (!this.audioAnalysis) return 0;",
          "      const targetFrame ="
        ],
        "after": [
          "      return getFeatureAtFrameService(this.audioAnalysis, feature, targetFrame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:330:57",
      "file": "stores/audioStore.ts",
      "line": 330,
      "column": 57,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const existing = this.legacyMappings.get(layerId) || [];",
      "context": {
        "before": [
          "     * Apply audio reactivity mapping to particle layer (legacy)",
          "     */",
          "    addLegacyMapping(layerId: string, mapping: AudioParticleMapping): void {"
        ],
        "after": [
          "      existing.push(mapping);",
          "      this.legacyMappings.set(layerId, existing);",
          "    },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:352:47",
      "file": "stores/audioStore.ts",
      "line": 352,
      "column": 47,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return this.legacyMappings.get(layerId) || [];",
      "context": {
        "before": [
          "     * Get legacy mappings for a layer",
          "     */",
          "    getLegacyMappings(layerId: string): AudioParticleMapping[] {"
        ],
        "after": [
          "    },",
          "",
          "    // ============================================================"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:484:42",
      "file": "stores/audioStore.ts",
      "line": 484,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.audioContext?.currentTime ?? 0,",
      "context": {
        "before": [
          "        const effectiveVolume = this.muted ? 0 : this.volume / 100;",
          "        this.gainNode.gain.setValueAtTime(",
          "          effectiveVolume,"
        ],
        "after": [
          "        );",
          "      }",
          "    },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/cacheStore.ts:167:41",
      "file": "stores/cacheStore.ts",
      "line": 167,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "layerCount: comp.layers?.length ?? 0,",
      "context": {
        "before": [
          "\r",
          "      // Create a simplified fingerprint of the composition state\r",
          "      const fingerprint = {\r"
        ],
        "after": [
          "        layerIds: comp.layers?.map((l) => l.id).join(\",\") ?? \"\",\r",
          "        modified: store.project.meta.modified,\r",
          "        settings: comp.settings,\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:250:50",
      "file": "stores/cameraStore.ts",
      "line": 250,
      "column": 50,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return store.cameraKeyframes.get(cameraId) || [];",
      "context": {
        "before": [
          "     * Get all keyframes for a camera\r",
          "     */\r",
          "    getCameraKeyframes(store: CameraStoreAccess, cameraId: string): CameraKeyframe[] {\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    /**\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:343:64",
      "file": "stores/compositionStore.ts",
      "line": 343,
      "column": 64,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "...selectedLayers.map((l) => l.startFrame ?? l.inPoint ?? 0),",
      "context": {
        "before": [
          "      }\r",
          "\r",
          "      const earliestIn = Math.min(\r"
        ],
        "after": [
          "      );\r",
          "\r",
          "      for (const layer of selectedLayers) {\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:347:62",
      "file": "stores/compositionStore.ts",
      "line": 347,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStart = layer.startFrame ?? layer.inPoint ?? 0;",
      "context": {
        "before": [
          "      );\r",
          "\r",
          "      for (const layer of selectedLayers) {\r"
        ],
        "after": [
          "        const layerEnd = layer.endFrame ?? layer.outPoint ?? 80;\r",
          "        layer.startFrame = layerStart - earliestIn;\r",
          "        layer.endFrame = layerEnd - earliestIn;\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:312:33",
      "file": "stores/compositorStore.ts",
      "line": 312,
      "column": 33,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return comp?.currentFrame || 0;",
      "context": {
        "before": [
          "    // Current frame - per composition",
          "    currentFrame(state): number {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "    },",
          "    currentTime(): number {",
          "      const comp = this.activeComposition;"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:323:27",
      "file": "stores/compositorStore.ts",
      "line": 323,
      "column": 27,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return comp?.layers || [];",
      "context": {
        "before": [
          "    // Layers - from active composition",
          "    layers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "    },",
          "    visibleLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:327:35",
      "file": "stores/compositorStore.ts",
      "line": 327,
      "column": 35,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const layers = comp?.layers || [];",
      "context": {
        "before": [
          "    },",
          "    visibleLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "      return layers.filter((l: Layer) => l.visible);",
          "    },",
          "    // Layers displayed in timeline (respects minimized filter)"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:333:35",
      "file": "stores/compositorStore.ts",
      "line": 333,
      "column": 35,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const layers = comp?.layers || [];",
      "context": {
        "before": [
          "    // Layers displayed in timeline (respects minimized filter)",
          "    displayedLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "      const uiStore = useUIStore();",
          "      if (uiStore.hideMinimizedLayers) {",
          "        return layers.filter((l: Layer) => !l.minimized);"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:360:28",
      "file": "stores/compositorStore.ts",
      "line": 360,
      "column": 28,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return (comp?.layers || []).filter((l: Layer) =>",
      "context": {
        "before": [
          "    selectedLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];",
          "      const selectionStore = useSelectionStore();"
        ],
        "after": [
          "        selectionStore.selectedLayerIds.includes(l.id),",
          "      );",
          "    },"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:369:23",
      "file": "stores/compositorStore.ts",
      "line": 369,
      "column": 23,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "(comp?.layers || []).find(",
      "context": {
        "before": [
          "      if (selectionStore.selectedLayerIds.length !== 1) return null;",
          "      const comp = state.project.compositions[state.activeCompositionId];",
          "      return ("
        ],
        "after": [
          "          (l: Layer) => l.id === selectionStore.selectedLayerIds[0],",
          "        ) || null",
          "      );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:409:35",
      "file": "stores/compositorStore.ts",
      "line": 409,
      "column": 35,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const layers = comp?.layers || [];",
      "context": {
        "before": [
          "    allCameras: (state): Camera3D[] => Array.from(state.cameras.values()),",
          "    cameraLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "      return layers.filter((l: Layer) => l.type === \"camera\");",
          "    },",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:435:27",
      "file": "stores/compositorStore.ts",
      "line": 435,
      "column": 27,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return comp?.layers || [];",
      "context": {
        "before": [
          "     */",
          "    getActiveCompLayers(): Layer[] {",
          "      const comp = this.project.compositions[this.activeCompositionId];"
        ],
        "after": [
          "    },",
          "",
          "    /**"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:954:42",
      "file": "stores/compositorStore.ts",
      "line": 954,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "currentFrame: comp?.currentFrame ?? 0,",
      "context": {
        "before": [
          "      const comp = this.getActiveComp();",
          "      const storeWithFrame = {",
          "        ...this,"
        ],
        "after": [
          "        fps: comp?.settings.fps ?? 30,",
          "        // Explicitly bind pushHistory to preserve 'this' context",
          "        pushHistory: this.pushHistory.bind(this),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:972:42",
      "file": "stores/compositorStore.ts",
      "line": 972,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "currentFrame: comp?.currentFrame ?? 0,",
      "context": {
        "before": [
          "      const comp = this.getActiveComp();",
          "      const storeWithFrame = {",
          "        ...this,"
        ],
        "after": [
          "        fps: comp?.settings.fps ?? 30,",
          "        // Explicitly bind pushHistory to preserve 'this' context",
          "        pushHistory: this.pushHistory.bind(this),"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2158:71",
      "file": "stores/compositorStore.ts",
      "line": 2158,
      "column": 71,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const targetFrame = frame ?? this.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      return useAudioStore().getMappedValueAtFrame(mappingId, frame);",
          "    },",
          "    getAllMappedValuesAtFrame(frame?: number): Map<TargetParameter, number> {"
        ],
        "after": [
          "      return useAudioStore().getAllMappedValuesAtFrame(targetFrame);",
          "    },",
          "    getActiveMappingsForLayer(layerId: string): AudioMapping[] {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2171:56",
      "file": "stores/compositorStore.ts",
      "line": 2171,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = this.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      return useAudioStore().getValuesForLayerAtFrame(layerId, frame);",
          "    },",
          "    isBeatAtCurrentFrame(): boolean {"
        ],
        "after": [
          "      return useAudioStore().isBeatAtFrame(frame);",
          "    },",
          "    convertAudioToKeyframes("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2380:44",
      "file": "stores/compositorStore.ts",
      "line": 2380,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "this.getActiveComp()?.currentFrame ?? 0,",
      "context": {
        "before": [
          "      return useExpressionStore().getEvaluatedLayerProperties(",
          "        this,",
          "        layerId,"
        ],
        "after": [
          "      );",
          "    },",
          "    addPropertyDriver(driver: PropertyDriver): boolean {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:255:40",
      "file": "stores/decompositionStore.ts",
      "line": 255,
      "column": 40,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(b.depth?.estimatedDepth || 0) - (a.depth?.estimatedDepth || 0),",
      "context": {
        "before": [
          "          }))\r",
          "          .sort(\r",
          "            (a, b) =>\r"
        ],
        "after": [
          "          );\r",
          "\r",
          "        for (let i = 0; i < sortedLayers.length; i++) {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:255:73",
      "file": "stores/decompositionStore.ts",
      "line": 255,
      "column": 73,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "(b.depth?.estimatedDepth || 0) - (a.depth?.estimatedDepth || 0),",
      "context": {
        "before": [
          "          }))\r",
          "          .sort(\r",
          "            (a, b) =>\r"
        ],
        "after": [
          "          );\r",
          "\r",
          "        for (let i = 0; i < sortedLayers.length; i++) {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:271:39",
      "file": "stores/decompositionStore.ts",
      "line": 271,
      "column": 39,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "depth?.suggestedZPosition || 0,",
      "context": {
        "before": [
          "            store,\r",
          "            layer,\r",
          "            depth?.contentDescription || layer.label,\r"
        ],
        "after": [
          "          );\r",
          "\r",
          "          if (createdLayer) {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:327:69",
      "file": "stores/effectStore/index.ts",
      "line": 327,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rawFrame = frame ?? store.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      if (!effect || !effect.parameters[paramKey]) return null;",
          "",
          "      const param = effect.parameters[paramKey];"
        ],
        "after": [
          "      const targetFrame = Number.isFinite(rawFrame) ? rawFrame : 0;",
          "",
          "      if (param.animated && param.keyframes.length > 0) {"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/clipboard.ts:62:23",
      "file": "stores/keyframeStore/clipboard.ts",
      "line": 62,
      "column": 23,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let earliestFrame = Infinity;",
      "context": {
        "before": [
          "  }",
          "",
          "  // Find the earliest frame among all selected keyframes (for relative timing)"
        ],
        "after": [
          "  const clipboardEntries: ClipboardKeyframe[] = [];",
          "",
          "  for (const [, group] of groupedByProperty) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/clipboard.ts:84:25",
      "file": "stores/keyframeStore/clipboard.ts",
      "line": 84,
      "column": 25,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "if (earliestFrame === Infinity) {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    storeLogger.debug(\"copyKeyframes: No valid keyframes found\");",
          "    return 0;",
          "  }"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:67:69",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 67,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return parts[2] === \"x\" ? p.x : parts[2] === \"y\" ? p.y : (p.z ?? 0);",
      "context": {
        "before": [
          "        layerId,\r",
          "        duration,\r",
          "      );\r"
        ],
        "after": [
          "    }\r",
          "    if (parts[1] === \"anchorPoint\" || parts[1] === \"origin\") {\r",
          "      // Use origin (new name) with fallback to anchorPoint\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:80:69",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 80,
      "column": 69,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return parts[2] === \"x\" ? a.x : parts[2] === \"y\" ? a.y : (a.z ?? 0);",
      "context": {
        "before": [
          "        layerId,\r",
          "        duration,\r",
          "      );\r"
        ],
        "after": [
          "    }\r",
          "    if (parts[1] === \"scale\") {\r",
          "      const s = interpolateProperty(t.scale, frame, fps, layerId, duration);\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:161:27",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 161,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return [p.x, p.y, p.z ?? 0];",
      "context": {
        "before": [
          "      layerId,\r",
          "      duration,\r",
          "    );\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  if (\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:177:27",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 177,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return [a.x, a.y, a.z ?? 0];",
      "context": {
        "before": [
          "      layerId,\r",
          "      duration,\r",
          "    );\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  if (normalizedPath === \"scale\" && t.scale) {\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:209:27",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 209,
      "column": 27,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return [o.x, o.y, o.z ?? 0];",
      "context": {
        "before": [
          "      layerId,\r",
          "      duration,\r",
          "    );\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  if (propertyPath === \"opacity\" && layer.opacity) {\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:243:50",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 243,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "return [posValue.x, posValue.y, posValue.z ?? 0];",
      "context": {
        "before": [
          "    ) {\r",
          "      // Type guard for position-like objects\r",
          "      const posValue = value as { x: number; y: number; z?: number };\r"
        ],
        "after": [
          "    }\r",
          "    return value;\r",
          "  }\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:264:36",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 264,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = comp?.currentFrame ?? 0;",
      "context": {
        "before": [
          "  property: AnimatableProperty<T>,\r",
          "): T {\r",
          "  const comp = store.getActiveComp();\r"
        ],
        "after": [
          "  const fps = store.fps;\r",
          "  const duration = comp\r",
          "    ? comp.settings.frameCount / comp.settings.fps\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/expressions.ts:249:28",
      "file": "stores/keyframeStore/expressions.ts",
      "line": 249,
      "column": 28,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const start = startFrame ?? 0;",
      "context": {
        "before": [
          "    return 0;",
          "  }",
          ""
        ],
        "after": [
          "  const end = endFrame ?? store.frameCount;",
          "  // Validate sampleRate (Math.round(NaN) = NaN, Math.max(1, NaN) = NaN)",
          "  const rate = Number.isFinite(sampleRate)"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/expressions.ts:275:36",
      "file": "stores/keyframeStore/expressions.ts",
      "line": 275,
      "column": 36,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "keyframeValue = value[0] ?? 0;",
      "context": {
        "before": [
          "        } else if (value.length >= 3) {",
          "          keyframeValue = { x: value[0], y: value[1], z: value[2] };",
          "        } else {"
        ],
        "after": [
          "        }",
          "      } else {",
          "        keyframeValue = value;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/property.ts:35:62",
      "file": "stores/keyframeStore/property.ts",
      "line": 35,
      "column": 62,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const currentFrame = store.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "",
          "  // If animated and at a keyframe, update that keyframe's value too",
          "  if (property.animated && property.keyframes.length > 0) {"
        ],
        "after": [
          "    const existingKf = property.keyframes.find(",
          "      (kf) => kf.frame === currentFrame,",
          "    );"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/property.ts:74:40",
      "file": "stores/keyframeStore/property.ts",
      "line": 74,
      "column": 40,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const frame = comp?.currentFrame ?? 0;",
      "context": {
        "before": [
          "    } else {",
          "      // Direct implementation when no callback provided",
          "      const comp = store.getActiveComp();"
        ],
        "after": [
          "",
          "      const keyframe: Keyframe<PropertyValue> = {",
          "        id: `kf_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:183:21",
      "file": "stores/keyframeStore/timing.ts",
      "line": 183,
      "column": 21,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: (beforeVal.z ?? 0) + ((afterVal.z ?? 0) - (beforeVal.z ?? 0)) * t,",
      "context": {
        "before": [
          "  const interpolatedValue = {",
          "    x: beforeVal.x + (afterVal.x - beforeVal.x) * t,",
          "    y: beforeVal.y + (afterVal.y - beforeVal.y) * t,"
        ],
        "after": [
          "  };",
          "",
          "  // Create the keyframe"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:183:42",
      "file": "stores/keyframeStore/timing.ts",
      "line": 183,
      "column": 42,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: (beforeVal.z ?? 0) + ((afterVal.z ?? 0) - (beforeVal.z ?? 0)) * t,",
      "context": {
        "before": [
          "  const interpolatedValue = {",
          "    x: beforeVal.x + (afterVal.x - beforeVal.x) * t,",
          "    y: beforeVal.y + (afterVal.y - beforeVal.y) * t,"
        ],
        "after": [
          "  };",
          "",
          "  // Create the keyframe"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:183:63",
      "file": "stores/keyframeStore/timing.ts",
      "line": 183,
      "column": 63,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: (beforeVal.z ?? 0) + ((afterVal.z ?? 0) - (beforeVal.z ?? 0)) * t,",
      "context": {
        "before": [
          "  const interpolatedValue = {",
          "    x: beforeVal.x + (afterVal.x - beforeVal.x) * t,",
          "    y: beforeVal.y + (afterVal.y - beforeVal.y) * t,"
        ],
        "after": [
          "  };",
          "",
          "  // Create the keyframe"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:126:59",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 126,
      "column": 59,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const inHandleFrame = Math.abs(keyframe.inHandle?.frame ?? 0);",
      "context": {
        "before": [
          "",
          "  // Convert value offset back to velocity (validate fps)",
          "  const fps = Number.isFinite(store.fps) && store.fps > 0 ? store.fps : 16;"
        ],
        "after": [
          "  const inVelocity =",
          "    keyframe.inHandle?.enabled && inHandleFrame > 0",
          "      ? (-keyframe.inHandle.value / inHandleFrame) * fps"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:132:52",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 132,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const outHandleFrame = keyframe.outHandle?.frame ?? 0;",
      "context": {
        "before": [
          "      ? (-keyframe.inHandle.value / inHandleFrame) * fps",
          "      : 0;",
          ""
        ],
        "after": [
          "  const outVelocity =",
          "    keyframe.outHandle?.enabled && outHandleFrame !== 0",
          "      ? (keyframe.outHandle.value / outHandleFrame) * fps"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:442:72",
      "file": "stores/layerStore/crud.ts",
      "line": 442,
      "column": 72,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid position values (NaN/Infinity)\", { x, y, z });",
      "context": {
        "before": [
          "    // Validate position values are finite",
          "    const { x, y, z } = updates.position;",
          "    if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.position.value = updates.position;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:442:76",
      "file": "stores/layerStore/crud.ts",
      "line": 442,
      "column": 76,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid position values (NaN/Infinity)\", { x, y, z });",
      "context": {
        "before": [
          "    // Validate position values are finite",
          "    const { x, y, z } = updates.position;",
          "    if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.position.value = updates.position;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:451:69",
      "file": "stores/layerStore/crud.ts",
      "line": 451,
      "column": 69,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid scale values (NaN/Infinity)\", { x, y, z });",
      "context": {
        "before": [
          "    // Validate scale values are finite",
          "    const { x, y, z } = updates.scale;",
          "    if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.scale.value = updates.scale;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:451:73",
      "file": "stores/layerStore/crud.ts",
      "line": 451,
      "column": 73,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid scale values (NaN/Infinity)\", { x, y, z });",
      "context": {
        "before": [
          "    // Validate scale values are finite",
          "    const { x, y, z } = updates.scale;",
          "    if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.scale.value = updates.scale;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:459:71",
      "file": "stores/layerStore/crud.ts",
      "line": 459,
      "column": 71,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid rotation value (NaN/Infinity)\", updates.rotation);",
      "context": {
        "before": [
          "  if (updates.rotation !== undefined && layer.transform.rotation) {",
          "    // Validate rotation is finite",
          "    if (!Number.isFinite(updates.rotation)) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.rotation.value = updates.rotation;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:459:75",
      "file": "stores/layerStore/crud.ts",
      "line": 459,
      "column": 75,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid rotation value (NaN/Infinity)\", updates.rotation);",
      "context": {
        "before": [
          "  if (updates.rotation !== undefined && layer.transform.rotation) {",
          "    // Validate rotation is finite",
          "    if (!Number.isFinite(updates.rotation)) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.rotation.value = updates.rotation;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:485:70",
      "file": "stores/layerStore/crud.ts",
      "line": 485,
      "column": 70,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid origin values (NaN/Infinity)\", { x, y, z });",
      "context": {
        "before": [
          "    // Validate origin values are finite",
          "    const { x, y, z } = originUpdate;",
          "    if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.origin.value = originUpdate;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:485:74",
      "file": "stores/layerStore/crud.ts",
      "line": 485,
      "column": 74,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "storeLogger.warn(\"updateLayerTransform: Invalid origin values (NaN/Infinity)\", { x, y, z });",
      "context": {
        "before": [
          "    // Validate origin values are finite",
          "    const { x, y, z } = originUpdate;",
          "    if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {"
        ],
        "after": [
          "      return;",
          "    }",
          "    layer.transform.origin.value = originUpdate;"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:188:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 188,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          " * @param compositorStore - The compositor store instance",
          " */",
          "export function selectAllLayers(compositorStore: CompositorStoreAccess): void {"
        ],
        "after": [
          "  const selection = useSelectionStore();",
          "  selection.selectLayers(layers.map((l: Layer) => l.id));",
          "}"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:251:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 251,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "): Layer | null {"
        ],
        "after": [
          "  return layers.find((l: Layer) => l.id === layerId) ?? null;",
          "}",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:265:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 265,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => l.parentId === layerId);",
          "}",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:298:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 298,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getVisibleLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => l.visible);",
          "}",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:312:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 312,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  hideMinimized = false,",
          "): Layer[] {"
        ],
        "after": [
          "  if (hideMinimized) {",
          "    return layers.filter((l: Layer) => !l.minimized);",
          "  }"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:327:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 327,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getRootLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => !l.parentId);",
          "}",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:339:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 339,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getCameraLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => l.type === \"camera\");",
          "}",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:351:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 351,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getSelectedLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  return layers.filter((l: Layer) =>",
          "    selectionStore.selectedLayerIds.includes(l.id),"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:368:58",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 368,
      "column": 58,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "): Layer | null {",
          "  const selectionStore = useSelectionStore();",
          "  if (selectionStore.selectedLayerIds.length !== 1) return null;"
        ],
        "after": [
          "  return (",
          "    layers.find((l: Layer) => l.id === selectionStore.selectedLayerIds[0]) ||",
          "    null"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/pathOperations.ts:72:50",
      "file": "stores/layerStore/pathOperations.ts",
      "line": 72,
      "column": 50,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const controlPoints = splineData.controlPoints || [];",
      "context": {
        "before": [
          "  }",
          "",
          "  const splineData = sourceLayer.data as SplineData;"
        ],
        "after": [
          "",
          "  if (controlPoints.length < 2) {",
          "    storeLogger.error("
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/pathOperations.ts:83:41",
      "file": "stores/layerStore/pathOperations.ts",
      "line": 83,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const startFrame = options.startFrame ?? 0;",
      "context": {
        "before": [
          "",
          "  // Configuration",
          "  const useFullDuration = options.useFullDuration ?? true;"
        ],
        "after": [
          "  const endFrame = options.endFrame ?? comp.settings.frameCount - 1;",
          "  const interpolation = options.interpolation ?? \"bezier\";",
          "  const useSpatialTangents = options.useSpatialTangents ?? true;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/pathOperations.ts:130:56",
      "file": "stores/layerStore/pathOperations.ts",
      "line": 130,
      "column": 56,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const prevFrame = i > 0 ? (keyframes[i - 1]?.frame ?? 0) : 0;",
      "context": {
        "before": [
          "    const point = sampledPoints[i];",
          "",
          "    // Calculate frame distance to neighboring keyframes for handle influence"
        ],
        "after": [
          "    const nextFrame =",
          "      i < sampledPoints.length - 1",
          "        ? Math.round("
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/pathOperations.ts:144:55",
      "file": "stores/layerStore/pathOperations.ts",
      "line": 144,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "value: { x: point.x, y: point.y, z: point.depth ?? 0 },",
      "context": {
        "before": [
          "    const keyframe: (typeof keyframes)[0] = {",
          "      id: `kf_${Date.now()}_${i}`,",
          "      frame,"
        ],
        "after": [
          "      interpolation,",
          "      inHandle: { frame: -inInfluence, value: 0, enabled: true },",
          "      outHandle: { frame: outInfluence, value: 0, enabled: true },"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:151:49",
      "file": "stores/layerStore/spline.ts",
      "line": 151,
      "column": 49,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const staticPoints = splineData.controlPoints || [];",
      "context": {
        "before": [
          "  }",
          "",
          "  // Convert static control points to animatable"
        ],
        "after": [
          "  const animatedPoints: AnimatableControlPoint[] = staticPoints.map((cp) =>",
          "    controlPointToAnimatable(cp),",
          "  );"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:353:38",
      "file": "stores/layerStore/spline.ts",
      "line": 353,
      "column": 38,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return (splineData.controlPoints || []).map((cp) => ({",
      "context": {
        "before": [
          "",
          "  // If not animated, return static points as evaluated",
          "  if (!splineData.animated || !splineData.animatedControlPoints) {"
        ],
        "after": [
          "      id: cp.id,",
          "      x: cp.x,",
          "      y: cp.y,"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:357:23",
      "file": "stores/layerStore/spline.ts",
      "line": 357,
      "column": 23,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "depth: cp.depth ?? 0,",
      "context": {
        "before": [
          "      id: cp.id,",
          "      x: cp.x,",
          "      y: cp.y,"
        ],
        "after": [
          "      handleIn: cp.handleIn ? { ...cp.handleIn } : null,",
          "      handleOut: cp.handleOut ? { ...cp.handleOut } : null,",
          "      type: cp.type,"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/textConversion.ts:134:45",
      "file": "stores/layerStore/textConversion.ts",
      "line": 134,
      "column": 45,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "strokeWidth: textData.strokeWidth || 0,",
      "context": {
        "before": [
          "          controlPoints: allControlPoints,",
          "          closed: charGroup.paths[0]?.closed ?? true,",
          "          stroke: textData.stroke || \"\","
        ],
        "after": [
          "          fill: textData.fill || \"#ffffff\",",
          "        };",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/textConversion.ts:187:43",
      "file": "stores/layerStore/textConversion.ts",
      "line": 187,
      "column": 43,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "strokeWidth: textData.strokeWidth || 0,",
      "context": {
        "before": [
          "        controlPoints: allControlPoints,",
          "        closed: result.allPaths[0]?.closed ?? true,",
          "        stroke: textData.stroke || \"\","
        ],
        "after": [
          "        fill: textData.fill || \"#ffffff\",",
          "      };",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:149:53",
      "file": "stores/layerStore/time.ts",
      "line": 149,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const currentFrame = compositorStore.currentFrame ?? 0;",
      "context": {
        "before": [
          "",
          "  compositorStore.pushHistory();",
          ""
        ],
        "after": [
          "  // Validate fps (nullish coalescing doesn't catch NaN)",
          "  const fps =",
          "    Number.isFinite(compositorStore.fps) && compositorStore.fps! > 0"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:226:53",
      "file": "stores/layerStore/time.ts",
      "line": 226,
      "column": 53,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const currentFrame = compositorStore.currentFrame ?? 0;",
      "context": {
        "before": [
          "    return null;",
          "  }",
          ""
        ],
        "after": [
          "  const startFrame = layer.startFrame ?? 0;",
          "  const endFrame =",
          "    layer.endFrame ??"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:227:39",
      "file": "stores/layerStore/time.ts",
      "line": 227,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const startFrame = layer.startFrame ?? 0;",
      "context": {
        "before": [
          "  }",
          "",
          "  const currentFrame = compositorStore.currentFrame ?? 0;"
        ],
        "after": [
          "  const endFrame =",
          "    layer.endFrame ??",
          "    compositorStore.getActiveComp()?.settings.frameCount ??"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:257:55",
      "file": "stores/layerStore/time.ts",
      "line": 257,
      "column": 55,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const originalStartTime = newLayer.data.startTime ?? 0;",
      "context": {
        "before": [
          "      Number.isFinite(compositorStore.fps) && compositorStore.fps! > 0",
          "        ? compositorStore.fps!",
          "        : 16;"
        ],
        "after": [
          "    const speed = newLayer.data.speed ?? 1;",
          "    const frameOffset = currentFrame - startFrame;",
          "    const timeOffset = (frameOffset / fps) * speed;"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:308:44",
      "file": "stores/layerStore/time.ts",
      "line": 308,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const layerStartFrame = layer.startFrame ?? 0;",
      "context": {
        "before": [
          "  compositorStore.pushHistory();",
          "",
          "  const compositionFps = fps ?? compositorStore.fps ?? 30;"
        ],
        "after": [
          "  const layerEndFrame =",
          "    layer.endFrame ??",
          "    compositorStore.getActiveComp()?.settings.frameCount ??"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:307:28",
      "file": "stores/markerStore.ts",
      "line": 307,
      "column": 28,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "return comp?.markers || [];",
      "context": {
        "before": [
          "     */\r",
          "    getMarkers(store: MarkerStoreAccess): Marker[] {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    /**\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:178:48",
      "file": "stores/physicsStore.ts",
      "line": 178,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const position = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:179:48",
      "file": "stores/physicsStore.ts",
      "line": 179,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const position = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const bodyConfig =\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:274:57",
      "file": "stores/physicsStore.ts",
      "line": 274,
      "column": 57,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const fields = compositionForceFields.get(compId) || [];",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const compId = store.activeCompositionId;\r",
          "\r"
        ],
        "after": [
          "      const existingIndex = fields.findIndex((f) => f.id === force.id);\r",
          "\r",
          "      if (existingIndex >= 0) {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:295:57",
      "file": "stores/physicsStore.ts",
      "line": 295,
      "column": 57,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const fields = compositionForceFields.get(compId) || [];",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const compId = store.activeCompositionId;\r",
          "\r"
        ],
        "after": [
          "      const newFields = fields.filter((f) => f.id !== forceId);\r",
          "\r",
          "      compositionForceFields.set(compId, newFields);\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:317:57",
      "file": "stores/physicsStore.ts",
      "line": 317,
      "column": 57,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const fields = compositionForceFields.get(compId) || [];",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const compId = store.activeCompositionId;\r",
          "\r"
        ],
        "after": [
          "      const newFields = fields.filter((f) => f.id !== \"global-gravity\");\r",
          "\r",
          "      const gravityForce = createGravityForce(\"global-gravity\", {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:378:32",
      "file": "stores/physicsStore.ts",
      "line": 378,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x: initialPos?.x ?? 0,",
      "context": {
        "before": [
          "          const initialPos = physicsData.rigidBody.position;\r",
          "          if (layer.transform?.position) {\r",
          "            layer.transform.position.value = {\r"
        ],
        "after": [
          "              y: initialPos?.y ?? 0,\r",
          "              z: layer.transform.position.value?.z ?? 0,\r",
          "            };\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:379:32",
      "file": "stores/physicsStore.ts",
      "line": 379,
      "column": 32,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y: initialPos?.y ?? 0,",
      "context": {
        "before": [
          "          if (layer.transform?.position) {\r",
          "            layer.transform.position.value = {\r",
          "              x: initialPos?.x ?? 0,\r"
        ],
        "after": [
          "              z: layer.transform.position.value?.z ?? 0,\r",
          "            };\r",
          "          }\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:380:52",
      "file": "stores/physicsStore.ts",
      "line": 380,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: layer.transform.position.value?.z ?? 0,",
      "context": {
        "before": [
          "            layer.transform.position.value = {\r",
          "              x: initialPos?.x ?? 0,\r",
          "              y: initialPos?.y ?? 0,\r"
        ],
        "after": [
          "            };\r",
          "          }\r",
          "        }\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:412:50",
      "file": "stores/physicsStore.ts",
      "line": 412,
      "column": 50,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: layer.transform.position.value?.z ?? 0,",
      "context": {
        "before": [
          "          layer.transform.position.value = {\r",
          "            x: bodyState.position.x,\r",
          "            y: bodyState.position.y,\r"
        ],
        "after": [
          "          };\r",
          "        }\r",
          "\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:444:45",
      "file": "stores/physicsStore.ts",
      "line": 444,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const startFrame = options.startFrame ?? 0;",
      "context": {
        "before": [
          "        throw new Error(\"No active composition\");\r",
          "      }\r",
          "\r"
        ],
        "after": [
          "      const endFrame = options.endFrame ?? comp.settings.frameCount - 1;\r",
          "      const sampleInterval: number =\r",
          "        Number.isFinite(options.sampleInterval) && options.sampleInterval! > 0\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:467:54",
      "file": "stores/physicsStore.ts",
      "line": 467,
      "column": 54,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: layer.transform?.position?.value?.z ?? 0,",
      "context": {
        "before": [
          "            value: {\r",
          "              x: bodyState.position.x,\r",
          "              y: bodyState.position.y,\r"
        ],
        "after": [
          "            },\r",
          "            interpolation: \"linear\",\r",
          "          });\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:551:48",
      "file": "stores/physicsStore.ts",
      "line": 551,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const origin = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:552:48",
      "file": "stores/physicsStore.ts",
      "line": 552,
      "column": 48,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const origin = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const clothConfig = createClothConfig(layerId, layerId, {\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:37:57",
      "file": "stores/playbackStore.ts",
      "line": 37,
      "column": 57,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "effectiveStartFrame: (state) => state.workAreaStart ?? 0,",
      "context": {
        "before": [
          "    playing: (state) => state.isPlaying,",
          "    hasWorkArea: (state) =>",
          "      state.workAreaStart !== null && state.workAreaEnd !== null,"
        ],
        "after": [
          "    effectiveEndFrame: (state) => (frameCount: number) =>",
          "      state.workAreaEnd ?? frameCount - 1,",
          "  },"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:84:45",
      "file": "stores/playbackStore.ts",
      "line": 84,
      "column": 45,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "const rangeStart = this.workAreaStart ?? 0;",
      "context": {
        "before": [
          "      this.playbackStartFrame = currentFrame;",
          "",
          "      // Determine effective playback range (work area or full comp)"
        ],
        "after": [
          "      const rangeEnd = this.workAreaEnd ?? frameCount - 1;",
          "      const rangeLength = rangeEnd - rangeStart + 1;",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/presetStore.ts:159:39",
      "file": "stores/presetStore.ts",
      "line": 159,
      "column": 39,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "this.presets = data.presets || [];",
      "context": {
        "before": [
          "        const stored = localStorage.getItem(STORAGE_KEY);",
          "        if (stored) {",
          "          const data = JSON.parse(stored) as PresetCollection;"
        ],
        "after": [
          "        }",
          "      } catch (error) {",
          "        console.warn(\"Failed to load presets from localStorage:\", error);"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:220:41",
      "file": "stores/projectStore.ts",
      "line": 220,
      "column": 41,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const layers = engine.getLayers?.() || [];",
      "context": {
        "before": [
          "  if (!engine) return;\r",
          "\r",
          "  try {\r"
        ],
        "after": [
          "    for (const layer of layers) {\r",
          "      if (layer && typeof layer.clearCache === \"function\") {\r",
          "        layer.clearCache();\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:245:44",
      "file": "stores/textAnimatorStore.ts",
      "line": 245,
      "column": 44,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "return getTextData(layer)?.animators ?? [];",
      "context": {
        "before": [
          "    getTextAnimators(store: TextAnimatorStoreAccess, layerId: string): TextAnimator[] {\r",
          "      const layer = getTextLayer(store, layerId);\r",
          "      if (!layer) return [];\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    // ========================================================================\r"
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:377:44",
      "file": "stores/textAnimatorStore.ts",
      "line": 377,
      "column": 44,
      "pattern": "|| []",
      "severity": "MEDIUM",
      "code": "const animators = textData.animators || [];",
      "context": {
        "before": [
          "      const totalChars = text.length;\r",
          "      if (totalChars === 0) return [];\r",
          "\r"
        ],
        "after": [
          "      const fps = store.getActiveComp()?.settings?.fps || 16;\r",
          "\r",
          "      const transforms: CharacterTransform[] = [];\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:434:68",
      "file": "stores/textAnimatorStore.ts",
      "line": 434,
      "column": 68,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "transforms[i].strokeWidth = (transforms[i].strokeWidth ?? 0) + v * influence;",
      "context": {
        "before": [
          "          }\r",
          "          if (props.strokeWidth !== undefined) {\r",
          "            const v = getAnimatableValue(props.strokeWidth, frame) as number;\r"
        ],
        "after": [
          "          }\r",
          "        }\r",
          "      }\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:582:41",
      "file": "stores/textAnimatorStore.ts",
      "line": 582,
      "column": 41,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "firstMargin: config.firstMargin ?? 0,",
      "context": {
        "before": [
          "        reversed: config.reversed ?? false,\r",
          "        perpendicularToPath: config.perpendicularToPath ?? true,\r",
          "        forceAlignment: config.forceAlignment ?? false,\r"
        ],
        "after": [
          "        lastMargin: config.lastMargin ?? 0,\r",
          "        offset: config.offset ?? 0,\r",
          "        align: config.align ?? \"left\",\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:583:39",
      "file": "stores/textAnimatorStore.ts",
      "line": 583,
      "column": 39,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "lastMargin: config.lastMargin ?? 0,",
      "context": {
        "before": [
          "        perpendicularToPath: config.perpendicularToPath ?? true,\r",
          "        forceAlignment: config.forceAlignment ?? false,\r",
          "        firstMargin: config.firstMargin ?? 0,\r"
        ],
        "after": [
          "        offset: config.offset ?? 0,\r",
          "        align: config.align ?? \"left\",\r",
          "      };\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:584:31",
      "file": "stores/textAnimatorStore.ts",
      "line": 584,
      "column": 31,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "offset: config.offset ?? 0,",
      "context": {
        "before": [
          "        forceAlignment: config.forceAlignment ?? false,\r",
          "        firstMargin: config.firstMargin ?? 0,\r",
          "        lastMargin: config.lastMargin ?? 0,\r"
        ],
        "after": [
          "        align: config.align ?? \"left\",\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:641:54",
      "file": "stores/textAnimatorStore.ts",
      "line": 641,
      "column": 54,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "firstMargin: textData.pathConfig.firstMargin ?? 0,",
      "context": {
        "before": [
          "        reversed: textData.pathConfig.reversed ?? false,\r",
          "        perpendicularToPath: textData.pathConfig.perpendicularToPath ?? true,\r",
          "        forceAlignment: textData.pathConfig.forceAlignment ?? false,\r"
        ],
        "after": [
          "        lastMargin: textData.pathConfig.lastMargin ?? 0,\r",
          "        offset: textData.pathConfig.offset ?? 0,\r",
          "        align: textData.pathConfig.align ?? \"left\",\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:642:52",
      "file": "stores/textAnimatorStore.ts",
      "line": 642,
      "column": 52,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "lastMargin: textData.pathConfig.lastMargin ?? 0,",
      "context": {
        "before": [
          "        perpendicularToPath: textData.pathConfig.perpendicularToPath ?? true,\r",
          "        forceAlignment: textData.pathConfig.forceAlignment ?? false,\r",
          "        firstMargin: textData.pathConfig.firstMargin ?? 0,\r"
        ],
        "after": [
          "        offset: textData.pathConfig.offset ?? 0,\r",
          "        align: textData.pathConfig.align ?? \"left\",\r",
          "      };\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:643:44",
      "file": "stores/textAnimatorStore.ts",
      "line": 643,
      "column": 44,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "offset: textData.pathConfig.offset ?? 0,",
      "context": {
        "before": [
          "        forceAlignment: textData.pathConfig.forceAlignment ?? false,\r",
          "        firstMargin: textData.pathConfig.firstMargin ?? 0,\r",
          "        lastMargin: textData.pathConfig.lastMargin ?? 0,\r"
        ],
        "after": [
          "        align: textData.pathConfig.align ?? \"left\",\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:647:85",
      "file": "stores/textAnimatorStore.ts",
      "line": 647,
      "column": 85,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "return service.calculatePlacements(characterWidths, config, textData.tracking || 0, fontSize);",
      "context": {
        "before": [
          "        align: textData.pathConfig.align ?? \"left\",\r",
          "      };\r",
          "\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    getPathLength(store: TextAnimatorStoreAccess, layerId: string): number {\r"
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "types/transform.ts:273:20",
      "file": "types/transform.ts",
      "line": 273,
      "column": 20,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "currentValue.z ?? 0,",
      "context": {
        "before": [
          "  );",
          "  transform.positionZ = createAnimatableProperty(",
          "    \"Position Z\","
        ],
        "after": [
          "    \"number\",",
          "  );",
          ""
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "types/transform.ts:304:22",
      "file": "types/transform.ts",
      "line": 304,
      "column": 22,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "value: val.z ?? 0,",
      "context": {
        "before": [
          "      transform.positionZ?.keyframes.push({",
          "        ...kf,",
          "        id: `${kf.id}_z`,"
        ],
        "after": [
          "      });",
          "    });",
          "  }"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "types/transform.ts:331:20",
      "file": "types/transform.ts",
      "line": 331,
      "column": 20,
      "pattern": "?? 0",
      "severity": "MEDIUM",
      "code": "z: posZ?.value ?? 0,",
      "context": {
        "before": [
          "  transform.position.value = {",
          "    x: posX.value,",
          "    y: posY.value,"
        ],
        "after": [
          "  };",
          "",
          "  // Merge keyframes - collect all unique frames"
        ]
      },
      "suggestion": "Verify if 0 is valid default, or add proper validation/error handling",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "types/transform.ts:359:44",
      "file": "types/transform.ts",
      "line": 359,
      "column": 44,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "getInterpolatedValue(posZ?.keyframes ?? [], frame) ??",
      "context": {
        "before": [
          "      yKf?.value ?? getInterpolatedValue(posY.keyframes, frame) ?? posY.value;",
          "    const zVal =",
          "      zKf?.value ??"
        ],
        "after": [
          "      posZ?.value ??",
          "      0;",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "types/transform.ts:490:46",
      "file": "types/transform.ts",
      "line": 490,
      "column": 46,
      "pattern": "?? []",
      "severity": "MEDIUM",
      "code": "getInterpolatedValue(scaleZ?.keyframes ?? [], frame) ??",
      "context": {
        "before": [
          "      scaleY.value;",
          "    const zVal =",
          "      zKf?.value ??"
        ],
        "after": [
          "      scaleZ?.value ??",
          "      100;",
          ""
        ]
      },
      "suggestion": "Verify if empty array is valid default, or add proper validation",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "utils/arrayUtils.ts:18:28",
      "file": "utils/arrayUtils.ts",
      "line": 18,
      "column": 28,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "const safeMax = maxValue || 0.0001; // Prevent division by zero",
      "context": {
        "before": [
          "  values: number[],",
          "  maxValue: number = Math.max(...values),",
          "): number[] {"
        ],
        "after": [
          "  return values.map((v) => v / safeMax);",
          "}",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:31:46",
      "file": "utils/numericSafety.ts",
      "line": 31,
      "column": 46,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "throw new TypeError(`${name} must not be NaN`);",
      "context": {
        "before": [
          "    throw new TypeError(`${name} must be a number, got ${typeof value}`);",
          "  }",
          "  if (Number.isNaN(value)) {"
        ],
        "after": [
          "  }",
          "  if (!Number.isFinite(value)) {",
          "    throw new TypeError(`${name} must be finite, got ${value}`);"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "utils/validation.ts:68:54",
      "file": "utils/validation.ts",
      "line": 68,
      "column": 54,
      "pattern": "NaN literal",
      "severity": "MEDIUM",
      "code": "return fail(`${name} must be a valid number, got NaN`);",
      "context": {
        "before": [
          "",
          "  if (Number.isNaN(num)) {",
          "    if (options.allowNaN) return ok(num);"
        ],
        "after": [
          "  }",
          "",
          "  if (!Number.isFinite(num)) {"
        ]
      },
      "suggestion": "Add proper validation or use Number.isNaN() for comparisons",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "workers/audioWorker.ts:175:27",
      "file": "workers/audioWorker.ts",
      "line": 175,
      "column": 27,
      "pattern": "|| 0",
      "severity": "MEDIUM",
      "code": "real[i] = (samples[i] || 0) * windowValue;",
      "context": {
        "before": [
          "  // Apply Hanning window and copy samples",
          "  for (let i = 0; i < n; i++) {",
          "    const windowValue = 0.5 * (1 - Math.cos((2 * Math.PI * i) / (n - 1)));"
        ],
        "after": [
          "    imag[i] = 0;",
          "  }",
          ""
        ]
      },
      "suggestion": "Consider using ?? instead of || for nullish coalescing",
      "category": "Defensive Guard",
      "fixed": false
    },
    {
      "id": "workers/audioWorker.ts:783:26",
      "file": "workers/audioWorker.ts",
      "line": 783,
      "column": 26,
      "pattern": "Infinity literal",
      "severity": "MEDIUM",
      "code": "let bestCorrelation = -Infinity;",
      "context": {
        "before": [
          "",
          "  // Correlate with all 24 key profiles (12 major + 12 minor)",
          "  let bestKey = \"C major\";"
        ],
        "after": [
          "",
          "  for (let root = 0; root < 12; root++) {",
          "    // Rotate profile to start at this root"
        ]
      },
      "suggestion": "Add proper validation or use Number.isFinite() for checks",
      "category": "Numeric Issue",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:44:48",
      "file": "composables/useAssetHandlers.ts",
      "line": 44,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function onCreateLayersFromSvg(svgId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create layers from imported SVG paths",
          "   */"
        ],
        "after": [
          "    const storedSvg = assetStore.svgDocuments.get(svgId);",
          "    if (!storedSvg) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:65:24",
      "file": "composables/useAssetHandlers.ts",
      "line": 65,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: config?.depth || 0,",
      "context": {
        "before": [
          "            ...layer.transform.position,",
          "            value: {",
          "              ...layer.transform.position.value,"
        ],
        "after": [
          "            },",
          "          },",
          "        },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:81:46",
      "file": "composables/useAssetHandlers.ts",
      "line": 81,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function onUseMeshAsEmitter(meshId: string): void {",
      "context": {
        "before": [
          "   * Configure a particle emitter to use a mesh shape.",
          "   * Works with 'particles' type layers (new particle system).",
          "   */"
        ],
        "after": [
          "    const emitterConfig = assetStore.getMeshEmitterConfig(meshId);",
          "    if (!emitterConfig) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:137:50",
      "file": "composables/useAssetHandlers.ts",
      "line": 137,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function onEnvironmentUpdate(settings: unknown): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update environment settings in the engine",
          "   */"
        ],
        "after": [
          "    const engine = canvasRef.value?.getEngine?.();",
          "    if (!engine) return;",
          "    engine.setEnvironmentConfig(settings);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:138:35",
      "file": "composables/useAssetHandlers.ts",
      "line": 138,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const engine = canvasRef.value?.getEngine?.();",
      "context": {
        "before": [
          "   * Update environment settings in the engine",
          "   */",
          "  function onEnvironmentUpdate(settings: unknown): void {"
        ],
        "after": [
          "    if (!engine) return;",
          "    engine.setEnvironmentConfig(settings);",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:138:46",
      "file": "composables/useAssetHandlers.ts",
      "line": 138,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const engine = canvasRef.value?.getEngine?.();",
      "context": {
        "before": [
          "   * Update environment settings in the engine",
          "   */",
          "  function onEnvironmentUpdate(settings: unknown): void {"
        ],
        "after": [
          "    if (!engine) return;",
          "    engine.setEnvironmentConfig(settings);",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:147:35",
      "file": "composables/useAssetHandlers.ts",
      "line": 147,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const engine = canvasRef.value?.getEngine?.();",
      "context": {
        "before": [
          "   * Load environment map into the engine",
          "   */",
          "  async function onEnvironmentLoad(settings: EnvironmentMapOptions & { url?: string }): Promise<void> {"
        ],
        "after": [
          "    if (!engine || !settings.url) return;",
          "",
          "    try {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:147:46",
      "file": "composables/useAssetHandlers.ts",
      "line": 147,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const engine = canvasRef.value?.getEngine?.();",
      "context": {
        "before": [
          "   * Load environment map into the engine",
          "   */",
          "  async function onEnvironmentLoad(settings: EnvironmentMapOptions & { url?: string }): Promise<void> {"
        ],
        "after": [
          "    if (!engine || !settings.url) return;",
          "",
          "    try {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:166:32",
      "file": "composables/useAssetHandlers.ts",
      "line": 166,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function onEnvironmentClear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear environment map from the engine",
          "   */"
        ],
        "after": [
          "    const engine = canvasRef.value?.getEngine?.();",
          "    if (!engine) return;",
          "    engine.setEnvironmentEnabled(false);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:167:35",
      "file": "composables/useAssetHandlers.ts",
      "line": 167,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const engine = canvasRef.value?.getEngine?.();",
      "context": {
        "before": [
          "   * Clear environment map from the engine",
          "   */",
          "  function onEnvironmentClear(): void {"
        ],
        "after": [
          "    if (!engine) return;",
          "    engine.setEnvironmentEnabled(false);",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useAssetHandlers.ts:167:46",
      "file": "composables/useAssetHandlers.ts",
      "line": 167,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const engine = canvasRef.value?.getEngine?.();",
      "context": {
        "before": [
          "   * Clear environment map from the engine",
          "   */",
          "  function onEnvironmentClear(): void {"
        ],
        "after": [
          "    if (!engine) return;",
          "    engine.setEnvironmentEnabled(false);",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCanvasSegmentation.ts:26:63",
      "file": "composables/useCanvasSegmentation.ts",
      "line": 26,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function startSegmentBox(scenePos: { x: number; y: number }): void {",
      "context": {
        "before": [
          "  /**",
          "   * Start segment box drawing",
          "   */"
        ],
        "after": [
          "    store.setSegmentBoxStart({ x: scenePos.x, y: scenePos.y });",
          "    segmentBoxEnd.value = { x: scenePos.x, y: scenePos.y };",
          "    isDrawingSegmentBox.value = true;"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCanvasSegmentation.ts:35:64",
      "file": "composables/useCanvasSegmentation.ts",
      "line": 35,
      "column": 64,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function updateSegmentBox(scenePos: { x: number; y: number }): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update segment box end position",
          "   */"
        ],
        "after": [
          "    if (isDrawingSegmentBox.value && store.segmentBoxStart) {",
          "      segmentBoxEnd.value = { x: scenePos.x, y: scenePos.y };",
          "    }"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCanvasSegmentation.ts:44:30",
      "file": "composables/useCanvasSegmentation.ts",
      "line": 44,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function cancelSegmentBox(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Cancel segment box drawing",
          "   */"
        ],
        "after": [
          "    isDrawingSegmentBox.value = false;",
          "    store.setSegmentBoxStart(null);",
          "    segmentBoxEnd.value = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCanvasSelection.ts:200:37",
      "file": "composables/useCanvasSelection.ts",
      "line": 200,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const current = currentSelection?.value || [];",
      "context": {
        "before": [
          "    selectedIds: string[],",
          "    mode: SelectionMode,",
          "  ): string[] {"
        ],
        "after": [
          "",
          "    switch (mode) {",
          "      case \"replace\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorCoords.ts:167:27",
      "file": "composables/useCurveEditorCoords.ts",
      "line": 167,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!kf || !kf.outHandle?.enabled) {",
      "context": {
        "before": [
          "  margin?: CurveMargin,",
          "): number {",
          "  const kf = prop.keyframes[kfIndex];"
        ],
        "after": [
          "    return frameToScreenX(kf.frame, viewState, canvasWidth, margin);",
          "  }",
          "  const handleFrame = kf.frame + kf.outHandle.frame;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorCoords.ts:185:27",
      "file": "composables/useCurveEditorCoords.ts",
      "line": 185,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!kf || !kf.outHandle?.enabled) {",
      "context": {
        "before": [
          "  margin?: CurveMargin,",
          "): number {",
          "  const kf = prop.keyframes[kfIndex];"
        ],
        "after": [
          "    return valueToScreenY(",
          "      getNumericValue(kf.value),",
          "      viewState,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorCoords.ts:208:26",
      "file": "composables/useCurveEditorCoords.ts",
      "line": 208,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!kf || !kf.inHandle?.enabled) {",
      "context": {
        "before": [
          "  margin?: CurveMargin,",
          "): number {",
          "  const kf = prop.keyframes[kfIndex];"
        ],
        "after": [
          "    return frameToScreenX(kf.frame, viewState, canvasWidth, margin);",
          "  }",
          "  const handleFrame = kf.frame + kf.inHandle.frame;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorCoords.ts:226:26",
      "file": "composables/useCurveEditorCoords.ts",
      "line": 226,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!kf || !kf.inHandle?.enabled) {",
      "context": {
        "before": [
          "  margin?: CurveMargin,",
          "): number {",
          "  const kf = prop.keyframes[kfIndex];"
        ],
        "after": [
          "    return valueToScreenY(",
          "      getNumericValue(kf.value),",
          "      viewState,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:57:2",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 57,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  canvasWidth: number,",
          "  canvasHeight: number,",
          "  margin: CurveMargin = DEFAULT_CURVE_MARGIN,"
        ],
        "after": [
          "  const graphWidth = canvasWidth - margin.left - margin.right;",
          "  const graphHeight = canvasHeight - margin.top - margin.bottom;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:133:2",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 133,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  canvasWidth: number,",
          "  canvasHeight: number,",
          "  margin: CurveMargin = DEFAULT_CURVE_MARGIN,"
        ],
        "after": [
          "  if (prop.keyframes.length < 2) return;",
          "",
          "  const color = getPropertyColor(prop.name);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:185:24",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 185,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(!kf1.outHandle?.enabled && !kf2.inHandle?.enabled)",
      "context": {
        "before": [
          "        ctx.lineTo(x2, y2);",
          "      } else if (",
          "        kf1.interpolation === \"linear\" ||"
        ],
        "after": [
          "      ) {",
          "        // Straight line",
          "        ctx.lineTo(x2, y2);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:185:50",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 185,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(!kf1.outHandle?.enabled && !kf2.inHandle?.enabled)",
      "context": {
        "before": [
          "        ctx.lineTo(x2, y2);",
          "      } else if (",
          "        kf1.interpolation === \"linear\" ||"
        ],
        "after": [
          "      ) {",
          "        // Straight line",
          "        ctx.lineTo(x2, y2);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:192:37",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 192,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kf1.frame + (kf1.outHandle?.frame ?? 0),",
      "context": {
        "before": [
          "      } else {",
          "        // Bezier curve using absolute handle offsets",
          "        const cp1x = frameToScreenX("
        ],
        "after": [
          "          viewState,",
          "          canvasWidth,",
          "          margin,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:198:54",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 198,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getNumericValue(kf1.value) + (kf1.outHandle?.value ?? 0),",
      "context": {
        "before": [
          "          margin,",
          "        );",
          "        const cp1y = valueToScreenY("
        ],
        "after": [
          "          viewState,",
          "          canvasHeight,",
          "          margin,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:204:36",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 204,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kf2.frame + (kf2.inHandle?.frame ?? 0),",
      "context": {
        "before": [
          "          margin,",
          "        );",
          "        const cp2x = frameToScreenX("
        ],
        "after": [
          "          viewState,",
          "          canvasWidth,",
          "          margin,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:210:53",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 210,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getNumericValue(kf2.value) + (kf2.inHandle?.value ?? 0),",
      "context": {
        "before": [
          "          margin,",
          "        );",
          "        const cp2y = valueToScreenY("
        ],
        "after": [
          "          viewState,",
          "          canvasHeight,",
          "          margin,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:236:2",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 236,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  viewState: CurveViewState,",
          "  canvasWidth: number,",
          "  currentFrame: number,"
        ],
        "after": [
          "  const canvasHeight = 24;",
          "",
          "  ctx.fillStyle = \"#252525\";"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:287:2",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 287,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  ctx: CanvasRenderingContext2D,",
          "  viewState: CurveViewState,",
          "  canvasHeight: number,"
        ],
        "after": [
          "  const canvasWidth = 40;",
          "",
          "  ctx.fillStyle = \"#252525\";"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorDraw.ts:325:2",
      "file": "composables/useCurveEditorDraw.ts",
      "line": 325,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  canvasWidth: number,",
          "  canvasHeight: number,",
          "  margin: CurveMargin = DEFAULT_CURVE_MARGIN,"
        ],
        "after": [
          "  // Clear",
          "  ctx.fillStyle = \"#1a1a1a\";",
          "  ctx.fillRect(0, 0, canvasWidth, canvasHeight);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:107:55",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 107,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function updateHoveredKeyframe(x: number, y: number): void {",
      "context": {
        "before": [
          "    );",
          "  }",
          ""
        ],
        "after": [
          "    hoveredKeyframe.value = null;",
          "",
          "    for (const prop of visibleProperties.value) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:126:46",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 126,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function handleMouseDown(event: MouseEvent): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Mouse handlers"
        ],
        "after": [
          "    const rect = canvasRef.value?.getBoundingClientRect();",
          "    if (!rect) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:127:33",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 127,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rect = canvasRef.value?.getBoundingClientRect();",
      "context": {
        "before": [
          "",
          "  // Mouse handlers",
          "  function handleMouseDown(event: MouseEvent): void {"
        ],
        "after": [
          "    if (!rect) return;",
          "",
          "    const x = event.clientX - rect.left;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:146:46",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 146,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function handleMouseMove(event: MouseEvent): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const rect = canvasRef.value?.getBoundingClientRect();",
          "    if (!rect) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:147:33",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 147,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rect = canvasRef.value?.getBoundingClientRect();",
      "context": {
        "before": [
          "  }",
          "",
          "  function handleMouseMove(event: MouseEvent): void {"
        ],
        "after": [
          "    if (!rect) return;",
          "",
          "    const x = event.clientX - rect.left;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:198:27",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 198,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function handleMouseUp(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (dragTarget.value?.type === \"select\" && selectionBox.value) {",
          "      selectKeyframesInBox();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:199:25",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 199,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (dragTarget.value?.type === \"select\" && selectionBox.value) {",
      "context": {
        "before": [
          "  }",
          "",
          "  function handleMouseUp(): void {"
        ],
        "after": [
          "      selectKeyframesInBox();",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:207:42",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 207,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function handleWheel(event: WheelEvent): void {",
      "context": {
        "before": [
          "    selectionBox.value = null;",
          "  }",
          ""
        ],
        "after": [
          "    event.preventDefault();",
          "",
          "    const rect = canvasRef.value?.getBoundingClientRect();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:210:33",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 210,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rect = canvasRef.value?.getBoundingClientRect();",
      "context": {
        "before": [
          "  function handleWheel(event: WheelEvent): void {",
          "    event.preventDefault();",
          ""
        ],
        "after": [
          "    if (!rect) return;",
          "",
          "    const x = event.clientX - rect.left;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:249:4",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 249,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    propId: string,",
          "    index: number,",
          "    event: MouseEvent,"
        ],
        "after": [
          "    const prop = animatableProperties.value.find((p) => p.id === propId);",
          "    if (!prop) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:266:34",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 266,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function selectKeyframesInBox(): void {",
      "context": {
        "before": [
          "    dragTarget.value = { type: \"keyframe\", propId, index };",
          "  }",
          ""
        ],
        "after": [
          "    if (!selectionBox.value) return;",
          "",
          "    const box = selectionBox.value;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:295:67",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 295,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function moveSelectedKeyframes(screenX: number, screenY: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const newFrame = Math.round(screenXToFrame(screenX));",
          "    const newValue = screenYToValue(screenY);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:337:4",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 337,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    propId: string,",
          "    index: number,",
          "    _event: MouseEvent,"
        ],
        "after": [
          "    dragTarget.value = { type, propId, index };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:341:56",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 341,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function moveHandle(screenX: number, screenY: number): void {",
      "context": {
        "before": [
          "    dragTarget.value = { type, propId, index };",
          "  }",
          ""
        ],
        "after": [
          "    if (!dragTarget.value || !dragTarget.value.propId) return;",
          "",
          "    const layer = store.selectedLayer;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:348:39",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 348,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(p) => p.id === dragTarget.value?.propId,",
      "context": {
        "before": [
          "    if (!layer) return;",
          "",
          "    const prop = animatableProperties.value.find("
        ],
        "after": [
          "    );",
          "    if (!prop) return;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:426:46",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 426,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function showContextMenu(event: MouseEvent): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Context menu actions"
        ],
        "after": [
          "    contextMenu.value = { x: event.offsetX, y: event.offsetY };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:430:29",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 430,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function hideContextMenu(): void {",
      "context": {
        "before": [
          "    contextMenu.value = { x: event.offsetX, y: event.offsetY };",
          "  }",
          ""
        ],
        "after": [
          "    contextMenu.value = null;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:434:35",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 434,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function addKeyframeAtPosition(): void {",
      "context": {
        "before": [
          "    contextMenu.value = null;",
          "  }",
          ""
        ],
        "after": [
          "    if (!contextMenu.value) return;",
          "",
          "    const layer = store.selectedLayer;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:454:37",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 454,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function deleteSelectedKeyframes(): void {",
      "context": {
        "before": [
          "    drawGraph();",
          "  }",
          ""
        ],
        "after": [
          "    const layer = store.selectedLayer;",
          "    if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:471:27",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 471,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function copyKeyframes(): void {",
      "context": {
        "before": [
          "    drawGraph();",
          "  }",
          ""
        ],
        "after": [
          "    clipboard.value = selectedKeyframes.value.map((sk) => ({ ...sk.keyframe }));",
          "    contextMenu.value = null;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:476:28",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 476,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function pasteKeyframes(): void {",
      "context": {
        "before": [
          "    contextMenu.value = null;",
          "  }",
          ""
        ],
        "after": [
          "    if (!clipboard.value) return;",
          "",
          "    const layer = store.selectedLayer;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:512:26",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 512,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (kf.inHandle?.enabled) {",
      "context": {
        "before": [
          "              kf.interpolation,",
          "            );",
          "          }"
        ],
        "after": [
          "            keyframeStore.setKeyframeHandle(",
          "              store,",
          "              layer.id,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:522:27",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 522,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (kf.outHandle?.enabled) {",
      "context": {
        "before": [
          "              kf.inHandle,",
          "            );",
          "          }"
        ],
        "after": [
          "            keyframeStore.setKeyframeHandle(",
          "              store,",
          "              layer.id,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:540:32",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 540,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function selectAllKeyframes(): void {",
      "context": {
        "before": [
          "    drawGraph();",
          "  }",
          ""
        ],
        "after": [
          "    selectedKeyframes.value = [];",
          "    for (const prop of visibleProperties.value) {",
          "      for (let i = 0; i < prop.keyframes.length; i++) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:553:29",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 553,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function invertSelection(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const newSelection: SelectedKeyframe[] = [];",
          "",
          "    for (const prop of visibleProperties.value) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorInteraction.ts:572:47",
      "file": "composables/useCurveEditorInteraction.ts",
      "line": 572,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function handleKeyDown(event: KeyboardEvent): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Keyboard handler"
        ],
        "after": [
          "    if (event.key === \"Delete\" || event.key === \"Backspace\") {",
          "      deleteSelectedKeyframes();",
          "    } else if (event.key === \"a\" && (event.ctrlKey || event.metaKey)) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorKeyboard.ts:30:2",
      "file": "composables/useCurveEditorKeyboard.ts",
      "line": 30,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  currentFrame: number,",
          "  visibleProperties: AnimatableProperty<any>[],",
          "  setFrame: (frame: number) => void,"
        ],
        "after": [
          "  const allKeyframes: number[] = [];",
          "",
          "  for (const prop of visibleProperties) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorKeyboard.ts:55:2",
      "file": "composables/useCurveEditorKeyboard.ts",
      "line": 55,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  currentFrame: number,",
          "  visibleProperties: AnimatableProperty<any>[],",
          "  setFrame: (frame: number) => void,"
        ],
        "after": [
          "  const allKeyframes: number[] = [];",
          "",
          "  for (const prop of visibleProperties) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorKeyboard.ts:86:54",
      "file": "composables/useCurveEditorKeyboard.ts",
      "line": 86,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function applyEasyEase(params: EasyEaseParams): void {",
      "context": {
        "before": [
          "/**",
          " * Apply easy ease to selected keyframes",
          " */"
        ],
        "after": [
          "  const { selectedKeyframes, animatableProperties, direction } = params;",
          "",
          "  for (const sk of selectedKeyframes) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorKeyboard.ts:161:54",
      "file": "composables/useCurveEditorKeyboard.ts",
      "line": 161,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "return function handleKeyDown(event: KeyboardEvent): void {",
      "context": {
        "before": [
          "    drawGraph,",
          "  } = options;",
          ""
        ],
        "after": [
          "    // F9 Easy Ease",
          "    if (event.key === \"F9\") {",
          "      event.preventDefault();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:56:2",
      "file": "composables/useCurveEditorView.ts",
      "line": 56,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function fitToView(",
          "  viewState: CurveViewState,",
          "  visibleProperties: AnimatableProperty<any>[],"
        ],
        "after": [
          "  if (visibleProperties.length === 0) return;",
          "",
          "  let minFrame = Infinity;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:91:2",
      "file": "composables/useCurveEditorView.ts",
      "line": 91,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  viewState: CurveViewState,",
          "  selectedKeyframes: SelectedKeyframe[],",
          "  visibleProperties: AnimatableProperty<any>[],"
        ],
        "after": [
          "  if (selectedKeyframes.length === 0) {",
          "    fitToView(viewState, visibleProperties);",
          "    return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:126:50",
      "file": "composables/useCurveEditorView.ts",
      "line": 126,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function zoomIn(viewState: CurveViewState): void {",
      "context": {
        "before": [
          "/**",
          " * Zoom in (decrease frame/value range)",
          " */"
        ],
        "after": [
          "  const centerFrame = (viewState.frameStart + viewState.frameEnd) / 2;",
          "  const frameRange = viewState.frameEnd - viewState.frameStart;",
          "  viewState.frameStart = centerFrame - frameRange * 0.4;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:136:51",
      "file": "composables/useCurveEditorView.ts",
      "line": 136,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function zoomOut(viewState: CurveViewState): void {",
      "context": {
        "before": [
          "/**",
          " * Zoom out (increase frame/value range)",
          " */"
        ],
        "after": [
          "  const centerFrame = (viewState.frameStart + viewState.frameEnd) / 2;",
          "  const frameRange = viewState.frameEnd - viewState.frameStart;",
          "  viewState.frameStart = centerFrame - frameRange * 0.6;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:153:2",
      "file": "composables/useCurveEditorView.ts",
      "line": 153,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  canvasHeight: number,",
          "  canvasRect: DOMRect,",
          "  margin: CurveMargin = DEFAULT_CURVE_MARGIN,"
        ],
        "after": [
          "  event.preventDefault();",
          "",
          "  const x = event.clientX - canvasRect.left;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useCurveEditorView.ts:199:2",
      "file": "composables/useCurveEditorView.ts",
      "line": 199,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  canvasWidth: number,",
          "  canvasHeight: number,",
          "  margin: CurveMargin = DEFAULT_CURVE_MARGIN,"
        ],
        "after": [
          "  const graphWidth = canvasWidth - margin.left - margin.right;",
          "  const graphHeight = canvasHeight - margin.top - margin.bottom;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useExpressionEditor.ts:53:58",
      "file": "composables/useExpressionEditor.ts",
      "line": 53,
      "column": 58,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (expression.type === \"custom\" && expression.params?.code) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // SECURITY: Validate custom expressions before applying"
        ],
        "after": [
          "      const code = expression.params.code as string;",
          "      const safe = await isExpressionSafe(code);",
          "      if (!safe) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:163:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 163,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.transform) continue;",
      "context": {
        "before": [
          "",
          "    for (const layerId of selectedIds) {",
          "      const layer = layerStore.getLayerById(store, layerId);"
        ],
        "after": [
          "",
          "      const transform = layer.transform;",
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:169:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 169,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:169:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 169,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:183:24",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 183,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.opacity?.animated && layer.opacity?.keyframes) {",
      "context": {
        "before": [
          "        }",
          "      }",
          ""
        ],
        "after": [
          "        for (const kf of layer.opacity.keyframes) {",
          "          keyframeStore.setKeyframeInterpolation(store, layerId, \"opacity\", kf.id, \"bezier\");",
          "          keyframesUpdated++;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:183:51",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 183,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.opacity?.animated && layer.opacity?.keyframes) {",
      "context": {
        "before": [
          "        }",
          "      }",
          ""
        ],
        "after": [
          "        for (const kf of layer.opacity.keyframes) {",
          "          keyframeStore.setKeyframeInterpolation(store, layerId, \"opacity\", kf.id, \"bezier\");",
          "          keyframesUpdated++;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:206:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 206,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.transform) continue;",
      "context": {
        "before": [
          "",
          "    for (const layerId of selectedIds) {",
          "      const layer = layerStore.getLayerById(store, layerId);"
        ],
        "after": [
          "",
          "      const transform = layer.transform;",
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:212:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 212,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:212:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 212,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:258:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 258,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.transform) continue;",
      "context": {
        "before": [
          "",
          "    for (const layerId of selectedIds) {",
          "      const layer = layerStore.getLayerById(store, layerId);"
        ],
        "after": [
          "",
          "      const transform = layer.transform;",
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:264:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 264,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:264:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 264,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:314:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 314,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.transform) continue;",
      "context": {
        "before": [
          "",
          "    for (const layerId of selectedIds) {",
          "      const layer = layerStore.getLayerById(store, layerId);"
        ],
        "after": [
          "",
          "      const transform = layer.transform;",
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:320:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 320,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            if (kf.frame < currentFrame && kf.frame > prevFrame) {",
          "              prevFrame = kf.frame;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:320:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 320,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            if (kf.frame < currentFrame && kf.frame > prevFrame) {",
          "              prevFrame = kf.frame;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:344:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 344,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.transform) continue;",
      "context": {
        "before": [
          "",
          "    for (const layerId of selectedIds) {",
          "      const layer = layerStore.getLayerById(store, layerId);"
        ],
        "after": [
          "",
          "      const transform = layer.transform;",
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:350:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 350,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            if (kf.frame > currentFrame && kf.frame < nextFrame) {",
          "              nextFrame = kf.frame;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:350:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 350,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            if (kf.frame > currentFrame && kf.frame < nextFrame) {",
          "              nextFrame = kf.frame;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:718:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 718,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "store.setTimelineZoom?.(timelineZoom.value);",
      "context": {
        "before": [
          "",
          "  function zoomTimelineIn() {",
          "    timelineZoom.value = Math.min(timelineZoom.value * 1.5, 10);"
        ],
        "after": [
          "  }",
          "",
          "  function zoomTimelineOut() {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:723:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 723,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "store.setTimelineZoom?.(timelineZoom.value);",
      "context": {
        "before": [
          "",
          "  function zoomTimelineOut() {",
          "    timelineZoom.value = Math.max(timelineZoom.value / 1.5, 0.1);"
        ],
        "after": [
          "  }",
          "",
          "  function zoomTimelineToFit() {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:728:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 728,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "store.setTimelineZoom?.(1);",
      "context": {
        "before": [
          "",
          "  function zoomTimelineToFit() {",
          "    timelineZoom.value = 1;"
        ],
        "after": [
          "  }",
          "",
          "  // ========================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:739:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 739,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "threeCanvasRef.value.setZoom?.(viewerZoom.value);",
      "context": {
        "before": [
          "  function zoomViewerIn() {",
          "    viewerZoom.value = Math.min(viewerZoom.value * 1.25, 8);",
          "    if (threeCanvasRef.value) {"
        ],
        "after": [
          "    }",
          "    const percent = Math.round(viewerZoom.value * 100);",
          "    viewZoom.value = String(percent);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:748:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 748,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "threeCanvasRef.value.setZoom?.(viewerZoom.value);",
      "context": {
        "before": [
          "  function zoomViewerOut() {",
          "    viewerZoom.value = Math.max(viewerZoom.value / 1.25, 0.1);",
          "    if (threeCanvasRef.value) {"
        ],
        "after": [
          "    }",
          "    const percent = Math.round(viewerZoom.value * 100);",
          "    viewZoom.value = String(percent);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:758:37",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 758,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "threeCanvasRef.value.fitToView?.();",
      "context": {
        "before": [
          "    viewerZoom.value = 1;",
          "    viewZoom.value = \"fit\";",
          "    if (threeCanvasRef.value) {"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:766:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 766,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "threeCanvasRef.value.setZoom?.(1);",
      "context": {
        "before": [
          "    viewerZoom.value = 1;",
          "    viewZoom.value = \"100\";",
          "    if (threeCanvasRef.value) {"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:781:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 781,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.transform) continue;",
      "context": {
        "before": [
          "",
          "    for (const layerId of selectedIds) {",
          "      const layer = layerStore.getLayerById(store, layerId);"
        ],
        "after": [
          "",
          "      const transform = layer.transform;",
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:787:17",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 787,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:787:35",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 787,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.animated && prop?.keyframes) {",
      "context": {
        "before": [
          "      const easingKeys: EasingTransformKey[] = [\"position\", \"scale\", \"rotation\", \"anchor\"];",
          "      for (const propKey of easingKeys) {",
          "        const prop = getTransformProperty(transform, propKey);"
        ],
        "after": [
          "          for (const kf of prop.keyframes) {",
          "            keyframeStore.setKeyframeInterpolation(",
          "              store,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:840:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 840,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerW = data?.width || compW;",
      "context": {
        "before": [
          "      if (!layer) continue;",
          "",
          "      const data = layer.data as unknown as LayerDataWithDimensions;"
        ],
        "after": [
          "      const layerH = data?.height || compH;",
          "",
          "      const scaleX = compW / layerW;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:841:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 841,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerH = data?.height || compH;",
      "context": {
        "before": [
          "",
          "      const data = layer.data as unknown as LayerDataWithDimensions;",
          "      const layerW = data?.width || compW;"
        ],
        "after": [
          "",
          "      const scaleX = compW / layerW;",
          "      const scaleY = compH / layerH;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:871:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 871,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerW = data?.width || compW;",
      "context": {
        "before": [
          "      if (!layer) continue;",
          "",
          "      const data = layer.data as unknown as LayerDataWithDimensions;"
        ],
        "after": [
          "",
          "      const scale = compW / layerW;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:894:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 894,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerH = data?.height || compH;",
      "context": {
        "before": [
          "      if (!layer) continue;",
          "",
          "      const data = layer.data as unknown as LayerDataWithDimensions;"
        ],
        "after": [
          "",
          "      const scale = compH / layerH;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:933:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 933,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerW = data?.width || compWidth.value;",
      "context": {
        "before": [
          "      if (!layer) continue;",
          "",
          "      const data = layer.data as unknown as LayerDataWithDimensions;"
        ],
        "after": [
          "      const layerH = data?.height || compHeight.value;",
          "",
          "      const centerX = layerW / 2;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:934:26",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 934,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerH = data?.height || compHeight.value;",
      "context": {
        "before": [
          "",
          "      const data = layer.data as unknown as LayerDataWithDimensions;",
          "      const layerW = data?.width || compWidth.value;"
        ],
        "after": [
          "",
          "      const centerX = layerW / 2;",
          "      const centerY = layerH / 2;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:941:45",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 941,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const currentAnchor = transform.origin?.value ??",
      "context": {
        "before": [
          "",
          "      const transform = layer.transform;",
          "      // Use 'origin' (new name) or fall back to 'anchorPoint' (deprecated)"
        ],
        "after": [
          "        transform.anchorPoint?.value ?? { x: 0, y: 0, z: 0 };",
          "      const currentPos = transform.position?.value ?? { x: 0, y: 0, z: 0 };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:942:30",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 942,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.anchorPoint?.value ?? { x: 0, y: 0, z: 0 };",
      "context": {
        "before": [
          "      const transform = layer.transform;",
          "      // Use 'origin' (new name) or fall back to 'anchorPoint' (deprecated)",
          "      const currentAnchor = transform.origin?.value ??"
        ],
        "after": [
          "      const currentPos = transform.position?.value ?? { x: 0, y: 0, z: 0 };",
          "",
          "      const offsetX = centerX - (currentAnchor.x || 0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:943:44",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 943,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const currentPos = transform.position?.value ?? { x: 0, y: 0, z: 0 };",
      "context": {
        "before": [
          "      // Use 'origin' (new name) or fall back to 'anchorPoint' (deprecated)",
          "      const currentAnchor = transform.origin?.value ??",
          "        transform.anchorPoint?.value ?? { x: 0, y: 0, z: 0 };"
        ],
        "after": [
          "",
          "      const offsetX = centerX - (currentAnchor.x || 0);",
          "      const offsetY = centerY - (currentAnchor.y || 0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:976:44",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 976,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const currentPos = transform.position?.value ?? { x: 0, y: 0, z: 0 };",
      "context": {
        "before": [
          "      if (!layer) continue;",
          "",
          "      const transform = layer.transform;"
        ],
        "after": [
          "",
          "      layerStore.updateLayerTransform(store, id, {",
          "        position: { x: centerX, y: centerY, z: currentPos.z || 0 },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1018:13",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1018,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.assetId) {",
      "context": {
        "before": [
          "    const data = layer.data as unknown as LayerDataWithDimensions;",
          "    let assetId: string | null = null;",
          ""
        ],
        "after": [
          "      assetId = data.assetId;",
          "    } else if (layer.type === \"nestedComp\") {",
          "      if (data?.compositionId) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1021:15",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1021,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.compositionId) {",
      "context": {
        "before": [
          "    if (data?.assetId) {",
          "      assetId = data.assetId;",
          "    } else if (layer.type === \"nestedComp\") {"
        ],
        "after": [
          "        leftTab.value = \"comps\";",
          "        console.log(",
          "          `[Lattice] Revealed nested comp source: ${data.compositionId}`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1059:19",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1059,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.keyframes && Array.isArray(prop.keyframes)) {",
      "context": {
        "before": [
          "        const easingKeys: EasingTransformKey[] = [\"position\", \"rotation\", \"scale\", \"anchor\"];",
          "        for (const propName of easingKeys) {",
          "          const prop = getTransformProperty(transform, propName);"
        ],
        "after": [
          "            for (const kf of prop.keyframes) {",
          "              if (kf.id) keyframeIds.push(kf.id);",
          "            }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1069:49",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1069,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "const checkForKeyframes = (obj: unknown): void => {",
      "context": {
        "before": [
          "",
          "      const data = layer.data as unknown as LayerDataWithDimensions;",
          "      if (data) {"
        ],
        "after": [
          "          if (!obj || typeof obj !== \"object\" || obj === null) return;",
          "          if (Array.isArray((obj as Record<string, unknown>).keyframes)) {",
          "            const keyframes = (obj as Record<string, unknown>).keyframes as Array<{ id?: string }>;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1142:47",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1142,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const ext = file.name.split(\".\").pop()?.toLowerCase();",
      "context": {
        "before": [
          "",
          "      // Use Array.from() for explicit iteration (FileList is array-like)",
          "      for (const file of Array.from(files)) {"
        ],
        "after": [
          "        if (ext === \"svg\") {",
          "          await assetStore.importSvgFromFile(file);",
          "        } else if ([\"hdr\", \"exr\"].includes(ext || \"\")) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1154:22",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1154,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer?.data) {",
      "context": {
        "before": [
          "          img.onload = () => {",
          "            const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "            const layer = layerStore.createLayer(store, \"image\", layerName);"
        ],
        "after": [
          "              const data = layer.data as unknown as Record<string, unknown>;",
          "              data.src = url;",
          "              data.width = img.width;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1168:60",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1168,
      "column": 60,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (result.status === \"success\" && result.layer?.data) {",
      "context": {
        "before": [
          "          const url = URL.createObjectURL(file);",
          "          const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "          layerStore.createVideoLayer(store, file).then((result) => {"
        ],
        "after": [
          "              const data = result.layer.data as unknown as Record<string, unknown>;",
          "              data.originalFilename = file.name;",
          "            }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1178:20",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1178,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer?.data) {",
      "context": {
        "before": [
          "          const url = URL.createObjectURL(file);",
          "          const layerName = file.name.replace(/\\.[^/.]+$/, \"\");",
          "          const layer = layerStore.createLayer(store, \"model\", layerName);"
        ],
        "after": [
          "            const data = layer.data as unknown as Record<string, unknown>;",
          "            data.src = url;",
          "            data.format = ext;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1213:29",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1213,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "document.activeElement?.tagName === \"INPUT\" ||",
      "context": {
        "before": [
          "  function handleKeydown(e: KeyboardEvent) {",
          "    // Don't handle if input is focused",
          "    if ("
        ],
        "after": [
          "      document.activeElement?.tagName === \"TEXTAREA\"",
          "    ) {",
          "      return;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useKeyboardShortcuts.ts:1214:29",
      "file": "composables/useKeyboardShortcuts.ts",
      "line": 1214,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "document.activeElement?.tagName === \"TEXTAREA\"",
      "context": {
        "before": [
          "    // Don't handle if input is focused",
          "    if (",
          "      document.activeElement?.tagName === \"INPUT\" ||"
        ],
        "after": [
          "    ) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useShapeDrawing.ts:349:32",
      "file": "composables/useShapeDrawing.ts",
      "line": 349,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "...newLayer.transform?.position,",
      "context": {
        "before": [
          "      transform: {",
          "        ...newLayer.transform,",
          "        position: {"
        ],
        "after": [
          "          value: { x: centerX, y: centerY, z: 0 },",
          "        },",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:445:25",
      "file": "composables/useSplineInteraction.ts",
      "line": 445,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (dragTarget.value?.type === \"newPoint\") {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Generate curve preview when dragging new point"
        ],
        "after": [
          "      const points = visibleControlPoints.value;",
          "      if (points.length >= 1) {",
          "        const newPoint = points.find((p) => p.id === dragTarget.value?.pointId);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:448:70",
      "file": "composables/useSplineInteraction.ts",
      "line": 448,
      "column": 70,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const newPoint = points.find((p) => p.id === dragTarget.value?.pointId);",
      "context": {
        "before": [
          "    if (dragTarget.value?.type === \"newPoint\") {",
          "      const points = visibleControlPoints.value;",
          "      if (points.length >= 1) {"
        ],
        "after": [
          "        const newPointIndex = points.indexOf(newPoint!);",
          "        const prevPointIndex = newPointIndex - 1;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:453:47",
      "file": "composables/useSplineInteraction.ts",
      "line": 453,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;",
      "context": {
        "before": [
          "        const prevPointIndex = newPointIndex - 1;",
          "",
          "        const layerPos = inverseTransformPoint(pos);"
        ],
        "after": [
          "        const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
          "",
          "        if (newPoint && prevPointIndex >= 0) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:453:65",
      "file": "composables/useSplineInteraction.ts",
      "line": 453,
      "column": 65,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;",
      "context": {
        "before": [
          "        const prevPointIndex = newPointIndex - 1;",
          "",
          "        const layerPos = inverseTransformPoint(pos);"
        ],
        "after": [
          "        const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
          "",
          "        if (newPoint && prevPointIndex >= 0) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:454:47",
      "file": "composables/useSplineInteraction.ts",
      "line": 454,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
      "context": {
        "before": [
          "",
          "        const layerPos = inverseTransformPoint(pos);",
          "        const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;"
        ],
        "after": [
          "",
          "        if (newPoint && prevPointIndex >= 0) {",
          "          const prevPoint = points[prevPointIndex];"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:454:65",
      "file": "composables/useSplineInteraction.ts",
      "line": 454,
      "column": 65,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rawNewPointY = (newPoint as any)?.rawY ?? newPoint?.y ?? 0;",
      "context": {
        "before": [
          "",
          "        const layerPos = inverseTransformPoint(pos);",
          "        const rawNewPointX = (newPoint as any)?.rawX ?? newPoint?.x ?? 0;"
        ],
        "after": [
          "",
          "        if (newPoint && prevPointIndex >= 0) {",
          "          const prevPoint = points[prevPointIndex];"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:506:44",
      "file": "composables/useSplineInteraction.ts",
      "line": 506,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const point = layerData.controlPoints?.find(",
      "context": {
        "before": [
          "      if (!layer || !isSplineOrPathType(layer.type)) return;",
          "",
          "      const layerData = layer.data as SplineData | PathLayerData;"
        ],
        "after": [
          "        (p) => p.id === dragTarget.value?.pointId,",
          "      );",
          "      if (!point) return;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:507:41",
      "file": "composables/useSplineInteraction.ts",
      "line": 507,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(p) => p.id === dragTarget.value?.pointId,",
      "context": {
        "before": [
          "",
          "      const layerData = layer.data as SplineData | PathLayerData;",
          "      const point = layerData.controlPoints?.find("
        ],
        "after": [
          "      );",
          "      if (!point) return;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:633:46",
      "file": "composables/useSplineInteraction.ts",
      "line": 633,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const point = layerData.controlPoints?.find(",
      "context": {
        "before": [
          "      const layer = store.layers.find((l: any) => l.id === layerId.value);",
          "      if (layer && isSplineOrPathType(layer.type)) {",
          "        const layerData = layer.data as SplineData | PathLayerData;"
        ],
        "after": [
          "          (p) => p.id === dragTarget.value?.pointId,",
          "        );",
          "        if (point?.handleOut && dragTarget.value.type === \"handleOut\") {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:634:43",
      "file": "composables/useSplineInteraction.ts",
      "line": 634,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(p) => p.id === dragTarget.value?.pointId,",
      "context": {
        "before": [
          "      if (layer && isSplineOrPathType(layer.type)) {",
          "        const layerData = layer.data as SplineData | PathLayerData;",
          "        const point = layerData.controlPoints?.find("
        ],
        "after": [
          "        );",
          "        if (point?.handleOut && dragTarget.value.type === \"handleOut\") {",
          "          const dx = point.handleOut.x - point.x;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useSplineInteraction.ts:636:18",
      "file": "composables/useSplineInteraction.ts",
      "line": 636,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (point?.handleOut && dragTarget.value.type === \"handleOut\") {",
      "context": {
        "before": [
          "        const point = layerData.controlPoints?.find(",
          "          (p) => p.id === dragTarget.value?.pointId,",
          "        );"
        ],
        "after": [
          "          const dx = point.handleOut.x - point.x;",
          "          const dy = point.handleOut.y - point.y;",
          "          const dist = Math.sqrt(dx * dx + dy * dy);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "composables/useViewportControls.ts:97:17",
      "file": "composables/useViewportControls.ts",
      "line": 97,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(newZoom) || newZoom <= 0) {",
      "context": {
        "before": [
          "   */",
          "  function setZoom(newZoom: number) {",
          "    // Reject invalid input to prevent viewport state corruption"
        ],
        "after": [
          "      console.warn(",
          "        `[ViewportControls] Invalid zoom value: ${newZoom}. Must be a positive finite number.`,",
          "      );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "composables/useViewportControls.ts:173:19",
      "file": "composables/useViewportControls.ts",
      "line": 173,
      "column": 19,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (!Number.isNaN(newZoom)) {",
      "context": {
        "before": [
          "      fitToView();",
          "    } else {",
          "      const newZoom = parseFloat(zoomLevel.value);"
        ],
        "after": [
          "        setZoom(newZoom);",
          "        if (engine.value) {",
          "          engine.value.getCameraController().setZoom(newZoom);"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "composables/useViewportControls.ts:208:17",
      "file": "composables/useViewportControls.ts",
      "line": 208,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(scaleX) || scaleX === 0) {",
      "context": {
        "before": [
          "    const scaleX = vpt[0];",
          "    const scaleY = vpt[3];",
          ""
        ],
        "after": [
          "      console.warn(",
          "        `[ViewportControls] Invalid scaleX in viewportTransform: ${scaleX}`,",
          "      );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "composables/useViewportControls.ts:214:17",
      "file": "composables/useViewportControls.ts",
      "line": 214,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(scaleY) || scaleY === 0) {",
      "context": {
        "before": [
          "      );",
          "      return { x: 0, y: 0 };",
          "    }"
        ],
        "after": [
          "      console.warn(",
          "        `[ViewportControls] Invalid scaleY in viewportTransform: ${scaleY}`,",
          "      );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "composables/useViewportControls.ts:222:25",
      "file": "composables/useViewportControls.ts",
      "line": 222,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const panX = Number.isFinite(vpt[4]) ? vpt[4] : 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Safely extract pan offsets with NaN guards"
        ],
        "after": [
          "    const panY = Number.isFinite(vpt[5]) ? vpt[5] : 0;",
          "",
          "    return {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "composables/useViewportControls.ts:223:25",
      "file": "composables/useViewportControls.ts",
      "line": 223,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const panY = Number.isFinite(vpt[5]) ? vpt[5] : 0;",
      "context": {
        "before": [
          "",
          "    // Safely extract pan offsets with NaN guards",
          "    const panX = Number.isFinite(vpt[4]) ? vpt[4] : 0;"
        ],
        "after": [
          "",
          "    return {",
          "      x: (screenX - panX) / scaleX,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:149:19",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 149,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!outHandle?.enabled && !inHandle?.enabled) {",
      "context": {
        "before": [
          "    const outHandle = prevKeyframe.outHandle;",
          "    const inHandle = nextKeyframe.inHandle;",
          ""
        ],
        "after": [
          "      return t; // No handles, use linear",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:149:41",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 149,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!outHandle?.enabled && !inHandle?.enabled) {",
      "context": {
        "before": [
          "    const outHandle = prevKeyframe.outHandle;",
          "    const inHandle = nextKeyframe.inHandle;",
          ""
        ],
        "after": [
          "      return t; // No handles, use linear",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:159:19",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 159,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: outHandle?.enabled",
      "context": {
        "before": [
          "    // Control points for cubic bezier",
          "    const p0 = { x: 0, y: 0 };",
          "    const p1 = {"
        ],
        "after": [
          "        ? Math.min(1, Math.max(0, outHandle.frame / frameDiff))",
          "        : 0.33,",
          "      y: outHandle?.enabled ? outHandle.value : 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:162:19",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 162,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: outHandle?.enabled ? outHandle.value : 0,",
      "context": {
        "before": [
          "      x: outHandle?.enabled",
          "        ? Math.min(1, Math.max(0, outHandle.frame / frameDiff))",
          "        : 0.33,"
        ],
        "after": [
          "    };",
          "    const p2 = {",
          "      x: inHandle?.enabled"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:165:18",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 165,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: inHandle?.enabled",
      "context": {
        "before": [
          "      y: outHandle?.enabled ? outHandle.value : 0,",
          "    };",
          "    const p2 = {"
        ],
        "after": [
          "        ? Math.min(1, Math.max(0, 1 + inHandle.frame / frameDiff))",
          "        : 0.67,",
          "      y: inHandle?.enabled ? 1 + inHandle.value : 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:168:18",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 168,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: inHandle?.enabled ? 1 + inHandle.value : 1,",
      "context": {
        "before": [
          "      x: inHandle?.enabled",
          "        ? Math.min(1, Math.max(0, 1 + inHandle.frame / frameDiff))",
          "        : 0.67,"
        ],
        "after": [
          "    };",
          "    const p3 = { x: 1, y: 1 };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/animation/KeyframeEvaluator.ts:397:15",
      "file": "engine/animation/KeyframeEvaluator.ts",
      "line": 397,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear the evaluation cache",
          "   */"
        ],
        "after": [
          "    this.cache.clear();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/BackgroundManager.ts:44:46",
      "file": "engine/BackgroundManager.ts",
      "line": 44,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBackgroundImage(image: HTMLImageElement): void {",
      "context": {
        "before": [
          "   * Set a background image for the composition",
          "   * @param image - HTMLImageElement to use as background",
          "   */"
        ],
        "after": [
          "    // Remove existing background",
          "    if (this.backgroundImage) {",
          "      this.scene.removeFromComposition(this.backgroundImage);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/BackgroundManager.ts:80:4",
      "file": "engine/BackgroundManager.ts",
      "line": 80,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  setDepthMap(",
          "    image: HTMLImageElement,",
          "    options: { colormap?: ColormapType; opacity?: number; visible?: boolean },"
        ],
        "after": [
          "    this.depthMapSettings = {",
          "      colormap: options.colormap ?? this.depthMapSettings.colormap,",
          "      opacity: options.opacity ?? this.depthMapSettings.opacity,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/BackgroundManager.ts:113:43",
      "file": "engine/BackgroundManager.ts",
      "line": 113,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthOverlayVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set depth overlay visibility",
          "   */"
        ],
        "after": [
          "    this.depthMapSettings.visible = visible;",
          "    if (this.depthMapMesh) {",
          "      this.depthMapMesh.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/BackgroundManager.ts:123:43",
      "file": "engine/BackgroundManager.ts",
      "line": 123,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthColormap(colormap: ColormapType): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set depth colormap",
          "   */"
        ],
        "after": [
          "    this.depthMapSettings.colormap = colormap;",
          "    if (this.depthMapMesh) {",
          "      const material = this.depthMapMesh.material as THREE.ShaderMaterial;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/BackgroundManager.ts:134:35",
      "file": "engine/BackgroundManager.ts",
      "line": 134,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthOpacity(opacity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set depth overlay opacity",
          "   */"
        ],
        "after": [
          "    this.depthMapSettings.opacity = opacity;",
          "    if (this.depthMapMesh) {",
          "      const material = this.depthMapMesh.material as THREE.ShaderMaterial;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/BackgroundManager.ts:166:12",
      "file": "engine/BackgroundManager.ts",
      "line": 166,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    if (this.backgroundImage) {",
          "      this.scene.removeFromComposition(this.backgroundImage);",
          "      this.backgroundImage.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:99:53",
      "file": "engine/core/CameraController.ts",
      "line": 99,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enableOrbitControls(domElement: HTMLCanvasElement): void {",
      "context": {
        "before": [
          "   * Uses camera-controls library for smooth transitions",
          "   * @param domElement The canvas element to attach controls to",
          "   */"
        ],
        "after": [
          "    if (this.cameraControls) {",
          "      this.cameraControls.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:154:25",
      "file": "engine/core/CameraController.ts",
      "line": 154,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableOrbitControls(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Disable camera controls",
          "   */"
        ],
        "after": [
          "    if (this.cameraControls) {",
          "      this.cameraControls.dispose();",
          "      this.cameraControls = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:182:19",
      "file": "engine/core/CameraController.ts",
      "line": 182,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetToDefault(): void {",
      "context": {
        "before": [
          "   * Camera looks straight at composition center, no rotation/tilt",
          "   * This is the \"Sync to Home\" state - as if there's no 3D at all",
          "   */"
        ],
        "after": [
          "    // Calculate the exact distance needed to see full composition height",
          "    const fovRad = THREE.MathUtils.degToRad(this.defaultFov);",
          "    const distance = this.height / 2 / Math.tan(fovRad / 2);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:243:67",
      "file": "engine/core/CameraController.ts",
      "line": 243,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setOrbitTarget(x: number, y: number, z: number, animate = false): void {",
      "context": {
        "before": [
          "   * @param z - Z position",
          "   * @param animate - Whether to animate the transition (default: false)",
          "   */"
        ],
        "after": [
          "    this.target.set(x, -y, z);",
          "    if (this.cameraControls) {",
          "      this.cameraControls.setTarget("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:258:29",
      "file": "engine/core/CameraController.ts",
      "line": 258,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetOrbitTargetToCenter(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset orbit target to composition center",
          "   */"
        ],
        "after": [
          "    const centerX = this.width / 2;",
          "    const centerY = this.height / 2;",
          "    this.setOrbitTarget(centerX, centerY, 0);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:272:47",
      "file": "engine/core/CameraController.ts",
      "line": 272,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPosition(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "   * Set camera position",
          "   * Note: Y is negated for screen coordinates (Y down)",
          "   */"
        ],
        "after": [
          "    this.camera.position.set(x, -y, z);",
          "    this.camera.lookAt(this.target);",
          "    this.camera.updateProjectionMatrix();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:293:45",
      "file": "engine/core/CameraController.ts",
      "line": 293,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTarget(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "   * Set camera target (look-at point)",
          "   * Note: Y is negated for screen coordinates",
          "   */"
        ],
        "after": [
          "    this.target.set(x, -y, z);",
          "    this.camera.lookAt(this.target);",
          "    this.camera.updateProjectionMatrix();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:303:53",
      "file": "engine/core/CameraController.ts",
      "line": 303,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPositionDirect(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "   * Set camera position directly (no coordinate transformation)",
          "   * Used by MotionEngine when applying pre-evaluated camera state.",
          "   */"
        ],
        "after": [
          "    this.camera.position.set(x, -y, z);",
          "    this.camera.lookAt(this.target);",
          "    this.camera.updateProjectionMatrix();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:313:51",
      "file": "engine/core/CameraController.ts",
      "line": 313,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTargetDirect(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "   * Set camera target directly (no coordinate transformation)",
          "   * Used by MotionEngine when applying pre-evaluated camera state.",
          "   */"
        ],
        "after": [
          "    this.target.set(x, -y, z);",
          "    this.camera.lookAt(this.target);",
          "    this.camera.updateProjectionMatrix();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:333:47",
      "file": "engine/core/CameraController.ts",
      "line": 333,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRotation(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set camera rotation directly (Euler angles in degrees)",
          "   */"
        ],
        "after": [
          "    this.camera.rotation.set(",
          "      THREE.MathUtils.degToRad(x),",
          "      THREE.MathUtils.degToRad(y),"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:349:22",
      "file": "engine/core/CameraController.ts",
      "line": 349,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFOV(fov: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set field of view (in degrees)",
          "   */"
        ],
        "after": [
          "    this.camera.fov = THREE.MathUtils.clamp(fov, 1, 179);",
          "    this.camera.updateProjectionMatrix();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:364:43",
      "file": "engine/core/CameraController.ts",
      "line": 364,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setClipPlanes(near: number, far: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set near and far planes",
          "   */"
        ],
        "after": [
          "    this.camera.near = Math.max(0.001, near);",
          "    this.camera.far = Math.max(this.camera.near + 1, far);",
          "    this.camera.updateProjectionMatrix();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:382:24",
      "file": "engine/core/CameraController.ts",
      "line": 382,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setZoom(zoom: number): void {",
      "context": {
        "before": [
          "   * Set zoom level for viewport navigation",
          "   * This adjusts the camera's effective view without changing FOV",
          "   */"
        ],
        "after": [
          "    this.zoomLevel = Math.max(0.1, Math.min(10, zoom));",
          "    this.updateCameraForViewport();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:398:31",
      "file": "engine/core/CameraController.ts",
      "line": 398,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPan(x: number, y: number): void {",
      "context": {
        "before": [
          "   * Set pan offset for viewport navigation (in WORLD units, not screen pixels)",
          "   * Positive X pans right (camera moves left), positive Y pans down (camera moves up)",
          "   */"
        ],
        "after": [
          "    this.panOffset.set(x, y);",
          "    this.updateCameraForViewport();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:415:36",
      "file": "engine/core/CameraController.ts",
      "line": 415,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateCameraForViewport(): void {",
      "context": {
        "before": [
          "   * When camera controls are active and user has rotated, preserve the rotation.",
          "   * Otherwise, use straight-on 2D view.",
          "   */"
        ],
        "after": [
          "    // If camera controls are active and user has rotated the view, preserve it",
          "    if (this.cameraControls && this.orbitEnabled) {",
          "      // Just update the spherical radius for zoom"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:485:4",
      "file": "engine/core/CameraController.ts",
      "line": 485,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    viewportWidth: number,",
          "    viewportHeight: number,",
          "    padding: number = 40,"
        ],
        "after": [
          "    // Calculate available space",
          "    const availableWidth = viewportWidth - padding * 2;",
          "    const availableHeight = viewportHeight - padding * 2;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:516:54",
      "file": "engine/core/CameraController.ts",
      "line": 516,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnimationProperties(props: CameraAnimationProps): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set animated properties for keyframe evaluation",
          "   */"
        ],
        "after": [
          "    this.positionProp = props.position;",
          "    this.targetProp = props.target;",
          "    this.fovProp = props.fov;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:525:29",
      "file": "engine/core/CameraController.ts",
      "line": 525,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAnimationProperties(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear animation properties",
          "   */"
        ],
        "after": [
          "    this.positionProp = undefined;",
          "    this.targetProp = undefined;",
          "    this.fovProp = undefined;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:534:31",
      "file": "engine/core/CameraController.ts",
      "line": 534,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "evaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Evaluate animated properties at a given frame",
          "   */"
        ],
        "after": [
          "    if (this.positionProp) {",
          "      const pos = this.evaluator.evaluate(this.positionProp, frame);",
          "      this.setPosition(pos.x, pos.y, pos.z ?? this.camera.position.z);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:559:40",
      "file": "engine/core/CameraController.ts",
      "line": 559,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resize(width: number, height: number): void {",
      "context": {
        "before": [
          "   * Resize camera for new COMPOSITION dimensions",
          "   * Note: The aspect ratio should be set separately using setViewportAspect()",
          "   */"
        ],
        "after": [
          "    console.log(",
          "      `[CameraController] resize: NEW comp=${width}x${height} (was ${this.width}x${this.height})`,",
          "    );"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:577:67",
      "file": "engine/core/CameraController.ts",
      "line": 577,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setViewportAspect(viewportWidth: number, viewportHeight: number): void {",
      "context": {
        "before": [
          "   * Set camera aspect ratio to match viewport dimensions",
          "   * This should be called with VIEWPORT dimensions, not composition",
          "   */"
        ],
        "after": [
          "    this.camera.aspect = viewportWidth / viewportHeight;",
          "    this.camera.updateProjectionMatrix();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:658:40",
      "file": "engine/core/CameraController.ts",
      "line": 658,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setState(state: Partial<CameraState>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set complete camera state",
          "   */"
        ],
        "after": [
          "    if (state.position) {",
          "      this.setPosition(state.position.x, state.position.y, state.position.z);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:679:10",
      "file": "engine/core/CameraController.ts",
      "line": 679,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset camera to default position for current composition size",
          "   */"
        ],
        "after": [
          "    const fovRad = THREE.MathUtils.degToRad(50);",
          "    const distance = this.height / 2 / Math.tan(fovRad / 2);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:727:20",
      "file": "engine/core/CameraController.ts",
      "line": 727,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enableOrbitMode(): void {",
      "context": {
        "before": [
          "   * Enable orbit mode for 3D navigation",
          "   * In orbit mode, the camera orbits around the target point",
          "   */"
        ],
        "after": [
          "    this.orbitEnabled = true;",
          "    // Calculate current spherical coordinates from camera position",
          "    const offset = new THREE.Vector3().subVectors("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:744:21",
      "file": "engine/core/CameraController.ts",
      "line": 744,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableOrbitMode(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Disable orbit mode (return to pan/zoom mode)",
          "   */"
        ],
        "after": [
          "    this.orbitEnabled = false;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:760:46",
      "file": "engine/core/CameraController.ts",
      "line": 760,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "orbit(deltaTheta: number, deltaPhi: number): void {",
      "context": {
        "before": [
          "   * @param deltaTheta - Horizontal rotation in radians (around Y axis)",
          "   * @param deltaPhi - Vertical rotation in radians (around X axis)",
          "   */"
        ],
        "after": [
          "    if (!this.orbitEnabled) return;",
          "",
          "    // Update spherical coordinates"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:778:23",
      "file": "engine/core/CameraController.ts",
      "line": 778,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dolly(delta: number): void {",
      "context": {
        "before": [
          "   * Dolly (zoom in/out) in orbit mode",
          "   * @param delta - Positive to zoom in, negative to zoom out",
          "   */"
        ],
        "after": [
          "    if (!this.orbitEnabled) {",
          "      // In non-orbit mode, use regular zoom",
          "      this.setZoom(this.zoomLevel * (1 + delta * 0.1));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:800:43",
      "file": "engine/core/CameraController.ts",
      "line": 800,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "orbitPan(deltaX: number, deltaY: number): void {",
      "context": {
        "before": [
          "   * @param deltaX - Horizontal pan in screen pixels",
          "   * @param deltaY - Vertical pan in screen pixels",
          "   */"
        ],
        "after": [
          "    if (!this.orbitEnabled) {",
          "      // Use regular pan",
          "      this.setPan(this.panOffset.x + deltaX, this.panOffset.y + deltaY);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:828:38",
      "file": "engine/core/CameraController.ts",
      "line": 828,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateCameraFromSpherical(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update camera position from spherical coordinates",
          "   */"
        ],
        "after": [
          "    // Convert spherical to Cartesian",
          "    const x =",
          "      this.spherical.radius *"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:874:4",
      "file": "engine/core/CameraController.ts",
      "line": 874,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  setViewPreset(",
          "    preset: keyof typeof CameraController.VIEW_PRESETS,",
          "    animate = false,"
        ],
        "after": [
          "    const view = CameraController.VIEW_PRESETS[preset];",
          "    if (!view) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:920:18",
      "file": "engine/core/CameraController.ts",
      "line": 920,
      "column": 18,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetTo2DView(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset camera to default 2D view (centered on composition)",
          "   */"
        ],
        "after": [
          "    this.disableOrbitMode();",
          "    this.panOffset.set(0, 0);",
          "    this.zoomLevel = 1;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:930:15",
      "file": "engine/core/CameraController.ts",
      "line": 930,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetOrbit(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset orbit to center on composition",
          "   */"
        ],
        "after": [
          "    // Set target to composition center",
          "    this.target.set(this.width / 2, -this.height / 2, 0);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:958:5",
      "file": "engine/core/CameraController.ts",
      "line": 958,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "  focusOnBounds(bounds: {",
          "    min: { x: number; y: number; z: number };",
          "    max: { x: number; y: number; z: number };"
        ],
        "after": [
          "    // Calculate center of bounds",
          "    const center = new THREE.Vector3(",
          "      (bounds.min.x + bounds.max.x) / 2,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:1005:4",
      "file": "engine/core/CameraController.ts",
      "line": 1005,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    width: number,",
          "    height: number,",
          "    z = 0,"
        ],
        "after": [
          "    this.focusOnBounds({",
          "      min: { x, y, z: z - 10 },",
          "      max: { x: x + width, y: y + height, z: z + 10 },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:1032:29",
      "file": "engine/core/CameraController.ts",
      "line": 1032,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "saveBookmark(name: string): void {",
      "context": {
        "before": [
          "   * Save current camera state as a bookmark",
          "   * @param name - Name for the bookmark",
          "   */"
        ],
        "after": [
          "    this.bookmarks.set(name, {",
          "      position: this.camera.position.clone(),",
          "      target: this.target.clone(),"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/CameraController.ts:1143:45",
      "file": "engine/core/CameraController.ts",
      "line": 1143,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "importBookmarks(data: Record<string, any>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Import bookmarks from JSON data",
          "   */"
        ],
        "after": [
          "    Object.entries(data).forEach(([name, value]) => {",
          "      this.bookmarks.set(name, {",
          "        position: new THREE.Vector3("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:138:4",
      "file": "engine/core/LayerManager.ts",
      "line": 138,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  setVideoMetadataCallback(",
          "    callback: (layerId: string, metadata: VideoMetadata) => void,"
        ],
        "after": [
          "    this.onVideoMetadataLoaded = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:146:63",
      "file": "engine/core/LayerManager.ts",
      "line": 146,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setNestedCompRenderContext(context: NestedCompRenderContext): void {",
      "context": {
        "before": [
          "   * Set the nested comp render context",
          "   * This allows nested comp layers to render nested compositions",
          "   */"
        ],
        "after": [
          "    this.nestedCompRenderContext = context;",
          "",
          "    // Update existing nested comp layers"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:161:65",
      "file": "engine/core/LayerManager.ts",
      "line": 161,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEffectLayerRenderContext(context: EffectLayerRenderContext): void {",
      "context": {
        "before": [
          "   * Set the effect layer render context",
          "   * This allows effect layers to render layers below them",
          "   */"
        ],
        "after": [
          "    this.effectLayerRenderContext = context;",
          "",
          "    // Update existing effect layers"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:169:19",
      "file": "engine/core/LayerManager.ts",
      "line": 169,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(layerData?.effectLayer || layerData?.adjustmentLayer)",
      "context": {
        "before": [
          "      const layerData = (layer as any).layerData;",
          "      if (",
          "        layer.type === \"solid\" &&"
        ],
        "after": [
          "      ) {",
          "        // Check if method exists before calling (SolidLayer doesn't have setRenderContext)",
          "        if (\"setRenderContext\" in layer) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:169:45",
      "file": "engine/core/LayerManager.ts",
      "line": 169,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(layerData?.effectLayer || layerData?.adjustmentLayer)",
      "context": {
        "before": [
          "      const layerData = (layer as any).layerData;",
          "      if (",
          "        layer.type === \"solid\" &&"
        ],
        "after": [
          "      ) {",
          "        // Check if method exists before calling (SolidLayer doesn't have setRenderContext)",
          "        if (\"setRenderContext\" in layer) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:180:63",
      "file": "engine/core/LayerManager.ts",
      "line": 180,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAdjustmentRenderContext(context: AdjustmentRenderContext): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use setEffectLayerRenderContext instead */"
        ],
        "after": [
          "    this.setEffectLayerRenderContext(context);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:191:4",
      "file": "engine/core/LayerManager.ts",
      "line": 191,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    getter: CameraGetter,",
          "    updater: CameraUpdater,",
          "    atFrameGetter?: import(\"../layers/CameraLayer\").CameraAtFrameGetter,"
        ],
        "after": [
          "    this.cameraGetter = getter;",
          "    this.cameraUpdater = updater;",
          "    this.cameraAtFrameGetter = atFrameGetter;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:212:45",
      "file": "engine/core/LayerManager.ts",
      "line": 212,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderer(renderer: THREE.WebGLRenderer): void {",
      "context": {
        "before": [
          "   * Set renderer for particle layers",
          "   * Must be called to enable GPU particle rendering",
          "   */"
        ],
        "after": [
          "    this.rendererRef = renderer;",
          "",
          "    // Update existing particle layers"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:226:33",
      "file": "engine/core/LayerManager.ts",
      "line": 226,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionFPS(fps: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set composition FPS for timing calculations",
          "   */"
        ],
        "after": [
          "    this.compositionFPS = fps;",
          "",
          "    // Update existing layers that need FPS"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:251:45",
      "file": "engine/core/LayerManager.ts",
      "line": 251,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCamera(camera: THREE.PerspectiveCamera): void {",
      "context": {
        "before": [
          "   * Set camera reference for particle systems",
          "   * Used for camera-relative effects (soft particles, depth culling)",
          "   */"
        ],
        "after": [
          "    this.cameraRef = camera;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:318:66",
      "file": "engine/core/LayerManager.ts",
      "line": 318,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private setupLayerCallbacks(layer: BaseLayer, layerData: Layer): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set up type-specific callbacks after layer creation",
          "   */"
        ],
        "after": [
          "    // Set composition FPS on all layers for time-based effects (Echo, Posterize Time, etc.)",
          "    layer.setCompositionFps(this.compositionFPS);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:326:35",
      "file": "engine/core/LayerManager.ts",
      "line": 326,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onVideoMetadataLoaded?.(layerData.id, metadata);",
      "context": {
        "before": [
          "    if (layer.type === \"video\" && this.onVideoMetadataLoaded) {",
          "      const videoLayer = layer as VideoLayer;",
          "      videoLayer.setMetadataCallback((metadata) => {"
        ],
        "after": [
          "      });",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:507:54",
      "file": "engine/core/LayerManager.ts",
      "line": 507,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "update(layerId: string, properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update a layer's properties",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "",
          "    if (!layer) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:523:4",
      "file": "engine/core/LayerManager.ts",
      "line": 523,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  batchUpdate(",
          "    updates: Array<{ id: string; properties: Partial<Layer> }>,"
        ],
        "after": [
          "    for (const { id, properties } of updates) {",
          "      this.update(id, properties);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:536:26",
      "file": "engine/core/LayerManager.ts",
      "line": 536,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "remove(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a layer by ID",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "",
          "    if (!layer) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:557:37",
      "file": "engine/core/LayerManager.ts",
      "line": 557,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeMultiple(layerIds: string[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove multiple layers",
          "   */"
        ],
        "after": [
          "    for (const id of layerIds) {",
          "      this.remove(id);",
          "    }"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:566:14",
      "file": "engine/core/LayerManager.ts",
      "line": 566,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeAll(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove all layers",
          "   */"
        ],
        "after": [
          "    for (const [_id, layer] of this.layers) {",
          "      this.scene.removeFromComposition(layer.getObject());",
          "      layer.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:597:4",
      "file": "engine/core/LayerManager.ts",
      "line": 597,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  applyEvaluatedState(",
          "    evaluatedLayers: readonly EvaluatedLayer[],",
          "    frame?: number,"
        ],
        "after": [
          "    const frameNum = frame ?? 0;",
          "    // Store current frame for particle spline queries",
          "    this.currentFrame = frameNum;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:637:34",
      "file": "engine/core/LayerManager.ts",
      "line": 637,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateParticleShadows(): void {",
      "context": {
        "before": [
          "   * Update shadow information for all particle layers from scene lights",
          "   * This should be called after lights have been updated",
          "   */"
        ],
        "after": [
          "    // Find all light layers that cast shadows",
          "    const shadowLights: THREE.Light[] = [];",
          "    for (const layer of this.layers.values()) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:643:42",
      "file": "engine/core/LayerManager.ts",
      "line": 643,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const light = lightLayer.getLight?.();",
      "context": {
        "before": [
          "    for (const layer of this.layers.values()) {",
          "      if (layer.type === \"light\") {",
          "        const lightLayer = layer as LightLayer;"
        ],
        "after": [
          "        if (light && light.castShadow && light.shadow?.map?.texture) {",
          "          shadowLights.push(light);",
          "        }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:644:54",
      "file": "engine/core/LayerManager.ts",
      "line": 644,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (light && light.castShadow && light.shadow?.map?.texture) {",
      "context": {
        "before": [
          "      if (layer.type === \"light\") {",
          "        const lightLayer = layer as LightLayer;",
          "        const light = lightLayer.getLight?.();"
        ],
        "after": [
          "          shadowLights.push(light);",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:644:59",
      "file": "engine/core/LayerManager.ts",
      "line": 644,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (light && light.castShadow && light.shadow?.map?.texture) {",
      "context": {
        "before": [
          "      if (layer.type === \"light\") {",
          "        const lightLayer = layer as LightLayer;",
          "        const light = lightLayer.getLight?.();"
        ],
        "after": [
          "          shadowLights.push(light);",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:676:4",
      "file": "engine/core/LayerManager.ts",
      "line": 676,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  evaluateFrame(",
          "    frame: number,",
          "    audioReactiveGetter?: LayerAudioReactiveGetter | null,"
        ],
        "after": [
          "    // Store current frame for particle spline queries",
          "    this.currentFrame = frame;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:708:68",
      "file": "engine/core/LayerManager.ts",
      "line": 708,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioReactiveCallback(getter: LayerAudioReactiveGetter | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the audio reactive getter callback",
          "   */"
        ],
        "after": [
          "    this.audioReactiveGetter = getter;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:716:69",
      "file": "engine/core/LayerManager.ts",
      "line": 716,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerDrivenValues(layerId: string, values: Map<string, number>): void {",
      "context": {
        "before": [
          "   * Set driven values for a specific layer",
          "   * Used by the expression/driver system to override animated properties",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "    if (layer) {",
          "      layer.setDrivenValues(values);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:726:42",
      "file": "engine/core/LayerManager.ts",
      "line": 726,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearLayerDrivenValues(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear driven values for a layer",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "    if (layer) {",
          "      layer.clearDrivenValues();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:736:25",
      "file": "engine/core/LayerManager.ts",
      "line": 736,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAllDrivenValues(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all driven values for all layers",
          "   */"
        ],
        "after": [
          "    for (const layer of this.layers.values()) {",
          "      layer.clearDrivenValues();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:753:52",
      "file": "engine/core/LayerManager.ts",
      "line": 753,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateTextPathConnections(frame?: number): void {",
      "context": {
        "before": [
          "   *",
          "   * @param frame - Optional frame number for animated spline/path evaluation",
          "   */"
        ],
        "after": [
          "    for (const layer of this.layers.values()) {",
          "      if (layer.type === \"text\") {",
          "        const textLayer = layer as TextLayer;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:943:69",
      "file": "engine/core/LayerManager.ts",
      "line": 943,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "connectTextToPath(textLayerId: string, pathLayerId: string | null): void {",
      "context": {
        "before": [
          "   * Connect a text layer to a spline or path layer",
          "   * Supports both 'spline' and 'path' layer types.",
          "   */"
        ],
        "after": [
          "    const textLayer = this.layers.get(textLayerId) as TextLayer | undefined;",
          "",
          "    if (!textLayer || textLayer.type !== \"text\") {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:984:36",
      "file": "engine/core/LayerManager.ts",
      "line": 984,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.layers.get(layerId)?.getObject() ?? null;",
      "context": {
        "before": [
          "   * Get a layer's Three.js object",
          "   */",
          "  getObject(layerId: string): THREE.Object3D | null {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1038:18",
      "file": "engine/core/LayerManager.ts",
      "line": 1038,
      "column": 18,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reorderLayers(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reorder layers in the scene based on their Z positions",
          "   */"
        ],
        "after": [
          "    this.scene.sortByZ();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1050:27",
      "file": "engine/core/LayerManager.ts",
      "line": 1050,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "rebuildParentHierarchy(): void {",
      "context": {
        "before": [
          "   * Rebuild the parenting hierarchy for all layers",
          "   * Call this after batch-adding layers to ensure proper parent-child relationships",
          "   */"
        ],
        "after": [
          "    // First pass: clear all parent relationships",
          "    for (const layer of this.layers.values()) {",
          "      if (layer.hasParent()) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1081:59",
      "file": "engine/core/LayerManager.ts",
      "line": 1081,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerParent(layerId: string, parentId: string | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set parent for a layer",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "    if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1113:40",
      "file": "engine/core/LayerManager.ts",
      "line": 1113,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerZ(layerId: string, z: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Move a layer to a specific Z position",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "    if (layer) {",
          "      layer.getObject().position.z = z;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1128:53",
      "file": "engine/core/LayerManager.ts",
      "line": 1128,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerVisible(layerId: string, visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set layer visibility",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "    if (layer) {",
          "      layer.setVisible(visible);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1151:32",
      "file": "engine/core/LayerManager.ts",
      "line": 1151,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "isolateLayer(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Isolate a layer (hide all others)",
          "   */"
        ],
        "after": [
          "    for (const [id, layer] of this.layers) {",
          "      layer.setVisible(id === layerId);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1158:29",
      "file": "engine/core/LayerManager.ts",
      "line": 1158,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "soloLayer(layerId: string): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use isolateLayer instead */"
        ],
        "after": [
          "    this.isolateLayer(layerId);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1165:17",
      "file": "engine/core/LayerManager.ts",
      "line": 1165,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "unisolateAll(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Unisolate all layers (show all)",
          "   */"
        ],
        "after": [
          "    for (const layer of this.layers.values()) {",
          "      layer.setVisible(true);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1172:14",
      "file": "engine/core/LayerManager.ts",
      "line": 1172,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "unsoloAll(): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use unisolateAll instead */"
        ],
        "after": [
          "    this.unisolateAll();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1194:4",
      "file": "engine/core/LayerManager.ts",
      "line": 1194,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "          frame: number,",
          "        ) => HTMLCanvasElement | null)",
          "      | null,"
        ],
        "after": [
          "    this.crossCompMatteGetter = getter;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1211:36",
      "file": "engine/core/LayerManager.ts",
      "line": 1211,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "processTrackMattes(frame: number): void {",
      "context": {
        "before": [
          "   *",
          "   * @param frame - Current frame number for animated evaluation",
          "   */"
        ],
        "after": [
          "    // Clear previous frame's matte canvases",
          "    this.matteCanvases.clear();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1292:22",
      "file": "engine/core/LayerManager.ts",
      "line": 1292,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": ").getSourceCanvas?.();",
      "context": {
        "before": [
          "    // In production, BaseLayer would expose a public getRenderedCanvas() method",
          "    const sourceCanvas = (",
          "      layer as unknown as { getSourceCanvas(): HTMLCanvasElement | null }"
        ],
        "after": [
          "",
          "    if (sourceCanvas) {",
          "      // Clone the canvas to avoid mutation issues"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1312:53",
      "file": "engine/core/LayerManager.ts",
      "line": 1312,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerMasks(layerId: string, masks: LayerMask[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update masks for a specific layer",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "    if (layer) {",
          "      layer.setMasks(masks);"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1322:35",
      "file": "engine/core/LayerManager.ts",
      "line": 1322,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearTrackMatte(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear track matte assignment for a layer",
          "   */"
        ],
        "after": [
          "    const layer = this.layers.get(layerId);",
          "    if (layer) {",
          "      layer.setTrackMatteCanvas(null);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1340:36",
      "file": "engine/core/LayerManager.ts",
      "line": 1340,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "const visit = (layerId: string): void => {",
      "context": {
        "before": [
          "    const visited = new Set<string>();",
          "    const visiting = new Set<string>(); // For cycle detection",
          ""
        ],
        "after": [
          "      if (visited.has(layerId)) return;",
          "      if (visiting.has(layerId)) {",
          "        layerLogger.warn("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/LayerManager.ts:1426:12",
      "file": "engine/core/LayerManager.ts",
      "line": 1426,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all layers and resources",
          "   */"
        ],
        "after": [
          "    for (const layer of this.layers.values()) {",
          "      this.scene.removeFromComposition(layer.getObject());",
          "      layer.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:323:31",
      "file": "engine/core/RenderPipeline.ts",
      "line": 323,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private setupDefaultPasses(): void {",
      "context": {
        "before": [
          "  // POST-PROCESSING",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Main render pass",
          "    const renderPass = new RenderPass(this.scene.scene, this.camera.camera);",
          "    this.composer.addPass(renderPass);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:336:26",
      "file": "engine/core/RenderPipeline.ts",
      "line": 336,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addPass(pass: PostPass): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add a post-processing pass",
          "   */"
        ],
        "after": [
          "    // Insert before output pass",
          "    const outputIndex = this.composer.passes.findIndex(",
          "      (p) => p.constructor.name === \"OutputPass\","
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:352:29",
      "file": "engine/core/RenderPipeline.ts",
      "line": 352,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removePass(pass: PostPass): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a post-processing pass",
          "   */"
        ],
        "after": [
          "    this.composer.removePass(pass);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:363:37",
      "file": "engine/core/RenderPipeline.ts",
      "line": 363,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDOF(config: Partial<DOFConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Configure depth of field effect",
          "   */"
        ],
        "after": [
          "    // Update config",
          "    this.dofConfig = { ...this.dofConfig, ...config };",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:392:28",
      "file": "engine/core/RenderPipeline.ts",
      "line": 392,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBokehPass(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create the bokeh (DOF) pass",
          "   */"
        ],
        "after": [
          "    const _scaledWidth = Math.floor(this.width * this.pixelRatio);",
          "    const _scaledHeight = Math.floor(this.height * this.pixelRatio);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:414:28",
      "file": "engine/core/RenderPipeline.ts",
      "line": 414,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateBokehPass(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update bokeh pass parameters",
          "   */"
        ],
        "after": [
          "    if (!this.bokehPass) return;",
          "",
          "    const uniforms = (this.bokehPass as any).uniforms;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:428:37",
      "file": "engine/core/RenderPipeline.ts",
      "line": 428,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFocusDistance(distance: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set focus distance (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setDOF({ focusDistance: distance });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:435:32",
      "file": "engine/core/RenderPipeline.ts",
      "line": 435,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAperture(aperture: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set aperture size (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setDOF({ aperture });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:442:34",
      "file": "engine/core/RenderPipeline.ts",
      "line": 442,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDOFEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable DOF (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setDOF({ enabled });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:453:39",
      "file": "engine/core/RenderPipeline.ts",
      "line": 453,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAO(config: Partial<SSAOConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Configure SSAO effect",
          "   */"
        ],
        "after": [
          "    this.ssaoConfig = { ...this.ssaoConfig, ...config };",
          "",
          "    if (this.ssaoConfig.enabled) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:479:27",
      "file": "engine/core/RenderPipeline.ts",
      "line": 479,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createSSAOPass(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create the SSAO pass",
          "   */"
        ],
        "after": [
          "    const scaledWidth = Math.floor(this.width * this.pixelRatio);",
          "    const scaledHeight = Math.floor(this.height * this.pixelRatio);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:506:27",
      "file": "engine/core/RenderPipeline.ts",
      "line": 506,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateSSAOPass(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update SSAO pass parameters",
          "   */"
        ],
        "after": [
          "    if (!this.ssaoPass) return;",
          "",
          "    this.ssaoPass.kernelRadius = this.ssaoConfig.kernelRadius;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:527:35",
      "file": "engine/core/RenderPipeline.ts",
      "line": 527,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAOEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable SSAO (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setSSAO({ enabled });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:534:38",
      "file": "engine/core/RenderPipeline.ts",
      "line": 534,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAOIntensity(intensity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set SSAO intensity (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setSSAO({ intensity });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:541:32",
      "file": "engine/core/RenderPipeline.ts",
      "line": 541,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAORadius(radius: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set SSAO kernel radius (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setSSAO({ kernelRadius: radius });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:553:41",
      "file": "engine/core/RenderPipeline.ts",
      "line": 553,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloom(config: Partial<BloomConfig>): void {",
      "context": {
        "before": [
          "   * Configure bloom effect",
          "   * Makes emissive objects (lights, particles) glow",
          "   */"
        ],
        "after": [
          "    this.bloomConfig = { ...this.bloomConfig, ...config };",
          "",
          "    if (this.bloomConfig.enabled) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:579:28",
      "file": "engine/core/RenderPipeline.ts",
      "line": 579,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBloomPass(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create the bloom pass",
          "   */"
        ],
        "after": [
          "    const scaledWidth = Math.floor(this.width * this.pixelRatio);",
          "    const scaledHeight = Math.floor(this.height * this.pixelRatio);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:614:28",
      "file": "engine/core/RenderPipeline.ts",
      "line": 614,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateBloomPass(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update bloom pass parameters",
          "   */"
        ],
        "after": [
          "    if (!this.bloomPass) return;",
          "",
          "    this.bloomPass.strength = this.bloomConfig.strength;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:625:36",
      "file": "engine/core/RenderPipeline.ts",
      "line": 625,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloomEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable bloom (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setBloom({ enabled });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:632:37",
      "file": "engine/core/RenderPipeline.ts",
      "line": 632,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloomStrength(strength: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set bloom intensity (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setBloom({ strength });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:639:39",
      "file": "engine/core/RenderPipeline.ts",
      "line": 639,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloomThreshold(threshold: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set bloom threshold (convenience method)",
          "   */"
        ],
        "after": [
          "    this.setBloom({ threshold });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:650:51",
      "file": "engine/core/RenderPipeline.ts",
      "line": 650,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlur(config: Partial<MotionBlurConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Configure motion blur",
          "   */"
        ],
        "after": [
          "    this.motionBlurConfig = { ...this.motionBlurConfig, ...config };",
          "",
          "    // Update processor settings"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:666:41",
      "file": "engine/core/RenderPipeline.ts",
      "line": 666,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlurEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable motion blur",
          "   */"
        ],
        "after": [
          "    this.setMotionBlur({ enabled });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:673:42",
      "file": "engine/core/RenderPipeline.ts",
      "line": 673,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlurType(type: MotionBlurType): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set motion blur type",
          "   */"
        ],
        "after": [
          "    this.setMotionBlur({ type });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:680:50",
      "file": "engine/core/RenderPipeline.ts",
      "line": 680,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlurShutterAngle(shutterAngle: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set shutter angle (0-720, 180 = standard film)",
          "   */"
        ],
        "after": [
          "    this.setMotionBlur({ shutterAngle });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:687:42",
      "file": "engine/core/RenderPipeline.ts",
      "line": 687,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlurPreset(presetName: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply a motion blur preset by name",
          "   */"
        ],
        "after": [
          "    const preset = MOTION_BLUR_PRESETS[presetName];",
          "    if (preset) {",
          "      this.setMotionBlur({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:722:11",
      "file": "engine/core/RenderPipeline.ts",
      "line": 722,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "render(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Render the current frame",
          "   */"
        ],
        "after": [
          "    try {",
          "      // Ensure layers are sorted by Z",
          "      this.scene.sortByZ();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:733:22",
      "file": "engine/core/RenderPipeline.ts",
      "line": 733,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.camera?.camera && !this.camera.camera.layers) {",
      "context": {
        "before": [
          "      this.scene.prepareForRender();",
          "",
          "      // Ensure camera has layers (cross-Three.js compatibility)"
        ],
        "after": [
          "        this.camera.camera.layers = new THREE.Layers();",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:748:50",
      "file": "engine/core/RenderPipeline.ts",
      "line": 748,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "renderToTarget(target: THREE.WebGLRenderTarget): void {",
      "context": {
        "before": [
          "  /**",
          "   * Render directly to a render target",
          "   */"
        ],
        "after": [
          "    const prevTarget = this.renderer.getRenderTarget();",
          "    this.renderer.setRenderTarget(target);",
          "    this.renderer.render(this.scene.scene, this.camera.camera);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:770:52",
      "file": "engine/core/RenderPipeline.ts",
      "line": 770,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderMode(mode: \"color\" | \"depth\" | \"normal\"): void {",
      "context": {
        "before": [
          "   * Uses post-processing to visualize depth/normals from the depth buffer",
          "   * This works with ALL geometry including text since it reads from the depth buffer",
          "   */"
        ],
        "after": [
          "    this.renderMode = mode;",
          "",
          "    // Remove existing visualization passes"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:1029:40",
      "file": "engine/core/RenderPipeline.ts",
      "line": 1029,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resize(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Resize the renderer and targets",
          "   */"
        ],
        "after": [
          "    this.width = width;",
          "    this.height = height;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:1169:49",
      "file": "engine/core/RenderPipeline.ts",
      "line": 1169,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disposeNestedCompTarget(compositionId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose a nested composition render target",
          "   */"
        ],
        "after": [
          "    // Find and dispose all targets for this composition",
          "    for (const [key, target] of this.nestedCompTargets.entries()) {",
          "      if (key.startsWith(`${compositionId}_`)) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:1182:32",
      "file": "engine/core/RenderPipeline.ts",
      "line": 1182,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disposeAllNestedCompTargets(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all nested composition render targets",
          "   */"
        ],
        "after": [
          "    for (const target of this.nestedCompTargets.values()) {",
          "      target.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/RenderPipeline.ts:1204:12",
      "file": "engine/core/RenderPipeline.ts",
      "line": 1204,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    // Dispose DOF pass if enabled",
          "    if (this.bokehPass) {",
          "      this.composer.removePass(this.bokehPass);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:70:38",
      "file": "engine/core/ResourceManager.ts",
      "line": 70,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAssetGetter(getter: AssetGetter): void {",
      "context": {
        "before": [
          "   * Set the asset getter callback",
          "   * Called by LatticeEngine to provide access to project assets",
          "   */"
        ],
        "after": [
          "    this.assetGetter = getter;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:79:28",
      "file": "engine/core/ResourceManager.ts",
      "line": 79,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.assetGetter?.(assetId);",
      "context": {
        "before": [
          "   * Returns undefined if asset not found or getter not set",
          "   */",
          "  getAsset(assetId: string): AssetReference | undefined {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:89:39",
      "file": "engine/core/ResourceManager.ts",
      "line": 89,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeCommonGeometries(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Pre-create commonly used geometries",
          "   */"
        ],
        "after": [
          "    // Unit plane (1x1, can be scaled)",
          "    const plane = new THREE.PlaneGeometry(1, 1, 1, 1);",
          "    this.geometries.set(\"plane:1:1\", plane);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:241:4",
      "file": "engine/core/ResourceManager.ts",
      "line": 241,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private applyTextureOptions(",
          "    texture: THREE.Texture,",
          "    options?: TextureOptions,"
        ],
        "after": [
          "    if (!options) {",
          "      // Default options for crisp 2D graphics",
          "      texture.minFilter = THREE.LinearFilter;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:273:30",
      "file": "engine/core/ResourceManager.ts",
      "line": 273,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "releaseTexture(key: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Release a texture",
          "   */"
        ],
        "after": [
          "    const texture = this.textures.get(key);",
          "    if (texture) {",
          "      texture.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:301:59",
      "file": "engine/core/ResourceManager.ts",
      "line": 301,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerTexture(layerId: string, texture: THREE.Texture): void {",
      "context": {
        "before": [
          "  /**",
          "   * Cache a texture for a layer",
          "   */"
        ],
        "after": [
          "    const key = `layer:${layerId}`;",
          "    this.textures.set(key, texture);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:466:15",
      "file": "engine/core/ResourceManager.ts",
      "line": 466,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetStats(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset statistics",
          "   */"
        ],
        "after": [
          "    this.stats = {",
          "      texturesLoaded: 0,",
          "      texturesFromCache: 0,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:482:12",
      "file": "engine/core/ResourceManager.ts",
      "line": 482,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all cached resources",
          "   */"
        ],
        "after": [
          "    // Dispose textures",
          "    for (const texture of this.textures.values()) {",
          "      texture.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/ResourceManager.ts:505:16",
      "file": "engine/core/ResourceManager.ts",
      "line": 505,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearUnused(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear unused resources (call periodically)",
          "   */"
        ],
        "after": [
          "    // This is a simplified implementation",
          "    // A full implementation would track reference counts",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:112:33",
      "file": "engine/core/SceneManager.ts",
      "line": 112,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private setupDefaultLighting(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set up default ambient and directional lighting",
          "   */"
        ],
        "after": [
          "    // Ambient light for base illumination",
          "    const ambient = new THREE.AmbientLight(0xffffff, 0.6);",
          "    ambient.name = \"ambientLight\";"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:141:43",
      "file": "engine/core/SceneManager.ts",
      "line": 141,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addToComposition(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add object to composition group",
          "   */"
        ],
        "after": [
          "    this.compositionGroup.add(object);",
          "    this.markNeedsZSort(); // Mark for sorting instead of immediate sort",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:146:36",
      "file": "engine/core/SceneManager.ts",
      "line": 146,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerId = object.userData?.layerId;",
      "context": {
        "before": [
          "    this.markNeedsZSort(); // Mark for sorting instead of immediate sort",
          "",
          "    // Update lookup map for O(1) access"
        ],
        "after": [
          "    if (layerId) {",
          "      this.layerLookupMap.set(layerId, object);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:155:48",
      "file": "engine/core/SceneManager.ts",
      "line": 155,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeFromComposition(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove object from composition group",
          "   */"
        ],
        "after": [
          "    this.compositionGroup.remove(object);",
          "",
          "    // Remove from lookup map"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:159:36",
      "file": "engine/core/SceneManager.ts",
      "line": 159,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerId = object.userData?.layerId;",
      "context": {
        "before": [
          "    this.compositionGroup.remove(object);",
          "",
          "    // Remove from lookup map"
        ],
        "after": [
          "    if (layerId) {",
          "      this.layerLookupMap.delete(layerId);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:172:12",
      "file": "engine/core/SceneManager.ts",
      "line": 172,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "sortByZ(): void {",
      "context": {
        "before": [
          "   * Sort composition layers by Z position for proper depth ordering",
          "   * Optimized to only sort when Z positions have actually changed",
          "   */"
        ],
        "after": [
          "    // Check if any Z positions have changed since last sort",
          "    if (!this.needsZSort) {",
          "      let hasChanges = false;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:206:19",
      "file": "engine/core/SceneManager.ts",
      "line": 206,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "markNeedsZSort(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Mark that Z sorting is needed (call when Z positions may have changed)",
          "   */"
        ],
        "after": [
          "    this.needsZSort = true;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:224:39",
      "file": "engine/core/SceneManager.ts",
      "line": 224,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addToOverlay(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add object to overlay group",
          "   */"
        ],
        "after": [
          "    this.overlayGroup.add(object);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:231:44",
      "file": "engine/core/SceneManager.ts",
      "line": 231,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeFromOverlay(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove object from overlay group",
          "   */"
        ],
        "after": [
          "    this.overlayGroup.remove(object);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:238:17",
      "file": "engine/core/SceneManager.ts",
      "line": 238,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearOverlay(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all overlay objects",
          "   */"
        ],
        "after": [
          "    while (this.overlayGroup.children.length > 0) {",
          "      const child = this.overlayGroup.children[0];",
          "      this.overlayGroup.remove(child);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:254:39",
      "file": "engine/core/SceneManager.ts",
      "line": 254,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addUIElement(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "   * the instanceof check in scene.add() can fail. We handle this by directly manipulating",
          "   * the children array as a fallback.",
          "   */"
        ],
        "after": [
          "    if (!object) return;",
          "",
          "    // Check if the object passes instanceof (same Three.js instance)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:303:26",
      "file": "engine/core/SceneManager.ts",
      "line": 303,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "obj.parent.remove?.(obj);",
      "context": {
        "before": [
          "    try {",
          "      // Manually add since scene.add() will reject it",
          "      if (obj.parent !== null && obj.parent !== undefined) {"
        ],
        "after": [
          "      }",
          "      obj.parent = this.scene;",
          "      this.scene.children.push(obj);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:307:24",
      "file": "engine/core/SceneManager.ts",
      "line": 307,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "obj.dispatchEvent?.({ type: \"added\" });",
      "context": {
        "before": [
          "      }",
          "      obj.parent = this.scene;",
          "      this.scene.children.push(obj);"
        ],
        "after": [
          "      console.log(",
          "        \"[SceneManager] Successfully added UI element with compatibility shim\",",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:319:42",
      "file": "engine/core/SceneManager.ts",
      "line": 319,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeUIElement(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a UI element from the scene",
          "   */"
        ],
        "after": [
          "    if (!object) return;",
          "",
          "    // Try normal remove first"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:332:29",
      "file": "engine/core/SceneManager.ts",
      "line": 332,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "object.dispatchEvent?.({ type: \"removed\" });",
      "context": {
        "before": [
          "      if (index !== -1) {",
          "        this.scene.children.splice(index, 1);",
          "        (object as any).parent = null;"
        ],
        "after": [
          "      }",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:346:21",
      "file": "engine/core/SceneManager.ts",
      "line": 346,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "prepareForRender(): void {",
      "context": {
        "before": [
          "   * may load their own Three.js, causing instanceof checks to fail and",
          "   * internal structures (like children arrays) to be incompatible.",
          "   */"
        ],
        "after": [
          "    const ensureMethods = (obj: any, depth = 0) => {",
          "      // Safety check",
          "      if (!obj || depth > 50) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:381:57",
      "file": "engine/core/SceneManager.ts",
      "line": 381,
      "column": 57,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.matrixAutoUpdate) this.updateMatrix?.();",
      "context": {
        "before": [
          "      if (typeof obj.updateMatrixWorld !== \"function\") {",
          "        obj.updateMatrixWorld = function (force?: boolean) {",
          "          try {"
        ],
        "after": [
          "            if (this.matrixWorldNeedsUpdate || force) {",
          "              if (this.matrixWorldAutoUpdate !== false) {",
          "                if (this.parent === null) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:385:35",
      "file": "engine/core/SceneManager.ts",
      "line": 385,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.matrixWorld?.copy?.(this.matrix);",
      "context": {
        "before": [
          "            if (this.matrixWorldNeedsUpdate || force) {",
          "              if (this.matrixWorldAutoUpdate !== false) {",
          "                if (this.parent === null) {"
        ],
        "after": [
          "                } else if (this.parent?.matrixWorld) {",
          "                  this.matrixWorld?.multiplyMatrices?.(",
          "                    this.parent.matrixWorld,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:385:41",
      "file": "engine/core/SceneManager.ts",
      "line": 385,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.matrixWorld?.copy?.(this.matrix);",
      "context": {
        "before": [
          "            if (this.matrixWorldNeedsUpdate || force) {",
          "              if (this.matrixWorldAutoUpdate !== false) {",
          "                if (this.parent === null) {"
        ],
        "after": [
          "                } else if (this.parent?.matrixWorld) {",
          "                  this.matrixWorld?.multiplyMatrices?.(",
          "                    this.parent.matrixWorld,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:386:39",
      "file": "engine/core/SceneManager.ts",
      "line": 386,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "} else if (this.parent?.matrixWorld) {",
      "context": {
        "before": [
          "              if (this.matrixWorldAutoUpdate !== false) {",
          "                if (this.parent === null) {",
          "                  this.matrixWorld?.copy?.(this.matrix);"
        ],
        "after": [
          "                  this.matrixWorld?.multiplyMatrices?.(",
          "                    this.parent.matrixWorld,",
          "                    this.matrix,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:387:35",
      "file": "engine/core/SceneManager.ts",
      "line": 387,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.matrixWorld?.multiplyMatrices?.(",
      "context": {
        "before": [
          "                if (this.parent === null) {",
          "                  this.matrixWorld?.copy?.(this.matrix);",
          "                } else if (this.parent?.matrixWorld) {"
        ],
        "after": [
          "                    this.parent.matrixWorld,",
          "                    this.matrix,",
          "                  );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:387:53",
      "file": "engine/core/SceneManager.ts",
      "line": 387,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.matrixWorld?.multiplyMatrices?.(",
      "context": {
        "before": [
          "                if (this.parent === null) {",
          "                  this.matrixWorld?.copy?.(this.matrix);",
          "                } else if (this.parent?.matrixWorld) {"
        ],
        "after": [
          "                    this.parent.matrixWorld,",
          "                    this.matrix,",
          "                  );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:405:42",
      "file": "engine/core/SceneManager.ts",
      "line": 405,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "child.updateMatrixWorld?.(force);",
      "context": {
        "before": [
          "                  child &&",
          "                  (child.matrixWorldAutoUpdate === true || force === true)",
          "                ) {"
        ],
        "after": [
          "                }",
          "              }",
          "            }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:442:36",
      "file": "engine/core/SceneManager.ts",
      "line": 442,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDebugVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Toggle debug helpers visibility",
          "   */"
        ],
        "after": [
          "    this.debugGroup.visible = visible;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:449:36",
      "file": "engine/core/SceneManager.ts",
      "line": 449,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addAxisHelper(size: number = 500): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add axis helper to debug group",
          "   */"
        ],
        "after": [
          "    const existing = this.debugGroup.getObjectByName(\"axisHelper\");",
          "    if (existing) {",
          "      this.debugGroup.remove(existing);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:463:61",
      "file": "engine/core/SceneManager.ts",
      "line": 463,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addGridHelper(size: number = 2000, divisions: number = 40): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add grid helper to debug group",
          "   */"
        ],
        "after": [
          "    const existing = this.debugGroup.getObjectByName(\"gridHelper\");",
          "    if (existing) {",
          "      this.debugGroup.remove(existing);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:482:38",
      "file": "engine/core/SceneManager.ts",
      "line": 482,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBackground(color: string | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set scene background color",
          "   */"
        ],
        "after": [
          "    if (color) {",
          "      this.scene.background = new THREE.Color(color);",
          "    } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:508:62",
      "file": "engine/core/SceneManager.ts",
      "line": 508,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeEnvironmentSupport(renderer: THREE.WebGLRenderer): void {",
      "context": {
        "before": [
          "   * Initialize PMREM generator (requires WebGL renderer)",
          "   * Must be called before loading environment maps",
          "   */"
        ],
        "after": [
          "    if (this.pmremGenerator) {",
          "      this.pmremGenerator.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:585:4",
      "file": "engine/core/SceneManager.ts",
      "line": 585,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private processEnvironmentTexture(",
          "    texture: THREE.Texture,",
          "    resolve: (tex: THREE.Texture) => void,"
        ],
        "after": [
          "    // Generate PMREM from equirectangular texture",
          "    const envMap = this.pmremGenerator?.fromEquirectangular(texture).texture;",
          "    texture.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:587:39",
      "file": "engine/core/SceneManager.ts",
      "line": 587,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const envMap = this.pmremGenerator?.fromEquirectangular(texture).texture;",
      "context": {
        "before": [
          "    resolve: (tex: THREE.Texture) => void,",
          "  ): void {",
          "    // Generate PMREM from equirectangular texture"
        ],
        "after": [
          "    texture.dispose();",
          "",
          "    // Store and apply"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:605:58",
      "file": "engine/core/SceneManager.ts",
      "line": 605,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentMapTexture(texture: THREE.Texture | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set environment map from pre-loaded texture",
          "   */"
        ],
        "after": [
          "    // Dispose old environment map",
          "    if (this.environmentMap && this.environmentMap !== texture) {",
          "      this.environmentMap.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:641:62",
      "file": "engine/core/SceneManager.ts",
      "line": 641,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentConfig(config: Partial<EnvironmentMapConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update environment map configuration",
          "   */"
        ],
        "after": [
          "    Object.assign(this.envConfig, config);",
          "",
          "    // Apply changes"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:685:42",
      "file": "engine/core/SceneManager.ts",
      "line": 685,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable environment map",
          "   */"
        ],
        "after": [
          "    this.setEnvironmentConfig({ enabled });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:692:45",
      "file": "engine/core/SceneManager.ts",
      "line": 692,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentIntensity(intensity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set environment intensity",
          "   */"
        ],
        "after": [
          "    this.setEnvironmentConfig({ intensity });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:699:43",
      "file": "engine/core/SceneManager.ts",
      "line": 699,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentRotation(rotation: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set environment rotation (degrees)",
          "   */"
        ],
        "after": [
          "    this.setEnvironmentConfig({ rotation });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:706:34",
      "file": "engine/core/SceneManager.ts",
      "line": 706,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBackgroundBlur(blur: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set background blur amount (0-1)",
          "   */"
        ],
        "after": [
          "    this.setEnvironmentConfig({ backgroundBlur: blur });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:713:35",
      "file": "engine/core/SceneManager.ts",
      "line": 713,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setUseAsBackground(use: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Toggle using HDRI as background",
          "   */"
        ],
        "after": [
          "    this.setEnvironmentConfig({ useAsBackground: use });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:724:52",
      "file": "engine/core/SceneManager.ts",
      "line": 724,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionSize(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set composition dimensions and create/update bounds frame",
          "   */"
        ],
        "after": [
          "    this.compositionWidth = width;",
          "    this.compositionHeight = height;",
          "    this.updateCompositionBounds();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:742:36",
      "file": "engine/core/SceneManager.ts",
      "line": 742,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateCompositionBounds(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create or update composition bounds frame",
          "   */"
        ],
        "after": [
          "    // Remove existing bounds",
          "    if (this.compositionBounds) {",
          "      this.overlayGroup.remove(this.compositionBounds);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:777:48",
      "file": "engine/core/SceneManager.ts",
      "line": 777,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionBoundsVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Show/hide composition bounds",
          "   */"
        ],
        "after": [
          "    if (this.compositionBounds) {",
          "      this.compositionBounds.visible = visible;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:787:48",
      "file": "engine/core/SceneManager.ts",
      "line": 787,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateCompositionGrid(divisions: number = 20): void {",
      "context": {
        "before": [
          "   * Create or update composition grid",
          "   * Shows a grid inside the composition area for spatial reference",
          "   */"
        ],
        "after": [
          "    try {",
          "      // Remove existing grid",
          "      if (this.compositionGrid) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:962:46",
      "file": "engine/core/SceneManager.ts",
      "line": 962,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionGridVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Show/hide composition grid",
          "   */"
        ],
        "after": [
          "    if (this.compositionGrid) {",
          "      this.compositionGrid.visible = visible;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:972:25",
      "file": "engine/core/SceneManager.ts",
      "line": 972,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateOutsideOverlay(): void {",
      "context": {
        "before": [
          "   * Create dark overlay outside composition bounds",
          "   * Creates a large plane with a rectangular hole for the composition area",
          "   */"
        ],
        "after": [
          "    try {",
          "      // Remove existing overlay",
          "      if (this.outsideOverlay) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1028:45",
      "file": "engine/core/SceneManager.ts",
      "line": 1028,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setOutsideOverlayVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Show/hide outside overlay",
          "   */"
        ],
        "after": [
          "    if (this.outsideOverlay) {",
          "      this.outsideOverlay.visible = visible;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1061:48",
      "file": "engine/core/SceneManager.ts",
      "line": 1061,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeObject(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose object and its resources",
          "   */"
        ],
        "after": [
          "    if (object instanceof THREE.Mesh) {",
          "      object.geometry?.dispose();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1063:22",
      "file": "engine/core/SceneManager.ts",
      "line": 1063,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "object.geometry?.dispose();",
      "context": {
        "before": [
          "   */",
          "  private disposeObject(object: THREE.Object3D): void {",
          "    if (object instanceof THREE.Mesh) {"
        ],
        "after": [
          "",
          "      if (Array.isArray(object.material)) {",
          "        object.material.forEach((m) => {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1085:52",
      "file": "engine/core/SceneManager.ts",
      "line": 1085,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeMaterial(material: THREE.Material): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose material and its textures",
          "   */"
        ],
        "after": [
          "    // Dispose textures",
          "    const mat = material as THREE.MeshStandardMaterial;",
          "    mat.map?.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1088:12",
      "file": "engine/core/SceneManager.ts",
      "line": 1088,
      "column": 12,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.map?.dispose();",
      "context": {
        "before": [
          "  private disposeMaterial(material: THREE.Material): void {",
          "    // Dispose textures",
          "    const mat = material as THREE.MeshStandardMaterial;"
        ],
        "after": [
          "    mat.normalMap?.dispose();",
          "    mat.roughnessMap?.dispose();",
          "    mat.metalnessMap?.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1089:18",
      "file": "engine/core/SceneManager.ts",
      "line": 1089,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.normalMap?.dispose();",
      "context": {
        "before": [
          "    // Dispose textures",
          "    const mat = material as THREE.MeshStandardMaterial;",
          "    mat.map?.dispose();"
        ],
        "after": [
          "    mat.roughnessMap?.dispose();",
          "    mat.metalnessMap?.dispose();",
          "    mat.aoMap?.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1090:21",
      "file": "engine/core/SceneManager.ts",
      "line": 1090,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.roughnessMap?.dispose();",
      "context": {
        "before": [
          "    const mat = material as THREE.MeshStandardMaterial;",
          "    mat.map?.dispose();",
          "    mat.normalMap?.dispose();"
        ],
        "after": [
          "    mat.metalnessMap?.dispose();",
          "    mat.aoMap?.dispose();",
          "    mat.emissiveMap?.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1091:21",
      "file": "engine/core/SceneManager.ts",
      "line": 1091,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.metalnessMap?.dispose();",
      "context": {
        "before": [
          "    mat.map?.dispose();",
          "    mat.normalMap?.dispose();",
          "    mat.roughnessMap?.dispose();"
        ],
        "after": [
          "    mat.aoMap?.dispose();",
          "    mat.emissiveMap?.dispose();",
          "    mat.alphaMap?.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1092:14",
      "file": "engine/core/SceneManager.ts",
      "line": 1092,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.aoMap?.dispose();",
      "context": {
        "before": [
          "    mat.normalMap?.dispose();",
          "    mat.roughnessMap?.dispose();",
          "    mat.metalnessMap?.dispose();"
        ],
        "after": [
          "    mat.emissiveMap?.dispose();",
          "    mat.alphaMap?.dispose();",
          "    mat.envMap?.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1093:20",
      "file": "engine/core/SceneManager.ts",
      "line": 1093,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.emissiveMap?.dispose();",
      "context": {
        "before": [
          "    mat.roughnessMap?.dispose();",
          "    mat.metalnessMap?.dispose();",
          "    mat.aoMap?.dispose();"
        ],
        "after": [
          "    mat.alphaMap?.dispose();",
          "    mat.envMap?.dispose();",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1094:17",
      "file": "engine/core/SceneManager.ts",
      "line": 1094,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.alphaMap?.dispose();",
      "context": {
        "before": [
          "    mat.metalnessMap?.dispose();",
          "    mat.aoMap?.dispose();",
          "    mat.emissiveMap?.dispose();"
        ],
        "after": [
          "    mat.envMap?.dispose();",
          "",
          "    material.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1095:15",
      "file": "engine/core/SceneManager.ts",
      "line": 1095,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mat.envMap?.dispose();",
      "context": {
        "before": [
          "    mat.aoMap?.dispose();",
          "    mat.emissiveMap?.dispose();",
          "    mat.alphaMap?.dispose();"
        ],
        "after": [
          "",
          "    material.dispose();",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/core/SceneManager.ts:1103:12",
      "file": "engine/core/SceneManager.ts",
      "line": 1103,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all scene resources",
          "   */"
        ],
        "after": [
          "    // Dispose composition",
          "    while (this.compositionGroup.children.length > 0) {",
          "      const child = this.compositionGroup.children[0];"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:192:54",
      "file": "engine/LatticeEngine.ts",
      "line": 192,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private validateConfig(config: LatticeEngineConfig): void {",
      "context": {
        "before": [
          "  // CONFIGURATION VALIDATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!(config.canvas instanceof HTMLCanvasElement)) {",
          "      throw new Error(\"LatticeEngine requires a valid HTMLCanvasElement\");",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:199:15",
      "file": "engine/LatticeEngine.ts",
      "line": 199,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(config.width) ||",
      "context": {
        "before": [
          "",
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(config.height) ||",
          "      config.width <= 0 ||",
          "      config.height <= 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:200:15",
      "file": "engine/LatticeEngine.ts",
      "line": 200,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(config.height) ||",
      "context": {
        "before": [
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first",
          "    if (",
          "      !Number.isFinite(config.width) ||"
        ],
        "after": [
          "      config.width <= 0 ||",
          "      config.height <= 0",
          "    ) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:222:29",
      "file": "engine/LatticeEngine.ts",
      "line": 222,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addLayer(layerData: Layer): void {",
      "context": {
        "before": [
          "   * Add a layer to the composition",
          "   * @param layerData - The layer data from the project schema",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    this.layers.create(layerData);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:238:59",
      "file": "engine/LatticeEngine.ts",
      "line": 238,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateLayer(layerId: string, properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "   * @param layerId - The layer ID to update",
          "   * @param properties - Partial layer properties to update",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    this.layers.update(layerId, properties);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:249:31",
      "file": "engine/LatticeEngine.ts",
      "line": 249,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeLayer(layerId: string): void {",
      "context": {
        "before": [
          "   * Remove a layer from the composition",
          "   * @param layerId - The layer ID to remove",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    this.layers.remove(layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:287:30",
      "file": "engine/LatticeEngine.ts",
      "line": 287,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "syncLayers(layers: Layer[]): void {",
      "context": {
        "before": [
          "   * Sync all layers from store data",
          "   * @param layers - Array of layer data from store",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    const existingIds = new Set(this.layers.getLayerIds());"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:323:4",
      "file": "engine/LatticeEngine.ts",
      "line": 323,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    getter: (",
          "      assetId: string,",
          "    ) => import(\"@/types/project\").AssetReference | undefined,"
        ],
        "after": [
          "    this.resources.setAssetGetter(getter);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:337:4",
      "file": "engine/LatticeEngine.ts",
      "line": 337,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      metadata: import(\"./layers/VideoLayer\").VideoMetadata,",
          "    ) => void,"
        ],
        "after": [
          "    this.layers.setVideoMetadataCallback(callback);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:348:4",
      "file": "engine/LatticeEngine.ts",
      "line": 348,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  setNestedCompRenderContext(",
          "    context: import(\"./layers/NestedCompLayer\").NestedCompRenderContext,"
        ],
        "after": [
          "    this.layers.setNestedCompRenderContext(context);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:363:4",
      "file": "engine/LatticeEngine.ts",
      "line": 363,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    getter: import(\"./layers/CameraLayer\").CameraGetter,",
          "    updater: import(\"./layers/CameraLayer\").CameraUpdater,",
          "    atFrameGetter?: import(\"./layers/CameraLayer\").CameraAtFrameGetter,"
        ],
        "after": [
          "    this.layers.setCameraCallbacks(getter, updater, atFrameGetter);",
          "    // Store getter for active camera sync",
          "    this.activeCameraGetter = getter;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:377:53",
      "file": "engine/LatticeEngine.ts",
      "line": 377,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setActiveCameraLayer(cameraLayerId: string | null): void {",
      "context": {
        "before": [
          "   * Set the active camera layer that drives the render view",
          "   * @param cameraLayerId - The camera layer ID, or null to use default camera",
          "   */"
        ],
        "after": [
          "    this.activeCameraId = cameraLayerId;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:385:29",
      "file": "engine/LatticeEngine.ts",
      "line": 385,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private syncActiveCamera(): void {",
      "context": {
        "before": [
          "   * Sync render camera from active CameraLayer",
          "   * Called during frame evaluation to update the actual render camera",
          "   */"
        ],
        "after": [
          "    if (!this.activeCameraId || !this.activeCameraGetter) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:427:17",
      "file": "engine/LatticeEngine.ts",
      "line": 427,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (camera3d?.depthOfField) {",
      "context": {
        "before": [
          "",
          "    // Sync DOF settings from camera",
          "    const camera3d = typedLayer.getCameraAtCurrentFrame();"
        ],
        "after": [
          "      this.setDOFFromCamera(camera3d.depthOfField);",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:436:33",
      "file": "engine/LatticeEngine.ts",
      "line": 436,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionFPS(fps: number): void {",
      "context": {
        "before": [
          "   * Set composition FPS for particle timing",
          "   * @param fps - Frames per second",
          "   */"
        ],
        "after": [
          "    // Validate fps (NaN/0/negative would corrupt time-based calculations)",
          "    const validFps = Number.isFinite(fps) && fps > 0 ? fps : 30;",
          "    this.layers.setCompositionFPS(validFps);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:438:29",
      "file": "engine/LatticeEngine.ts",
      "line": 438,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validFps = Number.isFinite(fps) && fps > 0 ? fps : 30;",
      "context": {
        "before": [
          "   */",
          "  setCompositionFPS(fps: number): void {",
          "    // Validate fps (NaN/0/negative would corrupt time-based calculations)"
        ],
        "after": [
          "    this.layers.setCompositionFPS(validFps);",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:446:30",
      "file": "engine/LatticeEngine.ts",
      "line": 446,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeParticleSystems(): void {",
      "context": {
        "before": [
          "   * Initialize particle systems with WebGL renderer",
          "   * Must be called after engine initialization to enable GPU particles",
          "   */"
        ],
        "after": [
          "    this.layers.setRenderer(this.renderer.getWebGLRenderer());",
          "    this.layers.setCamera(this.camera.camera);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:458:25",
      "file": "engine/LatticeEngine.ts",
      "line": 458,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize3DServices(): void {",
      "context": {
        "before": [
          "   * - Environment map support in SceneManager",
          "   * Call this after engine construction for full 3D pipeline support",
          "   */"
        ],
        "after": [
          "    const renderer = this.renderer.getWebGLRenderer();",
          "",
          "    // Initialize material system for PMREM"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:538:69",
      "file": "engine/LatticeEngine.ts",
      "line": 538,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerDrivenValues(layerId: string, values: Map<string, number>): void {",
      "context": {
        "before": [
          "   * Set driven values for a layer",
          "   * Used by the expression/driver system to override animated properties",
          "   */"
        ],
        "after": [
          "    this.layers.setLayerDrivenValues(layerId, values);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:545:42",
      "file": "engine/LatticeEngine.ts",
      "line": 545,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearLayerDrivenValues(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear driven values for a layer",
          "   */"
        ],
        "after": [
          "    this.layers.clearLayerDrivenValues(layerId);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:552:25",
      "file": "engine/LatticeEngine.ts",
      "line": 552,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAllDrivenValues(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all driven values for all layers",
          "   */"
        ],
        "after": [
          "    this.layers.clearAllDrivenValues();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:580:42",
      "file": "engine/LatticeEngine.ts",
      "line": 580,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyFrameState(frameState: FrameState): void {",
      "context": {
        "before": [
          "   *",
          "   * @param frameState - Pre-evaluated state from MotionEngine.evaluate()",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    // Update internal frame reference (for events and backwards compat)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:608:62",
      "file": "engine/LatticeEngine.ts",
      "line": 608,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyCameraState(cameraState: FrameState[\"camera\"]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply evaluated camera state directly",
          "   */"
        ],
        "after": [
          "    if (!cameraState) return;",
          "",
          "    // Update camera controller with evaluated values"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:634:26",
      "file": "engine/LatticeEngine.ts",
      "line": 634,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrame(frame: number): void {",
      "context": {
        "before": [
          "   *",
          "   * @param frame - The frame number (0-indexed)",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    this.state.currentFrame = frame;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:656:68",
      "file": "engine/LatticeEngine.ts",
      "line": 656,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioReactiveCallback(getter: LayerAudioReactiveGetter | null): void {",
      "context": {
        "before": [
          "   * Set the audio reactive getter callback",
          "   * This callback will be called during frame evaluation to get audio-modulated values",
          "   */"
        ],
        "after": [
          "    this.audioReactiveGetter = getter;",
          "    this.layers.setAudioReactiveCallback(getter);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:676:11",
      "file": "engine/LatticeEngine.ts",
      "line": 676,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "render(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Render the current frame",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    this.performance.beginFrame();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:694:20",
      "file": "engine/LatticeEngine.ts",
      "line": 694,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "startRenderLoop(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Start continuous rendering loop",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    if (this.animationFrameId !== null) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:719:19",
      "file": "engine/LatticeEngine.ts",
      "line": 719,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stopRenderLoop(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Stop continuous rendering loop",
          "   */"
        ],
        "after": [
          "    this.state.isRendering = false;",
          "",
          "    if (this.animationFrameId !== null) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:751:4",
      "file": "engine/LatticeEngine.ts",
      "line": 751,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    height: number,",
          "    compositionWidth?: number,",
          "    compositionHeight?: number,"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:756:15",
      "file": "engine/LatticeEngine.ts",
      "line": 756,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(width) ||",
      "context": {
        "before": [
          "",
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(height) ||",
          "      width <= 0 ||",
          "      height <= 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:757:15",
      "file": "engine/LatticeEngine.ts",
      "line": 757,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(height) ||",
      "context": {
        "before": [
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first",
          "    if (",
          "      !Number.isFinite(width) ||"
        ],
        "after": [
          "      width <= 0 ||",
          "      height <= 0",
          "    ) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:777:14",
      "file": "engine/LatticeEngine.ts",
      "line": 777,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(compositionWidth) &&",
      "context": {
        "before": [
          "    if (",
          "      compositionWidth !== undefined &&",
          "      compositionHeight !== undefined &&"
        ],
        "after": [
          "      Number.isFinite(compositionHeight) &&",
          "      compositionWidth > 0 &&",
          "      compositionHeight > 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:778:14",
      "file": "engine/LatticeEngine.ts",
      "line": 778,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(compositionHeight) &&",
      "context": {
        "before": [
          "      compositionWidth !== undefined &&",
          "      compositionHeight !== undefined &&",
          "      Number.isFinite(compositionWidth) &&"
        ],
        "after": [
          "      compositionWidth > 0 &&",
          "      compositionHeight > 0",
          "    ) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:797:65",
      "file": "engine/LatticeEngine.ts",
      "line": 797,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateSplineResolutions(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update all SplineLayer resolutions for Line2 materials",
          "   */"
        ],
        "after": [
          "    const layers = this.layers.getAllLayers();",
          "    for (const layer of layers) {",
          "      if ("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:826:47",
      "file": "engine/LatticeEngine.ts",
      "line": 826,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setResolution(width: number, height: number): void {",
      "context": {
        "before": [
          "   * @param width - Render width in pixels",
          "   * @param height - Render height in pixels",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "",
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:831:15",
      "file": "engine/LatticeEngine.ts",
      "line": 831,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(width) ||",
      "context": {
        "before": [
          "",
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(height) ||",
          "      width <= 0 ||",
          "      height <= 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:832:15",
      "file": "engine/LatticeEngine.ts",
      "line": 832,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(height) ||",
      "context": {
        "before": [
          "    // NaN bypasses <= 0 check, so validate with Number.isFinite first",
          "    if (",
          "      !Number.isFinite(width) ||"
        ],
        "after": [
          "      width <= 0 ||",
          "      height <= 0",
          "    ) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:866:24",
      "file": "engine/LatticeEngine.ts",
      "line": 866,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enableOrbitControls(): void {",
      "context": {
        "before": [
          "   * Enable 3D orbit controls for camera navigation",
          "   * Right-click = orbit, middle-click = pan, scroll = dolly",
          "   */"
        ],
        "after": [
          "    const domElement = this.renderer.getDomElement();",
          "    this.camera.enableOrbitControls(domElement);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:874:25",
      "file": "engine/LatticeEngine.ts",
      "line": 874,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableOrbitControls(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Disable 3D orbit controls",
          "   */"
        ],
        "after": [
          "    this.camera.disableOrbitControls();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:881:25",
      "file": "engine/LatticeEngine.ts",
      "line": 881,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetCameraToDefault(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset camera to default viewing position",
          "   */"
        ],
        "after": [
          "    this.camera.resetToDefault();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:890:49",
      "file": "engine/LatticeEngine.ts",
      "line": 890,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "fitCompositionToViewport(padding: number = 40): void {",
      "context": {
        "before": [
          "   * This is the canonical method for centering the view on initial load",
          "   * @param padding - Padding in pixels around the composition (default 40)",
          "   */"
        ],
        "after": [
          "    // Validate padding (NaN/negative would corrupt viewport calculations)",
          "    const validPadding =",
          "      Number.isFinite(padding) && padding >= 0 ? padding : 40;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:893:14",
      "file": "engine/LatticeEngine.ts",
      "line": 893,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(padding) && padding >= 0 ? padding : 40;",
      "context": {
        "before": [
          "  fitCompositionToViewport(padding: number = 40): void {",
          "    // Validate padding (NaN/negative would corrupt viewport calculations)",
          "    const validPadding ="
        ],
        "after": [
          "    const { width, height } = this.state.viewport;",
          "    this.camera.fitToViewport(width, height, validPadding);",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:908:53",
      "file": "engine/LatticeEngine.ts",
      "line": 908,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCameraPosition(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set camera position",
          "   */"
        ],
        "after": [
          "    this.camera.setPosition(x, y, z);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:915:51",
      "file": "engine/LatticeEngine.ts",
      "line": 915,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCameraTarget(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set camera target (look-at point)",
          "   */"
        ],
        "after": [
          "    this.camera.setTarget(x, y, z);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:922:28",
      "file": "engine/LatticeEngine.ts",
      "line": 922,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCameraFOV(fov: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set camera field of view",
          "   */"
        ],
        "after": [
          "    this.camera.setFOV(fov);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:932:50",
      "file": "engine/LatticeEngine.ts",
      "line": 932,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setOrbitTarget(x: number, y: number, z: number): void {",
      "context": {
        "before": [
          "   * @param y - Y position in screen coordinates",
          "   * @param z - Z position",
          "   */"
        ],
        "after": [
          "    this.camera.setOrbitTarget(x, y, z);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:939:29",
      "file": "engine/LatticeEngine.ts",
      "line": 939,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetOrbitTargetToCenter(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset orbit target to composition center",
          "   */"
        ],
        "after": [
          "    this.camera.resetOrbitTargetToCenter();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:956:5",
      "file": "engine/LatticeEngine.ts",
      "line": 956,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    focusDistance: number;",
          "    aperture: number;",
          "    blurLevel: number;"
        ],
        "after": [
          "    this.renderer.setDOF({",
          "      enabled: dof.enabled,",
          "      focusDistance: dof.focusDistance,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:969:34",
      "file": "engine/LatticeEngine.ts",
      "line": 969,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDOFEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable DOF",
          "   */"
        ],
        "after": [
          "    this.renderer.setDOFEnabled(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:977:40",
      "file": "engine/LatticeEngine.ts",
      "line": 977,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDOFFocusDistance(distance: number): void {",
      "context": {
        "before": [
          "   * Set DOF focus distance",
          "   * @param distance - Focus distance in world units",
          "   */"
        ],
        "after": [
          "    this.renderer.setFocusDistance(distance);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:985:35",
      "file": "engine/LatticeEngine.ts",
      "line": 985,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDOFAperture(aperture: number): void {",
      "context": {
        "before": [
          "   * Set DOF aperture",
          "   * @param aperture - Aperture value (higher = more blur)",
          "   */"
        ],
        "after": [
          "    this.renderer.setAperture(aperture * 0.0001);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1004:71",
      "file": "engine/LatticeEngine.ts",
      "line": 1004,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAO(config: Partial<import(\"./core/RenderPipeline\").SSAOConfig>): void {",
      "context": {
        "before": [
          "   * Configure SSAO effect",
          "   * @param config - SSAO configuration options",
          "   */"
        ],
        "after": [
          "    this.renderer.setSSAO(config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1011:35",
      "file": "engine/LatticeEngine.ts",
      "line": 1011,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAOEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable SSAO",
          "   */"
        ],
        "after": [
          "    this.renderer.setSSAOEnabled(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1019:38",
      "file": "engine/LatticeEngine.ts",
      "line": 1019,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAOIntensity(intensity: number): void {",
      "context": {
        "before": [
          "   * Set SSAO intensity",
          "   * @param intensity - Occlusion intensity multiplier",
          "   */"
        ],
        "after": [
          "    this.renderer.setSSAOIntensity(intensity);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1027:32",
      "file": "engine/LatticeEngine.ts",
      "line": 1027,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSSAORadius(radius: number): void {",
      "context": {
        "before": [
          "   * Set SSAO sampling radius",
          "   * @param radius - Kernel radius for occlusion sampling",
          "   */"
        ],
        "after": [
          "    this.renderer.setSSAORadius(radius);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1047:73",
      "file": "engine/LatticeEngine.ts",
      "line": 1047,
      "column": 73,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloom(config: Partial<import(\"./core/RenderPipeline\").BloomConfig>): void {",
      "context": {
        "before": [
          "   * Makes emissive objects (lights, bright particles) glow",
          "   * @param config - Bloom configuration options",
          "   */"
        ],
        "after": [
          "    this.renderer.setBloom(config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1054:36",
      "file": "engine/LatticeEngine.ts",
      "line": 1054,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloomEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable bloom",
          "   */"
        ],
        "after": [
          "    this.renderer.setBloomEnabled(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1062:37",
      "file": "engine/LatticeEngine.ts",
      "line": 1062,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloomStrength(strength: number): void {",
      "context": {
        "before": [
          "   * Set bloom intensity",
          "   * @param strength - Bloom strength multiplier",
          "   */"
        ],
        "after": [
          "    this.renderer.setBloomStrength(strength);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1070:39",
      "file": "engine/LatticeEngine.ts",
      "line": 1070,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBloomThreshold(threshold: number): void {",
      "context": {
        "before": [
          "   * Set bloom threshold",
          "   * @param threshold - Brightness threshold for bloom (0-1)",
          "   */"
        ],
        "after": [
          "    this.renderer.setBloomThreshold(threshold);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1089:44",
      "file": "engine/LatticeEngine.ts",
      "line": 1089,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setViewportTransform(transform: number[]): void {",
      "context": {
        "before": [
          "   * Set the viewport transform for pan/zoom operations",
          "   * @param transform - [scaleX, skewX, skewY, scaleY, translateX, translateY]",
          "   */"
        ],
        "after": [
          "    // Validate transform array (must be 6 numbers, all finite)",
          "    if (!Array.isArray(transform) || transform.length < 6) {",
          "      engineLogger.warn(\"Invalid viewport transform: expected 6-element array\");"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1097:26",
      "file": "engine/LatticeEngine.ts",
      "line": 1097,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const scale = Number.isFinite(transform[0]) ? transform[0] : 1;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Validate all values are finite numbers, use defaults if not"
        ],
        "after": [
          "    const skewX = Number.isFinite(transform[1]) ? transform[1] : 0;",
          "    const skewY = Number.isFinite(transform[2]) ? transform[2] : 0;",
          "    const scaleY = Number.isFinite(transform[3]) ? transform[3] : 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1098:26",
      "file": "engine/LatticeEngine.ts",
      "line": 1098,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const skewX = Number.isFinite(transform[1]) ? transform[1] : 0;",
      "context": {
        "before": [
          "",
          "    // Validate all values are finite numbers, use defaults if not",
          "    const scale = Number.isFinite(transform[0]) ? transform[0] : 1;"
        ],
        "after": [
          "    const skewY = Number.isFinite(transform[2]) ? transform[2] : 0;",
          "    const scaleY = Number.isFinite(transform[3]) ? transform[3] : 1;",
          "    const tx = Number.isFinite(transform[4]) ? transform[4] : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1099:26",
      "file": "engine/LatticeEngine.ts",
      "line": 1099,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const skewY = Number.isFinite(transform[2]) ? transform[2] : 0;",
      "context": {
        "before": [
          "    // Validate all values are finite numbers, use defaults if not",
          "    const scale = Number.isFinite(transform[0]) ? transform[0] : 1;",
          "    const skewX = Number.isFinite(transform[1]) ? transform[1] : 0;"
        ],
        "after": [
          "    const scaleY = Number.isFinite(transform[3]) ? transform[3] : 1;",
          "    const tx = Number.isFinite(transform[4]) ? transform[4] : 0;",
          "    const ty = Number.isFinite(transform[5]) ? transform[5] : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1100:27",
      "file": "engine/LatticeEngine.ts",
      "line": 1100,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const scaleY = Number.isFinite(transform[3]) ? transform[3] : 1;",
      "context": {
        "before": [
          "    const scale = Number.isFinite(transform[0]) ? transform[0] : 1;",
          "    const skewX = Number.isFinite(transform[1]) ? transform[1] : 0;",
          "    const skewY = Number.isFinite(transform[2]) ? transform[2] : 0;"
        ],
        "after": [
          "    const tx = Number.isFinite(transform[4]) ? transform[4] : 0;",
          "    const ty = Number.isFinite(transform[5]) ? transform[5] : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1101:23",
      "file": "engine/LatticeEngine.ts",
      "line": 1101,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const tx = Number.isFinite(transform[4]) ? transform[4] : 0;",
      "context": {
        "before": [
          "    const skewX = Number.isFinite(transform[1]) ? transform[1] : 0;",
          "    const skewY = Number.isFinite(transform[2]) ? transform[2] : 0;",
          "    const scaleY = Number.isFinite(transform[3]) ? transform[3] : 1;"
        ],
        "after": [
          "    const ty = Number.isFinite(transform[5]) ? transform[5] : 0;",
          "",
          "    this.viewportTransform = [scale, skewX, skewY, scaleY, tx, ty];"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1102:23",
      "file": "engine/LatticeEngine.ts",
      "line": 1102,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const ty = Number.isFinite(transform[5]) ? transform[5] : 0;",
      "context": {
        "before": [
          "    const skewY = Number.isFinite(transform[2]) ? transform[2] : 0;",
          "    const scaleY = Number.isFinite(transform[3]) ? transform[3] : 1;",
          "    const tx = Number.isFinite(transform[4]) ? transform[4] : 0;"
        ],
        "after": [
          "",
          "    this.viewportTransform = [scale, skewX, skewY, scaleY, tx, ty];",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1135:38",
      "file": "engine/LatticeEngine.ts",
      "line": 1135,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBackground(color: string | null): void {",
      "context": {
        "before": [
          "   * Set the scene background color",
          "   * @param color - Hex color string (e.g., '#050505') or null for transparent",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "    this.scene.setBackground(color);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1151:46",
      "file": "engine/LatticeEngine.ts",
      "line": 1151,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBackgroundImage(image: HTMLImageElement): void {",
      "context": {
        "before": [
          "   * Set a background image for the composition",
          "   * @param image - HTMLImageElement to use as background",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "    this.ensureBackgroundManager();",
          "    this.backgroundManager?.setBackgroundImage(image);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1154:27",
      "file": "engine/LatticeEngine.ts",
      "line": 1154,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.backgroundManager?.setBackgroundImage(image);",
      "context": {
        "before": [
          "  setBackgroundImage(image: HTMLImageElement): void {",
          "    this.assertNotDisposed();",
          "    this.ensureBackgroundManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1169:4",
      "file": "engine/LatticeEngine.ts",
      "line": 1169,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      opacity?: number;",
          "      visible?: boolean;",
          "    },"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "    this.ensureBackgroundManager();",
          "    this.backgroundManager?.setDepthMap(image, options);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1172:27",
      "file": "engine/LatticeEngine.ts",
      "line": 1172,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.backgroundManager?.setDepthMap(image, options);",
      "context": {
        "before": [
          "  ): void {",
          "    this.assertNotDisposed();",
          "    this.ensureBackgroundManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1178:43",
      "file": "engine/LatticeEngine.ts",
      "line": 1178,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthOverlayVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set depth overlay visibility",
          "   */"
        ],
        "after": [
          "    this.ensureBackgroundManager();",
          "    this.backgroundManager?.setDepthOverlayVisible(visible);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1180:27",
      "file": "engine/LatticeEngine.ts",
      "line": 1180,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.backgroundManager?.setDepthOverlayVisible(visible);",
      "context": {
        "before": [
          "   */",
          "  setDepthOverlayVisible(visible: boolean): void {",
          "    this.ensureBackgroundManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1186:65",
      "file": "engine/LatticeEngine.ts",
      "line": 1186,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthColormap(colormap: \"viridis\" | \"plasma\" | \"grayscale\"): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set depth colormap",
          "   */"
        ],
        "after": [
          "    this.ensureBackgroundManager();",
          "    this.backgroundManager?.setDepthColormap(colormap);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1188:27",
      "file": "engine/LatticeEngine.ts",
      "line": 1188,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.backgroundManager?.setDepthColormap(colormap);",
      "context": {
        "before": [
          "   */",
          "  setDepthColormap(colormap: \"viridis\" | \"plasma\" | \"grayscale\"): void {",
          "    this.ensureBackgroundManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1194:35",
      "file": "engine/LatticeEngine.ts",
      "line": 1194,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthOpacity(opacity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set depth overlay opacity",
          "   */"
        ],
        "after": [
          "    this.ensureBackgroundManager();",
          "    this.backgroundManager?.setDepthOpacity(opacity);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1196:27",
      "file": "engine/LatticeEngine.ts",
      "line": 1196,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.backgroundManager?.setDepthOpacity(opacity);",
      "context": {
        "before": [
          "   */",
          "  setDepthOpacity(opacity: number): void {",
          "    this.ensureBackgroundManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1208:34",
      "file": "engine/LatticeEngine.ts",
      "line": 1208,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.backgroundManager?.getDepthMapSettings() ?? {",
      "context": {
        "before": [
          "    visible: boolean;",
          "  } {",
          "    this.ensureBackgroundManager();"
        ],
        "after": [
          "      colormap: \"grayscale\",",
          "      opacity: 1,",
          "      visible: true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1218:36",
      "file": "engine/LatticeEngine.ts",
      "line": 1218,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private ensureBackgroundManager(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Ensure BackgroundManager is initialized",
          "   */"
        ],
        "after": [
          "    if (!this.backgroundManager) {",
          "      this.backgroundManager = new BackgroundManager(this.scene);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1231:52",
      "file": "engine/LatticeEngine.ts",
      "line": 1231,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderMode(mode: \"color\" | \"depth\" | \"normal\"): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the render mode (color, depth, normal)",
          "   */"
        ],
        "after": [
          "    this.renderMode = mode;",
          "    this.renderer.setRenderMode(mode);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1251:33",
      "file": "engine/LatticeEngine.ts",
      "line": 1251,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeEnvironmentSupport(): void {",
      "context": {
        "before": [
          "   * Initialize environment map support",
          "   * Must be called before loading environment maps",
          "   */"
        ],
        "after": [
          "    this.scene.initializeEnvironmentSupport(this.renderer.getWebGLRenderer());",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1276:4",
      "file": "engine/LatticeEngine.ts",
      "line": 1276,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  setEnvironmentConfig(",
          "    config: Partial<import(\"./core/SceneManager\").EnvironmentMapConfig>,"
        ],
        "after": [
          "    this.scene.setEnvironmentConfig(config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1290:42",
      "file": "engine/LatticeEngine.ts",
      "line": 1290,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable environment map",
          "   */"
        ],
        "after": [
          "    this.scene.setEnvironmentEnabled(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1298:45",
      "file": "engine/LatticeEngine.ts",
      "line": 1298,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentIntensity(intensity: number): void {",
      "context": {
        "before": [
          "   * Set environment map intensity",
          "   * @param intensity - Intensity multiplier (0-2 typical range)",
          "   */"
        ],
        "after": [
          "    this.scene.setEnvironmentIntensity(intensity);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1306:42",
      "file": "engine/LatticeEngine.ts",
      "line": 1306,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentRotation(degrees: number): void {",
      "context": {
        "before": [
          "   * Set environment map rotation",
          "   * @param degrees - Y-axis rotation in degrees",
          "   */"
        ],
        "after": [
          "    this.scene.setEnvironmentRotation(degrees);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1314:45",
      "file": "engine/LatticeEngine.ts",
      "line": 1314,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentBackgroundBlur(blur: number): void {",
      "context": {
        "before": [
          "   * Set background blur amount for HDRI background",
          "   * @param blur - Blur amount (0-1)",
          "   */"
        ],
        "after": [
          "    this.scene.setBackgroundBlur(blur);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1321:43",
      "file": "engine/LatticeEngine.ts",
      "line": 1321,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentAsBackground(use: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Toggle whether to use HDRI as scene background",
          "   */"
        ],
        "after": [
          "    this.scene.setUseAsBackground(use);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1339:46",
      "file": "engine/LatticeEngine.ts",
      "line": 1339,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionGridVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Show/hide composition grid",
          "   */"
        ],
        "after": [
          "    this.scene.setCompositionGridVisible(visible);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1346:45",
      "file": "engine/LatticeEngine.ts",
      "line": 1346,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setOutsideOverlayVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Show/hide dark overlay outside composition",
          "   */"
        ],
        "after": [
          "    this.scene.setOutsideOverlayVisible(visible);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1353:48",
      "file": "engine/LatticeEngine.ts",
      "line": 1353,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionBoundsVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Show/hide composition bounds frame",
          "   */"
        ],
        "after": [
          "    this.scene.setCompositionBoundsVisible(visible);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1402:43",
      "file": "engine/LatticeEngine.ts",
      "line": 1402,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private ensureTransformControlsManager(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Ensure TransformControlsManager is initialized",
          "   */"
        ],
        "after": [
          "    if (!this.transformControlsManager) {",
          "      this.transformControlsManager = new TransformControlsManager({",
          "        scene: this.scene,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1420:32",
      "file": "engine/LatticeEngine.ts",
      "line": 1420,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeTransformControls(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize transform controls for layer manipulation",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "    this.ensureTransformControlsManager();",
          "    this.transformControlsManager?.initialize();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1423:34",
      "file": "engine/LatticeEngine.ts",
      "line": 1423,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.transformControlsManager?.initialize();",
      "context": {
        "before": [
          "  initializeTransformControls(): void {",
          "    this.assertNotDisposed();",
          "    this.ensureTransformControlsManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1434:4",
      "file": "engine/LatticeEngine.ts",
      "line": 1434,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    callback:",
          "      | ((layerId: string, transform: LayerTransformUpdate) => void)",
          "      | null,"
        ],
        "after": [
          "    this.ensureTransformControlsManager();",
          "    this.transformControlsManager?.setTransformChangeCallback(callback);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1436:34",
      "file": "engine/LatticeEngine.ts",
      "line": 1436,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.transformControlsManager?.setTransformChangeCallback(callback);",
      "context": {
        "before": [
          "      | null,",
          "  ): void {",
          "    this.ensureTransformControlsManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1443:38",
      "file": "engine/LatticeEngine.ts",
      "line": 1443,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayer(layerId: string | null): void {",
      "context": {
        "before": [
          "   * Select a layer and attach transform controls",
          "   * @param layerId - Layer ID to select, or null to deselect",
          "   */"
        ],
        "after": [
          "    this.assertNotDisposed();",
          "    this.ensureTransformControlsManager();",
          "    this.transformControlsManager?.selectLayer(layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1446:34",
      "file": "engine/LatticeEngine.ts",
      "line": 1446,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.transformControlsManager?.selectLayer(layerId);",
      "context": {
        "before": [
          "  selectLayer(layerId: string | null): void {",
          "    this.assertNotDisposed();",
          "    this.ensureTransformControlsManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1452:32",
      "file": "engine/LatticeEngine.ts",
      "line": 1452,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "focusOnLayer(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Focus the camera on a layer's position",
          "   */"
        ],
        "after": [
          "    this.ensureTransformControlsManager();",
          "    this.transformControlsManager?.focusOnLayer(layerId);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1454:34",
      "file": "engine/LatticeEngine.ts",
      "line": 1454,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.transformControlsManager?.focusOnLayer(layerId);",
      "context": {
        "before": [
          "   */",
          "  focusOnLayer(layerId: string): void {",
          "    this.ensureTransformControlsManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1461:41",
      "file": "engine/LatticeEngine.ts",
      "line": 1461,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.transformControlsManager?.getSelectedLayerId() ?? null;",
      "context": {
        "before": [
          "   * Get the currently selected layer ID",
          "   */",
          "  getSelectedLayerId(): string | null {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1468:59",
      "file": "engine/LatticeEngine.ts",
      "line": 1468,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTransformMode(mode: \"translate\" | \"rotate\" | \"scale\"): void {",
      "context": {
        "before": [
          "   * Set the transform mode",
          "   * @param mode - 'translate' | 'rotate' | 'scale'",
          "   */"
        ],
        "after": [
          "    this.ensureTransformControlsManager();",
          "    this.transformControlsManager?.setMode(mode);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1470:34",
      "file": "engine/LatticeEngine.ts",
      "line": 1470,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.transformControlsManager?.setMode(mode);",
      "context": {
        "before": [
          "   */",
          "  setTransformMode(mode: \"translate\" | \"rotate\" | \"scale\"): void {",
          "    this.ensureTransformControlsManager();"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1477:41",
      "file": "engine/LatticeEngine.ts",
      "line": 1477,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.transformControlsManager?.getMode() ?? \"translate\";",
      "context": {
        "before": [
          "   * Get the current transform mode",
          "   */",
          "  getTransformMode(): \"translate\" | \"rotate\" | \"scale\" {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1483:48",
      "file": "engine/LatticeEngine.ts",
      "line": 1483,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTransformControlsVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set transform controls visibility",
          "   */"
        ],
        "after": [
          "    this.transformControlsManager?.setVisible(visible);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1484:34",
      "file": "engine/LatticeEngine.ts",
      "line": 1484,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.transformControlsManager?.setVisible(visible);",
      "context": {
        "before": [
          "   * Set transform controls visibility",
          "   */",
          "  setTransformControlsVisible(visible: boolean): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1491:41",
      "file": "engine/LatticeEngine.ts",
      "line": 1491,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.transformControlsManager?.isDragging() ?? false;",
      "context": {
        "before": [
          "   * Check if transform controls are dragging",
          "   */",
          "  isTransformDragging(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1501:10",
      "file": "engine/LatticeEngine.ts",
      "line": 1501,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "start(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Alias for startRenderLoop",
          "   */"
        ],
        "after": [
          "    this.startRenderLoop();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1508:9",
      "file": "engine/LatticeEngine.ts",
      "line": 1508,
      "column": 9,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stop(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Alias for stopRenderLoop",
          "   */"
        ],
        "after": [
          "    this.stopRenderLoop();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1545:14",
      "file": "engine/LatticeEngine.ts",
      "line": 1545,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(quality) && quality >= 0 && quality <= 1 ? quality : 0.95;",
      "context": {
        "before": [
          "",
          "    // Validate quality (NaN or out of range would cause issues)",
          "    const validQuality ="
        ],
        "after": [
          "",
          "    const { imageData, width, height } = this.captureFrame();",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1591:26",
      "file": "engine/LatticeEngine.ts",
      "line": 1591,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetPerformanceStats(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset performance statistics",
          "   */"
        ],
        "after": [
          "    this.performance.reset();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1604:57",
      "file": "engine/LatticeEngine.ts",
      "line": 1604,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "on(type: EngineEventType, handler: EngineEventHandler): void {",
      "context": {
        "before": [
          "   * @param type - Event type to listen for",
          "   * @param handler - Event handler function",
          "   */"
        ],
        "after": [
          "    if (!this.eventHandlers.has(type)) {",
          "      this.eventHandlers.set(type, new Set());",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1608:33",
      "file": "engine/LatticeEngine.ts",
      "line": 1608,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.eventHandlers.get(type)?.add(handler);",
      "context": {
        "before": [
          "    if (!this.eventHandlers.has(type)) {",
          "      this.eventHandlers.set(type, new Set());",
          "    }"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1616:58",
      "file": "engine/LatticeEngine.ts",
      "line": 1616,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "off(type: EngineEventType, handler: EngineEventHandler): void {",
      "context": {
        "before": [
          "   * @param type - Event type",
          "   * @param handler - Event handler to remove",
          "   */"
        ],
        "after": [
          "    this.eventHandlers.get(type)?.delete(handler);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1617:33",
      "file": "engine/LatticeEngine.ts",
      "line": 1617,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.eventHandlers.get(type)?.delete(handler);",
      "context": {
        "before": [
          "   * @param handler - Event handler to remove",
          "   */",
          "  off(type: EngineEventType, handler: EngineEventHandler): void {"
        ],
        "after": [
          "  }",
          "",
          "  private emit(type: EngineEventType, data?: unknown): void {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1620:54",
      "file": "engine/LatticeEngine.ts",
      "line": 1620,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private emit(type: EngineEventType, data?: unknown): void {",
      "context": {
        "before": [
          "    this.eventHandlers.get(type)?.delete(handler);",
          "  }",
          ""
        ],
        "after": [
          "    const event: EngineEvent = {",
          "      type,",
          "      timestamp: performance.now(),"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1627:33",
      "file": "engine/LatticeEngine.ts",
      "line": 1627,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.eventHandlers.get(type)?.forEach((handler) => {",
      "context": {
        "before": [
          "      data,",
          "    };",
          ""
        ],
        "after": [
          "      try {",
          "        handler(event);",
          "      } catch (error) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1640:37",
      "file": "engine/LatticeEngine.ts",
      "line": 1640,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private setupContextLossHandling(): void {",
      "context": {
        "before": [
          "  // CONTEXT LOSS HANDLING",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const canvas = this.config.canvas;",
          "",
          "    // Store handlers for cleanup in dispose()"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1681:30",
      "file": "engine/LatticeEngine.ts",
      "line": 1681,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private assertNotDisposed(): void {",
      "context": {
        "before": [
          "    return this.state.isDisposed;",
          "  }",
          ""
        ],
        "after": [
          "    if (this.state.isDisposed) {",
          "      throw new Error(\"LatticeEngine has been disposed\");",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1736:46",
      "file": "engine/LatticeEngine.ts",
      "line": 1736,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearNestedCompCache(compositionId: string): void {",
      "context": {
        "before": [
          "   * Clear nested composition cache for a specific composition",
          "   * Call when a composition is deleted or significantly changed",
          "   */"
        ],
        "after": [
          "    this.nestedCompRenderer?.clearCache(compositionId);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1737:28",
      "file": "engine/LatticeEngine.ts",
      "line": 1737,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.nestedCompRenderer?.clearCache(compositionId);",
      "context": {
        "before": [
          "   * Call when a composition is deleted or significantly changed",
          "   */",
          "  clearNestedCompCache(compositionId: string): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1743:29",
      "file": "engine/LatticeEngine.ts",
      "line": 1743,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAllNestedCompCaches(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all nested composition caches",
          "   */"
        ],
        "after": [
          "    this.nestedCompRenderer?.clearAllCaches();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1744:28",
      "file": "engine/LatticeEngine.ts",
      "line": 1744,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.nestedCompRenderer?.clearAllCaches();",
      "context": {
        "before": [
          "   * Clear all nested composition caches",
          "   */",
          "  clearAllNestedCompCaches(): void {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/LatticeEngine.ts:1755:12",
      "file": "engine/LatticeEngine.ts",
      "line": 1755,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "   * Dispose all engine resources",
          "   * After calling dispose(), the engine cannot be used again.",
          "   */"
        ],
        "after": [
          "    if (this.state.isDisposed) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:64:20",
      "file": "engine/layers/AudioLayer.ts",
      "line": 64,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetId: data?.assetId ?? null,",
      "context": {
        "before": [
          "  private extractAudioData(layerData: Layer): AudioLayerData {",
          "    const data = layerData.data as Partial<AudioLayerData> | undefined;",
          "    return {"
        ],
        "after": [
          "      level: data?.level ?? createAnimatableProperty(\"Level\", 0, \"number\"),",
          "      muted: data?.muted ?? false,",
          "      solo: data?.solo ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:65:18",
      "file": "engine/layers/AudioLayer.ts",
      "line": 65,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "level: data?.level ?? createAnimatableProperty(\"Level\", 0, \"number\"),",
      "context": {
        "before": [
          "    const data = layerData.data as Partial<AudioLayerData> | undefined;",
          "    return {",
          "      assetId: data?.assetId ?? null,"
        ],
        "after": [
          "      muted: data?.muted ?? false,",
          "      solo: data?.solo ?? false,",
          "      pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:66:18",
      "file": "engine/layers/AudioLayer.ts",
      "line": 66,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "muted: data?.muted ?? false,",
      "context": {
        "before": [
          "    return {",
          "      assetId: data?.assetId ?? null,",
          "      level: data?.level ?? createAnimatableProperty(\"Level\", 0, \"number\"),"
        ],
        "after": [
          "      solo: data?.solo ?? false,",
          "      pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),",
          "      loop: data?.loop ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:67:17",
      "file": "engine/layers/AudioLayer.ts",
      "line": 67,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "solo: data?.solo ?? false,",
      "context": {
        "before": [
          "      assetId: data?.assetId ?? null,",
          "      level: data?.level ?? createAnimatableProperty(\"Level\", 0, \"number\"),",
          "      muted: data?.muted ?? false,"
        ],
        "after": [
          "      pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),",
          "      loop: data?.loop ?? false,",
          "      startTime: data?.startTime ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:68:16",
      "file": "engine/layers/AudioLayer.ts",
      "line": 68,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),",
      "context": {
        "before": [
          "      level: data?.level ?? createAnimatableProperty(\"Level\", 0, \"number\"),",
          "      muted: data?.muted ?? false,",
          "      solo: data?.solo ?? false,"
        ],
        "after": [
          "      loop: data?.loop ?? false,",
          "      startTime: data?.startTime ?? 0,",
          "      speed: data?.speed ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:69:17",
      "file": "engine/layers/AudioLayer.ts",
      "line": 69,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "loop: data?.loop ?? false,",
      "context": {
        "before": [
          "      muted: data?.muted ?? false,",
          "      solo: data?.solo ?? false,",
          "      pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),"
        ],
        "after": [
          "      startTime: data?.startTime ?? 0,",
          "      speed: data?.speed ?? 1,",
          "      showWaveform: data?.showWaveform ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:70:22",
      "file": "engine/layers/AudioLayer.ts",
      "line": 70,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "startTime: data?.startTime ?? 0,",
      "context": {
        "before": [
          "      solo: data?.solo ?? false,",
          "      pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),",
          "      loop: data?.loop ?? false,"
        ],
        "after": [
          "      speed: data?.speed ?? 1,",
          "      showWaveform: data?.showWaveform ?? true,",
          "      waveformColor: data?.waveformColor ?? \"#4a90d9\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:71:18",
      "file": "engine/layers/AudioLayer.ts",
      "line": 71,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speed: data?.speed ?? 1,",
      "context": {
        "before": [
          "      pan: data?.pan ?? createAnimatableProperty(\"Pan\", 0, \"number\"),",
          "      loop: data?.loop ?? false,",
          "      startTime: data?.startTime ?? 0,"
        ],
        "after": [
          "      showWaveform: data?.showWaveform ?? true,",
          "      waveformColor: data?.waveformColor ?? \"#4a90d9\",",
          "      exposeFeatures: data?.exposeFeatures ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:72:25",
      "file": "engine/layers/AudioLayer.ts",
      "line": 72,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "showWaveform: data?.showWaveform ?? true,",
      "context": {
        "before": [
          "      loop: data?.loop ?? false,",
          "      startTime: data?.startTime ?? 0,",
          "      speed: data?.speed ?? 1,"
        ],
        "after": [
          "      waveformColor: data?.waveformColor ?? \"#4a90d9\",",
          "      exposeFeatures: data?.exposeFeatures ?? false,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:73:26",
      "file": "engine/layers/AudioLayer.ts",
      "line": 73,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "waveformColor: data?.waveformColor ?? \"#4a90d9\",",
      "context": {
        "before": [
          "      startTime: data?.startTime ?? 0,",
          "      speed: data?.speed ?? 1,",
          "      showWaveform: data?.showWaveform ?? true,"
        ],
        "after": [
          "      exposeFeatures: data?.exposeFeatures ?? false,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:74:27",
      "file": "engine/layers/AudioLayer.ts",
      "line": 74,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "exposeFeatures: data?.exposeFeatures ?? false,",
      "context": {
        "before": [
          "      speed: data?.speed ?? 1,",
          "      showWaveform: data?.showWaveform ?? true,",
          "      waveformColor: data?.waveformColor ?? \"#4a90d9\","
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:82:27",
      "file": "engine/layers/AudioLayer.ts",
      "line": 82,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createIconMesh(): void {",
      "context": {
        "before": [
          "   * Create a visual indicator for the audio layer in the viewport",
          "   * (speaker icon or waveform representation)",
          "   */"
        ],
        "after": [
          "    // Create a simple speaker icon geometry",
          "    this.iconGroup = new THREE.Group();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:130:43",
      "file": "engine/layers/AudioLayer.ts",
      "line": 130,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Evaluate animated audio properties",
          "    if (this.audioData.level) {",
          "      const _level = interpolateProperty("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:154:49",
      "file": "engine/layers/AudioLayer.ts",
      "line": 154,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    // but visible in editor for selection/manipulation",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<AudioLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:162:24",
      "file": "engine/layers/AudioLayer.ts",
      "line": 162,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    // Stop and clean up audio playback",
          "    if (this.playbackNodes) {",
          "      this.stopPlayback();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:200:29",
      "file": "engine/layers/AudioLayer.ts",
      "line": 200,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validFps = Number.isFinite(fps) && fps > 0 ? fps : 30;",
      "context": {
        "before": [
          "   */",
          "  getAudioTimeForFrame(frame: number, fps: number): number {",
          "    // Validate fps (0/NaN would cause division by zero or NaN propagation)"
        ],
        "after": [
          "    const validFrame = Number.isFinite(frame) ? frame : 0;",
          "    const layerTime = validFrame / validFps;",
          "    // Validate speed (NaN would corrupt audio time calculation)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:201:31",
      "file": "engine/layers/AudioLayer.ts",
      "line": 201,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validFrame = Number.isFinite(frame) ? frame : 0;",
      "context": {
        "before": [
          "  getAudioTimeForFrame(frame: number, fps: number): number {",
          "    // Validate fps (0/NaN would cause division by zero or NaN propagation)",
          "    const validFps = Number.isFinite(fps) && fps > 0 ? fps : 30;"
        ],
        "after": [
          "    const layerTime = validFrame / validFps;",
          "    // Validate speed (NaN would corrupt audio time calculation)",
          "    const validSpeed = Number.isFinite(this.audioData.speed)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:204:31",
      "file": "engine/layers/AudioLayer.ts",
      "line": 204,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validSpeed = Number.isFinite(this.audioData.speed)",
      "context": {
        "before": [
          "    const validFrame = Number.isFinite(frame) ? frame : 0;",
          "    const layerTime = validFrame / validFps;",
          "    // Validate speed (NaN would corrupt audio time calculation)"
        ],
        "after": [
          "      ? this.audioData.speed",
          "      : 1;",
          "    const validStartTime = Number.isFinite(this.audioData.startTime)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:207:35",
      "file": "engine/layers/AudioLayer.ts",
      "line": 207,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validStartTime = Number.isFinite(this.audioData.startTime)",
      "context": {
        "before": [
          "    const validSpeed = Number.isFinite(this.audioData.speed)",
          "      ? this.audioData.speed",
          "      : 1;"
        ],
        "after": [
          "      ? this.audioData.startTime",
          "      : 0;",
          "    const audioTime = (layerTime - validStartTime) * validSpeed;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:227:27",
      "file": "engine/layers/AudioLayer.ts",
      "line": 227,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.playbackNodes?.buffer) {",
      "context": {
        "before": [
          "    if (this.audioData.loop) return true;",
          "",
          "    // Check against audio duration if we have a buffer"
        ],
        "after": [
          "      return audioTime < this.playbackNodes.buffer.duration;",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:241:42",
      "file": "engine/layers/AudioLayer.ts",
      "line": 241,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializePlayback(buffer: AudioBuffer): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize playback nodes with an AudioBuffer",
          "   */"
        ],
        "after": [
          "    const context = AudioLayer.getAudioContext();",
          "",
          "    // Create gain and pan nodes"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:264:41",
      "file": "engine/layers/AudioLayer.ts",
      "line": 264,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.updateGain(this.audioData.level?.value ?? 0);",
      "context": {
        "before": [
          "    };",
          "",
          "    // Apply initial level"
        ],
        "after": [
          "    this.updatePan(this.audioData.pan?.value ?? 0);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:265:38",
      "file": "engine/layers/AudioLayer.ts",
      "line": 265,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.updatePan(this.audioData.pan?.value ?? 0);",
      "context": {
        "before": [
          "",
          "    // Apply initial level",
          "    this.updateGain(this.audioData.level?.value ?? 0);"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:271:44",
      "file": "engine/layers/AudioLayer.ts",
      "line": 271,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "startPlayback(frame: number, fps: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Start playback from a specific frame",
          "   */"
        ],
        "after": [
          "    if (!this.playbackNodes || !this.playbackNodes.buffer) return;",
          "    if (this.audioData.muted) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:327:17",
      "file": "engine/layers/AudioLayer.ts",
      "line": 327,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stopPlayback(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Stop playback",
          "   */"
        ],
        "after": [
          "    if (!this.playbackNodes || !this.playbackNodes.source) return;",
          "",
          "    try {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:345:30",
      "file": "engine/layers/AudioLayer.ts",
      "line": 345,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.playbackNodes?.isPlaying ?? false;",
      "context": {
        "before": [
          "   * Check if currently playing",
          "   */",
          "  get isPlaying(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:352:30",
      "file": "engine/layers/AudioLayer.ts",
      "line": 352,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateGain(levelDb: number): void {",
      "context": {
        "before": [
          "   * Update gain (level) - dB to linear conversion",
          "   * Level is in dB: 0 = unity gain, -Infinity = silence, +6 = ~2x louder",
          "   */"
        ],
        "after": [
          "    if (!this.playbackNodes) return;",
          "",
          "    // Validate levelDb (NaN bypasses Math.max/min and corrupts Web Audio)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:356:28",
      "file": "engine/layers/AudioLayer.ts",
      "line": 356,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validDb = Number.isFinite(levelDb) ? levelDb : 0;",
      "context": {
        "before": [
          "    if (!this.playbackNodes) return;",
          "",
          "    // Validate levelDb (NaN bypasses Math.max/min and corrupts Web Audio)"
        ],
        "after": [
          "",
          "    // Convert dB to linear: linear = 10^(dB/20)",
          "    // Clamp to reasonable range: -60dB to +12dB"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:373:25",
      "file": "engine/layers/AudioLayer.ts",
      "line": 373,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updatePan(pan: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update stereo pan (-1 = left, 0 = center, +1 = right)",
          "   */"
        ],
        "after": [
          "    if (!this.playbackNodes) return;",
          "",
          "    // Validate pan (NaN bypasses Math.max/min and corrupts Web Audio)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:377:29",
      "file": "engine/layers/AudioLayer.ts",
      "line": 377,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validPan = Number.isFinite(pan) ? pan : 0;",
      "context": {
        "before": [
          "    if (!this.playbackNodes) return;",
          "",
          "    // Validate pan (NaN bypasses Math.max/min and corrupts Web Audio)"
        ],
        "after": [
          "",
          "    // Clamp pan to valid range",
          "    const clampedPan = Math.max(-1, Math.min(1, validPan));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:391:43",
      "file": "engine/layers/AudioLayer.ts",
      "line": 391,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "scrubAtFrame(frame: number, fps: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Scrub audio at a specific frame (play short snippet)",
          "   */"
        ],
        "after": [
          "    if (!this.playbackNodes || !this.playbackNodes.buffer) return;",
          "    if (this.audioData.muted) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:430:40",
      "file": "engine/layers/AudioLayer.ts",
      "line": 430,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updatePlaybackForFrame(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update playback parameters during playback (called each frame)",
          "   */"
        ],
        "after": [
          "    if (!this.playbackNodes) return;",
          "",
          "    // Interpolate and apply level"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/AudioLayer.ts:458:30",
      "file": "engine/layers/AudioLayer.ts",
      "line": 458,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.playbackNodes?.buffer ?? null;",
      "context": {
        "before": [
          "   * Get the AudioBuffer (if loaded)",
          "   */",
          "  getAudioBuffer(): AudioBuffer | null {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:243:34",
      "file": "engine/layers/BaseLayer.ts",
      "line": 243,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected initializeBlendMode(): void {",
      "context": {
        "before": [
          "   * Initialize blend mode after subclass creates mesh",
          "   * Subclasses should call this at the end of their constructor",
          "   */"
        ],
        "after": [
          "    if (this.blendMode !== \"normal\") {",
          "      this.applyBlendMode(this.blendMode);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:267:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 267,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "evaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Evaluate all animated properties at the given frame",
          "   */"
        ],
        "after": [
          "    // Check if layer is visible at this frame",
          "    const inRange = frame >= this.inPoint && frame <= this.outPoint;",
          "    this.group.visible = this.visible && inRange;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:298:45",
      "file": "engine/layers/BaseLayer.ts",
      "line": 298,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected evaluateTransform(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Evaluate and apply transform at the given frame",
          "   */"
        ],
        "after": [
          "    // Position (apply driven values if present, then audio reactive)",
          "    const basePosition = this.evaluator.evaluate(",
          "      this.transform.position,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:418:5",
      "file": "engine/layers/BaseLayer.ts",
      "line": 418,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    rotation: { x: number; y: number; z: number };",
          "    scale: { x: number; y: number; z: number };",
          "    origin: { x: number; y: number; z: number };"
        ],
        "after": [
          "    const { position, rotation, scale, origin } = transform;",
          "",
          "    // Validate all transform values (NaN causes Three.js rendering issues)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:422:25",
      "file": "engine/layers/BaseLayer.ts",
      "line": 422,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posX = Number.isFinite(position.x) ? position.x : 0;",
      "context": {
        "before": [
          "    const { position, rotation, scale, origin } = transform;",
          "",
          "    // Validate all transform values (NaN causes Three.js rendering issues)"
        ],
        "after": [
          "    const posY = Number.isFinite(position.y) ? position.y : 0;",
          "    const posZ = Number.isFinite(position.z) ? position.z : 0;",
          "    const originX = Number.isFinite(origin.x) ? origin.x : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:423:25",
      "file": "engine/layers/BaseLayer.ts",
      "line": 423,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posY = Number.isFinite(position.y) ? position.y : 0;",
      "context": {
        "before": [
          "",
          "    // Validate all transform values (NaN causes Three.js rendering issues)",
          "    const posX = Number.isFinite(position.x) ? position.x : 0;"
        ],
        "after": [
          "    const posZ = Number.isFinite(position.z) ? position.z : 0;",
          "    const originX = Number.isFinite(origin.x) ? origin.x : 0;",
          "    const originY = Number.isFinite(origin.y) ? origin.y : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:424:25",
      "file": "engine/layers/BaseLayer.ts",
      "line": 424,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posZ = Number.isFinite(position.z) ? position.z : 0;",
      "context": {
        "before": [
          "    // Validate all transform values (NaN causes Three.js rendering issues)",
          "    const posX = Number.isFinite(position.x) ? position.x : 0;",
          "    const posY = Number.isFinite(position.y) ? position.y : 0;"
        ],
        "after": [
          "    const originX = Number.isFinite(origin.x) ? origin.x : 0;",
          "    const originY = Number.isFinite(origin.y) ? origin.y : 0;",
          "    const originZ = Number.isFinite(origin.z) ? origin.z : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:425:28",
      "file": "engine/layers/BaseLayer.ts",
      "line": 425,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const originX = Number.isFinite(origin.x) ? origin.x : 0;",
      "context": {
        "before": [
          "    const posX = Number.isFinite(position.x) ? position.x : 0;",
          "    const posY = Number.isFinite(position.y) ? position.y : 0;",
          "    const posZ = Number.isFinite(position.z) ? position.z : 0;"
        ],
        "after": [
          "    const originY = Number.isFinite(origin.y) ? origin.y : 0;",
          "    const originZ = Number.isFinite(origin.z) ? origin.z : 0;",
          "    const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:426:28",
      "file": "engine/layers/BaseLayer.ts",
      "line": 426,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const originY = Number.isFinite(origin.y) ? origin.y : 0;",
      "context": {
        "before": [
          "    const posY = Number.isFinite(position.y) ? position.y : 0;",
          "    const posZ = Number.isFinite(position.z) ? position.z : 0;",
          "    const originX = Number.isFinite(origin.x) ? origin.x : 0;"
        ],
        "after": [
          "    const originZ = Number.isFinite(origin.z) ? origin.z : 0;",
          "    const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
          "    const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:427:28",
      "file": "engine/layers/BaseLayer.ts",
      "line": 427,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const originZ = Number.isFinite(origin.z) ? origin.z : 0;",
      "context": {
        "before": [
          "    const posZ = Number.isFinite(position.z) ? position.z : 0;",
          "    const originX = Number.isFinite(origin.x) ? origin.x : 0;",
          "    const originY = Number.isFinite(origin.y) ? origin.y : 0;"
        ],
        "after": [
          "    const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
          "    const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "    const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:428:25",
      "file": "engine/layers/BaseLayer.ts",
      "line": 428,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
      "context": {
        "before": [
          "    const originX = Number.isFinite(origin.x) ? origin.x : 0;",
          "    const originY = Number.isFinite(origin.y) ? origin.y : 0;",
          "    const originZ = Number.isFinite(origin.z) ? origin.z : 0;"
        ],
        "after": [
          "    const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "    const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "    // Scale defaults to 1 (not 0) to prevent invisible layers"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:429:25",
      "file": "engine/layers/BaseLayer.ts",
      "line": 429,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
      "context": {
        "before": [
          "    const originY = Number.isFinite(origin.y) ? origin.y : 0;",
          "    const originZ = Number.isFinite(origin.z) ? origin.z : 0;",
          "    const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;"
        ],
        "after": [
          "    const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "    // Scale defaults to 1 (not 0) to prevent invisible layers",
          "    const scaleX = Number.isFinite(scale.x) ? scale.x : 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:430:25",
      "file": "engine/layers/BaseLayer.ts",
      "line": 430,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
      "context": {
        "before": [
          "    const originZ = Number.isFinite(origin.z) ? origin.z : 0;",
          "    const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
          "    const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;"
        ],
        "after": [
          "    // Scale defaults to 1 (not 0) to prevent invisible layers",
          "    const scaleX = Number.isFinite(scale.x) ? scale.x : 1;",
          "    const scaleY = Number.isFinite(scale.y) ? scale.y : 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:432:27",
      "file": "engine/layers/BaseLayer.ts",
      "line": 432,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const scaleX = Number.isFinite(scale.x) ? scale.x : 1;",
      "context": {
        "before": [
          "    const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "    const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "    // Scale defaults to 1 (not 0) to prevent invisible layers"
        ],
        "after": [
          "    const scaleY = Number.isFinite(scale.y) ? scale.y : 1;",
          "    const scaleZ = Number.isFinite(scale.z) ? scale.z : 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:433:27",
      "file": "engine/layers/BaseLayer.ts",
      "line": 433,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const scaleY = Number.isFinite(scale.y) ? scale.y : 1;",
      "context": {
        "before": [
          "    const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "    // Scale defaults to 1 (not 0) to prevent invisible layers",
          "    const scaleX = Number.isFinite(scale.x) ? scale.x : 1;"
        ],
        "after": [
          "    const scaleZ = Number.isFinite(scale.z) ? scale.z : 1;",
          "",
          "    // Position (with origin offset, formerly anchorPoint)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:434:27",
      "file": "engine/layers/BaseLayer.ts",
      "line": 434,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const scaleZ = Number.isFinite(scale.z) ? scale.z : 1;",
      "context": {
        "before": [
          "    // Scale defaults to 1 (not 0) to prevent invisible layers",
          "    const scaleX = Number.isFinite(scale.x) ? scale.x : 1;",
          "    const scaleY = Number.isFinite(scale.y) ? scale.y : 1;"
        ],
        "after": [
          "",
          "    // Position (with origin offset, formerly anchorPoint)",
          "    // In screen coordinates: Y is down, so negate Y"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:468:70",
      "file": "engine/layers/BaseLayer.ts",
      "line": 468,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyAutoOrient(camera?: THREE.Camera, pathTangent?: THREE.Vector3): void {",
      "context": {
        "before": [
          "   * @param camera - The camera to orient toward (for 'toCamera' mode)",
          "   * @param pathTangent - Optional path tangent vector (for 'alongPath' mode)",
          "   */"
        ],
        "after": [
          "    if (this.autoOrient === \"off\") {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:530:38",
      "file": "engine/layers/BaseLayer.ts",
      "line": 530,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAutoOrient(mode: AutoOrientMode): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the auto-orient mode",
          "   */"
        ],
        "after": [
          "    this.autoOrient = mode;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:537:42",
      "file": "engine/layers/BaseLayer.ts",
      "line": 537,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected applyOpacity(opacity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply opacity to layer materials",
          "   */"
        ],
        "after": [
          "    // Validate opacity (NaN bypasses Math.max/min clamp)",
          "    const validOpacity = Number.isFinite(opacity) ? opacity : 100;",
          "    const normalizedOpacity = Math.max(0, Math.min(100, validOpacity)) / 100;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:539:33",
      "file": "engine/layers/BaseLayer.ts",
      "line": 539,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOpacity = Number.isFinite(opacity) ? opacity : 100;",
      "context": {
        "before": [
          "   */",
          "  protected applyOpacity(opacity: number): void {",
          "    // Validate opacity (NaN bypasses Math.max/min clamp)"
        ],
        "after": [
          "    const normalizedOpacity = Math.max(0, Math.min(100, validOpacity)) / 100;",
          "",
          "    this.group.traverse((child) => {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:575:71",
      "file": "engine/layers/BaseLayer.ts",
      "line": 575,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyEvaluatedState(state: import(\"../MotionEngine\").EvaluatedLayer): void {",
      "context": {
        "before": [
          "   *",
          "   * @param state - Pre-evaluated layer state from MotionEngine",
          "   */"
        ],
        "after": [
          "    // Set visibility",
          "    this.group.visible = state.visible;",
          ""
        ]
      },
      "typeInfo": "Function type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:668:4",
      "file": "engine/layers/BaseLayer.ts",
      "line": 668,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  protected onApplyEvaluatedState(",
          "    _state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    // Default: fall back to legacy evaluation for backwards compatibility",
          "    // Subclasses should override this to use evaluated state directly",
          "    // NOTE: This is a transitional measure - eventually all layers should"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:682:37",
      "file": "engine/layers/BaseLayer.ts",
      "line": 682,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "update(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update layer properties",
          "   */"
        ],
        "after": [
          "    if (properties.visible !== undefined) {",
          "      this.visible = properties.visible;",
          "      this.group.visible = this.visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:771:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 771,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set layer visibility",
          "   */"
        ],
        "after": [
          "    this.visible = visible;",
          "    this.group.visible = visible;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:800:47",
      "file": "engine/layers/BaseLayer.ts",
      "line": 800,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDrivenValues(values: Map<string, number>): void {",
      "context": {
        "before": [
          "   * These override the base animated values during transform evaluation",
          "   * @param values Map of property path to driven value",
          "   */"
        ],
        "after": [
          "    this.drivenValues = values;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:807:22",
      "file": "engine/layers/BaseLayer.ts",
      "line": 807,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearDrivenValues(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear driven values",
          "   */"
        ],
        "after": [
          "    this.drivenValues.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:817:45",
      "file": "engine/layers/BaseLayer.ts",
      "line": 817,
      "column": 45,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (drivenValue !== undefined && Number.isFinite(drivenValue)) {",
      "context": {
        "before": [
          "  protected getDrivenOrBase(propertyPath: string, baseValue: number): number {",
          "    const drivenValue = this.drivenValues.get(propertyPath);",
          "    // Validate driven value (NaN from expressions would corrupt transform pipeline)"
        ],
        "after": [
          "      return drivenValue;",
          "    }",
          "    // Validate base value as final fallback"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:821:19",
      "file": "engine/layers/BaseLayer.ts",
      "line": 821,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(baseValue) ? baseValue : 0;",
      "context": {
        "before": [
          "      return drivenValue;",
          "    }",
          "    // Validate base value as final fallback"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:833:63",
      "file": "engine/layers/BaseLayer.ts",
      "line": 833,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioReactiveValues(values: Map<TargetParameter, number>): void {",
      "context": {
        "before": [
          "   * These are applied additively/multiplicatively to animated properties",
          "   * @param values Map of target parameter to audio-derived value (0-1 range typically)",
          "   */"
        ],
        "after": [
          "    this.audioReactiveValues = values;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:840:29",
      "file": "engine/layers/BaseLayer.ts",
      "line": 840,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAudioReactiveValues(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear audio reactive values",
          "   */"
        ],
        "after": [
          "    this.audioReactiveValues.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:863:30",
      "file": "engine/layers/BaseLayer.ts",
      "line": 863,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validBase = Number.isFinite(baseValue) ? baseValue : 0;",
      "context": {
        "before": [
          "    range: { min?: number; max?: number } = {},",
          "  ): number {",
          "    // Validate baseValue (NaN propagates through all calculations)"
        ],
        "after": [
          "",
          "    const audioValue = this.getAudioReactiveValue(target);",
          "    // Validate audioValue (could be NaN from audio analysis)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:867:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 867,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validAudio = Number.isFinite(audioValue) ? audioValue : 0;",
      "context": {
        "before": [
          "",
          "    const audioValue = this.getAudioReactiveValue(target);",
          "    // Validate audioValue (could be NaN from audio analysis)"
        ],
        "after": [
          "    if (validAudio === 0) return validBase;",
          "",
          "    let result: number;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:887:17",
      "file": "engine/layers/BaseLayer.ts",
      "line": 887,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(result)) result = validBase;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Final NaN check (defensive, shouldn't happen after validation)"
        ],
        "after": [
          "",
          "    // Clamp to range if specified (using validated range values)",
          "    const validMin = Number.isFinite(range.min) ? range.min : undefined;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:890:29",
      "file": "engine/layers/BaseLayer.ts",
      "line": 890,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validMin = Number.isFinite(range.min) ? range.min : undefined;",
      "context": {
        "before": [
          "    if (!Number.isFinite(result)) result = validBase;",
          "",
          "    // Clamp to range if specified (using validated range values)"
        ],
        "after": [
          "    const validMax = Number.isFinite(range.max) ? range.max : undefined;",
          "    if (validMin !== undefined) result = Math.max(validMin, result);",
          "    if (validMax !== undefined) result = Math.min(validMax, result);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:891:29",
      "file": "engine/layers/BaseLayer.ts",
      "line": 891,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validMax = Number.isFinite(range.max) ? range.max : undefined;",
      "context": {
        "before": [
          "",
          "    // Clamp to range if specified (using validated range values)",
          "    const validMin = Number.isFinite(range.min) ? range.min : undefined;"
        ],
        "after": [
          "    if (validMin !== undefined) result = Math.max(validMin, result);",
          "    if (validMax !== undefined) result = Math.min(validMax, result);",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:906:40",
      "file": "engine/layers/BaseLayer.ts",
      "line": 906,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEffects(effects: EffectInstance[]): void {",
      "context": {
        "before": [
          "   * Update the effects stack for this layer",
          "   * @param effects - Array of effect instances",
          "   */"
        ],
        "after": [
          "    this.effects = effects;",
          "    this.effectsDirty = true;",
          "  }"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:933:38",
      "file": "engine/layers/BaseLayer.ts",
      "line": 933,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEffectsEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set layer-level effects enabled state (fx switch)",
          "   */"
        ],
        "after": [
          "    this.effectsEnabled = enabled;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:949:26",
      "file": "engine/layers/BaseLayer.ts",
      "line": 949,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!this.layerStyles?.enabled) {",
      "context": {
        "before": [
          "   * Returns true if the layer has layer styles with at least one style type enabled",
          "   */",
          "  hasEnabledLayerStyles(): boolean {"
        ],
        "after": [
          "      return false;",
          "    }",
          "    // Check if any individual style is enabled"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:954:34",
      "file": "engine/layers/BaseLayer.ts",
      "line": 954,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.dropShadow?.enabled ||",
      "context": {
        "before": [
          "    }",
          "    // Check if any individual style is enabled",
          "    return !!("
        ],
        "after": [
          "      this.layerStyles.innerShadow?.enabled ||",
          "      this.layerStyles.outerGlow?.enabled ||",
          "      this.layerStyles.innerGlow?.enabled ||"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:955:35",
      "file": "engine/layers/BaseLayer.ts",
      "line": 955,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.innerShadow?.enabled ||",
      "context": {
        "before": [
          "    // Check if any individual style is enabled",
          "    return !!(",
          "      this.layerStyles.dropShadow?.enabled ||"
        ],
        "after": [
          "      this.layerStyles.outerGlow?.enabled ||",
          "      this.layerStyles.innerGlow?.enabled ||",
          "      this.layerStyles.bevelEmboss?.enabled ||"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:956:33",
      "file": "engine/layers/BaseLayer.ts",
      "line": 956,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.outerGlow?.enabled ||",
      "context": {
        "before": [
          "    return !!(",
          "      this.layerStyles.dropShadow?.enabled ||",
          "      this.layerStyles.innerShadow?.enabled ||"
        ],
        "after": [
          "      this.layerStyles.innerGlow?.enabled ||",
          "      this.layerStyles.bevelEmboss?.enabled ||",
          "      this.layerStyles.satin?.enabled ||"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:957:33",
      "file": "engine/layers/BaseLayer.ts",
      "line": 957,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.innerGlow?.enabled ||",
      "context": {
        "before": [
          "      this.layerStyles.dropShadow?.enabled ||",
          "      this.layerStyles.innerShadow?.enabled ||",
          "      this.layerStyles.outerGlow?.enabled ||"
        ],
        "after": [
          "      this.layerStyles.bevelEmboss?.enabled ||",
          "      this.layerStyles.satin?.enabled ||",
          "      this.layerStyles.colorOverlay?.enabled ||"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:958:35",
      "file": "engine/layers/BaseLayer.ts",
      "line": 958,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.bevelEmboss?.enabled ||",
      "context": {
        "before": [
          "      this.layerStyles.innerShadow?.enabled ||",
          "      this.layerStyles.outerGlow?.enabled ||",
          "      this.layerStyles.innerGlow?.enabled ||"
        ],
        "after": [
          "      this.layerStyles.satin?.enabled ||",
          "      this.layerStyles.colorOverlay?.enabled ||",
          "      this.layerStyles.gradientOverlay?.enabled ||"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:959:29",
      "file": "engine/layers/BaseLayer.ts",
      "line": 959,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.satin?.enabled ||",
      "context": {
        "before": [
          "      this.layerStyles.outerGlow?.enabled ||",
          "      this.layerStyles.innerGlow?.enabled ||",
          "      this.layerStyles.bevelEmboss?.enabled ||"
        ],
        "after": [
          "      this.layerStyles.colorOverlay?.enabled ||",
          "      this.layerStyles.gradientOverlay?.enabled ||",
          "      this.layerStyles.stroke?.enabled"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:960:36",
      "file": "engine/layers/BaseLayer.ts",
      "line": 960,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.colorOverlay?.enabled ||",
      "context": {
        "before": [
          "      this.layerStyles.innerGlow?.enabled ||",
          "      this.layerStyles.bevelEmboss?.enabled ||",
          "      this.layerStyles.satin?.enabled ||"
        ],
        "after": [
          "      this.layerStyles.gradientOverlay?.enabled ||",
          "      this.layerStyles.stroke?.enabled",
          "    );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:961:39",
      "file": "engine/layers/BaseLayer.ts",
      "line": 961,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.gradientOverlay?.enabled ||",
      "context": {
        "before": [
          "      this.layerStyles.bevelEmboss?.enabled ||",
          "      this.layerStyles.satin?.enabled ||",
          "      this.layerStyles.colorOverlay?.enabled ||"
        ],
        "after": [
          "      this.layerStyles.stroke?.enabled",
          "    );",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:962:30",
      "file": "engine/layers/BaseLayer.ts",
      "line": 962,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.layerStyles.stroke?.enabled",
      "context": {
        "before": [
          "      this.layerStyles.satin?.enabled ||",
          "      this.layerStyles.colorOverlay?.enabled ||",
          "      this.layerStyles.gradientOverlay?.enabled ||"
        ],
        "after": [
          "    );",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1084:50",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1084,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerStyles(styles: LayerStyles | undefined): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set layer styles",
          "   */"
        ],
        "after": [
          "    this.layerStyles = styles;",
          "    this.effectsDirty = true;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1092:40",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1092,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setQuality(quality: \"draft\" | \"best\"): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set layer quality mode (draft = faster preview, best = full quality)",
          "   */"
        ],
        "after": [
          "    this.quality = quality;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1118:39",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1118,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const hasStyles = this.layerStyles?.enabled && this.hasEnabledLayerStyles();",
      "context": {
        "before": [
          "   * @returns Processed canvas or null if no processing needed",
          "   */",
          "  protected processEffects(frame: number): HTMLCanvasElement | null {"
        ],
        "after": [
          "    const hasEffects = this.hasEnabledEffects();",
          "    const hasColorMods = this.hasColorModifiers(); // Check for audio-reactive color/blur",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1235:71",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1235,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected applyProcessedEffects(_processedCanvas: HTMLCanvasElement): void {",
      "context": {
        "before": [
          "   * Override in subclasses to update their texture from the processed canvas",
          "   * @param processedCanvas - Canvas with effects applied",
          "   */"
        ],
        "after": [
          "    // Default: no-op",
          "    // Subclasses should override to update their material/texture",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1254:73",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1254,
      "column": 73,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected initializeMotionBlurProcessor(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize motion blur processor with layer dimensions",
          "   */"
        ],
        "after": [
          "    if (!this.motionBlurProcessor) {",
          "      const settings = this.motionBlurSettings",
          "        ? {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1275:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1275,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(this.motionBlurSettings?.shutterAngle ?? 180)",
      "context": {
        "before": [
          "      );",
          "    } else if (",
          "      this.motionBlurProcessor.getSettings().shutterAngle !=="
        ],
        "after": [
          "    ) {",
          "      // Update settings if changed",
          "      this.motionBlurProcessor.setSettings({"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1279:46",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1279,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "shutterAngle: this.motionBlurSettings?.shutterAngle ?? 180,",
      "context": {
        "before": [
          "    ) {",
          "      // Update settings if changed",
          "      this.motionBlurProcessor.setSettings({"
        ],
        "after": [
          "        shutterPhase: this.motionBlurSettings?.shutterPhase ?? -90,",
          "        samplesPerFrame: this.motionBlurSettings?.samplesPerFrame ?? 16,",
          "      });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1280:46",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1280,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "shutterPhase: this.motionBlurSettings?.shutterPhase ?? -90,",
      "context": {
        "before": [
          "      // Update settings if changed",
          "      this.motionBlurProcessor.setSettings({",
          "        shutterAngle: this.motionBlurSettings?.shutterAngle ?? 180,"
        ],
        "after": [
          "        samplesPerFrame: this.motionBlurSettings?.samplesPerFrame ?? 16,",
          "      });",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1281:49",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1281,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "samplesPerFrame: this.motionBlurSettings?.samplesPerFrame ?? 16,",
      "context": {
        "before": [
          "      this.motionBlurProcessor.setSettings({",
          "        shutterAngle: this.motionBlurSettings?.shutterAngle ?? 180,",
          "        shutterPhase: this.motionBlurSettings?.shutterPhase ?? -90,"
        ],
        "after": [
          "      });",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1398:34",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1398,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlur(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set motion blur enabled state",
          "   */"
        ],
        "after": [
          "    this.motionBlur = enabled;",
          "    this.layerData.motionBlur = enabled;",
          "    if (!enabled) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1402:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1402,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.motionBlurProcessor?.clearBuffer();",
      "context": {
        "before": [
          "    this.motionBlur = enabled;",
          "    this.layerData.motionBlur = enabled;",
          "    if (!enabled) {"
        ],
        "after": [
          "      this.prevTransform = null;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1410:68",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1410,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlurSettings(settings: Partial<LayerMotionBlurSettings>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update motion blur settings",
          "   */"
        ],
        "after": [
          "    if (!this.motionBlurSettings) {",
          "      this.motionBlurSettings = {",
          "        type: \"standard\","
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1460:51",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1460,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMatteCanvas(canvas: HTMLCanvasElement | null): void {",
      "context": {
        "before": [
          "   * Set the matte canvas (called by LayerManager when compositing)",
          "   * @param canvas - The rendered canvas of the matte layer",
          "   */"
        ],
        "after": [
          "    this.matteCanvas = canvas;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1465:56",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1465,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTrackMatteCanvas(canvas: HTMLCanvasElement | null): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use setMatteCanvas() instead */"
        ],
        "after": [
          "    this.setMatteCanvas(canvas);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1516:31",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1516,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMasks(masks: LayerMask[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update masks",
          "   */"
        ],
        "after": [
          "    this.masks = masks;",
          "  }",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1554:43",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1554,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected evaluateEffects(frame: number): void {",
      "context": {
        "before": [
          "   * Called after frame evaluation to apply effects AND masks",
          "   * This should be called by subclasses after their content is rendered",
          "   */"
        ],
        "after": [
          "    const hasEffects = this.hasEnabledEffects();",
          "    const hasMasks = this.hasMasks();",
          "    const hasTrackMatte = this.hasTrackMatte();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1598:4",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1598,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  protected applyEvaluatedEffects(",
          "    evaluatedEffects: readonly import(\"../MotionEngine\").EvaluatedEffect[],"
        ],
        "after": [
          "    if (evaluatedEffects.length === 0 || !this.hasEnabledEffects()) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1666:38",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1666,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setParent(parent: BaseLayer | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set parent layer reference",
          "   */"
        ],
        "after": [
          "    // Remove from old parent's Three.js hierarchy",
          "    if (this.parentLayer) {",
          "      this.parentLayer.getObject().remove(this.group);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1705:33",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1705,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionFps(fps: number): void {",
      "context": {
        "before": [
          "   * Set composition FPS for time-based effects (Echo, Posterize Time, etc.)",
          "   * Called by LayerManager when composition settings change.",
          "   */"
        ],
        "after": [
          "    // Validate fps (NaN/0 causes division errors in time-based effects)",
          "    this.compositionFps = Number.isFinite(fps) && fps > 0 ? fps : 16;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1707:34",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1707,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.compositionFps = Number.isFinite(fps) && fps > 0 ? fps : 16;",
      "context": {
        "before": [
          "   */",
          "  setCompositionFps(fps: number): void {",
          "    // Validate fps (NaN/0 causes division errors in time-based effects)"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1718:41",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1718,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected applyBlendMode(mode: string): void {",
      "context": {
        "before": [
          "   * Apply blend mode to layer materials",
          "   * Delegates to blendModeUtils for actual blend configuration",
          "   */"
        ],
        "after": [
          "    applyBlendModeToGroup(this.group, mode);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1730:60",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1730,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "computeMotionPath(startFrame?: number, endFrame?: number): void {",
      "context": {
        "before": [
          "   * Compute motion path from position keyframes",
          "   * Samples position at each frame from inPoint to outPoint",
          "   */"
        ],
        "after": [
          "    // Validate frame bounds (NaN/Infinity would cause infinite loop or no iterations)",
          "    const rawStart = startFrame ?? this.inPoint;",
          "    const rawEnd = endFrame ?? this.outPoint;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1734:26",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1734,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const start = Number.isFinite(rawStart)",
      "context": {
        "before": [
          "    // Validate frame bounds (NaN/Infinity would cause infinite loop or no iterations)",
          "    const rawStart = startFrame ?? this.inPoint;",
          "    const rawEnd = endFrame ?? this.outPoint;"
        ],
        "after": [
          "      ? Math.max(0, Math.floor(rawStart))",
          "      : 0;",
          "    const end = Number.isFinite(rawEnd) ? Math.floor(rawEnd) : start;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1737:24",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1737,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const end = Number.isFinite(rawEnd) ? Math.floor(rawEnd) : start;",
      "context": {
        "before": [
          "    const start = Number.isFinite(rawStart)",
          "      ? Math.max(0, Math.floor(rawStart))",
          "      : 0;"
        ],
        "after": [
          "",
          "    // Cap motion path length to prevent memory exhaustion (max 10,000 points)",
          "    const MAX_PATH_POINTS = 10000;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1750:29",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1750,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validX = Number.isFinite(pos.x) ? pos.x : 0;",
      "context": {
        "before": [
          "      const pos = this.evaluator.evaluate(this.transform.position, frame);",
          "      // Convert to Three.js coordinates (Y is flipped)",
          "      // Validate position values to prevent NaN in Three.js"
        ],
        "after": [
          "      const validY = Number.isFinite(pos.y) ? pos.y : 0;",
          "      const validZ = Number.isFinite(pos.z) ? pos.z : 0;",
          "      this.motionPathPoints.push(new THREE.Vector3(validX, -validY, validZ));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1751:29",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1751,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validY = Number.isFinite(pos.y) ? pos.y : 0;",
      "context": {
        "before": [
          "      // Convert to Three.js coordinates (Y is flipped)",
          "      // Validate position values to prevent NaN in Three.js",
          "      const validX = Number.isFinite(pos.x) ? pos.x : 0;"
        ],
        "after": [
          "      const validZ = Number.isFinite(pos.z) ? pos.z : 0;",
          "      this.motionPathPoints.push(new THREE.Vector3(validX, -validY, validZ));",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1752:29",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1752,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validZ = Number.isFinite(pos.z) ? pos.z : 0;",
      "context": {
        "before": [
          "      // Validate position values to prevent NaN in Three.js",
          "      const validX = Number.isFinite(pos.x) ? pos.x : 0;",
          "      const validY = Number.isFinite(pos.y) ? pos.y : 0;"
        ],
        "after": [
          "      this.motionPathPoints.push(new THREE.Vector3(validX, -validY, validZ));",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1763:30",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1763,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private rebuildMotionPath(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Rebuild the motion path line from computed points",
          "   */"
        ],
        "after": [
          "    // Dispose existing path",
          "    if (this.motionPath) {",
          "      this.group.remove(this.motionPath);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1819:36",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1819,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMotionPathMarkers(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create markers at keyframe positions on the motion path",
          "   */"
        ],
        "after": [
          "    this.motionPathMarkers = new THREE.Group();",
          "    this.motionPathMarkers.name = `motion_path_markers_${this.id}`;",
          "    this.motionPathMarkers.renderOrder = 999;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1854:41",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1854,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionPathVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set motion path visibility",
          "   */"
        ],
        "after": [
          "    this.showMotionPath = visible;",
          "",
          "    if (visible && this.motionPathPoints.length === 0) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1881:46",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1881,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return (this.transform.position.keyframes?.length ?? 0) > 0;",
      "context": {
        "before": [
          "   * Check if layer has position animation",
          "   */",
          "  hasPositionAnimation(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1891:37",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1891,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "createAxisGizmo(size: number = 50): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create 3D axis gizmo at anchor point",
          "   */"
        ],
        "after": [
          "    // Dispose existing gizmo",
          "    if (this.axisGizmo) {",
          "      this.group.remove(this.axisGizmo);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1954:33",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1954,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const originVal = originProp?.value || { x: 0, y: 0, z: 0 };",
      "context": {
        "before": [
          "",
          "    // Position at origin (formerly anchor point)",
          "    const originProp = this.transform.origin || this.transform.anchorPoint;"
        ],
        "after": [
          "    this.axisGizmo.position.set(-originVal.x, originVal.y, -(originVal.z ?? 0));",
          "",
          "    this.axisGizmo.visible = this.showAxisGizmo;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:1964:38",
      "file": "engine/layers/BaseLayer.ts",
      "line": 1964,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private addAxisLabels(size: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add axis labels (X, Y, Z)",
          "   */"
        ],
        "after": [
          "    if (!this.axisGizmo) return;",
          "",
          "    // Create small spheres at axis ends as labels"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:2000:40",
      "file": "engine/layers/BaseLayer.ts",
      "line": 2000,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAxisGizmoVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set axis gizmo visibility",
          "   */"
        ],
        "after": [
          "    this.showAxisGizmo = visible;",
          "",
          "    if (visible && !this.axisGizmo) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:2022:28",
      "file": "engine/layers/BaseLayer.ts",
      "line": 2022,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateAxisGizmoPosition(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update axis gizmo position to match origin",
          "   */"
        ],
        "after": [
          "    if (!this.axisGizmo) return;",
          "",
          "    const originProp = this.transform.origin || this.transform.anchorPoint;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:2026:33",
      "file": "engine/layers/BaseLayer.ts",
      "line": 2026,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const originVal = originProp?.value || { x: 0, y: 0, z: 0 };",
      "context": {
        "before": [
          "    if (!this.axisGizmo) return;",
          "",
          "    const originProp = this.transform.origin || this.transform.anchorPoint;"
        ],
        "after": [
          "    this.axisGizmo.position.set(-originVal.x, originVal.y, -(originVal.z ?? 0));",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:2060:12",
      "file": "engine/layers/BaseLayer.ts",
      "line": 2060,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose layer resources",
          "   */"
        ],
        "after": [
          "    // Dispose motion path",
          "    if (this.motionPath) {",
          "      this.motionPath.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:2097:23",
      "file": "engine/layers/BaseLayer.ts",
      "line": 2097,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "child.geometry?.dispose();",
      "context": {
        "before": [
          "    // Dispose all meshes in the group",
          "    this.group.traverse((child) => {",
          "      if (child instanceof THREE.Mesh) {"
        ],
        "after": [
          "",
          "        if (Array.isArray(child.material)) {",
          "          child.material.forEach((m) => m.dispose());"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/BaseLayer.ts:2117:24",
      "file": "engine/layers/BaseLayer.ts",
      "line": 2117,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Override in subclasses for type-specific cleanup",
          "   */"
        ],
        "after": [
          "    // Default: no additional cleanup",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/blendModeUtils.ts:21:2",
      "file": "engine/layers/blendModeUtils.ts",
      "line": 21,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function setMaterialBlendMode(",
          "  material: THREE.Material,",
          "  mode: string,"
        ],
        "after": [
          "  // Reset to defaults first",
          "  material.blending = THREE.NormalBlending;",
          "  material.blendEquation = THREE.AddEquation;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/blendModeUtils.ts:128:72",
      "file": "engine/layers/blendModeUtils.ts",
      "line": 128,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function applyBlendModeToGroup(group: THREE.Group, mode: string): void {",
      "context": {
        "before": [
          " * @param group - Three.js group containing meshes",
          " * @param mode - Blend mode name",
          " */"
        ],
        "after": [
          "  group.traverse((child) => {",
          "    if (child instanceof THREE.Mesh && child.material) {",
          "      const material = child.material as THREE.Material;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:120:21",
      "file": "engine/layers/CameraLayer.ts",
      "line": 120,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cameraId: data?.cameraId ?? \"\",",
      "context": {
        "before": [
          "    const data = layerData.data as CameraLayerData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      isActiveCamera: data?.isActiveCamera ?? false,",
          "      pathFollowing: data?.pathFollowing,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:121:27",
      "file": "engine/layers/CameraLayer.ts",
      "line": 121,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "isActiveCamera: data?.isActiveCamera ?? false,",
      "context": {
        "before": [
          "",
          "    return {",
          "      cameraId: data?.cameraId ?? \"\","
        ],
        "after": [
          "      pathFollowing: data?.pathFollowing,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:122:26",
      "file": "engine/layers/CameraLayer.ts",
      "line": 122,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathFollowing: data?.pathFollowing,",
      "context": {
        "before": [
          "    return {",
          "      cameraId: data?.cameraId ?? \"\",",
          "      isActiveCamera: data?.isActiveCamera ?? false,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:133:4",
      "file": "engine/layers/CameraLayer.ts",
      "line": 133,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    getter: CameraGetter,",
          "    updater: CameraUpdater,",
          "    atFrameGetter?: CameraAtFrameGetter,"
        ],
        "after": [
          "    this.cameraGetter = getter;",
          "    this.cameraUpdater = updater;",
          "    this.cameraAtFrameGetter = atFrameGetter;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:142:59",
      "file": "engine/layers/CameraLayer.ts",
      "line": 142,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSplineProvider(provider: CameraSplineProvider | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the spline provider for path following",
          "   */"
        ],
        "after": [
          "    this.splineProvider = provider;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:149:39",
      "file": "engine/layers/CameraLayer.ts",
      "line": 149,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionAspect(aspect: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set composition aspect ratio for frustum visualization",
          "   */"
        ],
        "after": [
          "    // Validate aspect ratio (NaN/0 would corrupt frustum calculations)",
          "    this.compositionAspect =",
          "      Number.isFinite(aspect) && aspect > 0 ? aspect : 16 / 9;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:152:14",
      "file": "engine/layers/CameraLayer.ts",
      "line": 152,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(aspect) && aspect > 0 ? aspect : 16 / 9;",
      "context": {
        "before": [
          "  setCompositionAspect(aspect: number): void {",
          "    // Validate aspect ratio (NaN/0 would corrupt frustum calculations)",
          "    this.compositionAspect ="
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:166:41",
      "file": "engine/layers/CameraLayer.ts",
      "line": 166,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.cameraData.pathFollowing?.enabled ?? false;",
      "context": {
        "before": [
          "   * Check if path following is active",
          "   */",
          "  isFollowingPath(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:172:21",
      "file": "engine/layers/CameraLayer.ts",
      "line": 172,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetAutoAdvance(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset auto-advance parameter (for deterministic scrubbing)",
          "   */"
        ],
        "after": [
          "    this.autoAdvanceT = 0;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:183:28",
      "file": "engine/layers/CameraLayer.ts",
      "line": 183,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createWireframe(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create camera wireframe indicator",
          "   */"
        ],
        "after": [
          "    this.wireframe = new THREE.Group();",
          "    this.wireframe.name = `camera_wireframe_${this.id}`;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:266:26",
      "file": "engine/layers/CameraLayer.ts",
      "line": 266,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createFrustum(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create frustum visualization",
          "   */"
        ],
        "after": [
          "    const camera = this.getCamera();",
          "    if (!camera) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:278:14",
      "file": "engine/layers/CameraLayer.ts",
      "line": 278,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(camera.nearClip) && camera.nearClip > 0",
      "context": {
        "before": [
          "    // Calculate frustum dimensions based on camera properties",
          "    // Validate all camera values (NaN would corrupt geometry calculations)",
          "    const near ="
        ],
        "after": [
          "        ? camera.nearClip",
          "        : 0.1;",
          "    const rawFar = Number.isFinite(camera.farClip) ? camera.farClip : 1000;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:281:27",
      "file": "engine/layers/CameraLayer.ts",
      "line": 281,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rawFar = Number.isFinite(camera.farClip) ? camera.farClip : 1000;",
      "context": {
        "before": [
          "      Number.isFinite(camera.nearClip) && camera.nearClip > 0",
          "        ? camera.nearClip",
          "        : 0.1;"
        ],
        "after": [
          "    const far = Math.min(rawFar, 2000); // Cap for visualization",
          "    const rawAngle = Number.isFinite(camera.angleOfView)",
          "      ? camera.angleOfView"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:283:29",
      "file": "engine/layers/CameraLayer.ts",
      "line": 283,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rawAngle = Number.isFinite(camera.angleOfView)",
      "context": {
        "before": [
          "        : 0.1;",
          "    const rawFar = Number.isFinite(camera.farClip) ? camera.farClip : 1000;",
          "    const far = Math.min(rawFar, 2000); // Cap for visualization"
        ],
        "after": [
          "      ? camera.angleOfView",
          "      : 50;",
          "    const fov = rawAngle * (Math.PI / 180);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:355:33",
      "file": "engine/layers/CameraLayer.ts",
      "line": 355,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateWireframeColor(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update wireframe color based on active state",
          "   */"
        ],
        "after": [
          "    if (!this.wireframe) return;",
          "",
          "    const color = this.cameraData.isActiveCamera ? 0x00aaff : 0xffaa00;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:419:35",
      "file": "engine/layers/CameraLayer.ts",
      "line": 419,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setActiveCamera(active: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set as active camera",
          "   */"
        ],
        "after": [
          "    this.cameraData.isActiveCamera = active;",
          "    this.updateWireframeColor();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:438:40",
      "file": "engine/layers/CameraLayer.ts",
      "line": 438,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setWireframeVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set wireframe visibility",
          "   */"
        ],
        "after": [
          "    this.wireframeVisible = visible;",
          "    if (this.wireframe) {",
          "      this.wireframe.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:448:38",
      "file": "engine/layers/CameraLayer.ts",
      "line": 448,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrustumVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set frustum visibility",
          "   */"
        ],
        "after": [
          "    this.showFrustum = visible;",
          "    if (this.frustumHelper) {",
          "      this.frustumHelper.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:459:43",
      "file": "engine/layers/CameraLayer.ts",
      "line": 459,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Track current frame for interpolation",
          "    this.currentFrame = frame;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:472:20",
      "file": "engine/layers/CameraLayer.ts",
      "line": 472,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathFollowing?.enabled &&",
      "context": {
        "before": [
          "    // Check for path following",
          "    const pathFollowing = this.cameraData.pathFollowing;",
          "    const usePathFollowing ="
        ],
        "after": [
          "      pathFollowing.pathLayerId &&",
          "      this.splineProvider;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:536:4",
      "file": "engine/layers/CameraLayer.ts",
      "line": 536,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    // Apply evaluated path parameter if using path following"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:542:36",
      "file": "engine/layers/CameraLayer.ts",
      "line": 542,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.cameraData.pathFollowing?.enabled",
      "context": {
        "before": [
          "    // Apply evaluated path parameter if using path following",
          "    if (",
          "      props.pathParameter !== undefined &&"
        ],
        "after": [
          "    ) {",
          "      // Update the parameter value directly for the next evaluation",
          "      this.cameraData.pathFollowing.parameter.value ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:560:4",
      "file": "engine/layers/CameraLayer.ts",
      "line": 560,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    frame: number,",
          "    pathFollowing: CameraPathFollowing,",
          "    camera: Camera3D,"
        ],
        "after": [
          "    if (!this.splineProvider) return;",
          "",
          "    // Get the path parameter (0-1)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:570:33",
      "file": "engine/layers/CameraLayer.ts",
      "line": 570,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validSpeed = Number.isFinite(pathFollowing.autoAdvanceSpeed)",
      "context": {
        "before": [
          "      // Auto-advance mode: calculate t from frame",
          "      // DETERMINISM: t is calculated from frame, not accumulated state",
          "      // Validate autoAdvanceSpeed (NaN would propagate through modulo)"
        ],
        "after": [
          "        ? pathFollowing.autoAdvanceSpeed",
          "        : 0.01;",
          "      const validFrame = Number.isFinite(frame) ? frame : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:573:33",
      "file": "engine/layers/CameraLayer.ts",
      "line": 573,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validFrame = Number.isFinite(frame) ? frame : 0;",
      "context": {
        "before": [
          "      const validSpeed = Number.isFinite(pathFollowing.autoAdvanceSpeed)",
          "        ? pathFollowing.autoAdvanceSpeed",
          "        : 0.01;"
        ],
        "after": [
          "      t = (validFrame * validSpeed) % 1;",
          "    } else {",
          "      // Manual/keyframed mode: interpolate from animated property"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:586:17",
      "file": "engine/layers/CameraLayer.ts",
      "line": 586,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(t)) t = 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Validate t after interpolation (could return NaN from expression)"
        ],
        "after": [
          "",
          "    // Apply pathPosition audio modifier to t",
          "    // pathPosition is 0-1, additive to the path parameter"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:593:14",
      "file": "engine/layers/CameraLayer.ts",
      "line": 593,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(audioMod.pathPosition) &&",
      "context": {
        "before": [
          "    const audioMod = this.currentAudioModifiers;",
          "    if (",
          "      audioMod.pathPosition !== undefined &&"
        ],
        "after": [
          "      audioMod.pathPosition !== 0",
          "    ) {",
          "      t += audioMod.pathPosition;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:618:35",
      "file": "engine/layers/CameraLayer.ts",
      "line": 618,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validLookAhead = Number.isFinite(pathFollowing.lookAhead)",
      "context": {
        "before": [
          "    // Calculate look-ahead position for orientation",
          "    let lookTarget: SplineQueryResult | null = null;",
          "    // Validate lookAhead (NaN would produce NaN lookAheadT)"
        ],
        "after": [
          "      ? pathFollowing.lookAhead",
          "      : 0;",
          "    if (pathFollowing.alignToPath && validLookAhead > 0) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:632:33",
      "file": "engine/layers/CameraLayer.ts",
      "line": 632,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOffsetY = Number.isFinite(pathFollowing.offsetY)",
      "context": {
        "before": [
          "",
          "    // Set camera position",
          "    // Validate offsetY (NaN would corrupt position)"
        ],
        "after": [
          "      ? pathFollowing.offsetY",
          "      : 0;",
          "    const position = new THREE.Vector3("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:669:43",
      "file": "engine/layers/CameraLayer.ts",
      "line": 669,
      "column": 43,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validBankingStrength = Number.isFinite(",
      "context": {
        "before": [
          "",
          "      // Apply banking on turns",
          "      // Validate bankingStrength (NaN would corrupt rotation)"
        ],
        "after": [
          "        pathFollowing.bankingStrength,",
          "      )",
          "        ? pathFollowing.bankingStrength"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:707:22",
      "file": "engine/layers/CameraLayer.ts",
      "line": 707,
      "column": 22,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(cross)) {",
      "context": {
        "before": [
          "          const cross = tangent1.x * tangent2.y - tangent1.y * tangent2.x;",
          "",
          "          // Apply banking rotation (validate cross in case of zero-length tangents)"
        ],
        "after": [
          "            const bankAngle = (cross * validBankingStrength * Math.PI) / 4;",
          "            this.group.rotateZ(bankAngle);",
          "          }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:720:49",
      "file": "engine/layers/CameraLayer.ts",
      "line": 720,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  // LAYER UPDATE",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<CameraLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:741:31",
      "file": "engine/layers/CameraLayer.ts",
      "line": 741,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data.pathFollowing?.autoAdvance) {",
      "context": {
        "before": [
          "      if (data.pathFollowing !== undefined) {",
          "        this.cameraData.pathFollowing = data.pathFollowing;",
          "        // Reset auto-advance when path changes"
        ],
        "after": [
          "          this.autoAdvanceT = 0;",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:786:29",
      "file": "engine/layers/CameraLayer.ts",
      "line": 786,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeWireframe(): void {",
      "context": {
        "before": [
          "  // DISPOSAL",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!this.wireframe) return;",
          "",
          "    this.wireframe.traverse((child) => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:800:27",
      "file": "engine/layers/CameraLayer.ts",
      "line": 800,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeFrustum(): void {",
      "context": {
        "before": [
          "    this.wireframe = null;",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.frustumHelper) return;",
          "",
          "    this.frustumHelper.traverse((child) => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/CameraLayer.ts:814:24",
      "file": "engine/layers/CameraLayer.ts",
      "line": 814,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    this.frustumHelper = null;",
          "  }",
          ""
        ],
        "after": [
          "    this.disposeWireframe();",
          "    this.disposeFrustum();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:40:28",
      "file": "engine/layers/ControlLayer.ts",
      "line": 40,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createIndicator(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create visual indicator (crosshair) for the control layer",
          "   */"
        ],
        "after": [
          "    this.indicator = new THREE.Group();",
          "    this.indicator.name = `control_indicator_${this.id}`;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:106:40",
      "file": "engine/layers/ControlLayer.ts",
      "line": 106,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setIndicatorVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set indicator visibility",
          "   */"
        ],
        "after": [
          "    if (this.indicator) {",
          "      this.indicator.visible = visible;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:115:33",
      "file": "engine/layers/ControlLayer.ts",
      "line": 115,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setIndicatorSize(size: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set indicator size",
          "   */"
        ],
        "after": [
          "    // Validate size (NaN/0/negative/Infinity would corrupt indicator geometry)",
          "    const validSize = Number.isFinite(size) && size > 0 ? size : 50;",
          "    if (validSize === this.indicatorSize) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:117:30",
      "file": "engine/layers/ControlLayer.ts",
      "line": 117,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validSize = Number.isFinite(size) && size > 0 ? size : 50;",
      "context": {
        "before": [
          "   */",
          "  setIndicatorSize(size: number): void {",
          "    // Validate size (NaN/0/negative/Infinity would corrupt indicator geometry)"
        ],
        "after": [
          "    if (validSize === this.indicatorSize) return;",
          "",
          "    this.indicatorSize = validSize;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:133:29",
      "file": "engine/layers/ControlLayer.ts",
      "line": 133,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeIndicator(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose indicator resources",
          "   */"
        ],
        "after": [
          "    if (!this.indicator) return;",
          "",
          "    this.indicator.traverse((child) => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:155:44",
      "file": "engine/layers/ControlLayer.ts",
      "line": 155,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(_frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Control layers have no frame-specific content",
          "    // Transform is handled by BaseLayer",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:162:4",
      "file": "engine/layers/ControlLayer.ts",
      "line": 162,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    _state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    // Control layers have no type-specific properties",
          "    // All transforms are handled by BaseLayer",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:167:49",
      "file": "engine/layers/ControlLayer.ts",
      "line": 167,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    // All transforms are handled by BaseLayer",
          "  }",
          ""
        ],
        "after": [
          "    // Update 3D state if changed",
          "    if (properties.threeD !== undefined && properties.threeD !== this.threeD) {",
          "      this.threeD = properties.threeD;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ControlLayer.ts:181:24",
      "file": "engine/layers/ControlLayer.ts",
      "line": 181,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.disposeIndicator();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:177:26",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 177,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "sourceLayerId: data?.sourceLayerId ?? \"\",",
      "context": {
        "before": [
          "    const data = layerData.data as DepthflowLayerData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      depthLayerId: data?.depthLayerId ?? \"\",",
          "      config: {",
          "        preset: data?.config?.preset ?? \"static\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:178:25",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 178,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depthLayerId: data?.depthLayerId ?? \"\",",
      "context": {
        "before": [
          "",
          "    return {",
          "      sourceLayerId: data?.sourceLayerId ?? \"\","
        ],
        "after": [
          "      config: {",
          "        preset: data?.config?.preset ?? \"static\",",
          "        zoom: data?.config?.zoom ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:180:21",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 180,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "preset: data?.config?.preset ?? \"static\",",
      "context": {
        "before": [
          "      sourceLayerId: data?.sourceLayerId ?? \"\",",
          "      depthLayerId: data?.depthLayerId ?? \"\",",
          "      config: {"
        ],
        "after": [
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:180:29",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 180,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "preset: data?.config?.preset ?? \"static\",",
      "context": {
        "before": [
          "      sourceLayerId: data?.sourceLayerId ?? \"\",",
          "      depthLayerId: data?.depthLayerId ?? \"\",",
          "      config: {"
        ],
        "after": [
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:181:19",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 181,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "zoom: data?.config?.zoom ?? 1,",
      "context": {
        "before": [
          "      depthLayerId: data?.depthLayerId ?? \"\",",
          "      config: {",
          "        preset: data?.config?.preset ?? \"static\","
        ],
        "after": [
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:181:27",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 181,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "zoom: data?.config?.zoom ?? 1,",
      "context": {
        "before": [
          "      depthLayerId: data?.depthLayerId ?? \"\",",
          "      config: {",
          "        preset: data?.config?.preset ?? \"static\","
        ],
        "after": [
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:182:22",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 182,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "offsetX: data?.config?.offsetX ?? 0,",
      "context": {
        "before": [
          "      config: {",
          "        preset: data?.config?.preset ?? \"static\",",
          "        zoom: data?.config?.zoom ?? 1,"
        ],
        "after": [
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:182:30",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 182,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "offsetX: data?.config?.offsetX ?? 0,",
      "context": {
        "before": [
          "      config: {",
          "        preset: data?.config?.preset ?? \"static\",",
          "        zoom: data?.config?.zoom ?? 1,"
        ],
        "after": [
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:183:22",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 183,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "offsetY: data?.config?.offsetY ?? 0,",
      "context": {
        "before": [
          "        preset: data?.config?.preset ?? \"static\",",
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,"
        ],
        "after": [
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:183:30",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 183,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "offsetY: data?.config?.offsetY ?? 0,",
      "context": {
        "before": [
          "        preset: data?.config?.preset ?? \"static\",",
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,"
        ],
        "after": [
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:184:23",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 184,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: data?.config?.rotation ?? 0,",
      "context": {
        "before": [
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,"
        ],
        "after": [
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:184:31",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 184,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: data?.config?.rotation ?? 0,",
      "context": {
        "before": [
          "        zoom: data?.config?.zoom ?? 1,",
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,"
        ],
        "after": [
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:185:25",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 185,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depthScale: data?.config?.depthScale ?? 0.1,",
      "context": {
        "before": [
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,"
        ],
        "after": [
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:185:33",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 185,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depthScale: data?.config?.depthScale ?? 0.1,",
      "context": {
        "before": [
          "        offsetX: data?.config?.offsetX ?? 0,",
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,"
        ],
        "after": [
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:186:25",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 186,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "focusDepth: data?.config?.focusDepth ?? 0.5,",
      "context": {
        "before": [
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,"
        ],
        "after": [
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:186:33",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 186,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "focusDepth: data?.config?.focusDepth ?? 0.5,",
      "context": {
        "before": [
          "        offsetY: data?.config?.offsetY ?? 0,",
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,"
        ],
        "after": [
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:187:24",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 187,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "dollyZoom: data?.config?.dollyZoom ?? 0,",
      "context": {
        "before": [
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,"
        ],
        "after": [
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:187:32",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 187,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "dollyZoom: data?.config?.dollyZoom ?? 0,",
      "context": {
        "before": [
          "        rotation: data?.config?.rotation ?? 0,",
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,"
        ],
        "after": [
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:188:26",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 188,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "orbitRadius: data?.config?.orbitRadius ?? 0.1,",
      "context": {
        "before": [
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,"
        ],
        "after": [
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:188:34",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 188,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "orbitRadius: data?.config?.orbitRadius ?? 0.1,",
      "context": {
        "before": [
          "        depthScale: data?.config?.depthScale ?? 0.1,",
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,"
        ],
        "after": [
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:189:25",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 189,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "orbitSpeed: data?.config?.orbitSpeed ?? 1,",
      "context": {
        "before": [
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,"
        ],
        "after": [
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,",
          "        edgeDilation: data?.config?.edgeDilation ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:189:33",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 189,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "orbitSpeed: data?.config?.orbitSpeed ?? 1,",
      "context": {
        "before": [
          "        focusDepth: data?.config?.focusDepth ?? 0.5,",
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,"
        ],
        "after": [
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,",
          "        edgeDilation: data?.config?.edgeDilation ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:190:29",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 190,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
      "context": {
        "before": [
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,"
        ],
        "after": [
          "        swingFrequency: data?.config?.swingFrequency ?? 1,",
          "        edgeDilation: data?.config?.edgeDilation ?? 0,",
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:190:37",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 190,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
      "context": {
        "before": [
          "        dollyZoom: data?.config?.dollyZoom ?? 0,",
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,"
        ],
        "after": [
          "        swingFrequency: data?.config?.swingFrequency ?? 1,",
          "        edgeDilation: data?.config?.edgeDilation ?? 0,",
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:191:29",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 191,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "swingFrequency: data?.config?.swingFrequency ?? 1,",
      "context": {
        "before": [
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,"
        ],
        "after": [
          "        edgeDilation: data?.config?.edgeDilation ?? 0,",
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:191:37",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 191,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "swingFrequency: data?.config?.swingFrequency ?? 1,",
      "context": {
        "before": [
          "        orbitRadius: data?.config?.orbitRadius ?? 0.1,",
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,"
        ],
        "after": [
          "        edgeDilation: data?.config?.edgeDilation ?? 0,",
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:192:27",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 192,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "edgeDilation: data?.config?.edgeDilation ?? 0,",
      "context": {
        "before": [
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,"
        ],
        "after": [
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,",
          "      },",
          "      animatedZoom: data?.animatedZoom,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:192:35",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 192,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "edgeDilation: data?.config?.edgeDilation ?? 0,",
      "context": {
        "before": [
          "        orbitSpeed: data?.config?.orbitSpeed ?? 1,",
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,"
        ],
        "after": [
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,",
          "      },",
          "      animatedZoom: data?.animatedZoom,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:193:27",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 193,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "inpaintEdges: data?.config?.inpaintEdges ?? false,",
      "context": {
        "before": [
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,",
          "        edgeDilation: data?.config?.edgeDilation ?? 0,"
        ],
        "after": [
          "      },",
          "      animatedZoom: data?.animatedZoom,",
          "      animatedOffsetX: data?.animatedOffsetX,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:193:35",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 193,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "inpaintEdges: data?.config?.inpaintEdges ?? false,",
      "context": {
        "before": [
          "        swingAmplitude: data?.config?.swingAmplitude ?? 0.05,",
          "        swingFrequency: data?.config?.swingFrequency ?? 1,",
          "        edgeDilation: data?.config?.edgeDilation ?? 0,"
        ],
        "after": [
          "      },",
          "      animatedZoom: data?.animatedZoom,",
          "      animatedOffsetX: data?.animatedOffsetX,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:195:25",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 195,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedZoom: data?.animatedZoom,",
      "context": {
        "before": [
          "        edgeDilation: data?.config?.edgeDilation ?? 0,",
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,",
          "      },"
        ],
        "after": [
          "      animatedOffsetX: data?.animatedOffsetX,",
          "      animatedOffsetY: data?.animatedOffsetY,",
          "      animatedRotation: data?.animatedRotation,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:196:28",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 196,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedOffsetX: data?.animatedOffsetX,",
      "context": {
        "before": [
          "        inpaintEdges: data?.config?.inpaintEdges ?? false,",
          "      },",
          "      animatedZoom: data?.animatedZoom,"
        ],
        "after": [
          "      animatedOffsetY: data?.animatedOffsetY,",
          "      animatedRotation: data?.animatedRotation,",
          "      animatedDepthScale: data?.animatedDepthScale,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:197:28",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 197,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedOffsetY: data?.animatedOffsetY,",
      "context": {
        "before": [
          "      },",
          "      animatedZoom: data?.animatedZoom,",
          "      animatedOffsetX: data?.animatedOffsetX,"
        ],
        "after": [
          "      animatedRotation: data?.animatedRotation,",
          "      animatedDepthScale: data?.animatedDepthScale,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:198:29",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 198,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedRotation: data?.animatedRotation,",
      "context": {
        "before": [
          "      animatedZoom: data?.animatedZoom,",
          "      animatedOffsetX: data?.animatedOffsetX,",
          "      animatedOffsetY: data?.animatedOffsetY,"
        ],
        "after": [
          "      animatedDepthScale: data?.animatedDepthScale,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:199:31",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 199,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedDepthScale: data?.animatedDepthScale,",
      "context": {
        "before": [
          "      animatedOffsetX: data?.animatedOffsetX,",
          "      animatedOffsetY: data?.animatedOffsetY,",
          "      animatedRotation: data?.animatedRotation,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:258:47",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 258,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDimensions(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set mesh dimensions",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN/0 would create invalid geometry)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:260:31",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 260,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
      "context": {
        "before": [
          "   */",
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid geometry)"
        ],
        "after": [
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
          "",
          "    if (validWidth === this.width && validHeight === this.height) return;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:261:32",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 261,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
      "context": {
        "before": [
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid geometry)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;"
        ],
        "after": [
          "",
          "    if (validWidth === this.width && validHeight === this.height) return;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:281:25",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 281,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.sourceTexture?.dispose();",
      "context": {
        "before": [
          "    this.depthflowData.sourceLayerId = layerId;",
          "    const texture = await this.loadTextureFromLayer(layerId);",
          "    if (texture) {"
        ],
        "after": [
          "      this.sourceTexture = texture;",
          "      this.material.uniforms.sourceTexture.value = texture;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:294:24",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 294,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.depthTexture?.dispose();",
      "context": {
        "before": [
          "    this.depthflowData.depthLayerId = layerId;",
          "    const texture = await this.loadTextureFromLayer(layerId);",
          "    if (texture) {"
        ],
        "after": [
          "      this.depthTexture = texture;",
          "      this.material.uniforms.depthTexture.value = texture;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:303:49",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 303,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<DepthflowConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update config values",
          "   */"
        ],
        "after": [
          "    Object.assign(this.depthflowData.config, config);",
          "",
          "    // Update uniforms"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:425:43",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 425,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const _config = this.depthflowData.config;",
          "",
          "    // Use composition fps for correct animation timing"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:486:4",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 486,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    // Apply evaluated depthflow properties"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:518:14",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 518,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(audioMod.depthflowZoom) &&",
      "context": {
        "before": [
          "",
          "    if (",
          "      audioMod.depthflowZoom !== undefined &&"
        ],
        "after": [
          "      audioMod.depthflowZoom !== 0",
          "    ) {",
          "      this.material.uniforms.zoom.value += audioMod.depthflowZoom;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:526:14",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 526,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(audioMod.depthflowOffsetX) &&",
      "context": {
        "before": [
          "",
          "    if (",
          "      audioMod.depthflowOffsetX !== undefined &&"
        ],
        "after": [
          "      audioMod.depthflowOffsetX !== 0",
          "    ) {",
          "      this.material.uniforms.offset.value.x += audioMod.depthflowOffsetX;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:534:14",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 534,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(audioMod.depthflowOffsetY) &&",
      "context": {
        "before": [
          "",
          "    if (",
          "      audioMod.depthflowOffsetY !== undefined &&"
        ],
        "after": [
          "      audioMod.depthflowOffsetY !== 0",
          "    ) {",
          "      this.material.uniforms.offset.value.y += audioMod.depthflowOffsetY;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:542:14",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 542,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(audioMod.depthflowRotation) &&",
      "context": {
        "before": [
          "",
          "    if (",
          "      audioMod.depthflowRotation !== undefined &&"
        ],
        "after": [
          "      audioMod.depthflowRotation !== 0",
          "    ) {",
          "      // Add rotation in radians (convert from degrees)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:553:14",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 553,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(audioMod.depthflowDepthScale) &&",
      "context": {
        "before": [
          "",
          "    if (",
          "      audioMod.depthflowDepthScale !== undefined &&"
        ],
        "after": [
          "      audioMod.depthflowDepthScale !== 0",
          "    ) {",
          "      this.material.uniforms.depthScale.value += audioMod.depthflowDepthScale;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:562:49",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 562,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    this.material.needsUpdate = true;",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<DepthflowLayerData> | undefined;",
          "",
          "    if (!data) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:613:24",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 613,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    // Dispose textures",
          "    this.sourceTexture?.dispose();",
          "    this.depthTexture?.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:615:23",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 615,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.sourceTexture?.dispose();",
      "context": {
        "before": [
          "",
          "  protected onDispose(): void {",
          "    // Dispose textures"
        ],
        "after": [
          "    this.depthTexture?.dispose();",
          "",
          "    // Dispose geometry and material"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthflowLayer.ts:616:22",
      "file": "engine/layers/DepthflowLayer.ts",
      "line": 616,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.depthTexture?.dispose();",
      "context": {
        "before": [
          "  protected onDispose(): void {",
          "    // Dispose textures",
          "    this.sourceTexture?.dispose();"
        ],
        "after": [
          "",
          "    // Dispose geometry and material",
          "    this.geometry.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:49:20",
      "file": "engine/layers/DepthLayer.ts",
      "line": 49,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetId: data?.assetId ?? null,",
      "context": {
        "before": [
          "  private extractDepthData(layerData: Layer): DepthLayerData {",
          "    const data = layerData.data as Partial<DepthLayerData> | undefined;",
          "    return {"
        ],
        "after": [
          "      visualizationMode: data?.visualizationMode ?? \"colormap\",",
          "      colorMap: data?.colorMap ?? \"turbo\",",
          "      invert: data?.invert ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:50:30",
      "file": "engine/layers/DepthLayer.ts",
      "line": 50,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "visualizationMode: data?.visualizationMode ?? \"colormap\",",
      "context": {
        "before": [
          "    const data = layerData.data as Partial<DepthLayerData> | undefined;",
          "    return {",
          "      assetId: data?.assetId ?? null,"
        ],
        "after": [
          "      colorMap: data?.colorMap ?? \"turbo\",",
          "      invert: data?.invert ?? false,",
          "      minDepth: data?.minDepth ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:51:21",
      "file": "engine/layers/DepthLayer.ts",
      "line": 51,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "colorMap: data?.colorMap ?? \"turbo\",",
      "context": {
        "before": [
          "    return {",
          "      assetId: data?.assetId ?? null,",
          "      visualizationMode: data?.visualizationMode ?? \"colormap\","
        ],
        "after": [
          "      invert: data?.invert ?? false,",
          "      minDepth: data?.minDepth ?? 0,",
          "      maxDepth: data?.maxDepth ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:52:19",
      "file": "engine/layers/DepthLayer.ts",
      "line": 52,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "invert: data?.invert ?? false,",
      "context": {
        "before": [
          "      assetId: data?.assetId ?? null,",
          "      visualizationMode: data?.visualizationMode ?? \"colormap\",",
          "      colorMap: data?.colorMap ?? \"turbo\","
        ],
        "after": [
          "      minDepth: data?.minDepth ?? 0,",
          "      maxDepth: data?.maxDepth ?? 1,",
          "      autoNormalize: data?.autoNormalize ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:53:21",
      "file": "engine/layers/DepthLayer.ts",
      "line": 53,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "minDepth: data?.minDepth ?? 0,",
      "context": {
        "before": [
          "      visualizationMode: data?.visualizationMode ?? \"colormap\",",
          "      colorMap: data?.colorMap ?? \"turbo\",",
          "      invert: data?.invert ?? false,"
        ],
        "after": [
          "      maxDepth: data?.maxDepth ?? 1,",
          "      autoNormalize: data?.autoNormalize ?? true,",
          "      contourLevels: data?.contourLevels ?? 10,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:54:21",
      "file": "engine/layers/DepthLayer.ts",
      "line": 54,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "maxDepth: data?.maxDepth ?? 1,",
      "context": {
        "before": [
          "      colorMap: data?.colorMap ?? \"turbo\",",
          "      invert: data?.invert ?? false,",
          "      minDepth: data?.minDepth ?? 0,"
        ],
        "after": [
          "      autoNormalize: data?.autoNormalize ?? true,",
          "      contourLevels: data?.contourLevels ?? 10,",
          "      contourColor: data?.contourColor ?? \"#ffffff\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:55:26",
      "file": "engine/layers/DepthLayer.ts",
      "line": 55,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "autoNormalize: data?.autoNormalize ?? true,",
      "context": {
        "before": [
          "      invert: data?.invert ?? false,",
          "      minDepth: data?.minDepth ?? 0,",
          "      maxDepth: data?.maxDepth ?? 1,"
        ],
        "after": [
          "      contourLevels: data?.contourLevels ?? 10,",
          "      contourColor: data?.contourColor ?? \"#ffffff\",",
          "      contourWidth: data?.contourWidth ?? 1.0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:56:26",
      "file": "engine/layers/DepthLayer.ts",
      "line": 56,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "contourLevels: data?.contourLevels ?? 10,",
      "context": {
        "before": [
          "      minDepth: data?.minDepth ?? 0,",
          "      maxDepth: data?.maxDepth ?? 1,",
          "      autoNormalize: data?.autoNormalize ?? true,"
        ],
        "after": [
          "      contourColor: data?.contourColor ?? \"#ffffff\",",
          "      contourWidth: data?.contourWidth ?? 1.0,",
          "      meshDisplacement:"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:57:25",
      "file": "engine/layers/DepthLayer.ts",
      "line": 57,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "contourColor: data?.contourColor ?? \"#ffffff\",",
      "context": {
        "before": [
          "      maxDepth: data?.maxDepth ?? 1,",
          "      autoNormalize: data?.autoNormalize ?? true,",
          "      contourLevels: data?.contourLevels ?? 10,"
        ],
        "after": [
          "      contourWidth: data?.contourWidth ?? 1.0,",
          "      meshDisplacement:",
          "        data?.meshDisplacement ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:58:25",
      "file": "engine/layers/DepthLayer.ts",
      "line": 58,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "contourWidth: data?.contourWidth ?? 1.0,",
      "context": {
        "before": [
          "      autoNormalize: data?.autoNormalize ?? true,",
          "      contourLevels: data?.contourLevels ?? 10,",
          "      contourColor: data?.contourColor ?? \"#ffffff\","
        ],
        "after": [
          "      meshDisplacement:",
          "        data?.meshDisplacement ??",
          "        createAnimatableProperty(\"Mesh Displacement\", 50, \"number\"),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:60:13",
      "file": "engine/layers/DepthLayer.ts",
      "line": 60,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data?.meshDisplacement ??",
      "context": {
        "before": [
          "      contourColor: data?.contourColor ?? \"#ffffff\",",
          "      contourWidth: data?.contourWidth ?? 1.0,",
          "      meshDisplacement:"
        ],
        "after": [
          "        createAnimatableProperty(\"Mesh Displacement\", 50, \"number\"),",
          "      meshResolution: data?.meshResolution ?? 64,",
          "      wireframe: data?.wireframe ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:62:27",
      "file": "engine/layers/DepthLayer.ts",
      "line": 62,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "meshResolution: data?.meshResolution ?? 64,",
      "context": {
        "before": [
          "      meshDisplacement:",
          "        data?.meshDisplacement ??",
          "        createAnimatableProperty(\"Mesh Displacement\", 50, \"number\"),"
        ],
        "after": [
          "      wireframe: data?.wireframe ?? false,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:63:22",
      "file": "engine/layers/DepthLayer.ts",
      "line": 63,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "wireframe: data?.wireframe ?? false,",
      "context": {
        "before": [
          "        data?.meshDisplacement ??",
          "        createAnimatableProperty(\"Mesh Displacement\", 50, \"number\"),",
          "      meshResolution: data?.meshResolution ?? 64,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:67:23",
      "file": "engine/layers/DepthLayer.ts",
      "line": 67,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMesh(): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    const geometry = new THREE.PlaneGeometry(1, 1, 1, 1);",
          "",
          "    // Custom shader for depth visualization"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:168:34",
      "file": "engine/layers/DepthLayer.ts",
      "line": 168,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateColormapTexture(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const colors = COLORMAPS[this.depthData.colorMap] || COLORMAPS.grayscale;",
          "    const data = new Uint8Array(256 * 4);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:197:37",
      "file": "engine/layers/DepthLayer.ts",
      "line": 197,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTexture(texture: THREE.Texture): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.texture = texture;",
          "    if (this.material) {",
          "      this.material.uniforms.depthMap.value = texture;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:208:43",
      "file": "engine/layers/DepthLayer.ts",
      "line": 208,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!this.material) return;",
          "",
          "    // Use composition fps for correct animation timing (not hardcoded 30fps)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:231:29",
      "file": "engine/layers/DepthLayer.ts",
      "line": 231,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const minDepth = Number.isFinite(this.depthData.minDepth)",
      "context": {
        "before": [
          "",
          "    // Update uniforms (validate depth values to prevent NaN propagation to shader)",
          "    this.material.uniforms.invert.value = this.depthData.invert ? 1.0 : 0.0;"
        ],
        "after": [
          "      ? this.depthData.minDepth",
          "      : 0;",
          "    const maxDepth = Number.isFinite(this.depthData.maxDepth)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:234:29",
      "file": "engine/layers/DepthLayer.ts",
      "line": 234,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const maxDepth = Number.isFinite(this.depthData.maxDepth)",
      "context": {
        "before": [
          "    const minDepth = Number.isFinite(this.depthData.minDepth)",
          "      ? this.depthData.minDepth",
          "      : 0;"
        ],
        "after": [
          "      ? this.depthData.maxDepth",
          "      : 1;",
          "    this.material.uniforms.minDepth.value = minDepth;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:243:49",
      "file": "engine/layers/DepthLayer.ts",
      "line": 243,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "      this.getVisualizationModeIndex();",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<DepthLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:262:20",
      "file": "engine/layers/DepthLayer.ts",
      "line": 262,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(data.contourLevels) && data.contourLevels > 0",
      "context": {
        "before": [
          "        if (data.contourLevels !== undefined) {",
          "          // Validate contourLevels (NaN/0/negative would corrupt contour rendering)",
          "          const validLevels ="
        ],
        "after": [
          "              ? data.contourLevels",
          "              : 10;",
          "          this.material.uniforms.contourLevels.value = validLevels;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:269:37",
      "file": "engine/layers/DepthLayer.ts",
      "line": 269,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(data.contourWidth)",
      "context": {
        "before": [
          "        }",
          "        if (data.contourWidth !== undefined) {",
          "          // Validate contourWidth (NaN would corrupt contour line rendering)"
        ],
        "after": [
          "            ? Math.max(0, data.contourWidth)",
          "            : 1.0;",
          "          this.material.uniforms.contourWidth.value = validWidth;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/DepthLayer.ts:278:24",
      "file": "engine/layers/DepthLayer.ts",
      "line": 278,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.texture) {",
          "      this.texture.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:91:23",
      "file": "engine/layers/EffectLayer.ts",
      "line": 91,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMesh(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create display mesh (full-screen quad for effect result)",
          "   */"
        ],
        "after": [
          "    // Start with 1x1, will be resized to match composition",
          "    const geometry = new THREE.PlaneGeometry(1, 1);",
          "    this.material = new THREE.MeshBasicMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:109:52",
      "file": "engine/layers/EffectLayer.ts",
      "line": 109,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private resizeMesh(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Resize mesh to match composition dimensions",
          "   */"
        ],
        "after": [
          "    if (!this.mesh) return;",
          "",
          "    // Validate dimensions (NaN/0 would create invalid geometry and canvas)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:113:31",
      "file": "engine/layers/EffectLayer.ts",
      "line": 113,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
      "context": {
        "before": [
          "    if (!this.mesh) return;",
          "",
          "    // Validate dimensions (NaN/0 would create invalid geometry and canvas)"
        ],
        "after": [
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
          "",
          "    this.compWidth = validWidth;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:114:32",
      "file": "engine/layers/EffectLayer.ts",
      "line": 114,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
      "context": {
        "before": [
          "",
          "    // Validate dimensions (NaN/0 would create invalid geometry and canvas)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;"
        ],
        "after": [
          "",
          "    this.compWidth = validWidth;",
          "    this.compHeight = validHeight;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:137:54",
      "file": "engine/layers/EffectLayer.ts",
      "line": 137,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderContext(context: EffectLayerRenderContext): void {",
      "context": {
        "before": [
          "   * Set the render context (required for effect layer rendering)",
          "   * Called by LayerManager after creation",
          "   */"
        ],
        "after": [
          "    this.renderContext = context;",
          "",
          "    // Get and apply composition dimensions"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:148:40",
      "file": "engine/layers/EffectLayer.ts",
      "line": 148,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAffectedLayers(layerIds: string[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the IDs of layers affected by this effect layer",
          "   */"
        ],
        "after": [
          "    this.affectedLayerIds = layerIds;",
          "  }",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:163:43",
      "file": "engine/layers/EffectLayer.ts",
      "line": 163,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!this.renderContext || !this.mesh || !this.material) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:221:4",
      "file": "engine/layers/EffectLayer.ts",
      "line": 221,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    // Apply opacity to material (opacity is on EvaluatedLayer, not transform)",
          "    if (state.opacity !== undefined && this.material) {",
          "      // Validate opacity (NaN would corrupt material rendering)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:225:35",
      "file": "engine/layers/EffectLayer.ts",
      "line": 225,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOpacity = Number.isFinite(state.opacity) ? state.opacity : 100;",
      "context": {
        "before": [
          "    // Apply opacity to material (opacity is on EvaluatedLayer, not transform)",
          "    if (state.opacity !== undefined && this.material) {",
          "      // Validate opacity (NaN would corrupt material rendering)"
        ],
        "after": [
          "      this.material.opacity = Math.max(0, Math.min(100, validOpacity)) / 100;",
          "      this.material.needsUpdate = true;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:239:57",
      "file": "engine/layers/EffectLayer.ts",
      "line": 239,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateResultTexture(canvas: HTMLCanvasElement): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update the result texture with the adjusted canvas",
          "   */"
        ],
        "after": [
          "    if (!this.material) return;",
          "",
          "    // Dispose old texture"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:274:39",
      "file": "engine/layers/EffectLayer.ts",
      "line": 274,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEffectLayerMode(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set effect layer mode",
          "   */"
        ],
        "after": [
          "    this.layerData.effectLayer = enabled;",
          "    // Also set legacy property for backwards compatibility",
          "    this.layerData.adjustmentLayer = enabled;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:290:38",
      "file": "engine/layers/EffectLayer.ts",
      "line": 290,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAdjustmentMode(enabled: boolean): void {",
      "context": {
        "before": [
          "    return this.isEffectLayerMode();",
          "  }",
          ""
        ],
        "after": [
          "    this.setEffectLayerMode(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:298:49",
      "file": "engine/layers/EffectLayer.ts",
      "line": 298,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  // LAYER UPDATE",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (properties.effectLayer !== undefined) {",
          "      this.setEffectLayerMode(properties.effectLayer);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/EffectLayer.ts:312:24",
      "file": "engine/layers/EffectLayer.ts",
      "line": 312,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "  // DISPOSAL",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.resultTexture) {",
          "      this.resultTexture.dispose();",
          "      this.resultTexture = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:39:27",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 39,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "generationType: data?.generationType ?? \"depth\",",
      "context": {
        "before": [
          "  private extractGeneratedData(layerData: Layer): GeneratedLayerData {",
          "    const data = layerData.data as Partial<GeneratedLayerData> | undefined;",
          "    return {"
        ],
        "after": [
          "      sourceLayerId: data?.sourceLayerId ?? null,",
          "      model: data?.model ?? \"depth-anything-v2\",",
          "      parameters: data?.parameters ?? {},"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:40:26",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 40,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "sourceLayerId: data?.sourceLayerId ?? null,",
      "context": {
        "before": [
          "    const data = layerData.data as Partial<GeneratedLayerData> | undefined;",
          "    return {",
          "      generationType: data?.generationType ?? \"depth\","
        ],
        "after": [
          "      model: data?.model ?? \"depth-anything-v2\",",
          "      parameters: data?.parameters ?? {},",
          "      generatedAssetId: data?.generatedAssetId ?? null,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:41:18",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 41,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "model: data?.model ?? \"depth-anything-v2\",",
      "context": {
        "before": [
          "    return {",
          "      generationType: data?.generationType ?? \"depth\",",
          "      sourceLayerId: data?.sourceLayerId ?? null,"
        ],
        "after": [
          "      parameters: data?.parameters ?? {},",
          "      generatedAssetId: data?.generatedAssetId ?? null,",
          "      status: data?.status ?? \"pending\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:42:23",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 42,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "parameters: data?.parameters ?? {},",
      "context": {
        "before": [
          "      generationType: data?.generationType ?? \"depth\",",
          "      sourceLayerId: data?.sourceLayerId ?? null,",
          "      model: data?.model ?? \"depth-anything-v2\","
        ],
        "after": [
          "      generatedAssetId: data?.generatedAssetId ?? null,",
          "      status: data?.status ?? \"pending\",",
          "      autoRegenerate: data?.autoRegenerate ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:43:29",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 43,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "generatedAssetId: data?.generatedAssetId ?? null,",
      "context": {
        "before": [
          "      sourceLayerId: data?.sourceLayerId ?? null,",
          "      model: data?.model ?? \"depth-anything-v2\",",
          "      parameters: data?.parameters ?? {},"
        ],
        "after": [
          "      status: data?.status ?? \"pending\",",
          "      autoRegenerate: data?.autoRegenerate ?? false,",
          "      lastGenerated: data?.lastGenerated,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:44:19",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 44,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "status: data?.status ?? \"pending\",",
      "context": {
        "before": [
          "      model: data?.model ?? \"depth-anything-v2\",",
          "      parameters: data?.parameters ?? {},",
          "      generatedAssetId: data?.generatedAssetId ?? null,"
        ],
        "after": [
          "      autoRegenerate: data?.autoRegenerate ?? false,",
          "      lastGenerated: data?.lastGenerated,",
          "      errorMessage: data?.errorMessage,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:45:27",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 45,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "autoRegenerate: data?.autoRegenerate ?? false,",
      "context": {
        "before": [
          "      parameters: data?.parameters ?? {},",
          "      generatedAssetId: data?.generatedAssetId ?? null,",
          "      status: data?.status ?? \"pending\","
        ],
        "after": [
          "      lastGenerated: data?.lastGenerated,",
          "      errorMessage: data?.errorMessage,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:46:26",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 46,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lastGenerated: data?.lastGenerated,",
      "context": {
        "before": [
          "      generatedAssetId: data?.generatedAssetId ?? null,",
          "      status: data?.status ?? \"pending\",",
          "      autoRegenerate: data?.autoRegenerate ?? false,"
        ],
        "after": [
          "      errorMessage: data?.errorMessage,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:47:25",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 47,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "errorMessage: data?.errorMessage,",
      "context": {
        "before": [
          "      status: data?.status ?? \"pending\",",
          "      autoRegenerate: data?.autoRegenerate ?? false,",
          "      lastGenerated: data?.lastGenerated,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:51:23",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 51,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMesh(): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    const geometry = new THREE.PlaneGeometry(1, 1, 1, 1);",
          "",
          "    this.material = new THREE.MeshBasicMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:69:34",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 69,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createStatusIndicator(): void {",
      "context": {
        "before": [
          "    this.createStatusIndicator();",
          "  }",
          ""
        ],
        "after": [
          "    // Small indicator showing generation status",
          "    const geometry = new THREE.CircleGeometry(10, 16);",
          "    const material = new THREE.MeshBasicMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:99:37",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 99,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTexture(texture: THREE.Texture): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.texture = texture;",
          "    if (this.material) {",
          "      this.material.map = texture;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:111:44",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 111,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(_frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Update status indicator color",
          "    if (this.statusIndicator) {",
          "      (this.statusIndicator.material as THREE.MeshBasicMaterial).color.setHex("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:123:49",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 123,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    // The actual generation is handled by the AI service",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<GeneratedLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GeneratedLayer.ts:141:24",
      "file": "engine/layers/GeneratedLayer.ts",
      "line": 141,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.texture) {",
          "      this.texture.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:37:22",
      "file": "engine/layers/GroupLayer.ts",
      "line": 37,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "collapsed: data?.collapsed ?? false,",
      "context": {
        "before": [
          "  private extractGroupData(layerData: Layer): GroupLayerData {",
          "    const data = layerData.data as Partial<GroupLayerData> | undefined;",
          "    return {"
        ],
        "after": [
          "      color: data?.color ?? \"#888888\",",
          "      passThrough: data?.passThrough ?? true,",
          "      isolate: data?.isolate ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:38:18",
      "file": "engine/layers/GroupLayer.ts",
      "line": 38,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "color: data?.color ?? \"#888888\",",
      "context": {
        "before": [
          "    const data = layerData.data as Partial<GroupLayerData> | undefined;",
          "    return {",
          "      collapsed: data?.collapsed ?? false,"
        ],
        "after": [
          "      passThrough: data?.passThrough ?? true,",
          "      isolate: data?.isolate ?? false,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:39:24",
      "file": "engine/layers/GroupLayer.ts",
      "line": 39,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "passThrough: data?.passThrough ?? true,",
      "context": {
        "before": [
          "    return {",
          "      collapsed: data?.collapsed ?? false,",
          "      color: data?.color ?? \"#888888\","
        ],
        "after": [
          "      isolate: data?.isolate ?? false,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:40:20",
      "file": "engine/layers/GroupLayer.ts",
      "line": 40,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "isolate: data?.isolate ?? false,",
      "context": {
        "before": [
          "      collapsed: data?.collapsed ?? false,",
          "      color: data?.color ?? \"#888888\",",
          "      passThrough: data?.passThrough ?? true,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:44:26",
      "file": "engine/layers/GroupLayer.ts",
      "line": 44,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createVisuals(): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    // Create group indicator (visible only in editor, not render)",
          "    this.createBoundingBox();",
          "    this.createLabel();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:50:30",
      "file": "engine/layers/GroupLayer.ts",
      "line": 50,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBoundingBox(): void {",
      "context": {
        "before": [
          "    this.createLabel();",
          "  }",
          ""
        ],
        "after": [
          "    // Dashed bounding box to show group bounds",
          "    const geometry = new THREE.BufferGeometry();",
          "    const positions = new Float32Array(["
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:73:24",
      "file": "engine/layers/GroupLayer.ts",
      "line": 73,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createLabel(): void {",
      "context": {
        "before": [
          "    this.group.add(this.boundingBox);",
          "  }",
          ""
        ],
        "after": [
          "    // Simple label indicator at top-left of group",
          "    const geometry = new THREE.PlaneGeometry(20, 20);",
          "    const material = new THREE.MeshBasicMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:99:44",
      "file": "engine/layers/GroupLayer.ts",
      "line": 99,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(_frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Group layer's transform is applied to the container,",
          "    // which affects all child layers that reference this as parent",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:115:49",
      "file": "engine/layers/GroupLayer.ts",
      "line": 115,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<GroupLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:123:24",
      "file": "engine/layers/GroupLayer.ts",
      "line": 123,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.boundingBox) {",
          "      this.boundingBox.geometry.dispose();",
          "      (this.boundingBox.material as THREE.Material).dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:142:52",
      "file": "engine/layers/GroupLayer.ts",
      "line": 142,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateBoundsFromChildren(childBounds: THREE.Box3): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update the group's bounding box based on child layer bounds",
          "   */"
        ],
        "after": [
          "    if (!this.boundingBox) return;",
          "",
          "    const size = childBounds.getSize(new THREE.Vector3());"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/GroupLayer.ts:213:20",
      "file": "engine/layers/GroupLayer.ts",
      "line": 213,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleCollapsed(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Toggle collapsed state",
          "   */"
        ],
        "after": [
          "    this.groupData.collapsed = !this.groupData.collapsed;",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:96:19",
      "file": "engine/layers/ImageLayer.ts",
      "line": 96,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "source: data?.source ?? data?.url ?? data?.assetId ?? null,",
      "context": {
        "before": [
          "    const data = layerData.data as any;",
          "",
          "    return {"
        ],
        "after": [
          "      targetWidth: data?.width ?? null,",
          "      targetHeight: data?.height ?? null,",
          "      fit: data?.fit ?? \"none\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:96:35",
      "file": "engine/layers/ImageLayer.ts",
      "line": 96,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "source: data?.source ?? data?.url ?? data?.assetId ?? null,",
      "context": {
        "before": [
          "    const data = layerData.data as any;",
          "",
          "    return {"
        ],
        "after": [
          "      targetWidth: data?.width ?? null,",
          "      targetHeight: data?.height ?? null,",
          "      fit: data?.fit ?? \"none\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:96:48",
      "file": "engine/layers/ImageLayer.ts",
      "line": 96,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "source: data?.source ?? data?.url ?? data?.assetId ?? null,",
      "context": {
        "before": [
          "    const data = layerData.data as any;",
          "",
          "    return {"
        ],
        "after": [
          "      targetWidth: data?.width ?? null,",
          "      targetHeight: data?.height ?? null,",
          "      fit: data?.fit ?? \"none\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:97:24",
      "file": "engine/layers/ImageLayer.ts",
      "line": 97,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "targetWidth: data?.width ?? null,",
      "context": {
        "before": [
          "",
          "    return {",
          "      source: data?.source ?? data?.url ?? data?.assetId ?? null,"
        ],
        "after": [
          "      targetHeight: data?.height ?? null,",
          "      fit: data?.fit ?? \"none\",",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:98:25",
      "file": "engine/layers/ImageLayer.ts",
      "line": 98,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "targetHeight: data?.height ?? null,",
      "context": {
        "before": [
          "    return {",
          "      source: data?.source ?? data?.url ?? data?.assetId ?? null,",
          "      targetWidth: data?.width ?? null,"
        ],
        "after": [
          "      fit: data?.fit ?? \"none\",",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:99:16",
      "file": "engine/layers/ImageLayer.ts",
      "line": 99,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fit: data?.fit ?? \"none\",",
      "context": {
        "before": [
          "      source: data?.source ?? data?.url ?? data?.assetId ?? null,",
          "      targetWidth: data?.width ?? null,",
          "      targetHeight: data?.height ?? null,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:130:37",
      "file": "engine/layers/ImageLayer.ts",
      "line": 130,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTexture(texture: THREE.Texture): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set texture directly",
          "   */"
        ],
        "after": [
          "    // Store as both current and original (for effects processing)",
          "    this.texture = texture;",
          "    this.originalTexture = texture;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:154:48",
      "file": "engine/layers/ImageLayer.ts",
      "line": 154,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTextureFromImageData(imageData: ImageData): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set texture from ImageData",
          "   */"
        ],
        "after": [
          "    const texture = this.resources.createTextureFromImageData(",
          "      imageData,",
          "      `layer_${this.id}_imagedata`,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:172:68",
      "file": "engine/layers/ImageLayer.ts",
      "line": 172,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTextureFromCanvas(canvas: HTMLCanvasElement | OffscreenCanvas): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set texture from canvas",
          "   */"
        ],
        "after": [
          "    const texture = this.resources.createTextureFromCanvas(",
          "      canvas,",
          "      `layer_${this.id}_canvas`,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:190:27",
      "file": "engine/layers/ImageLayer.ts",
      "line": 190,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateMeshSize(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update mesh size based on image dimensions and fit mode",
          "   */"
        ],
        "after": [
          "    // Dispose old geometry",
          "    this.geometry.dispose();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:197:14",
      "file": "engine/layers/ImageLayer.ts",
      "line": 197,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.imageWidth) && this.imageWidth > 0",
      "context": {
        "before": [
          "    // Calculate final dimensions based on fit mode",
          "    // Validate dimensions (guard against 0/NaN from upstream)",
          "    let finalWidth ="
        ],
        "after": [
          "        ? this.imageWidth",
          "        : 100;",
          "    let finalHeight ="
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:201:14",
      "file": "engine/layers/ImageLayer.ts",
      "line": 201,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.imageHeight) && this.imageHeight > 0",
      "context": {
        "before": [
          "        ? this.imageWidth",
          "        : 100;",
          "    let finalHeight ="
        ],
        "after": [
          "        ? this.imageHeight",
          "        : 100;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:208:14",
      "file": "engine/layers/ImageLayer.ts",
      "line": 208,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.targetWidth) &&",
      "context": {
        "before": [
          "    // Only apply fit if we have valid target dimensions and fit is not 'none'",
          "    const validTargetWidth =",
          "      this.targetWidth &&"
        ],
        "after": [
          "      this.targetWidth > 0;",
          "    const validTargetHeight =",
          "      this.targetHeight &&"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:212:14",
      "file": "engine/layers/ImageLayer.ts",
      "line": 212,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.targetHeight) &&",
      "context": {
        "before": [
          "      this.targetWidth > 0;",
          "    const validTargetHeight =",
          "      this.targetHeight &&"
        ],
        "after": [
          "      this.targetHeight > 0;",
          "    if (validTargetWidth && validTargetHeight && this.fit !== \"none\") {",
          "      const targetAspect = this.targetWidth! / this.targetHeight!;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:275:47",
      "file": "engine/layers/ImageLayer.ts",
      "line": 275,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDimensions(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set dimensions (stretches the image)",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN/0 would corrupt geometry and cause division by zero)",
          "    this.imageWidth = Number.isFinite(width) && width > 0 ? width : 100;",
          "    this.imageHeight = Number.isFinite(height) && height > 0 ? height : 100;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:277:30",
      "file": "engine/layers/ImageLayer.ts",
      "line": 277,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.imageWidth = Number.isFinite(width) && width > 0 ? width : 100;",
      "context": {
        "before": [
          "   */",
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would corrupt geometry and cause division by zero)"
        ],
        "after": [
          "    this.imageHeight = Number.isFinite(height) && height > 0 ? height : 100;",
          "    this.updateMeshSize();",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:278:31",
      "file": "engine/layers/ImageLayer.ts",
      "line": 278,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.imageHeight = Number.isFinite(height) && height > 0 ? height : 100;",
      "context": {
        "before": [
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would corrupt geometry and cause division by zero)",
          "    this.imageWidth = Number.isFinite(width) && width > 0 ? width : 100;"
        ],
        "after": [
          "    this.updateMeshSize();",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:292:34",
      "file": "engine/layers/ImageLayer.ts",
      "line": 292,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTint(color: string | number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set tint color",
          "   */"
        ],
        "after": [
          "    this.material.color.set(color);",
          "    this.material.needsUpdate = true;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:300:14",
      "file": "engine/layers/ImageLayer.ts",
      "line": 300,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearTint(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear tint (reset to white)",
          "   */"
        ],
        "after": [
          "    this.material.color.set(0xffffff);",
          "    this.material.needsUpdate = true;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:314:30",
      "file": "engine/layers/ImageLayer.ts",
      "line": 314,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!this.originalTexture?.image) {",
      "context": {
        "before": [
          "   * Renders the original texture to a 2D canvas",
          "   */",
          "  protected override getSourceCanvas(): HTMLCanvasElement | null {"
        ],
        "after": [
          "      return null;",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:357:4",
      "file": "engine/layers/ImageLayer.ts",
      "line": 357,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  protected override applyProcessedEffects(",
          "    processedCanvas: HTMLCanvasElement,"
        ],
        "after": [
          "    // Create a new texture from the processed canvas",
          "    const processedTexture = this.resources.createTextureFromCanvas(",
          "      processedCanvas,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:380:43",
      "file": "engine/layers/ImageLayer.ts",
      "line": 380,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Process effects if any are enabled",
          "    this.evaluateEffects(frame);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:387:4",
      "file": "engine/layers/ImageLayer.ts",
      "line": 387,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    // Apply tint if present in evaluated properties",
          "    if (state.properties.tint !== undefined) {",
          "      this.setTint(state.properties.tint as string | number);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:399:49",
      "file": "engine/layers/ImageLayer.ts",
      "line": 399,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as any;",
          "    let needsResize = false;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:404:13",
      "file": "engine/layers/ImageLayer.ts",
      "line": 404,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.source || data?.url || data?.assetId) {",
      "context": {
        "before": [
          "    let needsResize = false;",
          "",
          "    // Handle source change"
        ],
        "after": [
          "      const newSource = data.source ?? data.url ?? data.assetId;",
          "      if (newSource !== this.sourceUrl) {",
          "        this.loadImage(newSource);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:404:29",
      "file": "engine/layers/ImageLayer.ts",
      "line": 404,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.source || data?.url || data?.assetId) {",
      "context": {
        "before": [
          "    let needsResize = false;",
          "",
          "    // Handle source change"
        ],
        "after": [
          "      const newSource = data.source ?? data.url ?? data.assetId;",
          "      if (newSource !== this.sourceUrl) {",
          "        this.loadImage(newSource);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:404:42",
      "file": "engine/layers/ImageLayer.ts",
      "line": 404,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.source || data?.url || data?.assetId) {",
      "context": {
        "before": [
          "    let needsResize = false;",
          "",
          "    // Handle source change"
        ],
        "after": [
          "      const newSource = data.source ?? data.url ?? data.assetId;",
          "      if (newSource !== this.sourceUrl) {",
          "        this.loadImage(newSource);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:412:13",
      "file": "engine/layers/ImageLayer.ts",
      "line": 412,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.fit !== undefined && data.fit !== this.fit) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Handle fit mode change"
        ],
        "after": [
          "      this.fit = data.fit;",
          "      needsResize = true;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:418:13",
      "file": "engine/layers/ImageLayer.ts",
      "line": 418,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.width !== undefined || data?.height !== undefined) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Handle target dimension change (for fit calculations)"
        ],
        "after": [
          "      this.targetWidth = data.width ?? this.targetWidth;",
          "      this.targetHeight = data.height ?? this.targetHeight;",
          "      needsResize = true;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:418:42",
      "file": "engine/layers/ImageLayer.ts",
      "line": 418,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.width !== undefined || data?.height !== undefined) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Handle target dimension change (for fit calculations)"
        ],
        "after": [
          "      this.targetWidth = data.width ?? this.targetWidth;",
          "      this.targetHeight = data.height ?? this.targetHeight;",
          "      needsResize = true;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ImageLayer.ts:430:24",
      "file": "engine/layers/ImageLayer.ts",
      "line": 430,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.geometry.dispose();",
          "    this.material.dispose();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:181:30",
      "file": "engine/layers/LightLayer.ts",
      "line": 181,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validKelvin = Number.isFinite(kelvin) ? kelvin : 6500;",
      "context": {
        "before": [
          " */",
          "function kelvinToRGB(kelvin: number): { r: number; g: number; b: number } {",
          "  // Validate kelvin (NaN would produce NaN RGB values)"
        ],
        "after": [
          "  const temp = validKelvin / 100;",
          "  let r: number, g: number, b: number;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:279:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 279,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lightType: data?.lightType ?? \"point\",",
      "context": {
        "before": [
          "    const data = layerData.data as any;",
          "",
          "    return {"
        ],
        "after": [
          "      color: data?.color ?? \"#ffffff\",",
          "      colorTemperature: data?.colorTemperature,",
          "      useColorTemperature: data?.useColorTemperature ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:280:18",
      "file": "engine/layers/LightLayer.ts",
      "line": 280,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "color: data?.color ?? \"#ffffff\",",
      "context": {
        "before": [
          "",
          "    return {",
          "      lightType: data?.lightType ?? \"point\","
        ],
        "after": [
          "      colorTemperature: data?.colorTemperature,",
          "      useColorTemperature: data?.useColorTemperature ?? false,",
          "      intensity: data?.intensity ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:281:29",
      "file": "engine/layers/LightLayer.ts",
      "line": 281,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "colorTemperature: data?.colorTemperature,",
      "context": {
        "before": [
          "    return {",
          "      lightType: data?.lightType ?? \"point\",",
          "      color: data?.color ?? \"#ffffff\","
        ],
        "after": [
          "      useColorTemperature: data?.useColorTemperature ?? false,",
          "      intensity: data?.intensity ?? 100,",
          "      physicalIntensity: data?.physicalIntensity,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:282:32",
      "file": "engine/layers/LightLayer.ts",
      "line": 282,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "useColorTemperature: data?.useColorTemperature ?? false,",
      "context": {
        "before": [
          "      lightType: data?.lightType ?? \"point\",",
          "      color: data?.color ?? \"#ffffff\",",
          "      colorTemperature: data?.colorTemperature,"
        ],
        "after": [
          "      intensity: data?.intensity ?? 100,",
          "      physicalIntensity: data?.physicalIntensity,",
          "      usePhysicalIntensity: data?.usePhysicalIntensity ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:283:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 283,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "intensity: data?.intensity ?? 100,",
      "context": {
        "before": [
          "      color: data?.color ?? \"#ffffff\",",
          "      colorTemperature: data?.colorTemperature,",
          "      useColorTemperature: data?.useColorTemperature ?? false,"
        ],
        "after": [
          "      physicalIntensity: data?.physicalIntensity,",
          "      usePhysicalIntensity: data?.usePhysicalIntensity ?? false,",
          "      radius: data?.radius ?? 500,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:284:30",
      "file": "engine/layers/LightLayer.ts",
      "line": 284,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "physicalIntensity: data?.physicalIntensity,",
      "context": {
        "before": [
          "      colorTemperature: data?.colorTemperature,",
          "      useColorTemperature: data?.useColorTemperature ?? false,",
          "      intensity: data?.intensity ?? 100,"
        ],
        "after": [
          "      usePhysicalIntensity: data?.usePhysicalIntensity ?? false,",
          "      radius: data?.radius ?? 500,",
          "      falloff: data?.falloff ?? \"none\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:285:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 285,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "usePhysicalIntensity: data?.usePhysicalIntensity ?? false,",
      "context": {
        "before": [
          "      useColorTemperature: data?.useColorTemperature ?? false,",
          "      intensity: data?.intensity ?? 100,",
          "      physicalIntensity: data?.physicalIntensity,"
        ],
        "after": [
          "      radius: data?.radius ?? 500,",
          "      falloff: data?.falloff ?? \"none\",",
          "      falloffDistance: data?.falloffDistance ?? 500,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:286:19",
      "file": "engine/layers/LightLayer.ts",
      "line": 286,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "radius: data?.radius ?? 500,",
      "context": {
        "before": [
          "      intensity: data?.intensity ?? 100,",
          "      physicalIntensity: data?.physicalIntensity,",
          "      usePhysicalIntensity: data?.usePhysicalIntensity ?? false,"
        ],
        "after": [
          "      falloff: data?.falloff ?? \"none\",",
          "      falloffDistance: data?.falloffDistance ?? 500,",
          "      coneAngle: data?.coneAngle ?? 90,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:287:20",
      "file": "engine/layers/LightLayer.ts",
      "line": 287,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "falloff: data?.falloff ?? \"none\",",
      "context": {
        "before": [
          "      physicalIntensity: data?.physicalIntensity,",
          "      usePhysicalIntensity: data?.usePhysicalIntensity ?? false,",
          "      radius: data?.radius ?? 500,"
        ],
        "after": [
          "      falloffDistance: data?.falloffDistance ?? 500,",
          "      coneAngle: data?.coneAngle ?? 90,",
          "      coneFeather: data?.coneFeather ?? 50,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:288:28",
      "file": "engine/layers/LightLayer.ts",
      "line": 288,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "falloffDistance: data?.falloffDistance ?? 500,",
      "context": {
        "before": [
          "      usePhysicalIntensity: data?.usePhysicalIntensity ?? false,",
          "      radius: data?.radius ?? 500,",
          "      falloff: data?.falloff ?? \"none\","
        ],
        "after": [
          "      coneAngle: data?.coneAngle ?? 90,",
          "      coneFeather: data?.coneFeather ?? 50,",
          "      areaWidth: data?.areaWidth ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:289:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 289,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "coneAngle: data?.coneAngle ?? 90,",
      "context": {
        "before": [
          "      radius: data?.radius ?? 500,",
          "      falloff: data?.falloff ?? \"none\",",
          "      falloffDistance: data?.falloffDistance ?? 500,"
        ],
        "after": [
          "      coneFeather: data?.coneFeather ?? 50,",
          "      areaWidth: data?.areaWidth ?? 100,",
          "      areaHeight: data?.areaHeight ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:290:24",
      "file": "engine/layers/LightLayer.ts",
      "line": 290,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "coneFeather: data?.coneFeather ?? 50,",
      "context": {
        "before": [
          "      falloff: data?.falloff ?? \"none\",",
          "      falloffDistance: data?.falloffDistance ?? 500,",
          "      coneAngle: data?.coneAngle ?? 90,"
        ],
        "after": [
          "      areaWidth: data?.areaWidth ?? 100,",
          "      areaHeight: data?.areaHeight ?? 100,",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:291:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 291,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "areaWidth: data?.areaWidth ?? 100,",
      "context": {
        "before": [
          "      falloffDistance: data?.falloffDistance ?? 500,",
          "      coneAngle: data?.coneAngle ?? 90,",
          "      coneFeather: data?.coneFeather ?? 50,"
        ],
        "after": [
          "      areaHeight: data?.areaHeight ?? 100,",
          "",
          "      pointOfInterest: {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:292:23",
      "file": "engine/layers/LightLayer.ts",
      "line": 292,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "areaHeight: data?.areaHeight ?? 100,",
      "context": {
        "before": [
          "      coneAngle: data?.coneAngle ?? 90,",
          "      coneFeather: data?.coneFeather ?? 50,",
          "      areaWidth: data?.areaWidth ?? 100,"
        ],
        "after": [
          "",
          "      pointOfInterest: {",
          "        enabled: data?.pointOfInterest?.enabled ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:295:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 295,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "enabled: data?.pointOfInterest?.enabled ?? false,",
      "context": {
        "before": [
          "      areaHeight: data?.areaHeight ?? 100,",
          "",
          "      pointOfInterest: {"
        ],
        "after": [
          "        targetType: data?.pointOfInterest?.targetType ?? \"position\",",
          "        position: data?.pointOfInterest?.position ?? {",
          "          id: \"poi_pos\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:295:39",
      "file": "engine/layers/LightLayer.ts",
      "line": 295,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "enabled: data?.pointOfInterest?.enabled ?? false,",
      "context": {
        "before": [
          "      areaHeight: data?.areaHeight ?? 100,",
          "",
          "      pointOfInterest: {"
        ],
        "after": [
          "        targetType: data?.pointOfInterest?.targetType ?? \"position\",",
          "        position: data?.pointOfInterest?.position ?? {",
          "          id: \"poi_pos\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:296:25",
      "file": "engine/layers/LightLayer.ts",
      "line": 296,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "targetType: data?.pointOfInterest?.targetType ?? \"position\",",
      "context": {
        "before": [
          "",
          "      pointOfInterest: {",
          "        enabled: data?.pointOfInterest?.enabled ?? false,"
        ],
        "after": [
          "        position: data?.pointOfInterest?.position ?? {",
          "          id: \"poi_pos\",",
          "          name: \"POI Position\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:296:42",
      "file": "engine/layers/LightLayer.ts",
      "line": 296,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "targetType: data?.pointOfInterest?.targetType ?? \"position\",",
      "context": {
        "before": [
          "",
          "      pointOfInterest: {",
          "        enabled: data?.pointOfInterest?.enabled ?? false,"
        ],
        "after": [
          "        position: data?.pointOfInterest?.position ?? {",
          "          id: \"poi_pos\",",
          "          name: \"POI Position\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:297:23",
      "file": "engine/layers/LightLayer.ts",
      "line": 297,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: data?.pointOfInterest?.position ?? {",
      "context": {
        "before": [
          "      pointOfInterest: {",
          "        enabled: data?.pointOfInterest?.enabled ?? false,",
          "        targetType: data?.pointOfInterest?.targetType ?? \"position\","
        ],
        "after": [
          "          id: \"poi_pos\",",
          "          name: \"POI Position\",",
          "          type: \"vector3\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:297:40",
      "file": "engine/layers/LightLayer.ts",
      "line": 297,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: data?.pointOfInterest?.position ?? {",
      "context": {
        "before": [
          "      pointOfInterest: {",
          "        enabled: data?.pointOfInterest?.enabled ?? false,",
          "        targetType: data?.pointOfInterest?.targetType ?? \"position\","
        ],
        "after": [
          "          id: \"poi_pos\",",
          "          name: \"POI Position\",",
          "          type: \"vector3\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:305:28",
      "file": "engine/layers/LightLayer.ts",
      "line": 305,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "targetLayerId: data?.pointOfInterest?.targetLayerId,",
      "context": {
        "before": [
          "          animated: false,",
          "          keyframes: [],",
          "        },"
        ],
        "after": [
          "        offset: data?.pointOfInterest?.offset ?? { x: 0, y: 0, z: 0 },",
          "        smoothing: data?.pointOfInterest?.smoothing ?? 0,",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:305:45",
      "file": "engine/layers/LightLayer.ts",
      "line": 305,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "targetLayerId: data?.pointOfInterest?.targetLayerId,",
      "context": {
        "before": [
          "          animated: false,",
          "          keyframes: [],",
          "        },"
        ],
        "after": [
          "        offset: data?.pointOfInterest?.offset ?? { x: 0, y: 0, z: 0 },",
          "        smoothing: data?.pointOfInterest?.smoothing ?? 0,",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:306:21",
      "file": "engine/layers/LightLayer.ts",
      "line": 306,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "offset: data?.pointOfInterest?.offset ?? { x: 0, y: 0, z: 0 },",
      "context": {
        "before": [
          "          keyframes: [],",
          "        },",
          "        targetLayerId: data?.pointOfInterest?.targetLayerId,"
        ],
        "after": [
          "        smoothing: data?.pointOfInterest?.smoothing ?? 0,",
          "      },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:306:38",
      "file": "engine/layers/LightLayer.ts",
      "line": 306,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "offset: data?.pointOfInterest?.offset ?? { x: 0, y: 0, z: 0 },",
      "context": {
        "before": [
          "          keyframes: [],",
          "        },",
          "        targetLayerId: data?.pointOfInterest?.targetLayerId,"
        ],
        "after": [
          "        smoothing: data?.pointOfInterest?.smoothing ?? 0,",
          "      },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:307:24",
      "file": "engine/layers/LightLayer.ts",
      "line": 307,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "smoothing: data?.pointOfInterest?.smoothing ?? 0,",
      "context": {
        "before": [
          "        },",
          "        targetLayerId: data?.pointOfInterest?.targetLayerId,",
          "        offset: data?.pointOfInterest?.offset ?? { x: 0, y: 0, z: 0 },"
        ],
        "after": [
          "      },",
          "",
          "      pathFollowing: {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:307:41",
      "file": "engine/layers/LightLayer.ts",
      "line": 307,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "smoothing: data?.pointOfInterest?.smoothing ?? 0,",
      "context": {
        "before": [
          "        },",
          "        targetLayerId: data?.pointOfInterest?.targetLayerId,",
          "        offset: data?.pointOfInterest?.offset ?? { x: 0, y: 0, z: 0 },"
        ],
        "after": [
          "      },",
          "",
          "      pathFollowing: {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:311:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 311,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "enabled: data?.pathFollowing?.enabled ?? false,",
      "context": {
        "before": [
          "      },",
          "",
          "      pathFollowing: {"
        ],
        "after": [
          "        splineLayerId: data?.pathFollowing?.splineLayerId,",
          "        progress: data?.pathFollowing?.progress ?? {",
          "          id: \"path_progress\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:311:37",
      "file": "engine/layers/LightLayer.ts",
      "line": 311,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "enabled: data?.pathFollowing?.enabled ?? false,",
      "context": {
        "before": [
          "      },",
          "",
          "      pathFollowing: {"
        ],
        "after": [
          "        splineLayerId: data?.pathFollowing?.splineLayerId,",
          "        progress: data?.pathFollowing?.progress ?? {",
          "          id: \"path_progress\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:312:28",
      "file": "engine/layers/LightLayer.ts",
      "line": 312,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "splineLayerId: data?.pathFollowing?.splineLayerId,",
      "context": {
        "before": [
          "",
          "      pathFollowing: {",
          "        enabled: data?.pathFollowing?.enabled ?? false,"
        ],
        "after": [
          "        progress: data?.pathFollowing?.progress ?? {",
          "          id: \"path_progress\",",
          "          name: \"Path Progress\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:312:43",
      "file": "engine/layers/LightLayer.ts",
      "line": 312,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "splineLayerId: data?.pathFollowing?.splineLayerId,",
      "context": {
        "before": [
          "",
          "      pathFollowing: {",
          "        enabled: data?.pathFollowing?.enabled ?? false,"
        ],
        "after": [
          "        progress: data?.pathFollowing?.progress ?? {",
          "          id: \"path_progress\",",
          "          name: \"Path Progress\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:313:23",
      "file": "engine/layers/LightLayer.ts",
      "line": 313,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "progress: data?.pathFollowing?.progress ?? {",
      "context": {
        "before": [
          "      pathFollowing: {",
          "        enabled: data?.pathFollowing?.enabled ?? false,",
          "        splineLayerId: data?.pathFollowing?.splineLayerId,"
        ],
        "after": [
          "          id: \"path_progress\",",
          "          name: \"Path Progress\",",
          "          type: \"number\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:313:38",
      "file": "engine/layers/LightLayer.ts",
      "line": 313,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "progress: data?.pathFollowing?.progress ?? {",
      "context": {
        "before": [
          "      pathFollowing: {",
          "        enabled: data?.pathFollowing?.enabled ?? false,",
          "        splineLayerId: data?.pathFollowing?.splineLayerId,"
        ],
        "after": [
          "          id: \"path_progress\",",
          "          name: \"Path Progress\",",
          "          type: \"number\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:321:25",
      "file": "engine/layers/LightLayer.ts",
      "line": 321,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "autoOrient: data?.pathFollowing?.autoOrient ?? true,",
      "context": {
        "before": [
          "          animated: false,",
          "          keyframes: [],",
          "        },"
        ],
        "after": [
          "        bankAngle: data?.pathFollowing?.bankAngle ?? {",
          "          id: \"bank_angle\",",
          "          name: \"Bank Angle\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:321:40",
      "file": "engine/layers/LightLayer.ts",
      "line": 321,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "autoOrient: data?.pathFollowing?.autoOrient ?? true,",
      "context": {
        "before": [
          "          animated: false,",
          "          keyframes: [],",
          "        },"
        ],
        "after": [
          "        bankAngle: data?.pathFollowing?.bankAngle ?? {",
          "          id: \"bank_angle\",",
          "          name: \"Bank Angle\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:322:24",
      "file": "engine/layers/LightLayer.ts",
      "line": 322,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "bankAngle: data?.pathFollowing?.bankAngle ?? {",
      "context": {
        "before": [
          "          keyframes: [],",
          "        },",
          "        autoOrient: data?.pathFollowing?.autoOrient ?? true,"
        ],
        "after": [
          "          id: \"bank_angle\",",
          "          name: \"Bank Angle\",",
          "          type: \"number\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:322:39",
      "file": "engine/layers/LightLayer.ts",
      "line": 322,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "bankAngle: data?.pathFollowing?.bankAngle ?? {",
      "context": {
        "before": [
          "          keyframes: [],",
          "        },",
          "        autoOrient: data?.pathFollowing?.autoOrient ?? true,"
        ],
        "after": [
          "          id: \"bank_angle\",",
          "          name: \"Bank Angle\",",
          "          type: \"number\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:333:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 333,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
      "context": {
        "before": [
          "      },",
          "",
          "      shadow: {"
        ],
        "after": [
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:333:30",
      "file": "engine/layers/LightLayer.ts",
      "line": 333,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
      "context": {
        "before": [
          "      },",
          "",
          "      shadow: {"
        ],
        "after": [
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:333:47",
      "file": "engine/layers/LightLayer.ts",
      "line": 333,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
      "context": {
        "before": [
          "      },",
          "",
          "      shadow: {"
        ],
        "after": [
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:334:19",
      "file": "engine/layers/LightLayer.ts",
      "line": 334,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "type: data?.shadow?.type ?? \"pcf\",",
      "context": {
        "before": [
          "",
          "      shadow: {",
          "        enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,"
        ],
        "after": [
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:334:27",
      "file": "engine/layers/LightLayer.ts",
      "line": 334,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "type: data?.shadow?.type ?? \"pcf\",",
      "context": {
        "before": [
          "",
          "      shadow: {",
          "        enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,"
        ],
        "after": [
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:335:22",
      "file": "engine/layers/LightLayer.ts",
      "line": 335,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mapSize: data?.shadow?.mapSize ?? 1024,",
      "context": {
        "before": [
          "      shadow: {",
          "        enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
          "        type: data?.shadow?.type ?? \"pcf\","
        ],
        "after": [
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:335:30",
      "file": "engine/layers/LightLayer.ts",
      "line": 335,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mapSize: data?.shadow?.mapSize ?? 1024,",
      "context": {
        "before": [
          "      shadow: {",
          "        enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
          "        type: data?.shadow?.type ?? \"pcf\","
        ],
        "after": [
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:336:23",
      "file": "engine/layers/LightLayer.ts",
      "line": 336,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
      "context": {
        "before": [
          "        enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,"
        ],
        "after": [
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:336:31",
      "file": "engine/layers/LightLayer.ts",
      "line": 336,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
      "context": {
        "before": [
          "        enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,"
        ],
        "after": [
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:336:49",
      "file": "engine/layers/LightLayer.ts",
      "line": 336,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
      "context": {
        "before": [
          "        enabled: data?.shadow?.enabled ?? data?.castShadows ?? false,",
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,"
        ],
        "after": [
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:337:21",
      "file": "engine/layers/LightLayer.ts",
      "line": 337,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
      "context": {
        "before": [
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,"
        ],
        "after": [
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:337:29",
      "file": "engine/layers/LightLayer.ts",
      "line": 337,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
      "context": {
        "before": [
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,"
        ],
        "after": [
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:337:45",
      "file": "engine/layers/LightLayer.ts",
      "line": 337,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
      "context": {
        "before": [
          "        type: data?.shadow?.type ?? \"pcf\",",
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,"
        ],
        "after": [
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:338:19",
      "file": "engine/layers/LightLayer.ts",
      "line": 338,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "bias: data?.shadow?.bias ?? -0.0001,",
      "context": {
        "before": [
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,"
        ],
        "after": [
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,",
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:338:27",
      "file": "engine/layers/LightLayer.ts",
      "line": 338,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "bias: data?.shadow?.bias ?? -0.0001,",
      "context": {
        "before": [
          "        mapSize: data?.shadow?.mapSize ?? 1024,",
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,"
        ],
        "after": [
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,",
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:339:25",
      "file": "engine/layers/LightLayer.ts",
      "line": 339,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "normalBias: data?.shadow?.normalBias ?? 0,",
      "context": {
        "before": [
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,"
        ],
        "after": [
          "        cameraNear: data?.shadow?.cameraNear ?? 1,",
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,",
          "        cameraSize: data?.shadow?.cameraSize ?? 500,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:339:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 339,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "normalBias: data?.shadow?.normalBias ?? 0,",
      "context": {
        "before": [
          "        darkness: data?.shadow?.darkness ?? data?.shadowDarkness ?? 100,",
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,"
        ],
        "after": [
          "        cameraNear: data?.shadow?.cameraNear ?? 1,",
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,",
          "        cameraSize: data?.shadow?.cameraSize ?? 500,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:340:25",
      "file": "engine/layers/LightLayer.ts",
      "line": 340,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cameraNear: data?.shadow?.cameraNear ?? 1,",
      "context": {
        "before": [
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,"
        ],
        "after": [
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,",
          "        cameraSize: data?.shadow?.cameraSize ?? 500,",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:340:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 340,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cameraNear: data?.shadow?.cameraNear ?? 1,",
      "context": {
        "before": [
          "        radius: data?.shadow?.radius ?? data?.shadowDiffusion ?? 1,",
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,"
        ],
        "after": [
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,",
          "        cameraSize: data?.shadow?.cameraSize ?? 500,",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:341:24",
      "file": "engine/layers/LightLayer.ts",
      "line": 341,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cameraFar: data?.shadow?.cameraFar ?? 1000,",
      "context": {
        "before": [
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,"
        ],
        "after": [
          "        cameraSize: data?.shadow?.cameraSize ?? 500,",
          "      },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:341:32",
      "file": "engine/layers/LightLayer.ts",
      "line": 341,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cameraFar: data?.shadow?.cameraFar ?? 1000,",
      "context": {
        "before": [
          "        bias: data?.shadow?.bias ?? -0.0001,",
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,"
        ],
        "after": [
          "        cameraSize: data?.shadow?.cameraSize ?? 500,",
          "      },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:342:25",
      "file": "engine/layers/LightLayer.ts",
      "line": 342,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cameraSize: data?.shadow?.cameraSize ?? 500,",
      "context": {
        "before": [
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,",
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,"
        ],
        "after": [
          "      },",
          "",
          "      lightLinking: {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:342:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 342,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cameraSize: data?.shadow?.cameraSize ?? 500,",
      "context": {
        "before": [
          "        normalBias: data?.shadow?.normalBias ?? 0,",
          "        cameraNear: data?.shadow?.cameraNear ?? 1,",
          "        cameraFar: data?.shadow?.cameraFar ?? 1000,"
        ],
        "after": [
          "      },",
          "",
          "      lightLinking: {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:346:19",
      "file": "engine/layers/LightLayer.ts",
      "line": 346,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mode: data?.lightLinking?.mode ?? \"include\",",
      "context": {
        "before": [
          "      },",
          "",
          "      lightLinking: {"
        ],
        "after": [
          "        layers: data?.lightLinking?.layers ?? [],",
          "      },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:346:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 346,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "mode: data?.lightLinking?.mode ?? \"include\",",
      "context": {
        "before": [
          "      },",
          "",
          "      lightLinking: {"
        ],
        "after": [
          "        layers: data?.lightLinking?.layers ?? [],",
          "      },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:347:21",
      "file": "engine/layers/LightLayer.ts",
      "line": 347,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layers: data?.lightLinking?.layers ?? [],",
      "context": {
        "before": [
          "",
          "      lightLinking: {",
          "        mode: data?.lightLinking?.mode ?? \"include\","
        ],
        "after": [
          "      },",
          "",
          "      animatedIntensity: data?.animatedIntensity,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:347:35",
      "file": "engine/layers/LightLayer.ts",
      "line": 347,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layers: data?.lightLinking?.layers ?? [],",
      "context": {
        "before": [
          "",
          "      lightLinking: {",
          "        mode: data?.lightLinking?.mode ?? \"include\","
        ],
        "after": [
          "      },",
          "",
          "      animatedIntensity: data?.animatedIntensity,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:350:30",
      "file": "engine/layers/LightLayer.ts",
      "line": 350,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedIntensity: data?.animatedIntensity,",
      "context": {
        "before": [
          "        layers: data?.lightLinking?.layers ?? [],",
          "      },",
          ""
        ],
        "after": [
          "      animatedConeAngle: data?.animatedConeAngle,",
          "      animatedColor: data?.animatedColor,",
          "      animatedColorTemperature: data?.animatedColorTemperature,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:351:30",
      "file": "engine/layers/LightLayer.ts",
      "line": 351,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedConeAngle: data?.animatedConeAngle,",
      "context": {
        "before": [
          "      },",
          "",
          "      animatedIntensity: data?.animatedIntensity,"
        ],
        "after": [
          "      animatedColor: data?.animatedColor,",
          "      animatedColorTemperature: data?.animatedColorTemperature,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:352:26",
      "file": "engine/layers/LightLayer.ts",
      "line": 352,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedColor: data?.animatedColor,",
      "context": {
        "before": [
          "",
          "      animatedIntensity: data?.animatedIntensity,",
          "      animatedConeAngle: data?.animatedConeAngle,"
        ],
        "after": [
          "      animatedColorTemperature: data?.animatedColorTemperature,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:353:37",
      "file": "engine/layers/LightLayer.ts",
      "line": 353,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedColorTemperature: data?.animatedColorTemperature,",
      "context": {
        "before": [
          "      animatedIntensity: data?.animatedIntensity,",
          "      animatedConeAngle: data?.animatedConeAngle,",
          "      animatedColor: data?.animatedColor,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:447:4",
      "file": "engine/layers/LightLayer.ts",
      "line": 447,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  private configureShadows(",
          "    light: THREE.PointLight | THREE.SpotLight | THREE.DirectionalLight,"
        ],
        "after": [
          "    const shadowConfig = this.lightData.shadow;",
          "    light.castShadow = shadowConfig.enabled;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:499:25",
      "file": "engine/layers/LightLayer.ts",
      "line": 499,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createHelper(): void {",
      "context": {
        "before": [
          "  // HELPER VISUALIZATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.helper) {",
          "      this.group.remove(this.helper);",
          "      if ((this.helper as any).dispose) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:559:4",
      "file": "engine/layers/LightLayer.ts",
      "line": 559,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  setLayerPositionGetter(",
          "    getter: ((layerId: string) => THREE.Vector3 | null) | null,"
        ],
        "after": [
          "    this.layerPositionGetter = getter;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:566:47",
      "file": "engine/layers/LightLayer.ts",
      "line": 566,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updatePointOfInterest(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update point of interest target",
          "   */"
        ],
        "after": [
          "    const poi = this.lightData.pointOfInterest;",
          "    if (!poi.enabled) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:636:4",
      "file": "engine/layers/LightLayer.ts",
      "line": 636,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "          tangent: { x: number; y: number };",
          "        } | null)",
          "      | null,"
        ],
        "after": [
          "    this.pathProvider = provider;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:643:45",
      "file": "engine/layers/LightLayer.ts",
      "line": 643,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updatePathFollowing(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update position and orientation from path",
          "   */"
        ],
        "after": [
          "    const path = this.lightData.pathFollowing;",
          "    if (!path.enabled || !path.splineLayerId || !this.pathProvider) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:677:32",
      "file": "engine/layers/LightLayer.ts",
      "line": 677,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLightType(type: LightType): void {",
      "context": {
        "before": [
          "  // PUBLIC SETTERS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (type === this.lightData.lightType) return;",
          "",
          "    this.lightData.lightType = type;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:692:26",
      "file": "engine/layers/LightLayer.ts",
      "line": 692,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setColor(color: string): void {",
      "context": {
        "before": [
          "    this.createHelper();",
          "  }",
          ""
        ],
        "after": [
          "    this.lightData.color = color;",
          "    this.lightData.useColorTemperature = false;",
          "    this.light.color.set(color);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:698:38",
      "file": "engine/layers/LightLayer.ts",
      "line": 698,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setColorTemperature(kelvin: number): void {",
      "context": {
        "before": [
          "    this.light.color.set(color);",
          "  }",
          ""
        ],
        "after": [
          "    this.lightData.colorTemperature = kelvin;",
          "    this.lightData.useColorTemperature = true;",
          "    const rgb = kelvinToRGB(kelvin);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:705:34",
      "file": "engine/layers/LightLayer.ts",
      "line": 705,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setIntensity(intensity: number): void {",
      "context": {
        "before": [
          "    this.light.color.setRGB(rgb.r, rgb.g, rgb.b);",
          "  }",
          ""
        ],
        "after": [
          "    // Validate intensity (NaN would corrupt light rendering)",
          "    const validIntensity = Number.isFinite(intensity) ? intensity : 100;",
          "    this.lightData.intensity = validIntensity;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:707:35",
      "file": "engine/layers/LightLayer.ts",
      "line": 707,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validIntensity = Number.isFinite(intensity) ? intensity : 100;",
      "context": {
        "before": [
          "",
          "  setIntensity(intensity: number): void {",
          "    // Validate intensity (NaN would corrupt light rendering)"
        ],
        "after": [
          "    this.lightData.intensity = validIntensity;",
          "    this.lightData.usePhysicalIntensity = false;",
          "    this.light.intensity = validIntensity / 100;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:713:39",
      "file": "engine/layers/LightLayer.ts",
      "line": 713,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFalloffDistance(distance: number): void {",
      "context": {
        "before": [
          "    this.light.intensity = validIntensity / 100;",
          "  }",
          ""
        ],
        "after": [
          "    // Validate distance (NaN would corrupt light falloff)",
          "    const validDistance = Number.isFinite(distance) ? distance : 500;",
          "    this.lightData.falloffDistance = validDistance;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:715:34",
      "file": "engine/layers/LightLayer.ts",
      "line": 715,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validDistance = Number.isFinite(distance) ? distance : 500;",
      "context": {
        "before": [
          "",
          "  setFalloffDistance(distance: number): void {",
          "    // Validate distance (NaN would corrupt light falloff)"
        ],
        "after": [
          "    this.lightData.falloffDistance = validDistance;",
          "    if (",
          "      this.light instanceof THREE.PointLight ||"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:726:30",
      "file": "engine/layers/LightLayer.ts",
      "line": 726,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConeAngle(angle: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.light instanceof THREE.SpotLight) {",
          "      // Validate angle (NaN would corrupt light cone)",
          "      const validAngle = Number.isFinite(angle) ? angle : 90;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:729:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 729,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validAngle = Number.isFinite(angle) ? angle : 90;",
      "context": {
        "before": [
          "  setConeAngle(angle: number): void {",
          "    if (this.light instanceof THREE.SpotLight) {",
          "      // Validate angle (NaN would corrupt light cone)"
        ],
        "after": [
          "      this.lightData.coneAngle = validAngle;",
          "      this.light.angle = THREE.MathUtils.degToRad(validAngle / 2);",
          "      if (this.helper instanceof THREE.SpotLightHelper) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:738:34",
      "file": "engine/layers/LightLayer.ts",
      "line": 738,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConeFeather(feather: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.light instanceof THREE.SpotLight) {",
          "      // Validate feather (NaN would corrupt penumbra)",
          "      const validFeather = Number.isFinite(feather) ? feather : 50;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:741:35",
      "file": "engine/layers/LightLayer.ts",
      "line": 741,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validFeather = Number.isFinite(feather) ? feather : 50;",
      "context": {
        "before": [
          "  setConeFeather(feather: number): void {",
          "    if (this.light instanceof THREE.SpotLight) {",
          "      // Validate feather (NaN would corrupt penumbra)"
        ],
        "after": [
          "      this.lightData.coneFeather = validFeather;",
          "      this.light.penumbra = validFeather / 100;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:747:45",
      "file": "engine/layers/LightLayer.ts",
      "line": 747,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAreaSize(width: number, height: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.light instanceof THREE.RectAreaLight) {",
          "      // Validate dimensions (NaN/0 would corrupt area light)",
          "      const validWidth = Number.isFinite(width) && width > 0 ? width : 100;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:750:33",
      "file": "engine/layers/LightLayer.ts",
      "line": 750,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 100;",
      "context": {
        "before": [
          "  setAreaSize(width: number, height: number): void {",
          "    if (this.light instanceof THREE.RectAreaLight) {",
          "      // Validate dimensions (NaN/0 would corrupt area light)"
        ],
        "after": [
          "      const validHeight = Number.isFinite(height) && height > 0 ? height : 100;",
          "      this.lightData.areaWidth = validWidth;",
          "      this.lightData.areaHeight = validHeight;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:751:34",
      "file": "engine/layers/LightLayer.ts",
      "line": 751,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 100;",
      "context": {
        "before": [
          "    if (this.light instanceof THREE.RectAreaLight) {",
          "      // Validate dimensions (NaN/0 would corrupt area light)",
          "      const validWidth = Number.isFinite(width) && width > 0 ? width : 100;"
        ],
        "after": [
          "      this.lightData.areaWidth = validWidth;",
          "      this.lightData.areaHeight = validHeight;",
          "      this.light.width = validWidth;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:759:37",
      "file": "engine/layers/LightLayer.ts",
      "line": 759,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShadowEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.lightData.shadow.enabled = enabled;",
          "    if (",
          "      this.light instanceof THREE.PointLight ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:770:34",
      "file": "engine/layers/LightLayer.ts",
      "line": 770,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShadowType(type: ShadowType): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.lightData.shadow.type = type;",
          "    if (",
          "      this.light instanceof THREE.PointLight ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:781:46",
      "file": "engine/layers/LightLayer.ts",
      "line": 781,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPointOfInterestEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.lightData.pointOfInterest.enabled = enabled;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:785:51",
      "file": "engine/layers/LightLayer.ts",
      "line": 785,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPointOfInterestTarget(layerId: string | null): void {",
      "context": {
        "before": [
          "    this.lightData.pointOfInterest.enabled = enabled;",
          "  }",
          ""
        ],
        "after": [
          "    if (layerId) {",
          "      this.lightData.pointOfInterest.targetType = \"layer\";",
          "      this.lightData.pointOfInterest.targetLayerId = layerId;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:795:44",
      "file": "engine/layers/LightLayer.ts",
      "line": 795,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPathFollowingEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.lightData.pathFollowing.enabled = enabled;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:799:46",
      "file": "engine/layers/LightLayer.ts",
      "line": 799,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPathSpline(splineLayerId: string | null): void {",
      "context": {
        "before": [
          "    this.lightData.pathFollowing.enabled = enabled;",
          "  }",
          ""
        ],
        "after": [
          "    this.lightData.pathFollowing.splineLayerId = splineLayerId ?? undefined;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:858:54",
      "file": "engine/layers/LightLayer.ts",
      "line": 858,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDriverPropertyValue(path: string, value: number): void {",
      "context": {
        "before": [
          "   * Set a light property value by driver property path",
          "   * Used by PropertyDriverSystem for driven values",
          "   */"
        ],
        "after": [
          "    switch (path) {",
          "      case \"light.intensity\":",
          "        this.light.intensity = value / 100;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:971:37",
      "file": "engine/layers/LightLayer.ts",
      "line": 971,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setHelperVisible(visible: boolean): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.helper) {",
          "      this.helper.visible = visible;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:981:43",
      "file": "engine/layers/LightLayer.ts",
      "line": 981,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Path following (overrides transform)",
          "    if (this.lightData.pathFollowing.enabled) {",
          "      this.updatePathFollowing(frame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:993:41",
      "file": "engine/layers/LightLayer.ts",
      "line": 993,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.lightData.animatedIntensity?.animated) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Animated intensity"
        ],
        "after": [
          "      const intensity = this.evaluator.evaluate(",
          "        this.lightData.animatedIntensity,",
          "        frame,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1003:39",
      "file": "engine/layers/LightLayer.ts",
      "line": 1003,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.lightData.animatedConeAngle?.animated &&",
      "context": {
        "before": [
          "",
          "    // Animated cone angle",
          "    if ("
        ],
        "after": [
          "      this.light instanceof THREE.SpotLight",
          "    ) {",
          "      const angle = this.evaluator.evaluate("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1017:37",
      "file": "engine/layers/LightLayer.ts",
      "line": 1017,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.lightData.animatedColor?.animated) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Animated color"
        ],
        "after": [
          "      const color = this.evaluator.evaluate(",
          "        this.lightData.animatedColor,",
          "        frame,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1027:46",
      "file": "engine/layers/LightLayer.ts",
      "line": 1027,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.lightData.animatedColorTemperature?.animated &&",
      "context": {
        "before": [
          "",
          "    // Animated color temperature",
          "    if ("
        ],
        "after": [
          "      this.lightData.useColorTemperature",
          "    ) {",
          "      const kelvin = this.evaluator.evaluate("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1052:4",
      "file": "engine/layers/LightLayer.ts",
      "line": 1052,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    // Apply evaluated intensity"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1115:49",
      "file": "engine/layers/LightLayer.ts",
      "line": 1115,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<LightData> | undefined;",
          "    if (!data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/LightLayer.ts:1200:24",
      "file": "engine/layers/LightLayer.ts",
      "line": 1200,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if ((this.light as any).dispose) {",
          "      (this.light as any).dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:102:30",
      "file": "engine/layers/ModelLayer.ts",
      "line": 102,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeLoaders(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize shared loaders",
          "   */"
        ],
        "after": [
          "    if (!ModelLayer.gltfLoader) {",
          "      ModelLayer.gltfLoader = new GLTFLoader();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:145:20",
      "file": "engine/layers/ModelLayer.ts",
      "line": 145,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetId: data?.assetId ?? \"\",",
      "context": {
        "before": [
          "    };",
          "",
          "    return {"
        ],
        "after": [
          "      format: data?.format ?? \"gltf\",",
          "      scale: data?.scale ?? defaultScale,",
          "      uniformScale: data?.uniformScale ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:146:19",
      "file": "engine/layers/ModelLayer.ts",
      "line": 146,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "format: data?.format ?? \"gltf\",",
      "context": {
        "before": [
          "",
          "    return {",
          "      assetId: data?.assetId ?? \"\","
        ],
        "after": [
          "      scale: data?.scale ?? defaultScale,",
          "      uniformScale: data?.uniformScale ?? true,",
          "      materialOverride: data?.materialOverride,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:147:18",
      "file": "engine/layers/ModelLayer.ts",
      "line": 147,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: data?.scale ?? defaultScale,",
      "context": {
        "before": [
          "    return {",
          "      assetId: data?.assetId ?? \"\",",
          "      format: data?.format ?? \"gltf\","
        ],
        "after": [
          "      uniformScale: data?.uniformScale ?? true,",
          "      materialOverride: data?.materialOverride,",
          "      animation: data?.animation,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:148:25",
      "file": "engine/layers/ModelLayer.ts",
      "line": 148,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "uniformScale: data?.uniformScale ?? true,",
      "context": {
        "before": [
          "      assetId: data?.assetId ?? \"\",",
          "      format: data?.format ?? \"gltf\",",
          "      scale: data?.scale ?? defaultScale,"
        ],
        "after": [
          "      materialOverride: data?.materialOverride,",
          "      animation: data?.animation,",
          "      boundingBox: data?.boundingBox,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:149:29",
      "file": "engine/layers/ModelLayer.ts",
      "line": 149,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "materialOverride: data?.materialOverride,",
      "context": {
        "before": [
          "      format: data?.format ?? \"gltf\",",
          "      scale: data?.scale ?? defaultScale,",
          "      uniformScale: data?.uniformScale ?? true,"
        ],
        "after": [
          "      animation: data?.animation,",
          "      boundingBox: data?.boundingBox,",
          "      castShadow: data?.castShadow ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:150:22",
      "file": "engine/layers/ModelLayer.ts",
      "line": 150,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animation: data?.animation,",
      "context": {
        "before": [
          "      scale: data?.scale ?? defaultScale,",
          "      uniformScale: data?.uniformScale ?? true,",
          "      materialOverride: data?.materialOverride,"
        ],
        "after": [
          "      boundingBox: data?.boundingBox,",
          "      castShadow: data?.castShadow ?? true,",
          "      receiveShadow: data?.receiveShadow ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:151:24",
      "file": "engine/layers/ModelLayer.ts",
      "line": 151,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "boundingBox: data?.boundingBox,",
      "context": {
        "before": [
          "      uniformScale: data?.uniformScale ?? true,",
          "      materialOverride: data?.materialOverride,",
          "      animation: data?.animation,"
        ],
        "after": [
          "      castShadow: data?.castShadow ?? true,",
          "      receiveShadow: data?.receiveShadow ?? true,",
          "      frustumCulled: data?.frustumCulled ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:152:23",
      "file": "engine/layers/ModelLayer.ts",
      "line": 152,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "castShadow: data?.castShadow ?? true,",
      "context": {
        "before": [
          "      materialOverride: data?.materialOverride,",
          "      animation: data?.animation,",
          "      boundingBox: data?.boundingBox,"
        ],
        "after": [
          "      receiveShadow: data?.receiveShadow ?? true,",
          "      frustumCulled: data?.frustumCulled ?? true,",
          "      renderOrder: data?.renderOrder ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:153:26",
      "file": "engine/layers/ModelLayer.ts",
      "line": 153,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "receiveShadow: data?.receiveShadow ?? true,",
      "context": {
        "before": [
          "      animation: data?.animation,",
          "      boundingBox: data?.boundingBox,",
          "      castShadow: data?.castShadow ?? true,"
        ],
        "after": [
          "      frustumCulled: data?.frustumCulled ?? true,",
          "      renderOrder: data?.renderOrder ?? 0,",
          "      showBoundingBox: data?.showBoundingBox ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:154:26",
      "file": "engine/layers/ModelLayer.ts",
      "line": 154,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frustumCulled: data?.frustumCulled ?? true,",
      "context": {
        "before": [
          "      boundingBox: data?.boundingBox,",
          "      castShadow: data?.castShadow ?? true,",
          "      receiveShadow: data?.receiveShadow ?? true,"
        ],
        "after": [
          "      renderOrder: data?.renderOrder ?? 0,",
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      showSkeleton: data?.showSkeleton ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:155:24",
      "file": "engine/layers/ModelLayer.ts",
      "line": 155,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "renderOrder: data?.renderOrder ?? 0,",
      "context": {
        "before": [
          "      castShadow: data?.castShadow ?? true,",
          "      receiveShadow: data?.receiveShadow ?? true,",
          "      frustumCulled: data?.frustumCulled ?? true,"
        ],
        "after": [
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      showSkeleton: data?.showSkeleton ?? false,",
          "      envMapIntensity: data?.envMapIntensity ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:156:28",
      "file": "engine/layers/ModelLayer.ts",
      "line": 156,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "showBoundingBox: data?.showBoundingBox ?? false,",
      "context": {
        "before": [
          "      receiveShadow: data?.receiveShadow ?? true,",
          "      frustumCulled: data?.frustumCulled ?? true,",
          "      renderOrder: data?.renderOrder ?? 0,"
        ],
        "after": [
          "      showSkeleton: data?.showSkeleton ?? false,",
          "      envMapIntensity: data?.envMapIntensity ?? 1,",
          "      lod: data?.lod,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:157:25",
      "file": "engine/layers/ModelLayer.ts",
      "line": 157,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "showSkeleton: data?.showSkeleton ?? false,",
      "context": {
        "before": [
          "      frustumCulled: data?.frustumCulled ?? true,",
          "      renderOrder: data?.renderOrder ?? 0,",
          "      showBoundingBox: data?.showBoundingBox ?? false,"
        ],
        "after": [
          "      envMapIntensity: data?.envMapIntensity ?? 1,",
          "      lod: data?.lod,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:158:28",
      "file": "engine/layers/ModelLayer.ts",
      "line": 158,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "envMapIntensity: data?.envMapIntensity ?? 1,",
      "context": {
        "before": [
          "      renderOrder: data?.renderOrder ?? 0,",
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      showSkeleton: data?.showSkeleton ?? false,"
        ],
        "after": [
          "      lod: data?.lod,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:159:16",
      "file": "engine/layers/ModelLayer.ts",
      "line": 159,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lod: data?.lod,",
      "context": {
        "before": [
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      showSkeleton: data?.showSkeleton ?? false,",
          "      envMapIntensity: data?.envMapIntensity ?? 1,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:229:28",
      "file": "engine/layers/ModelLayer.ts",
      "line": 229,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "ModelLayer.gltfLoader?.load(",
      "context": {
        "before": [
          "   */",
          "  private loadGLTF(url: string): Promise<THREE.Object3D> {",
          "    return new Promise((resolve, reject) => {"
        ],
        "after": [
          "        url,",
          "        (gltf: GLTF) => {",
          "          // Extract animations"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:250:27",
      "file": "engine/layers/ModelLayer.ts",
      "line": 250,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "ModelLayer.objLoader?.load(url, resolve, undefined, reject);",
      "context": {
        "before": [
          "   */",
          "  private loadOBJ(url: string): Promise<THREE.Object3D> {",
          "    return new Promise((resolve, reject) => {"
        ],
        "after": [
          "    });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:259:27",
      "file": "engine/layers/ModelLayer.ts",
      "line": 259,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "ModelLayer.fbxLoader?.load(",
      "context": {
        "before": [
          "   */",
          "  private loadFBX(url: string): Promise<THREE.Object3D> {",
          "    return new Promise((resolve, reject) => {"
        ],
        "after": [
          "        url,",
          "        (object: THREE.Group) => {",
          "          // FBX files often contain animations"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:280:31",
      "file": "engine/layers/ModelLayer.ts",
      "line": 280,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "ModelLayer.colladaLoader?.load(",
      "context": {
        "before": [
          "   */",
          "  private loadCollada(url: string): Promise<THREE.Object3D> {",
          "    return new Promise((resolve, reject) => {"
        ],
        "after": [
          "        url,",
          "        (collada: Collada) => {",
          "          // Collada may have animations"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:342:30",
      "file": "engine/layers/ModelLayer.ts",
      "line": 342,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createPlaceholder(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create placeholder model when loading fails or no asset",
          "   */"
        ],
        "after": [
          "    const group = new THREE.Group();",
          "    group.name = `model_placeholder_${this.id}`;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:367:43",
      "file": "engine/layers/ModelLayer.ts",
      "line": 367,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private setModel(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the loaded model",
          "   */"
        ],
        "after": [
          "    // Remove existing model",
          "    if (this.model) {",
          "      this.group.remove(this.model);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:402:35",
      "file": "engine/layers/ModelLayer.ts",
      "line": 402,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private storeOriginalMaterials(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Store original materials for later restoration",
          "   */"
        ],
        "after": [
          "    this.originalMaterials.clear();",
          "",
          "    this.model?.traverse((child) => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:405:15",
      "file": "engine/layers/ModelLayer.ts",
      "line": 405,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.model?.traverse((child) => {",
      "context": {
        "before": [
          "  private storeOriginalMaterials(): void {",
          "    this.originalMaterials.clear();",
          ""
        ],
        "after": [
          "      if (child instanceof THREE.Mesh) {",
          "        this.originalMaterials.set(child, child.material);",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:415:32",
      "file": "engine/layers/ModelLayer.ts",
      "line": 415,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyShadowSettings(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply shadow settings to model",
          "   */"
        ],
        "after": [
          "    this.model?.traverse((child) => {",
          "      if (child instanceof THREE.Mesh) {",
          "        child.castShadow = this.modelData.castShadow;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:416:15",
      "file": "engine/layers/ModelLayer.ts",
      "line": 416,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.model?.traverse((child) => {",
      "context": {
        "before": [
          "   * Apply shadow settings to model",
          "   */",
          "  private applyShadowSettings(): void {"
        ],
        "after": [
          "      if (child instanceof THREE.Mesh) {",
          "        child.castShadow = this.modelData.castShadow;",
          "        child.receiveShadow = this.modelData.receiveShadow;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:429:33",
      "file": "engine/layers/ModelLayer.ts",
      "line": 429,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private calculateBoundingBox(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Calculate and store bounding box",
          "   */"
        ],
        "after": [
          "    if (!this.model) return;",
          "",
          "    const box = new THREE.Box3().setFromObject(this.model);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:451:50",
      "file": "engine/layers/ModelLayer.ts",
      "line": 451,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private setupAnimations(object: THREE.Object3D): void {",
      "context": {
        "before": [
          "  /**",
          "   * Setup animation mixer and actions",
          "   */"
        ],
        "after": [
          "    this.mixer = new THREE.AnimationMixer(object);",
          "",
          "    // Update model data with clip info - ensure animation object exists"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:487:34",
      "file": "engine/layers/ModelLayer.ts",
      "line": 487,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "playAnimation(clipName: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Play an animation clip by name",
          "   */"
        ],
        "after": [
          "    if (!this.mixer) return;",
          "",
          "    const clip = this.animationClips.find((c) => c.name === clipName);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:501:31",
      "file": "engine/layers/ModelLayer.ts",
      "line": 501,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.modelData.animation?.loop ? THREE.LoopRepeat : THREE.LoopOnce,",
      "context": {
        "before": [
          "    // Create and play new action",
          "    this.currentAction = this.mixer.clipAction(clip);",
          "    this.currentAction.setLoop("
        ],
        "after": [
          "      Infinity,",
          "    );",
          "    this.currentAction.play();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:514:18",
      "file": "engine/layers/ModelLayer.ts",
      "line": 514,
      "column": 18,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stopAnimation(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Stop current animation",
          "   */"
        ],
        "after": [
          "    if (this.currentAction) {",
          "      this.currentAction.stop();",
          "      this.currentAction = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:527:33",
      "file": "engine/layers/ModelLayer.ts",
      "line": 527,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnimationTime(time: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set animation time directly (for scrubbing)",
          "   */"
        ],
        "after": [
          "    if (!this.mixer || !this.currentAction) return;",
          "    // Validate time (NaN would corrupt animation state)",
          "    const validTime = Number.isFinite(time) ? Math.max(0, time) : 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:530:30",
      "file": "engine/layers/ModelLayer.ts",
      "line": 530,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validTime = Number.isFinite(time) ? Math.max(0, time) : 0;",
      "context": {
        "before": [
          "  setAnimationTime(time: number): void {",
          "    if (!this.mixer || !this.currentAction) return;",
          "    // Validate time (NaN would corrupt animation state)"
        ],
        "after": [
          "    this.currentAction.time = validTime;",
          "    this.mixer.update(0);",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:538:45",
      "file": "engine/layers/ModelLayer.ts",
      "line": 538,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateAnimation(deltaTime: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update animation mixer",
          "   */"
        ],
        "after": [
          "    if (!this.mixer) return;",
          "",
          "    const speed = this.modelData.animation?.speed ?? 1;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:541:43",
      "file": "engine/layers/ModelLayer.ts",
      "line": 541,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const speed = this.modelData.animation?.speed ?? 1;",
      "context": {
        "before": [
          "  private updateAnimation(deltaTime: number): void {",
          "    if (!this.mixer) return;",
          ""
        ],
        "after": [
          "    this.mixer.update(deltaTime * speed);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:552:57",
      "file": "engine/layers/ModelLayer.ts",
      "line": 552,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyMaterialOverride(override: ModelMaterialOverride): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply material override to all meshes",
          "   */"
        ],
        "after": [
          "    if (!this.model) return;",
          "",
          "    this.model.traverse((child) => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:568:4",
      "file": "engine/layers/ModelLayer.ts",
      "line": 568,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private applyMaterialOverrideToMesh(",
          "    mesh: THREE.Mesh,",
          "    override: ModelMaterialOverride,"
        ],
        "after": [
          "    // Use depth material for depth map export",
          "    if (override.useDepthMaterial) {",
          "      mesh.material = new THREE.MeshDepthMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:634:29",
      "file": "engine/layers/ModelLayer.ts",
      "line": 634,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "restoreOriginalMaterials(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Restore original materials",
          "   */"
        ],
        "after": [
          "    this.originalMaterials.forEach((material, mesh) => {",
          "      mesh.material = material;",
          "    });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:647:36",
      "file": "engine/layers/ModelLayer.ts",
      "line": 647,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateBoundingBoxHelper(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update bounding box helper visibility",
          "   */"
        ],
        "after": [
          "    // Remove existing helper",
          "    if (this.boundingBoxHelper) {",
          "      this.group.remove(this.boundingBoxHelper);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:665:33",
      "file": "engine/layers/ModelLayer.ts",
      "line": 665,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateSkeletonHelper(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update skeleton helper visibility",
          "   */"
        ],
        "after": [
          "    // Remove existing helper",
          "    if (this.skeletonHelper) {",
          "      this.group.remove(this.skeletonHelper);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:698:64",
      "file": "engine/layers/ModelLayer.ts",
      "line": 698,
      "column": 64,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setScale(scale: number | { x: number; y: number; z: number }): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set model scale",
          "   */"
        ],
        "after": [
          "    if (!this.model) return;",
          "",
          "    if (typeof scale === \"number\") {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:703:33",
      "file": "engine/layers/ModelLayer.ts",
      "line": 703,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validScale = Number.isFinite(scale) ? scale : 1;",
      "context": {
        "before": [
          "",
          "    if (typeof scale === \"number\") {",
          "      // Validate scale (NaN would corrupt model transform)"
        ],
        "after": [
          "      this.model.scale.setScalar(validScale);",
          "    } else {",
          "      // Validate all components (NaN would corrupt model transform)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:707:29",
      "file": "engine/layers/ModelLayer.ts",
      "line": 707,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validX = Number.isFinite(scale.x) ? scale.x : 1;",
      "context": {
        "before": [
          "      this.model.scale.setScalar(validScale);",
          "    } else {",
          "      // Validate all components (NaN would corrupt model transform)"
        ],
        "after": [
          "      const validY = Number.isFinite(scale.y) ? scale.y : 1;",
          "      const validZ = Number.isFinite(scale.z) ? scale.z : 1;",
          "      this.model.scale.set(validX, validY, validZ);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:708:29",
      "file": "engine/layers/ModelLayer.ts",
      "line": 708,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validY = Number.isFinite(scale.y) ? scale.y : 1;",
      "context": {
        "before": [
          "    } else {",
          "      // Validate all components (NaN would corrupt model transform)",
          "      const validX = Number.isFinite(scale.x) ? scale.x : 1;"
        ],
        "after": [
          "      const validZ = Number.isFinite(scale.z) ? scale.z : 1;",
          "      this.model.scale.set(validX, validY, validZ);",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:709:29",
      "file": "engine/layers/ModelLayer.ts",
      "line": 709,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validZ = Number.isFinite(scale.z) ? scale.z : 1;",
      "context": {
        "before": [
          "      // Validate all components (NaN would corrupt model transform)",
          "      const validX = Number.isFinite(scale.x) ? scale.x : 1;",
          "      const validY = Number.isFinite(scale.y) ? scale.y : 1;"
        ],
        "after": [
          "      this.model.scale.set(validX, validY, validZ);",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:722:36",
      "file": "engine/layers/ModelLayer.ts",
      "line": 722,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShowBoundingBox(show: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set bounding box visibility",
          "   */"
        ],
        "after": [
          "    this.modelData.showBoundingBox = show;",
          "    this.updateBoundingBoxHelper();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:730:33",
      "file": "engine/layers/ModelLayer.ts",
      "line": 730,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShowSkeleton(show: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set skeleton visibility",
          "   */"
        ],
        "after": [
          "    this.modelData.showSkeleton = show;",
          "    this.updateSkeletonHelper();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:739:22",
      "file": "engine/layers/ModelLayer.ts",
      "line": 739,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFPS(fps: number): void {",
      "context": {
        "before": [
          "   * Set FPS for animation sync",
          "   * @deprecated Use setCompositionFps from BaseLayer instead",
          "   */"
        ],
        "after": [
          "    this.setCompositionFps(fps);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:758:36",
      "file": "engine/layers/ModelLayer.ts",
      "line": 758,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.modelData.animation?.clips ?? [];",
      "context": {
        "before": [
          "   * Get available animation clips",
          "   */",
          "  getAnimationClips(): ModelAnimationClip[] {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:786:43",
      "file": "engine/layers/ModelLayer.ts",
      "line": 786,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Use composition fps for correct animation timing (not hardcoded 30fps)",
          "    const fps = this.compositionFps;",
          "    const layerId = this.id;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:802:33",
      "file": "engine/layers/ModelLayer.ts",
      "line": 802,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.modelData.animation?.time) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Evaluate animation time if keyframed"
        ],
        "after": [
          "      const time = interpolateProperty(",
          "        this.modelData.animation.time,",
          "        frame,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:813:47",
      "file": "engine/layers/ModelLayer.ts",
      "line": 813,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.mixer && this.modelData.animation?.autoPlay) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Update animation mixer (for auto-playing animations)"
        ],
        "after": [
          "      const deltaTime = 1 / this.compositionFps;",
          "      this.updateAnimation(deltaTime);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:826:4",
      "file": "engine/layers/ModelLayer.ts",
      "line": 826,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    if (props.scale !== undefined) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:838:49",
      "file": "engine/layers/ModelLayer.ts",
      "line": 838,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<ModelLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:893:24",
      "file": "engine/layers/ModelLayer.ts",
      "line": 893,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.disposeModel();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:900:25",
      "file": "engine/layers/ModelLayer.ts",
      "line": 900,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeModel(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose model resources",
          "   */"
        ],
        "after": [
          "    // Stop animations",
          "    if (this.mixer) {",
          "      this.mixer.stopAllAction();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ModelLayer.ts:918:15",
      "file": "engine/layers/ModelLayer.ts",
      "line": 918,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.model?.traverse((child) => {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Dispose model geometries and materials"
        ],
        "after": [
          "      if (child instanceof THREE.Mesh) {",
          "        child.geometry.dispose();",
          "        if (Array.isArray(child.material)) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:110:26",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 110,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "compositionId: data?.compositionId ?? \"\",",
      "context": {
        "before": [
          "    const data = layerData.data as NestedCompData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      // Speed map (new naming)",
          "      speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,",
          "      speedMap: data?.speedMap ?? data?.timeRemap,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:112:28",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 112,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,",
      "context": {
        "before": [
          "    return {",
          "      compositionId: data?.compositionId ?? \"\",",
          "      // Speed map (new naming)"
        ],
        "after": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:112:53",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 112,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,",
      "context": {
        "before": [
          "    return {",
          "      compositionId: data?.compositionId ?? \"\",",
          "      // Speed map (new naming)"
        ],
        "after": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:113:21",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 113,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMap: data?.speedMap ?? data?.timeRemap,",
      "context": {
        "before": [
          "      compositionId: data?.compositionId ?? \"\",",
          "      // Speed map (new naming)",
          "      speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,"
        ],
        "after": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:113:39",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 113,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMap: data?.speedMap ?? data?.timeRemap,",
      "context": {
        "before": [
          "      compositionId: data?.compositionId ?? \"\",",
          "      // Speed map (new naming)",
          "      speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,"
        ],
        "after": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:116:13",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 116,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
      "context": {
        "before": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ],
        "after": [
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      flattenTransform: data?.flattenTransform ?? false,",
          "      overrideFrameRate: data?.overrideFrameRate ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:116:39",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 116,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
      "context": {
        "before": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ],
        "after": [
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      flattenTransform: data?.flattenTransform ?? false,",
          "      overrideFrameRate: data?.overrideFrameRate ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:117:22",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 117,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "timeRemap: data?.timeRemap ?? data?.speedMap,",
      "context": {
        "before": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ],
        "after": [
          "      flattenTransform: data?.flattenTransform ?? false,",
          "      overrideFrameRate: data?.overrideFrameRate ?? false,",
          "      frameRate: data?.frameRate,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:117:41",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 117,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "timeRemap: data?.timeRemap ?? data?.speedMap,",
      "context": {
        "before": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ],
        "after": [
          "      flattenTransform: data?.flattenTransform ?? false,",
          "      overrideFrameRate: data?.overrideFrameRate ?? false,",
          "      frameRate: data?.frameRate,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:118:29",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 118,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "flattenTransform: data?.flattenTransform ?? false,",
      "context": {
        "before": [
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
          "      timeRemap: data?.timeRemap ?? data?.speedMap,"
        ],
        "after": [
          "      overrideFrameRate: data?.overrideFrameRate ?? false,",
          "      frameRate: data?.frameRate,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:119:30",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 119,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "overrideFrameRate: data?.overrideFrameRate ?? false,",
      "context": {
        "before": [
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      flattenTransform: data?.flattenTransform ?? false,"
        ],
        "after": [
          "      frameRate: data?.frameRate,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:120:22",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 120,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameRate: data?.frameRate,",
      "context": {
        "before": [
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      flattenTransform: data?.flattenTransform ?? false,",
          "      overrideFrameRate: data?.overrideFrameRate ?? false,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:127:23",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 127,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMesh(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create display mesh",
          "   */"
        ],
        "after": [
          "    // Start with 1x1, will be resized when composition is set",
          "    const geometry = new THREE.PlaneGeometry(1, 1);",
          "    this.material = new THREE.MeshBasicMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:149:53",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 149,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderContext(context: NestedCompRenderContext): void {",
      "context": {
        "before": [
          "   * Set the render context (required for nested comp rendering)",
          "   * Called by LayerManager after creation",
          "   */"
        ],
        "after": [
          "    this.renderContext = context;",
          "",
          "    // Try to load composition"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:159:22",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 159,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFPS(fps: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set parent composition FPS for frame rate conversion",
          "   */"
        ],
        "after": [
          "    // Validate FPS (NaN or <= 0 would break frame calculations)",
          "    this.parentFPS = Number.isFinite(fps) && fps > 0 ? fps : 16;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:161:29",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 161,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.parentFPS = Number.isFinite(fps) && fps > 0 ? fps : 16;",
      "context": {
        "before": [
          "   */",
          "  setFPS(fps: number): void {",
          "    // Validate FPS (NaN or <= 0 would break frame calculations)"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:167:28",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 167,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private loadComposition(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Load and cache the referenced composition",
          "   */"
        ],
        "after": [
          "    if (!this.renderContext || !this.nestedCompData.compositionId) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:188:52",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 188,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private resizeMesh(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Resize mesh to match composition dimensions",
          "   */"
        ],
        "after": [
          "    if (!this.mesh) return;",
          "",
          "    this.mesh.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:215:14",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 215,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(rawNestedFps) && rawNestedFps > 0 ? rawNestedFps : 16;",
      "context": {
        "before": [
          "        ? this.nestedCompData.frameRate",
          "        : this.cachedComposition.settings.fps;",
          "    const nestedFps ="
        ],
        "after": [
          "",
          "    // If speed map is enabled, use that (overrides timeStretch)",
          "    const speedMapEnabled ="
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:229:32",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 229,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validTime = Number.isFinite(remappedTime) ? remappedTime : 0;",
      "context": {
        "before": [
          "        : speedMapProp.value;",
          "",
          "      // Validate remapped time (NaN would break rendering)"
        ],
        "after": [
          "      return Math.floor(validTime * nestedFps);",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:235:32",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 235,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const timeStretch = Number.isFinite(rawTimeStretch) ? rawTimeStretch : 100;",
      "context": {
        "before": [
          "",
          "    // Get layer's timeStretch (100 = normal, 200 = half speed, -100 = reversed)",
          "    const rawTimeStretch = this.layerData.timeStretch ?? 100;"
        ],
        "after": [
          "    const isReversed = timeStretch < 0;",
          "",
          "    // Calculate effective speed: 100% stretch = 1x, 200% = 0.5x, 50% = 2x"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:253:16",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 253,
      "column": 16,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.parentFPS) && this.parentFPS > 0",
      "context": {
        "before": [
          "    ) {",
          "      // Validate parent FPS to prevent division by zero",
          "      const parentFps ="
        ],
        "after": [
          "          ? this.parentFPS",
          "          : 16;",
          "      const childFps ="
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:257:16",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 257,
      "column": 16,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.nestedCompData.frameRate) &&",
      "context": {
        "before": [
          "          ? this.parentFPS",
          "          : 16;",
          "      const childFps ="
        ],
        "after": [
          "        this.nestedCompData.frameRate > 0",
          "          ? this.nestedCompData.frameRate",
          "          : 16;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:273:19",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 273,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(nestedFrame) ? Math.floor(nestedFrame) : 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Final validation - NaN frame would break rendering"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:280:43",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 280,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (",
          "      !this.renderContext ||",
          "      !this.cachedComposition ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:319:4",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 319,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    // Apply opacity to material (opacity is on EvaluatedLayer, not transform)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:325:35",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 325,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOpacity = Number.isFinite(state.opacity) ? state.opacity : 100;",
      "context": {
        "before": [
          "    // Apply opacity to material (opacity is on EvaluatedLayer, not transform)",
          "    // Validate opacity (NaN would corrupt material)",
          "    if (state.opacity !== undefined && this.material) {"
        ],
        "after": [
          "      this.material.opacity = Math.max(0, Math.min(100, validOpacity)) / 100;",
          "      this.material.needsUpdate = true;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:351:40",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 351,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setComposition(compositionId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the source composition",
          "   */"
        ],
        "after": [
          "    this.nestedCompData.compositionId = compositionId;",
          "    this.loadComposition();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:359:39",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 359,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSpeedMapEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable speed map (time remapping)",
          "   */"
        ],
        "after": [
          "    this.nestedCompData.speedMapEnabled = enabled;",
          "    this.nestedCompData.timeRemapEnabled = enabled; // Backwards compatibility",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:365:40",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 365,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTimeRemapEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use setSpeedMapEnabled instead */"
        ],
        "after": [
          "    this.setSpeedMapEnabled(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:372:52",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 372,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSpeedMap(speedMap: AnimatableProperty<number>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set speed map property",
          "   */"
        ],
        "after": [
          "    this.nestedCompData.speedMap = speedMap;",
          "    this.nestedCompData.timeRemap = speedMap; // Backwards compatibility",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:378:54",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 378,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTimeRemap(timeRemap: AnimatableProperty<number>): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use setSpeedMap instead */"
        ],
        "after": [
          "    this.setSpeedMap(timeRemap);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:385:40",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 385,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFlattenTransform(flatten: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable flatten transform",
          "   */"
        ],
        "after": [
          "    this.nestedCompData.flattenTransform = flatten;",
          "    this.isCollapsed = flatten;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:396:48",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 396,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCollapseTransformations(collapse: boolean): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use setFlattenTransform instead */"
        ],
        "after": [
          "    this.setFlattenTransform(collapse);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:519:56",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 519,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrameRateOverride(override: boolean, fps?: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Override frame rate",
          "   */"
        ],
        "after": [
          "    this.nestedCompData.overrideFrameRate = override;",
          "    this.nestedCompData.frameRate = fps;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:528:49",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 528,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  // LAYER UPDATE",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<NestedCompData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NestedCompLayer.ts:593:24",
      "file": "engine/layers/NestedCompLayer.ts",
      "line": 593,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "  // DISPOSAL",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.material) {",
          "      this.material.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:36:20",
      "file": "engine/layers/NormalLayer.ts",
      "line": 36,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetId: data?.assetId ?? null,",
      "context": {
        "before": [
          "  private extractNormalData(layerData: Layer): NormalLayerData {",
          "    const data = layerData.data as Partial<NormalLayerData> | undefined;",
          "    return {"
        ],
        "after": [
          "      visualizationMode: data?.visualizationMode ?? \"rgb\",",
          "      format: data?.format ?? \"opengl\",",
          "      flipX: data?.flipX ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:37:30",
      "file": "engine/layers/NormalLayer.ts",
      "line": 37,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "visualizationMode: data?.visualizationMode ?? \"rgb\",",
      "context": {
        "before": [
          "    const data = layerData.data as Partial<NormalLayerData> | undefined;",
          "    return {",
          "      assetId: data?.assetId ?? null,"
        ],
        "after": [
          "      format: data?.format ?? \"opengl\",",
          "      flipX: data?.flipX ?? false,",
          "      flipY: data?.flipY ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:38:19",
      "file": "engine/layers/NormalLayer.ts",
      "line": 38,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "format: data?.format ?? \"opengl\",",
      "context": {
        "before": [
          "    return {",
          "      assetId: data?.assetId ?? null,",
          "      visualizationMode: data?.visualizationMode ?? \"rgb\","
        ],
        "after": [
          "      flipX: data?.flipX ?? false,",
          "      flipY: data?.flipY ?? false,",
          "      flipZ: data?.flipZ ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:39:18",
      "file": "engine/layers/NormalLayer.ts",
      "line": 39,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "flipX: data?.flipX ?? false,",
      "context": {
        "before": [
          "      assetId: data?.assetId ?? null,",
          "      visualizationMode: data?.visualizationMode ?? \"rgb\",",
          "      format: data?.format ?? \"opengl\","
        ],
        "after": [
          "      flipY: data?.flipY ?? false,",
          "      flipZ: data?.flipZ ?? false,",
          "      arrowDensity: data?.arrowDensity ?? 16,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:40:18",
      "file": "engine/layers/NormalLayer.ts",
      "line": 40,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "flipY: data?.flipY ?? false,",
      "context": {
        "before": [
          "      visualizationMode: data?.visualizationMode ?? \"rgb\",",
          "      format: data?.format ?? \"opengl\",",
          "      flipX: data?.flipX ?? false,"
        ],
        "after": [
          "      flipZ: data?.flipZ ?? false,",
          "      arrowDensity: data?.arrowDensity ?? 16,",
          "      arrowScale: data?.arrowScale ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:41:18",
      "file": "engine/layers/NormalLayer.ts",
      "line": 41,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "flipZ: data?.flipZ ?? false,",
      "context": {
        "before": [
          "      format: data?.format ?? \"opengl\",",
          "      flipX: data?.flipX ?? false,",
          "      flipY: data?.flipY ?? false,"
        ],
        "after": [
          "      arrowDensity: data?.arrowDensity ?? 16,",
          "      arrowScale: data?.arrowScale ?? 1,",
          "      arrowColor: data?.arrowColor ?? \"#00ff00\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:42:25",
      "file": "engine/layers/NormalLayer.ts",
      "line": 42,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "arrowDensity: data?.arrowDensity ?? 16,",
      "context": {
        "before": [
          "      flipX: data?.flipX ?? false,",
          "      flipY: data?.flipY ?? false,",
          "      flipZ: data?.flipZ ?? false,"
        ],
        "after": [
          "      arrowScale: data?.arrowScale ?? 1,",
          "      arrowColor: data?.arrowColor ?? \"#00ff00\",",
          "      lightDirection: data?.lightDirection ?? { x: 0.5, y: 0.5, z: 1.0 },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:43:23",
      "file": "engine/layers/NormalLayer.ts",
      "line": 43,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "arrowScale: data?.arrowScale ?? 1,",
      "context": {
        "before": [
          "      flipY: data?.flipY ?? false,",
          "      flipZ: data?.flipZ ?? false,",
          "      arrowDensity: data?.arrowDensity ?? 16,"
        ],
        "after": [
          "      arrowColor: data?.arrowColor ?? \"#00ff00\",",
          "      lightDirection: data?.lightDirection ?? { x: 0.5, y: 0.5, z: 1.0 },",
          "      lightIntensity: data?.lightIntensity ?? 1.0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:44:23",
      "file": "engine/layers/NormalLayer.ts",
      "line": 44,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "arrowColor: data?.arrowColor ?? \"#00ff00\",",
      "context": {
        "before": [
          "      flipZ: data?.flipZ ?? false,",
          "      arrowDensity: data?.arrowDensity ?? 16,",
          "      arrowScale: data?.arrowScale ?? 1,"
        ],
        "after": [
          "      lightDirection: data?.lightDirection ?? { x: 0.5, y: 0.5, z: 1.0 },",
          "      lightIntensity: data?.lightIntensity ?? 1.0,",
          "      ambientIntensity: data?.ambientIntensity ?? 0.2,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:45:27",
      "file": "engine/layers/NormalLayer.ts",
      "line": 45,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lightDirection: data?.lightDirection ?? { x: 0.5, y: 0.5, z: 1.0 },",
      "context": {
        "before": [
          "      arrowDensity: data?.arrowDensity ?? 16,",
          "      arrowScale: data?.arrowScale ?? 1,",
          "      arrowColor: data?.arrowColor ?? \"#00ff00\","
        ],
        "after": [
          "      lightIntensity: data?.lightIntensity ?? 1.0,",
          "      ambientIntensity: data?.ambientIntensity ?? 0.2,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:46:27",
      "file": "engine/layers/NormalLayer.ts",
      "line": 46,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lightIntensity: data?.lightIntensity ?? 1.0,",
      "context": {
        "before": [
          "      arrowScale: data?.arrowScale ?? 1,",
          "      arrowColor: data?.arrowColor ?? \"#00ff00\",",
          "      lightDirection: data?.lightDirection ?? { x: 0.5, y: 0.5, z: 1.0 },"
        ],
        "after": [
          "      ambientIntensity: data?.ambientIntensity ?? 0.2,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:47:29",
      "file": "engine/layers/NormalLayer.ts",
      "line": 47,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "ambientIntensity: data?.ambientIntensity ?? 0.2,",
      "context": {
        "before": [
          "      arrowColor: data?.arrowColor ?? \"#00ff00\",",
          "      lightDirection: data?.lightDirection ?? { x: 0.5, y: 0.5, z: 1.0 },",
          "      lightIntensity: data?.lightIntensity ?? 1.0,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:51:23",
      "file": "engine/layers/NormalLayer.ts",
      "line": 51,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMesh(): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    const geometry = new THREE.PlaneGeometry(1, 1, 1, 1);",
          "",
          "    this.material = new THREE.ShaderMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:63:59",
      "file": "engine/layers/NormalLayer.ts",
      "line": 63,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "Number.isFinite(this.normalData.lightDirection?.x)",
      "context": {
        "before": [
          "        lightDirection: {",
          "          value: new THREE.Vector3(",
          "            // Validate light direction (NaN would corrupt lighting calculations after normalize())"
        ],
        "after": [
          "              ? this.normalData.lightDirection.x",
          "              : 0.5,",
          "            Number.isFinite(this.normalData.lightDirection?.y)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:63:20",
      "file": "engine/layers/NormalLayer.ts",
      "line": 63,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.normalData.lightDirection?.x)",
      "context": {
        "before": [
          "        lightDirection: {",
          "          value: new THREE.Vector3(",
          "            // Validate light direction (NaN would corrupt lighting calculations after normalize())"
        ],
        "after": [
          "              ? this.normalData.lightDirection.x",
          "              : 0.5,",
          "            Number.isFinite(this.normalData.lightDirection?.y)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:66:59",
      "file": "engine/layers/NormalLayer.ts",
      "line": 66,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "Number.isFinite(this.normalData.lightDirection?.y)",
      "context": {
        "before": [
          "            Number.isFinite(this.normalData.lightDirection?.x)",
          "              ? this.normalData.lightDirection.x",
          "              : 0.5,"
        ],
        "after": [
          "              ? this.normalData.lightDirection.y",
          "              : 0.5,",
          "            Number.isFinite(this.normalData.lightDirection?.z)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:66:20",
      "file": "engine/layers/NormalLayer.ts",
      "line": 66,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.normalData.lightDirection?.y)",
      "context": {
        "before": [
          "            Number.isFinite(this.normalData.lightDirection?.x)",
          "              ? this.normalData.lightDirection.x",
          "              : 0.5,"
        ],
        "after": [
          "              ? this.normalData.lightDirection.y",
          "              : 0.5,",
          "            Number.isFinite(this.normalData.lightDirection?.z)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:69:59",
      "file": "engine/layers/NormalLayer.ts",
      "line": 69,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "Number.isFinite(this.normalData.lightDirection?.z)",
      "context": {
        "before": [
          "            Number.isFinite(this.normalData.lightDirection?.y)",
          "              ? this.normalData.lightDirection.y",
          "              : 0.5,"
        ],
        "after": [
          "              ? this.normalData.lightDirection.z",
          "              : 1.0,",
          "          ).normalize(),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:69:20",
      "file": "engine/layers/NormalLayer.ts",
      "line": 69,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.normalData.lightDirection?.z)",
      "context": {
        "before": [
          "            Number.isFinite(this.normalData.lightDirection?.y)",
          "              ? this.normalData.lightDirection.y",
          "              : 0.5,"
        ],
        "after": [
          "              ? this.normalData.lightDirection.z",
          "              : 1.0,",
          "          ).normalize(),"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:75:25",
      "file": "engine/layers/NormalLayer.ts",
      "line": 75,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "value: Number.isFinite(this.normalData.lightIntensity)",
      "context": {
        "before": [
          "          ).normalize(),",
          "        },",
          "        lightIntensity: {"
        ],
        "after": [
          "            ? this.normalData.lightIntensity",
          "            : 1.0,",
          "        },"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:80:25",
      "file": "engine/layers/NormalLayer.ts",
      "line": 80,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "value: Number.isFinite(this.normalData.ambientIntensity)",
      "context": {
        "before": [
          "            : 1.0,",
          "        },",
          "        ambientIntensity: {"
        ],
        "after": [
          "            ? this.normalData.ambientIntensity",
          "            : 0.2,",
          "        },"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:169:37",
      "file": "engine/layers/NormalLayer.ts",
      "line": 169,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTexture(texture: THREE.Texture): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.texture = texture;",
          "    if (this.material) {",
          "      this.material.uniforms.normalMap.value = texture;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:180:44",
      "file": "engine/layers/NormalLayer.ts",
      "line": 180,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(_frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!this.material) return;",
          "",
          "    // Update uniforms from data"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:194:25",
      "file": "engine/layers/NormalLayer.ts",
      "line": 194,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const lx = Number.isFinite(this.normalData.lightDirection.x)",
      "context": {
        "before": [
          "",
          "    if (this.normalData.lightDirection) {",
          "      // Validate light direction values (NaN would corrupt normalize() result)"
        ],
        "after": [
          "        ? this.normalData.lightDirection.x",
          "        : 0.5;",
          "      const ly = Number.isFinite(this.normalData.lightDirection.y)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:197:25",
      "file": "engine/layers/NormalLayer.ts",
      "line": 197,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const ly = Number.isFinite(this.normalData.lightDirection.y)",
      "context": {
        "before": [
          "      const lx = Number.isFinite(this.normalData.lightDirection.x)",
          "        ? this.normalData.lightDirection.x",
          "        : 0.5;"
        ],
        "after": [
          "        ? this.normalData.lightDirection.y",
          "        : 0.5;",
          "      const lz = Number.isFinite(this.normalData.lightDirection.z)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:200:25",
      "file": "engine/layers/NormalLayer.ts",
      "line": 200,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const lz = Number.isFinite(this.normalData.lightDirection.z)",
      "context": {
        "before": [
          "      const ly = Number.isFinite(this.normalData.lightDirection.y)",
          "        ? this.normalData.lightDirection.y",
          "        : 0.5;"
        ],
        "after": [
          "        ? this.normalData.lightDirection.z",
          "        : 1.0;",
          "      this.material.uniforms.lightDirection.value.set(lx, ly, lz).normalize();"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:207:49",
      "file": "engine/layers/NormalLayer.ts",
      "line": 207,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<NormalLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/NormalLayer.ts:215:24",
      "file": "engine/layers/NormalLayer.ts",
      "line": 215,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.texture) {",
          "      this.texture.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:234:54",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 234,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "emissionThreshold: emitter.depthMapEmission?.depthMin ?? 0.1,",
      "context": {
        "before": [
          "        // Image data must be set via setEmitterImageData() at runtime",
          "        return {",
          "          type: \"depthEdge\", // Use depth edge emission (emits from depth discontinuities)"
        ],
        "after": [
          "          // imageData and depthData will be provided at runtime",
          "        };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:243:50",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 243,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "emissionThreshold: emitter.maskEmission?.threshold ?? 0.5,",
      "context": {
        "before": [
          "        // Image data must be set via setEmitterImageData() at runtime",
          "        return {",
          "          type: \"image\","
        ],
        "after": [
          "          // imageData will be provided at runtime",
          "        };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:270:36",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 270,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "config.maxParticles = Number.isFinite(rawMaxParticles)",
      "context": {
        "before": [
          "      // Cap maxParticles to prevent GPU memory exhaustion (1M max)",
          "      const MAX_PARTICLES = 1000000;",
          "      const rawMaxParticles = data.systemConfig.maxParticles ?? 100000;"
        ],
        "after": [
          "        ? Math.max(1, Math.min(MAX_PARTICLES, rawMaxParticles))",
          "        : 100000;",
          "      config.timeScale = 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:535:22",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 535,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data.flocking?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Convert flocking configuration"
        ],
        "after": [
          "      // Helper to validate numeric params (NaN would corrupt flocking behavior)",
          "      const safeNum = (val: number | undefined, def: number) =>",
          "        Number.isFinite(val) ? val! : def;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:538:16",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 538,
      "column": 16,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(val) ? val! : def;",
      "context": {
        "before": [
          "    if (data.flocking?.enabled) {",
          "      // Helper to validate numeric params (NaN would corrupt flocking behavior)",
          "      const safeNum = (val: number | undefined, def: number) =>"
        ],
        "after": [
          "",
          "      config.flocking = {",
          "        enabled: true,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:555:23",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 555,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data.collision?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Store collision configuration for initialization after GPU setup"
        ],
        "after": [
          "      this.pendingCollisionConfig = {",
          "        enabled: true,",
          "        particleCollision: data.collision.particleCollision ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:606:41",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 606,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data.renderOptions.connections?.enabled) {",
      "context": {
        "before": [
          "            : \"circle\";",
          "",
          "      // Connections - wire UI settings to GPU config"
        ],
        "after": [
          "        // Store connection config for initialization after GPU setup",
          "        // Note: ConnectionRenderConfig.color is already in 0-1 RGB range (per type definition)",
          "        this.pendingConnectionConfig = {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:739:56",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 739,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeWithRenderer(renderer: THREE.WebGLRenderer): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize the particle system with a WebGL renderer",
          "   */"
        ],
        "after": [
          "    if (this.initialized) return;",
          "",
          "    this.rendererRef = renderer;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:785:31",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 785,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.pendingGlowConfig?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Initialize glow effect and add glow mesh"
        ],
        "after": [
          "      this.particleSystem.initializeGlow(this.pendingGlowConfig);",
          "      const glowMesh = this.particleSystem.getGlowMesh();",
          "      if (glowMesh) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:796:36",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 796,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.pendingCollisionConfig?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Initialize collision detection"
        ],
        "after": [
          "      this.particleSystem.initializeCollisions(this.pendingCollisionConfig);",
          "      this.pendingCollisionConfig = null;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:802:33",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 802,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.pendingShadowConfig?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Initialize shadow settings"
        ],
        "after": [
          "      this.particleSystem.updateShadowConfig({",
          "        castShadows: this.pendingShadowConfig.castShadows,",
          "        receiveShadows: this.pendingShadowConfig.receiveShadows,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:827:28",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 827,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private storeBaseValues(): void {",
      "context": {
        "before": [
          "   * Store base emitter and force field values for audio reactivity",
          "   * This prevents compounding when audio values are applied each frame",
          "   */"
        ],
        "after": [
          "    const config = this.particleSystem.getConfig();",
          "",
          "    // Store emitter base values"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:874:5",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 874,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    enabled?: boolean;",
          "    radius?: number;",
          "    intensity?: number;"
        ],
        "after": [
          "    this.particleSystem.setGlow(config);",
          "    if (this.glowConfig) {",
          "      Object.assign(this.glowConfig, config);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:884:45",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 884,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderer(renderer: THREE.WebGLRenderer): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set renderer for lazy initialization",
          "   */"
        ],
        "after": [
          "    this.rendererRef = renderer;",
          "    if (!this.initialized) {",
          "      this.initializeWithRenderer(renderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:896:97",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 896,
      "column": 97,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSplineProvider(provider: import(\"../particles/ParticleEmitterLogic\").SplineProvider | null): void {",
      "context": {
        "before": [
          "   * This allows emitters with shape='spline' to emit particles along spline paths",
          "   * @param provider - Function that queries spline positions",
          "   */"
        ],
        "after": [
          "    this.splineProvider = provider;",
          "    this.particleSystem.setSplineProvider(provider);",
          "  }"
        ]
      },
      "typeInfo": "Function type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:905:45",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 905,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateShadowsFromScene(scene: THREE.Scene): void {",
      "context": {
        "before": [
          "   * Update shadow maps from scene lights",
          "   * Call this when the layer is added to a scene with shadow-casting lights",
          "   */"
        ],
        "after": [
          "    // Find first shadow-casting light in scene",
          "    scene.traverse((obj) => {",
          "      if (obj instanceof THREE.DirectionalLight ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:911:41",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 911,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (obj.castShadow && obj.shadow?.map?.texture) {",
      "context": {
        "before": [
          "      if (obj instanceof THREE.DirectionalLight ||",
          "          obj instanceof THREE.SpotLight ||",
          "          obj instanceof THREE.PointLight) {"
        ],
        "after": [
          "          this.particleSystem.updateShadowFromLight(obj);",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:911:46",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 911,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (obj.castShadow && obj.shadow?.map?.texture) {",
      "context": {
        "before": [
          "      if (obj instanceof THREE.DirectionalLight ||",
          "          obj instanceof THREE.SpotLight ||",
          "          obj instanceof THREE.PointLight) {"
        ],
        "after": [
          "          this.particleSystem.updateShadowFromLight(obj);",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:921:22",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 921,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFPS(fps: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set composition FPS for accurate time calculation",
          "   */"
        ],
        "after": [
          "    // Validate fps (NaN would break time calculations and cache simulation)",
          "    this.fps = Number.isFinite(fps) && fps > 0 ? fps : 16;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:923:23",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 923,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.fps = Number.isFinite(fps) && fps > 0 ? fps : 16;",
      "context": {
        "before": [
          "   */",
          "  setFPS(fps: number): void {",
          "    // Validate fps (NaN would break time calculations and cache simulation)"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:945:61",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 945,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateEmitter(id: string, updates: Partial<EmitterConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update an emitter",
          "   */"
        ],
        "after": [
          "    this.particleSystem.updateEmitter(id, updates);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:952:28",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 952,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeEmitter(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove an emitter",
          "   */"
        ],
        "after": [
          "    this.particleSystem.removeEmitter(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:978:67",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 978,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateForceField(id: string, updates: Partial<ForceFieldConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update a force field",
          "   */"
        ],
        "after": [
          "    this.particleSystem.updateForceField(id, updates);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:985:31",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 985,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeForceField(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a force field",
          "   */"
        ],
        "after": [
          "    this.particleSystem.removeForceField(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:996:56",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 996,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioFeature(feature: AudioFeature, value: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set audio feature value for reactivity",
          "   */"
        ],
        "after": [
          "    this.particleSystem.setAudioFeature(feature, value);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1003:16",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1003,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "triggerBeat(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Trigger a beat event (causes burst on beat-enabled emitters)",
          "   */"
        ],
        "after": [
          "    this.particleSystem.triggerBeat();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1010:35",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1010,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "triggerBurst(emitterId?: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Trigger a burst emission",
          "   */"
        ],
        "after": [
          "    this.particleSystem.triggerBurst(emitterId);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1026:4",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1026,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    emitterId: string,",
          "    imageData: ImageData,",
          "    depthData?: Float32Array,"
        ],
        "after": [
          "    const emitter = this.particleSystem.getEmitter(emitterId);",
          "    if (emitter) {",
          "      // Update the shape config with the new image data"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1044:26",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1044,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "step(deltaTime: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Step the particle simulation",
          "   */"
        ],
        "after": [
          "    if (!this.initialized) return;",
          "",
          "    this.particleSystem.step(deltaTime);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1067:10",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1067,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "   * Reset the particle system",
          "   * DETERMINISM: Resets to initial state with original seed",
          "   */"
        ],
        "after": [
          "    this.particleSystem.reset();",
          "    this.lastEvaluatedFrame = -1;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1075:15",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1075,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear the particle cache (used when user wants to free memory)",
          "   */"
        ],
        "after": [
          "    this.particleSystem.clearCache();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1097:31",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1097,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validStart = Number.isFinite(startFrame)",
      "context": {
        "before": [
          "    onProgress?: (current: number, total: number) => void,",
          "  ): Promise<void> {",
          "    // Validate frame bounds (NaN/Infinity would cause infinite loop or no-op)"
        ],
        "after": [
          "      ? Math.max(0, Math.floor(startFrame))",
          "      : 0;",
          "    const validEnd = Number.isFinite(endFrame)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1100:29",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1100,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validEnd = Number.isFinite(endFrame)",
      "context": {
        "before": [
          "    const validStart = Number.isFinite(startFrame)",
          "      ? Math.max(0, Math.floor(startFrame))",
          "      : 0;"
        ],
        "after": [
          "      ? Math.floor(endFrame)",
          "      : validStart;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1130:37",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1130,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCacheInterval(interval: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the cache interval (frames between cached snapshots)",
          "   */"
        ],
        "after": [
          "    this.particleSystem.setCacheInterval(interval);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1177:26",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1177,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.particleData?.speedMapEnabled && this.particleData.speedMap?.animated) {",
      "context": {
        "before": [
          "   */",
          "  private calculateRemappedFrame(compositionFrame: number): number {",
          "    // If speed map is enabled, use that"
        ],
        "after": [
          "      const remappedTime = this.particleEvaluator.evaluate(",
          "        this.particleData.speedMap,",
          "        compositionFrame,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1177:73",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1177,
      "column": 73,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.particleData?.speedMapEnabled && this.particleData.speedMap?.animated) {",
      "context": {
        "before": [
          "   */",
          "  private calculateRemappedFrame(compositionFrame: number): number {",
          "    // If speed map is enabled, use that"
        ],
        "after": [
          "      const remappedTime = this.particleEvaluator.evaluate(",
          "        this.particleData.speedMap,",
          "        compositionFrame,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1183:32",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1183,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validTime = Number.isFinite(remappedTime) ? remappedTime : 0;",
      "context": {
        "before": [
          "        compositionFrame,",
          "      );",
          "      // Validate remapped time (NaN would break simulation)"
        ],
        "after": [
          "      // Convert time to frame (speed map is in seconds)",
          "      return Math.floor(validTime * this.fps);",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1190:32",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1190,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const timeStretch = Number.isFinite(rawTimeStretch) ? rawTimeStretch : 100;",
      "context": {
        "before": [
          "",
          "    // Get layer's timeStretch if available (100 = normal, 200 = half speed, -100 = reversed)",
          "    const rawTimeStretch = this.layerData.timeStretch ?? 100;"
        ],
        "after": [
          "    const isReversed = timeStretch < 0;",
          "",
          "    // Calculate effective speed: 100% stretch = 1x, 200% = 0.5x, 50% = 2x"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1204:40",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1204,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (isReversed && this.particleData?.systemConfig) {",
      "context": {
        "before": [
          "    let simulationFrame = Math.floor(relativeFrame * stretchFactor);",
          "",
          "    // Handle reversed playback"
        ],
        "after": [
          "      // For reversed particles, simulate to max then play backwards",
          "      // This requires a different approach - simulate fully then index backwards",
          "      const maxFrames = this.particleData.systemConfig.maxParticles > 0 ? 300 : 0; // Reasonable max"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1212:19",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1212,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(simulationFrame) && simulationFrame >= 0 ? simulationFrame : 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Final validation - NaN frame would break simulation"
        ],
        "after": [
          "  }",
          "",
          "  protected onEvaluateFrame(frame: number): void {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1215:43",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1215,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "    return Number.isFinite(simulationFrame) && simulationFrame >= 0 ? simulationFrame : 0;",
          "  }",
          ""
        ],
        "after": [
          "    // Calculate remapped frame for time remapping support",
          "    const simulationFrame = this.calculateRemappedFrame(frame);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1250:4",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1250,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    // ParticleLayer needs to step the simulation for the current frame",
          "    // The evaluated state includes the frame number for deterministic simulation",
          "    const frame = state.frame ?? 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1276:33",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1276,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "evaluateAtFrame(frame: number): void {",
      "context": {
        "before": [
          "   * DETERMINISM: Returns identical results regardless of evaluation order",
          "   * Uses frame caching for performance",
          "   */"
        ],
        "after": [
          "    // Use the caching system for efficient frame evaluation",
          "    this.particleSystem.simulateToFrame(frame, this.fps);",
          "    this.lastEvaluatedFrame = frame;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1286:39",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1286,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyEmissionRateModifiers(): void {",
      "context": {
        "before": [
          "   * Apply emission rate modifiers BEFORE simulation step.",
          "   * Emission rate must be set before step() because emitParticles() uses it during step.",
          "   */"
        ],
        "after": [
          "    const layerEmissionRate = this.getAudioReactiveValue(",
          "      \"particle.emissionRate\",",
          "    );"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1297:60",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1297,
      "column": 60,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const emitterMods = this.currentEmitterAudioModifiers?.get(emitter.id);",
      "context": {
        "before": [
          "      if (!baseValues) continue;",
          "",
          "      // Get emitter-specific audio modifiers (may have different emission rate multiplier)"
        ],
        "after": [
          "      const emissionRateMod = emitterMods?.emissionRate ?? layerEmissionRate;",
          "",
          "      if (emissionRateMod !== 0) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1298:42",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1298,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const emissionRateMod = emitterMods?.emissionRate ?? layerEmissionRate;",
      "context": {
        "before": [
          "",
          "      // Get emitter-specific audio modifiers (may have different emission rate multiplier)",
          "      const emitterMods = this.currentEmitterAudioModifiers?.get(emitter.id);"
        ],
        "after": [
          "",
          "      if (emissionRateMod !== 0) {",
          "        // Modulate emission rate: base * (0.5 + mod) for range 0.5x to 1.5x"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1319:33",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1319,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyAudioReactivity(): void {",
      "context": {
        "before": [
          "   * Uses per-emitter audio modifiers when targetEmitterId is specified.",
          "   * NOTE: Emission rate is handled separately in applyEmissionRateModifiers() BEFORE simulation",
          "   */"
        ],
        "after": [
          "    // Layer-level audio values (for emitters without specific targeting)",
          "    const layerSpeed = this.getAudioReactiveValue(\"particle.speed\");",
          "    const layerSize = this.getAudioReactiveValue(\"particle.size\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1336:60",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1336,
      "column": 60,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const emitterMods = this.currentEmitterAudioModifiers?.get(emitter.id);",
      "context": {
        "before": [
          "      if (!baseValues) continue;",
          "",
          "      // Get emitter-specific modifiers (allows different audio response per emitter)"
        ],
        "after": [
          "",
          "      // Use emitter-specific values if available, otherwise fall back to layer-level",
          "      const speed = emitterMods?.speed ?? layerSpeed;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1339:32",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1339,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const speed = emitterMods?.speed ?? layerSpeed;",
      "context": {
        "before": [
          "      const emitterMods = this.currentEmitterAudioModifiers?.get(emitter.id);",
          "",
          "      // Use emitter-specific values if available, otherwise fall back to layer-level"
        ],
        "after": [
          "      const size = emitterMods?.size ?? layerSize;",
          "",
          "      // Speed modulation (0.5 base + audio value for range 0.5x to 1.5x)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1340:31",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1340,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const size = emitterMods?.size ?? layerSize;",
      "context": {
        "before": [
          "",
          "      // Use emitter-specific values if available, otherwise fall back to layer-level",
          "      const speed = emitterMods?.speed ?? layerSpeed;"
        ],
        "after": [
          "",
          "      // Speed modulation (0.5 base + audio value for range 0.5x to 1.5x)",
          "      if (speed !== 0) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1383:49",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1383,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    // This is handled by the audio system calling triggerBeat() externally",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as ParticleLayerData | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1423:24",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1423,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.particleSystem.dispose();",
          "    this.disposeGizmos();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1435:17",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1435,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "createGizmos(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create visual gizmos for all emitters and force fields",
          "   */"
        ],
        "after": [
          "    this.disposeGizmos();",
          "",
          "    const config = this.particleSystem.getConfig();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1454:53",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1454,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createEmitterGizmo(emitter: EmitterConfig): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create a visual gizmo for an emitter",
          "   */"
        ],
        "after": [
          "    const gizmo = new THREE.Group();",
          "    gizmo.name = `emitter_gizmo_${emitter.id}`;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1530:32",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1530,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "emitter.shape.boxSize?.x ?? 100,",
      "context": {
        "before": [
          "      case \"box\": {",
          "        // Box emitter: wireframe box",
          "        const boxGeom = new THREE.BoxGeometry("
        ],
        "after": [
          "          emitter.shape.boxSize?.y ?? 100,",
          "          emitter.shape.boxSize?.z ?? 100,",
          "        );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1531:32",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1531,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "emitter.shape.boxSize?.y ?? 100,",
      "context": {
        "before": [
          "        // Box emitter: wireframe box",
          "        const boxGeom = new THREE.BoxGeometry(",
          "          emitter.shape.boxSize?.x ?? 100,"
        ],
        "after": [
          "          emitter.shape.boxSize?.z ?? 100,",
          "        );",
          "        const boxMat = new THREE.MeshBasicMaterial({"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1532:32",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1532,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "emitter.shape.boxSize?.z ?? 100,",
      "context": {
        "before": [
          "        const boxGeom = new THREE.BoxGeometry(",
          "          emitter.shape.boxSize?.x ?? 100,",
          "          emitter.shape.boxSize?.y ?? 100,"
        ],
        "after": [
          "        );",
          "        const boxMat = new THREE.MeshBasicMaterial({",
          "          color: 0x00ff88,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1630:57",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1630,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createForceFieldGizmo(field: ForceFieldConfig): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create a visual gizmo for a force field",
          "   */"
        ],
        "after": [
          "    const gizmo = new THREE.Group();",
          "    gizmo.name = `forcefield_gizmo_${field.id}`;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1785:25",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1785,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateGizmoPositions(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update gizmo positions from current config",
          "   */"
        ],
        "after": [
          "    const config = this.particleSystem.getConfig();",
          "",
          "    for (const emitter of config.emitters) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1814:44",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1814,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEmitterGizmosVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set emitter gizmo visibility",
          "   */"
        ],
        "after": [
          "    this.showEmitterGizmos = visible;",
          "    for (const gizmo of this.emitterGizmos.values()) {",
          "      gizmo.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1824:47",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1824,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setForceFieldGizmosVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set force field gizmo visibility",
          "   */"
        ],
        "after": [
          "    this.showForceFieldGizmos = visible;",
          "    for (const gizmo of this.forceFieldGizmos.values()) {",
          "      gizmo.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1834:26",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1834,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeGizmos(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all gizmos",
          "   */"
        ],
        "after": [
          "    // Dispose emitter gizmos",
          "    for (const gizmo of this.emitterGizmos.values()) {",
          "      this.group.remove(gizmo);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1911:4",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1911,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    floorY: number = 1.0,",
          "    compWidth: number = 1920,",
          "    compHeight: number = 1080,"
        ],
        "after": [
          "    // Dispose existing",
          "    if (this.horizonLine) {",
          "      this.group.remove(this.horizonLine);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1955:4",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1955,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    compHeight: number = 1080,",
          "    gridSize: number = 100,",
          "    depth: number = 500,"
        ],
        "after": [
          "    // Validate gridSize to prevent infinite loop",
          "    const safeGridSize = Number.isFinite(gridSize) && gridSize > 0 ? gridSize : 100;",
          "    const safeDepth = Number.isFinite(depth) && depth > 0 ? depth : 500;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1957:33",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1957,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeGridSize = Number.isFinite(gridSize) && gridSize > 0 ? gridSize : 100;",
      "context": {
        "before": [
          "    depth: number = 500,",
          "  ): void {",
          "    // Validate gridSize to prevent infinite loop"
        ],
        "after": [
          "    const safeDepth = Number.isFinite(depth) && depth > 0 ? depth : 500;",
          "    const safeCompWidth = Number.isFinite(compWidth) && compWidth > 0 ? compWidth : 1920;",
          "    const safeCompHeight = Number.isFinite(compHeight) && compHeight > 0 ? compHeight : 1080;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1958:30",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1958,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDepth = Number.isFinite(depth) && depth > 0 ? depth : 500;",
      "context": {
        "before": [
          "  ): void {",
          "    // Validate gridSize to prevent infinite loop",
          "    const safeGridSize = Number.isFinite(gridSize) && gridSize > 0 ? gridSize : 100;"
        ],
        "after": [
          "    const safeCompWidth = Number.isFinite(compWidth) && compWidth > 0 ? compWidth : 1920;",
          "    const safeCompHeight = Number.isFinite(compHeight) && compHeight > 0 ? compHeight : 1080;",
          "    "
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1959:34",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1959,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeCompWidth = Number.isFinite(compWidth) && compWidth > 0 ? compWidth : 1920;",
      "context": {
        "before": [
          "    // Validate gridSize to prevent infinite loop",
          "    const safeGridSize = Number.isFinite(gridSize) && gridSize > 0 ? gridSize : 100;",
          "    const safeDepth = Number.isFinite(depth) && depth > 0 ? depth : 500;"
        ],
        "after": [
          "    const safeCompHeight = Number.isFinite(compHeight) && compHeight > 0 ? compHeight : 1080;",
          "    ",
          "    // Dispose existing"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:1960:35",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 1960,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeCompHeight = Number.isFinite(compHeight) && compHeight > 0 ? compHeight : 1080;",
      "context": {
        "before": [
          "    const safeGridSize = Number.isFinite(gridSize) && gridSize > 0 ? gridSize : 100;",
          "    const safeDepth = Number.isFinite(depth) && depth > 0 ? depth : 500;",
          "    const safeCompWidth = Number.isFinite(compWidth) && compWidth > 0 ? compWidth : 1920;"
        ],
        "after": [
          "    ",
          "    // Dispose existing",
          "    if (this.particleGrid) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:2030:43",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 2030,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "createParticleAxis(length: number = 200): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create particle space axis (CC Particle World style)",
          "   */"
        ],
        "after": [
          "    // Dispose existing",
          "    if (this.particleAxis) {",
          "      this.group.remove(this.particleAxis);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:2122:42",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 2122,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setHorizonLineVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Toggle horizon line visibility",
          "   */"
        ],
        "after": [
          "    this.showHorizonLine = visible;",
          "    if (this.horizonLine) {",
          "      this.horizonLine.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:2132:43",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 2132,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setParticleGridVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Toggle particle grid visibility",
          "   */"
        ],
        "after": [
          "    this.showParticleGrid = visible;",
          "    if (this.particleGrid) {",
          "      this.particleGrid.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:2142:43",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 2142,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setParticleAxisVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Toggle particle axis visibility",
          "   */"
        ],
        "after": [
          "    this.showParticleAxis = visible;",
          "    if (this.particleAxis) {",
          "      this.particleAxis.visible = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ParticleLayer.ts:2152:63",
      "file": "engine/layers/ParticleLayer.ts",
      "line": 2152,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateHorizonLine(floorY: number, compHeight: number = 1080): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update horizon line position when floor Y changes",
          "   */"
        ],
        "after": [
          "    if (this.horizonLine) {",
          "      const y = -(floorY * compHeight - compHeight / 2);",
          "      const positions = this.horizonLine.geometry.attributes.position;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:82:26",
      "file": "engine/layers/PathLayer.ts",
      "line": 82,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "controlPoints: data?.controlPoints ?? [],",
      "context": {
        "before": [
          "    const data = layerData.data as PathLayerData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      closed: data?.closed ?? false,",
          "      pathData: data?.pathData ?? \"\",",
          "      showGuide: data?.showGuide ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:83:19",
      "file": "engine/layers/PathLayer.ts",
      "line": 83,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "closed: data?.closed ?? false,",
      "context": {
        "before": [
          "",
          "    return {",
          "      controlPoints: data?.controlPoints ?? [],"
        ],
        "after": [
          "      pathData: data?.pathData ?? \"\",",
          "      showGuide: data?.showGuide ?? true,",
          "      guideColor: data?.guideColor ?? \"#00FFFF\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:84:21",
      "file": "engine/layers/PathLayer.ts",
      "line": 84,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathData: data?.pathData ?? \"\",",
      "context": {
        "before": [
          "    return {",
          "      controlPoints: data?.controlPoints ?? [],",
          "      closed: data?.closed ?? false,"
        ],
        "after": [
          "      showGuide: data?.showGuide ?? true,",
          "      guideColor: data?.guideColor ?? \"#00FFFF\",",
          "      guideDashPattern: data?.guideDashPattern ?? [10, 5],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:85:22",
      "file": "engine/layers/PathLayer.ts",
      "line": 85,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "showGuide: data?.showGuide ?? true,",
      "context": {
        "before": [
          "      controlPoints: data?.controlPoints ?? [],",
          "      closed: data?.closed ?? false,",
          "      pathData: data?.pathData ?? \"\","
        ],
        "after": [
          "      guideColor: data?.guideColor ?? \"#00FFFF\",",
          "      guideDashPattern: data?.guideDashPattern ?? [10, 5],",
          "      animatedControlPoints: data?.animatedControlPoints,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:86:23",
      "file": "engine/layers/PathLayer.ts",
      "line": 86,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "guideColor: data?.guideColor ?? \"#00FFFF\",",
      "context": {
        "before": [
          "      closed: data?.closed ?? false,",
          "      pathData: data?.pathData ?? \"\",",
          "      showGuide: data?.showGuide ?? true,"
        ],
        "after": [
          "      guideDashPattern: data?.guideDashPattern ?? [10, 5],",
          "      animatedControlPoints: data?.animatedControlPoints,",
          "      animated: data?.animated,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:87:29",
      "file": "engine/layers/PathLayer.ts",
      "line": 87,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "guideDashPattern: data?.guideDashPattern ?? [10, 5],",
      "context": {
        "before": [
          "      pathData: data?.pathData ?? \"\",",
          "      showGuide: data?.showGuide ?? true,",
          "      guideColor: data?.guideColor ?? \"#00FFFF\","
        ],
        "after": [
          "      animatedControlPoints: data?.animatedControlPoints,",
          "      animated: data?.animated,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:88:34",
      "file": "engine/layers/PathLayer.ts",
      "line": 88,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedControlPoints: data?.animatedControlPoints,",
      "context": {
        "before": [
          "      showGuide: data?.showGuide ?? true,",
          "      guideColor: data?.guideColor ?? \"#00FFFF\",",
          "      guideDashPattern: data?.guideDashPattern ?? [10, 5],"
        ],
        "after": [
          "      animated: data?.animated,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:89:21",
      "file": "engine/layers/PathLayer.ts",
      "line": 89,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animated: data?.animated,",
      "context": {
        "before": [
          "      guideColor: data?.guideColor ?? \"#00FFFF\",",
          "      guideDashPattern: data?.guideDashPattern ?? [10, 5],",
          "      animatedControlPoints: data?.animatedControlPoints,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:96:22",
      "file": "engine/layers/PathLayer.ts",
      "line": 96,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private buildPath(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Build the Three.js path from control points",
          "   */"
        ],
        "after": [
          "    // Clear existing guide line",
          "    this.clearGuideLine();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:119:23",
      "file": "engine/layers/PathLayer.ts",
      "line": 119,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p0.handleOut?.x ?? p0.x,",
      "context": {
        "before": [
          "      const bezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p0.handleOut?.y ?? p0.y),",
          "          z0,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:120:25",
      "file": "engine/layers/PathLayer.ts",
      "line": 120,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p0.handleOut?.y ?? p0.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3(",
          "          p0.handleOut?.x ?? p0.x,"
        ],
        "after": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:124:22",
      "file": "engine/layers/PathLayer.ts",
      "line": 124,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p1.handleIn?.x ?? p1.x,",
      "context": {
        "before": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p1.handleIn?.y ?? p1.y),",
          "          z1,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:125:24",
      "file": "engine/layers/PathLayer.ts",
      "line": 125,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p1.handleIn?.y ?? p1.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          p1.handleIn?.x ?? p1.x,"
        ],
        "after": [
          "          z1,",
          "        ),",
          "        new THREE.Vector3(p1.x, -p1.y, z1),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:145:30",
      "file": "engine/layers/PathLayer.ts",
      "line": 145,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lastPoint.handleOut?.x ?? lastPoint.x,",
      "context": {
        "before": [
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(lastPoint.handleOut?.y ?? lastPoint.y),",
          "          zLast,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:146:32",
      "file": "engine/layers/PathLayer.ts",
      "line": 146,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(lastPoint.handleOut?.y ?? lastPoint.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3(",
          "          lastPoint.handleOut?.x ?? lastPoint.x,"
        ],
        "after": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:150:30",
      "file": "engine/layers/PathLayer.ts",
      "line": 150,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "firstPoint.handleIn?.x ?? firstPoint.x,",
      "context": {
        "before": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(firstPoint.handleIn?.y ?? firstPoint.y),",
          "          zFirst,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:151:32",
      "file": "engine/layers/PathLayer.ts",
      "line": 151,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(firstPoint.handleIn?.y ?? firstPoint.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          firstPoint.handleIn?.x ?? firstPoint.x,"
        ],
        "after": [
          "          zFirst,",
          "        ),",
          "        new THREE.Vector3(firstPoint.x, -firstPoint.y, zFirst),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:169:28",
      "file": "engine/layers/PathLayer.ts",
      "line": 169,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createGuideLine(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create the dashed guide line visualization",
          "   */"
        ],
        "after": [
          "    if (!this.curve) return;",
          "",
          "    // Get points along the curve"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:216:27",
      "file": "engine/layers/PathLayer.ts",
      "line": 216,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private clearGuideLine(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear existing guide line",
          "   */"
        ],
        "after": [
          "    if (this.guideLine) {",
          "      this.group.remove(this.guideLine);",
          "      this.guideLine.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:236:27",
      "file": "engine/layers/PathLayer.ts",
      "line": 236,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validT = Number.isFinite(t) ? Math.max(0, Math.min(1, t)) : 0;",
      "context": {
        "before": [
          "  getPointAt(t: number): THREE.Vector3 | null {",
          "    if (!this.curve) return null;",
          "    // Validate t (NaN bypasses Math.max/min clamp)"
        ],
        "after": [
          "    return this.curve.getPointAt(validT);",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:246:27",
      "file": "engine/layers/PathLayer.ts",
      "line": 246,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validT = Number.isFinite(t) ? Math.max(0, Math.min(1, t)) : 0;",
      "context": {
        "before": [
          "  getTangentAt(t: number): THREE.Vector3 | null {",
          "    if (!this.curve) return null;",
          "    // Validate t (NaN bypasses Math.max/min clamp)"
        ],
        "after": [
          "    return this.curve.getTangentAt(validT);",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:391:30",
      "file": "engine/layers/PathLayer.ts",
      "line": 391,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShowGuide(show: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set guide visibility",
          "   */"
        ],
        "after": [
          "    if (this.pathData.showGuide === show) return;",
          "",
          "    this.pathData.showGuide = show;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:409:31",
      "file": "engine/layers/PathLayer.ts",
      "line": 409,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setGuideColor(color: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set guide color",
          "   */"
        ],
        "after": [
          "    this.pathData.guideColor = color;",
          "    if (this.guideLine) {",
          "      (this.guideLine.material as LineMaterial).color.set(color);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:419:49",
      "file": "engine/layers/PathLayer.ts",
      "line": 419,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setGuideDashPattern(pattern: [number, number]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set guide dash pattern [dash, gap]",
          "   */"
        ],
        "after": [
          "    this.pathData.guideDashPattern = pattern;",
          "    if (this.guideLine) {",
          "      const mat = this.guideLine.material as LineMaterial;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:433:47",
      "file": "engine/layers/PathLayer.ts",
      "line": 433,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setResolution(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set resolution for line material (call when canvas resizes)",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN would corrupt LineMaterial resolution)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:435:31",
      "file": "engine/layers/PathLayer.ts",
      "line": 435,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
      "context": {
        "before": [
          "   */",
          "  setResolution(width: number, height: number): void {",
          "    // Validate dimensions (NaN would corrupt LineMaterial resolution)"
        ],
        "after": [
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
          "    this.resolution.set(validWidth, validHeight);",
          "    if (this.guideLine) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:436:32",
      "file": "engine/layers/PathLayer.ts",
      "line": 436,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
      "context": {
        "before": [
          "  setResolution(width: number, height: number): void {",
          "    // Validate dimensions (NaN would corrupt LineMaterial resolution)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;"
        ],
        "after": [
          "    this.resolution.set(validWidth, validHeight);",
          "    if (this.guideLine) {",
          "      (this.guideLine.material as LineMaterial).resolution.set("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:449:43",
      "file": "engine/layers/PathLayer.ts",
      "line": 449,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setControlPoints(points: ControlPoint[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update control points (static)",
          "   */"
        ],
        "after": [
          "    this.pathData.controlPoints = points;",
          "    this.animatedPoints = null;",
          "    this.pathData.animated = false;"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:461:61",
      "file": "engine/layers/PathLayer.ts",
      "line": 461,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnimatedControlPoints(points: AnimatableControlPoint[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set animated control points",
          "   */"
        ],
        "after": [
          "    this.animatedPoints = points;",
          "    this.pathData.animatedControlPoints = points;",
          "    this.pathData.animated = true;"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:473:29",
      "file": "engine/layers/PathLayer.ts",
      "line": 473,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setClosed(closed: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set closed state",
          "   */"
        ],
        "after": [
          "    if (this.pathData.closed === closed) return;",
          "    this.pathData.closed = closed;",
          "    this.buildPath();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:483:43",
      "file": "engine/layers/PathLayer.ts",
      "line": 483,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Skip if not animated",
          "    if (!this.isAnimated()) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:501:72",
      "file": "engine/layers/PathLayer.ts",
      "line": 501,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private buildPathFromEvaluatedPoints(points: EvaluatedControlPoint[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Build path geometry from evaluated control points",
          "   */"
        ],
        "after": [
          "    this.clearGuideLine();",
          "",
          "    if (points.length < 2) return;"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:519:23",
      "file": "engine/layers/PathLayer.ts",
      "line": 519,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p0.handleOut?.x ?? p0.x,",
      "context": {
        "before": [
          "      const bezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p0.handleOut?.y ?? p0.y),",
          "          z0,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:520:25",
      "file": "engine/layers/PathLayer.ts",
      "line": 520,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p0.handleOut?.y ?? p0.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3(",
          "          p0.handleOut?.x ?? p0.x,"
        ],
        "after": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:524:22",
      "file": "engine/layers/PathLayer.ts",
      "line": 524,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p1.handleIn?.x ?? p1.x,",
      "context": {
        "before": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p1.handleIn?.y ?? p1.y),",
          "          z1,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:525:24",
      "file": "engine/layers/PathLayer.ts",
      "line": 525,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p1.handleIn?.y ?? p1.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          p1.handleIn?.x ?? p1.x,"
        ],
        "after": [
          "          z1,",
          "        ),",
          "        new THREE.Vector3(p1.x, -p1.y, z1),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:542:30",
      "file": "engine/layers/PathLayer.ts",
      "line": 542,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lastPoint.handleOut?.x ?? lastPoint.x,",
      "context": {
        "before": [
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, lastPoint.depth),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(lastPoint.handleOut?.y ?? lastPoint.y),",
          "          lastPoint.depth,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:543:32",
      "file": "engine/layers/PathLayer.ts",
      "line": 543,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(lastPoint.handleOut?.y ?? lastPoint.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, lastPoint.depth),",
          "        new THREE.Vector3(",
          "          lastPoint.handleOut?.x ?? lastPoint.x,"
        ],
        "after": [
          "          lastPoint.depth,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:547:30",
      "file": "engine/layers/PathLayer.ts",
      "line": 547,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "firstPoint.handleIn?.x ?? firstPoint.x,",
      "context": {
        "before": [
          "          lastPoint.depth,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(firstPoint.handleIn?.y ?? firstPoint.y),",
          "          firstPoint.depth,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:548:32",
      "file": "engine/layers/PathLayer.ts",
      "line": 548,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(firstPoint.handleIn?.y ?? firstPoint.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          firstPoint.handleIn?.x ?? firstPoint.x,"
        ],
        "after": [
          "          firstPoint.depth,",
          "        ),",
          "        new THREE.Vector3(firstPoint.x, -firstPoint.y, firstPoint.depth),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:565:4",
      "file": "engine/layers/PathLayer.ts",
      "line": 565,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    // Apply evaluated control points if present"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:579:49",
      "file": "engine/layers/PathLayer.ts",
      "line": 579,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<PathLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PathLayer.ts:620:24",
      "file": "engine/layers/PathLayer.ts",
      "line": 620,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.clearGuideLine();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:89:30",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 89,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeLoaders(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize shared loaders",
          "   */"
        ],
        "after": [
          "    if (!PointCloudLayer.plyLoader) {",
          "      PointCloudLayer.plyLoader = new PLYLoader();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:124:20",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 124,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetId: data?.assetId ?? \"\",",
      "context": {
        "before": [
          "    };",
          "",
          "    return {"
        ],
        "after": [
          "      format: data?.format ?? \"ply\",",
          "      pointCount: data?.pointCount ?? 0,",
          "      pointSize: data?.pointSize ?? defaultPointSize,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:125:19",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 125,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "format: data?.format ?? \"ply\",",
      "context": {
        "before": [
          "",
          "    return {",
          "      assetId: data?.assetId ?? \"\","
        ],
        "after": [
          "      pointCount: data?.pointCount ?? 0,",
          "      pointSize: data?.pointSize ?? defaultPointSize,",
          "      sizeAttenuation: data?.sizeAttenuation ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:126:23",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 126,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pointCount: data?.pointCount ?? 0,",
      "context": {
        "before": [
          "    return {",
          "      assetId: data?.assetId ?? \"\",",
          "      format: data?.format ?? \"ply\","
        ],
        "after": [
          "      pointSize: data?.pointSize ?? defaultPointSize,",
          "      sizeAttenuation: data?.sizeAttenuation ?? true,",
          "      minPointSize: data?.minPointSize ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:127:22",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 127,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pointSize: data?.pointSize ?? defaultPointSize,",
      "context": {
        "before": [
          "      assetId: data?.assetId ?? \"\",",
          "      format: data?.format ?? \"ply\",",
          "      pointCount: data?.pointCount ?? 0,"
        ],
        "after": [
          "      sizeAttenuation: data?.sizeAttenuation ?? true,",
          "      minPointSize: data?.minPointSize ?? 1,",
          "      maxPointSize: data?.maxPointSize ?? 64,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:128:28",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 128,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "sizeAttenuation: data?.sizeAttenuation ?? true,",
      "context": {
        "before": [
          "      format: data?.format ?? \"ply\",",
          "      pointCount: data?.pointCount ?? 0,",
          "      pointSize: data?.pointSize ?? defaultPointSize,"
        ],
        "after": [
          "      minPointSize: data?.minPointSize ?? 1,",
          "      maxPointSize: data?.maxPointSize ?? 64,",
          "      colorMode: data?.colorMode ?? \"rgb\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:129:25",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 129,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "minPointSize: data?.minPointSize ?? 1,",
      "context": {
        "before": [
          "      pointCount: data?.pointCount ?? 0,",
          "      pointSize: data?.pointSize ?? defaultPointSize,",
          "      sizeAttenuation: data?.sizeAttenuation ?? true,"
        ],
        "after": [
          "      maxPointSize: data?.maxPointSize ?? 64,",
          "      colorMode: data?.colorMode ?? \"rgb\",",
          "      uniformColor: data?.uniformColor ?? \"#ffffff\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:130:25",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 130,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "maxPointSize: data?.maxPointSize ?? 64,",
      "context": {
        "before": [
          "      pointSize: data?.pointSize ?? defaultPointSize,",
          "      sizeAttenuation: data?.sizeAttenuation ?? true,",
          "      minPointSize: data?.minPointSize ?? 1,"
        ],
        "after": [
          "      colorMode: data?.colorMode ?? \"rgb\",",
          "      uniformColor: data?.uniformColor ?? \"#ffffff\",",
          "      colorGradient: data?.colorGradient,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:131:22",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 131,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "colorMode: data?.colorMode ?? \"rgb\",",
      "context": {
        "before": [
          "      sizeAttenuation: data?.sizeAttenuation ?? true,",
          "      minPointSize: data?.minPointSize ?? 1,",
          "      maxPointSize: data?.maxPointSize ?? 64,"
        ],
        "after": [
          "      uniformColor: data?.uniformColor ?? \"#ffffff\",",
          "      colorGradient: data?.colorGradient,",
          "      renderMode: data?.renderMode ?? \"circles\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:132:25",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 132,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "uniformColor: data?.uniformColor ?? \"#ffffff\",",
      "context": {
        "before": [
          "      minPointSize: data?.minPointSize ?? 1,",
          "      maxPointSize: data?.maxPointSize ?? 64,",
          "      colorMode: data?.colorMode ?? \"rgb\","
        ],
        "after": [
          "      colorGradient: data?.colorGradient,",
          "      renderMode: data?.renderMode ?? \"circles\",",
          "      opacity: data?.opacity ?? defaultOpacity,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:133:26",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 133,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "colorGradient: data?.colorGradient,",
      "context": {
        "before": [
          "      maxPointSize: data?.maxPointSize ?? 64,",
          "      colorMode: data?.colorMode ?? \"rgb\",",
          "      uniformColor: data?.uniformColor ?? \"#ffffff\","
        ],
        "after": [
          "      renderMode: data?.renderMode ?? \"circles\",",
          "      opacity: data?.opacity ?? defaultOpacity,",
          "      depthTest: data?.depthTest ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:134:23",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 134,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "renderMode: data?.renderMode ?? \"circles\",",
      "context": {
        "before": [
          "      colorMode: data?.colorMode ?? \"rgb\",",
          "      uniformColor: data?.uniformColor ?? \"#ffffff\",",
          "      colorGradient: data?.colorGradient,"
        ],
        "after": [
          "      opacity: data?.opacity ?? defaultOpacity,",
          "      depthTest: data?.depthTest ?? true,",
          "      depthWrite: data?.depthWrite ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:135:20",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 135,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "opacity: data?.opacity ?? defaultOpacity,",
      "context": {
        "before": [
          "      uniformColor: data?.uniformColor ?? \"#ffffff\",",
          "      colorGradient: data?.colorGradient,",
          "      renderMode: data?.renderMode ?? \"circles\","
        ],
        "after": [
          "      depthTest: data?.depthTest ?? true,",
          "      depthWrite: data?.depthWrite ?? true,",
          "      boundingBox: data?.boundingBox,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:136:22",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 136,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depthTest: data?.depthTest ?? true,",
      "context": {
        "before": [
          "      colorGradient: data?.colorGradient,",
          "      renderMode: data?.renderMode ?? \"circles\",",
          "      opacity: data?.opacity ?? defaultOpacity,"
        ],
        "after": [
          "      depthWrite: data?.depthWrite ?? true,",
          "      boundingBox: data?.boundingBox,",
          "      showBoundingBox: data?.showBoundingBox ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:137:23",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 137,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depthWrite: data?.depthWrite ?? true,",
      "context": {
        "before": [
          "      renderMode: data?.renderMode ?? \"circles\",",
          "      opacity: data?.opacity ?? defaultOpacity,",
          "      depthTest: data?.depthTest ?? true,"
        ],
        "after": [
          "      boundingBox: data?.boundingBox,",
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      lod: data?.lod,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:138:24",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 138,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "boundingBox: data?.boundingBox,",
      "context": {
        "before": [
          "      opacity: data?.opacity ?? defaultOpacity,",
          "      depthTest: data?.depthTest ?? true,",
          "      depthWrite: data?.depthWrite ?? true,"
        ],
        "after": [
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      lod: data?.lod,",
          "      octree: data?.octree,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:139:28",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 139,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "showBoundingBox: data?.showBoundingBox ?? false,",
      "context": {
        "before": [
          "      depthTest: data?.depthTest ?? true,",
          "      depthWrite: data?.depthWrite ?? true,",
          "      boundingBox: data?.boundingBox,"
        ],
        "after": [
          "      lod: data?.lod,",
          "      octree: data?.octree,",
          "      pointBudget: data?.pointBudget ?? 1000000,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:140:16",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 140,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lod: data?.lod,",
      "context": {
        "before": [
          "      depthWrite: data?.depthWrite ?? true,",
          "      boundingBox: data?.boundingBox,",
          "      showBoundingBox: data?.showBoundingBox ?? false,"
        ],
        "after": [
          "      octree: data?.octree,",
          "      pointBudget: data?.pointBudget ?? 1000000,",
          "      edl: data?.edl,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:141:19",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 141,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "octree: data?.octree,",
      "context": {
        "before": [
          "      boundingBox: data?.boundingBox,",
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      lod: data?.lod,"
        ],
        "after": [
          "      pointBudget: data?.pointBudget ?? 1000000,",
          "      edl: data?.edl,",
          "      clipPlanes: data?.clipPlanes,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:142:24",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 142,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pointBudget: data?.pointBudget ?? 1000000,",
      "context": {
        "before": [
          "      showBoundingBox: data?.showBoundingBox ?? false,",
          "      lod: data?.lod,",
          "      octree: data?.octree,"
        ],
        "after": [
          "      edl: data?.edl,",
          "      clipPlanes: data?.clipPlanes,",
          "      classificationFilter: data?.classificationFilter,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:143:16",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 143,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "edl: data?.edl,",
      "context": {
        "before": [
          "      lod: data?.lod,",
          "      octree: data?.octree,",
          "      pointBudget: data?.pointBudget ?? 1000000,"
        ],
        "after": [
          "      clipPlanes: data?.clipPlanes,",
          "      classificationFilter: data?.classificationFilter,",
          "      intensityRange: data?.intensityRange,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:144:23",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 144,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "clipPlanes: data?.clipPlanes,",
      "context": {
        "before": [
          "      octree: data?.octree,",
          "      pointBudget: data?.pointBudget ?? 1000000,",
          "      edl: data?.edl,"
        ],
        "after": [
          "      classificationFilter: data?.classificationFilter,",
          "      intensityRange: data?.intensityRange,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:145:33",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 145,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "classificationFilter: data?.classificationFilter,",
      "context": {
        "before": [
          "      pointBudget: data?.pointBudget ?? 1000000,",
          "      edl: data?.edl,",
          "      clipPlanes: data?.clipPlanes,"
        ],
        "after": [
          "      intensityRange: data?.intensityRange,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:146:27",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 146,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "intensityRange: data?.intensityRange,",
      "context": {
        "before": [
          "      edl: data?.edl,",
          "      clipPlanes: data?.clipPlanes,",
          "      classificationFilter: data?.classificationFilter,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:212:32",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 212,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "PointCloudLayer.plyLoader?.load(url, resolve, undefined, reject);",
      "context": {
        "before": [
          "   */",
          "  private loadPLY(url: string): Promise<THREE.BufferGeometry> {",
          "    return new Promise((resolve, reject) => {"
        ],
        "after": [
          "    });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:221:32",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 221,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "PointCloudLayer.pcdLoader?.load(",
      "context": {
        "before": [
          "   */",
          "  private loadPCD(url: string): Promise<THREE.BufferGeometry> {",
          "    return new Promise((resolve, reject) => {"
        ],
        "after": [
          "        url,",
          "        (points: THREE.Points) => {",
          "          resolve(points.geometry);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:478:30",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 478,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createPlaceholder(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create placeholder point cloud",
          "   */"
        ],
        "after": [
          "    const geometry = this.createPlaceholderGeometry();",
          "    this.setGeometry(geometry);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:486:54",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 486,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private setGeometry(geometry: THREE.BufferGeometry): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the point cloud geometry",
          "   */"
        ],
        "after": [
          "    // Remove existing point cloud",
          "    if (this.pointCloud) {",
          "      this.group.remove(this.pointCloud);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:525:36",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 525,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private storeOriginalAttributes(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Store original point attributes",
          "   */"
        ],
        "after": [
          "    if (!this.geometry) return;",
          "",
          "    const position = this.geometry.getAttribute(\"position\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:544:27",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 544,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMaterial(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create point cloud material",
          "   */"
        ],
        "after": [
          "    // Custom shader for advanced point rendering",
          "    this.material = new THREE.ShaderMaterial({",
          "      uniforms: {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:666:47",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 666,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const stops = this.cloudData.colorGradient?.stops ?? [",
      "context": {
        "before": [
          "    const size = 256;",
          "    const data = new Uint8Array(size * 4);",
          ""
        ],
        "after": [
          "      { position: 0, color: \"#0000ff\" },",
          "      { position: 0.5, color: \"#00ff00\" },",
          "      { position: 1, color: \"#ff0000\" },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:707:33",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 707,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private calculateBoundingBox(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Calculate and store bounding box",
          "   */"
        ],
        "after": [
          "    if (!this.geometry) return;",
          "",
          "    this.geometry.computeBoundingBox();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:738:44",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 738,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyColorMode(mode: PointCloudColorMode): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply color mode to point cloud",
          "   */"
        ],
        "after": [
          "    if (!this.geometry || !this.material || !this.originalAttributes) return;",
          "",
          "    this.cloudData.colorMode = mode;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:791:32",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 791,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyHeightColoring(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply height-based coloring",
          "   */"
        ],
        "after": [
          "    if (",
          "      !this.geometry ||",
          "      !this.originalAttributes ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:832:31",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 832,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyDepthColoring(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply depth-based coloring (distance from camera)",
          "   */"
        ],
        "after": [
          "    if (",
          "      !this.geometry ||",
          "      !this.originalAttributes ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:871:32",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 871,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyNormalColoring(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply normal-based coloring",
          "   */"
        ],
        "after": [
          "    if (!this.geometry || !this.originalAttributes) return;",
          "",
          "    if (this.originalAttributes.normals) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:909:35",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 909,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyIntensityColoring(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply intensity-based coloring",
          "   */"
        ],
        "after": [
          "    if (!this.geometry || !this.originalAttributes) return;",
          "",
          "    if (this.originalAttributes.intensities) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:959:40",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 959,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyClassificationColoring(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply classification-based coloring (for LAS files)",
          "   */"
        ],
        "after": [
          "    if (!this.geometry || !this.originalAttributes) return;",
          "",
          "    if (this.originalAttributes.classifications) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1020:36",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1020,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateBoundingBoxHelper(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update bounding box helper",
          "   */"
        ],
        "after": [
          "    if (this.boundingBoxHelper) {",
          "      this.group.remove(this.boundingBoxHelper);",
          "      this.boundingBoxHelper.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1041:29",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1041,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPointSize(size: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set point size",
          "   */"
        ],
        "after": [
          "    if (this.material) {",
          "      // Validate size (NaN would corrupt shader uniform)",
          "      const validSize = Number.isFinite(size) && size > 0 ? size : 2;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1044:32",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1044,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validSize = Number.isFinite(size) && size > 0 ? size : 2;",
      "context": {
        "before": [
          "  setPointSize(size: number): void {",
          "    if (this.material) {",
          "      // Validate size (NaN would corrupt shader uniform)"
        ],
        "after": [
          "      this.material.uniforms.pointSize.value = validSize;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1052:30",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1052,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setOpacity(opacity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set opacity",
          "   */"
        ],
        "after": [
          "    if (this.material) {",
          "      // Validate opacity (NaN would corrupt shader uniform)",
          "      const validOpacity = Number.isFinite(opacity)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1055:35",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1055,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOpacity = Number.isFinite(opacity)",
      "context": {
        "before": [
          "  setOpacity(opacity: number): void {",
          "    if (this.material) {",
          "      // Validate opacity (NaN would corrupt shader uniform)"
        ],
        "after": [
          "        ? Math.max(0, Math.min(1, opacity))",
          "        : 1;",
          "      this.material.uniforms.opacity.value = validOpacity;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1065:33",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1065,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setUniformColor(color: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set uniform color",
          "   */"
        ],
        "after": [
          "    this.cloudData.uniformColor = color;",
          "    if (this.material) {",
          "      this.material.uniforms.uniformColor.value.set(color);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1075:44",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1075,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderMode(mode: PointCloudRenderMode): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set render mode",
          "   */"
        ],
        "after": [
          "    this.cloudData.renderMode = mode;",
          "    if (this.material) {",
          "      this.material.uniforms.renderMode.value = this.getRenderModeValue();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1085:36",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1085,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShowBoundingBox(show: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set bounding box visibility",
          "   */"
        ],
        "after": [
          "    this.cloudData.showBoundingBox = show;",
          "    this.updateBoundingBoxHelper();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1126:43",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1126,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Use composition fps for correct animation timing (not hardcoded 30fps)",
          "    const fps = this.compositionFps;",
          "    const layerId = this.id;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1157:4",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1157,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    if (props.pointSize !== undefined) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1169:49",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1169,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<PointCloudLayerData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1221:24",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1221,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.disposePointCloud();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PointCloudLayer.ts:1228:30",
      "file": "engine/layers/PointCloudLayer.ts",
      "line": 1228,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposePointCloud(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose point cloud resources",
          "   */"
        ],
        "after": [
          "    if (this.boundingBoxHelper) {",
          "      this.boundingBoxHelper.dispose();",
          "      this.boundingBoxHelper = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:310:53",
      "file": "engine/layers/PoseLayer.ts",
      "line": 310,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private renderPoses(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Render poses to canvas",
          "   */"
        ],
        "after": [
          "    const data = this.getPoseData();",
          "    const { ctx, canvas } = this;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:341:4",
      "file": "engine/layers/PoseLayer.ts",
      "line": 341,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    width: number,",
          "    height: number,",
          "    data: PoseLayerData,"
        ],
        "after": [
          "    const { ctx } = this;",
          "    const { keypoints } = pose;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:455:52",
      "file": "engine/layers/PoseLayer.ts",
      "line": 455,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCompositionSize(width: number, height: number): void {",
      "context": {
        "before": [
          "   * Set composition dimensions for proper rendering",
          "   * Called by LayerManager when layer is added or composition changes",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN/0 would create invalid canvas)",
          "    this.compWidth = Number.isFinite(width) && width > 0 ? width : 512;",
          "    this.compHeight = Number.isFinite(height) && height > 0 ? height : 512;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:457:29",
      "file": "engine/layers/PoseLayer.ts",
      "line": 457,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.compWidth = Number.isFinite(width) && width > 0 ? width : 512;",
      "context": {
        "before": [
          "   */",
          "  setCompositionSize(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid canvas)"
        ],
        "after": [
          "    this.compHeight = Number.isFinite(height) && height > 0 ? height : 512;",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:458:30",
      "file": "engine/layers/PoseLayer.ts",
      "line": 458,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.compHeight = Number.isFinite(height) && height > 0 ? height : 512;",
      "context": {
        "before": [
          "  setCompositionSize(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid canvas)",
          "    this.compWidth = Number.isFinite(width) && width > 0 ? width : 512;"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:464:43",
      "file": "engine/layers/PoseLayer.ts",
      "line": 464,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Evaluate layer at frame",
          "   */"
        ],
        "after": [
          "    // Use composition dimensions",
          "    const width = this.compWidth;",
          "    const height = this.compHeight;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:480:49",
      "file": "engine/layers/PoseLayer.ts",
      "line": 480,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Handle property updates",
          "   */"
        ],
        "after": [
          "    // Update pose data if it changed",
          "    if (properties.data) {",
          "      // Re-render on next evaluate"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:527:5",
      "file": "engine/layers/PoseLayer.ts",
      "line": 527,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "   */",
          "  importOpenPoseJSON(json: {",
          "    people?: Array<{ pose_keypoints_2d?: number[] }>;"
        ],
        "after": [
          "    const data = this.getPoseData();",
          "    const newPoses: Pose[] = [];",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:563:37",
      "file": "engine/layers/PoseLayer.ts",
      "line": 563,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "flipPoseHorizontal(poseId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Mirror/flip pose horizontally",
          "   */"
        ],
        "after": [
          "    const data = this.getPoseData();",
          "    const pose = data.poses.find((p) => p.id === poseId);",
          "    if (!pose) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:628:12",
      "file": "engine/layers/PoseLayer.ts",
      "line": 628,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "    return exportCanvas;",
          "  }",
          ""
        ],
        "after": [
          "    this.texture.dispose();",
          "    (this.mesh.material as THREE.Material).dispose();",
          "    this.mesh.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:643:53",
      "file": "engine/layers/PoseLayer.ts",
      "line": 643,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function scalePose(pose: Pose, scale: number): void {",
      "context": {
        "before": [
          "/**",
          " * Scale a pose around its center",
          " */"
        ],
        "after": [
          "  // Find center",
          "  let sumX = 0,",
          "    sumY = 0,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:670:61",
      "file": "engine/layers/PoseLayer.ts",
      "line": 670,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function rotatePose(pose: Pose, angleDegrees: number): void {",
      "context": {
        "before": [
          "/**",
          " * Rotate a pose around its center",
          " */"
        ],
        "after": [
          "  const angle = (angleDegrees * Math.PI) / 180;",
          "  const cos = Math.cos(angle);",
          "  const sin = Math.sin(angle);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/PoseLayer.ts:703:66",
      "file": "engine/layers/PoseLayer.ts",
      "line": 703,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function translatePose(pose: Pose, dx: number, dy: number): void {",
      "context": {
        "before": [
          "/**",
          " * Translate a pose",
          " */"
        ],
        "after": [
          "  for (const kp of pose.keypoints) {",
          "    kp.x += dx;",
          "    kp.y += dy;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:168:23",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 168,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createMesh(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create display mesh",
          "   */"
        ],
        "after": [
          "    const geometry = new THREE.PlaneGeometry(this.width, this.height);",
          "",
          "    this.texture = new THREE.CanvasTexture(this.renderCanvas);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:189:47",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 189,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDimensions(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set dimensions",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN/0 would create invalid canvas and geometry)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 512;",
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 512;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:191:31",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 191,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 512;",
      "context": {
        "before": [
          "   */",
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid canvas and geometry)"
        ],
        "after": [
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 512;",
          "",
          "    this.width = validWidth;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:192:32",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 192,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 512;",
      "context": {
        "before": [
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid canvas and geometry)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 512;"
        ],
        "after": [
          "",
          "    this.width = validWidth;",
          "    this.height = validHeight;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:211:43",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 211,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Render the pattern for this frame",
          "    this.renderPattern(frame);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:221:49",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 221,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (properties.data) {",
          "      this.matteData = this.extractMatteData({",
          "        ...properties,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:237:39",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 237,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private renderPattern(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Render the pattern to the canvas",
          "   */"
        ],
        "after": [
          "    const ctx = this.renderCtx;",
          "    const w = this.width;",
          "    const h = this.height;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:326:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 326,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const angle: number =",
          "      this.matteEvaluator.evaluate(params.angle!, frame) + time * 360;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:361:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 361,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const centerX: number = this.matteEvaluator.evaluate(",
          "      params.centerX!,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:395:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 395,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const centerX: number = params.centerX",
          "      ? this.matteEvaluator.evaluate(params.centerX, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:434:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 434,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const progress: number = this.matteEvaluator.evaluate(",
          "      params.progress!,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:479:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 479,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const scale: number = params.scale",
          "      ? this.matteEvaluator.evaluate(params.scale, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:519:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 519,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const tilesX: number = params.tilesX",
          "      ? this.matteEvaluator.evaluate(params.tilesX, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:557:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 557,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const centerX: number = params.centerX",
          "      ? this.matteEvaluator.evaluate(params.centerX, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:603:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 603,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const centerX: number = params.centerX",
          "      ? this.matteEvaluator.evaluate(params.centerX, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:639:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 639,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const progress: number = params.progress",
          "      ? this.matteEvaluator.evaluate(params.progress, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:683:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 683,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const progress: number = params.progress",
          "      ? this.matteEvaluator.evaluate(params.progress, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:741:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 741,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const progress = params.progress",
          "      ? this.matteEvaluator.evaluate(params.progress, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:778:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 778,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const progress = params.progress",
          "      ? this.matteEvaluator.evaluate(params.progress, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:827:4",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 827,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    h: number,",
          "    frame: number,",
          "    time: number,"
        ],
        "after": [
          "    const params = this.matteData.parameters;",
          "    const frequency = params.frequency",
          "      ? this.matteEvaluator.evaluate(params.frequency, frame)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:884:37",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 884,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyLevels(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply levels adjustment",
          "   */"
        ],
        "after": [
          "    const levels = this.matteData.levels;",
          "    const inputBlack = this.matteEvaluator.evaluate(levels.inputBlack, frame);",
          "    const inputWhite = this.matteEvaluator.evaluate(levels.inputWhite, frame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:893:36",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 893,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validInputBlack = Number.isFinite(inputBlack) ? inputBlack : 0;",
      "context": {
        "before": [
          "    const outputWhite = this.matteEvaluator.evaluate(levels.outputWhite, frame);",
          "",
          "    // Validate values (NaN would corrupt image processing)"
        ],
        "after": [
          "    const validInputWhite = Number.isFinite(inputWhite) ? inputWhite : 255;",
          "    const validGamma = Number.isFinite(gamma) && gamma > 0 ? gamma : 1;",
          "    const validOutputBlack = Number.isFinite(outputBlack) ? outputBlack : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:894:36",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 894,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validInputWhite = Number.isFinite(inputWhite) ? inputWhite : 255;",
      "context": {
        "before": [
          "",
          "    // Validate values (NaN would corrupt image processing)",
          "    const validInputBlack = Number.isFinite(inputBlack) ? inputBlack : 0;"
        ],
        "after": [
          "    const validGamma = Number.isFinite(gamma) && gamma > 0 ? gamma : 1;",
          "    const validOutputBlack = Number.isFinite(outputBlack) ? outputBlack : 0;",
          "    const validOutputWhite = Number.isFinite(outputWhite) ? outputWhite : 255;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:895:31",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 895,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validGamma = Number.isFinite(gamma) && gamma > 0 ? gamma : 1;",
      "context": {
        "before": [
          "    // Validate values (NaN would corrupt image processing)",
          "    const validInputBlack = Number.isFinite(inputBlack) ? inputBlack : 0;",
          "    const validInputWhite = Number.isFinite(inputWhite) ? inputWhite : 255;"
        ],
        "after": [
          "    const validOutputBlack = Number.isFinite(outputBlack) ? outputBlack : 0;",
          "    const validOutputWhite = Number.isFinite(outputWhite) ? outputWhite : 255;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:896:37",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 896,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOutputBlack = Number.isFinite(outputBlack) ? outputBlack : 0;",
      "context": {
        "before": [
          "    const validInputBlack = Number.isFinite(inputBlack) ? inputBlack : 0;",
          "    const validInputWhite = Number.isFinite(inputWhite) ? inputWhite : 255;",
          "    const validGamma = Number.isFinite(gamma) && gamma > 0 ? gamma : 1;"
        ],
        "after": [
          "    const validOutputWhite = Number.isFinite(outputWhite) ? outputWhite : 255;",
          "",
          "    // Skip if default values"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:897:37",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 897,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOutputWhite = Number.isFinite(outputWhite) ? outputWhite : 255;",
      "context": {
        "before": [
          "    const validInputWhite = Number.isFinite(inputWhite) ? inputWhite : 255;",
          "    const validGamma = Number.isFinite(gamma) && gamma > 0 ? gamma : 1;",
          "    const validOutputBlack = Number.isFinite(outputBlack) ? outputBlack : 0;"
        ],
        "after": [
          "",
          "    // Skip if default values",
          "    if ("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:945:25",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 945,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private invertCanvas(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Invert the canvas",
          "   */"
        ],
        "after": [
          "    const imageData = this.renderCtx.getImageData(",
          "      0,",
          "      0,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:1020:70",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 1020,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected applyProcessedEffects(processedCanvas: HTMLCanvasElement): void {",
      "context": {
        "before": [
          "    return this.renderCanvas;",
          "  }",
          ""
        ],
        "after": [
          "    // Copy processed canvas back to render canvas",
          "    this.renderCtx.clearRect(0, 0, this.width, this.height);",
          "    this.renderCtx.drawImage(processedCanvas, 0, 0);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ProceduralMatteLayer.ts:1035:24",
      "file": "engine/layers/ProceduralMatteLayer.ts",
      "line": 1035,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "  // DISPOSAL",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.texture) {",
          "      this.texture.dispose();",
          "      this.texture = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:195:41",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 195,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSize(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set canvas size (should match composition)",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN/0 would create invalid canvas)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:197:31",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 197,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
      "context": {
        "before": [
          "   */",
          "  setSize(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid canvas)"
        ],
        "after": [
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
          "",
          "    if (validWidth === this.canvasWidth && validHeight === this.canvasHeight)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:198:32",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 198,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
      "context": {
        "before": [
          "  setSize(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid canvas)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;"
        ],
        "after": [
          "",
          "    if (validWidth === this.canvasWidth && validHeight === this.canvasHeight)",
          "      return;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:230:37",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 230,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShapeData(data: ShapeLayerData): void {",
      "context": {
        "before": [
          "    return this.shapeData;",
          "  }",
          ""
        ],
        "after": [
          "    this.shapeData = data;",
          "    this.renderShape();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:235:36",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 235,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addContent(content: ShapeContent): void {",
      "context": {
        "before": [
          "    this.renderShape();",
          "  }",
          ""
        ],
        "after": [
          "    this.shapeData.contents.push(content);",
          "    this.renderShape();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:240:31",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 240,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeContent(index: number): void {",
      "context": {
        "before": [
          "    this.renderShape();",
          "  }",
          ""
        ],
        "after": [
          "    this.shapeData.contents.splice(index, 1);",
          "    this.renderShape();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:245:54",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 245,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateContent(index: number, content: ShapeContent): void {",
      "context": {
        "before": [
          "    this.renderShape();",
          "  }",
          ""
        ],
        "after": [
          "    if (index >= 0 && index < this.shapeData.contents.length) {",
          "      this.shapeData.contents[index] = content;",
          "      this.renderShape();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:256:31",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 256,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "evaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.currentFrame = frame;",
          "    super.evaluateFrame(frame);",
          "    this.renderShape();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:265:43",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 265,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Called during frame evaluation to update shape-specific properties",
          "   */"
        ],
        "after": [
          "    // Shape layers re-render on every frame to handle animated shape properties",
          "    // The actual rendering is done in renderShape() called from evaluateFrame()",
          "    this.currentFrame = frame;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:274:49",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 274,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Called when layer properties are updated",
          "   */"
        ],
        "after": [
          "    // Check for shape data updates",
          "    if (properties.data) {",
          "      this.shapeData = properties.data as ShapeLayerData;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:282:36",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 282,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "onApplyEvaluatedState(state: any): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    // Shape-specific state could include animated shape properties",
          "    if (state.shapeData) {",
          "      this.shapeData = state.shapeData;"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:297:24",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 297,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private renderShape(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Main render function",
          "   */"
        ],
        "after": [
          "    // Clear canvas",
          "    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:546:35",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 546,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validStart = Number.isFinite(start) ? start : 0;",
      "context": {
        "before": [
          "        const offset = this.getAnimatedValue(trim.offset);",
          "",
          "        // Validate animated values (NaN would corrupt trim calculations)"
        ],
        "after": [
          "        const validEnd = Number.isFinite(end) ? end : 100;",
          "        const validOffset = Number.isFinite(offset) ? offset : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:547:33",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 547,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validEnd = Number.isFinite(end) ? end : 100;",
      "context": {
        "before": [
          "",
          "        // Validate animated values (NaN would corrupt trim calculations)",
          "        const validStart = Number.isFinite(start) ? start : 0;"
        ],
        "after": [
          "        const validOffset = Number.isFinite(offset) ? offset : 0;",
          "",
          "        if (trim.mode === \"simultaneously\") {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:548:36",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 548,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOffset = Number.isFinite(offset) ? offset : 0;",
      "context": {
        "before": [
          "        // Validate animated values (NaN would corrupt trim calculations)",
          "        const validStart = Number.isFinite(start) ? start : 0;",
          "        const validEnd = Number.isFinite(end) ? end : 100;"
        ],
        "after": [
          "",
          "        if (trim.mode === \"simultaneously\") {",
          "          return paths.map((p) =>"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:710:27",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 710,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const copies = Number.isFinite(rawCopies) ? Math.floor(rawCopies) : 1;",
      "context": {
        "before": [
          "  ): BezierPath[] {",
          "    const rawCopies = this.getAnimatedValue(repeater.copies);",
          "    // Validate copies (NaN would bypass the <= 1 check and cause issues downstream)"
        ],
        "after": [
          "    if (copies <= 1) return paths;",
          "",
          "    const offset = this.getAnimatedValue(repeater.offset);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:758:4",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 758,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private applyModifier(",
          "    evalPath: EvaluatedPath,",
          "    modifier: ShapeModifier,"
        ],
        "after": [
          "    switch (modifier.type) {",
          "      case \"fill\": {",
          "        const fill = modifier as FillShape;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:834:46",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 834,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private renderPath(evalPath: EvaluatedPath): void {",
      "context": {
        "before": [
          "  /**",
          "   * Render a single evaluated path to canvas",
          "   */"
        ],
        "after": [
          "    const { path, fill, stroke, gradientFill, gradientStroke, groupBlendMode } = evalPath;",
          "",
          "    if (path.vertices.length < 2) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:1010:4",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 1010,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private createExtrudedGeometry(",
          "    paths: BezierPath[],",
          "    extrude: ExtrudeOperator,"
        ],
        "after": [
          "    // Clear existing extrusions",
          "    for (const mesh of this.extrudedMeshes) {",
          "      this.extrudeGroup.remove(mesh);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/ShapeLayer.ts:1074:12",
      "file": "engine/layers/ShapeLayer.ts",
      "line": 1074,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  // CLEANUP",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Dispose texture",
          "    this.texture.dispose();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:72:36",
      "file": "engine/layers/SolidLayer.ts",
      "line": 72,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: layerData.transform?.position?.value,",
      "context": {
        "before": [
          "      color: this.color,",
          "      width: this.width,",
          "      height: this.height,"
        ],
        "after": [
          "      visible: layerData.visible,",
          "    });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:72:46",
      "file": "engine/layers/SolidLayer.ts",
      "line": 72,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: layerData.transform?.position?.value,",
      "context": {
        "before": [
          "      color: this.color,",
          "      width: this.width,",
          "      height: this.height,"
        ],
        "after": [
          "      visible: layerData.visible,",
          "    });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:144:18",
      "file": "engine/layers/SolidLayer.ts",
      "line": 144,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "color: data?.color ?? \"#808080\",",
      "context": {
        "before": [
          "    const data = layerData.data as Partial<SolidData> | undefined;",
          "",
          "    return {"
        ],
        "after": [
          "      width: data?.width ?? 1920,",
          "      height: data?.height ?? 1080,",
          "      animatedColor: data?.animatedColor,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:145:18",
      "file": "engine/layers/SolidLayer.ts",
      "line": 145,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "width: data?.width ?? 1920,",
      "context": {
        "before": [
          "",
          "    return {",
          "      color: data?.color ?? \"#808080\","
        ],
        "after": [
          "      height: data?.height ?? 1080,",
          "      animatedColor: data?.animatedColor,",
          "      shadowCatcher: data?.shadowCatcher ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:146:19",
      "file": "engine/layers/SolidLayer.ts",
      "line": 146,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "height: data?.height ?? 1080,",
      "context": {
        "before": [
          "    return {",
          "      color: data?.color ?? \"#808080\",",
          "      width: data?.width ?? 1920,"
        ],
        "after": [
          "      animatedColor: data?.animatedColor,",
          "      shadowCatcher: data?.shadowCatcher ?? false,",
          "      shadowOpacity: data?.shadowOpacity ?? 50,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:147:26",
      "file": "engine/layers/SolidLayer.ts",
      "line": 147,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatedColor: data?.animatedColor,",
      "context": {
        "before": [
          "      color: data?.color ?? \"#808080\",",
          "      width: data?.width ?? 1920,",
          "      height: data?.height ?? 1080,"
        ],
        "after": [
          "      shadowCatcher: data?.shadowCatcher ?? false,",
          "      shadowOpacity: data?.shadowOpacity ?? 50,",
          "      shadowColor: data?.shadowColor ?? \"#000000\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:148:26",
      "file": "engine/layers/SolidLayer.ts",
      "line": 148,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "shadowCatcher: data?.shadowCatcher ?? false,",
      "context": {
        "before": [
          "      width: data?.width ?? 1920,",
          "      height: data?.height ?? 1080,",
          "      animatedColor: data?.animatedColor,"
        ],
        "after": [
          "      shadowOpacity: data?.shadowOpacity ?? 50,",
          "      shadowColor: data?.shadowColor ?? \"#000000\",",
          "      receiveShadow: data?.receiveShadow ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:149:26",
      "file": "engine/layers/SolidLayer.ts",
      "line": 149,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "shadowOpacity: data?.shadowOpacity ?? 50,",
      "context": {
        "before": [
          "      height: data?.height ?? 1080,",
          "      animatedColor: data?.animatedColor,",
          "      shadowCatcher: data?.shadowCatcher ?? false,"
        ],
        "after": [
          "      shadowColor: data?.shadowColor ?? \"#000000\",",
          "      receiveShadow: data?.receiveShadow ?? false,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:150:24",
      "file": "engine/layers/SolidLayer.ts",
      "line": 150,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "shadowColor: data?.shadowColor ?? \"#000000\",",
      "context": {
        "before": [
          "      animatedColor: data?.animatedColor,",
          "      shadowCatcher: data?.shadowCatcher ?? false,",
          "      shadowOpacity: data?.shadowOpacity ?? 50,"
        ],
        "after": [
          "      receiveShadow: data?.receiveShadow ?? false,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:151:26",
      "file": "engine/layers/SolidLayer.ts",
      "line": 151,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "receiveShadow: data?.receiveShadow ?? false,",
      "context": {
        "before": [
          "      shadowCatcher: data?.shadowCatcher ?? false,",
          "      shadowOpacity: data?.shadowOpacity ?? 50,",
          "      shadowColor: data?.shadowColor ?? \"#000000\","
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:158:26",
      "file": "engine/layers/SolidLayer.ts",
      "line": 158,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setColor(color: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set solid color",
          "   */"
        ],
        "after": [
          "    this.color = color;",
          "    // Only set color on non-shadow materials",
          "    if (!this.shadowCatcher && \"color\" in this.material) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:179:47",
      "file": "engine/layers/SolidLayer.ts",
      "line": 179,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDimensions(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set solid dimensions",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN/0 would create invalid geometry)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:181:31",
      "file": "engine/layers/SolidLayer.ts",
      "line": 181,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
      "context": {
        "before": [
          "   */",
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid geometry)"
        ],
        "after": [
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
          "",
          "    if (validWidth === this.width && validHeight === this.height) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:182:32",
      "file": "engine/layers/SolidLayer.ts",
      "line": 182,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
      "context": {
        "before": [
          "  setDimensions(width: number, height: number): void {",
          "    // Validate dimensions (NaN/0 would create invalid geometry)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;"
        ],
        "after": [
          "",
          "    if (validWidth === this.width && validHeight === this.height) {",
          "      return;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:207:37",
      "file": "engine/layers/SolidLayer.ts",
      "line": 207,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShadowCatcher(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable shadow catcher mode",
          "   */"
        ],
        "after": [
          "    if (enabled === this.shadowCatcher) return;",
          "",
          "    this.shadowCatcher = enabled;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:217:36",
      "file": "engine/layers/SolidLayer.ts",
      "line": 217,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShadowOpacity(opacity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set shadow opacity (0-100)",
          "   */"
        ],
        "after": [
          "    // Validate opacity (NaN bypasses Math.max/min clamp)",
          "    const validOpacity = Number.isFinite(opacity) ? opacity : 50;",
          "    this.shadowOpacity = Math.max(0, Math.min(100, validOpacity));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:219:33",
      "file": "engine/layers/SolidLayer.ts",
      "line": 219,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOpacity = Number.isFinite(opacity) ? opacity : 50;",
      "context": {
        "before": [
          "   */",
          "  setShadowOpacity(opacity: number): void {",
          "    // Validate opacity (NaN bypasses Math.max/min clamp)"
        ],
        "after": [
          "    this.shadowOpacity = Math.max(0, Math.min(100, validOpacity));",
          "    if (this.shadowCatcher && this.material instanceof THREE.ShadowMaterial) {",
          "      this.material.opacity = this.shadowOpacity / 100;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:230:32",
      "file": "engine/layers/SolidLayer.ts",
      "line": 230,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShadowColor(color: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set shadow color",
          "   */"
        ],
        "after": [
          "    this.shadowColor = color;",
          "    if (this.shadowCatcher && this.material instanceof THREE.ShadowMaterial) {",
          "      this.material.color.set(color);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:241:37",
      "file": "engine/layers/SolidLayer.ts",
      "line": 241,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setReceiveShadow(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable shadow receiving",
          "   */"
        ],
        "after": [
          "    if (enabled === this.receiveShadow) return;",
          "",
          "    this.receiveShadow = enabled;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:256:28",
      "file": "engine/layers/SolidLayer.ts",
      "line": 256,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private rebuildMaterial(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Rebuild the material (when mode changes)",
          "   */"
        ],
        "after": [
          "    // Dispose old material",
          "    this.material.dispose();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:277:43",
      "file": "engine/layers/SolidLayer.ts",
      "line": 277,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Evaluate animated color if present (only for non-shadow catcher)",
          "    if (this.animatedColor?.animated && !this.shadowCatcher) {",
          "      const color = this.evaluator.evaluate(this.animatedColor, frame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:279:27",
      "file": "engine/layers/SolidLayer.ts",
      "line": 279,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.animatedColor?.animated && !this.shadowCatcher) {",
      "context": {
        "before": [
          "",
          "  protected onEvaluateFrame(frame: number): void {",
          "    // Evaluate animated color if present (only for non-shadow catcher)"
        ],
        "after": [
          "      const color = this.evaluator.evaluate(this.animatedColor, frame);",
          "      if (\"color\" in this.material) {",
          "        ("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:292:4",
      "file": "engine/layers/SolidLayer.ts",
      "line": 292,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    // Apply evaluated color if present in properties (only for non-shadow catcher)",
          "    if (state.properties.color !== undefined && !this.shadowCatcher) {",
          "      if (\"color\" in this.material) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:313:49",
      "file": "engine/layers/SolidLayer.ts",
      "line": 313,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<SolidData> | undefined;",
          "",
          "    // Handle shadow catcher mode change (must be first - triggers material rebuild)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:317:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 317,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.shadowCatcher !== undefined) {",
      "context": {
        "before": [
          "    const data = properties.data as Partial<SolidData> | undefined;",
          "",
          "    // Handle shadow catcher mode change (must be first - triggers material rebuild)"
        ],
        "after": [
          "      this.setShadowCatcher(data.shadowCatcher);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:322:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 322,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.receiveShadow !== undefined) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Handle receive shadow change"
        ],
        "after": [
          "      this.setReceiveShadow(data.receiveShadow);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:326:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 326,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.color !== undefined) {",
      "context": {
        "before": [
          "      this.setReceiveShadow(data.receiveShadow);",
          "    }",
          ""
        ],
        "after": [
          "      this.setColor(data.color);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:330:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 330,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.width !== undefined || data?.height !== undefined) {",
      "context": {
        "before": [
          "      this.setColor(data.color);",
          "    }",
          ""
        ],
        "after": [
          "      this.setDimensions(",
          "        data?.width ?? this.width,",
          "        data?.height ?? this.height,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:330:42",
      "file": "engine/layers/SolidLayer.ts",
      "line": 330,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.width !== undefined || data?.height !== undefined) {",
      "context": {
        "before": [
          "      this.setColor(data.color);",
          "    }",
          ""
        ],
        "after": [
          "      this.setDimensions(",
          "        data?.width ?? this.width,",
          "        data?.height ?? this.height,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:332:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 332,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data?.width ?? this.width,",
      "context": {
        "before": [
          "",
          "    if (data?.width !== undefined || data?.height !== undefined) {",
          "      this.setDimensions("
        ],
        "after": [
          "        data?.height ?? this.height,",
          "      );",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:333:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 333,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data?.height ?? this.height,",
      "context": {
        "before": [
          "    if (data?.width !== undefined || data?.height !== undefined) {",
          "      this.setDimensions(",
          "        data?.width ?? this.width,"
        ],
        "after": [
          "      );",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:338:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 338,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.shadowOpacity !== undefined) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Shadow catcher specific properties"
        ],
        "after": [
          "      this.setShadowOpacity(data.shadowOpacity);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:342:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 342,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.shadowColor !== undefined) {",
      "context": {
        "before": [
          "      this.setShadowOpacity(data.shadowOpacity);",
          "    }",
          ""
        ],
        "after": [
          "      this.setShadowColor(data.shadowColor);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:347:13",
      "file": "engine/layers/SolidLayer.ts",
      "line": 347,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.animatedColor !== undefined) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Update animated color property"
        ],
        "after": [
          "      this.animatedColor = data.animatedColor;",
          "    }",
          "    // Note: labelColor is for timeline organization only, not visual fill color"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SolidLayer.ts:353:24",
      "file": "engine/layers/SolidLayer.ts",
      "line": 353,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    // Note: labelColor is for timeline organization only, not visual fill color",
          "  }",
          ""
        ],
        "after": [
          "    this.geometry.dispose();",
          "    this.material.dispose();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:143:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 143,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.trimStartProp = data?.trimStart;",
      "context": {
        "before": [
          "",
          "    // Extract trim properties",
          "    const data = layerData.data as SplineData | null;"
        ],
        "after": [
          "    this.trimEndProp = data?.trimEnd;",
          "    this.trimOffsetProp = data?.trimOffset;",
          "    this.pathEffects = data?.pathEffects;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:144:28",
      "file": "engine/layers/SplineLayer.ts",
      "line": 144,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.trimEndProp = data?.trimEnd;",
      "context": {
        "before": [
          "    // Extract trim properties",
          "    const data = layerData.data as SplineData | null;",
          "    this.trimStartProp = data?.trimStart;"
        ],
        "after": [
          "    this.trimOffsetProp = data?.trimOffset;",
          "    this.pathEffects = data?.pathEffects;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:145:31",
      "file": "engine/layers/SplineLayer.ts",
      "line": 145,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.trimOffsetProp = data?.trimOffset;",
      "context": {
        "before": [
          "    const data = layerData.data as SplineData | null;",
          "    this.trimStartProp = data?.trimStart;",
          "    this.trimEndProp = data?.trimEnd;"
        ],
        "after": [
          "    this.pathEffects = data?.pathEffects;",
          "",
          "    // Initialize LOD if enabled and path is complex enough"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:146:28",
      "file": "engine/layers/SplineLayer.ts",
      "line": 146,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.pathEffects = data?.pathEffects;",
      "context": {
        "before": [
          "    this.trimStartProp = data?.trimStart;",
          "    this.trimEndProp = data?.trimEnd;",
          "    this.trimOffsetProp = data?.trimOffset;"
        ],
        "after": [
          "",
          "    // Initialize LOD if enabled and path is complex enough",
          "    this.initializeLOD(data);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:168:26",
      "file": "engine/layers/SplineLayer.ts",
      "line": 168,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "controlPoints: data?.controlPoints ?? [],",
      "context": {
        "before": [
          "    const data = layerData.data as SplineData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      closed: data?.closed ?? false,",
          "      stroke: data?.stroke ?? \"#00ff00\",",
          "      strokeWidth: data?.strokeWidth ?? 2,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:169:19",
      "file": "engine/layers/SplineLayer.ts",
      "line": 169,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "closed: data?.closed ?? false,",
      "context": {
        "before": [
          "",
          "    return {",
          "      controlPoints: data?.controlPoints ?? [],"
        ],
        "after": [
          "      stroke: data?.stroke ?? \"#00ff00\",",
          "      strokeWidth: data?.strokeWidth ?? 2,",
          "      fill: data?.fill ?? \"\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:170:19",
      "file": "engine/layers/SplineLayer.ts",
      "line": 170,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "stroke: data?.stroke ?? \"#00ff00\",",
      "context": {
        "before": [
          "    return {",
          "      controlPoints: data?.controlPoints ?? [],",
          "      closed: data?.closed ?? false,"
        ],
        "after": [
          "      strokeWidth: data?.strokeWidth ?? 2,",
          "      fill: data?.fill ?? \"\",",
          "      pathData: data?.pathData ?? \"\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:171:24",
      "file": "engine/layers/SplineLayer.ts",
      "line": 171,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "strokeWidth: data?.strokeWidth ?? 2,",
      "context": {
        "before": [
          "      controlPoints: data?.controlPoints ?? [],",
          "      closed: data?.closed ?? false,",
          "      stroke: data?.stroke ?? \"#00ff00\","
        ],
        "after": [
          "      fill: data?.fill ?? \"\",",
          "      pathData: data?.pathData ?? \"\",",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:172:17",
      "file": "engine/layers/SplineLayer.ts",
      "line": 172,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fill: data?.fill ?? \"\",",
      "context": {
        "before": [
          "      closed: data?.closed ?? false,",
          "      stroke: data?.stroke ?? \"#00ff00\",",
          "      strokeWidth: data?.strokeWidth ?? 2,"
        ],
        "after": [
          "      pathData: data?.pathData ?? \"\",",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:173:21",
      "file": "engine/layers/SplineLayer.ts",
      "line": 173,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathData: data?.pathData ?? \"\",",
      "context": {
        "before": [
          "      stroke: data?.stroke ?? \"#00ff00\",",
          "      strokeWidth: data?.strokeWidth ?? 2,",
          "      fill: data?.fill ?? \"\","
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:180:49",
      "file": "engine/layers/SplineLayer.ts",
      "line": 180,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeLOD(data: SplineData | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize LOD levels for complex paths",
          "   */"
        ],
        "after": [
          "    if (!data) return;",
          "",
          "    // Check if LOD settings exist in the data"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:190:20",
      "file": "engine/layers/SplineLayer.ts",
      "line": 190,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (lodSettings?.enabled || shouldAutoEnable) {",
      "context": {
        "before": [
          "    // Auto-enable LOD for complex paths (>100 points)",
          "    const shouldAutoEnable = points.length > 100;",
          ""
        ],
        "after": [
          "      this.lodEnabled = true;",
          "",
          "      // Use pre-generated levels if available, otherwise generate them"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:194:22",
      "file": "engine/layers/SplineLayer.ts",
      "line": 194,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (lodSettings?.levels && lodSettings.levels.length > 0) {",
      "context": {
        "before": [
          "      this.lodEnabled = true;",
          "",
          "      // Use pre-generated levels if available, otherwise generate them"
        ],
        "after": [
          "        this.lodLevels = lodSettings.levels.map((level) => ({",
          "          tolerance: level.tolerance,",
          "          controlPoints: level.controlPoints,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:207:38",
      "file": "engine/layers/SplineLayer.ts",
      "line": 207,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const tolerance = lodSettings?.simplificationTolerance ?? 2.0;",
      "context": {
        "before": [
          "        });",
          "      } else {",
          "        // Generate LOD levels on-the-fly"
        ],
        "after": [
          "        this.lodLevels = vectorLOD.generateLODLevels(",
          "          this.layerData.id,",
          "          points,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:221:56",
      "file": "engine/layers/SplineLayer.ts",
      "line": 221,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public updateLODContext(context: Partial<LODContext>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update LOD context (call this when playback state changes)",
          "   */"
        ],
        "after": [
          "    this.lodContext = { ...this.lodContext, ...context };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:228:50",
      "file": "engine/layers/SplineLayer.ts",
      "line": 228,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeWarp(data: SplineData | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize mesh warp deformation from layer data",
          "   */"
        ],
        "after": [
          "    // Support both new 'warpPins' and deprecated 'puppetPins' property names",
          "    const pins = data?.warpPins ?? data?.puppetPins;",
          "    if (!data || !pins || pins.length === 0) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:230:22",
      "file": "engine/layers/SplineLayer.ts",
      "line": 230,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const pins = data?.warpPins ?? data?.puppetPins;",
      "context": {
        "before": [
          "   */",
          "  private initializeWarp(data: SplineData | null): void {",
          "    // Support both new 'warpPins' and deprecated 'puppetPins' property names"
        ],
        "after": [
          "    if (!data || !pins || pins.length === 0) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:230:40",
      "file": "engine/layers/SplineLayer.ts",
      "line": 230,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const pins = data?.warpPins ?? data?.puppetPins;",
      "context": {
        "before": [
          "   */",
          "  private initializeWarp(data: SplineData | null): void {",
          "    // Support both new 'warpPins' and deprecated 'puppetPins' property names"
        ],
        "after": [
          "    if (!data || !pins || pins.length === 0) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:246:26",
      "file": "engine/layers/SplineLayer.ts",
      "line": 246,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public enableWarpMode(): void {",
      "context": {
        "before": [
          "   * Enable mesh warp deformation mode",
          "   * Creates a deformation mesh from current control points",
          "   */"
        ],
        "after": [
          "    if (this.warpEnabled) return;",
          "",
          "    this.warpEnabled = true;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:262:28",
      "file": "engine/layers/SplineLayer.ts",
      "line": 262,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public enablePuppetMode(): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use enableWarpMode instead */"
        ],
        "after": [
          "    return this.enableWarpMode();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:269:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 269,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public disableWarpMode(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Disable mesh warp deformation mode",
          "   */"
        ],
        "after": [
          "    if (!this.warpEnabled) return;",
          "",
          "    this.warpEnabled = false;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:280:29",
      "file": "engine/layers/SplineLayer.ts",
      "line": 280,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public disablePuppetMode(): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use disableWarpMode instead */"
        ],
        "after": [
          "    return this.disableWarpMode();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:340:38",
      "file": "engine/layers/SplineLayer.ts",
      "line": 340,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public removeWarpPin(pinId: string): void {",
      "context": {
        "before": [
          "   * Remove a warp pin by ID",
          "   * @param pinId - The ID of the pin to remove",
          "   */"
        ],
        "after": [
          "    const index = this.warpPins.findIndex((p) => p.id === pinId);",
          "    if (index === -1) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:356:40",
      "file": "engine/layers/SplineLayer.ts",
      "line": 356,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public removePuppetPin(pinId: string): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use removeWarpPin instead */"
        ],
        "after": [
          "    return this.removeWarpPin(pinId);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:378:68",
      "file": "engine/layers/SplineLayer.ts",
      "line": 378,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public updateWarpPinPosition(pinId: string, x: number, y: number): void {",
      "context": {
        "before": [
          "   * @param x - New X position",
          "   * @param y - New Y position",
          "   */"
        ],
        "after": [
          "    const pin = this.warpPins.find((p) => p.id === pinId);",
          "    if (!pin) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:383:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 383,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validX = Number.isFinite(x) ? x : 0;",
      "context": {
        "before": [
          "    if (!pin) return;",
          "",
          "    // Validate coordinates (NaN would corrupt warp mesh calculations)"
        ],
        "after": [
          "    const validY = Number.isFinite(y) ? y : 0;",
          "",
          "    pin.position.value = { x: validX, y: validY };"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:384:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 384,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validY = Number.isFinite(y) ? y : 0;",
      "context": {
        "before": [
          "",
          "    // Validate coordinates (NaN would corrupt warp mesh calculations)",
          "    const validX = Number.isFinite(x) ? x : 0;"
        ],
        "after": [
          "",
          "    pin.position.value = { x: validX, y: validY };",
          "    meshWarpDeformation.updatePinPosition("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:398:70",
      "file": "engine/layers/SplineLayer.ts",
      "line": 398,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public updatePuppetPinPosition(pinId: string, x: number, y: number): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use updateWarpPinPosition instead */"
        ],
        "after": [
          "    return this.updateWarpPinPosition(pinId, x, y);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:406:38",
      "file": "engine/layers/SplineLayer.ts",
      "line": 406,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public setWarpPins(pins: WarpPin[]): void {",
      "context": {
        "before": [
          "   * Set warp pins (replacing all existing pins)",
          "   * @param pins - Array of warp pins",
          "   */"
        ],
        "after": [
          "    this.warpPins = pins;",
          "",
          "    if (pins.length > 0) {"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:422:40",
      "file": "engine/layers/SplineLayer.ts",
      "line": 422,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public setPuppetPins(pins: WarpPin[]): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** @deprecated Use setWarpPins instead */"
        ],
        "after": [
          "    return this.setWarpPins(pins);",
          "  }",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:429:24",
      "file": "engine/layers/SplineLayer.ts",
      "line": 429,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private buildSpline(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Build the Three.js spline from control points",
          "   */"
        ],
        "after": [
          "    // Clear existing meshes",
          "    this.clearMeshes();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:452:23",
      "file": "engine/layers/SplineLayer.ts",
      "line": 452,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p0.handleOut?.x ?? p0.x,",
      "context": {
        "before": [
          "      const bezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p0.handleOut?.y ?? p0.y),",
          "          z0,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:453:25",
      "file": "engine/layers/SplineLayer.ts",
      "line": 453,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p0.handleOut?.y ?? p0.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3(",
          "          p0.handleOut?.x ?? p0.x,"
        ],
        "after": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:457:22",
      "file": "engine/layers/SplineLayer.ts",
      "line": 457,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p1.handleIn?.x ?? p1.x,",
      "context": {
        "before": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p1.handleIn?.y ?? p1.y),",
          "          z1,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:458:24",
      "file": "engine/layers/SplineLayer.ts",
      "line": 458,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p1.handleIn?.y ?? p1.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          p1.handleIn?.x ?? p1.x,"
        ],
        "after": [
          "          z1,",
          "        ),",
          "        new THREE.Vector3(p1.x, -p1.y, z1),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:479:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 479,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lastPoint.handleOut?.x ?? lastPoint.x,",
      "context": {
        "before": [
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(lastPoint.handleOut?.y ?? lastPoint.y),",
          "          zLast,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:480:32",
      "file": "engine/layers/SplineLayer.ts",
      "line": 480,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(lastPoint.handleOut?.y ?? lastPoint.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3(",
          "          lastPoint.handleOut?.x ?? lastPoint.x,"
        ],
        "after": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:484:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 484,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "firstPoint.handleIn?.x ?? firstPoint.x,",
      "context": {
        "before": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(firstPoint.handleIn?.y ?? firstPoint.y),",
          "          zFirst,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:485:32",
      "file": "engine/layers/SplineLayer.ts",
      "line": 485,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(firstPoint.handleIn?.y ?? firstPoint.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          firstPoint.handleIn?.x ?? firstPoint.x,"
        ],
        "after": [
          "          zFirst,",
          "        ),",
          "        new THREE.Vector3(firstPoint.x, -firstPoint.y, zFirst),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:532:51",
      "file": "engine/layers/SplineLayer.ts",
      "line": 532,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createFill(curvePoints: THREE.Vector3[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create fill mesh for closed paths",
          "   */"
        ],
        "after": [
          "    if (curvePoints.length < 3) return;",
          "",
          "    // Create shape from points (project to XY plane)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:562:24",
      "file": "engine/layers/SplineLayer.ts",
      "line": 562,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private clearMeshes(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear existing meshes",
          "   */"
        ],
        "after": [
          "    if (this.lineMesh) {",
          "      this.group.remove(this.lineMesh);",
          "      this.lineMesh.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:590:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 590,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validT = Number.isFinite(t) ? Math.max(0, Math.min(1, t)) : 0;",
      "context": {
        "before": [
          "  getPointAt(t: number): THREE.Vector3 | null {",
          "    if (!this.curve) return null;",
          "    // Validate t (NaN bypasses Math.max/min clamp)"
        ],
        "after": [
          "    return this.curve.getPointAt(validT);",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:600:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 600,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validT = Number.isFinite(t) ? Math.max(0, Math.min(1, t)) : 0;",
      "context": {
        "before": [
          "  getTangentAt(t: number): THREE.Vector3 | null {",
          "    if (!this.curve) return null;",
          "    // Validate t (NaN bypasses Math.max/min clamp)"
        ],
        "after": [
          "    return this.curve.getTangentAt(validT);",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:643:27",
      "file": "engine/layers/SplineLayer.ts",
      "line": 643,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setStroke(color: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set stroke color",
          "   */"
        ],
        "after": [
          "    this.splineData.stroke = color;",
          "    if (this.lineMesh) {",
          "      (this.lineMesh.material as LineMaterial).color.set(color);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:653:32",
      "file": "engine/layers/SplineLayer.ts",
      "line": 653,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setStrokeWidth(width: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set stroke width",
          "   */"
        ],
        "after": [
          "    // Validate width (NaN/0 would corrupt LineMaterial rendering)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 2;",
          "    this.splineData.strokeWidth = validWidth;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:655:31",
      "file": "engine/layers/SplineLayer.ts",
      "line": 655,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 2;",
      "context": {
        "before": [
          "   */",
          "  setStrokeWidth(width: number): void {",
          "    // Validate width (NaN/0 would corrupt LineMaterial rendering)"
        ],
        "after": [
          "    this.splineData.strokeWidth = validWidth;",
          "    if (this.lineMesh) {",
          "      (this.lineMesh.material as LineMaterial).linewidth = validWidth;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:666:25",
      "file": "engine/layers/SplineLayer.ts",
      "line": 666,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFill(color: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set fill color",
          "   */"
        ],
        "after": [
          "    this.splineData.fill = color;",
          "    if (this.fillMesh) {",
          "      (this.fillMesh.material as THREE.MeshBasicMaterial).color.set(color);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:682:47",
      "file": "engine/layers/SplineLayer.ts",
      "line": 682,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setResolution(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set resolution for line material (call when canvas resizes)",
          "   */"
        ],
        "after": [
          "    // Validate dimensions (NaN would corrupt LineMaterial resolution)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:684:31",
      "file": "engine/layers/SplineLayer.ts",
      "line": 684,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;",
      "context": {
        "before": [
          "   */",
          "  setResolution(width: number, height: number): void {",
          "    // Validate dimensions (NaN would corrupt LineMaterial resolution)"
        ],
        "after": [
          "    const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
          "    this.resolution.set(validWidth, validHeight);",
          "    if (this.lineMesh) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:685:32",
      "file": "engine/layers/SplineLayer.ts",
      "line": 685,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validHeight = Number.isFinite(height) && height > 0 ? height : 1080;",
      "context": {
        "before": [
          "  setResolution(width: number, height: number): void {",
          "    // Validate dimensions (NaN would corrupt LineMaterial resolution)",
          "    const validWidth = Number.isFinite(width) && width > 0 ? width : 1920;"
        ],
        "after": [
          "    this.resolution.set(validWidth, validHeight);",
          "    if (this.lineMesh) {",
          "      (this.lineMesh.material as LineMaterial).resolution.set("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:698:43",
      "file": "engine/layers/SplineLayer.ts",
      "line": 698,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setControlPoints(points: ControlPoint[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update control points (static)",
          "   */"
        ],
        "after": [
          "    this.splineData.controlPoints = points;",
          "    // Clear animated points when setting static points",
          "    this.animatedPoints = null;"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:710:61",
      "file": "engine/layers/SplineLayer.ts",
      "line": 710,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnimatedControlPoints(points: AnimatableControlPoint[]): void {",
      "context": {
        "before": [
          "   * Set animated control points",
          "   * Enables animation mode for this spline",
          "   */"
        ],
        "after": [
          "    this.animatedPoints = points;",
          "    this.splineData.animatedControlPoints = points;",
          "    this.splineData.animated = true;"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:744:21",
      "file": "engine/layers/SplineLayer.ts",
      "line": 744,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableAnimation(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Disable animation and convert back to static control points",
          "   */"
        ],
        "after": [
          "    if (!this.animatedPoints) return;",
          "",
          "    const { animatableToControlPoint } = require(\"@/types/project\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:767:29",
      "file": "engine/layers/SplineLayer.ts",
      "line": 767,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setClosed(closed: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set closed state",
          "   */"
        ],
        "after": [
          "    if (this.splineData.closed === closed) return;",
          "    this.splineData.closed = closed;",
          "    this.buildSpline();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:788:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 788,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTrimStart(value: number): void {",
      "context": {
        "before": [
          "   * Set trim start (static value)",
          "   * @param value - Trim start percentage (0-100)",
          "   */"
        ],
        "after": [
          "    this.trimStartProp = value;",
          "    this.lastPointsHash = \"\"; // Force rebuild",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:797:28",
      "file": "engine/layers/SplineLayer.ts",
      "line": 797,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTrimEnd(value: number): void {",
      "context": {
        "before": [
          "   * Set trim end (static value)",
          "   * @param value - Trim end percentage (0-100)",
          "   */"
        ],
        "after": [
          "    this.trimEndProp = value;",
          "    this.lastPointsHash = \"\"; // Force rebuild",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:806:31",
      "file": "engine/layers/SplineLayer.ts",
      "line": 806,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTrimOffset(value: number): void {",
      "context": {
        "before": [
          "   * Set trim offset (static value)",
          "   * @param value - Trim offset in degrees",
          "   */"
        ],
        "after": [
          "    this.trimOffsetProp = value;",
          "    this.lastPointsHash = \"\"; // Force rebuild",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:815:57",
      "file": "engine/layers/SplineLayer.ts",
      "line": 815,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnimatedTrimStart(prop: AnimatableProperty<number>): void {",
      "context": {
        "before": [
          "   * Set animated trim start property",
          "   * @param prop - AnimatableProperty for trim start",
          "   */"
        ],
        "after": [
          "    this.trimStartProp = prop;",
          "    this.lastPointsHash = \"\";",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:824:55",
      "file": "engine/layers/SplineLayer.ts",
      "line": 824,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnimatedTrimEnd(prop: AnimatableProperty<number>): void {",
      "context": {
        "before": [
          "   * Set animated trim end property",
          "   * @param prop - AnimatableProperty for trim end",
          "   */"
        ],
        "after": [
          "    this.trimEndProp = prop;",
          "    this.lastPointsHash = \"\";",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:833:58",
      "file": "engine/layers/SplineLayer.ts",
      "line": 833,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnimatedTrimOffset(prop: AnimatableProperty<number>): void {",
      "context": {
        "before": [
          "   * Set animated trim offset property",
          "   * @param prop - AnimatableProperty for trim offset",
          "   */"
        ],
        "after": [
          "    this.trimOffsetProp = prop;",
          "    this.lastPointsHash = \"\";",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:866:46",
      "file": "engine/layers/SplineLayer.ts",
      "line": 866,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPathEffects(effects: SplinePathEffect[]): void {",
      "context": {
        "before": [
          "   * Set path effects",
          "   * @param effects - Array of path effects to apply",
          "   */"
        ],
        "after": [
          "    this.pathEffects = effects;",
          "    this.lastPointsHash = \"\"; // Force rebuild",
          "  }"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1062:28",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1062,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.pathEffects?.some((e) => e.enabled) ?? false;",
      "context": {
        "before": [
          "   * Check if any path effects are enabled",
          "   */",
          "  private hasActivePathEffects(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1298:4",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1298,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  private buildSplineFromEvaluatedPoints(",
          "    points: EvaluatedControlPoint[],"
        ],
        "after": [
          "    // Clear existing meshes",
          "    this.clearMeshes();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1320:23",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1320,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p0.handleOut?.x ?? p0.x,",
      "context": {
        "before": [
          "      const bezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p0.handleOut?.y ?? p0.y),",
          "          z0,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1321:25",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1321,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p0.handleOut?.y ?? p0.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3(",
          "          p0.handleOut?.x ?? p0.x,"
        ],
        "after": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1325:22",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1325,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p1.handleIn?.x ?? p1.x,",
      "context": {
        "before": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p1.handleIn?.y ?? p1.y),",
          "          z1,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1326:24",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1326,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p1.handleIn?.y ?? p1.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          p1.handleIn?.x ?? p1.x,"
        ],
        "after": [
          "          z1,",
          "        ),",
          "        new THREE.Vector3(p1.x, -p1.y, z1),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1347:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1347,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lastPoint.handleOut?.x ?? lastPoint.x,",
      "context": {
        "before": [
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(lastPoint.handleOut?.y ?? lastPoint.y),",
          "          zLast,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1348:32",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1348,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(lastPoint.handleOut?.y ?? lastPoint.y),",
      "context": {
        "before": [
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3(",
          "          lastPoint.handleOut?.x ?? lastPoint.x,"
        ],
        "after": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1352:30",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1352,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "firstPoint.handleIn?.x ?? firstPoint.x,",
      "context": {
        "before": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(firstPoint.handleIn?.y ?? firstPoint.y),",
          "          zFirst,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1353:32",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1353,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(firstPoint.handleIn?.y ?? firstPoint.y),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          firstPoint.handleIn?.x ?? firstPoint.x,"
        ],
        "after": [
          "          zFirst,",
          "        ),",
          "        new THREE.Vector3(firstPoint.x, -firstPoint.y, zFirst),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1400:43",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1400,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // ABSTRACT IMPLEMENTATIONS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Evaluate trim properties (these may be animated even if control points aren't)",
          "    const trimStart = this.evaluateStaticOrAnimated(",
          "      this.trimStartProp,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1563:4",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1563,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    // Apply evaluated control points if present"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1662:49",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1662,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "    });",
          "  }",
          ""
        ],
        "after": [
          "    const data = properties.data as SplineData | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/SplineLayer.ts:1742:24",
      "file": "engine/layers/SplineLayer.ts",
      "line": 1742,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.clearMeshes();",
          "",
          "    // Clean up mesh warp deformation mesh"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:243:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 243,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "text: data?.text ?? \"Text\",",
      "context": {
        "before": [
          "    const data = layerData.data as TextData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      fontFamily: data?.fontFamily ?? \"Impact\",",
          "      fontSize: data?.fontSize ?? 72,",
          "      fontWeight: data?.fontWeight ?? \"400\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:244:23",
      "file": "engine/layers/TextLayer.ts",
      "line": 244,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontFamily: data?.fontFamily ?? \"Impact\",",
      "context": {
        "before": [
          "",
          "    return {",
          "      text: data?.text ?? \"Text\","
        ],
        "after": [
          "      fontSize: data?.fontSize ?? 72,",
          "      fontWeight: data?.fontWeight ?? \"400\",",
          "      fontStyle: data?.fontStyle ?? \"normal\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:245:21",
      "file": "engine/layers/TextLayer.ts",
      "line": 245,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontSize: data?.fontSize ?? 72,",
      "context": {
        "before": [
          "    return {",
          "      text: data?.text ?? \"Text\",",
          "      fontFamily: data?.fontFamily ?? \"Impact\","
        ],
        "after": [
          "      fontWeight: data?.fontWeight ?? \"400\",",
          "      fontStyle: data?.fontStyle ?? \"normal\",",
          "      fill: data?.fill ?? \"#ffffff\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:246:23",
      "file": "engine/layers/TextLayer.ts",
      "line": 246,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontWeight: data?.fontWeight ?? \"400\",",
      "context": {
        "before": [
          "      text: data?.text ?? \"Text\",",
          "      fontFamily: data?.fontFamily ?? \"Impact\",",
          "      fontSize: data?.fontSize ?? 72,"
        ],
        "after": [
          "      fontStyle: data?.fontStyle ?? \"normal\",",
          "      fill: data?.fill ?? \"#ffffff\",",
          "      stroke: data?.stroke ?? \"\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:247:22",
      "file": "engine/layers/TextLayer.ts",
      "line": 247,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontStyle: data?.fontStyle ?? \"normal\",",
      "context": {
        "before": [
          "      fontFamily: data?.fontFamily ?? \"Impact\",",
          "      fontSize: data?.fontSize ?? 72,",
          "      fontWeight: data?.fontWeight ?? \"400\","
        ],
        "after": [
          "      fill: data?.fill ?? \"#ffffff\",",
          "      stroke: data?.stroke ?? \"\",",
          "      strokeWidth: data?.strokeWidth ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:248:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 248,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fill: data?.fill ?? \"#ffffff\",",
      "context": {
        "before": [
          "      fontSize: data?.fontSize ?? 72,",
          "      fontWeight: data?.fontWeight ?? \"400\",",
          "      fontStyle: data?.fontStyle ?? \"normal\","
        ],
        "after": [
          "      stroke: data?.stroke ?? \"\",",
          "      strokeWidth: data?.strokeWidth ?? 0,",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:249:19",
      "file": "engine/layers/TextLayer.ts",
      "line": 249,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "stroke: data?.stroke ?? \"\",",
      "context": {
        "before": [
          "      fontWeight: data?.fontWeight ?? \"400\",",
          "      fontStyle: data?.fontStyle ?? \"normal\",",
          "      fill: data?.fill ?? \"#ffffff\","
        ],
        "after": [
          "      strokeWidth: data?.strokeWidth ?? 0,",
          "",
          "      // Character properties"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:250:24",
      "file": "engine/layers/TextLayer.ts",
      "line": 250,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "strokeWidth: data?.strokeWidth ?? 0,",
      "context": {
        "before": [
          "      fontStyle: data?.fontStyle ?? \"normal\",",
          "      fill: data?.fill ?? \"#ffffff\",",
          "      stroke: data?.stroke ?? \"\","
        ],
        "after": [
          "",
          "      // Character properties",
          "      tracking: data?.tracking ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:253:21",
      "file": "engine/layers/TextLayer.ts",
      "line": 253,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "tracking: data?.tracking ?? 0,",
      "context": {
        "before": [
          "      strokeWidth: data?.strokeWidth ?? 0,",
          "",
          "      // Character properties"
        ],
        "after": [
          "      lineSpacing: data?.lineSpacing ?? 0,",
          "      lineAnchor: data?.lineAnchor ?? 50,",
          "      characterOffset: data?.characterOffset ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:254:24",
      "file": "engine/layers/TextLayer.ts",
      "line": 254,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lineSpacing: data?.lineSpacing ?? 0,",
      "context": {
        "before": [
          "",
          "      // Character properties",
          "      tracking: data?.tracking ?? 0,"
        ],
        "after": [
          "      lineAnchor: data?.lineAnchor ?? 50,",
          "      characterOffset: data?.characterOffset ?? 0,",
          "      characterValue: data?.characterValue ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:255:23",
      "file": "engine/layers/TextLayer.ts",
      "line": 255,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lineAnchor: data?.lineAnchor ?? 50,",
      "context": {
        "before": [
          "      // Character properties",
          "      tracking: data?.tracking ?? 0,",
          "      lineSpacing: data?.lineSpacing ?? 0,"
        ],
        "after": [
          "      characterOffset: data?.characterOffset ?? 0,",
          "      characterValue: data?.characterValue ?? 0,",
          "      blur: data?.blur ?? { x: 0, y: 0 },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:256:28",
      "file": "engine/layers/TextLayer.ts",
      "line": 256,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "characterOffset: data?.characterOffset ?? 0,",
      "context": {
        "before": [
          "      tracking: data?.tracking ?? 0,",
          "      lineSpacing: data?.lineSpacing ?? 0,",
          "      lineAnchor: data?.lineAnchor ?? 50,"
        ],
        "after": [
          "      characterValue: data?.characterValue ?? 0,",
          "      blur: data?.blur ?? { x: 0, y: 0 },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:257:27",
      "file": "engine/layers/TextLayer.ts",
      "line": 257,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "characterValue: data?.characterValue ?? 0,",
      "context": {
        "before": [
          "      lineSpacing: data?.lineSpacing ?? 0,",
          "      lineAnchor: data?.lineAnchor ?? 50,",
          "      characterOffset: data?.characterOffset ?? 0,"
        ],
        "after": [
          "      blur: data?.blur ?? { x: 0, y: 0 },",
          "",
          "      // Paragraph (aliases)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:258:17",
      "file": "engine/layers/TextLayer.ts",
      "line": 258,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "blur: data?.blur ?? { x: 0, y: 0 },",
      "context": {
        "before": [
          "      lineAnchor: data?.lineAnchor ?? 50,",
          "      characterOffset: data?.characterOffset ?? 0,",
          "      characterValue: data?.characterValue ?? 0,"
        ],
        "after": [
          "",
          "      // Paragraph (aliases)",
          "      letterSpacing: data?.letterSpacing ?? data?.tracking ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:261:26",
      "file": "engine/layers/TextLayer.ts",
      "line": 261,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "letterSpacing: data?.letterSpacing ?? data?.tracking ?? 0,",
      "context": {
        "before": [
          "      blur: data?.blur ?? { x: 0, y: 0 },",
          "",
          "      // Paragraph (aliases)"
        ],
        "after": [
          "      lineHeight: data?.lineHeight ?? data?.lineSpacing ?? 1.2,",
          "      textAlign: data?.textAlign ?? \"left\",",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:261:49",
      "file": "engine/layers/TextLayer.ts",
      "line": 261,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "letterSpacing: data?.letterSpacing ?? data?.tracking ?? 0,",
      "context": {
        "before": [
          "      blur: data?.blur ?? { x: 0, y: 0 },",
          "",
          "      // Paragraph (aliases)"
        ],
        "after": [
          "      lineHeight: data?.lineHeight ?? data?.lineSpacing ?? 1.2,",
          "      textAlign: data?.textAlign ?? \"left\",",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:262:23",
      "file": "engine/layers/TextLayer.ts",
      "line": 262,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lineHeight: data?.lineHeight ?? data?.lineSpacing ?? 1.2,",
      "context": {
        "before": [
          "",
          "      // Paragraph (aliases)",
          "      letterSpacing: data?.letterSpacing ?? data?.tracking ?? 0,"
        ],
        "after": [
          "      textAlign: data?.textAlign ?? \"left\",",
          "",
          "      // Path options (full AE parity)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:262:43",
      "file": "engine/layers/TextLayer.ts",
      "line": 262,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lineHeight: data?.lineHeight ?? data?.lineSpacing ?? 1.2,",
      "context": {
        "before": [
          "",
          "      // Paragraph (aliases)",
          "      letterSpacing: data?.letterSpacing ?? data?.tracking ?? 0,"
        ],
        "after": [
          "      textAlign: data?.textAlign ?? \"left\",",
          "",
          "      // Path options (full AE parity)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:263:22",
      "file": "engine/layers/TextLayer.ts",
      "line": 263,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "textAlign: data?.textAlign ?? \"left\",",
      "context": {
        "before": [
          "      // Paragraph (aliases)",
          "      letterSpacing: data?.letterSpacing ?? data?.tracking ?? 0,",
          "      lineHeight: data?.lineHeight ?? data?.lineSpacing ?? 1.2,"
        ],
        "after": [
          "",
          "      // Path options (full AE parity)",
          "      pathLayerId: data?.pathLayerId ?? null,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:266:24",
      "file": "engine/layers/TextLayer.ts",
      "line": 266,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathLayerId: data?.pathLayerId ?? null,",
      "context": {
        "before": [
          "      textAlign: data?.textAlign ?? \"left\",",
          "",
          "      // Path options (full AE parity)"
        ],
        "after": [
          "      pathReversed: data?.pathReversed ?? false,",
          "      pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,",
          "      pathForceAlignment: data?.pathForceAlignment ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:267:25",
      "file": "engine/layers/TextLayer.ts",
      "line": 267,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathReversed: data?.pathReversed ?? false,",
      "context": {
        "before": [
          "",
          "      // Path options (full AE parity)",
          "      pathLayerId: data?.pathLayerId ?? null,"
        ],
        "after": [
          "      pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,",
          "      pathForceAlignment: data?.pathForceAlignment ?? false,",
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:268:36",
      "file": "engine/layers/TextLayer.ts",
      "line": 268,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,",
      "context": {
        "before": [
          "      // Path options (full AE parity)",
          "      pathLayerId: data?.pathLayerId ?? null,",
          "      pathReversed: data?.pathReversed ?? false,"
        ],
        "after": [
          "      pathForceAlignment: data?.pathForceAlignment ?? false,",
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,",
          "      pathLastMargin: data?.pathLastMargin ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:269:31",
      "file": "engine/layers/TextLayer.ts",
      "line": 269,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathForceAlignment: data?.pathForceAlignment ?? false,",
      "context": {
        "before": [
          "      pathLayerId: data?.pathLayerId ?? null,",
          "      pathReversed: data?.pathReversed ?? false,",
          "      pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,"
        ],
        "after": [
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,",
          "      pathLastMargin: data?.pathLastMargin ?? 0,",
          "      pathOffset: data?.pathOffset ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:270:28",
      "file": "engine/layers/TextLayer.ts",
      "line": 270,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathFirstMargin: data?.pathFirstMargin ?? 0,",
      "context": {
        "before": [
          "      pathReversed: data?.pathReversed ?? false,",
          "      pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,",
          "      pathForceAlignment: data?.pathForceAlignment ?? false,"
        ],
        "after": [
          "      pathLastMargin: data?.pathLastMargin ?? 0,",
          "      pathOffset: data?.pathOffset ?? 0,",
          "      pathAlign: data?.pathAlign ?? \"left\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:271:27",
      "file": "engine/layers/TextLayer.ts",
      "line": 271,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathLastMargin: data?.pathLastMargin ?? 0,",
      "context": {
        "before": [
          "      pathPerpendicularToPath: data?.pathPerpendicularToPath ?? true,",
          "      pathForceAlignment: data?.pathForceAlignment ?? false,",
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,"
        ],
        "after": [
          "      pathOffset: data?.pathOffset ?? 0,",
          "      pathAlign: data?.pathAlign ?? \"left\",",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:272:23",
      "file": "engine/layers/TextLayer.ts",
      "line": 272,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathOffset: data?.pathOffset ?? 0,",
      "context": {
        "before": [
          "      pathForceAlignment: data?.pathForceAlignment ?? false,",
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,",
          "      pathLastMargin: data?.pathLastMargin ?? 0,"
        ],
        "after": [
          "      pathAlign: data?.pathAlign ?? \"left\",",
          "",
          "      // More Options"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:273:22",
      "file": "engine/layers/TextLayer.ts",
      "line": 273,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pathAlign: data?.pathAlign ?? \"left\",",
      "context": {
        "before": [
          "      pathFirstMargin: data?.pathFirstMargin ?? 0,",
          "      pathLastMargin: data?.pathLastMargin ?? 0,",
          "      pathOffset: data?.pathOffset ?? 0,"
        ],
        "after": [
          "",
          "      // More Options",
          "      anchorPointGrouping: data?.anchorPointGrouping ?? \"character\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:276:32",
      "file": "engine/layers/TextLayer.ts",
      "line": 276,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchorPointGrouping: data?.anchorPointGrouping ?? \"character\",",
      "context": {
        "before": [
          "      pathAlign: data?.pathAlign ?? \"left\",",
          "",
          "      // More Options"
        ],
        "after": [
          "      groupingAlignment: data?.groupingAlignment ?? { x: 0, y: 0 },",
          "      fillAndStroke: data?.fillAndStroke ?? \"fill-over-stroke\",",
          "      interCharacterBlending: data?.interCharacterBlending ?? \"normal\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:277:30",
      "file": "engine/layers/TextLayer.ts",
      "line": 277,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "groupingAlignment: data?.groupingAlignment ?? { x: 0, y: 0 },",
      "context": {
        "before": [
          "",
          "      // More Options",
          "      anchorPointGrouping: data?.anchorPointGrouping ?? \"character\","
        ],
        "after": [
          "      fillAndStroke: data?.fillAndStroke ?? \"fill-over-stroke\",",
          "      interCharacterBlending: data?.interCharacterBlending ?? \"normal\",",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:278:26",
      "file": "engine/layers/TextLayer.ts",
      "line": 278,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fillAndStroke: data?.fillAndStroke ?? \"fill-over-stroke\",",
      "context": {
        "before": [
          "      // More Options",
          "      anchorPointGrouping: data?.anchorPointGrouping ?? \"character\",",
          "      groupingAlignment: data?.groupingAlignment ?? { x: 0, y: 0 },"
        ],
        "after": [
          "      interCharacterBlending: data?.interCharacterBlending ?? \"normal\",",
          "",
          "      // 3D"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:279:35",
      "file": "engine/layers/TextLayer.ts",
      "line": 279,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "interCharacterBlending: data?.interCharacterBlending ?? \"normal\",",
      "context": {
        "before": [
          "      anchorPointGrouping: data?.anchorPointGrouping ?? \"character\",",
          "      groupingAlignment: data?.groupingAlignment ?? { x: 0, y: 0 },",
          "      fillAndStroke: data?.fillAndStroke ?? \"fill-over-stroke\","
        ],
        "after": [
          "",
          "      // 3D",
          "      perCharacter3D: data?.perCharacter3D ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:282:27",
      "file": "engine/layers/TextLayer.ts",
      "line": 282,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "perCharacter3D: data?.perCharacter3D ?? false,",
      "context": {
        "before": [
          "      interCharacterBlending: data?.interCharacterBlending ?? \"normal\",",
          "",
          "      // 3D"
        ],
        "after": [
          "",
          "      // Text animators",
          "      animators: data?.animators ?? [],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:285:22",
      "file": "engine/layers/TextLayer.ts",
      "line": 285,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animators: data?.animators ?? [],",
      "context": {
        "before": [
          "      perCharacter3D: data?.perCharacter3D ?? false,",
          "",
          "      // Text animators"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:292:56",
      "file": "engine/layers/TextLayer.ts",
      "line": 292,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private extractAnimatableProperties(layerData: Layer): void {",
      "context": {
        "before": [
          "  /**",
          "   * Extract animatable properties from layer.properties array",
          "   */"
        ],
        "after": [
          "    if (!layerData.properties) return;",
          "",
          "    for (const prop of layerData.properties) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:337:27",
      "file": "engine/layers/TextLayer.ts",
      "line": 337,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private syncPathConfig(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Sync path configuration from text data",
          "   */"
        ],
        "after": [
          "    this.pathConfig.pathLayerId = this.textData.pathLayerId;",
          "    this.pathConfig.reversed = this.textData.pathReversed;",
          "    this.pathConfig.perpendicularToPath = this.textData.pathPerpendicularToPath;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:473:4",
      "file": "engine/layers/TextLayer.ts",
      "line": 473,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  setPathFromControlPoints(",
          "    controlPoints: ControlPoint[],",
          "    closed: boolean = false,"
        ],
        "after": [
          "    this.pathControlPoints = controlPoints;",
          "    this.pathClosed = closed;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:496:58",
      "file": "engine/layers/TextLayer.ts",
      "line": 496,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPathFromCurve(curve: THREE.CurvePath<THREE.Vector3>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the path from a THREE.js CurvePath directly",
          "   */"
        ],
        "after": [
          "    this.textOnPath.setCurve(curve);",
          "",
          "    if (!this.perCharacterGroup) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:509:14",
      "file": "engine/layers/TextLayer.ts",
      "line": 509,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearPath(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear the path reference",
          "   */"
        ],
        "after": [
          "    this.textData.pathLayerId = null;",
          "    this.pathConfig.pathLayerId = null;",
          "    this.textOnPath.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:519:29",
      "file": "engine/layers/TextLayer.ts",
      "line": 519,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updatePathLayout(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update character positions along the path",
          "   */"
        ],
        "after": [
          "    if (!this.textOnPath.hasPath() || !this.perCharacterGroup) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:542:60",
      "file": "engine/layers/TextLayer.ts",
      "line": 542,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyPlacements(placements: CharacterPlacement[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply character placements to meshes",
          "   */"
        ],
        "after": [
          "    for (",
          "      let i = 0;",
          "      i < this.characterMeshes.length && i < placements.length;"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:561:28",
      "file": "engine/layers/TextLayer.ts",
      "line": 561,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private resetPathLayout(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset to horizontal layout (no path)",
          "   */"
        ],
        "after": [
          "    if (this.textData.perCharacter3D) {",
          "      this.createCharacterMeshes();",
          "    } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:576:34",
      "file": "engine/layers/TextLayer.ts",
      "line": 576,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private ensureCharacterWidths(): void {",
      "context": {
        "before": [
          "   * with automatic kerning support. Falls back to heuristic widths if",
          "   * the font isn't loaded yet or loading failed.",
          "   */"
        ],
        "after": [
          "    if (!this.characterWidthsDirty) return;",
          "",
          "    this.characterWidths = [];"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:634:33",
      "file": "engine/layers/TextLayer.ts",
      "line": 634,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private enablePerCharacter3D(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable per-character mode (for 3D and path following)",
          "   */"
        ],
        "after": [
          "    if (this.perCharacterGroup) return;",
          "",
          "    // Hide main text mesh"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:652:34",
      "file": "engine/layers/TextLayer.ts",
      "line": 652,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disablePerCharacter3D(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Disable per-character mode",
          "   */"
        ],
        "after": [
          "    if (!this.perCharacterGroup) return;",
          "",
          "    // Show main text mesh"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:669:34",
      "file": "engine/layers/TextLayer.ts",
      "line": 669,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createCharacterMeshes(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create individual character meshes",
          "   */"
        ],
        "after": [
          "    if (!this.perCharacterGroup) return;",
          "",
          "    this.disposeCharacterMeshes();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:747:35",
      "file": "engine/layers/TextLayer.ts",
      "line": 747,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private disposeCharacterMeshes(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose character meshes",
          "   */"
        ],
        "after": [
          "    for (const mesh of this.characterMeshes) {",
          "      mesh.dispose();",
          "      this.perCharacterGroup?.remove(mesh);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:750:29",
      "file": "engine/layers/TextLayer.ts",
      "line": 750,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.perCharacterGroup?.remove(mesh);",
      "context": {
        "before": [
          "  private disposeCharacterMeshes(): void {",
          "    for (const mesh of this.characterMeshes) {",
          "      mesh.dispose();"
        ],
        "after": [
          "    }",
          "    this.characterMeshes = [];",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:759:24",
      "file": "engine/layers/TextLayer.ts",
      "line": 759,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setText(text: string): void {",
      "context": {
        "before": [
          "  // PROPERTY UPDATES",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Cap text length to prevent performance issues (10,000 chars max)",
          "    const MAX_TEXT_LENGTH = 10000;",
          "    const validText = (text ?? \"\").slice(0, MAX_TEXT_LENGTH);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:773:32",
      "file": "engine/layers/TextLayer.ts",
      "line": 773,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFontFamily(family: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.fontFamily = family;",
          "    const fontUrl = this.getFontUrl(family) ?? null;",
          "    this.textMesh.font = fontUrl;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:796:28",
      "file": "engine/layers/TextLayer.ts",
      "line": 796,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFontSize(size: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    // Validate size (NaN/0 would cause division errors in stroke width calculations)",
          "    const validSize = Number.isFinite(size) && size > 0 ? size : 72;",
          "    this.textData.fontSize = validSize;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:798:30",
      "file": "engine/layers/TextLayer.ts",
      "line": 798,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validSize = Number.isFinite(size) && size > 0 ? size : 72;",
      "context": {
        "before": [
          "",
          "  setFontSize(size: number): void {",
          "    // Validate size (NaN/0 would cause division errors in stroke width calculations)"
        ],
        "after": [
          "    this.textData.fontSize = validSize;",
          "    this.textMesh.fontSize = validSize;",
          "    this.textMesh.sync();"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:818:32",
      "file": "engine/layers/TextLayer.ts",
      "line": 818,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFontWeight(weight: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.fontWeight = weight;",
          "    (this.textMesh as any).fontWeight = weight;",
          "    this.textMesh.sync();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:829:30",
      "file": "engine/layers/TextLayer.ts",
      "line": 829,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFontStyle(style: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.fontStyle = style as \"normal\" | \"italic\";",
          "    (this.textMesh as any).fontStyle = style;",
          "    this.textMesh.sync();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:840:30",
      "file": "engine/layers/TextLayer.ts",
      "line": 840,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFillColor(color: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.fill = color;",
          "    this.textMesh.color = color;",
          "    // Force material update for color changes"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:856:42",
      "file": "engine/layers/TextLayer.ts",
      "line": 856,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setStroke(color: string, width: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.stroke = color;",
          "    this.textData.strokeWidth = width;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:877:32",
      "file": "engine/layers/TextLayer.ts",
      "line": 877,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTracking(tracking: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    // Validate tracking (NaN would corrupt letter spacing)",
          "    const validTracking = Number.isFinite(tracking) ? tracking : 0;",
          "    this.textData.tracking = validTracking;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:879:34",
      "file": "engine/layers/TextLayer.ts",
      "line": 879,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validTracking = Number.isFinite(tracking) ? tracking : 0;",
      "context": {
        "before": [
          "",
          "  setTracking(tracking: number): void {",
          "    // Validate tracking (NaN would corrupt letter spacing)"
        ],
        "after": [
          "    this.textData.tracking = validTracking;",
          "    this.textMesh.letterSpacing = validTracking / 1000;",
          "    this.textMesh.sync();"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:893:51",
      "file": "engine/layers/TextLayer.ts",
      "line": 893,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTextAlign(align: \"left\" | \"center\" | \"right\"): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.textAlign = align;",
          "    this.textMesh.textAlign = align;",
          "    this.textMesh.anchorX = this.getAnchorX();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:913:32",
      "file": "engine/layers/TextLayer.ts",
      "line": 913,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPathOffset(offset: number): void {",
      "context": {
        "before": [
          "   * Set path offset (0-100%)",
          "   * This is the primary animatable property for text-on-path animation",
          "   */"
        ],
        "after": [
          "    this.textData.pathOffset = offset;",
          "    this.pathConfig.offset = offset;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:925:33",
      "file": "engine/layers/TextLayer.ts",
      "line": 925,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFirstMargin(margin: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set first margin (pixels)",
          "   */"
        ],
        "after": [
          "    this.textData.pathFirstMargin = margin;",
          "    this.pathConfig.firstMargin = margin;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:937:32",
      "file": "engine/layers/TextLayer.ts",
      "line": 937,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLastMargin(margin: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set last margin (pixels)",
          "   */"
        ],
        "after": [
          "    this.textData.pathLastMargin = margin;",
          "    this.pathConfig.lastMargin = margin;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:949:37",
      "file": "engine/layers/TextLayer.ts",
      "line": 949,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPathReversed(reversed: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set path reversed",
          "   */"
        ],
        "after": [
          "    this.textData.pathReversed = reversed;",
          "    this.pathConfig.reversed = reversed;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:961:49",
      "file": "engine/layers/TextLayer.ts",
      "line": 961,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPerpendicularToPath(perpendicular: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set perpendicular to path",
          "   */"
        ],
        "after": [
          "    this.textData.pathPerpendicularToPath = perpendicular;",
          "    this.pathConfig.perpendicularToPath = perpendicular;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:973:36",
      "file": "engine/layers/TextLayer.ts",
      "line": 973,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setForceAlignment(force: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set force alignment",
          "   */"
        ],
        "after": [
          "    this.textData.pathForceAlignment = force;",
          "    this.pathConfig.forceAlignment = force;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:982:56",
      "file": "engine/layers/TextLayer.ts",
      "line": 982,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnchorPointGrouping(grouping: AnchorPointGrouping): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.anchorPointGrouping = grouping;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:986:67",
      "file": "engine/layers/TextLayer.ts",
      "line": 986,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFillAndStroke(order: \"fill-over-stroke\" | \"stroke-over-fill\"): void {",
      "context": {
        "before": [
          "    this.textData.anchorPointGrouping = grouping;",
          "  }",
          ""
        ],
        "after": [
          "    this.textData.fillAndStroke = order;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:994:43",
      "file": "engine/layers/TextLayer.ts",
      "line": 994,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Evaluate animatable text properties",
          "    if (this.fontSizeProp?.animated) {",
          "      const size = this.textEvaluator.evaluate(this.fontSizeProp, frame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:996:26",
      "file": "engine/layers/TextLayer.ts",
      "line": 996,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.fontSizeProp?.animated) {",
      "context": {
        "before": [
          "",
          "  protected onEvaluateFrame(frame: number): void {",
          "    // Evaluate animatable text properties"
        ],
        "after": [
          "      const size = this.textEvaluator.evaluate(this.fontSizeProp, frame);",
          "      this.setFontSize(size);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1001:26",
      "file": "engine/layers/TextLayer.ts",
      "line": 1001,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.trackingProp?.animated) {",
      "context": {
        "before": [
          "      this.setFontSize(size);",
          "    }",
          ""
        ],
        "after": [
          "      const tracking = this.textEvaluator.evaluate(this.trackingProp, frame);",
          "      this.setTracking(tracking);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1006:27",
      "file": "engine/layers/TextLayer.ts",
      "line": 1006,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.fillColorProp?.animated) {",
      "context": {
        "before": [
          "      this.setTracking(tracking);",
          "    }",
          ""
        ],
        "after": [
          "      const color = this.textEvaluator.evaluate(this.fillColorProp, frame);",
          "      this.setFillColor(color);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1011:29",
      "file": "engine/layers/TextLayer.ts",
      "line": 1011,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.strokeColorProp?.animated && this.strokeWidthProp) {",
      "context": {
        "before": [
          "      this.setFillColor(color);",
          "    }",
          ""
        ],
        "after": [
          "      const color = this.textEvaluator.evaluate(this.strokeColorProp, frame);",
          "      const width = this.strokeWidthProp.animated",
          "        ? this.textEvaluator.evaluate(this.strokeWidthProp, frame)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1028:29",
      "file": "engine/layers/TextLayer.ts",
      "line": 1028,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.firstMarginProp?.animated) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // First/Last margin animation"
        ],
        "after": [
          "      const margin = this.textEvaluator.evaluate(this.firstMarginProp, frame);",
          "      this.setFirstMargin(margin);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1033:28",
      "file": "engine/layers/TextLayer.ts",
      "line": 1033,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.lastMarginProp?.animated) {",
      "context": {
        "before": [
          "      this.setFirstMargin(margin);",
          "    }",
          ""
        ],
        "after": [
          "      const margin = this.textEvaluator.evaluate(this.lastMarginProp, frame);",
          "      this.setLastMargin(margin);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1039:33",
      "file": "engine/layers/TextLayer.ts",
      "line": 1039,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.characterTransforms?.animated && this.perCharacterGroup) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Per-character transforms (from characterTransforms property)"
        ],
        "after": [
          "      this.applyCharacterTransforms(frame);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1058:42",
      "file": "engine/layers/TextLayer.ts",
      "line": 1058,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "override setCompositionFps(fps: number): void {",
      "context": {
        "before": [
          "   * Set composition fps for accurate time-based calculations",
          "   * Called by LayerManager when layer is added or composition changes",
          "   */"
        ],
        "after": [
          "    super.setCompositionFps(fps);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1064:4",
      "file": "engine/layers/TextLayer.ts",
      "line": 1064,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "    const frame = state.frame;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1130:33",
      "file": "engine/layers/TextLayer.ts",
      "line": 1130,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.characterTransforms?.animated && this.perCharacterGroup) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Per-character transforms (from characterTransforms property, if animated)"
        ],
        "after": [
          "      this.applyCharacterTransforms(frame);",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1138:50",
      "file": "engine/layers/TextLayer.ts",
      "line": 1138,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyCharacterTransforms(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply per-character animated transforms (additional offsets)",
          "   */"
        ],
        "after": [
          "    if (!this.characterTransforms) return;",
          "",
          "    const transforms = this.textEvaluator.evaluate("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1185:70",
      "file": "engine/layers/TextLayer.ts",
      "line": 1185,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyAnimatorsToCharacters(frame: number, fps: number = 16): void {",
      "context": {
        "before": [
          "   * @param frame Current frame number",
          "   * @param fps Frames per second (default 16)",
          "   */"
        ],
        "after": [
          "    if (!this.perCharacterGroup || this.characterMeshes.length === 0) {",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1313:36",
      "file": "engine/layers/TextLayer.ts",
      "line": 1313,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (animator.wigglySelector?.enabled) {",
      "context": {
        "before": [
          "        }",
          "",
          "        // Apply Wiggly position offset (if wiggly selector is enabled)"
        ],
        "after": [
          "          const wiggleOffset = calculateWigglyOffset(",
          "            i,",
          "            animator.wigglySelector,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1365:49",
      "file": "engine/layers/TextLayer.ts",
      "line": 1365,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  // LAYER UPDATE",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<TextData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1463:51",
      "file": "engine/layers/TextLayer.ts",
      "line": 1463,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected override applyOpacity(opacity: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Override base class opacity to use Troika's fillOpacity",
          "   */"
        ],
        "after": [
          "    // Validate opacity (NaN bypasses Math.max/min clamps)",
          "    const validOpacity = Number.isFinite(opacity) ? opacity : 100;",
          "    const normalizedOpacity = Math.max(0, Math.min(100, validOpacity)) / 100;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1465:33",
      "file": "engine/layers/TextLayer.ts",
      "line": 1465,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validOpacity = Number.isFinite(opacity) ? opacity : 100;",
      "context": {
        "before": [
          "   */",
          "  protected override applyOpacity(opacity: number): void {",
          "    // Validate opacity (NaN bypasses Math.max/min clamps)"
        ],
        "after": [
          "    const normalizedOpacity = Math.max(0, Math.min(100, validOpacity)) / 100;",
          "",
          "    // Apply to main text mesh using Troika's fillOpacity"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1488:48",
      "file": "engine/layers/TextLayer.ts",
      "line": 1488,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const bounds = this.textMesh.textRenderInfo?.blockBounds;",
      "context": {
        "before": [
          "  }",
          "",
          "  getTextBounds(): { width: number; height: number } {"
        ],
        "after": [
          "    if (bounds) {",
          "      return {",
          "        width: bounds[2] - bounds[0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/TextLayer.ts:1514:24",
      "file": "engine/layers/TextLayer.ts",
      "line": 1514,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "  // DISPOSAL",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.textMesh.dispose();",
          "    this.disposeCharacterMeshes();",
          "    this.textOnPath.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:126:20",
      "file": "engine/layers/VideoLayer.ts",
      "line": 126,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetId: data?.assetId ?? null,",
      "context": {
        "before": [
          "    const data = layerData.data as VideoData | null;",
          "",
          "    return {"
        ],
        "after": [
          "      loop: data?.loop ?? false,",
          "      pingPong: data?.pingPong ?? false,",
          "      startTime: data?.startTime ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:127:17",
      "file": "engine/layers/VideoLayer.ts",
      "line": 127,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "loop: data?.loop ?? false,",
      "context": {
        "before": [
          "",
          "    return {",
          "      assetId: data?.assetId ?? null,"
        ],
        "after": [
          "      pingPong: data?.pingPong ?? false,",
          "      startTime: data?.startTime ?? 0,",
          "      endTime: data?.endTime,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:128:21",
      "file": "engine/layers/VideoLayer.ts",
      "line": 128,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pingPong: data?.pingPong ?? false,",
      "context": {
        "before": [
          "    return {",
          "      assetId: data?.assetId ?? null,",
          "      loop: data?.loop ?? false,"
        ],
        "after": [
          "      startTime: data?.startTime ?? 0,",
          "      endTime: data?.endTime,",
          "      speed: data?.speed ?? 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:129:22",
      "file": "engine/layers/VideoLayer.ts",
      "line": 129,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "startTime: data?.startTime ?? 0,",
      "context": {
        "before": [
          "      assetId: data?.assetId ?? null,",
          "      loop: data?.loop ?? false,",
          "      pingPong: data?.pingPong ?? false,"
        ],
        "after": [
          "      endTime: data?.endTime,",
          "      speed: data?.speed ?? 1,",
          "      // Speed map (new naming)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:130:20",
      "file": "engine/layers/VideoLayer.ts",
      "line": 130,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "endTime: data?.endTime,",
      "context": {
        "before": [
          "      loop: data?.loop ?? false,",
          "      pingPong: data?.pingPong ?? false,",
          "      startTime: data?.startTime ?? 0,"
        ],
        "after": [
          "      speed: data?.speed ?? 1,",
          "      // Speed map (new naming)",
          "      speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:131:18",
      "file": "engine/layers/VideoLayer.ts",
      "line": 131,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speed: data?.speed ?? 1,",
      "context": {
        "before": [
          "      pingPong: data?.pingPong ?? false,",
          "      startTime: data?.startTime ?? 0,",
          "      endTime: data?.endTime,"
        ],
        "after": [
          "      // Speed map (new naming)",
          "      speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,",
          "      speedMap: data?.speedMap ?? data?.timeRemap,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:133:28",
      "file": "engine/layers/VideoLayer.ts",
      "line": 133,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,",
      "context": {
        "before": [
          "      endTime: data?.endTime,",
          "      speed: data?.speed ?? 1,",
          "      // Speed map (new naming)"
        ],
        "after": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:133:53",
      "file": "engine/layers/VideoLayer.ts",
      "line": 133,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,",
      "context": {
        "before": [
          "      endTime: data?.endTime,",
          "      speed: data?.speed ?? 1,",
          "      // Speed map (new naming)"
        ],
        "after": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:134:21",
      "file": "engine/layers/VideoLayer.ts",
      "line": 134,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMap: data?.speedMap ?? data?.timeRemap,",
      "context": {
        "before": [
          "      speed: data?.speed ?? 1,",
          "      // Speed map (new naming)",
          "      speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,"
        ],
        "after": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:134:39",
      "file": "engine/layers/VideoLayer.ts",
      "line": 134,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "speedMap: data?.speedMap ?? data?.timeRemap,",
      "context": {
        "before": [
          "      speed: data?.speed ?? 1,",
          "      // Speed map (new naming)",
          "      speedMapEnabled: data?.speedMapEnabled ?? data?.timeRemapEnabled ?? false,"
        ],
        "after": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:137:13",
      "file": "engine/layers/VideoLayer.ts",
      "line": 137,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
      "context": {
        "before": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ],
        "after": [
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      frameBlending: data?.frameBlending ?? \"none\",",
          "      audioEnabled: data?.audioEnabled ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:137:39",
      "file": "engine/layers/VideoLayer.ts",
      "line": 137,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
      "context": {
        "before": [
          "      speedMap: data?.speedMap ?? data?.timeRemap,",
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:"
        ],
        "after": [
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      frameBlending: data?.frameBlending ?? \"none\",",
          "      audioEnabled: data?.audioEnabled ?? true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:138:22",
      "file": "engine/layers/VideoLayer.ts",
      "line": 138,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "timeRemap: data?.timeRemap ?? data?.speedMap,",
      "context": {
        "before": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ],
        "after": [
          "      frameBlending: data?.frameBlending ?? \"none\",",
          "      audioEnabled: data?.audioEnabled ?? true,",
          "      audioLevel: data?.audioLevel ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:138:41",
      "file": "engine/layers/VideoLayer.ts",
      "line": 138,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "timeRemap: data?.timeRemap ?? data?.speedMap,",
      "context": {
        "before": [
          "      // Backwards compatibility aliases",
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,"
        ],
        "after": [
          "      frameBlending: data?.frameBlending ?? \"none\",",
          "      audioEnabled: data?.audioEnabled ?? true,",
          "      audioLevel: data?.audioLevel ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:139:26",
      "file": "engine/layers/VideoLayer.ts",
      "line": 139,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameBlending: data?.frameBlending ?? \"none\",",
      "context": {
        "before": [
          "      timeRemapEnabled:",
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
          "      timeRemap: data?.timeRemap ?? data?.speedMap,"
        ],
        "after": [
          "      audioEnabled: data?.audioEnabled ?? true,",
          "      audioLevel: data?.audioLevel ?? 100,",
          "      posterFrame: data?.posterFrame ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:140:25",
      "file": "engine/layers/VideoLayer.ts",
      "line": 140,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioEnabled: data?.audioEnabled ?? true,",
      "context": {
        "before": [
          "        data?.timeRemapEnabled ?? data?.speedMapEnabled ?? false,",
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      frameBlending: data?.frameBlending ?? \"none\","
        ],
        "after": [
          "      audioLevel: data?.audioLevel ?? 100,",
          "      posterFrame: data?.posterFrame ?? 0,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:141:23",
      "file": "engine/layers/VideoLayer.ts",
      "line": 141,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioLevel: data?.audioLevel ?? 100,",
      "context": {
        "before": [
          "      timeRemap: data?.timeRemap ?? data?.speedMap,",
          "      frameBlending: data?.frameBlending ?? \"none\",",
          "      audioEnabled: data?.audioEnabled ?? true,"
        ],
        "after": [
          "      posterFrame: data?.posterFrame ?? 0,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:142:24",
      "file": "engine/layers/VideoLayer.ts",
      "line": 142,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "posterFrame: data?.posterFrame ?? 0,",
      "context": {
        "before": [
          "      frameBlending: data?.frameBlending ?? \"none\",",
          "      audioEnabled: data?.audioEnabled ?? true,",
          "      audioLevel: data?.audioLevel ?? 100,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:149:34",
      "file": "engine/layers/VideoLayer.ts",
      "line": 149,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createPlaceholderMesh(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create placeholder mesh before video loads",
          "   */"
        ],
        "after": [
          "    // Default size (will be updated when video loads)",
          "    const geometry = new THREE.PlaneGeometry(1, 1);",
          "    this.material = new THREE.MeshBasicMaterial({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:281:26",
      "file": "engine/layers/VideoLayer.ts",
      "line": 281,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.videoElement?.removeEventListener(",
      "context": {
        "before": [
          "      };",
          "",
          "      const cleanup = () => {"
        ],
        "after": [
          "          \"loadedmetadata\",",
          "          onLoadedMetadata,",
          "        );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:285:26",
      "file": "engine/layers/VideoLayer.ts",
      "line": 285,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.videoElement?.removeEventListener(\"error\", onError);",
      "context": {
        "before": [
          "          \"loadedmetadata\",",
          "          onLoadedMetadata,",
          "        );"
        ],
        "after": [
          "      };",
          "",
          "      this.videoElement.addEventListener(\"loadedmetadata\", onLoadedMetadata);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:299:28",
      "file": "engine/layers/VideoLayer.ts",
      "line": 299,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private extractMetadata(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Extract metadata from loaded video",
          "   */"
        ],
        "after": [
          "    if (!this.videoElement) return;",
          "",
          "    const duration = this.videoElement.duration;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:308:30",
      "file": "engine/layers/VideoLayer.ts",
      "line": 308,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fps = this.assetRef?.fps ?? 30;",
      "context": {
        "before": [
          "",
          "    // Estimate FPS (browser doesn't expose this directly)",
          "    // Default to common values, or use asset metadata if available"
        ],
        "after": [
          "    const frameCount = Math.ceil(duration * fps);",
          "",
          "    this.metadata = {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:329:26",
      "file": "engine/layers/VideoLayer.ts",
      "line": 329,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onMetadataLoaded?.(this.metadata);",
      "context": {
        "before": [
          "    }",
          "",
          "    // Notify listeners (for composition auto-resize)"
        ],
        "after": [
          "",
          "    layerLogger.debug(",
          "      `VideoLayer: Loaded: ${width}x${height}, ${frameCount} frames @ ${fps}fps, ${duration.toFixed(2)}s`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:355:31",
      "file": "engine/layers/VideoLayer.ts",
      "line": 355,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createVideoTexture(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create Three.js texture from video element",
          "   */"
        ],
        "after": [
          "    if (!this.videoElement || !this.metadata) return;",
          "",
          "    // Create texture"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:379:52",
      "file": "engine/layers/VideoLayer.ts",
      "line": 379,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private resizeMesh(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Resize mesh to match video dimensions",
          "   */"
        ],
        "after": [
          "    if (!this.mesh) return;",
          "",
          "    // Dispose old geometry"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:397:40",
      "file": "engine/layers/VideoLayer.ts",
      "line": 397,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "seekToFrame(compositionFrame: number): void {",
      "context": {
        "before": [
          "   * Seek to a specific composition frame",
          "   * Uses WebCodecs for frame-accurate seeking when available",
          "   */"
        ],
        "after": [
          "    if (!this.metadata) return;",
          "",
          "    // Calculate video time from composition frame"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:477:42",
      "file": "engine/layers/VideoLayer.ts",
      "line": 477,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateTextureFromDecodedFrame(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update Three.js texture from decoded frame canvas",
          "   */"
        ],
        "after": [
          "    if (!this.decodedFrameCanvas || !this.material) return;",
          "",
          "    // Create or update texture from canvas"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:511:40",
      "file": "engine/layers/VideoLayer.ts",
      "line": 511,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (speedMapEnabled && speedMapProp?.animated) {",
      "context": {
        "before": [
          "    const speedMapEnabled =",
          "      this.videoData.speedMapEnabled ?? this.videoData.timeRemapEnabled;",
          "    const speedMapProp = this.videoData.speedMap ?? this.videoData.timeRemap;"
        ],
        "after": [
          "      const remappedTime = this.videoEvaluator.evaluate(",
          "        speedMapProp,",
          "        compositionFrame,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:517:21",
      "file": "engine/layers/VideoLayer.ts",
      "line": 517,
      "column": 21,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(remappedTime) ? remappedTime : 0;",
      "context": {
        "before": [
          "        compositionFrame,",
          "      );",
          "      // Validate speed map result (NaN would break video playback)"
        ],
        "after": [
          "    }",
          "",
          "    // Get layer's timeStretch (100 = normal, 200 = half speed, -100 = reversed)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:522:32",
      "file": "engine/layers/VideoLayer.ts",
      "line": 522,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const timeStretch = Number.isFinite(rawTimeStretch) ? rawTimeStretch : 100;",
      "context": {
        "before": [
          "",
          "    // Get layer's timeStretch (100 = normal, 200 = half speed, -100 = reversed)",
          "    const rawTimeStretch = this.layerData.timeStretch ?? 100;"
        ],
        "after": [
          "    const isReversed = timeStretch < 0;",
          "",
          "    // Calculate effective speed:"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:531:26",
      "file": "engine/layers/VideoLayer.ts",
      "line": 531,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const speed = Number.isFinite(this.videoData.speed)",
      "context": {
        "before": [
          "    // Combined: effectiveSpeed = (100 / |timeStretch|) * speed",
          "    const stretchFactor = timeStretch !== 0 ? 100 / Math.abs(timeStretch) : 0;",
          "    // Validate speed (NaN would cause video time calculation to fail)"
        ],
        "after": [
          "      ? this.videoData.speed",
          "      : 1;",
          "    const effectiveSpeed = stretchFactor * speed;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:541:14",
      "file": "engine/layers/VideoLayer.ts",
      "line": 541,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(this.compositionFPS) && this.compositionFPS > 0",
      "context": {
        "before": [
          "    const layerFrame = compositionFrame - layerStartFrame;",
          "    // Validate FPS (NaN would cause division issues)",
          "    const compFps ="
        ],
        "after": [
          "        ? this.compositionFPS",
          "        : 16;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:596:31",
      "file": "engine/layers/VideoLayer.ts",
      "line": 596,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioLevel(level: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set audio volume",
          "   */"
        ],
        "after": [
          "    this.videoData.audioLevel = level;",
          "    if (this.videoElement) {",
          "      this.videoElement.volume = Math.max(0, Math.min(1, level / 100));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:606:36",
      "file": "engine/layers/VideoLayer.ts",
      "line": 606,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable/disable audio",
          "   */"
        ],
        "after": [
          "    this.videoData.audioEnabled = enabled;",
          "    if (this.videoElement) {",
          "      this.videoElement.muted = !enabled;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:620:22",
      "file": "engine/layers/VideoLayer.ts",
      "line": 620,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFPS(fps: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set composition FPS for accurate time calculation",
          "   */"
        ],
        "after": [
          "    // Validate fps (NaN would break time calculations)",
          "    this.compositionFPS = Number.isFinite(fps) && fps > 0 ? fps : 16;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:622:34",
      "file": "engine/layers/VideoLayer.ts",
      "line": 622,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.compositionFPS = Number.isFinite(fps) && fps > 0 ? fps : 16;",
      "context": {
        "before": [
          "   */",
          "  setFPS(fps: number): void {",
          "    // Validate fps (NaN would break time calculations)"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:629:67",
      "file": "engine/layers/VideoLayer.ts",
      "line": 629,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMetadataCallback(callback: (metadata: VideoMetadata) => void): void {",
      "context": {
        "before": [
          "   * Register callback for when video metadata is loaded",
          "   * Used by LayerManager to auto-resize composition",
          "   */"
        ],
        "after": [
          "    this.onMetadataLoaded = callback;",
          "",
          "    // If metadata already loaded, call immediately"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:656:25",
      "file": "engine/layers/VideoLayer.ts",
      "line": 656,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLoop(loop: boolean): void {",
      "context": {
        "before": [
          "  // PROPERTY UPDATES",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.videoData.loop = loop;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:660:33",
      "file": "engine/layers/VideoLayer.ts",
      "line": 660,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPingPong(pingPong: boolean): void {",
      "context": {
        "before": [
          "    this.videoData.loop = loop;",
          "  }",
          ""
        ],
        "after": [
          "    this.videoData.pingPong = pingPong;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:664:26",
      "file": "engine/layers/VideoLayer.ts",
      "line": 664,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSpeed(speed: number): void {",
      "context": {
        "before": [
          "    this.videoData.pingPong = pingPong;",
          "  }",
          ""
        ],
        "after": [
          "    // Validate speed (NaN would break playback)",
          "    const validSpeed = Number.isFinite(speed) ? speed : 1;",
          "    this.videoData.speed = validSpeed;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:666:31",
      "file": "engine/layers/VideoLayer.ts",
      "line": 666,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validSpeed = Number.isFinite(speed) ? speed : 1;",
      "context": {
        "before": [
          "",
          "  setSpeed(speed: number): void {",
          "    // Validate speed (NaN would break playback)"
        ],
        "after": [
          "    this.videoData.speed = validSpeed;",
          "    if (this.videoElement) {",
          "      this.videoElement.playbackRate = validSpeed;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:673:29",
      "file": "engine/layers/VideoLayer.ts",
      "line": 673,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setStartTime(time: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.videoData.startTime = time;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:677:39",
      "file": "engine/layers/VideoLayer.ts",
      "line": 677,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEndTime(time: number | undefined): void {",
      "context": {
        "before": [
          "    this.videoData.startTime = time;",
          "  }",
          ""
        ],
        "after": [
          "    this.videoData.endTime = time;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:681:64",
      "file": "engine/layers/VideoLayer.ts",
      "line": 681,
      "column": 64,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrameBlending(mode: \"none\" | \"frame-mix\" | \"pixel-motion\"): void {",
      "context": {
        "before": [
          "    this.videoData.endTime = time;",
          "  }",
          ""
        ],
        "after": [
          "    this.videoData.frameBlending = mode;",
          "    // Frame blending would be implemented via shader in a full implementation",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:730:56",
      "file": "engine/layers/VideoLayer.ts",
      "line": 730,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private ensureCanvases(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Ensure all canvases are created and sized correctly",
          "   */"
        ],
        "after": [
          "    // Main effect canvas",
          "    if (",
          "      !this.effectCanvas ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:818:25",
      "file": "engine/layers/VideoLayer.ts",
      "line": 818,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.effectCanvasCtx?.clearRect(0, 0, width, height);",
      "context": {
        "before": [
          "    this.lastVideoTime = currentVideoTime;",
          "",
          "    // Draw current frame"
        ],
        "after": [
          "    this.effectCanvasCtx?.drawImage(this.videoElement, 0, 0, width, height);",
          "",
          "    // If blend factor is very close to 0 or 1, skip blending"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:819:25",
      "file": "engine/layers/VideoLayer.ts",
      "line": 819,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.effectCanvasCtx?.drawImage(this.videoElement, 0, 0, width, height);",
      "context": {
        "before": [
          "",
          "    // Draw current frame",
          "    this.effectCanvasCtx?.clearRect(0, 0, width, height);"
        ],
        "after": [
          "",
          "    // If blend factor is very close to 0 or 1, skip blending",
          "    if (blendFactor < 0.01 || blendFactor > 0.99) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:848:4",
      "file": "engine/layers/VideoLayer.ts",
      "line": 848,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  protected override applyProcessedEffects(",
          "    processedCanvas: HTMLCanvasElement,"
        ],
        "after": [
          "    if (!this.material || !this.metadata) return;",
          "",
          "    // Create a new texture from the processed canvas"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:872:43",
      "file": "engine/layers/VideoLayer.ts",
      "line": 872,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onEvaluateFrame(frame: number): void {",
      "context": {
        "before": [
          "  // FRAME EVALUATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // Skip if frame hasn't changed",
          "    if (frame === this.lastEvaluatedFrame) return;",
          "    this.lastEvaluatedFrame = frame;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:897:4",
      "file": "engine/layers/VideoLayer.ts",
      "line": 897,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  protected override onApplyEvaluatedState(",
          "    state: import(\"../MotionEngine\").EvaluatedLayer,"
        ],
        "after": [
          "    const props = state.properties;",
          "",
          "    // Apply speed map if evaluated (direct video time in seconds)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:932:49",
      "file": "engine/layers/VideoLayer.ts",
      "line": 932,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onUpdate(properties: Partial<Layer>): void {",
      "context": {
        "before": [
          "  // LAYER UPDATE",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const data = properties.data as Partial<VideoData> | undefined;",
          "",
          "    if (data) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:963:23",
      "file": "engine/layers/VideoLayer.ts",
      "line": 963,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private clearVideo(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear current video",
          "   */"
        ],
        "after": [
          "    if (this.videoElement) {",
          "      this.videoElement.pause();",
          "      this.videoElement.src = \"\";"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/layers/VideoLayer.ts:1007:24",
      "file": "engine/layers/VideoLayer.ts",
      "line": 1007,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "protected onDispose(): void {",
      "context": {
        "before": [
          "  // DISPOSAL",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.clearVideo();",
          "",
          "    // Clean up frame blending canvases"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:307:29",
      "file": "engine/MotionEngine.ts",
      "line": 307,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "modified: project.meta?.modified || \"\",",
      "context": {
        "before": [
          "    const str = JSON.stringify({",
          "      layerCount: comp.layers.length,",
          "      layerIds: comp.layers.map((l) => l.id),"
        ],
        "after": [
          "      // Include layer visibility and animation state in hash",
          "      layerStates: comp.layers.map((l) => ({",
          "        id: l.id,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:315:41",
      "file": "engine/MotionEngine.ts",
      "line": 315,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(sum, p) => sum + (p.keyframes?.length || 0),",
      "context": {
        "before": [
          "        startFrame: l.startFrame ?? l.inPoint ?? 0,",
          "        endFrame: l.endFrame ?? l.outPoint ?? 80,",
          "        kfCount: l.properties.reduce("
        ],
        "after": [
          "          0,",
          "        ),",
          "      })),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:367:4",
      "file": "engine/MotionEngine.ts",
      "line": 367,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    compositionId: string,",
          "    projectHash: string,",
          "    frameState: FrameState,"
        ],
        "after": [
          "    const key = this.makeKey(frame, compositionId);",
          "",
          "    // Evict oldest entries if at capacity"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:387:15",
      "file": "engine/MotionEngine.ts",
      "line": 387,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidate(): void {",
      "context": {
        "before": [
          "   * Invalidate all cached entries",
          "   * Call when project structure changes (layer add/remove, etc.)",
          "   */"
        ],
        "after": [
          "    this.cache.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:394:47",
      "file": "engine/MotionEngine.ts",
      "line": 394,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidateComposition(compositionId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Invalidate entries for a specific composition",
          "   */"
        ],
        "after": [
          "    for (const key of this.cache.keys()) {",
          "      if (key.startsWith(`${compositionId}:`)) {",
          "        this.cache.delete(key);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:471:20",
      "file": "engine/MotionEngine.ts",
      "line": 471,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidateCache(): void {",
      "context": {
        "before": [
          "   * Invalidate the frame cache",
          "   * Call this when project structure changes",
          "   */"
        ],
        "after": [
          "    this.frameCache.invalidate();",
          "    this.lastProjectHash = \"\";",
          "    // Reset audio reactive temporal state on cache invalidation (smoothing, envelopes)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:541:22",
      "file": "engine/MotionEngine.ts",
      "line": 541,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (audioReactive?.analysis && audioReactive.mappings.length > 0) {",
      "context": {
        "before": [
          "    // Persist AudioReactiveMapper for temporal features (smoothing, envelopes, beat toggles).",
          "    // State persists across sequential frames but resets on non-sequential access (scrubbing).",
          "    let audioMapper: AudioReactiveMapper | null = null;"
        ],
        "after": [
          "      // Create mapper if needed",
          "      if (!this.audioMapper) {",
          "        this.audioMapper = new AudioReactiveMapper(audioReactive.analysis);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:589:37",
      "file": "engine/MotionEngine.ts",
      "line": 589,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fps = composition.settings?.fps ?? 30;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Get composition fps"
        ],
        "after": [
          "",
          "    // Evaluate all layers (pass audio analysis for audio path animation)",
          "    const audioAnalysisForLayers = audioReactive?.analysis ?? null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:592:49",
      "file": "engine/MotionEngine.ts",
      "line": 592,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const audioAnalysisForLayers = audioReactive?.analysis ?? null;",
      "context": {
        "before": [
          "    const fps = composition.settings?.fps ?? 30;",
          "",
          "    // Evaluate all layers (pass audio analysis for audio path animation)"
        ],
        "after": [
          "    const evaluatedLayers = this.evaluateLayers(",
          "      frame,",
          "      composition.layers,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:688:33",
      "file": "engine/MotionEngine.ts",
      "line": 688,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layer.audioPathAnimation?.enabled &&",
      "context": {
        "before": [
          "",
          "      // Apply audio path animation if enabled (layer position follows SVG path based on audio)",
          "      if ("
        ],
        "after": [
          "        layer.audioPathAnimation.pathData",
          "      ) {",
          "        const pathAnim = layer.audioPathAnimation;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:856:35",
      "file": "engine/MotionEngine.ts",
      "line": 856,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.separateDimensions?.position &&",
      "context": {
        "before": [
          "    // Evaluate position - check for separate dimensions first",
          "    let position: { x: number; y: number; z?: number };",
          "    if ("
        ],
        "after": [
          "      transform.positionX &&",
          "      transform.positionY",
          "    ) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:880:35",
      "file": "engine/MotionEngine.ts",
      "line": 880,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.separateDimensions?.scale &&",
      "context": {
        "before": [
          "    // Evaluate scale - check for separate dimensions first",
          "    let scale: { x: number; y: number; z?: number };",
          "    if ("
        ],
        "after": [
          "      transform.scaleX &&",
          "      transform.scaleY",
          "    ) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1068:42",
      "file": "engine/MotionEngine.ts",
      "line": 1068,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const compWidth = compositionSettings?.width ?? 1024;",
      "context": {
        "before": [
          "    );",
          "",
          "    // Default camera values - use composition center as default target"
        ],
        "after": [
          "    const compHeight = compositionSettings?.height ?? 1024;",
          "    const centerX = compWidth / 2;",
          "    const centerY = compHeight / 2;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1069:43",
      "file": "engine/MotionEngine.ts",
      "line": 1069,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const compHeight = compositionSettings?.height ?? 1024;",
      "context": {
        "before": [
          "",
          "    // Default camera values - use composition center as default target",
          "    const compWidth = compositionSettings?.width ?? 1024;"
        ],
        "after": [
          "    const centerX = compWidth / 2;",
          "    const centerY = compHeight / 2;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1124:33",
      "file": "engine/MotionEngine.ts",
      "line": 1124,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const dofEnabled = dofConfig?.enabled ?? legacyCamera?.depthOfField ?? false;",
      "context": {
        "before": [
          "    const legacyCamera = cameraData.camera;",
          "",
          "    // Determine if DOF is enabled - check structured format first, then legacy"
        ],
        "after": [
          "",
          "    // Get initial values - prefer structured format, fall back to legacy",
          "    let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1124:58",
      "file": "engine/MotionEngine.ts",
      "line": 1124,
      "column": 58,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const dofEnabled = dofConfig?.enabled ?? legacyCamera?.depthOfField ?? false;",
      "context": {
        "before": [
          "    const legacyCamera = cameraData.camera;",
          "",
          "    // Determine if DOF is enabled - check structured format first, then legacy"
        ],
        "after": [
          "",
          "    // Get initial values - prefer structured format, fall back to legacy",
          "    let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1127:34",
      "file": "engine/MotionEngine.ts",
      "line": 1127,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;",
      "context": {
        "before": [
          "    const dofEnabled = dofConfig?.enabled ?? legacyCamera?.depthOfField ?? false;",
          "",
          "    // Get initial values - prefer structured format, fall back to legacy"
        ],
        "after": [
          "    let aperture = dofConfig?.aperture ?? legacyCamera?.aperture ?? 2.8;",
          "    let blurLevel = dofConfig?.blurLevel ?? legacyCamera?.blurLevel ?? 50;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1127:65",
      "file": "engine/MotionEngine.ts",
      "line": 1127,
      "column": 65,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;",
      "context": {
        "before": [
          "    const dofEnabled = dofConfig?.enabled ?? legacyCamera?.depthOfField ?? false;",
          "",
          "    // Get initial values - prefer structured format, fall back to legacy"
        ],
        "after": [
          "    let aperture = dofConfig?.aperture ?? legacyCamera?.aperture ?? 2.8;",
          "    let blurLevel = dofConfig?.blurLevel ?? legacyCamera?.blurLevel ?? 50;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1128:29",
      "file": "engine/MotionEngine.ts",
      "line": 1128,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "let aperture = dofConfig?.aperture ?? legacyCamera?.aperture ?? 2.8;",
      "context": {
        "before": [
          "",
          "    // Get initial values - prefer structured format, fall back to legacy",
          "    let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;"
        ],
        "after": [
          "    let blurLevel = dofConfig?.blurLevel ?? legacyCamera?.blurLevel ?? 50;",
          "",
          "    if (cameraData.animatedFocusDistance) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1128:55",
      "file": "engine/MotionEngine.ts",
      "line": 1128,
      "column": 55,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "let aperture = dofConfig?.aperture ?? legacyCamera?.aperture ?? 2.8;",
      "context": {
        "before": [
          "",
          "    // Get initial values - prefer structured format, fall back to legacy",
          "    let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;"
        ],
        "after": [
          "    let blurLevel = dofConfig?.blurLevel ?? legacyCamera?.blurLevel ?? 50;",
          "",
          "    if (cameraData.animatedFocusDistance) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1129:30",
      "file": "engine/MotionEngine.ts",
      "line": 1129,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "let blurLevel = dofConfig?.blurLevel ?? legacyCamera?.blurLevel ?? 50;",
      "context": {
        "before": [
          "    // Get initial values - prefer structured format, fall back to legacy",
          "    let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;",
          "    let aperture = dofConfig?.aperture ?? legacyCamera?.aperture ?? 2.8;"
        ],
        "after": [
          "",
          "    if (cameraData.animatedFocusDistance) {",
          "      focusDistance = interpolateProperty("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1129:57",
      "file": "engine/MotionEngine.ts",
      "line": 1129,
      "column": 57,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "let blurLevel = dofConfig?.blurLevel ?? legacyCamera?.blurLevel ?? 50;",
      "context": {
        "before": [
          "    // Get initial values - prefer structured format, fall back to legacy",
          "    let focusDistance = dofConfig?.focusDistance ?? legacyCamera?.focusDistance ?? 1000;",
          "    let aperture = dofConfig?.aperture ?? legacyCamera?.aperture ?? 2.8;"
        ],
        "after": [
          "",
          "    if (cameraData.animatedFocusDistance) {",
          "      focusDistance = interpolateProperty("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1249:25",
      "file": "engine/MotionEngine.ts",
      "line": 1249,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (cameraData.shake?.enabled) {",
      "context": {
        "before": [
          "",
          "    // Apply camera shake if enabled (deterministic via seed)",
          "    // Audio modifier modulates shake intensity (applied ONCE, not twice)"
        ],
        "after": [
          "      const shakeData = cameraData.shake;",
          "",
          "      // Calculate effective intensity with audio modifier"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1285:29",
      "file": "engine/MotionEngine.ts",
      "line": 1285,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (cameraData.rackFocus?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Apply rack focus if enabled (overrides focus distance)"
        ],
        "after": [
          "      const rf = cameraData.rackFocus;",
          "      focusDistance = getRackFocusDistance(",
          "        {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/MotionEngine.ts:1367:16",
      "file": "engine/MotionEngine.ts",
      "line": 1367,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!data?.systemConfig) continue;",
      "context": {
        "before": [
          "      if (frame < start || frame > end) continue;",
          "",
          "      const data = layer.data as ParticleLayerData | null;"
        ],
        "after": [
          "",
          "      // Convert ParticleLayerData to ParticleSystemConfig",
          "      const config = this.convertToParticleSystemConfig(data);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/NestedCompRenderer.ts:154:36",
      "file": "engine/NestedCompRenderer.ts",
      "line": 154,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(compositionId: string): void {",
      "context": {
        "before": [
          "   * Clear cache for a specific composition",
          "   * Call when a composition is deleted or significantly changed",
          "   */"
        ],
        "after": [
          "    const layerManager = this.layerManagers.get(compositionId);",
          "    if (layerManager) {",
          "      layerManager.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/NestedCompRenderer.ts:174:19",
      "file": "engine/NestedCompRenderer.ts",
      "line": 174,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAllCaches(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all cached compositions",
          "   */"
        ],
        "after": [
          "    for (const [id] of this.layerManagers) {",
          "      this.clearCache(id);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/NestedCompRenderer.ts:184:12",
      "file": "engine/NestedCompRenderer.ts",
      "line": 184,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    this.clearAllCaches();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:415:15",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 415,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(this.config.maxParticles) ||",
      "context": {
        "before": [
          "    // Validate and cap maxParticles to prevent memory exhaustion (max 1M particles = ~64MB per buffer)",
          "    const MAX_SAFE_PARTICLES = 1000000;",
          "    if ("
        ],
        "after": [
          "      this.config.maxParticles <= 0",
          "    ) {",
          "      this.config.maxParticles = 100000; // Default"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:477:44",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 477,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize(renderer: THREE.WebGLRenderer): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize GPU resources. Must be called before simulation.",
          "   */"
        ],
        "after": [
          "    this.renderer = renderer;",
          "    this.gl = renderer.getContext() as WebGL2RenderingContext;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:515:41",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 515,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setGPUPhysicsEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "   * Enable or disable GPU physics",
          "   * Delegates to ParticleGPUPhysics",
          "   */"
        ],
        "after": [
          "    this.gpuPhysics?.setEnabled(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:516:20",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 516,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.gpuPhysics?.setEnabled(enabled);",
      "context": {
        "before": [
          "   * Delegates to ParticleGPUPhysics",
          "   */",
          "  setGPUPhysicsEnabled(enabled: boolean): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:523:27",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 523,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.gpuPhysics?.isEnabled() ?? false;",
      "context": {
        "before": [
          "   * Check if GPU physics is currently enabled",
          "   */",
          "  isGPUPhysicsEnabled(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:530:37",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 530,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createModulationTextures(): void {",
      "context": {
        "before": [
          "   * Create textures for lifetime modulation curves",
          "   * Delegates to ParticleModulationCurves",
          "   */"
        ],
        "after": [
          "    if (!this.modulationSystem) return;",
          "",
          "    const textures = this.modulationSystem.createTextures("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:563:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 563,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.modulationSystem?.evaluateCurve(curve, t, randomOffset) ?? 1;",
      "context": {
        "before": [
          "    t: number,",
          "    randomOffset?: number,",
          "  ): number {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:642:31",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 642,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createParticleMesh(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create the Three.js mesh for particle rendering",
          "   */"
        ],
        "after": [
          "    // Create base geometry (billboard or 3D mesh)",
          "    const { positions, uvs, is3D } = this.createBaseGeometry();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:712:48",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 712,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.particleMesh.castShadow = shadowConfig?.castShadows ?? false;",
      "context": {
        "before": [
          "",
          "    // Configure shadow casting/receiving based on config",
          "    const shadowConfig = this.config.render.shadow;"
        ],
        "after": [
          "    this.particleMesh.receiveShadow = shadowConfig?.receiveShadows ?? false;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:713:51",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 713,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.particleMesh.receiveShadow = shadowConfig?.receiveShadows ?? false;",
      "context": {
        "before": [
          "    // Configure shadow casting/receiving based on config",
          "    const shadowConfig = this.config.render.shadow;",
          "    this.particleMesh.castShadow = shadowConfig?.castShadows ?? false;"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:719:29",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 719,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeTrails(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize trail system - delegates to ParticleTrailSystem",
          "   */"
        ],
        "after": [
          "    const trailConfig: TrailConfig = {",
          "      trailLength: this.config.render.trailLength,",
          "      trailSegments: this.config.render.trailSegments ?? 8,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:743:25",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 743,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateTrails(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update trail positions for all particles - delegates to ParticleTrailSystem",
          "   */"
        ],
        "after": [
          "    if (!this.trailSystem) return;",
          "    const buffer =",
          "      this.currentBuffer === \"A\" ? this.particleBufferA : this.particleBufferB;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:754:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 754,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.trailSystem?.getMesh() ?? null;",
      "context": {
        "before": [
          "   * Get the trail mesh for adding to scene",
          "   */",
          "  getTrailMesh(): THREE.LineSegments | null {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:760:50",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 760,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeConnections(config: ConnectionConfig): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize particle connection system",
          "   */"
        ],
        "after": [
          "    this.connectionSystem = new ParticleConnectionSystem(",
          "      this.config.maxParticles,",
          "      config,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:772:30",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 772,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateConnections(): void {",
      "context": {
        "before": [
          "   * Update particle connections",
          "   * Uses spatial hash for efficient neighbor queries",
          "   */"
        ],
        "after": [
          "    if (!this.connectionSystem) return;",
          "    const buffer =",
          "      this.currentBuffer === \"A\" ? this.particleBufferA : this.particleBufferB;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:783:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 783,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.connectionSystem?.getMesh() ?? null;",
      "context": {
        "before": [
          "   * Get the connection mesh for adding to scene",
          "   */",
          "  getConnectionMesh(): THREE.LineSegments | null {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:789:42",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 789,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConnectionsEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable particle connections",
          "   */"
        ],
        "after": [
          "    this.connectionSystem?.setEnabled(enabled);",
          "  }",
          "  /**"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:790:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 790,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.connectionSystem?.setEnabled(enabled);",
      "context": {
        "before": [
          "   * Enable or disable particle connections",
          "   */",
          "  setConnectionsEnabled(enabled: boolean): void {"
        ],
        "after": [
          "  }",
          "  /**",
          "   * Initialize collision system"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:795:57",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 795,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeCollisions(config: Partial<CollisionConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize collision system",
          "   */"
        ],
        "after": [
          "    this.collisionSystem = new ParticleCollisionSystem(",
          "      this.config.maxParticles,",
          "      config,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:809:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 809,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyCollisions(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply collision detection and response",
          "   */"
        ],
        "after": [
          "    if (!this.collisionSystem) return;",
          "    const buffer =",
          "      this.currentBuffer === \"A\" ? this.particleBufferA : this.particleBufferB;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:819:45",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 819,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeFlocking(config: FlockingConfig): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize flocking system",
          "   */"
        ],
        "after": [
          "    this.flockingSystem = new ParticleFlockingSystem(",
          "      this.config.maxParticles,",
          "      config,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:833:50",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 833,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateFlocking(config: Partial<FlockingConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update flocking configuration",
          "   */"
        ],
        "after": [
          "    this.flockingSystem?.updateConfig(config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:834:24",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 834,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.flockingSystem?.updateConfig(config);",
      "context": {
        "before": [
          "   * Update flocking configuration",
          "   */",
          "  updateFlocking(config: Partial<FlockingConfig>): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:840:39",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 840,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFlockingEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable flocking",
          "   */"
        ],
        "after": [
          "    this.flockingSystem?.setEnabled(enabled);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:841:24",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 841,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.flockingSystem?.setEnabled(enabled);",
      "context": {
        "before": [
          "   * Enable or disable flocking",
          "   */",
          "  setFlockingEnabled(enabled: boolean): void {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:888:4",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 888,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      | \"triangle\"",
          "      | \"shadedSphere\"",
          "      | \"fadedSphere\","
        ],
        "after": [
          "    if (this.textureSystem) {",
          "      this.textureSystem.setRenderTargets(",
          "        this.material,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:902:46",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 902,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateSpriteAnimation(time: number): void {",
      "context": {
        "before": [
          "   * Update time uniform for sprite animation",
          "   * Delegates to ParticleTextureSystem",
          "   */"
        ],
        "after": [
          "    this.textureSystem?.updateSpriteAnimation(time);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:903:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 903,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.textureSystem?.updateSpriteAnimation(time);",
      "context": {
        "before": [
          "   * Delegates to ParticleTextureSystem",
          "   */",
          "  private updateSpriteAnimation(time: number): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:915:5",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 915,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    strength?: number;",
          "    minStretch?: number;",
          "    maxStretch?: number;"
        ],
        "after": [
          "    if (this.textureSystem) {",
          "      this.textureSystem.setRenderTargets(",
          "        this.material,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:941:5",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 941,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    enabled: boolean;",
          "    radius: number;",
          "    intensity: number;"
        ],
        "after": [
          "    if (this.textureSystem) {",
          "      this.textureSystem.setRenderTargets(",
          "        this.material,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:959:5",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 959,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    enabled?: boolean;",
          "    radius?: number;",
          "    intensity?: number;"
        ],
        "after": [
          "    this.textureSystem?.setGlow(config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:960:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 960,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.textureSystem?.setGlow(config);",
      "context": {
        "before": [
          "    radius?: number;",
          "    intensity?: number;",
          "  }): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:968:30",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 968,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.textureSystem?.getGlowMesh() ?? null;",
      "context": {
        "before": [
          "   * Delegates to ParticleTextureSystem",
          "   */",
          "  getGlowMesh(): THREE.Mesh | null {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:975:36",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 975,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addEmitter(config: EmitterConfig): void {",
      "context": {
        "before": [
          "  // Emitter Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.emitters.set(config.id, {",
          "      ...config,",
          "      accumulator: 0,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:986:61",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 986,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateEmitter(id: string, updates: Partial<EmitterConfig>): void {",
      "context": {
        "before": [
          "    this.invalidateCache(); // Emitter changes require re-simulation",
          "  }",
          ""
        ],
        "after": [
          "    const emitter = this.emitters.get(id);",
          "    if (emitter) {",
          "      Object.assign(emitter, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:994:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 994,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeEmitter(id: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.emitters.delete(id);",
          "    this.state.activeEmitters = this.emitters.size;",
          "    this.invalidateCache(); // Emitter changes require re-simulation"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1008:42",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1008,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addForceField(config: ForceFieldConfig): void {",
      "context": {
        "before": [
          "  // Force Field Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.forceFields.set(config.id, config);",
          "    this.invalidateCache(); // Force field changes require re-simulation",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1013:67",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1013,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateForceField(id: string, updates: Partial<ForceFieldConfig>): void {",
      "context": {
        "before": [
          "    this.invalidateCache(); // Force field changes require re-simulation",
          "  }",
          ""
        ],
        "after": [
          "    const field = this.forceFields.get(id);",
          "    if (field) {",
          "      Object.assign(field, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1021:31",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1021,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeForceField(id: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.forceFields.delete(id);",
          "    this.invalidateCache(); // Force field changes require re-simulation",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1030:42",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1030,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addSubEmitter(config: SubEmitterConfig): void {",
      "context": {
        "before": [
          "  // Sub-Emitter Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.subEmitters.set(config.id, config);",
          "    this.invalidateCache(); // Sub-emitter changes require re-simulation",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1035:31",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1035,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeSubEmitter(id: string): void {",
      "context": {
        "before": [
          "    this.invalidateCache(); // Sub-emitter changes require re-simulation",
          "  }",
          ""
        ],
        "after": [
          "    this.subEmitters.delete(id);",
          "    this.invalidateCache(); // Sub-emitter changes require re-simulation",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1047:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1047,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "step(deltaTime: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Step the particle simulation forward",
          "   */"
        ],
        "after": [
          "    const startTime = performance.now();",
          "",
          "    const dt ="
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1059:24",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1059,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.gpuPhysics?.isEnabled()) {",
      "context": {
        "before": [
          "    this.emitParticles(dt);",
          "",
          "    // 2. Update physics - GPU (WebGPU/Transform Feedback) > CPU"
        ],
        "after": [
          "      const result = this.gpuPhysics.update(",
          "        dt,",
          "        {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1081:30",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1081,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.subEmitterSystem?.hasSubEmitters()) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // 3. Handle sub-emitter triggers (using extracted module)"
        ],
        "after": [
          "      const buffer =",
          "        this.currentBuffer === \"A\"",
          "          ? this.particleBufferA"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1096:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1096,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.flockingSystem?.isEnabled() ||",
      "context": {
        "before": [
          "    // 4. Rebuild shared spatial hash (used by both flocking and collision)",
          "    // Only rebuild if either system needs it - avoids O(n) when neither is enabled",
          "    const needsSpatialHash ="
        ],
        "after": [
          "      (this.collisionSystem?.isEnabled() &&",
          "        this.collisionSystem.getConfig().particleCollision);",
          "    if (needsSpatialHash && this.spatialHash) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1097:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1097,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(this.collisionSystem?.isEnabled() &&",
      "context": {
        "before": [
          "    // Only rebuild if either system needs it - avoids O(n) when neither is enabled",
          "    const needsSpatialHash =",
          "      this.flockingSystem?.isEnabled() ||"
        ],
        "after": [
          "        this.collisionSystem.getConfig().particleCollision);",
          "    if (needsSpatialHash && this.spatialHash) {",
          "      const buffer ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1108:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1108,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.flockingSystem?.isEnabled()) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // 5. Apply flocking (using extracted module and shared spatial hash)"
        ],
        "after": [
          "      const buffer =",
          "        this.currentBuffer === \"A\"",
          "          ? this.particleBufferA"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1117:29",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1117,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.collisionSystem?.isEnabled()) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // 6. Apply collisions"
        ],
        "after": [
          "      this.applyCollisions();",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1130:30",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1130,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.connectionSystem?.isEnabled()) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // 9. Update particle connections"
        ],
        "after": [
          "      this.updateConnections();",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1149:36",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1149,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private emitParticles(dt: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Emit particles from all active emitters",
          "   */"
        ],
        "after": [
          "    for (const emitter of this.emitters.values()) {",
          "      if (!emitter.enabled) continue;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1154:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1154,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "let emissionRate = Number.isFinite(emitter.emissionRate)",
      "context": {
        "before": [
          "      if (!emitter.enabled) continue;",
          "",
          "      // Get audio-modulated emission rate (validate to prevent NaN accumulator)"
        ],
        "after": [
          "        ? emitter.emissionRate",
          "        : 100;",
          "      const audioMod = this.getAudioModulation("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1162:44",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1162,
      "column": 44,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (audioMod !== undefined && Number.isFinite(audioMod)) {",
      "context": {
        "before": [
          "        emitter.id,",
          "        \"emissionRate\",",
          "      );"
        ],
        "after": [
          "        emissionRate *= audioMod;",
          "      }",
          "      // Cap emission rate to prevent runaway particle spawning"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1177:43",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1177,
      "column": 43,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeBeatMultiplier = Number.isFinite(emitter.beatEmissionMultiplier)",
      "context": {
        "before": [
          "        // See triggerBurst() comment for detailed explanation.",
          "        const maxBurst = Math.min(this.config.maxParticles, 10000);",
          "        // Validate beatEmissionMultiplier before use"
        ],
        "after": [
          "          ? Math.max(0, emitter.beatEmissionMultiplier)",
          "          : 5;",
          "        const rawBurstCount = emitter.burstCount * safeBeatMultiplier;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1181:35",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1181,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const burstCount = Number.isFinite(rawBurstCount)",
      "context": {
        "before": [
          "          ? Math.max(0, emitter.beatEmissionMultiplier)",
          "          : 5;",
          "        const rawBurstCount = emitter.burstCount * safeBeatMultiplier;"
        ],
        "after": [
          "          ? Math.min(Math.floor(rawBurstCount), maxBurst)",
          "          : 0;",
          "        for (let i = 0; i < burstCount; i++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1190:36",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1190,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const burstInterval = Number.isFinite(emitter.burstInterval) && emitter.burstInterval > 0",
      "context": {
        "before": [
          "      }",
          "",
          "      // Automatic burst interval emission (burstInterval > 0 means auto-burst)"
        ],
        "after": [
          "        ? emitter.burstInterval",
          "        : 0;",
          "      if (burstInterval > 0) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1201:37",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1201,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const burstCount = Number.isFinite(emitter.burstCount)",
      "context": {
        "before": [
          "          emitter.burstTimer -= intervalSeconds;",
          "          // Cap burst count to maxParticles to prevent O(n) performance.",
          "          const maxBurst = Math.min(this.config.maxParticles, 10000);"
        ],
        "after": [
          "            ? Math.min(Math.floor(emitter.burstCount), maxBurst)",
          "            : 10;",
          "          for (let i = 0; i < burstCount; i++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1281:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1281,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const speed = Number.isFinite(rawSpeed) ? rawSpeed : 200;",
      "context": {
        "before": [
          "    // Validate speed (NaN would corrupt velocity calculations)",
          "    const rawSpeed =",
          "      emitter.initialSpeed + (this.rng() - 0.5) * 2 * emitter.speedVariance;"
        ],
        "after": [
          "",
          "    // Inherit emitter velocity",
          "    const inheritVel = emitter.velocity"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1302:14",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1302,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(rawLifetime) && rawLifetime > 0 ? rawLifetime : 120;",
      "context": {
        "before": [
          "    const rawLifetime =",
          "      emitter.lifetime + (this.rng() - 0.5) * 2 * emitter.lifetimeVariance;",
          "    buffer[offset + 7] ="
        ],
        "after": [
          "",
          "    // Validate mass: must be positive to avoid division by zero in force calculations",
          "    const rawMass ="
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1321:38",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1321,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeColorVariance = Number.isFinite(emitter.colorVariance)",
      "context": {
        "before": [
          "      (this.rng() - 0.5) * 2 * emitter.angularVelocityVariance;",
          "",
          "    // Interpolate color with validated variance"
        ],
        "after": [
          "      ? Math.max(0, Math.min(1, emitter.colorVariance))",
          "      : 0;",
          "    const colorT = this.rng() * safeColorVariance;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1353:53",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1353,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSplineProvider(provider: SplineProvider | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the spline provider function for spline-based emission",
          "   */"
        ],
        "after": [
          "    this.splineProvider = provider;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1360:36",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1360,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updatePhysics(dt: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update particle physics (CPU implementation)",
          "   */"
        ],
        "after": [
          "    const buffer =",
          "      this.currentBuffer === \"A\" ? this.particleBufferA : this.particleBufferB;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1385:40",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1385,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const initialSize = initialValues?.size ?? buffer[offset + 9];",
      "context": {
        "before": [
          "",
          "      // Retrieve initial values and random offset for deterministic modulation",
          "      const initialValues = this.particleInitialValues.get(i);"
        ],
        "after": [
          "      const initialOpacity = initialValues?.opacity ?? buffer[offset + 15];",
          "      const randomOffset = initialValues?.randomOffset ?? 0.5;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1386:43",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1386,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const initialOpacity = initialValues?.opacity ?? buffer[offset + 15];",
      "context": {
        "before": [
          "      // Retrieve initial values and random offset for deterministic modulation",
          "      const initialValues = this.particleInitialValues.get(i);",
          "      const initialSize = initialValues?.size ?? buffer[offset + 9];"
        ],
        "after": [
          "      const randomOffset = initialValues?.randomOffset ?? 0.5;",
          "",
          "      // Evaluate all lifetime modulation curves before physics simulation"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1387:41",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1387,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const randomOffset = initialValues?.randomOffset ?? 0.5;",
      "context": {
        "before": [
          "      const initialValues = this.particleInitialValues.get(i);",
          "      const initialSize = initialValues?.size ?? buffer[offset + 9];",
          "      const initialOpacity = initialValues?.opacity ?? buffer[offset + 15];"
        ],
        "after": [
          "",
          "      // Evaluate all lifetime modulation curves before physics simulation",
          "      const lifeRatio = age / lifetime;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1574:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1574,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyAudioModulation(): void {",
      "context": {
        "before": [
          "   * Apply audio modulation to parameters",
          "   * Delegates to ParticleAudioReactive",
          "   */"
        ],
        "after": [
          "    this.audioSystem?.applyModulation(this.emitters, this.forceFields);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1575:21",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1575,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioSystem?.applyModulation(this.emitters, this.forceFields);",
      "context": {
        "before": [
          "   * Delegates to ParticleAudioReactive",
          "   */",
          "  private applyAudioModulation(): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1587:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1587,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.audioSystem?.getModulation(target, targetId, parameter);",
      "context": {
        "before": [
          "    targetId: string,",
          "    parameter: string,",
          "  ): number | undefined {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1593:34",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1593,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateInstanceBuffers(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update instance buffer attributes for rendering",
          "   */"
        ],
        "after": [
          "    if (!this.instancedGeometry) return;",
          "",
          "    const buffer ="
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1651:56",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1651,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioFeature(feature: AudioFeature, value: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set audio feature value",
          "   */"
        ],
        "after": [
          "    this.audioSystem?.setFeature(feature, value);",
          "    this.state.currentAudioFeatures.set(feature, value);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1652:21",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1652,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioSystem?.setFeature(feature, value);",
      "context": {
        "before": [
          "   * Set audio feature value",
          "   */",
          "  setAudioFeature(feature: AudioFeature, value: number): void {"
        ],
        "after": [
          "    this.state.currentAudioFeatures.set(feature, value);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1659:16",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1659,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "triggerBeat(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Trigger beat event",
          "   */"
        ],
        "after": [
          "    this.audioSystem?.triggerBeat();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1660:21",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1660,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioSystem?.triggerBeat();",
      "context": {
        "before": [
          "   * Trigger beat event",
          "   */",
          "  triggerBeat(): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1666:35",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1666,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "triggerBurst(emitterId?: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Trigger burst on all beat-enabled emitters",
          "   */"
        ],
        "after": [
          "    // Cap burst count to maxParticles to prevent O(n) performance degradation.",
          "    // When burstCount exceeds maxParticles, each spawn after pool fills triggers",
          "    // an O(n) scan to find the oldest particle to recycle. Spawning more than"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1677:30",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1677,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const count = Number.isFinite(emitter.burstCount)",
      "context": {
        "before": [
          "    if (emitterId) {",
          "      const emitter = this.emitters.get(emitterId);",
          "      if (emitter) {"
        ],
        "after": [
          "          ? Math.min(Math.floor(emitter.burstCount), maxBurst)",
          "          : 0;",
          "        for (let i = 0; i < count; i++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1687:32",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1687,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const count = Number.isFinite(emitter.burstCount)",
      "context": {
        "before": [
          "    } else {",
          "      for (const emitter of this.emitters.values()) {",
          "        if (emitter.burstOnBeat && emitter.enabled) {"
        ],
        "after": [
          "            ? Math.min(Math.floor(emitter.burstCount), maxBurst)",
          "            : 0;",
          "          for (let i = 0; i < count; i++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1713:44",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1713,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateShadowFromLight(light: THREE.Light): void {",
      "context": {
        "before": [
          "   * Update shadow configuration from a scene light",
          "   * Call this when the scene has shadow-casting lights",
          "   */"
        ],
        "after": [
          "    if (!this.material?.uniforms) return;",
          "",
          "    const shadowLight = light as THREE.DirectionalLight | THREE.SpotLight | THREE.PointLight;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1714:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1714,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!this.material?.uniforms) return;",
      "context": {
        "before": [
          "   * Call this when the scene has shadow-casting lights",
          "   */",
          "  updateShadowFromLight(light: THREE.Light): void {"
        ],
        "after": [
          "",
          "    const shadowLight = light as THREE.DirectionalLight | THREE.SpotLight | THREE.PointLight;",
          "    if (!shadowLight.shadow?.map?.texture) return;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1717:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1717,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!shadowLight.shadow?.map?.texture) return;",
      "context": {
        "before": [
          "    if (!this.material?.uniforms) return;",
          "",
          "    const shadowLight = light as THREE.DirectionalLight | THREE.SpotLight | THREE.PointLight;"
        ],
        "after": [
          "",
          "    // Update shadow map and matrix",
          "    this.material.uniforms.u_shadowMap.value = shadowLight.shadow.map.texture;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1717:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1717,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!shadowLight.shadow?.map?.texture) return;",
      "context": {
        "before": [
          "    if (!this.material?.uniforms) return;",
          "",
          "    const shadowLight = light as THREE.DirectionalLight | THREE.SpotLight | THREE.PointLight;"
        ],
        "after": [
          "",
          "    // Update shadow map and matrix",
          "    this.material.uniforms.u_shadowMap.value = shadowLight.shadow.map.texture;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1727:99",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1727,
      "column": 99,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateLODConfig(config: { enabled?: boolean; distances?: number[]; sizeMultipliers?: number[] }): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update LOD (Level of Detail) configuration",
          "   */"
        ],
        "after": [
          "    if (!this.material?.uniforms) return;",
          "",
          "    if (config.enabled !== undefined) {"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1728:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1728,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!this.material?.uniforms) return;",
      "context": {
        "before": [
          "   * Update LOD (Level of Detail) configuration",
          "   */",
          "  updateLODConfig(config: { enabled?: boolean; distances?: number[]; sizeMultipliers?: number[] }): void {"
        ],
        "after": [
          "",
          "    if (config.enabled !== undefined) {",
          "      this.material.uniforms.lodEnabled.value = config.enabled ? 1 : 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1757:5",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1757,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    focusDistance?: number;",
          "    focusRange?: number;",
          "    maxBlur?: number;"
        ],
        "after": [
          "    if (!this.material?.uniforms) return;",
          "",
          "    if (config.enabled !== undefined) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1758:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1758,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!this.material?.uniforms) return;",
      "context": {
        "before": [
          "    focusRange?: number;",
          "    maxBlur?: number;",
          "  }): void {"
        ],
        "after": [
          "",
          "    if (config.enabled !== undefined) {",
          "      this.material.uniforms.dofEnabled.value = config.enabled ? 1 : 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1777:78",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1777,
      "column": 78,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateShadowConfig(config: Partial<import(\"./types\").ParticleShadowConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update shadow configuration",
          "   */"
        ],
        "after": [
          "    if (!this.material?.uniforms) return;",
          "",
          "    if (config.receiveShadows !== undefined) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1778:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1778,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!this.material?.uniforms) return;",
      "context": {
        "before": [
          "   * Update shadow configuration",
          "   */",
          "  updateShadowConfig(config: Partial<import(\"./types\").ParticleShadowConfig>): void {"
        ],
        "after": [
          "",
          "    if (config.receiveShadows !== undefined) {",
          "      this.material.uniforms.u_receiveShadows.value = config.receiveShadows ? 1 : 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1832:46",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1832,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "u_receiveShadows: { value: shadowConfig?.receiveShadows ? 1 : 0 },",
      "context": {
        "before": [
          "      colorOverLifetime: { value: null },",
          "      hasColorOverLifetime: { value: 0 },",
          "      // Shadow uniforms (for receiving shadows from scene lights)"
        ],
        "after": [
          "      u_shadowMap: { value: null },",
          "      u_shadowMatrix: { value: new THREE.Matrix4() },",
          "      u_shadowSoftness: { value: shadowConfig?.shadowSoftness ?? 1.0 },"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1835:46",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1835,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "u_shadowSoftness: { value: shadowConfig?.shadowSoftness ?? 1.0 },",
      "context": {
        "before": [
          "      u_receiveShadows: { value: shadowConfig?.receiveShadows ? 1 : 0 },",
          "      u_shadowMap: { value: null },",
          "      u_shadowMatrix: { value: new THREE.Matrix4() },"
        ],
        "after": [
          "      u_shadowBias: { value: shadowConfig?.shadowBias ?? 0.001 },",
          "      // Ambient occlusion uniforms",
          "      u_aoEnabled: { value: shadowConfig?.aoEnabled ? 1 : 0 },"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1836:42",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1836,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "u_shadowBias: { value: shadowConfig?.shadowBias ?? 0.001 },",
      "context": {
        "before": [
          "      u_shadowMap: { value: null },",
          "      u_shadowMatrix: { value: new THREE.Matrix4() },",
          "      u_shadowSoftness: { value: shadowConfig?.shadowSoftness ?? 1.0 },"
        ],
        "after": [
          "      // Ambient occlusion uniforms",
          "      u_aoEnabled: { value: shadowConfig?.aoEnabled ? 1 : 0 },",
          "      u_aoTexture: { value: null },"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1838:41",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1838,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "u_aoEnabled: { value: shadowConfig?.aoEnabled ? 1 : 0 },",
      "context": {
        "before": [
          "      u_shadowSoftness: { value: shadowConfig?.shadowSoftness ?? 1.0 },",
          "      u_shadowBias: { value: shadowConfig?.shadowBias ?? 0.001 },",
          "      // Ambient occlusion uniforms"
        ],
        "after": [
          "      u_aoTexture: { value: null },",
          "      // LOD (Level of Detail) uniforms",
          "      lodEnabled: { value: this.config.render.lodEnabled ? 1 : 0 },"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1843:40",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1843,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.config.render.lodDistances?.[0] ?? 100,",
      "context": {
        "before": [
          "      // LOD (Level of Detail) uniforms",
          "      lodEnabled: { value: this.config.render.lodEnabled ? 1 : 0 },",
          "      lodDistances: { value: new THREE.Vector3("
        ],
        "after": [
          "        this.config.render.lodDistances?.[1] ?? 500,",
          "        this.config.render.lodDistances?.[2] ?? 1000,",
          "      )},"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1844:40",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1844,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.config.render.lodDistances?.[1] ?? 500,",
      "context": {
        "before": [
          "      lodEnabled: { value: this.config.render.lodEnabled ? 1 : 0 },",
          "      lodDistances: { value: new THREE.Vector3(",
          "        this.config.render.lodDistances?.[0] ?? 100,"
        ],
        "after": [
          "        this.config.render.lodDistances?.[2] ?? 1000,",
          "      )},",
          "      lodSizeMultipliers: { value: new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1845:40",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1845,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.config.render.lodDistances?.[2] ?? 1000,",
      "context": {
        "before": [
          "      lodDistances: { value: new THREE.Vector3(",
          "        this.config.render.lodDistances?.[0] ?? 100,",
          "        this.config.render.lodDistances?.[1] ?? 500,"
        ],
        "after": [
          "      )},",
          "      lodSizeMultipliers: { value: new THREE.Vector3(",
          "        this.config.render.lodSizeMultipliers?.[0] ?? 1.0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1848:46",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1848,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.config.render.lodSizeMultipliers?.[0] ?? 1.0,",
      "context": {
        "before": [
          "        this.config.render.lodDistances?.[2] ?? 1000,",
          "      )},",
          "      lodSizeMultipliers: { value: new THREE.Vector3("
        ],
        "after": [
          "        this.config.render.lodSizeMultipliers?.[1] ?? 0.5,",
          "        this.config.render.lodSizeMultipliers?.[2] ?? 0.25,",
          "      )},"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1849:46",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1849,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.config.render.lodSizeMultipliers?.[1] ?? 0.5,",
      "context": {
        "before": [
          "      )},",
          "      lodSizeMultipliers: { value: new THREE.Vector3(",
          "        this.config.render.lodSizeMultipliers?.[0] ?? 1.0,"
        ],
        "after": [
          "        this.config.render.lodSizeMultipliers?.[2] ?? 0.25,",
          "      )},",
          "      // 3D mesh mode (0 = billboard, 1 = 3D mesh)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1850:46",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1850,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.config.render.lodSizeMultipliers?.[2] ?? 0.25,",
      "context": {
        "before": [
          "      lodSizeMultipliers: { value: new THREE.Vector3(",
          "        this.config.render.lodSizeMultipliers?.[0] ?? 1.0,",
          "        this.config.render.lodSizeMultipliers?.[1] ?? 0.5,"
        ],
        "after": [
          "      )},",
          "      // 3D mesh mode (0 = billboard, 1 = 3D mesh)",
          "      meshMode3D: { value: this.config.render.meshGeometry !== \"billboard\" ? 1 : 0 },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1882:51",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1882,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "on(event: string, handler: ParticleEventHandler): void {",
      "context": {
        "before": [
          "  // Event System",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!this.eventHandlers.has(event)) {",
          "      this.eventHandlers.set(event, new Set());",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1886:34",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1886,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.eventHandlers.get(event)?.add(handler);",
      "context": {
        "before": [
          "    if (!this.eventHandlers.has(event)) {",
          "      this.eventHandlers.set(event, new Set());",
          "    }"
        ],
        "after": [
          "  }",
          "",
          "  off(event: string, handler: ParticleEventHandler): void {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1889:52",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1889,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "off(event: string, handler: ParticleEventHandler): void {",
      "context": {
        "before": [
          "    this.eventHandlers.get(event)?.add(handler);",
          "  }",
          ""
        ],
        "after": [
          "    this.eventHandlers.get(event)?.delete(handler);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1890:34",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1890,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.eventHandlers.get(event)?.delete(handler);",
      "context": {
        "before": [
          "  }",
          "",
          "  off(event: string, handler: ParticleEventHandler): void {"
        ],
        "after": [
          "  }",
          "",
          "  private emit(type: string, data: Record<string, unknown>): void {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1893:60",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1893,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private emit(type: string, data: Record<string, unknown>): void {",
      "context": {
        "before": [
          "    this.eventHandlers.get(event)?.delete(handler);",
          "  }",
          ""
        ],
        "after": [
          "    const event: ParticleEvent = {",
          "      type: type as any,",
          "      timestamp: performance.now(),"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1899:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1899,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.eventHandlers.get(type)?.forEach((handler) => handler(event));",
      "context": {
        "before": [
          "      timestamp: performance.now(),",
          "      data,",
          "    };"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1945:35",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1945,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cacheCurrentState(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Cache the current particle state for a specific frame",
          "   */"
        ],
        "after": [
          "    if (!this.frameCacheSystem) return;",
          "    const currentBuffer =",
          "      this.currentBuffer === \"A\" ? this.particleBufferA : this.particleBufferB;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:1958:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 1958,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioSystem?.getSmoothedAudioValues() ?? new Map(), // Cache audio EMA history for deterministic playback",
      "context": {
        "before": [
          "      this.currentRngState,",
          "      this.emitters,",
          "      this.particleEmitters, // Cache particle-to-emitter tracking for sub-emitter filtering"
        ],
        "after": [
          "      this.particleInitialValues, // Cache initial values for modulation (prevents exponential decay)",
          "    );",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2007:21",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2007,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioSystem?.setSmoothedAudioValues(cached.audioSmoothedValues);",
      "context": {
        "before": [
          "    this.particleEmitters = new Map(cached.particleEmitters);",
          "",
          "    // Restore audio EMA smoothed values for deterministic audio reactivity"
        ],
        "after": [
          "",
          "    // Restore initial size/opacity values for lifetime modulation",
          "    this.particleInitialValues = new Map(cached.particleInitialValues);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2020:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2020,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.frameCacheSystem?.findNearestCache(targetFrame) ?? -1;",
      "context": {
        "before": [
          "   * Find the nearest cached frame at or before the target frame",
          "   */",
          "  findNearestCache(targetFrame: number): number {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2026:15",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2026,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all cached frames",
          "   */"
        ],
        "after": [
          "    this.frameCacheSystem?.clearCache();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2027:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2027,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.frameCacheSystem?.clearCache();",
      "context": {
        "before": [
          "   * Clear all cached frames",
          "   */",
          "  clearCache(): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2033:20",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2033,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidateCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Invalidate the cache by incrementing version",
          "   */"
        ],
        "after": [
          "    this.frameCacheSystem?.invalidateCache();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2034:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2034,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.frameCacheSystem?.invalidateCache();",
      "context": {
        "before": [
          "   * Invalidate the cache by incrementing version",
          "   */",
          "  invalidateCache(): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2043:39",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2043,
      "column": 39,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeFps = fps > 0 && Number.isFinite(fps) ? fps : 16;",
      "context": {
        "before": [
          "  simulateToFrame(targetFrame: number, fps: number = 16): number {",
          "    if (!this.frameCacheSystem) return 0;",
          "    // Guard against fps=0 which would cause division by zero (Infinity deltaTime)"
        ],
        "after": [
          "    const deltaTime = 1 / safeFps;",
          "    const currentFrame = this.frameCacheSystem.getCurrentFrame();",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2112:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2112,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.frameCacheSystem?.getStats() ?? {",
      "context": {
        "before": [
          "    maxCacheSize: number;",
          "  } {",
          "    return ("
        ],
        "after": [
          "        cachedFrames: 0,",
          "        version: 0,",
          "        currentFrame: -1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2125:37",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2125,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCacheInterval(interval: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the cache interval (how often to cache frames)",
          "   */"
        ],
        "after": [
          "    this.frameCacheSystem?.setCacheInterval(interval);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2126:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2126,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.frameCacheSystem?.setCacheInterval(interval);",
      "context": {
        "before": [
          "   * Set the cache interval (how often to cache frames)",
          "   */",
          "  setCacheInterval(interval: number): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2133:10",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2133,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "   * Reset the particle system",
          "   * DETERMINISM: Resets RNG to initial seed for reproducible simulation",
          "   */"
        ],
        "after": [
          "    this.particleBufferA.fill(0);",
          "    this.particleBufferB.fill(0);",
          "    this.freeIndices = [];"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2167:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2167,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.frameCacheSystem?.setCurrentFrame(-1);",
      "context": {
        "before": [
          "    }",
          "",
          "    // Reset frame cache tracking"
        ],
        "after": [
          "",
          "    // Reset RNG to initial seed for deterministic replay",
          "    // Use stored initialRngSeed to ensure reset() produces same results as initial state"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2174:21",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2174,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.trailSystem?.reset();",
      "context": {
        "before": [
          "    this.rng = this.createSeededRandom(this.initialRngSeed);",
          "",
          "    // Reset trail system"
        ],
        "after": [
          "",
          "    // Reset connection system",
          "    this.connectionSystem?.reset();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2177:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2177,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.connectionSystem?.reset();",
      "context": {
        "before": [
          "    this.trailSystem?.reset();",
          "",
          "    // Reset connection system"
        ],
        "after": [
          "",
          "    // Reset audio system",
          "    this.audioSystem?.reset();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2180:21",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2180,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioSystem?.reset();",
      "context": {
        "before": [
          "    this.connectionSystem?.reset();",
          "",
          "    // Reset audio system"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2194:24",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2194,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSeed(seed: number): void {",
      "context": {
        "before": [
          "   * Set a new seed and reset the system",
          "   * DETERMINISM: Used to ensure layer-specific reproducible seeds",
          "   */"
        ],
        "after": [
          "    this.config.randomSeed = seed;",
          "    this.initialRngSeed = seed;",
          "    this.clearCache(); // Seed change invalidates all cached data"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2259:30",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2259,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeStart = Number.isFinite(startFrame) && startFrame >= 0",
      "context": {
        "before": [
          "    const trajectories = new Map<number, ExportedParticle[]>();",
          "",
          "    // Validate frame range"
        ],
        "after": [
          "      ? Math.floor(startFrame)",
          "      : 0;",
          "    const safeEnd = Number.isFinite(endFrame) && endFrame >= safeStart"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2262:28",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2262,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeEnd = Number.isFinite(endFrame) && endFrame >= safeStart",
      "context": {
        "before": [
          "    const safeStart = Number.isFinite(startFrame) && startFrame >= 0",
          "      ? Math.floor(startFrame)",
          "      : 0;"
        ],
        "after": [
          "      ? Math.floor(endFrame)",
          "      : safeStart;",
          "    const total = safeEnd - safeStart + 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2280:19",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2280,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(frame - safeStart + 1, total);",
      "context": {
        "before": [
          "      if (frame >= safeStart) {",
          "        // Deep copy the particle state",
          "        trajectories.set(frame, this.getActiveParticles());"
        ],
        "after": [
          "      }",
          "",
          "      // Yield to prevent blocking UI"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2295:12",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2295,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    // Dispose Three.js resources",
          "    this.instancedGeometry?.dispose();",
          "    this.material?.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2297:27",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2297,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.instancedGeometry?.dispose();",
      "context": {
        "before": [
          "   */",
          "  dispose(): void {",
          "    // Dispose Three.js resources"
        ],
        "after": [
          "    this.material?.dispose();",
          "    this.sizeOverLifetimeTexture?.dispose();",
          "    this.opacityOverLifetimeTexture?.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2298:18",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2298,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.material?.dispose();",
      "context": {
        "before": [
          "  dispose(): void {",
          "    // Dispose Three.js resources",
          "    this.instancedGeometry?.dispose();"
        ],
        "after": [
          "    this.sizeOverLifetimeTexture?.dispose();",
          "    this.opacityOverLifetimeTexture?.dispose();",
          "    this.colorOverLifetimeTexture?.dispose();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2299:33",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2299,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.sizeOverLifetimeTexture?.dispose();",
      "context": {
        "before": [
          "    // Dispose Three.js resources",
          "    this.instancedGeometry?.dispose();",
          "    this.material?.dispose();"
        ],
        "after": [
          "    this.opacityOverLifetimeTexture?.dispose();",
          "    this.colorOverLifetimeTexture?.dispose();",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2300:36",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2300,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.opacityOverLifetimeTexture?.dispose();",
      "context": {
        "before": [
          "    this.instancedGeometry?.dispose();",
          "    this.material?.dispose();",
          "    this.sizeOverLifetimeTexture?.dispose();"
        ],
        "after": [
          "    this.colorOverLifetimeTexture?.dispose();",
          "",
          "    // Dispose trail system"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2301:34",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2301,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.colorOverLifetimeTexture?.dispose();",
      "context": {
        "before": [
          "    this.material?.dispose();",
          "    this.sizeOverLifetimeTexture?.dispose();",
          "    this.opacityOverLifetimeTexture?.dispose();"
        ],
        "after": [
          "",
          "    // Dispose trail system",
          "    if (this.trailSystem) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2322:23",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2322,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.textureSystem?.dispose();",
      "context": {
        "before": [
          "    }",
          "",
          "    // Dispose extracted subsystems"
        ],
        "after": [
          "    this.textureSystem = null;",
          "    this.audioSystem?.clear();",
          "    this.audioSystem = null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2324:21",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2324,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioSystem?.clear();",
      "context": {
        "before": [
          "    // Dispose extracted subsystems",
          "    this.textureSystem?.dispose();",
          "    this.textureSystem = null;"
        ],
        "after": [
          "    this.audioSystem = null;",
          "    this.frameCacheSystem?.clearCache();",
          "    this.frameCacheSystem = null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUParticleSystem.ts:2326:26",
      "file": "engine/particles/GPUParticleSystem.ts",
      "line": 2326,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.frameCacheSystem?.clearCache();",
      "context": {
        "before": [
          "    this.textureSystem = null;",
          "    this.audioSystem?.clear();",
          "    this.audioSystem = null;"
        ],
        "after": [
          "    this.frameCacheSystem = null;",
          "",
          "    // Clear collections"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:60:32",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 60,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "  private cellCount = 0;",
          "",
          "  constructor(maxParticles: number, config: Partial<SPHConfig> = {}) {"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 500_000)",
          "      : 10000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:178:26",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 178,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBuffers(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create GPU buffers",
          "   */"
        ],
        "after": [
          "    if (!this.device) return;",
          "",
          "    const particleBufferSize = this.maxParticles * PARTICLE_STRIDE * 4;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:229:28",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 229,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBindGroup(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create bind group",
          "   */"
        ],
        "after": [
          "    if (!this.device || !this.buffers || !this.bindGroupLayout) return;",
          "",
          "    this.bindGroup = this.device.createBindGroup({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:254:153",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 254,
      "column": 153,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private buildSpatialHash(particleBuffer: Float32Array, bounds: { min: { x: number; y: number; z: number }; max: { x: number; y: number; z: number } }): void {",
      "context": {
        "before": [
          "   * Build spatial hash grid on CPU and upload to GPU",
          "   * (GPU spatial hash construction is complex - using CPU for now)",
          "   */"
        ],
        "after": [
          "    if (!this.device || !this.buffers) return;",
          "",
          "    const cellSize = this.config.smoothingRadius;"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:335:154",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 335,
      "column": 154,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateParams(dt: number, particleCount: number, bounds: { min: { x: number; y: number; z: number }; max: { x: number; y: number; z: number } }): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update params buffer",
          "   */"
        ],
        "after": [
          "    if (!this.device || !this.buffers) return;",
          "",
          "    const params = new Float32Array(16);"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:387:14",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 387,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(dt) && dt > 0 ? dt : 0.016,",
      "context": {
        "before": [
          "    }",
          "",
          "    const safeDt = Math.min("
        ],
        "after": [
          "      this.config.maxTimeStep",
          "    );",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:482:43",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 482,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<SPHConfig>): void {",
      "context": {
        "before": [
          "  // CONFIGURATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "    this.cpuFallback.updateConfig(config);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSPHSystem.ts:499:12",
      "file": "engine/particles/GPUSPHSystem.ts",
      "line": 499,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  // CLEANUP",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.buffers) {",
          "      this.buffers.particles.destroy();",
          "      this.buffers.sphData.destroy();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:71:32",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 71,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "    maxPins: number = 1000,",
          "    config: Partial<SpringSystemConfig> = {}",
          "  ) {"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 1_000_000)",
          "      : 10000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:75:30",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 75,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxSprings = Number.isFinite(maxSprings) && maxSprings > 0",
      "context": {
        "before": [
          "      ? Math.min(Math.floor(maxParticles), 1_000_000)",
          "      : 10000;",
          ""
        ],
        "after": [
          "      ? Math.min(Math.floor(maxSprings), 1_000_000)",
          "      : 100000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:79:27",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 79,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxPins = Number.isFinite(maxPins) && maxPins > 0",
      "context": {
        "before": [
          "      ? Math.min(Math.floor(maxSprings), 1_000_000)",
          "      : 100000;",
          ""
        ],
        "after": [
          "      ? Math.min(Math.floor(maxPins), 10000)",
          "      : 1000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:184:26",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 184,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBuffers(): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.device) return;",
          "",
          "    const particleBufferSize = this.maxParticles * PARTICLE_STRIDE * 4;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:227:28",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 227,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBindGroup(): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.device || !this.buffers || !this.bindGroupLayout) return;",
          "",
          "    this.bindGroup = this.device.createBindGroup({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:254:4",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 254,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    stiffness?: number,",
          "    damping?: number,",
          "    breakThreshold?: number"
        ],
        "after": [
          "    if (this.springs.length >= this.maxSprings) {",
          "      console.warn(\"GPUSpringSystem: Max springs reached\");",
          "      return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:286:4",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 286,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    height: number,",
          "    spacing: number,",
          "    stiffness?: number"
        ],
        "after": [
          "    const k = stiffness ?? this.config.globalStiffness;",
          "    const diagLength = spacing * Math.SQRT2;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:311:78",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 311,
      "column": 78,
      "pattern": ": void",
      "severity": "LOW",
      "code": "createChain(particleIndices: number[], spacing: number, stiffness?: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const k = stiffness ?? this.config.globalStiffness;",
          "    for (let i = 0; i < particleIndices.length - 1; i++) {",
          "      this.addSpring(particleIndices[i], particleIndices[i + 1], spacing, k);"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:325:4",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 325,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    depth: number,",
          "    spacing: number,",
          "    stiffness?: number"
        ],
        "after": [
          "    const k = stiffness ?? this.config.globalStiffness;",
          "",
          "    const getIdx = (x: number, y: number, z: number) =>"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:354:17",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 354,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearSprings(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.springs = [];",
          "    this.cpuFallback.clearSprings();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:363:84",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 363,
      "column": 84,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pinParticle(particleIndex: number, position: { x: number; y: number; z: number }): void {",
      "context": {
        "before": [
          "  // PIN MANAGEMENT",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.pins.length >= this.maxPins) {",
          "      console.warn(\"GPUSpringSystem: Max pins reached\");",
          "      return;"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:381:39",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 381,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "unpinParticle(particleIndex: number): void {",
      "context": {
        "before": [
          "    this.cpuFallback.pinParticle(particleIndex);",
          "  }",
          ""
        ],
        "after": [
          "    this.pins = this.pins.filter(p => p.particleIndex !== particleIndex);",
          "    this.cpuFallback.unpinParticle(particleIndex);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:386:90",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 386,
      "column": 90,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updatePinPosition(particleIndex: number, position: { x: number; y: number; z: number }): void {",
      "context": {
        "before": [
          "    this.cpuFallback.unpinParticle(particleIndex);",
          "  }",
          ""
        ],
        "after": [
          "    const pin = this.pins.find(p => p.particleIndex === particleIndex);",
          "    if (pin) {",
          "      pin.position = { ...position };"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:393:14",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 393,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearPins(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.pins = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:401:26",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 401,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private uploadSprings(): void {",
      "context": {
        "before": [
          "  // SIMULATION",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!this.device || !this.buffers) return;",
          "",
          "    const springData = new Float32Array(this.maxSprings * 8);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:425:23",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 425,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private uploadPins(): void {",
      "context": {
        "before": [
          "    this.device.queue.writeBuffer(this.buffers.springs, 0, springData);",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.device || !this.buffers) return;",
          "",
          "    const pinData = new Float32Array(this.maxPins * 6);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:446:35",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 446,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateParams(dt: number): void {",
      "context": {
        "before": [
          "    this.device.queue.writeBuffer(this.buffers.pins, 0, pinData);",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.device || !this.buffers) return;",
          "",
          "    const params = new Float32Array(16);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:467:64",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 467,
      "column": 64,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializePrevPositions(particleBuffer: Float32Array): void {",
      "context": {
        "before": [
          "    this.device.queue.writeBuffer(this.buffers.params, 0, params);",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.device || !this.buffers) return;",
          "",
          "    const prevPositions = new Float32Array(this.maxParticles * 3);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:490:27",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 490,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDt = Number.isFinite(dt) && dt > 0 ? Math.min(dt, 0.1) : 0.016;",
      "context": {
        "before": [
          "      return;",
          "    }",
          ""
        ],
        "after": [
          "",
          "    // Initialize previous positions on first update",
          "    if (!this.prevPositionsInitialized) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:587:52",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 587,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<SpringSystemConfig>): void {",
      "context": {
        "before": [
          "    return this.pins.filter(p => p.active).length;",
          "  }",
          ""
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "    this.cpuFallback.updateConfig(config);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/GPUSpringSystem.ts:604:12",
      "file": "engine/particles/GPUSpringSystem.ts",
      "line": 604,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  // CLEANUP",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.buffers) {",
          "      this.buffers.particles.destroy();",
          "      this.buffers.prevPositions.destroy();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:29:40",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 29,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBindings(bindings: AudioBinding[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set audio bindings configuration",
          "   */"
        ],
        "after": [
          "    this.audioBindings = bindings;",
          "  }",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:47:51",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 47,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFeature(feature: AudioFeature, value: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set audio feature value",
          "   */"
        ],
        "after": [
          "    this.audioFeatures.set(feature, value);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:69:16",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 69,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "triggerBeat(): void {",
      "context": {
        "before": [
          "   * Trigger beat event (sets onsets to 1, auto-resets next frame)",
          "   * Note: 'onsets' is the actual audio feature for transient/beat detection",
          "   */"
        ],
        "after": [
          "    this.audioFeatures.set(\"onsets\", 1);",
          "",
          "    // Reset onset flag after frame"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:98:4",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 98,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      EmitterConfig & { accumulator: number; velocity: unknown }",
          "    >,",
          "    forceFields: Map<string, ForceFieldConfig>,"
        ],
        "after": [
          "    for (let i = 0; i < this.audioBindings.length; i++) {",
          "      const binding = this.audioBindings[i];",
          "      const featureValue = this.audioFeatures.get(binding.feature) ?? 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:108:36",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 108,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeSmoothing = Number.isFinite(binding.smoothing) ? Math.max(0, Math.min(1, binding.smoothing)) : 0;",
      "context": {
        "before": [
          "      // smoothing = 1 means maximum smoothing (very slow response)",
          "      const previousSmoothed = this.smoothedAudioValues.get(i) ?? featureValue;",
          "      // Validate smoothing"
        ],
        "after": [
          "      const alpha = 1 - safeSmoothing; // Convert smoothing to alpha",
          "      const smoothed = alpha * featureValue + (1 - alpha) * previousSmoothed;",
          "      this.smoothedAudioValues.set(i, smoothed);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:114:30",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 114,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMin = Number.isFinite(binding.min) ? binding.min : 0;",
      "context": {
        "before": [
          "      this.smoothedAudioValues.set(i, smoothed);",
          "",
          "      // Validate min/max separately to handle NaN"
        ],
        "after": [
          "      const safeMax = Number.isFinite(binding.max) ? binding.max : 1;",
          "      const bindingRange = safeMax - safeMin;",
          "      const safeRange = bindingRange !== 0 ? bindingRange : 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:115:30",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 115,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMax = Number.isFinite(binding.max) ? binding.max : 1;",
      "context": {
        "before": [
          "",
          "      // Validate min/max separately to handle NaN",
          "      const safeMin = Number.isFinite(binding.min) ? binding.min : 0;"
        ],
        "after": [
          "      const bindingRange = safeMax - safeMin;",
          "      const safeRange = bindingRange !== 0 ? bindingRange : 1;",
          "      // Map to output range"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:124:36",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 124,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeOutputMin = Number.isFinite(binding.outputMin) ? binding.outputMin : 0;",
      "context": {
        "before": [
          "        Math.min(1, (smoothed - safeMin) / safeRange),",
          "      );",
          "      // Validate output range"
        ],
        "after": [
          "      const safeOutputMax = Number.isFinite(binding.outputMax) ? binding.outputMax : 1;",
          "      let output = safeOutputMin + t * (safeOutputMax - safeOutputMin);",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:125:36",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 125,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeOutputMax = Number.isFinite(binding.outputMax) ? binding.outputMax : 1;",
      "context": {
        "before": [
          "      );",
          "      // Validate output range",
          "      const safeOutputMin = Number.isFinite(binding.outputMin) ? binding.outputMin : 0;"
        ],
        "after": [
          "      let output = safeOutputMin + t * (safeOutputMax - safeOutputMin);",
          "",
          "      // Apply curve (using validated output range)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:145:71",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 145,
      "column": 71,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const threshold = (typeof rawThreshold === 'number' && Number.isFinite(rawThreshold)) ? rawThreshold : 0.5;",
      "context": {
        "before": [
          "      if (triggerMode === \"onThreshold\") {",
          "        // Only apply when smoothed value exceeds threshold",
          "        const rawThreshold = binding.threshold;"
        ],
        "after": [
          "        if (t < threshold) continue;",
          "      } else if (triggerMode === \"onBeat\") {",
          "        // Only apply when beat/onset is detected"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:187:32",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 187,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMin = Number.isFinite(binding.min) ? binding.min : 0;",
      "context": {
        "before": [
          "      ) {",
          "        const featureValue = this.audioFeatures.get(binding.feature) ?? 0;",
          "        // Validate min/max separately to handle NaN"
        ],
        "after": [
          "        const safeMax = Number.isFinite(binding.max) ? binding.max : 1;",
          "        const range = safeMax - safeMin;",
          "        const safeRange = range !== 0 ? range : 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:188:32",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 188,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMax = Number.isFinite(binding.max) ? binding.max : 1;",
      "context": {
        "before": [
          "        const featureValue = this.audioFeatures.get(binding.feature) ?? 0;",
          "        // Validate min/max separately to handle NaN",
          "        const safeMin = Number.isFinite(binding.min) ? binding.min : 0;"
        ],
        "after": [
          "        const range = safeMax - safeMin;",
          "        const safeRange = range !== 0 ? range : 1;",
          "        const t = Math.max(0, Math.min(1, (featureValue - safeMin) / safeRange));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:192:38",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 192,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeOutputMin = Number.isFinite(binding.outputMin) ? binding.outputMin : 0;",
      "context": {
        "before": [
          "        const range = safeMax - safeMin;",
          "        const safeRange = range !== 0 ? range : 1;",
          "        const t = Math.max(0, Math.min(1, (featureValue - safeMin) / safeRange));"
        ],
        "after": [
          "        const safeOutputMax = Number.isFinite(binding.outputMax) ? binding.outputMax : 1;",
          "        return safeOutputMin + t * (safeOutputMax - safeOutputMin);",
          "      }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:193:38",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 193,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeOutputMax = Number.isFinite(binding.outputMax) ? binding.outputMax : 1;",
      "context": {
        "before": [
          "        const safeRange = range !== 0 ? range : 1;",
          "        const t = Math.max(0, Math.min(1, (featureValue - safeMin) / safeRange));",
          "        const safeOutputMin = Number.isFinite(binding.outputMin) ? binding.outputMin : 0;"
        ],
        "after": [
          "        return safeOutputMin + t * (safeOutputMax - safeOutputMin);",
          "      }",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:207:10",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 207,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset audio state",
          "   */"
        ],
        "after": [
          "    this.smoothedAudioValues.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:221:54",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 221,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSmoothedAudioValues(values: Map<number, number>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set smoothed audio values from cache restore.",
          "   */"
        ],
        "after": [
          "    this.smoothedAudioValues = new Map(values);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleAudioReactive.ts:228:10",
      "file": "engine/particles/ParticleAudioReactive.ts",
      "line": 228,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all audio data",
          "   */"
        ],
        "after": [
          "    this.audioFeatures.clear();",
          "    this.smoothedAudioValues.clear();",
          "    this.audioBindings = [];"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:76:32",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 76,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number, config: Partial<CollisionConfig> = {}) {",
          "    // Validate maxParticles to prevent infinite loop"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 10_000_000)",
          "      : 10000;",
          "    this.config = {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:97:40",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 97,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSpatialHash(hash: SpatialHashGrid): void {",
      "context": {
        "before": [
          "   * Set the shared spatial hash grid reference",
          "   * This should be called once during initialization",
          "   */"
        ],
        "after": [
          "    this.spatialHash = hash;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:109:39",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 109,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "update(particleBuffer: Float32Array): void {",
      "context": {
        "before": [
          "   * Apply collision detection and response",
          "   * @param particleBuffer - The current particle data buffer (modified in place)",
          "   */"
        ],
        "after": [
          "    if (!this.config.enabled) return;",
          "",
          "    // Apply boundary collisions"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:135:56",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 135,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyBoundaryCollisions(buffer: Float32Array): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply boundary collision response",
          "   */"
        ],
        "after": [
          "    if (!this.config.bounds) return;",
          "",
          "    const { min, max } = this.config.bounds;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:140:31",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 140,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const bounciness = Number.isFinite(this.config.bounciness) ? this.config.bounciness : 0.5;",
      "context": {
        "before": [
          "",
          "    const { min, max } = this.config.bounds;",
          "    // Validate bounciness to prevent NaN propagation"
        ],
        "after": [
          "    const behavior = this.config.boundsBehavior;",
          "    ",
          "    // Calculate bounds dimensions for wrap modulo - guard against zero"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:322:53",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 322,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyPlaneCollisions(buffer: Float32Array): void {",
      "context": {
        "before": [
          "   * Apply collision response for infinite planes",
          "   * Planes are defined by a point and normal vector",
          "   */"
        ],
        "after": [
          "    const planes = this.config.planes;",
          "    if (!planes || planes.length === 0) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:368:37",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 368,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const bounciness = Number.isFinite(plane.bounciness) ? plane.bounciness : 0.5;",
      "context": {
        "before": [
          "        const particleRadius = this.config.particleRadius ?? 5;",
          "        if (dist < particleRadius) {",
          "          // Particle is touching or behind plane"
        ],
        "after": [
          "          const friction = Number.isFinite(plane.friction) ? plane.friction : 0.1;",
          "",
          "          // Calculate velocity component normal to plane"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:369:35",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 369,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const friction = Number.isFinite(plane.friction) ? plane.friction : 0.1;",
      "context": {
        "before": [
          "        if (dist < particleRadius) {",
          "          // Particle is touching or behind plane",
          "          const bounciness = Number.isFinite(plane.bounciness) ? plane.bounciness : 0.5;"
        ],
        "after": [
          "",
          "          // Calculate velocity component normal to plane",
          "          const vDotN = vx * normalX + vy * normalY + vz * normalZ;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:424:56",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 424,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyParticleCollisions(buffer: Float32Array): void {",
      "context": {
        "before": [
          "   * Apply particle-particle collision response",
          "   * Uses shared spatial hash for efficiency",
          "   */"
        ],
        "after": [
          "    if (!this.spatialHash) return;",
          "",
          "    // Validate radius to prevent NaN/Infinity breaking collision detection"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:428:27",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 428,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const radius = Number.isFinite(this.config.particleRadius) && this.config.particleRadius > 0",
      "context": {
        "before": [
          "    if (!this.spatialHash) return;",
          "",
          "    // Validate radius to prevent NaN/Infinity breaking collision detection"
        ],
        "after": [
          "      ? this.config.particleRadius",
          "      : 5;",
          "    const radiusSq = radius * radius * 4; // 2*radius squared for collision detection"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:432:31",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 432,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const bounciness = Number.isFinite(this.config.bounciness) ? this.config.bounciness : 0.5;",
      "context": {
        "before": [
          "      ? this.config.particleRadius",
          "      : 5;",
          "    const radiusSq = radius * radius * 4; // 2*radius squared for collision detection"
        ],
        "after": [
          "",
          "    // Check collisions using shared spatial hash",
          "    for (let i = 0; i < this.maxParticles; i++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:486:36",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 486,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMass1 = Number.isFinite(mass1) && mass1 > 0 ? mass1 : 1;",
      "context": {
        "before": [
          "          if (dvn > 0) continue;",
          "",
          "          // Impulse magnitude - guard against zero/NaN mass"
        ],
        "after": [
          "          const safeMass2 = Number.isFinite(mass2) && mass2 > 0 ? mass2 : 1;",
          "          const totalMass = safeMass1 + safeMass2;",
          "          const impulse = (-(1 + bounciness) * dvn) / totalMass;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:487:36",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 487,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMass2 = Number.isFinite(mass2) && mass2 > 0 ? mass2 : 1;",
      "context": {
        "before": [
          "",
          "          // Impulse magnitude - guard against zero/NaN mass",
          "          const safeMass1 = Number.isFinite(mass1) && mass1 > 0 ? mass1 : 1;"
        ],
        "after": [
          "          const totalMass = safeMass1 + safeMass2;",
          "          const impulse = (-(1 + bounciness) * dvn) / totalMass;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:535:31",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 535,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable collisions",
          "   */"
        ],
        "after": [
          "    this.config.enabled = enabled;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:542:49",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 542,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<CollisionConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update collision configuration",
          "   */"
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:560:34",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 560,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addPlane(plane: CollisionPlane): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add a collision plane (floor, wall, ceiling)",
          "   */"
        ],
        "after": [
          "    if (!this.config.planes) {",
          "      this.config.planes = [];",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleCollisionSystem.ts:572:26",
      "file": "engine/particles/ParticleCollisionSystem.ts",
      "line": 572,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removePlane(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a collision plane by ID",
          "   */"
        ],
        "after": [
          "    if (!this.config.planes) return;",
          "    this.config.planes = this.config.planes.filter(p => p.id !== id);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:30:32",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 30,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number, config: ConnectionConfig) {",
          "    // Validate maxParticles to prevent infinite loop"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 1_000_000)  // Cap lower for connections (memory intensive)",
          "      : 10000;",
          "    this.config = config;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:43:15",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 43,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize connection rendering resources",
          "   */"
        ],
        "after": [
          "    // Validate maxConnections - cap to prevent memory exhaustion",
          "    const safeMaxConnections = Number.isFinite(this.config.maxConnections) && this.config.maxConnections > 0",
          "      ? Math.min(Math.floor(this.config.maxConnections), 50)  // Cap at 50 connections per particle"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:45:39",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 45,
      "column": 39,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMaxConnections = Number.isFinite(this.config.maxConnections) && this.config.maxConnections > 0",
      "context": {
        "before": [
          "   */",
          "  initialize(): void {",
          "    // Validate maxConnections - cap to prevent memory exhaustion"
        ],
        "after": [
          "      ? Math.min(Math.floor(this.config.maxConnections), 50)  // Cap at 50 connections per particle",
          "      : 10;",
          "    "
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:97:39",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 97,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "update(particleBuffer: Float32Array): void {",
      "context": {
        "before": [
          "   * Uses spatial hash for efficient neighbor queries",
          "   * @param particleBuffer - The current particle data buffer",
          "   */"
        ],
        "after": [
          "    if (!this.config.enabled || !this.connectionGeometry) return;",
          "",
          "    const posAttr = this.connectionGeometry.getAttribute("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:108:36",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 108,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMaxDistance = Number.isFinite(this.config.maxDistance) && this.config.maxDistance > 0",
      "context": {
        "before": [
          "    ) as THREE.BufferAttribute;",
          "",
          "    // Validate maxDistance"
        ],
        "after": [
          "      ? this.config.maxDistance",
          "      : 100;",
          "    const maxDistSq = safeMaxDistance * safeMaxDistance;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:154:20",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 154,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "grid.get(key)?.push(p);",
      "context": {
        "before": [
          "      const cellZ = Math.floor(p.z / cellSize);",
          "      const key = `${cellX},${cellY},${cellZ}`;",
          "      if (!grid.has(key)) grid.set(key, []);"
        ],
        "after": [
          "    }",
          "",
          "    // For each particle, find nearby particles using spatial hash"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:195:48",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 195,
      "column": 48,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeLineOpacity = Number.isFinite(this.config.lineOpacity)",
      "context": {
        "before": [
          "",
          "              if (distSq < maxDistSq) {",
          "                // Calculate opacity based on distance (validate lineOpacity)"
        ],
        "after": [
          "                  ? Math.max(0, Math.min(1, this.config.lineOpacity))",
          "                  : 0.5;",
          "                let opacity = safeLineOpacity;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:289:31",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 289,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable particle connections",
          "   */"
        ],
        "after": [
          "    this.config.enabled = enabled;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:303:50",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 303,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<ConnectionConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update connection configuration",
          "   */"
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:314:10",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 314,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset connection state",
          "   */"
        ],
        "after": [
          "    if (this.connectionGeometry) {",
          "      this.connectionGeometry.setDrawRange(0, 0);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleConnectionSystem.ts:323:12",
      "file": "engine/particles/ParticleConnectionSystem.ts",
      "line": 323,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose of all resources",
          "   */"
        ],
        "after": [
          "    if (this.connectionGeometry) {",
          "      this.connectionGeometry.dispose();",
          "      this.connectionGeometry = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:54:28",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 54,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "let radius = (Number.isFinite(rawRadius) && rawRadius > 0) ? rawRadius : 50;",
      "context": {
        "before": [
          "      const angle = rng() * Math.PI * 2;",
          "      // Validate radius",
          "      const rawRadius = shape.radius ?? 50;"
        ],
        "after": [
          "      if (!shape.emitFromEdge) {",
          "        radius *= Math.sqrt(rng()); // Uniform distribution in circle",
          "      }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:72:28",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 72,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "let radius = (Number.isFinite(rawRadius) && rawRadius > 0) ? rawRadius : 50;",
      "context": {
        "before": [
          "      const phi = Math.acos(2 * rng() - 1);",
          "      // Validate radius",
          "      const rawRadius = shape.radius ?? 50;"
        ],
        "after": [
          "      if (!shape.emitFromEdge) {",
          "        radius *= Math.cbrt(rng()); // Uniform distribution in sphere",
          "      }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:88:25",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 88,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const sx = Number.isFinite(size.x) ? size.x : 100;",
      "context": {
        "before": [
          "    case \"box\": {",
          "      const size = shape.boxSize ?? { x: 100, y: 100, z: 100 };",
          "      // Validate box dimensions"
        ],
        "after": [
          "      const sy = Number.isFinite(size.y) ? size.y : 100;",
          "      const sz = Number.isFinite(size.z) ? size.z : 100;",
          "      return base.add("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:89:25",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 89,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const sy = Number.isFinite(size.y) ? size.y : 100;",
      "context": {
        "before": [
          "      const size = shape.boxSize ?? { x: 100, y: 100, z: 100 };",
          "      // Validate box dimensions",
          "      const sx = Number.isFinite(size.x) ? size.x : 100;"
        ],
        "after": [
          "      const sz = Number.isFinite(size.z) ? size.z : 100;",
          "      return base.add(",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:90:25",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 90,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const sz = Number.isFinite(size.z) ? size.z : 100;",
      "context": {
        "before": [
          "      // Validate box dimensions",
          "      const sx = Number.isFinite(size.x) ? size.x : 100;",
          "      const sy = Number.isFinite(size.y) ? size.y : 100;"
        ],
        "after": [
          "      return base.add(",
          "        new THREE.Vector3(",
          "          (rng() - 0.5) * sx,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:118:34",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 118,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const coneRadius = (Number.isFinite(rawConeRadius) && rawConeRadius > 0) ? rawConeRadius : 50;",
      "context": {
        "before": [
          "      const t = rng();",
          "      // Validate cone dimensions",
          "      const rawConeRadius = shape.coneRadius ?? 50;"
        ],
        "after": [
          "      const rawConeLength = shape.coneLength ?? 100;",
          "      const coneLength = (Number.isFinite(rawConeLength) && rawConeLength > 0) ? rawConeLength : 100;",
          "      const radius = t * coneRadius;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:120:34",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 120,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const coneLength = (Number.isFinite(rawConeLength) && rawConeLength > 0) ? rawConeLength : 100;",
      "context": {
        "before": [
          "      const rawConeRadius = shape.coneRadius ?? 50;",
          "      const coneRadius = (Number.isFinite(rawConeRadius) && rawConeRadius > 0) ? rawConeRadius : 50;",
          "      const rawConeLength = shape.coneLength ?? 100;"
        ],
        "after": [
          "      const radius = t * coneRadius;",
          "      const height = t * coneLength;",
          "      return base.add("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:139:32",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 139,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.1;",
      "context": {
        "before": [
          "      const { width, height, data } = shape.imageData;",
          "      // Validate threshold",
          "      const rawThreshold = shape.emissionThreshold ?? 0.1;"
        ],
        "after": [
          "",
          "      // Try up to 100 times to find a valid pixel",
          "      for (let attempt = 0; attempt < 100; attempt++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:174:32",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 174,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.05;",
      "context": {
        "before": [
          "      const depthData = shape.depthData;",
          "      // Validate threshold",
          "      const rawThreshold = shape.emissionThreshold ?? 0.05;"
        ],
        "after": [
          "",
          "      // Try up to 100 times to find an edge pixel",
          "      for (let attempt = 0; attempt < 100; attempt++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:274:29",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 274,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeSpread = Number.isFinite(emitter.emissionSpread) ? Math.max(0, emitter.emissionSpread) : 0;",
      "context": {
        "before": [
          "  }",
          "",
          "  // Validate spread"
        ],
        "after": [
          "  if (safeSpread <= 0) {",
          "    return baseDir;",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:315:35",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 315,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeInitialSpeed = Number.isFinite(emitter.initialSpeed) ? Math.max(0, emitter.initialSpeed) : 100;",
      "context": {
        "before": [
          "): { velocity: THREE.Vector3; direction: THREE.Vector3; speed: number } {",
          "  const direction = getEmissionDirection(emitter, rng);",
          "  // Validate speed parameters"
        ],
        "after": [
          "  const safeSpeedVariance = Number.isFinite(emitter.speedVariance) ? Math.max(0, emitter.speedVariance) : 0;",
          "  const speed = safeInitialSpeed + (rng() - 0.5) * 2 * safeSpeedVariance;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:316:36",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 316,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeSpeedVariance = Number.isFinite(emitter.speedVariance) ? Math.max(0, emitter.speedVariance) : 0;",
      "context": {
        "before": [
          "  const direction = getEmissionDirection(emitter, rng);",
          "  // Validate speed parameters",
          "  const safeInitialSpeed = Number.isFinite(emitter.initialSpeed) ? Math.max(0, emitter.initialSpeed) : 100;"
        ],
        "after": [
          "  const speed = safeInitialSpeed + (rng() - 0.5) * 2 * safeSpeedVariance;",
          "",
          "  // Inherit emitter velocity (validate inheritance factor)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleEmitterLogic.ts:320:30",
      "file": "engine/particles/ParticleEmitterLogic.ts",
      "line": 320,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeInherit = Number.isFinite(emitter.inheritEmitterVelocity) ? emitter.inheritEmitterVelocity : 0;",
      "context": {
        "before": [
          "  const speed = safeInitialSpeed + (rng() - 0.5) * 2 * safeSpeedVariance;",
          "",
          "  // Inherit emitter velocity (validate inheritance factor)"
        ],
        "after": [
          "  const inheritVel = emitter.velocity",
          "    .clone()",
          "    .multiplyScalar(safeInherit);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:31:32",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 31,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number, config: FlockingConfig) {",
          "    // Validate maxParticles to prevent infinite loop"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 10_000_000)",
          "      : 10000;",
          "    this.config = config;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:45:40",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 45,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSpatialHash(hash: SpatialHashGrid): void {",
      "context": {
        "before": [
          "   * Set the shared spatial hash grid reference",
          "   * This should be called once during initialization",
          "   */"
        ],
        "after": [
          "    this.spatialHash = hash;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:54:28",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 54,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.spatialHash?.getRawCells() ?? null;",
      "context": {
        "before": [
          "   * @deprecated Use setSpatialHash and rebuild from GPUParticleSystem instead",
          "   */",
          "  getSpatialHash(): Map<string, number[]> | null {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:61:51",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 61,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateSpatialHash(_particleBuffer: Float32Array): void {",
      "context": {
        "before": [
          "   * @deprecated Use shared SpatialHashGrid.rebuild() instead",
          "   * Kept for backwards compatibility - now a no-op",
          "   */"
        ],
        "after": [
          "    // No-op: spatial hash is now managed by GPUParticleSystem",
          "    // and shared between flocking and collision systems",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:75:58",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 75,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyFlocking(particleBuffer: Float32Array, dt: number): void {",
      "context": {
        "before": [
          "   * @param particleBuffer - The current particle data buffer (modified in place)",
          "   * @param dt - Delta time in seconds",
          "   */"
        ],
        "after": [
          "    if (!this.config.enabled || !this.spatialHash) return;",
          "    ",
          "    // Validate dt to prevent NaN propagation"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:79:27",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 79,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDt = Number.isFinite(dt) && dt >= 0 ? Math.min(dt, 1.0) : 0.016;",
      "context": {
        "before": [
          "    if (!this.config.enabled || !this.spatialHash) return;",
          "    ",
          "    // Validate dt to prevent NaN propagation"
        ],
        "after": [
          "",
          "    for (let i = 0; i < this.maxParticles; i++) {",
          "      const offset = i * PARTICLE_STRIDE;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:106:42",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 106,
      "column": 42,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safePerceptionAngle = Number.isFinite(this.config.perceptionAngle)",
      "context": {
        "before": [
          "",
          "      // Precompute perception angle cosine threshold (360 means all neighbors visible)",
          "      // Validate perceptionAngle to prevent NaN"
        ],
        "after": [
          "        ? Math.max(0, this.config.perceptionAngle) ",
          "        : 360;",
          "      const perceptionCos ="
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:147:38",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 147,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeSepRadius = Number.isFinite(this.config.separationRadius) && this.config.separationRadius > 0",
      "context": {
        "before": [
          "        }",
          "",
          "        // Validate radius values"
        ],
        "after": [
          "          ? this.config.separationRadius : 50;",
          "        const safeAlignRadius = Number.isFinite(this.config.alignmentRadius) && this.config.alignmentRadius > 0",
          "          ? this.config.alignmentRadius : 100;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:149:40",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 149,
      "column": 40,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeAlignRadius = Number.isFinite(this.config.alignmentRadius) && this.config.alignmentRadius > 0",
      "context": {
        "before": [
          "        // Validate radius values",
          "        const safeSepRadius = Number.isFinite(this.config.separationRadius) && this.config.separationRadius > 0",
          "          ? this.config.separationRadius : 50;"
        ],
        "after": [
          "          ? this.config.alignmentRadius : 100;",
          "        const safeCohRadius = Number.isFinite(this.config.cohesionRadius) && this.config.cohesionRadius > 0",
          "          ? this.config.cohesionRadius : 150;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:151:38",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 151,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeCohRadius = Number.isFinite(this.config.cohesionRadius) && this.config.cohesionRadius > 0",
      "context": {
        "before": [
          "          ? this.config.separationRadius : 50;",
          "        const safeAlignRadius = Number.isFinite(this.config.alignmentRadius) && this.config.alignmentRadius > 0",
          "          ? this.config.alignmentRadius : 100;"
        ],
        "after": [
          "          ? this.config.cohesionRadius : 150;",
          "",
          "        // Separation - steer away from nearby neighbors"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:180:36",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 180,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeSepWeight = Number.isFinite(this.config.separationWeight) ? this.config.separationWeight : 1.5;",
      "context": {
        "before": [
          "      }",
          "",
          "      // Validate weights and maxForce"
        ],
        "after": [
          "      const safeAlignWeight = Number.isFinite(this.config.alignmentWeight) ? this.config.alignmentWeight : 1.0;",
          "      const safeCohWeight = Number.isFinite(this.config.cohesionWeight) ? this.config.cohesionWeight : 1.0;",
          "      const safeMaxForce = Number.isFinite(this.config.maxForce) && this.config.maxForce > 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:181:38",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 181,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeAlignWeight = Number.isFinite(this.config.alignmentWeight) ? this.config.alignmentWeight : 1.0;",
      "context": {
        "before": [
          "",
          "      // Validate weights and maxForce",
          "      const safeSepWeight = Number.isFinite(this.config.separationWeight) ? this.config.separationWeight : 1.5;"
        ],
        "after": [
          "      const safeCohWeight = Number.isFinite(this.config.cohesionWeight) ? this.config.cohesionWeight : 1.0;",
          "      const safeMaxForce = Number.isFinite(this.config.maxForce) && this.config.maxForce > 0",
          "        ? this.config.maxForce : 10;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:182:36",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 182,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeCohWeight = Number.isFinite(this.config.cohesionWeight) ? this.config.cohesionWeight : 1.0;",
      "context": {
        "before": [
          "      // Validate weights and maxForce",
          "      const safeSepWeight = Number.isFinite(this.config.separationWeight) ? this.config.separationWeight : 1.5;",
          "      const safeAlignWeight = Number.isFinite(this.config.alignmentWeight) ? this.config.alignmentWeight : 1.0;"
        ],
        "after": [
          "      const safeMaxForce = Number.isFinite(this.config.maxForce) && this.config.maxForce > 0",
          "        ? this.config.maxForce : 10;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:183:35",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 183,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMaxForce = Number.isFinite(this.config.maxForce) && this.config.maxForce > 0",
      "context": {
        "before": [
          "      const safeSepWeight = Number.isFinite(this.config.separationWeight) ? this.config.separationWeight : 1.5;",
          "      const safeAlignWeight = Number.isFinite(this.config.alignmentWeight) ? this.config.alignmentWeight : 1.0;",
          "      const safeCohWeight = Number.isFinite(this.config.cohesionWeight) ? this.config.cohesionWeight : 1.0;"
        ],
        "after": [
          "        ? this.config.maxForce : 10;",
          "",
          "      // Apply weighted forces"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:219:35",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 219,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMaxSpeed = Number.isFinite(this.config.maxSpeed) && this.config.maxSpeed > 0",
      "context": {
        "before": [
          "      particleBuffer[offset + 5] += steering.z * safeDt;",
          "",
          "      // Limit speed (validate maxSpeed to prevent velocity reversal)"
        ],
        "after": [
          "        ? this.config.maxSpeed",
          "        : 100;  // Default max speed",
          "      const newSpeed = Math.sqrt("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:250:31",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 250,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Enable or disable flocking",
          "   */"
        ],
        "after": [
          "    this.config.enabled = enabled;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:257:48",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 257,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<FlockingConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update flocking configuration",
          "   */"
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFlockingSystem.ts:276:10",
      "file": "engine/particles/ParticleFlockingSystem.ts",
      "line": 276,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "   * Reset flocking state",
          "   * Note: Spatial hash is managed externally and cleared by GPUParticleSystem",
          "   */"
        ],
        "after": [
          "    // No local state to reset - spatial hash is shared",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:75:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 75,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const strength = Number.isFinite(rawStrength) ? rawStrength : 0;",
      "context": {
        "before": [
          "",
          "  // Validate strength to prevent NaN/Infinity propagation",
          "  const rawStrength = field.strength * falloff;"
        ],
        "after": [
          "",
          "  switch (field.type) {",
          "    case \"gravity\":"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:80:25",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 80,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(field.direction?.x ?? 0) * strength,",
      "context": {
        "before": [
          "  switch (field.type) {",
          "    case \"gravity\":",
          "      force.set("
        ],
        "after": [
          "        (field.direction?.y ?? 1) * strength,",
          "        (field.direction?.z ?? 0) * strength,",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:81:25",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 81,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(field.direction?.y ?? 1) * strength,",
      "context": {
        "before": [
          "    case \"gravity\":",
          "      force.set(",
          "        (field.direction?.x ?? 0) * strength,"
        ],
        "after": [
          "        (field.direction?.z ?? 0) * strength,",
          "      );",
          "      break;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:82:25",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 82,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(field.direction?.z ?? 0) * strength,",
      "context": {
        "before": [
          "      force.set(",
          "        (field.direction?.x ?? 0) * strength,",
          "        (field.direction?.y ?? 1) * strength,"
        ],
        "after": [
          "      );",
          "      break;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:98:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 98,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.x ?? 0,",
      "context": {
        "before": [
          "    case \"vortex\":",
          "      if (dist > 0.001) {",
          "        const axis = new THREE.Vector3("
        ],
        "after": [
          "          field.vortexAxis?.y ?? 0,",
          "          field.vortexAxis?.z ?? 1,",
          "        ).normalize();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:99:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 99,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.y ?? 0,",
      "context": {
        "before": [
          "      if (dist > 0.001) {",
          "        const axis = new THREE.Vector3(",
          "          field.vortexAxis?.x ?? 0,"
        ],
        "after": [
          "          field.vortexAxis?.z ?? 1,",
          "        ).normalize();",
          "        const toParticle = new THREE.Vector3(dx, dy, dz);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:100:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 100,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.z ?? 1,",
      "context": {
        "before": [
          "        const axis = new THREE.Vector3(",
          "          field.vortexAxis?.x ?? 0,",
          "          field.vortexAxis?.y ?? 0,"
        ],
        "after": [
          "        ).normalize();",
          "        const toParticle = new THREE.Vector3(dx, dy, dz);",
          "        const tangent = new THREE.Vector3()"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:115:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 115,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const scale = Number.isFinite(rawScale) ? rawScale : 0.01;",
      "context": {
        "before": [
          "",
          "    case \"turbulence\": {",
          "      const rawScale = field.noiseScale ?? 0.01;"
        ],
        "after": [
          "      const rawSpeed = field.noiseSpeed ?? 0.5;",
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:117:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 117,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
      "context": {
        "before": [
          "      const rawScale = field.noiseScale ?? 0.01;",
          "      const scale = Number.isFinite(rawScale) ? rawScale : 0.01;",
          "      const rawSpeed = field.noiseSpeed ?? 0.5;"
        ],
        "after": [
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN",
          "      const time = Number.isFinite(simulationTime * speed) ? simulationTime * speed : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:119:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 119,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const time = Number.isFinite(simulationTime * speed) ? simulationTime * speed : 0;",
      "context": {
        "before": [
          "      const rawSpeed = field.noiseSpeed ?? 0.5;",
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN"
        ],
        "after": [
          "",
          "      // Simple 3D noise approximation",
          "      const nx ="
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:141:35",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 141,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const linearDrag = Number.isFinite(rawLinearDrag) ? rawLinearDrag : 0.1;",
      "context": {
        "before": [
          "      if (speed > 0.001) {",
          "        // Validate drag coefficients to prevent NaN",
          "        const rawLinearDrag = field.linearDrag ?? 0.1;"
        ],
        "after": [
          "        const rawQuadDrag = field.quadraticDrag ?? 0.01;",
          "        const quadDrag = Number.isFinite(rawQuadDrag) ? rawQuadDrag : 0.01;",
          "        const dragMag = linearDrag * speed + quadDrag * speed * speed;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:143:33",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 143,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const quadDrag = Number.isFinite(rawQuadDrag) ? rawQuadDrag : 0.01;",
      "context": {
        "before": [
          "        const rawLinearDrag = field.linearDrag ?? 0.1;",
          "        const linearDrag = Number.isFinite(rawLinearDrag) ? rawLinearDrag : 0.1;",
          "        const rawQuadDrag = field.quadraticDrag ?? 0.01;"
        ],
        "after": [
          "        const dragMag = linearDrag * speed + quadDrag * speed * speed;",
          "        // Drag opposes velocity: F = -c * v_normalized * |v|^n",
          "        // set(-v) then multiply by positive gives force opposing velocity"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:157:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 157,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.windDirection?.x ?? 1,",
      "context": {
        "before": [
          "",
          "    case \"wind\": {",
          "      const windDir = new THREE.Vector3("
        ],
        "after": [
          "        field.windDirection?.y ?? 0,",
          "        field.windDirection?.z ?? 0,",
          "      ).normalize();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:158:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 158,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.windDirection?.y ?? 0,",
      "context": {
        "before": [
          "    case \"wind\": {",
          "      const windDir = new THREE.Vector3(",
          "        field.windDirection?.x ?? 1,"
        ],
        "after": [
          "        field.windDirection?.z ?? 0,",
          "      ).normalize();",
          "      const gust ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:159:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 159,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.windDirection?.z ?? 0,",
      "context": {
        "before": [
          "      const windDir = new THREE.Vector3(",
          "        field.windDirection?.x ?? 1,",
          "        field.windDirection?.y ?? 0,"
        ],
        "after": [
          "      ).normalize();",
          "      const gust =",
          "        Math.sin(simulationTime * (field.gustFrequency ?? 0.5)) *"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:171:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 171,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const sigma = Number.isFinite(rawSigma) ? rawSigma : 10;",
      "context": {
        "before": [
          "    case \"lorenz\": {",
          "      // Lorenz strange attractor - validate to prevent NaN",
          "      const rawSigma = field.lorenzSigma ?? 10;"
        ],
        "after": [
          "      const rawRho = field.lorenzRho ?? 28;",
          "      const rho = Number.isFinite(rawRho) ? rawRho : 28;",
          "      const rawBeta = field.lorenzBeta ?? 2.667;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:173:26",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 173,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rho = Number.isFinite(rawRho) ? rawRho : 28;",
      "context": {
        "before": [
          "      const rawSigma = field.lorenzSigma ?? 10;",
          "      const sigma = Number.isFinite(rawSigma) ? rawSigma : 10;",
          "      const rawRho = field.lorenzRho ?? 28;"
        ],
        "after": [
          "      const rawBeta = field.lorenzBeta ?? 2.667;",
          "      const beta = Number.isFinite(rawBeta) ? rawBeta : 2.667;",
          "      force"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:175:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 175,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const beta = Number.isFinite(rawBeta) ? rawBeta : 2.667;",
      "context": {
        "before": [
          "      const rawRho = field.lorenzRho ?? 28;",
          "      const rho = Number.isFinite(rawRho) ? rawRho : 28;",
          "      const rawBeta = field.lorenzBeta ?? 2.667;"
        ],
        "after": [
          "      force",
          "        .set(sigma * (dy - dx), dx * (rho - dz) - dy, dx * dy - beta * dz)",
          "        .multiplyScalar(strength * 0.01);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:185:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 185,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const scale = Number.isFinite(rawScale) ? rawScale : 0.01;",
      "context": {
        "before": [
          "    case \"curl\": {",
          "      // Curl noise - divergence-free flow field",
          "      const rawScale = field.noiseScale ?? 0.01;"
        ],
        "after": [
          "      const rawSpeed = field.noiseSpeed ?? 0.5;",
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:187:28",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 187,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
      "context": {
        "before": [
          "      const rawScale = field.noiseScale ?? 0.01;",
          "      const scale = Number.isFinite(rawScale) ? rawScale : 0.01;",
          "      const rawSpeed = field.noiseSpeed ?? 0.5;"
        ],
        "after": [
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN",
          "      const time = Number.isFinite(simulationTime * speed) ? simulationTime * speed : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:189:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 189,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const time = Number.isFinite(simulationTime * speed) ? simulationTime * speed : 0;",
      "context": {
        "before": [
          "      const rawSpeed = field.noiseSpeed ?? 0.5;",
          "      const speed = Number.isFinite(rawSpeed) ? rawSpeed : 0.5;",
          "      // Guard against Infinity time causing Math.sin(Infinity) = NaN"
        ],
        "after": [
          "",
          "      // Compute curl of noise field (approximation)",
          "      const eps = 0.01;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:227:25",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 227,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.x ?? 0,",
      "context": {
        "before": [
          "      // Lorentz force: F = q(v  B)",
          "      // B field direction is the vortexAxis",
          "      const B = new THREE.Vector3("
        ],
        "after": [
          "        field.vortexAxis?.y ?? 1,",
          "        field.vortexAxis?.z ?? 0,",
          "      ).multiplyScalar(strength);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:228:25",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 228,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.y ?? 1,",
      "context": {
        "before": [
          "      // B field direction is the vortexAxis",
          "      const B = new THREE.Vector3(",
          "        field.vortexAxis?.x ?? 0,"
        ],
        "after": [
          "        field.vortexAxis?.z ?? 0,",
          "      ).multiplyScalar(strength);",
          "      const v = new THREE.Vector3(vx, vy, vz);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:229:25",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 229,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.z ?? 0,",
      "context": {
        "before": [
          "      const B = new THREE.Vector3(",
          "        field.vortexAxis?.x ?? 0,",
          "        field.vortexAxis?.y ?? 1,"
        ],
        "after": [
          "      ).multiplyScalar(strength);",
          "      const v = new THREE.Vector3(vx, vy, vz);",
          "      force.crossVectors(v, B);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:247:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 247,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.x ?? 0,",
      "context": {
        "before": [
          "",
          "        // Add tangential component for orbit",
          "        const axis = new THREE.Vector3("
        ],
        "after": [
          "          field.vortexAxis?.y ?? 1,",
          "          field.vortexAxis?.z ?? 0,",
          "        ).normalize();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:248:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 248,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.y ?? 1,",
      "context": {
        "before": [
          "        // Add tangential component for orbit",
          "        const axis = new THREE.Vector3(",
          "          field.vortexAxis?.x ?? 0,"
        ],
        "after": [
          "          field.vortexAxis?.z ?? 0,",
          "        ).normalize();",
          "        const tangent = new THREE.Vector3()"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleForceCalculator.ts:249:27",
      "file": "engine/particles/ParticleForceCalculator.ts",
      "line": 249,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.vortexAxis?.z ?? 0,",
      "context": {
        "before": [
          "        const axis = new THREE.Vector3(",
          "          field.vortexAxis?.x ?? 0,",
          "          field.vortexAxis?.y ?? 1,"
        ],
        "after": [
          "        ).normalize();",
          "        const tangent = new THREE.Vector3()",
          "          .crossVectors(axis, centripetal)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFrameCache.ts:82:32",
      "file": "engine/particles/ParticleFrameCache.ts",
      "line": 82,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "    maxMemoryMB: number = DEFAULT_MAX_CACHE_MEMORY_MB,",
          "  ) {",
          "    // Validate maxParticles"
        ],
        "after": [
          "      ? Math.floor(maxParticles)",
          "      : 10000;",
          "    // Validate cacheInterval to prevent modulo by zero"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFrameCache.ts:136:4",
      "file": "engine/particles/ParticleFrameCache.ts",
      "line": 136,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      number,",
          "      { size: number; opacity: number; randomOffset: number }",
          "    >, // Initial values for lifetime modulation (prevents exponential decay)"
        ],
        "after": [
          "    // Don't cache if we've exceeded max size - remove oldest",
          "    if (this.frameCache.size >= this.maxCacheSize) {",
          "      const oldestFrame = Math.min(...this.frameCache.keys());"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFrameCache.ts:209:15",
      "file": "engine/particles/ParticleFrameCache.ts",
      "line": 209,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all cached frames",
          "   */"
        ],
        "after": [
          "    this.frameCache.clear();",
          "    this.currentSimulatedFrame = -1;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFrameCache.ts:218:20",
      "file": "engine/particles/ParticleFrameCache.ts",
      "line": 218,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidateCache(): void {",
      "context": {
        "before": [
          "   * Invalidate the cache by incrementing version",
          "   * Called when particle parameters change (emitter config, force fields, etc.)",
          "   */"
        ],
        "after": [
          "    this.cacheVersion++;",
          "    // Don't clear the map - old entries will be ignored due to version mismatch",
          "    // This is more memory efficient for frequent invalidations"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFrameCache.ts:239:33",
      "file": "engine/particles/ParticleFrameCache.ts",
      "line": 239,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCurrentFrame(frame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set current simulated frame",
          "   */"
        ],
        "after": [
          "    this.currentSimulatedFrame = frame;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleFrameCache.ts:261:37",
      "file": "engine/particles/ParticleFrameCache.ts",
      "line": 261,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCacheInterval(interval: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the cache interval (how often to cache frames)",
          "   */"
        ],
        "after": [
          "    this.cacheInterval = Math.max(1, interval);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:101:37",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 101,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMaxParticles = Number.isFinite(config.maxParticles) && config.maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(config: GPUPhysicsConfig) {",
          "    // Validate maxParticles to prevent WebGL errors"
        ],
        "after": [
          "      ? Math.min(Math.floor(config.maxParticles), 10_000_000)  // Cap at 10M",
          "      : 10000;  // Sensible default",
          "    "
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:182:4",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 182,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private initializeTransformFeedback(",
          "    particleBufferA: Float32Array,",
          "    particleBufferB: Float32Array,"
        ],
        "after": [
          "    if (!this.gl) return;",
          "",
          "    const gl = this.gl;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:283:4",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 283,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    gl: WebGL2RenderingContext,",
          "    vao: WebGLVertexArrayObject,",
          "    vbo: WebGLBuffer,"
        ],
        "after": [
          "    gl.bindVertexArray(vao);",
          "    gl.bindBuffer(gl.ARRAY_BUFFER, vbo);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:406:27",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 406,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDt = Number.isFinite(dt) && dt >= 0 ? Math.min(dt, 1.0) : 0.016;  // Cap at 1s, default 60fps",
      "context": {
        "before": [
          "    onDeath: DeathCallback,",
          "  ): { currentBuffer: \"A\" | \"B\"; particleCount: number } {",
          "    // Validate dt to prevent NaN/Infinity propagation to GPU"
        ],
        "after": [
          "    ",
          "    if (this.useWebGPU && this.webgpuCompute) {",
          "      return this.updateWebGPU("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:464:21",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 464,
      "column": 21,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(val) ? val : fallback;",
      "context": {
        "before": [
          "    // Helper to sanitize values for WebGPU",
          "    const safe = (val: number | undefined, fallback: number): number => {",
          "      if (val === undefined) return fallback;"
        ],
        "after": [
          "    };",
          "",
          "    for (const field of forceFields.values()) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:486:28",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 486,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.x ?? field.vortexAxis?.x ?? field.windDirection?.x,",
      "context": {
        "before": [
          "              : 0,",
          "        direction: [",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "          safe("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:486:51",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 486,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.x ?? field.vortexAxis?.x ?? field.windDirection?.x,",
      "context": {
        "before": [
          "              : 0,",
          "        direction: [",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "          safe("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:486:77",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 486,
      "column": 77,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.x ?? field.vortexAxis?.x ?? field.windDirection?.x,",
      "context": {
        "before": [
          "              : 0,",
          "        direction: [",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "          safe("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:490:28",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 490,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.y ?? field.vortexAxis?.y ?? field.windDirection?.y,",
      "context": {
        "before": [
          "            0,",
          "          ),",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "          safe("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:490:51",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 490,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.y ?? field.vortexAxis?.y ?? field.windDirection?.y,",
      "context": {
        "before": [
          "            0,",
          "          ),",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "          safe("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:490:77",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 490,
      "column": 77,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.y ?? field.vortexAxis?.y ?? field.windDirection?.y,",
      "context": {
        "before": [
          "            0,",
          "          ),",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "          safe("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:494:28",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 494,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.z ?? field.vortexAxis?.z ?? field.windDirection?.z,",
      "context": {
        "before": [
          "            0,",
          "          ),",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "        ],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:494:51",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 494,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.z ?? field.vortexAxis?.z ?? field.windDirection?.z,",
      "context": {
        "before": [
          "            0,",
          "          ),",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "        ],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:494:77",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 494,
      "column": 77,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.z ?? field.vortexAxis?.z ?? field.windDirection?.z,",
      "context": {
        "before": [
          "            0,",
          "          ),",
          "          safe("
        ],
        "after": [
          "            0,",
          "          ),",
          "        ],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:506:32",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 506,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeSimTime = Number.isFinite(state.simulationTime) ? state.simulationTime : 0;",
      "context": {
        "before": [
          "    this.webgpuCompute.uploadForceFields(forceFieldData);",
          "",
          "    // Update simulation parameters (validate simulationTime)"
        ],
        "after": [
          "    this.webgpuCompute.updateParams(",
          "      dt,",
          "      safeSimTime,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:595:32",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 595,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeSimTime = Number.isFinite(state.simulationTime) ? state.simulationTime : 0;",
      "context": {
        "before": [
          "",
          "    gl.uniform1f(dtLoc, dt);",
          "    // Validate simulationTime"
        ],
        "after": [
          "    gl.uniform1f(timeLoc, safeSimTime);",
          "    gl.uniform1i(ffCountLoc, Math.min(forceFields.size, MAX_FORCE_FIELDS));",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:605:31",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 605,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const tex = textureProps?.__webglTexture;",
      "context": {
        "before": [
          "      const textureProps = this.renderer.properties.get(",
          "        this.forceFieldTexture,",
          "      ) as { __webglTexture?: WebGLTexture } | undefined;"
        ],
        "after": [
          "      if (tex) {",
          "        gl.bindTexture(gl.TEXTURE_2D, tex);",
          "        gl.uniform1i(ffTexLoc, 0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:666:4",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 666,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  private updateForceFieldTexture(",
          "    forceFields: Map<string, ForceFieldConfig>,"
        ],
        "after": [
          "    if (!this.forceFieldBuffer || !this.forceFieldTexture) return;",
          "",
          "    let fieldIndex = 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:677:55",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 677,
      "column": 55,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safePos = (val: number): number => Number.isFinite(val) ? val : 0;",
      "context": {
        "before": [
          "      const baseOffset = fieldIndex * 16;",
          "",
          "      // Helper to sanitize position values"
        ],
        "after": [
          "      const safePositive = (val: number, fallback: number): number => ",
          "        Number.isFinite(val) && val >= 0 ? val : fallback;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:679:16",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 679,
      "column": 16,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(val) && val >= 0 ? val : fallback;",
      "context": {
        "before": [
          "      // Helper to sanitize position values",
          "      const safePos = (val: number): number => Number.isFinite(val) ? val : 0;",
          "      const safePositive = (val: number, fallback: number): number => "
        ],
        "after": [
          "",
          "      // Row 0: position.xyz, type",
          "      this.forceFieldBuffer[baseOffset + 0] = safePos(field.position.x);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:690:54",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 690,
      "column": 54,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.forceFieldBuffer[baseOffset + 4] = Number.isFinite(field.strength) ? field.strength : 0;",
      "context": {
        "before": [
          "      );",
          "",
          "      // Row 1: strength, falloffStart, falloffEnd, falloffType"
        ],
        "after": [
          "      this.forceFieldBuffer[baseOffset + 5] = safePositive(field.falloffStart, 0);",
          "      this.forceFieldBuffer[baseOffset + 6] = safePositive(field.falloffEnd, 100);",
          "      this.forceFieldBuffer[baseOffset + 7] = getFalloffTypeIndex("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:700:23",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 700,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(val) ? val : fallback;",
      "context": {
        "before": [
          "      // Helper to sanitize float values for GPU",
          "      const safeFloat = (val: number | undefined, fallback: number): number => {",
          "        if (val === undefined) return fallback;"
        ],
        "after": [
          "      };",
          "",
          "      // Row 2: direction/axis.xyz, extra param"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:710:75",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 710,
      "column": 75,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.forceFieldBuffer[baseOffset + 8] = safeFloat(field.vortexAxis?.x, 0);",
      "context": {
        "before": [
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat(field.lorenzBeta, 2.666667);",
          "        this.forceFieldBuffer[baseOffset + 11] = 0;",
          "      } else if (field.type === \"orbit\" || field.type === \"path\") {"
        ],
        "after": [
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat(field.vortexAxis?.y, 1);",
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat(field.vortexAxis?.z, 0);",
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.pathRadius, 100);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:711:75",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 711,
      "column": 75,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.forceFieldBuffer[baseOffset + 9] = safeFloat(field.vortexAxis?.y, 1);",
      "context": {
        "before": [
          "        this.forceFieldBuffer[baseOffset + 11] = 0;",
          "      } else if (field.type === \"orbit\" || field.type === \"path\") {",
          "        this.forceFieldBuffer[baseOffset + 8] = safeFloat(field.vortexAxis?.x, 0);"
        ],
        "after": [
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat(field.vortexAxis?.z, 0);",
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.pathRadius, 100);",
          "      } else {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:712:76",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 712,
      "column": 76,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.forceFieldBuffer[baseOffset + 10] = safeFloat(field.vortexAxis?.z, 0);",
      "context": {
        "before": [
          "      } else if (field.type === \"orbit\" || field.type === \"path\") {",
          "        this.forceFieldBuffer[baseOffset + 8] = safeFloat(field.vortexAxis?.x, 0);",
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat(field.vortexAxis?.y, 1);"
        ],
        "after": [
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.pathRadius, 100);",
          "      } else {",
          "        this.forceFieldBuffer[baseOffset + 8] = safeFloat("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:716:26",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 716,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.x ?? field.vortexAxis?.x ?? field.windDirection?.x,",
      "context": {
        "before": [
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.pathRadius, 100);",
          "      } else {",
          "        this.forceFieldBuffer[baseOffset + 8] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:716:49",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 716,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.x ?? field.vortexAxis?.x ?? field.windDirection?.x,",
      "context": {
        "before": [
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.pathRadius, 100);",
          "      } else {",
          "        this.forceFieldBuffer[baseOffset + 8] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:716:75",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 716,
      "column": 75,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.x ?? field.vortexAxis?.x ?? field.windDirection?.x,",
      "context": {
        "before": [
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.pathRadius, 100);",
          "      } else {",
          "        this.forceFieldBuffer[baseOffset + 8] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:720:26",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 720,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.y ?? field.vortexAxis?.y ?? field.windDirection?.y,",
      "context": {
        "before": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:720:49",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 720,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.y ?? field.vortexAxis?.y ?? field.windDirection?.y,",
      "context": {
        "before": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:720:75",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 720,
      "column": 75,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.y ?? field.vortexAxis?.y ?? field.windDirection?.y,",
      "context": {
        "before": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 9] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:724:26",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 724,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.z ?? field.vortexAxis?.z ?? field.windDirection?.z,",
      "context": {
        "before": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.inwardForce, 0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:724:49",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 724,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.z ?? field.vortexAxis?.z ?? field.windDirection?.z,",
      "context": {
        "before": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.inwardForce, 0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:724:75",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 724,
      "column": 75,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "field.direction?.z ?? field.vortexAxis?.z ?? field.windDirection?.z,",
      "context": {
        "before": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 10] = safeFloat("
        ],
        "after": [
          "          0,",
          "        );",
          "        this.forceFieldBuffer[baseOffset + 11] = safeFloat(field.inwardForce, 0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:782:47",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 782,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "readParticleData(targetBuffer: Float32Array): void {",
      "context": {
        "before": [
          "  /**",
          "   * Read particle data from GPU into CPU buffer",
          "   */"
        ],
        "after": [
          "    if (!this.gl) return;",
          "",
          "    const gl = this.gl;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:816:38",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 816,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCurrentBuffer(buffer: \"A\" | \"B\"): void {",
      "context": {
        "before": [
          "    return this.currentBuffer;",
          "  }",
          ""
        ],
        "after": [
          "    this.currentBuffer = buffer;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:820:31",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 820,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "    this.currentBuffer = buffer;",
          "  }",
          ""
        ],
        "after": [
          "    if (enabled && !this.gpuPhysicsInitialized && !this.webgpuInitialized) {",
          "      console.warn(\"Cannot enable GPU physics - not initialized\");",
          "      return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:832:12",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 832,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cleanup(): void {",
      "context": {
        "before": [
          "  // CLEANUP",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (!this.gl) return;",
          "    const gl = this.gl;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:871:27",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 871,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.forceFieldTexture?.dispose();",
      "context": {
        "before": [
          "      this.transformFeedbackB = null;",
          "    }",
          ""
        ],
        "after": [
          "    this.forceFieldTexture = null;",
          "",
          "    // Cleanup WebGPU"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGPUPhysics.ts:885:12",
      "file": "engine/particles/ParticleGPUPhysics.ts",
      "line": 885,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "    this.useGPUPhysics = false;",
          "  }",
          ""
        ],
        "after": [
          "    this.cleanup();",
          "    this.gl = null;",
          "    this.renderer = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:31:32",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 31,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number) {",
          "    // Validate maxParticles"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 10_000_000)",
          "      : 10000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:58:40",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 58,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addGroup(config: ParticleGroupConfig): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add a new particle group",
          "   */"
        ],
        "after": [
          "    // Validate index",
          "    const index = Math.max(0, Math.min(MAX_PARTICLE_GROUPS - 1, config.index));",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:81:31",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 81,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeGroup(groupId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a particle group",
          "   */"
        ],
        "after": [
          "    if (groupId === \"default\") {",
          "      console.warn(\"ParticleGroupSystem: Cannot remove default group\");",
          "      return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:117:69",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 117,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateGroup(groupId: string, config: Partial<ParticleGroupConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update group configuration",
          "   */"
        ],
        "after": [
          "    const existing = this.groups.get(groupId);",
          "    if (!existing) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:131:59",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 131,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setParticleGroup(particleIndex: number, groupId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Assign a particle to a group",
          "   */"
        ],
        "after": [
          "    if (particleIndex < 0 || particleIndex >= this.maxParticles) return;",
          "",
          "    const group = this.groups.get(groupId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:143:67",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 143,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setParticleGroupIndex(particleIndex: number, groupIndex: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Assign a particle to a group by index",
          "   */"
        ],
        "after": [
          "    if (particleIndex < 0 || particleIndex >= this.maxParticles) return;",
          "    if (groupIndex < 0 || groupIndex >= MAX_PARTICLE_GROUPS) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:323:10",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 323,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset all particle group assignments to default",
          "   */"
        ],
        "after": [
          "    this.particleGroups.fill(0);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleGroupSystem.ts:330:12",
      "file": "engine/particles/ParticleGroupSystem.ts",
      "line": 330,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose resources",
          "   */"
        ],
        "after": [
          "    this.groups.clear();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:60:30",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 60,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.resolution = Number.isFinite(resolution) && resolution >= 2",
      "context": {
        "before": [
          "  constructor(rng: () => number, resolution: number = 256) {",
          "    this.rng = rng;",
          "    // Validate resolution"
        ],
        "after": [
          "      ? Math.floor(resolution)",
          "      : 256;",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:68:28",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 68,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRng(rng: () => number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the RNG function (for restoring deterministic state)",
          "   */"
        ],
        "after": [
          "    this.rng = rng;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:92:23",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 92,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(curve.value) ? curve.value : 1;",
      "context": {
        "before": [
          "    switch (curve.type) {",
          "      case \"constant\":",
          "        // Validate value"
        ],
        "after": [
          "",
          "      case \"linear\": {",
          "        // Validate start/end"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:96:30",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 96,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const start = Number.isFinite(curve.start) ? curve.start : 1;",
      "context": {
        "before": [
          "",
          "      case \"linear\": {",
          "        // Validate start/end"
        ],
        "after": [
          "        const end = Number.isFinite(curve.end) ? curve.end : 1;",
          "        return start + (end - start) * t;",
          "      }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:97:28",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 97,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const end = Number.isFinite(curve.end) ? curve.end : 1;",
      "context": {
        "before": [
          "      case \"linear\": {",
          "        // Validate start/end",
          "        const start = Number.isFinite(curve.start) ? curve.start : 1;"
        ],
        "after": [
          "        return start + (end - start) * t;",
          "      }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:146:28",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 146,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const min = Number.isFinite(curve.min) ? curve.min : 0;",
      "context": {
        "before": [
          "        // Use per-particle random offset for determinism (same particle = same random value)",
          "        const randVal = randomOffset !== undefined ? randomOffset : this.rng();",
          "        // Validate min/max"
        ],
        "after": [
          "        const max = Number.isFinite(curve.max) ? curve.max : 1;",
          "        return min + randVal * (max - min);",
          "      }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:147:28",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 147,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const max = Number.isFinite(curve.max) ? curve.max : 1;",
      "context": {
        "before": [
          "        const randVal = randomOffset !== undefined ? randomOffset : this.rng();",
          "        // Validate min/max",
          "        const min = Number.isFinite(curve.min) ? curve.min : 0;"
        ],
        "after": [
          "        return min + randVal * (max - min);",
          "      }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:233:72",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 233,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "sampleCurve(curve: ModulationCurve | undefined, output: Float32Array): void {",
      "context": {
        "before": [
          "  /**",
          "   * Sample a modulation curve into a float array",
          "   */"
        ],
        "after": [
          "    const len = output.length;",
          "",
          "    if (!curve) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleModulationCurves.ts:294:48",
      "file": "engine/particles/ParticleModulationCurves.ts",
      "line": 294,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disposeTextures(textures: ModulationTextures): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose modulation textures",
          "   */"
        ],
        "after": [
          "    textures.sizeOverLifetime.dispose();",
          "    textures.opacityOverLifetime.dispose();",
          "    textures.colorOverLifetime.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:122:32",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 122,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number, config: Partial<SPHConfig> = {}) {",
          "    // Validate maxParticles"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 500_000) // Lower cap for SPH (more expensive)",
          "      : 10000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:152:40",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 152,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSpatialHash(hash: SpatialHashGrid): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the spatial hash grid for neighbor queries",
          "   */"
        ],
        "after": [
          "    this.spatialHash = hash;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:159:51",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 159,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "update(particleBuffer: Float32Array, dt: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Main SPH simulation step",
          "   */"
        ],
        "after": [
          "    if (!this.spatialHash) {",
          "      console.warn(\"SPH: No spatial hash set. Call setSpatialHash() first.\");",
          "      return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:167:14",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 167,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(dt) && dt > 0 ? dt : 0.016,",
      "context": {
        "before": [
          "",
          "    // Clamp time step for stability",
          "    const safeDt = Math.min("
        ],
        "after": [
          "      this.config.maxTimeStep",
          "    );",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:183:52",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 183,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private substep(buffer: Float32Array, dt: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Single SPH substep",
          "   */"
        ],
        "after": [
          "    const h = this.config.smoothingRadius;",
          "",
          "    // Step 1: Calculate density and pressure for all particles"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:199:66",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 199,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private computeDensityPressure(buffer: Float32Array, h: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Compute density and pressure at each particle",
          "   */"
        ],
        "after": [
          "    if (!this.spatialHash) {",
          "      throw new Error(\"SPH computeDensityPressure called without spatialHash\");",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:263:57",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 263,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private computeForces(buffer: Float32Array, h: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Compute pressure, viscosity, and surface tension forces",
          "   */"
        ],
        "after": [
          "    if (!this.spatialHash) {",
          "      throw new Error(\"SPH computeForces called without spatialHash\");",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:389:54",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 389,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private integrate(buffer: Float32Array, dt: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Integrate velocities and positions",
          "   */"
        ],
        "after": [
          "    const gravity = this.config.gravity;",
          "",
          "    for (let i = 0; i < this.maxParticles; i++) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSPHSystem.ts:445:43",
      "file": "engine/particles/ParticleSPHSystem.ts",
      "line": 445,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<SPHConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update configuration",
          "   */"
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:85:32",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 85,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number, config: Partial<SpringSystemConfig> = {}) {",
          "    // Validate maxParticles"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 1_000_000)",
          "      : 10000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:91:38",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 91,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (v === undefined || !Number.isFinite(v)) return def;",
      "context": {
        "before": [
          "",
          "    // Validate and sanitize config values to prevent NaN propagation",
          "    const safeFloat = (v: number | undefined, def: number, min: number, max: number) => {"
        ],
        "after": [
          "      return Math.max(min, Math.min(max, v));",
          "    };",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:97:14",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 97,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(safeGravity.x) &&",
      "context": {
        "before": [
          "",
          "    const safeGravity = config.gravity;",
          "    const gravity = safeGravity && "
        ],
        "after": [
          "      Number.isFinite(safeGravity.y) && ",
          "      Number.isFinite(safeGravity.z)",
          "        ? safeGravity"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:98:14",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 98,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(safeGravity.y) &&",
      "context": {
        "before": [
          "    const safeGravity = config.gravity;",
          "    const gravity = safeGravity && ",
          "      Number.isFinite(safeGravity.x) && "
        ],
        "after": [
          "      Number.isFinite(safeGravity.z)",
          "        ? safeGravity",
          "        : { x: 0, y: -980, z: 0 };"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:99:14",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 99,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(safeGravity.z)",
      "context": {
        "before": [
          "    const gravity = safeGravity && ",
          "      Number.isFinite(safeGravity.x) && ",
          "      Number.isFinite(safeGravity.y) && "
        ],
        "after": [
          "        ? safeGravity",
          "        : { x: 0, y: -980, z: 0 };",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:121:43",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 121,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize(particleBuffer: Float32Array): void {",
      "context": {
        "before": [
          "   * Initialize the system with particle buffer",
          "   * Must be called before first update if using Verlet integration",
          "   */"
        ],
        "after": [
          "    if (this.config.useVerlet) {",
          "      // Store initial positions for Verlet integration",
          "      this.prevPositions = new Float32Array(this.maxParticles * 3);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:149:4",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 149,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    stiffness?: number,",
          "    damping?: number,",
          "    breakThreshold?: number"
        ],
        "after": [
          "    // Validate indices",
          "    if (particleA < 0 || particleA >= this.maxParticles ||",
          "        particleB < 0 || particleB >= this.maxParticles ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:158:35",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 158,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeRestLength = Number.isFinite(restLength) && restLength > 0",
      "context": {
        "before": [
          "    }",
          "",
          "    // Validate and sanitize spring parameters to prevent NaN"
        ],
        "after": [
          "      ? restLength : 10;",
          "    const safeStiffness = Number.isFinite(stiffness) && stiffness !== undefined",
          "      ? Math.max(0.001, Math.min(10000, stiffness))"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:160:34",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 160,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeStiffness = Number.isFinite(stiffness) && stiffness !== undefined",
      "context": {
        "before": [
          "    // Validate and sanitize spring parameters to prevent NaN",
          "    const safeRestLength = Number.isFinite(restLength) && restLength > 0 ",
          "      ? restLength : 10;"
        ],
        "after": [
          "      ? Math.max(0.001, Math.min(10000, stiffness))",
          "      : this.config.globalStiffness;",
          "    const safeDamping = Number.isFinite(damping) && damping !== undefined"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:163:32",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 163,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDamping = Number.isFinite(damping) && damping !== undefined",
      "context": {
        "before": [
          "    const safeStiffness = Number.isFinite(stiffness) && stiffness !== undefined",
          "      ? Math.max(0.001, Math.min(10000, stiffness))",
          "      : this.config.globalStiffness;"
        ],
        "after": [
          "      ? Math.max(0, Math.min(1000, damping))",
          "      : this.config.globalDamping;",
          "    const safeBreakThreshold = Number.isFinite(breakThreshold) && breakThreshold !== undefined"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:166:39",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 166,
      "column": 39,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeBreakThreshold = Number.isFinite(breakThreshold) && breakThreshold !== undefined",
      "context": {
        "before": [
          "    const safeDamping = Number.isFinite(damping) && damping !== undefined",
          "      ? Math.max(0, Math.min(1000, damping))",
          "      : this.config.globalDamping;"
        ],
        "after": [
          "      ? Math.max(0, breakThreshold)",
          "      : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:195:4",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 195,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    height: number,",
          "    spacing: number,",
          "    stiffness?: number"
        ],
        "after": [
          "    const k = stiffness ?? this.config.globalStiffness;",
          "    const diagLength = spacing * Math.SQRT2;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:237:4",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 237,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    particleIndices: number[],",
          "    spacing: number,",
          "    stiffness?: number"
        ],
        "after": [
          "    const k = stiffness ?? this.config.globalStiffness;",
          "",
          "    for (let i = 0; i < particleIndices.length - 1; i++) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:255:4",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 255,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    depth: number,",
          "    spacing: number,",
          "    stiffness?: number"
        ],
        "after": [
          "    const k = stiffness ?? this.config.globalStiffness;",
          "",
          "    const getIdx = (x: number, y: number, z: number) =>"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:289:17",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 289,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearSprings(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove all springs",
          "   */"
        ],
        "after": [
          "    this.springs = [];",
          "    this.constraints = [];",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:297:47",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 297,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeParticleSprings(particleIndex: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove springs connected to a specific particle",
          "   */"
        ],
        "after": [
          "    this.springs = this.springs.filter(",
          "      s => s.particleA !== particleIndex && s.particleB !== particleIndex",
          "    );"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:312:51",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 312,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "update(particleBuffer: Float32Array, dt: number): void {",
      "context": {
        "before": [
          "   * @param particleBuffer - The particle data buffer (modified in place)",
          "   * @param dt - Delta time in seconds",
          "   */"
        ],
        "after": [
          "    if (!this.initialized && this.config.useVerlet) {",
          "      this.initialize(particleBuffer);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:318:27",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 318,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDt = Number.isFinite(dt) && dt > 0 ? Math.min(dt, 0.1) : 0.016;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Validate dt"
        ],
        "after": [
          "",
          "    if (this.config.useVerlet) {",
          "      this.updateVerlet(particleBuffer, safeDt);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:331:56",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 331,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateEuler(buffer: Float32Array, dt: number): void {",
      "context": {
        "before": [
          "   * Euler integration with spring forces",
          "   * Simpler but less stable for stiff springs",
          "   */"
        ],
        "after": [
          "    const brokenSprings: number[] = [];",
          "",
          "    for (let s = 0; s < this.springs.length; s++) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:402:19",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 402,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(forceMag)) continue;",
      "context": {
        "before": [
          "      const forceMag = Math.max(-MAX_FORCE, Math.min(MAX_FORCE, rawForceMag));",
          "",
          "      // Skip if force is not finite"
        ],
        "after": [
          "",
          "      // Apply forces (equal and opposite to both particles)",
          "      const forceX = forceMag * nx;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:422:18",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 422,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(dvAx) && Number.isFinite(dvAy) && Number.isFinite(dvAz)) {",
      "context": {
        "before": [
          "      const dvBz = (forceZ / massB) * dt;",
          "",
          "      // Only apply if deltas are finite"
        ],
        "after": [
          "        buffer[offsetA + 3] += dvAx;",
          "        buffer[offsetA + 4] += dvAy;",
          "        buffer[offsetA + 5] += dvAz;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:422:43",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 422,
      "column": 43,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(dvAx) && Number.isFinite(dvAy) && Number.isFinite(dvAz)) {",
      "context": {
        "before": [
          "      const dvBz = (forceZ / massB) * dt;",
          "",
          "      // Only apply if deltas are finite"
        ],
        "after": [
          "        buffer[offsetA + 3] += dvAx;",
          "        buffer[offsetA + 4] += dvAy;",
          "        buffer[offsetA + 5] += dvAz;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:422:68",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 422,
      "column": 68,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(dvAx) && Number.isFinite(dvAy) && Number.isFinite(dvAz)) {",
      "context": {
        "before": [
          "      const dvBz = (forceZ / massB) * dt;",
          "",
          "      // Only apply if deltas are finite"
        ],
        "after": [
          "        buffer[offsetA + 3] += dvAx;",
          "        buffer[offsetA + 4] += dvAy;",
          "        buffer[offsetA + 5] += dvAz;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:428:18",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 428,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(dvBx) && Number.isFinite(dvBy) && Number.isFinite(dvBz)) {",
      "context": {
        "before": [
          "        buffer[offsetA + 5] += dvAz;",
          "      }",
          ""
        ],
        "after": [
          "        buffer[offsetB + 3] -= dvBx;",
          "        buffer[offsetB + 4] -= dvBy;",
          "        buffer[offsetB + 5] -= dvBz;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:428:43",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 428,
      "column": 43,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(dvBx) && Number.isFinite(dvBy) && Number.isFinite(dvBz)) {",
      "context": {
        "before": [
          "        buffer[offsetA + 5] += dvAz;",
          "      }",
          ""
        ],
        "after": [
          "        buffer[offsetB + 3] -= dvBx;",
          "        buffer[offsetB + 4] -= dvBy;",
          "        buffer[offsetB + 5] -= dvBz;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:428:68",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 428,
      "column": 68,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(dvBx) && Number.isFinite(dvBy) && Number.isFinite(dvBz)) {",
      "context": {
        "before": [
          "        buffer[offsetA + 5] += dvAz;",
          "      }",
          ""
        ],
        "after": [
          "        buffer[offsetB + 3] -= dvBx;",
          "        buffer[offsetB + 4] -= dvBy;",
          "        buffer[offsetB + 5] -= dvBz;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:462:19",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 462,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(buffer[offset + 3])) buffer[offset + 3] = 0;",
      "context": {
        "before": [
          "      buffer[offset + 5] = Math.max(-MAX_VELOCITY, Math.min(MAX_VELOCITY, buffer[offset + 5]));",
          "",
          "      // Skip if velocity is NaN"
        ],
        "after": [
          "      if (!Number.isFinite(buffer[offset + 4])) buffer[offset + 4] = 0;",
          "      if (!Number.isFinite(buffer[offset + 5])) buffer[offset + 5] = 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:463:19",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 463,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(buffer[offset + 4])) buffer[offset + 4] = 0;",
      "context": {
        "before": [
          "",
          "      // Skip if velocity is NaN",
          "      if (!Number.isFinite(buffer[offset + 3])) buffer[offset + 3] = 0;"
        ],
        "after": [
          "      if (!Number.isFinite(buffer[offset + 5])) buffer[offset + 5] = 0;",
          "",
          "      // Update position"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:464:19",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 464,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(buffer[offset + 5])) buffer[offset + 5] = 0;",
      "context": {
        "before": [
          "      // Skip if velocity is NaN",
          "      if (!Number.isFinite(buffer[offset + 3])) buffer[offset + 3] = 0;",
          "      if (!Number.isFinite(buffer[offset + 4])) buffer[offset + 4] = 0;"
        ],
        "after": [
          "",
          "      // Update position",
          "      const newX = buffer[offset + 0] + buffer[offset + 3] * dt;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:472:18",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 472,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(newX)) buffer[offset + 0] = newX;",
      "context": {
        "before": [
          "      const newZ = buffer[offset + 2] + buffer[offset + 5] * dt;",
          "",
          "      // Only apply if positions are finite"
        ],
        "after": [
          "      if (Number.isFinite(newY)) buffer[offset + 1] = newY;",
          "      if (Number.isFinite(newZ)) buffer[offset + 2] = newZ;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:473:18",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 473,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(newY)) buffer[offset + 1] = newY;",
      "context": {
        "before": [
          "",
          "      // Only apply if positions are finite",
          "      if (Number.isFinite(newX)) buffer[offset + 0] = newX;"
        ],
        "after": [
          "      if (Number.isFinite(newZ)) buffer[offset + 2] = newZ;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:474:18",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 474,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (Number.isFinite(newZ)) buffer[offset + 2] = newZ;",
      "context": {
        "before": [
          "      // Only apply if positions are finite",
          "      if (Number.isFinite(newX)) buffer[offset + 0] = newX;",
          "      if (Number.isFinite(newY)) buffer[offset + 1] = newY;"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:482:57",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 482,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateVerlet(buffer: Float32Array, dt: number): void {",
      "context": {
        "before": [
          "   * Verlet integration with position-based constraints",
          "   * More stable for stiff springs and cloth simulation",
          "   */"
        ],
        "after": [
          "    if (!this.prevPositions) return;",
          "",
          "    const gravity = this.config.gravity;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:621:37",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 621,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pinParticle(particleIndex: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Pin a particle in place (useful for cloth anchors)",
          "   */"
        ],
        "after": [
          "    this.pinnedParticles.add(particleIndex);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:628:39",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 628,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "unpinParticle(particleIndex: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Unpin a particle",
          "   */"
        ],
        "after": [
          "    this.pinnedParticles.delete(particleIndex);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:642:98",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 642,
      "column": 98,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyPins(buffer: Float32Array, pinPositions: Map<number, { x: number; y: number; z: number }>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Apply pin constraints (call after spring update)",
          "   */"
        ],
        "after": [
          "    for (const [idx, pos] of pinPositions) {",
          "      if (idx < 0 || idx >= this.maxParticles) continue;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSpringSystem.ts:675:52",
      "file": "engine/particles/ParticleSpringSystem.ts",
      "line": 675,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<SpringSystemConfig>): void {",
      "context": {
        "before": [
          "    return this.springs;",
          "  }",
          ""
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:43:32",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 43,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number, rng: RNGFunction) {",
          "    // Validate maxParticles for bounds checking"
        ],
        "after": [
          "      ? Math.floor(maxParticles)",
          "      : 10000;",
          "    this.rng = rng;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:56:42",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 56,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addSubEmitter(config: SubEmitterConfig): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add a sub-emitter configuration",
          "   */"
        ],
        "after": [
          "    this.subEmitters.set(config.id, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:63:31",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 63,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeSubEmitter(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a sub-emitter",
          "   */"
        ],
        "after": [
          "    this.subEmitters.delete(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:77:42",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 77,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEmitCallback(callback: EmitCallback): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the emit callback",
          "   */"
        ],
        "after": [
          "    this.onEmit = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:88:37",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 88,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "queueDeathEvent(event: DeathEvent): void {",
      "context": {
        "before": [
          "  /**",
          "   * Queue a death event for processing",
          "   */"
        ],
        "after": [
          "    this.pendingDeathEvents.push(event);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:132:21",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 132,
      "column": 21,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(death.index) || death.index < 0 || death.index >= this.maxParticles) {",
      "context": {
        "before": [
          "        if (this.rng() > subEmitter.triggerProbability) continue;",
          "",
          "        // Validate death.index bounds"
        ],
        "after": [
          "          continue;",
          "        }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:160:19",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 160,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "(Number.isFinite(subEmitter.emitCount) ? subEmitter.emitCount : 10) +",
      "context": {
        "before": [
          "",
          "        // Spawn sub-particles (validate count to prevent infinite loop)",
          "        const rawCount ="
        ],
        "after": [
          "          Math.floor((this.rng() - 0.5) * 2 * (Number.isFinite(subEmitter.emitCountVariance) ? subEmitter.emitCountVariance : 0));",
          "        const count = Math.max(0, Math.min(rawCount, 1000));  // Cap at 1000 sub-particles",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:161:55",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 161,
      "column": 55,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Math.floor((this.rng() - 0.5) * 2 * (Number.isFinite(subEmitter.emitCountVariance) ? subEmitter.emitCountVariance : 0));",
      "context": {
        "before": [
          "        // Spawn sub-particles (validate count to prevent infinite loop)",
          "        const rawCount =",
          "          (Number.isFinite(subEmitter.emitCount) ? subEmitter.emitCount : 10) +"
        ],
        "after": [
          "        const count = Math.max(0, Math.min(rawCount, 1000));  // Cap at 1000 sub-particles",
          "",
          "        for (let i = 0; i < count; i++) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:179:33",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 179,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const speed = (Number.isFinite(rawSpeed) && rawSpeed >= 0) ? rawSpeed : 100;",
      "context": {
        "before": [
          "          // Validate all config values",
          "          const overrides = subEmitter.overrides;",
          "          const rawSpeed = overrides.initialSpeed ?? 100;"
        ],
        "after": [
          "          const rawSpread = overrides.emissionSpread ?? 180;",
          "          const spread = Number.isFinite(rawSpread) ? Math.max(0, Math.min(360, rawSpread)) : 180;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:181:33",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 181,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const spread = Number.isFinite(rawSpread) ? Math.max(0, Math.min(360, rawSpread)) : 180;",
      "context": {
        "before": [
          "          const rawSpeed = overrides.initialSpeed ?? 100;",
          "          const speed = (Number.isFinite(rawSpeed) && rawSpeed >= 0) ? rawSpeed : 100;",
          "          const rawSpread = overrides.emissionSpread ?? 180;"
        ],
        "after": [
          "",
          "          // Random direction within spread cone (spherical for death = explosion)",
          "          const theta = this.rng() * Math.PI * 2;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:193:37",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 193,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const inheritVel = Number.isFinite(subEmitter.inheritVelocity)",
      "context": {
        "before": [
          "          const newVelZ = Math.cos(phi) * speed;",
          "",
          "          // Blend inherited velocity (validate inheritVelocity)"
        ],
        "after": [
          "            ? subEmitter.inheritVelocity : 0;",
          "          particleBuffer[subOffset + 3] = newVelX + parentVel.x * inheritVel;",
          "          particleBuffer[subOffset + 4] = newVelY + parentVel.y * inheritVel;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:202:36",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 202,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const lifetime = (Number.isFinite(rawLifetime) && rawLifetime > 0) ? rawLifetime : 30;",
      "context": {
        "before": [
          "          // Life (validate lifetime)",
          "          particleBuffer[subOffset + 6] = 0; // age",
          "          const rawLifetime = overrides.lifetime ?? 30;"
        ],
        "after": [
          "          particleBuffer[subOffset + 7] = lifetime;",
          "",
          "          // Physical - validate mass and size to prevent division by zero"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:208:36",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 208,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeMass = (Number.isFinite(rawMass) && rawMass > 0) ? rawMass : 1;",
      "context": {
        "before": [
          "          // Physical - validate mass and size to prevent division by zero",
          "          // Must check Number.isFinite before using - Math.max(NaN, x) = NaN",
          "          const rawMass = overrides.initialMass ?? 1;"
        ],
        "after": [
          "          particleBuffer[subOffset + 8] = safeMass; // mass",
          "",
          "          const rawInitialSize = overrides.initialSize ?? 5;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:212:43",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 212,
      "column": 43,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeInitialSize = (Number.isFinite(rawInitialSize) && rawInitialSize > 0) ? rawInitialSize : 5;",
      "context": {
        "before": [
          "          particleBuffer[subOffset + 8] = safeMass; // mass",
          "",
          "          const rawInitialSize = overrides.initialSize ?? 5;"
        ],
        "after": [
          "          const rawInheritSize = subEmitter.inheritSize ?? 0;",
          "          const safeInheritSize = Number.isFinite(rawInheritSize) ? rawInheritSize : 0;",
          "          const rawSize = safeInitialSize * (safeInheritSize > 0 ? parentSize * safeInheritSize : 1);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:214:42",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 214,
      "column": 42,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeInheritSize = Number.isFinite(rawInheritSize) ? rawInheritSize : 0;",
      "context": {
        "before": [
          "          const rawInitialSize = overrides.initialSize ?? 5;",
          "          const safeInitialSize = (Number.isFinite(rawInitialSize) && rawInitialSize > 0) ? rawInitialSize : 5;",
          "          const rawInheritSize = subEmitter.inheritSize ?? 0;"
        ],
        "after": [
          "          const rawSize = safeInitialSize * (safeInheritSize > 0 ? parentSize * safeInheritSize : 1);",
          "          particleBuffer[subOffset + 9] = Number.isFinite(rawSize) ? Math.max(rawSize, 0.001) : 5; // size",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:216:50",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 216,
      "column": 50,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "particleBuffer[subOffset + 9] = Number.isFinite(rawSize) ? Math.max(rawSize, 0.001) : 5; // size",
      "context": {
        "before": [
          "          const rawInheritSize = subEmitter.inheritSize ?? 0;",
          "          const safeInheritSize = Number.isFinite(rawInheritSize) ? rawInheritSize : 0;",
          "          const rawSize = safeInitialSize * (safeInheritSize > 0 ? parentSize * safeInheritSize : 1);"
        ],
        "after": [
          "",
          "          // Rotation (validate inheritRotation)",
          "          const rawInheritRot = subEmitter.inheritRotation ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:220:37",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 220,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const inheritRot = Number.isFinite(rawInheritRot) ? rawInheritRot : 0;",
      "context": {
        "before": [
          "",
          "          // Rotation (validate inheritRotation)",
          "          const rawInheritRot = subEmitter.inheritRotation ?? 0;"
        ],
        "after": [
          "          particleBuffer[subOffset + 10] =",
          "            inheritRot > 0",
          "              ? parentRotation * inheritRot"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:226:33",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 226,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const angVel = Number.isFinite(rawAngVel) ? rawAngVel : 0;",
      "context": {
        "before": [
          "              ? parentRotation * inheritRot",
          "              : this.rng() * Math.PI * 2;",
          "          const rawAngVel = overrides.initialAngularVelocity ?? 0;"
        ],
        "after": [
          "          particleBuffer[subOffset + 11] = angVel;",
          "",
          "          // Color inheritance (validate inheritColor and colorStart)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:232:20",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 232,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(rawColorStart[0]) ? rawColorStart[0] : 1,",
      "context": {
        "before": [
          "          // Color inheritance (validate inheritColor and colorStart)",
          "          const rawColorStart = overrides.colorStart ?? [1, 1, 1, 1];",
          "          const colorStart: [number, number, number, number] = ["
        ],
        "after": [
          "            Number.isFinite(rawColorStart[1]) ? rawColorStart[1] : 1,",
          "            Number.isFinite(rawColorStart[2]) ? rawColorStart[2] : 1,",
          "            Number.isFinite(rawColorStart[3]) ? rawColorStart[3] : 1,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:233:20",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 233,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(rawColorStart[1]) ? rawColorStart[1] : 1,",
      "context": {
        "before": [
          "          const rawColorStart = overrides.colorStart ?? [1, 1, 1, 1];",
          "          const colorStart: [number, number, number, number] = [",
          "            Number.isFinite(rawColorStart[0]) ? rawColorStart[0] : 1,"
        ],
        "after": [
          "            Number.isFinite(rawColorStart[2]) ? rawColorStart[2] : 1,",
          "            Number.isFinite(rawColorStart[3]) ? rawColorStart[3] : 1,",
          "          ];"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:234:20",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 234,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(rawColorStart[2]) ? rawColorStart[2] : 1,",
      "context": {
        "before": [
          "          const colorStart: [number, number, number, number] = [",
          "            Number.isFinite(rawColorStart[0]) ? rawColorStart[0] : 1,",
          "            Number.isFinite(rawColorStart[1]) ? rawColorStart[1] : 1,"
        ],
        "after": [
          "            Number.isFinite(rawColorStart[3]) ? rawColorStart[3] : 1,",
          "          ];",
          "          const rawInheritCol = subEmitter.inheritColor ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:235:20",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 235,
      "column": 20,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(rawColorStart[3]) ? rawColorStart[3] : 1,",
      "context": {
        "before": [
          "            Number.isFinite(rawColorStart[0]) ? rawColorStart[0] : 1,",
          "            Number.isFinite(rawColorStart[1]) ? rawColorStart[1] : 1,",
          "            Number.isFinite(rawColorStart[2]) ? rawColorStart[2] : 1,"
        ],
        "after": [
          "          ];",
          "          const rawInheritCol = subEmitter.inheritColor ?? 0;",
          "          const inheritCol = Number.isFinite(rawInheritCol) ? rawInheritCol : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:238:37",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 238,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const inheritCol = Number.isFinite(rawInheritCol) ? rawInheritCol : 0;",
      "context": {
        "before": [
          "            Number.isFinite(rawColorStart[3]) ? rawColorStart[3] : 1,",
          "          ];",
          "          const rawInheritCol = subEmitter.inheritColor ?? 0;"
        ],
        "after": [
          "          if (inheritCol > 0) {",
          "            particleBuffer[subOffset + 12] =",
          "              parentColor[0] * inheritCol +"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:301:10",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 301,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset sub-emitter state",
          "   */"
        ],
        "after": [
          "    this.pendingDeathEvents = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleSubEmitter.ts:308:10",
      "file": "engine/particles/ParticleSubEmitter.ts",
      "line": 308,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all sub-emitters",
          "   */"
        ],
        "after": [
          "    this.subEmitters.clear();",
          "    this.pendingDeathEvents = [];",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:60:4",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 60,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  setRenderTargets(",
          "    material: THREE.ShaderMaterial | null,",
          "    instancedGeometry: THREE.InstancedBufferGeometry | null,"
        ],
        "after": [
          "    this.material = material;",
          "    this.instancedGeometry = instancedGeometry;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:104:36",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 104,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const cols = (Number.isFinite(rawCols) && rawCols > 0)",
      "context": {
        "before": [
          "            if (spriteSheet && (spriteSheet.columns || spriteSheet.rows)) {",
          "              // Validate cols/rows - use ?? first to handle undefined, then validate",
          "              const rawCols = spriteSheet.columns ?? 1;"
        ],
        "after": [
          "                ? Math.floor(rawCols)",
          "                : 1;",
          "              const rawRows = spriteSheet.rows ?? 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:108:36",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 108,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rows = (Number.isFinite(rawRows) && rawRows > 0)",
      "context": {
        "before": [
          "                ? Math.floor(rawCols)",
          "                : 1;",
          "              const rawRows = spriteSheet.rows ?? 1;"
        ],
        "after": [
          "                ? Math.floor(rawRows)",
          "                : 1;",
          "              // Validate frameRate"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:113:41",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 113,
      "column": 41,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const frameRate = (Number.isFinite(rawFrameRate) && rawFrameRate > 0)",
      "context": {
        "before": [
          "                : 1;",
          "              // Validate frameRate",
          "              const rawFrameRate = spriteSheet.frameRate ?? 10;"
        ],
        "after": [
          "                ? rawFrameRate",
          "                : 10;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:184:4",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 184,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      | \"triangle\"",
          "      | \"shadedSphere\"",
          "      | \"fadedSphere\","
        ],
        "after": [
          "    const shapeMap: Record<string, number> = {",
          "      none: 0,",
          "      circle: 1,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:213:38",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 213,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateSpriteAnimation(time: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update time uniform for sprite animation",
          "   */"
        ],
        "after": [
          "    if (this.material && this.spriteSheetConfig?.animate) {",
          "      this.material.uniforms.time.value = time;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:214:48",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 214,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.material && this.spriteSheetConfig?.animate) {",
      "context": {
        "before": [
          "   * Update time uniform for sprite animation",
          "   */",
          "  updateSpriteAnimation(time: number): void {"
        ],
        "after": [
          "      this.material.uniforms.time.value = time;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:235:4",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 235,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      minStretch?: number;",
          "      maxStretch?: number;",
          "    },"
        ],
        "after": [
          "    if (!this.material) return;",
          "",
          "    this.material.uniforms.motionBlurEnabled.value = config.enabled ? 1 : 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:241:49",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 241,
      "column": 49,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (config.strength !== undefined && Number.isFinite(config.strength)) {",
      "context": {
        "before": [
          "    this.material.uniforms.motionBlurEnabled.value = config.enabled ? 1 : 0;",
          "",
          "    // Validate motion blur values"
        ],
        "after": [
          "      this.material.uniforms.motionBlurStrength.value = Math.max(0, config.strength);",
          "    }",
          "    if (config.minStretch !== undefined && Number.isFinite(config.minStretch)) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:244:51",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 244,
      "column": 51,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (config.minStretch !== undefined && Number.isFinite(config.minStretch)) {",
      "context": {
        "before": [
          "    if (config.strength !== undefined && Number.isFinite(config.strength)) {",
          "      this.material.uniforms.motionBlurStrength.value = Math.max(0, config.strength);",
          "    }"
        ],
        "after": [
          "      this.material.uniforms.minStretch.value = Math.max(0, config.minStretch);",
          "    }",
          "    if (config.maxStretch !== undefined && Number.isFinite(config.maxStretch)) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:247:51",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 247,
      "column": 51,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (config.maxStretch !== undefined && Number.isFinite(config.maxStretch)) {",
      "context": {
        "before": [
          "    if (config.minStretch !== undefined && Number.isFinite(config.minStretch)) {",
          "      this.material.uniforms.minStretch.value = Math.max(0, config.minStretch);",
          "    }"
        ],
        "after": [
          "      this.material.uniforms.maxStretch.value = Math.max(0, config.maxStretch);",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:272:37",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 272,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeGlow(config: GlowConfig): void {",
      "context": {
        "before": [
          "   * Initialize glow effect rendering",
          "   * Creates a separate mesh that renders an expanded soft glow behind particles",
          "   */"
        ],
        "after": [
          "    this.glowConfig = config;",
          "",
          "    if (!config.enabled || !this.instancedGeometry) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:278:31",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 278,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeRadius = Number.isFinite(config.radius) && config.radius > 0 ? config.radius : 10;",
      "context": {
        "before": [
          "    if (!config.enabled || !this.instancedGeometry) return;",
          "",
          "    // Validate glow config"
        ],
        "after": [
          "    const safeIntensity = Number.isFinite(config.intensity) && config.intensity >= 0 ? config.intensity : 0.5;",
          "    ",
          "    // Create glow material with custom shaders"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:279:34",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 279,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeIntensity = Number.isFinite(config.intensity) && config.intensity >= 0 ? config.intensity : 0.5;",
      "context": {
        "before": [
          "",
          "    // Validate glow config",
          "    const safeRadius = Number.isFinite(config.radius) && config.radius > 0 ? config.radius : 10;"
        ],
        "after": [
          "    ",
          "    // Create glow material with custom shaders",
          "    this.glowMaterial = new THREE.ShaderMaterial({"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:308:5",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 308,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    enabled?: boolean;",
          "    radius?: number;",
          "    intensity?: number;"
        ],
        "after": [
          "    if (!this.glowConfig) {",
          "      this.glowConfig = { enabled: false, radius: 10, intensity: 0.5 };",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:322:49",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 322,
      "column": 49,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (config.radius !== undefined && Number.isFinite(config.radius)) {",
      "context": {
        "before": [
          "",
          "    if (this.glowMaterial) {",
          "      // Validate glow values"
        ],
        "after": [
          "        const safeRadius = Math.max(0, config.radius);",
          "        this.glowMaterial.uniforms.glowRadius.value = safeRadius / 10;",
          "        this.glowConfig.radius = safeRadius;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:327:52",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 327,
      "column": 52,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (config.intensity !== undefined && Number.isFinite(config.intensity)) {",
      "context": {
        "before": [
          "        this.glowMaterial.uniforms.glowRadius.value = safeRadius / 10;",
          "        this.glowConfig.radius = safeRadius;",
          "      }"
        ],
        "after": [
          "        const safeIntensity = Math.max(0, config.intensity);",
          "        this.glowMaterial.uniforms.glowIntensity.value = safeIntensity;",
          "        this.glowConfig.intensity = safeIntensity;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:356:12",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 356,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all texture resources",
          "   */"
        ],
        "after": [
          "    this.particleTexture?.dispose();",
          "    this.particleTexture = null;",
          "    this.spriteSheetConfig = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:357:25",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 357,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.particleTexture?.dispose();",
      "context": {
        "before": [
          "   * Dispose all texture resources",
          "   */",
          "  dispose(): void {"
        ],
        "after": [
          "    this.particleTexture = null;",
          "    this.spriteSheetConfig = null;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTextureSystem.ts:361:22",
      "file": "engine/particles/ParticleTextureSystem.ts",
      "line": 361,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.glowMaterial?.dispose();",
      "context": {
        "before": [
          "    this.particleTexture = null;",
          "    this.spriteSheetConfig = null;",
          ""
        ],
        "after": [
          "    this.glowMaterial = null;",
          "    this.glowMesh = null;",
          "    this.glowConfig = null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:53:32",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 53,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "    blendingConfig: TrailBlendingConfig,",
          "  ) {",
          "    // Validate maxParticles to prevent infinite loop/memory exhaustion"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 1_000_000)  // Cap lower for trails (memory intensive)",
          "      : 10000;",
          "    this.config = config;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:67:15",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 67,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize trail rendering resources",
          "   */"
        ],
        "after": [
          "    // Validate trailLength",
          "    const rawTrailLength = Number.isFinite(this.config.trailLength) && this.config.trailLength > 0",
          "      ? this.config.trailLength"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:69:35",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 69,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rawTrailLength = Number.isFinite(this.config.trailLength) && this.config.trailLength > 0",
      "context": {
        "before": [
          "   */",
          "  initialize(): void {",
          "    // Validate trailLength"
        ],
        "after": [
          "      ? this.config.trailLength",
          "      : 8;  // Default trail length",
          "    const trailLength = Math.min(rawTrailLength, this.TRAIL_POSITIONS_PER_PARTICLE);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:126:39",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 126,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "update(particleBuffer: Float32Array): void {",
      "context": {
        "before": [
          "   * Update trail positions for all particles",
          "   * @param particleBuffer - The current particle data buffer",
          "   */"
        ],
        "after": [
          "    if (!this.trailBuffer || !this.trailGeometry) return;",
          "",
          "    // Validate trailLength (same validation as initialize)"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:130:35",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 130,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rawTrailLength = Number.isFinite(this.config.trailLength) && this.config.trailLength > 0",
      "context": {
        "before": [
          "    if (!this.trailBuffer || !this.trailGeometry) return;",
          "",
          "    // Validate trailLength (same validation as initialize)"
        ],
        "after": [
          "      ? this.config.trailLength",
          "      : 8;",
          "    const trailLength = Math.min(rawTrailLength, this.TRAIL_POSITIONS_PER_PARTICLE);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:214:35",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 214,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const endAlpha = Number.isFinite(this.config.trailWidthEnd)",
      "context": {
        "before": [
          "        if (fadeMode === \"alpha\" || fadeMode === \"both\") {",
          "          // Interpolate from 1.0 (start) to trailWidthEnd (end)",
          "          // Validate trailWidthEnd"
        ],
        "after": [
          "            ? Math.max(0, Math.min(1, this.config.trailWidthEnd))  // Clamp to [0, 1]",
          "            : 0;  // Default: full fade",
          "          alpha1 *= 1 - t1Ratio * (1 - endAlpha);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:271:45",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 271,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(config: Partial<TrailConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update trail configuration",
          "   */"
        ],
        "after": [
          "    Object.assign(this.config, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:282:10",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 282,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset trail history (e.g., when scrubbing)",
          "   */"
        ],
        "after": [
          "    if (this.trailBuffer) {",
          "      this.trailBuffer.fill(0);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/ParticleTrailSystem.ts:294:12",
      "file": "engine/particles/ParticleTrailSystem.ts",
      "line": 294,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose of all resources",
          "   */"
        ],
        "after": [
          "    if (this.trailGeometry) {",
          "      this.trailGeometry.dispose();",
          "      this.trailGeometry = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:43:32",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 43,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(config.maxParticles) && config.maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(config: SpatialHashConfig) {",
          "    // Validate maxParticles to prevent infinite loop"
        ],
        "after": [
          "      ? Math.min(Math.floor(config.maxParticles), 10_000_000)",
          "      : 10000;",
          "    // Validate cellSize to prevent division by zero (NaN check required - Math.max(1, NaN) = NaN)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:47:28",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 47,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.cellSize = Number.isFinite(config.cellSize) && config.cellSize > 0",
      "context": {
        "before": [
          "      ? Math.min(Math.floor(config.maxParticles), 10_000_000)",
          "      : 10000;",
          "    // Validate cellSize to prevent division by zero (NaN check required - Math.max(1, NaN) = NaN)"
        ],
        "after": [
          "      ? config.cellSize",
          "      : 1;",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:61:40",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 61,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "rebuild(particleBuffer: Float32Array): void {",
      "context": {
        "before": [
          "   * Call this ONCE per frame before any neighbor queries",
          "   * @param particleBuffer - The current particle data buffer",
          "   */"
        ],
        "after": [
          "    this.cells.clear();",
          "    this.particleCells.clear();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:78:19",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 78,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(px) || !Number.isFinite(py) || !Number.isFinite(pz)) {",
      "context": {
        "before": [
          "      const pz = particleBuffer[offset + 2];",
          "",
          "      // Skip particles with invalid positions (NaN/Infinity)"
        ],
        "after": [
          "        continue;",
          "      }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:78:43",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 78,
      "column": 43,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(px) || !Number.isFinite(py) || !Number.isFinite(pz)) {",
      "context": {
        "before": [
          "      const pz = particleBuffer[offset + 2];",
          "",
          "      // Skip particles with invalid positions (NaN/Infinity)"
        ],
        "after": [
          "        continue;",
          "      }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:78:67",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 78,
      "column": 67,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(px) || !Number.isFinite(py) || !Number.isFinite(pz)) {",
      "context": {
        "before": [
          "      const pz = particleBuffer[offset + 2];",
          "",
          "      // Skip particles with invalid positions (NaN/Infinity)"
        ],
        "after": [
          "        continue;",
          "      }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:90:26",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 90,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.cells.get(key)?.push(i);",
      "context": {
        "before": [
          "      if (!this.cells.has(key)) {",
          "        this.cells.set(key, []);",
          "      }"
        ],
        "after": [
          "      this.particleCells.set(i, key);",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:115:17",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 115,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(px) || !Number.isFinite(py) || !Number.isFinite(pz)) {",
      "context": {
        "before": [
          "   */",
          "  *getNeighbors(px: number, py: number, pz: number): Generator<number> {",
          "    // Guard against NaN/Infinity positions causing infinite loops"
        ],
        "after": [
          "      return;",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:115:41",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 115,
      "column": 41,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(px) || !Number.isFinite(py) || !Number.isFinite(pz)) {",
      "context": {
        "before": [
          "   */",
          "  *getNeighbors(px: number, py: number, pz: number): Generator<number> {",
          "    // Guard against NaN/Infinity positions causing infinite loops"
        ],
        "after": [
          "      return;",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:115:65",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 115,
      "column": 65,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(px) || !Number.isFinite(py) || !Number.isFinite(pz)) {",
      "context": {
        "before": [
          "   */",
          "  *getNeighbors(px: number, py: number, pz: number): Generator<number> {",
          "    // Guard against NaN/Infinity positions causing infinite loops"
        ],
        "after": [
          "      return;",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:202:28",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 202,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCellSize(size: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update cell size (requires rebuild)",
          "   */"
        ],
        "after": [
          "    // NaN check required - Math.max(1, NaN) = NaN",
          "    this.cellSize = Number.isFinite(size) && size > 0 ? size : 1;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:204:28",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 204,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.cellSize = Number.isFinite(size) && size > 0 ? size : 1;",
      "context": {
        "before": [
          "   */",
          "  setCellSize(size: number): void {",
          "    // NaN check required - Math.max(1, NaN) = NaN"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/SpatialHashGrid.ts:258:10",
      "file": "engine/particles/SpatialHashGrid.ts",
      "line": 258,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all data",
          "   */"
        ],
        "after": [
          "    this.cells.clear();",
          "    this.particleCells.clear();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:421:28",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 421,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "maxParticles: Number.isFinite(config.maxParticles) && config.maxParticles > 0",
      "context": {
        "before": [
          "    this.device = device;",
          "    // Validate config",
          "    this.config = {"
        ],
        "after": [
          "        ? Math.floor(config.maxParticles)",
          "        : 10000,",
          "      bounds: config.bounds,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:425:23",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 425,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "damping: Number.isFinite(config.damping) ? Math.max(0, Math.min(1, config.damping)) : 0.99,",
      "context": {
        "before": [
          "        ? Math.floor(config.maxParticles)",
          "        : 10000,",
          "      bounds: config.bounds,"
        ],
        "after": [
          "      noiseScale: Number.isFinite(config.noiseScale) ? Math.max(0, config.noiseScale) : 1,",
          "      noiseSpeed: Number.isFinite(config.noiseSpeed) ? Math.max(0, config.noiseSpeed) : 1,",
          "    };"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:426:26",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 426,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "noiseScale: Number.isFinite(config.noiseScale) ? Math.max(0, config.noiseScale) : 1,",
      "context": {
        "before": [
          "        : 10000,",
          "      bounds: config.bounds,",
          "      damping: Number.isFinite(config.damping) ? Math.max(0, Math.min(1, config.damping)) : 0.99,"
        ],
        "after": [
          "      noiseSpeed: Number.isFinite(config.noiseSpeed) ? Math.max(0, config.noiseSpeed) : 1,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:427:26",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 427,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "noiseSpeed: Number.isFinite(config.noiseSpeed) ? Math.max(0, config.noiseSpeed) : 1,",
      "context": {
        "before": [
          "      bounds: config.bounds,",
          "      damping: Number.isFinite(config.damping) ? Math.max(0, Math.min(1, config.damping)) : 0.99,",
          "      noiseScale: Number.isFinite(config.noiseScale) ? Math.max(0, config.noiseScale) : 1,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:493:4",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 493,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    time: number,",
          "    particleCount: number,",
          "    forceFieldCount: number,"
        ],
        "after": [
          "    if (!this.paramsBuffer) return;",
          "",
          "    // Validate inputs"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:497:34",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 497,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDeltaTime = Number.isFinite(deltaTime) && deltaTime >= 0 ? deltaTime : 0;",
      "context": {
        "before": [
          "    if (!this.paramsBuffer) return;",
          "",
          "    // Validate inputs"
        ],
        "after": [
          "    const safeTime = Number.isFinite(time) ? time : 0;",
          "    const safeParticleCount = Number.isFinite(particleCount) && particleCount >= 0",
          "      ? Math.floor(particleCount)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:498:29",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 498,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeTime = Number.isFinite(time) ? time : 0;",
      "context": {
        "before": [
          "",
          "    // Validate inputs",
          "    const safeDeltaTime = Number.isFinite(deltaTime) && deltaTime >= 0 ? deltaTime : 0;"
        ],
        "after": [
          "    const safeParticleCount = Number.isFinite(particleCount) && particleCount >= 0",
          "      ? Math.floor(particleCount)",
          "      : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:499:38",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 499,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeParticleCount = Number.isFinite(particleCount) && particleCount >= 0",
      "context": {
        "before": [
          "    // Validate inputs",
          "    const safeDeltaTime = Number.isFinite(deltaTime) && deltaTime >= 0 ? deltaTime : 0;",
          "    const safeTime = Number.isFinite(time) ? time : 0;"
        ],
        "after": [
          "      ? Math.floor(particleCount)",
          "      : 0;",
          "    const safeForceFieldCount = Number.isFinite(forceFieldCount) && forceFieldCount >= 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:502:40",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 502,
      "column": 40,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeForceFieldCount = Number.isFinite(forceFieldCount) && forceFieldCount >= 0",
      "context": {
        "before": [
          "    const safeParticleCount = Number.isFinite(particleCount) && particleCount >= 0",
          "      ? Math.floor(particleCount)",
          "      : 0;"
        ],
        "after": [
          "      ? Math.min(Math.floor(forceFieldCount), 16)",
          "      : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:531:38",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 531,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "uploadParticles(data: Float32Array): void {",
      "context": {
        "before": [
          "  /**",
          "   * Upload particle data to GPU",
          "   */"
        ],
        "after": [
          "    const gpuBuffer =",
          "      this.pingPong === 0 ? this.particleBufferA : this.particleBufferB;",
          "    if (gpuBuffer) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:558:4",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 558,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      falloff: number;",
          "      direction: [number, number, number];",
          "    }>,"
        ],
        "after": [
          "    if (!this.forceFieldBuffer) return;",
          "",
          "    const buffer = new ArrayBuffer(16 * 12 * 4); // 16 fields * 12 floats * 4 bytes"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:587:30",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 587,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "step(particleCount: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Execute physics simulation step",
          "   */"
        ],
        "after": [
          "    if (",
          "      !this.pipeline ||",
          "      !this.particleBufferA ||"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:599:38",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 599,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeParticleCount = Number.isFinite(particleCount) && particleCount > 0",
      "context": {
        "before": [
          "    }",
          "",
          "    // Validate particleCount"
        ],
        "after": [
          "      ? Math.floor(particleCount)",
          "      : 0;",
          "    if (safeParticleCount === 0) return;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:675:12",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 675,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose of GPU resources",
          "   */"
        ],
        "after": [
          "    this.particleBufferA?.destroy();",
          "    this.particleBufferB?.destroy();",
          "    this.paramsBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:676:25",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 676,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.particleBufferA?.destroy();",
      "context": {
        "before": [
          "   * Dispose of GPU resources",
          "   */",
          "  dispose(): void {"
        ],
        "after": [
          "    this.particleBufferB?.destroy();",
          "    this.paramsBuffer?.destroy();",
          "    this.forceFieldBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:677:25",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 677,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.particleBufferB?.destroy();",
      "context": {
        "before": [
          "   */",
          "  dispose(): void {",
          "    this.particleBufferA?.destroy();"
        ],
        "after": [
          "    this.paramsBuffer?.destroy();",
          "    this.forceFieldBuffer?.destroy();",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:678:22",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 678,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.paramsBuffer?.destroy();",
      "context": {
        "before": [
          "  dispose(): void {",
          "    this.particleBufferA?.destroy();",
          "    this.particleBufferB?.destroy();"
        ],
        "after": [
          "    this.forceFieldBuffer?.destroy();",
          "",
          "    this.particleBufferA = null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/particles/webgpuParticleCompute.ts:679:26",
      "file": "engine/particles/webgpuParticleCompute.ts",
      "line": 679,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.forceFieldBuffer?.destroy();",
      "context": {
        "before": [
          "    this.particleBufferA?.destroy();",
          "    this.particleBufferB?.destroy();",
          "    this.paramsBuffer?.destroy();"
        ],
        "after": [
          "",
          "    this.particleBufferA = null;",
          "    this.particleBufferB = null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:109:22",
      "file": "engine/ParticleSimulationController.ts",
      "line": 109,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(seed: number): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** Reset to initial seed */"
        ],
        "after": [
          "    this.state = seed;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:132:26",
      "file": "engine/ParticleSimulationController.ts",
      "line": 132,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setState(state: number): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** Restore state from checkpoint */"
        ],
        "after": [
          "    this.state = state;",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:175:38",
      "file": "engine/ParticleSimulationController.ts",
      "line": 175,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.checkpointInterval = Number.isFinite(checkpointInterval) && checkpointInterval > 0",
      "context": {
        "before": [
          "    this.seed = seed;",
          "    this.rng = new SeededRNG(seed);",
          "    // Validate checkpointInterval to prevent modulo by zero"
        ],
        "after": [
          "      ? Math.floor(checkpointInterval)",
          "      : 30;",
          "    this.checkpoints = new Map();"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:247:10",
      "file": "engine/ParticleSimulationController.ts",
      "line": 247,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset controller and clear all checkpoints",
          "   */"
        ],
        "after": [
          "    this.system.reset();",
          "    this.rng.reset(this.seed);",
          "    this.checkpoints.clear();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:259:55",
      "file": "engine/ParticleSimulationController.ts",
      "line": 259,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateConfig(updates: Partial<ParticleSystemConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update configuration (clears all checkpoints)",
          "   */"
        ],
        "after": [
          "    Object.assign(this.config, updates);",
          "    this.system.setConfig(updates);",
          "    this.reset(); // Must reset - config change invalidates all checkpoints"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:293:42",
      "file": "engine/ParticleSimulationController.ts",
      "line": 293,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createCheckpoint(frame: number): void {",
      "context": {
        "before": [
          "   * Create a checkpoint at the current state",
          "   * DETERMINISM: Captures RNG state for exact restoration",
          "   */"
        ],
        "after": [
          "    const particles = this.system",
          "      .getParticles()",
          "      .map((p) => this.serializeParticle(p));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:318:43",
      "file": "engine/ParticleSimulationController.ts",
      "line": 318,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private restoreCheckpoint(frame: number): void {",
      "context": {
        "before": [
          "   * Restore state from a checkpoint",
          "   * DETERMINISM: Restores exact RNG state for reproducible continuation",
          "   */"
        ],
        "after": [
          "    const checkpoint = this.checkpoints.get(frame);",
          "    if (!checkpoint) {",
          "      throw new Error(`No checkpoint at frame ${frame}`);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:340:30",
      "file": "engine/ParticleSimulationController.ts",
      "line": 340,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private deterministicStep(): void {",
      "context": {
        "before": [
          "   * Perform one deterministic simulation step",
          "   * DETERMINISM: ParticleSystem now uses seeded RNG (mulberry32) for all randomness",
          "   */"
        ],
        "after": [
          "    // ParticleSystem.step() is now fully deterministic:",
          "    // - All Math.random() calls replaced with seeded RNG (this.rng.next())",
          "    // - Same seed + same frame = identical particle positions"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:452:30",
      "file": "engine/ParticleSimulationController.ts",
      "line": 452,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetLayer(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset a specific layer's controller",
          "   */"
        ],
        "after": [
          "    const controller = this.controllers.get(layerId);",
          "    if (controller) {",
          "      controller.reset();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/ParticleSimulationController.ts:462:10",
      "file": "engine/ParticleSimulationController.ts",
      "line": 462,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all controllers",
          "   */"
        ],
        "after": [
          "    this.controllers.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:59:63",
      "file": "engine/TransformControlsManager.ts",
      "line": 59,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private ensureObjectChildren(obj: THREE.Object3D, depth = 0): void {",
      "context": {
        "before": [
          "   * This is needed to prevent crashes when TransformControls or other objects",
          "   * from different Three.js instances are added to the scene.",
          "   */"
        ],
        "after": [
          "    if (!obj || depth > 50) return;",
          "",
          "    // Ensure children is an array"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:88:15",
      "file": "engine/TransformControlsManager.ts",
      "line": 88,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize(): void {",
      "context": {
        "before": [
          "   * Initialize transform controls for layer manipulation",
          "   * Wrapped in try-catch for multi-Three.js instance compatibility",
          "   */"
        ],
        "after": [
          "    if (this.transformControls) {",
          "      return; // Already initialized",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:143:30",
      "file": "engine/TransformControlsManager.ts",
      "line": 143,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerData = layer?.getLayerData?.();",
      "context": {
        "before": [
          "",
          "      // Get the layer to access anchor point",
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);"
        ],
        "after": [
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:143:44",
      "file": "engine/TransformControlsManager.ts",
      "line": 143,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerData = layer?.getLayerData?.();",
      "context": {
        "before": [
          "",
          "      // Get the layer to access anchor point",
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);"
        ],
        "after": [
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:144:32",
      "file": "engine/TransformControlsManager.ts",
      "line": 144,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
      "context": {
        "before": [
          "      // Get the layer to access anchor point",
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();"
        ],
        "after": [
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:144:43",
      "file": "engine/TransformControlsManager.ts",
      "line": 144,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
      "context": {
        "before": [
          "      // Get the layer to access anchor point",
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();"
        ],
        "after": [
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:144:56",
      "file": "engine/TransformControlsManager.ts",
      "line": 144,
      "column": 56,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
      "context": {
        "before": [
          "      // Get the layer to access anchor point",
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();"
        ],
        "after": [
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:144:63",
      "file": "engine/TransformControlsManager.ts",
      "line": 144,
      "column": 63,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
      "context": {
        "before": [
          "      // Get the layer to access anchor point",
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();"
        ],
        "after": [
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:145:32",
      "file": "engine/TransformControlsManager.ts",
      "line": 145,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
      "context": {
        "before": [
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;"
        ],
        "after": [
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          "",
          "      // Convert 3D position back to layer position by adding anchor point back"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:145:43",
      "file": "engine/TransformControlsManager.ts",
      "line": 145,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
      "context": {
        "before": [
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;"
        ],
        "after": [
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          "",
          "      // Convert 3D position back to layer position by adding anchor point back"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:145:56",
      "file": "engine/TransformControlsManager.ts",
      "line": 145,
      "column": 56,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
      "context": {
        "before": [
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;"
        ],
        "after": [
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          "",
          "      // Convert 3D position back to layer position by adding anchor point back"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:145:63",
      "file": "engine/TransformControlsManager.ts",
      "line": 145,
      "column": 63,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;",
      "context": {
        "before": [
          "      const layer = this.deps.layers.getLayer(this.selectedLayerId);",
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;"
        ],
        "after": [
          "      const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
          "",
          "      // Convert 3D position back to layer position by adding anchor point back"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:146:33",
      "file": "engine/TransformControlsManager.ts",
      "line": 146,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
      "context": {
        "before": [
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;"
        ],
        "after": [
          "",
          "      // Convert 3D position back to layer position by adding anchor point back",
          "      // The 3D object position is offset by anchor point in applyTransform()"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:146:44",
      "file": "engine/TransformControlsManager.ts",
      "line": 146,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
      "context": {
        "before": [
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;"
        ],
        "after": [
          "",
          "      // Convert 3D position back to layer position by adding anchor point back",
          "      // The 3D object position is offset by anchor point in applyTransform()"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:146:57",
      "file": "engine/TransformControlsManager.ts",
      "line": 146,
      "column": 57,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
      "context": {
        "before": [
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;"
        ],
        "after": [
          "",
          "      // Convert 3D position back to layer position by adding anchor point back",
          "      // The 3D object position is offset by anchor point in applyTransform()"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:146:72",
      "file": "engine/TransformControlsManager.ts",
      "line": 146,
      "column": 72,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorZ = (layerData?.transform?.anchorPoint?.value as any)?.z ?? 0;",
      "context": {
        "before": [
          "      const layerData = layer?.getLayerData?.();",
          "      const anchorX = layerData?.transform?.anchorPoint?.value?.x ?? 0;",
          "      const anchorY = layerData?.transform?.anchorPoint?.value?.y ?? 0;"
        ],
        "after": [
          "",
          "      // Convert 3D position back to layer position by adding anchor point back",
          "      // The 3D object position is offset by anchor point in applyTransform()"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:188:4",
      "file": "engine/TransformControlsManager.ts",
      "line": 188,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    callback:",
          "      | ((layerId: string, transform: LayerTransformUpdate) => void)",
          "      | null,"
        ],
        "after": [
          "    this.onTransformChange = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:196:38",
      "file": "engine/TransformControlsManager.ts",
      "line": 196,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayer(layerId: string | null): void {",
      "context": {
        "before": [
          "   * Select a layer and attach transform controls",
          "   * @param layerId - Layer ID to select, or null to deselect",
          "   */"
        ],
        "after": [
          "    // Initialize transform controls if not already done",
          "    if (!this.transformControls) {",
          "      this.initialize();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:234:32",
      "file": "engine/TransformControlsManager.ts",
      "line": 234,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "focusOnLayer(layerId: string): void {",
      "context": {
        "before": [
          "   * Focus the camera on a layer's position",
          "   * This moves the orbit target to the layer without changing camera rotation",
          "   */"
        ],
        "after": [
          "    const layerObject = this.deps.getLayerObject(layerId);",
          "    if (layerObject) {",
          "      const worldPos = new THREE.Vector3();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:255:31",
      "file": "engine/TransformControlsManager.ts",
      "line": 255,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMode(mode: TransformMode): void {",
      "context": {
        "before": [
          "   * Set the transform mode",
          "   * @param mode - 'translate' | 'rotate' | 'scale'",
          "   */"
        ],
        "after": [
          "    this.transformMode = mode;",
          "    if (this.transformControls) {",
          "      this.transformControls.setMode(mode);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:272:31",
      "file": "engine/TransformControlsManager.ts",
      "line": 272,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setVisible(visible: boolean): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set transform controls visibility",
          "   */"
        ],
        "after": [
          "    if (this.transformControls) {",
          "      (this.transformControls as any).visible = visible;",
          "      this.transformControls.enabled = visible;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:283:34",
      "file": "engine/TransformControlsManager.ts",
      "line": 283,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.transformControls?.dragging ?? false;",
      "context": {
        "before": [
          "   * Check if transform controls are dragging",
          "   */",
          "  isDragging(): boolean {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/TransformControlsManager.ts:289:12",
      "file": "engine/TransformControlsManager.ts",
      "line": 289,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    if (this.transformControls) {",
          "      this.transformControls.dispose();",
          "      this.transformControls = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/utils/colormapShader.ts:130:2",
      "file": "engine/utils/colormapShader.ts",
      "line": 130,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function updateColormapUniform(",
          "  material: THREE.ShaderMaterial,",
          "  colormap: \"viridis\" | \"plasma\" | \"grayscale\","
        ],
        "after": [
          "  material.uniforms.colormap.value = getColormapIndex(colormap);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/utils/colormapShader.ts:140:2",
      "file": "engine/utils/colormapShader.ts",
      "line": 140,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function updateOpacityUniform(",
          "  material: THREE.ShaderMaterial,",
          "  opacity: number,"
        ],
        "after": [
          "  material.uniforms.opacity.value = opacity;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/utils/PerformanceMonitor.ts:49:15",
      "file": "engine/utils/PerformanceMonitor.ts",
      "line": 49,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "beginFrame(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Call at the beginning of each frame",
          "   */"
        ],
        "after": [
          "    this.frameStartTime = performance.now();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "engine/utils/PerformanceMonitor.ts:83:30",
      "file": "engine/utils/PerformanceMonitor.ts",
      "line": 83,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const memoryUsed = memory?.usedJSHeapSize ?? 0;",
      "context": {
        "before": [
          "",
          "    // Get memory usage (Chrome only)",
          "    const memory = (performance as any).memory;"
        ],
        "after": [
          "",
          "    // Calculate average frame time",
          "    const avgFrameTime ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "engine/utils/PerformanceMonitor.ts:158:10",
      "file": "engine/utils/PerformanceMonitor.ts",
      "line": 158,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset all statistics",
          "   */"
        ],
        "after": [
          "    this.frameCount = 0;",
          "    this.frameTimes = [];",
          "    this.fps = 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "main.ts:58:33",
      "file": "main.ts",
      "line": 58,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function initializeEffectsOnce(): void {",
      "context": {
        "before": [
          "/**",
          " * Initialize effects exactly once for the lifetime of the extension.",
          " */"
        ],
        "after": [
          "  if (effectsInitialized) return;",
          "  initializeEffects();",
          "  effectsInitialized = true;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "main.ts:68:23",
      "file": "main.ts",
      "line": 68,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function setupBridge(): void {",
      "context": {
        "before": [
          " * Setup frontend  ComfyUI bridge.",
          " * Idempotent and fully reversible.",
          " */"
        ],
        "after": [
          "  if (bridgeHandler) return;",
          "",
          "  bridgeHandler = ((e: CustomEvent) => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "main.ts:80:26",
      "file": "main.ts",
      "line": 80,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function teardownBridge(): void {",
      "context": {
        "before": [
          "  window.addEventListener(\"lattice:inputs-ready\", bridgeHandler);",
          "}",
          ""
        ],
        "after": [
          "  if (!bridgeHandler) return;",
          "  window.removeEventListener(\"lattice:inputs-ready\", bridgeHandler);",
          "  bridgeHandler = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "main.ts:133:29",
      "file": "main.ts",
      "line": 133,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function unmountApp(): void {",
      "context": {
        "before": [
          "/**",
          " * Fully tear down the Vue application and all side effects.",
          " */"
        ],
        "after": [
          "  if (!appInstance) return;",
          "",
          "  try {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "main.ts:163:14",
      "file": "main.ts",
      "line": 163,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!bridge?.sendOutput) {",
      "context": {
        "before": [
          "  preview: string,",
          "): Promise<boolean> {",
          "  const bridge = window.LatticeCompositor;"
        ],
        "after": [
          "    console.warn(\"[Lattice] sendToComfyUI called before backend bridge ready\");",
          "    return false;",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:681:17",
      "file": "services/ai/actionExecutor.ts",
      "line": 681,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (property?.keyframes && property.keyframes.length > 0) {",
      "context": {
        "before": [
          "",
          "  for (const propPath of propertiesToScale) {",
          "    const property = findPropertyByPath(layer, propPath);"
        ],
        "after": [
          "      // Scale each keyframe's frame number",
          "      for (const kf of property.keyframes) {",
          "        kf.frame = Math.round(kf.frame * scaleFactor);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:788:23",
      "file": "services/ai/actionExecutor.ts",
      "line": 788,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const effect = layer?.effects?.[layer.effects.length - 1];",
      "context": {
        "before": [
          "",
          "  // Get the newly added effect (last in array)",
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);"
        ],
        "after": [
          "",
          "  if (!effect) {",
          "    return { effectId: null, message: `Failed to add effect ${effectType}` };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:788:32",
      "file": "services/ai/actionExecutor.ts",
      "line": 788,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const effect = layer?.effects?.[layer.effects.length - 1];",
      "context": {
        "before": [
          "",
          "  // Get the newly added effect (last in array)",
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);"
        ],
        "after": [
          "",
          "  if (!effect) {",
          "    return { effectId: null, message: `Failed to add effect ${effectType}` };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:821:13",
      "file": "services/ai/actionExecutor.ts",
      "line": 821,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.effects) {",
      "context": {
        "before": [
          "  const { layerId, effectId, params } = args;",
          "",
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);"
        ],
        "after": [
          "    return {",
          "      success: false,",
          "      message: `Layer ${layerId} not found or has no effects`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:883:39",
      "file": "services/ai/actionExecutor.ts",
      "line": 883,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (emitter && particleData.emitters?.[0]) {",
      "context": {
        "before": [
          "  const particleData = layer.data as ParticleLayerData;",
          "",
          "  // Update emitter configuration"
        ],
        "after": [
          "    Object.assign(particleData.emitters[0], emitter);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:888:41",
      "file": "services/ai/actionExecutor.ts",
      "line": 888,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (particles && particleData.emitters?.[0]) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Update particle settings"
        ],
        "after": [
          "    Object.assign(particleData.emitters[0], particles);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:952:28",
      "file": "services/ai/actionExecutor.ts",
      "line": 952,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const compSettings = comp?.settings || {",
      "context": {
        "before": [
          "  }",
          "",
          "  const comp = store.getActiveComp();"
        ],
        "after": [
          "    width: 1920,",
          "    height: 1080,",
          "    frameCount: 81,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1018:7",
      "file": "services/ai/actionExecutor.ts",
      "line": 1018,
      "column": 7,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "?.filter((kf) => kf.zoom !== undefined)",
      "context": {
        "before": [
          "      .filter((kf) => kf.pointOfInterest !== undefined)",
          "      .map((kf) => ({ frame: kf.frame, pointOfInterest: kf.pointOfInterest! })),",
          "    zoom: keyframes.zoom"
        ],
        "after": [
          "      .map((kf) => ({ frame: kf.frame, zoom: kf.zoom! })),",
          "  };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1038:20",
      "file": "services/ai/actionExecutor.ts",
      "line": 1038,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(keyframes.zoom?.length || 0);",
      "context": {
        "before": [
          "  const totalKeyframes =",
          "    keyframes.position.length +",
          "    keyframes.pointOfInterest.length +"
        ],
        "after": [
          "",
          "  return {",
          "    success: true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1073:28",
      "file": "services/ai/actionExecutor.ts",
      "line": 1073,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const compDuration = comp?.settings.frameCount || 81;",
      "context": {
        "before": [
          "  }",
          "",
          "  const comp = store.getActiveComp();"
        ],
        "after": [
          "",
          "  // Build shake config",
          "  const shakeConfig: Partial<CameraShakeConfig> = {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1486:26",
      "file": "services/ai/actionExecutor.ts",
      "line": 1486,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const frameCount = comp?.settings.frameCount || 81;",
      "context": {
        "before": [
          "  const { frame } = args;",
          "",
          "  const comp = store.getActiveComp();"
        ],
        "after": [
          "  const clampedFrame = Math.max(0, Math.min(frame, frameCount - 1));",
          "",
          "  const animStore = animationStore || useAnimationStore();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1554:30",
      "file": "services/ai/actionExecutor.ts",
      "line": 1554,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const sourceUrl = imageData?.assetId;",
      "context": {
        "before": [
          "    throw new Error(`Source layer is not an image layer`);",
          "  }",
          "  const imageData = sourceLayer.data as ImageLayerData;"
        ],
        "after": [
          "  if (!sourceUrl) {",
          "    throw new Error(`Source layer has no image source`);",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1650:62",
      "file": "services/ai/actionExecutor.ts",
      "line": 1650,
      "column": 62,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (isLayerOfType(sourceLayer, \"image\") && sourceLayer.data?.assetId) {",
      "context": {
        "before": [
          "  const layerData = sourceLayer.data;",
          "  let imageDataUrl: string;",
          ""
        ],
        "after": [
          "    const asset = store.project?.assets[sourceLayer.data.assetId];",
          "    if (!asset?.data) throw new Error(\"Asset data not found\");",
          "    imageDataUrl = asset.data;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1651:32",
      "file": "services/ai/actionExecutor.ts",
      "line": 1651,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const asset = store.project?.assets[sourceLayer.data.assetId];",
      "context": {
        "before": [
          "  let imageDataUrl: string;",
          "",
          "  if (isLayerOfType(sourceLayer, \"image\") && sourceLayer.data?.assetId) {"
        ],
        "after": [
          "    if (!asset?.data) throw new Error(\"Asset data not found\");",
          "    imageDataUrl = asset.data;",
          "  } else if (layerData && \"assetId\" in layerData && layerData.assetId) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1652:15",
      "file": "services/ai/actionExecutor.ts",
      "line": 1652,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!asset?.data) throw new Error(\"Asset data not found\");",
      "context": {
        "before": [
          "",
          "  if (isLayerOfType(sourceLayer, \"image\") && sourceLayer.data?.assetId) {",
          "    const asset = store.project?.assets[sourceLayer.data.assetId];"
        ],
        "after": [
          "    imageDataUrl = asset.data;",
          "  } else if (layerData && \"assetId\" in layerData && layerData.assetId) {",
          "    const asset = store.project?.assets[layerData.assetId as string];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1655:32",
      "file": "services/ai/actionExecutor.ts",
      "line": 1655,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const asset = store.project?.assets[layerData.assetId as string];",
      "context": {
        "before": [
          "    if (!asset?.data) throw new Error(\"Asset data not found\");",
          "    imageDataUrl = asset.data;",
          "  } else if (layerData && \"assetId\" in layerData && layerData.assetId) {"
        ],
        "after": [
          "    if (!asset?.data) throw new Error(\"Asset data not found\");",
          "    imageDataUrl = asset.data;",
          "  } else {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1656:15",
      "file": "services/ai/actionExecutor.ts",
      "line": 1656,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!asset?.data) throw new Error(\"Asset data not found\");",
      "context": {
        "before": [
          "    imageDataUrl = asset.data;",
          "  } else if (layerData && \"assetId\" in layerData && layerData.assetId) {",
          "    const asset = store.project?.assets[layerData.assetId as string];"
        ],
        "after": [
          "    imageDataUrl = asset.data;",
          "  } else {",
          "    throw new Error(\"Source layer has no image source\");"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1821:29",
      "file": "services/ai/actionExecutor.ts",
      "line": 1821,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "effects: layer.effects?.map((e) => ({",
      "context": {
        "before": [
          "        anchorPoint: layer.transform.origin || layer.transform.anchorPoint,",
          "      },",
          "      opacity: layer.opacity,"
        ],
        "after": [
          "        id: e.id,",
          "        effectKey: e.effectKey,",
          "        name: e.name,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/actionExecutor.ts:1902:65",
      "file": "services/ai/actionExecutor.ts",
      "line": 1902,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function setNestedProperty(obj: any, path: string[], value: any): void {",
      "context": {
        "before": [
          "/**",
          " * Set a nested property value using dot notation path",
          " */"
        ],
        "after": [
          "  let current = obj;",
          "  for (let i = 0; i < path.length - 1; i++) {",
          "    if (!(path[i] in current)) {"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:183:65",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 183,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfirmationCallback(callback: ConfirmationCallback | null): void {",
      "context": {
        "before": [
          "   * SECURITY: If no callback is set and requireConfirmationForBackendTools is true,",
          "   * high-risk tools will be blocked.",
          "   */"
        ],
        "after": [
          "    this.confirmationCallback = callback;",
          "    console.log(",
          "      \"[SECURITY] Confirmation callback\","
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:262:11",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 262,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cancel(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Cancel the current operation",
          "   */"
        ],
        "after": [
          "    if (this.abortController) {",
          "      this.abortController.abort();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:271:17",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 271,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearHistory(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear conversation history",
          "   */"
        ],
        "after": [
          "    this.state.messages = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:293:41",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 293,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private addMessage(message: AIMessage): void {",
      "context": {
        "before": [
          "  // PRIVATE METHODS",
          "  // ==========================================================================",
          ""
        ],
        "after": [
          "    this.state.messages.push(message);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:343:31",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 343,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.abortController?.signal.aborted) {",
      "context": {
        "before": [
          "    ];",
          "",
          "    while (this.state.iterationCount < this.config.maxIterations) {"
        ],
        "after": [
          "        throw new Error(\"Operation cancelled\");",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:400:35",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 400,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "signal: this.abortController?.signal,",
      "context": {
        "before": [
          "        max_tokens: this.config.maxTokens,",
          "        temperature: this.config.temperature,",
          "      }),"
        ],
        "after": [
          "    });",
          "",
          "    const result = await response.json();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:470:34",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 470,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "`${memCheck.warning?.suggestions.join(\" \") || \"\"}`;",
      "context": {
        "before": [
          "              `[SECURITY] Insufficient GPU memory for ${call.name}. ` +",
          "              `Required: ~${Math.round(highRiskInfo.vramEstimateMB / 1000)}GB, ` +",
          "              `Available: ~${Math.round(memSummary.available / 1000)}GB. ` +"
        ],
        "after": [
          "            console.warn(errorMsg);",
          "            await logToolResult(call.name, false, errorMsg);",
          "            results.push({"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/AICompositorAgent.ts:581:27",
      "file": "services/ai/AICompositorAgent.ts",
      "line": 581,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetBackendCallLimits(): void {",
      "context": {
        "before": [
          "   * SECURITY: Call this when user explicitly wants to continue",
          "   * after rate limit warning, or when starting a new logical session.",
          "   */"
        ],
        "after": [
          "    this.state.backendCallCount = 0;",
          "    this.state.backendCallsThisSession = [];",
          "    console.log(\"[SECURITY] Backend call limits reset\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:233:54",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 233,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "suggestedPreset: MOTION_TO_TRAJECTORY[segments[0]?.motion || \"unknown\"],",
      "context": {
        "before": [
          "  return {",
          "    segments,",
          "    summary: String(data.summary || \"No motion detected\"),"
        ],
        "after": [
          "  };",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:389:34",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 389,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "color: data.point_cloud?.colors?.[i]",
      "context": {
        "before": [
          "      ? data.point_cloud.points.map((p, i) => ({",
          "          id: `pt_${i}`,",
          "          position: { x: p[0], y: p[1], z: p[2] },"
        ],
        "after": [
          "            ? {",
          "                r: Math.round(data.point_cloud.colors[i][0] * 255),",
          "                g: Math.round(data.point_cloud.colors[i][1] * 255),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:389:42",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 389,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "color: data.point_cloud?.colors?.[i]",
      "context": {
        "before": [
          "      ? data.point_cloud.points.map((p, i) => ({",
          "          id: `pt_${i}`,",
          "          position: { x: p[0], y: p[1], z: p[2] },"
        ],
        "after": [
          "            ? {",
          "                r: Math.round(data.point_cloud.colors[i][0] * 255),",
          "                g: Math.round(data.point_cloud.colors[i][1] * 255),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:469:39",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 469,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const cx = intrinsics.principalPoint?.x ?? 960;",
      "context": {
        "before": [
          "  // Build K matrix from intrinsics",
          "  const fx = intrinsics.focalLength;",
          "  const fy = intrinsics.focalLength; // Assume square pixels"
        ],
        "after": [
          "  const cy = intrinsics.principalPoint?.y ?? 540;",
          "",
          "  const K = ["
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/cameraTrackingAI.ts:470:39",
      "file": "services/ai/cameraTrackingAI.ts",
      "line": 470,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const cy = intrinsics.principalPoint?.y ?? 540;",
      "context": {
        "before": [
          "  const fx = intrinsics.focalLength;",
          "  const fy = intrinsics.focalLength; // Assume square pixels",
          "  const cx = intrinsics.principalPoint?.x ?? 960;"
        ],
        "after": [
          "",
          "  const K = [",
          "    [fx, 0, cx],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:268:21",
      "file": "services/ai/depthEstimation.ts",
      "line": 268,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "result.choices?.[0]?.message?.content ||",
      "context": {
        "before": [
          "",
          "    // Extract the text content from the response",
          "    const content ="
        ],
        "after": [
          "      result.content?.[0]?.text ||",
          "      result.response;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:268:26",
      "file": "services/ai/depthEstimation.ts",
      "line": 268,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "result.choices?.[0]?.message?.content ||",
      "context": {
        "before": [
          "",
          "    // Extract the text content from the response",
          "    const content ="
        ],
        "after": [
          "      result.content?.[0]?.text ||",
          "      result.response;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:268:35",
      "file": "services/ai/depthEstimation.ts",
      "line": 268,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "result.choices?.[0]?.message?.content ||",
      "context": {
        "before": [
          "",
          "    // Extract the text content from the response",
          "    const content ="
        ],
        "after": [
          "      result.content?.[0]?.text ||",
          "      result.response;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:269:21",
      "file": "services/ai/depthEstimation.ts",
      "line": 269,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "result.content?.[0]?.text ||",
      "context": {
        "before": [
          "    // Extract the text content from the response",
          "    const content =",
          "      result.choices?.[0]?.message?.content ||"
        ],
        "after": [
          "      result.response;",
          "",
          "    if (!content) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/depthEstimation.ts:269:26",
      "file": "services/ai/depthEstimation.ts",
      "line": 269,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "result.content?.[0]?.text ||",
      "context": {
        "before": [
          "    // Extract the text content from the response",
          "    const content =",
          "      result.choices?.[0]?.message?.content ||"
        ],
        "after": [
          "      result.response;",
          "",
          "    if (!content) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/sapiensIntegration.ts:435:32",
      "file": "services/ai/sapiensIntegration.ts",
      "line": 435,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const width = depthResults[0]?.width ?? 1920;",
      "context": {
        "before": [
          "  point_clouds: Array<{ points: number[][]; colors: number[][] }>;",
          "} {",
          "  // Estimate intrinsics from first frame"
        ],
        "after": [
          "  const height = depthResults[0]?.height ?? 1080;",
          "",
          "  // Approximate focal length (assuming ~50mm on full-frame equivalent)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/sapiensIntegration.ts:436:33",
      "file": "services/ai/sapiensIntegration.ts",
      "line": 436,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const height = depthResults[0]?.height ?? 1080;",
      "context": {
        "before": [
          "} {",
          "  // Estimate intrinsics from first frame",
          "  const width = depthResults[0]?.width ?? 1920;"
        ],
        "after": [
          "",
          "  // Approximate focal length (assuming ~50mm on full-frame equivalent)",
          "  const fx = width * 0.8;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:231:27",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 231,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public startNewSession(): void {",
      "context": {
        "before": [
          "  /**\r",
          "   * Start a fresh session (call between agent conversations)\r",
          "   */\r"
        ],
        "after": [
          "    // Log end of previous session\r",
          "    if (this.session.operationCount > 0) {\r",
          "      logAuditEntry({\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:380:60",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 380,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public revokeElevation(reason: string = \"user-initiated\"): void {",
      "context": {
        "before": [
          "  /**\r",
          "   * Revoke current scope grant (return to readonly)\r",
          "   */\r"
        ],
        "after": [
          "    if (this.session.activeGrant) {\r",
          "      logAuditEntry({\r",
          "        category: \"security_warning\",\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:546:29",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 546,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private checkGrantExpiry(): void {",
      "context": {
        "before": [
          "  /**\r",
          "   * Check if active grant has expired\r",
          "   */\r"
        ],
        "after": [
          "    if (!this.session.activeGrant) return;\r",
          "\r",
          "    if (Date.now() > this.session.activeGrant.expiresAt) {\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:668:36",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 668,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private cleanupExpiredApprovals(): void {",
      "context": {
        "before": [
          "    return [...this.session.pendingApprovals];\r",
          "  }\r",
          "\r"
        ],
        "after": [
          "    const now = Date.now();\r",
          "    this.session.pendingApprovals = this.session.pendingApprovals.filter(\r",
          "      (a) => a.expiresAt > now,\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:686:4",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 686,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    type: string,\r",
          "    severity: number,\r",
          "    details?: string,\r"
        ],
        "after": [
          "    this.session.suspicionScore += severity;\r",
          "\r",
          "    logSecurityWarning(`Suspicious activity: ${type}`, {\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:705:41",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 705,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public lockdownSession(reason: string): void {",
      "context": {
        "before": [
          "  /**\r",
          "   * Lock down the current session (revoke all permissions)\r",
          "   */\r"
        ],
        "after": [
          "    this.session.lockedDown = true;\r",
          "    this.session.lockReason = reason;\r",
          "    this.session.activeGrant = null;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:722:39",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 722,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public autoDowngrade(reason: string): void {",
      "context": {
        "before": [
          "  /**\r",
          "   * Automatically downgrade to readonly (less severe than lockdown)\r",
          "   */\r"
        ],
        "after": [
          "    if (this.session.currentScope !== \"readonly\") {\r",
          "      logAuditEntry({\r",
          "        category: \"security_warning\",\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:744:44",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 744,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public activateKillSwitch(reason: string): void {",
      "context": {
        "before": [
          "   * KILL SWITCH: Immediately suspend all agent operations\r",
          "   * Use when active attack is detected\r",
          "   */\r"
        ],
        "after": [
          "    this.killSwitchActive = true;\r",
          "    this.lockdownSession(\"KILL SWITCH: \" + reason);\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:759:32",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 759,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "public deactivateKillSwitch(): void {",
      "context": {
        "before": [
          "  /**\r",
          "   * Deactivate kill switch (requires explicit action)\r",
          "   */\r"
        ],
        "after": [
          "    this.killSwitchActive = false;\r",
          "\r",
          "    logAuditEntry({\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:905:51",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 905,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function activateKillSwitch(reason: string): void {",
      "context": {
        "before": [
          "  return hardenedScopeManager.getSessionInfo().lockedDown;\r",
          "}\r",
          "\r"
        ],
        "after": [
          "  hardenedScopeManager.activateKillSwitch(reason);\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/hardenedScopeManager.ts:909:57",
      "file": "services/ai/security/hardenedScopeManager.ts",
      "line": 909,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function reportInjectionDetected(details: string): void {",
      "context": {
        "before": [
          "  hardenedScopeManager.activateKillSwitch(reason);\r",
          "}\r",
          "\r"
        ],
        "after": [
          "  hardenedScopeManager.recordSuspiciousActivity(\"injection_detected\", 5, details);\r",
          "}\r",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:625:26",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 625,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "location: context?.fieldName || context?.source || \"unknown\",",
      "context": {
        "before": [
          "        detected: true,\r",
          "        confidence,\r",
          "        type,\r"
        ],
        "after": [
          "        details: description,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:625:48",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 625,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "location: context?.fieldName || context?.source || \"unknown\",",
      "context": {
        "before": [
          "        detected: true,\r",
          "        confidence,\r",
          "        type,\r"
        ],
        "after": [
          "        details: description,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:656:24",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 656,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "location: context?.fieldName || \"unknown\",",
      "context": {
        "before": [
          "      detected: true,\r",
          "      confidence: \"medium\",\r",
          "      type: \"context-poisoning\",\r"
        ],
        "after": [
          "      details: `Suspiciously long input (${input.length} chars) - potential context poisoning`,\r",
          "    };\r",
          "    logInjectionDetection(input, result, context);\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:882:2",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 882,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  input: string,\r",
          "  result: InjectionDetectionResult,\r",
          "  context?: { fieldName?: string; layerName?: string; source?: string },\r"
        ],
        "after": [
          "  console.warn(\r",
          "    `[Security] Prompt injection detected:`,\r",
          "    {\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:904:25",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 904,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fieldName: context?.fieldName,",
      "context": {
        "before": [
          "      type: result.type,\r",
          "      confidence: result.confidence,\r",
          "      location: result.location,\r"
        ],
        "after": [
          "      source: context?.source,\r",
          "      blocked: true,\r",
          "    },\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:905:22",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 905,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "source: context?.source,",
      "context": {
        "before": [
          "      confidence: result.confidence,\r",
          "      location: result.location,\r",
          "      fieldName: context?.fieldName,\r"
        ],
        "after": [
          "      blocked: true,\r",
          "    },\r",
          "  });\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/promptInjectionDetector.ts:1314:65",
      "file": "services/ai/security/promptInjectionDetector.ts",
      "line": 1314,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function checkDepth(obj: unknown, depth: number, path: string): void {",
      "context": {
        "before": [
          "  }\r",
          "\r",
          "  // Anomaly 4: Deeply nested data (may bypass scanning limits)\r"
        ],
        "after": [
          "    if (depth > 30) {\r",
          "      anomalies.push({\r",
          "        detected: true,\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/scopeManager.ts:329:30",
      "file": "services/ai/security/scopeManager.ts",
      "line": 329,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setScope(scope: AgentScope): void {",
      "context": {
        "before": [
          "   * Change the current scope\r",
          "   * @param scope - New scope to apply\r",
          "   */\r"
        ],
        "after": [
          "    const oldScope = this.currentScope.name;\r",
          "    this.currentScope = scope;\r",
          "    console.log(`[ScopeManager] Scope changed: ${oldScope} -> ${scope.name}`);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/scopeManager.ts:347:57",
      "file": "services/ai/security/scopeManager.ts",
      "line": 347,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setScopePreset(presetName: keyof typeof SCOPE_PRESETS): void {",
      "context": {
        "before": [
          "   * Set scope by preset name\r",
          "   * @param presetName - Name of the preset (\"readonly\", \"limited\", \"standard\", \"full\")\r",
          "   */\r"
        ],
        "after": [
          "    const preset = SCOPE_PRESETS[presetName];\r",
          "    if (!preset) {\r",
          "      console.error(`[ScopeManager] Unknown scope preset: ${presetName}`);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/security/scopeManager.ts:500:15",
      "file": "services/ai/security/scopeManager.ts",
      "line": 500,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (args?.path && typeof args.path === \"string\") {",
      "context": {
        "before": [
          "      }\r",
          "\r",
          "      // Check path if provided\r"
        ],
        "after": [
          "        if (!this.isPathAllowed(args.path)) {\r",
          "          return {\r",
          "            allowed: false,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/scopeManager.ts:511:13",
      "file": "services/ai/security/scopeManager.ts",
      "line": 511,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (args?.keyframes && Array.isArray(args.keyframes)) {",
      "context": {
        "before": [
          "    }\r",
          "\r",
          "    // Keyframe count check\r"
        ],
        "after": [
          "      if (args.keyframes.length > scope.maxKeyframesPerOperation) {\r",
          "        return {\r",
          "          allowed: false,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/security/scopeManager.ts:604:32",
      "file": "services/ai/security/scopeManager.ts",
      "line": 604,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cleanupExpiredConfirmations(): void {",
      "context": {
        "before": [
          "  /**\r",
          "   * Clear expired confirmations\r",
          "   */\r"
        ],
        "after": [
          "    const now = Date.now();\r",
          "    const expiry = 5 * 60 * 1000; // 5 minutes\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:549:39",
      "file": "services/ai/stateSerializer.ts",
      "line": 549,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pointCount: data.controlPoints?.length || 0,",
      "context": {
        "before": [
          "",
          "    case \"spline\":",
          "      return {"
        ],
        "after": [
          "        closed: data.closed,",
          "        stroke: data.stroke,",
          "        strokeWidth: data.strokeWidth,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:557:36",
      "file": "services/ai/stateSerializer.ts",
      "line": 557,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "emitterCount: data.emitters?.length || 0,",
      "context": {
        "before": [
          "",
          "    case \"particles\":",
          "      return {"
        ],
        "after": [
          "        maxParticles: data.systemConfig?.maxParticles,",
          "        gravity: data.systemConfig?.gravity,",
          "        firstEmitter: data.emitters?.[0]"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:558:40",
      "file": "services/ai/stateSerializer.ts",
      "line": 558,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "maxParticles: data.systemConfig?.maxParticles,",
      "context": {
        "before": [
          "    case \"particles\":",
          "      return {",
          "        emitterCount: data.emitters?.length || 0,"
        ],
        "after": [
          "        gravity: data.systemConfig?.gravity,",
          "        firstEmitter: data.emitters?.[0]",
          "          ? {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:559:35",
      "file": "services/ai/stateSerializer.ts",
      "line": 559,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "gravity: data.systemConfig?.gravity,",
      "context": {
        "before": [
          "      return {",
          "        emitterCount: data.emitters?.length || 0,",
          "        maxParticles: data.systemConfig?.maxParticles,"
        ],
        "after": [
          "        firstEmitter: data.emitters?.[0]",
          "          ? {",
          "              x: data.emitters[0].x,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:560:36",
      "file": "services/ai/stateSerializer.ts",
      "line": 560,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "firstEmitter: data.emitters?.[0]",
      "context": {
        "before": [
          "        emitterCount: data.emitters?.length || 0,",
          "        maxParticles: data.systemConfig?.maxParticles,",
          "        gravity: data.systemConfig?.gravity,"
        ],
        "after": [
          "          ? {",
          "              x: data.emitters[0].x,",
          "              y: data.emitters[0].y,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:595:32",
      "file": "services/ai/stateSerializer.ts",
      "line": 595,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "shapeCount: data.shapes?.length || 0,",
      "context": {
        "before": [
          "",
          "    case \"shape\":",
          "      return {"
        ],
        "after": [
          "        fill: data.fill,",
          "        stroke: data.stroke,",
          "        strokeWidth: data.strokeWidth,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:611:28",
      "file": "services/ai/stateSerializer.ts",
      "line": 611,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "preset: data.config?.preset,",
      "context": {
        "before": [
          "      return {",
          "        sourceLayerId: data.sourceLayerId,",
          "        depthLayerId: data.depthLayerId,"
        ],
        "after": [
          "      };",
          "",
          "    case \"light\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:726:46",
      "file": "services/ai/stateSerializer.ts",
      "line": 726,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const beforeEffects = beforeLayer.effects?.length || 0;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Check effects"
        ],
        "after": [
          "    const afterLayerEffects = afterLayer.effects?.length || 0;",
          "    if (beforeEffects !== afterLayerEffects) {",
          "      changes.push("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:727:49",
      "file": "services/ai/stateSerializer.ts",
      "line": 727,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const afterLayerEffects = afterLayer.effects?.length || 0;",
      "context": {
        "before": [
          "",
          "    // Check effects",
          "    const beforeEffects = beforeLayer.effects?.length || 0;"
        ],
        "after": [
          "    if (beforeEffects !== afterLayerEffects) {",
          "      changes.push(",
          "        `Layer \"${afterLayer.name}\": effects ${beforeEffects}  ${afterLayerEffects}`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/ai/stateSerializer.ts:778:36",
      "file": "services/ai/stateSerializer.ts",
      "line": 778,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const effects = layer.effects?.length",
      "context": {
        "before": [
          "        animatedProps.length > 0",
          "          ? ` [animated: ${animatedProps.join(\", \")}]`",
          "          : \"\";"
        ],
        "after": [
          "        ? ` [${layer.effects.length} effect(s)]`",
          "        : \"\";",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/aiGeneration.ts:633:26",
      "file": "services/aiGeneration.ts",
      "line": 633,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBaseUrl(url: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the base URL for AI backend",
          "   */"
        ],
        "after": [
          "    this.baseUrl = url;",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/animation/PropertyEvaluator.ts:34:17",
      "file": "services/animation/PropertyEvaluator.ts",
      "line": 34,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(fps) || fps <= 0) {",
      "context": {
        "before": [
          "   */",
          "  constructor(fps: number) {",
          "    // Validate fps to prevent division by zero or invalid calculations"
        ],
        "after": [
          "      console.warn(",
          "        `PropertyEvaluator: Invalid fps ${fps}, defaulting to 30`",
          "      );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/animation/PropertyEvaluator.ts:53:17",
      "file": "services/animation/PropertyEvaluator.ts",
      "line": 53,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frame)) {",
      "context": {
        "before": [
          "   */",
          "  evaluate<T>(property: AnimatableProperty<T>, frame: number): T {",
          "    // Handle invalid frame input"
        ],
        "after": [
          "      console.warn(",
          "        `PropertyEvaluator.evaluate: Invalid frame ${frame}, using 0`",
          "      );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/audio/enhancedBeatDetection.ts:318:37",
      "file": "services/audio/enhancedBeatDetection.ts",
      "line": 318,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const flux = analysis.spectralFlux?.[clampedFrame] || 0;",
      "context": {
        "before": [
          "  // Combine multiple features for strength estimation",
          "  const amplitude = analysis.amplitudeEnvelope[clampedFrame] || 0;",
          "  const bass = analysis.frequencyBands.bass[clampedFrame] || 0;"
        ],
        "after": [
          "",
          "  // Weight: bass and spectral flux are most important for beats",
          "  return amplitude * 0.3 + bass * 0.4 + flux * 0.3;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audio/stemSeparation.ts:400:63",
      "file": "services/audio/stemSeparation.ts",
      "line": 400,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function downloadStem(base64: string, filename: string): void {",
      "context": {
        "before": [
          "/**",
          " * Create a download link for a stem",
          " */"
        ],
        "after": [
          "  const blob = base64ToBlob(base64, \"audio/wav\");",
          "  const url = URL.createObjectURL(blob);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:175:11",
      "file": "services/audioFeatures.ts",
      "line": 175,
      "column": 11,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "config?.analysisMode &&",
      "context": {
        "before": [
          "  // Determine which buffer to analyze based on mode",
          "  let analyzeBuffer = buffer;",
          "  if ("
        ],
        "after": [
          "    config.analysisMode !== \"full\" &&",
          "    config.stemData",
          "  ) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:327:25",
      "file": "services/audioFeatures.ts",
      "line": 327,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fftSize = config?.fftSize ?? DEFAULT_FFT_SIZE;",
      "context": {
        "before": [
          "  const sampleRate = buffer.sampleRate;",
          "",
          "  // Use configured FFT size for spectral analysis resolution"
        ],
        "after": [
          "",
          "  // Create offline context for analysis",
          "  const offlineCtx = new OfflineAudioContext(1, buffer.length, sampleRate);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:355:25",
      "file": "services/audioFeatures.ts",
      "line": 355,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const minFreq = config?.minFrequency ?? 20;",
      "context": {
        "before": [
          "  const binFrequency = sampleRate / fftSize;",
          "",
          "  // Apply frequency range filtering for band-limited analysis"
        ],
        "after": [
          "  const maxFreq = config?.maxFrequency ?? 20000;",
          "  const minBin = Math.floor(minFreq / binFrequency);",
          "  const maxBin = Math.ceil(maxFreq / binFrequency);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:356:25",
      "file": "services/audioFeatures.ts",
      "line": 356,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const maxFreq = config?.maxFrequency ?? 20000;",
      "context": {
        "before": [
          "",
          "  // Apply frequency range filtering for band-limited analysis",
          "  const minFreq = config?.minFrequency ?? 20;"
        ],
        "after": [
          "  const minBin = Math.floor(minFreq / binFrequency);",
          "  const maxBin = Math.ceil(maxFreq / binFrequency);",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1036:35",
      "file": "services/audioFeatures.ts",
      "line": 1036,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.spectralFlux?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    // Enhanced features",
          "    case \"spectralFlux\":"
        ],
        "after": [
          "",
          "    case \"zeroCrossingRate\":",
          "    case \"zcr\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1040:39",
      "file": "services/audioFeatures.ts",
      "line": 1040,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.zeroCrossingRate?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"zeroCrossingRate\":",
          "    case \"zcr\":"
        ],
        "after": [
          "",
          "    case \"spectralRolloff\":",
          "    case \"rolloff\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1044:38",
      "file": "services/audioFeatures.ts",
      "line": 1044,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.spectralRolloff?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"spectralRolloff\":",
          "    case \"rolloff\":"
        ],
        "after": [
          "",
          "    case \"spectralFlatness\":",
          "    case \"flatness\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1048:39",
      "file": "services/audioFeatures.ts",
      "line": 1048,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.spectralFlatness?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"spectralFlatness\":",
          "    case \"flatness\":"
        ],
        "after": [
          "",
          "    case \"chromaEnergy\":",
          "      return analysis.chromaFeatures?.chromaEnergy[clampedFrame] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1051:37",
      "file": "services/audioFeatures.ts",
      "line": 1051,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chromaEnergy[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "      return analysis.spectralFlatness?.[clampedFrame] ?? 0;",
          "",
          "    case \"chromaEnergy\":"
        ],
        "after": [
          "",
          "    // Individual chroma pitch classes (C, C#, D, etc.)",
          "    case \"chromaC\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1055:37",
      "file": "services/audioFeatures.ts",
      "line": 1055,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[0] ?? 0;",
      "context": {
        "before": [
          "",
          "    // Individual chroma pitch classes (C, C#, D, etc.)",
          "    case \"chromaC\":"
        ],
        "after": [
          "    case \"chromaCs\":",
          "    case \"chromaDb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1055:59",
      "file": "services/audioFeatures.ts",
      "line": 1055,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[0] ?? 0;",
      "context": {
        "before": [
          "",
          "    // Individual chroma pitch classes (C, C#, D, etc.)",
          "    case \"chromaC\":"
        ],
        "after": [
          "    case \"chromaCs\":",
          "    case \"chromaDb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1058:37",
      "file": "services/audioFeatures.ts",
      "line": 1058,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[0] ?? 0;",
          "    case \"chromaCs\":",
          "    case \"chromaDb\":"
        ],
        "after": [
          "    case \"chromaD\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
          "    case \"chromaDs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1058:59",
      "file": "services/audioFeatures.ts",
      "line": 1058,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[0] ?? 0;",
          "    case \"chromaCs\":",
          "    case \"chromaDb\":"
        ],
        "after": [
          "    case \"chromaD\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
          "    case \"chromaDs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1060:37",
      "file": "services/audioFeatures.ts",
      "line": 1060,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaDb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;",
          "    case \"chromaD\":"
        ],
        "after": [
          "    case \"chromaDs\":",
          "    case \"chromaEb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1060:59",
      "file": "services/audioFeatures.ts",
      "line": 1060,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaDb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[1] ?? 0;",
          "    case \"chromaD\":"
        ],
        "after": [
          "    case \"chromaDs\":",
          "    case \"chromaEb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1063:37",
      "file": "services/audioFeatures.ts",
      "line": 1063,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
          "    case \"chromaDs\":",
          "    case \"chromaEb\":"
        ],
        "after": [
          "    case \"chromaE\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
          "    case \"chromaF\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1063:59",
      "file": "services/audioFeatures.ts",
      "line": 1063,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[2] ?? 0;",
          "    case \"chromaDs\":",
          "    case \"chromaEb\":"
        ],
        "after": [
          "    case \"chromaE\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
          "    case \"chromaF\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1065:37",
      "file": "services/audioFeatures.ts",
      "line": 1065,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaEb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;",
          "    case \"chromaE\":"
        ],
        "after": [
          "    case \"chromaF\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
          "    case \"chromaFs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1065:59",
      "file": "services/audioFeatures.ts",
      "line": 1065,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaEb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[3] ?? 0;",
          "    case \"chromaE\":"
        ],
        "after": [
          "    case \"chromaF\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
          "    case \"chromaFs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1067:37",
      "file": "services/audioFeatures.ts",
      "line": 1067,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaE\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
          "    case \"chromaF\":"
        ],
        "after": [
          "    case \"chromaFs\":",
          "    case \"chromaGb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1067:59",
      "file": "services/audioFeatures.ts",
      "line": 1067,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaE\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[4] ?? 0;",
          "    case \"chromaF\":"
        ],
        "after": [
          "    case \"chromaFs\":",
          "    case \"chromaGb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1070:37",
      "file": "services/audioFeatures.ts",
      "line": 1070,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
          "    case \"chromaFs\":",
          "    case \"chromaGb\":"
        ],
        "after": [
          "    case \"chromaG\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
          "    case \"chromaGs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1070:59",
      "file": "services/audioFeatures.ts",
      "line": 1070,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[5] ?? 0;",
          "    case \"chromaFs\":",
          "    case \"chromaGb\":"
        ],
        "after": [
          "    case \"chromaG\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
          "    case \"chromaGs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1072:37",
      "file": "services/audioFeatures.ts",
      "line": 1072,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaGb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;",
          "    case \"chromaG\":"
        ],
        "after": [
          "    case \"chromaGs\":",
          "    case \"chromaAb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1072:59",
      "file": "services/audioFeatures.ts",
      "line": 1072,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaGb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[6] ?? 0;",
          "    case \"chromaG\":"
        ],
        "after": [
          "    case \"chromaGs\":",
          "    case \"chromaAb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1075:37",
      "file": "services/audioFeatures.ts",
      "line": 1075,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
          "    case \"chromaGs\":",
          "    case \"chromaAb\":"
        ],
        "after": [
          "    case \"chromaA\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
          "    case \"chromaAs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1075:59",
      "file": "services/audioFeatures.ts",
      "line": 1075,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[7] ?? 0;",
          "    case \"chromaGs\":",
          "    case \"chromaAb\":"
        ],
        "after": [
          "    case \"chromaA\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
          "    case \"chromaAs\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1077:37",
      "file": "services/audioFeatures.ts",
      "line": 1077,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaAb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;",
          "    case \"chromaA\":"
        ],
        "after": [
          "    case \"chromaAs\":",
          "    case \"chromaBb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1077:59",
      "file": "services/audioFeatures.ts",
      "line": 1077,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaAb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[8] ?? 0;",
          "    case \"chromaA\":"
        ],
        "after": [
          "    case \"chromaAs\":",
          "    case \"chromaBb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1080:37",
      "file": "services/audioFeatures.ts",
      "line": 1080,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
          "    case \"chromaAs\":",
          "    case \"chromaBb\":"
        ],
        "after": [
          "    case \"chromaB\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[11] ?? 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1080:59",
      "file": "services/audioFeatures.ts",
      "line": 1080,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;",
      "context": {
        "before": [
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[9] ?? 0;",
          "    case \"chromaAs\":",
          "    case \"chromaBb\":"
        ],
        "after": [
          "    case \"chromaB\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[11] ?? 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1082:37",
      "file": "services/audioFeatures.ts",
      "line": 1082,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[11] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaBb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;",
          "    case \"chromaB\":"
        ],
        "after": [
          "",
          "    // Harmonic-Percussive Source Separation (HPSS) features",
          "    case \"harmonicEnergy\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1082:59",
      "file": "services/audioFeatures.ts",
      "line": 1082,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.chromaFeatures?.chroma[clampedFrame]?.[11] ?? 0;",
      "context": {
        "before": [
          "    case \"chromaBb\":",
          "      return analysis.chromaFeatures?.chroma[clampedFrame]?.[10] ?? 0;",
          "    case \"chromaB\":"
        ],
        "after": [
          "",
          "    // Harmonic-Percussive Source Separation (HPSS) features",
          "    case \"harmonicEnergy\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1087:37",
      "file": "services/audioFeatures.ts",
      "line": 1087,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.harmonicEnergy?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "    // Harmonic-Percussive Source Separation (HPSS) features",
          "    case \"harmonicEnergy\":",
          "    case \"harmonic\":"
        ],
        "after": [
          "",
          "    case \"percussiveEnergy\":",
          "    case \"percussive\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1091:39",
      "file": "services/audioFeatures.ts",
      "line": 1091,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.percussiveEnergy?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"percussiveEnergy\":",
          "    case \"percussive\":"
        ],
        "after": [
          "",
          "    case \"hpRatio\":",
          "    case \"harmonicPercussiveRatio\":"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1095:30",
      "file": "services/audioFeatures.ts",
      "line": 1095,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return analysis.hpRatio?.[clampedFrame] ?? 0;",
      "context": {
        "before": [
          "",
          "    case \"hpRatio\":",
          "    case \"harmonicPercussiveRatio\":"
        ],
        "after": [
          "",
          "    // MFCC coefficients with per-coefficient normalization",
          "    // MFCC0 (log energy) has different range than MFCC1-12 (spectral shape)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1140:30",
      "file": "services/audioFeatures.ts",
      "line": 1140,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const value = analysis.mfcc?.[frame]?.[coeff];",
      "context": {
        "before": [
          "  frame: number,",
          "  coeff: number,",
          "): number {"
        ],
        "after": [
          "  if (value === undefined) return 0;",
          "",
          "  const stats = analysis.mfccStats;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1140:39",
      "file": "services/audioFeatures.ts",
      "line": 1140,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const value = analysis.mfcc?.[frame]?.[coeff];",
      "context": {
        "before": [
          "  frame: number,",
          "  coeff: number,",
          "): number {"
        ],
        "after": [
          "  if (value === undefined) return 0;",
          "",
          "  const stats = analysis.mfccStats;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1387:16",
      "file": "services/audioFeatures.ts",
      "line": 1387,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!analysis?.onsets) {",
      "context": {
        "before": [
          " */",
          "export function isBeatAtFrame(analysis: AudioAnalysis | null | undefined, frame: number): boolean {",
          "  // Return false for missing analysis or onset data"
        ],
        "after": [
          "    return false;",
          "  }",
          "  return analysis.onsets.includes(frame);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1623:17",
      "file": "services/audioFeatures.ts",
      "line": 1623,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(stats.min[c]) || !Number.isFinite(stats.max[c])) {",
      "context": {
        "before": [
          "  // Handle edge cases for normalization",
          "  for (let c = 0; c < numCoeffs; c++) {",
          "    // Edge case: 0 frames - stats remain Infinity/-Infinity"
        ],
        "after": [
          "      stats.min[c] = 0;",
          "      stats.max[c] = 1;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/audioFeatures.ts:1623:51",
      "file": "services/audioFeatures.ts",
      "line": 1623,
      "column": 51,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(stats.min[c]) || !Number.isFinite(stats.max[c])) {",
      "context": {
        "before": [
          "  // Handle edge cases for normalization",
          "  for (let c = 0; c < numCoeffs; c++) {",
          "    // Edge case: 0 frames - stats remain Infinity/-Infinity"
        ],
        "after": [
          "      stats.min[c] = 0;",
          "      stats.max[c] = 1;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:108:28",
      "file": "services/audioPathAnimator.ts",
      "line": 108,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPath(pathData: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the SVG path data to animate along",
          "   */"
        ],
        "after": [
          "    this.pathSegments = this.parsePath(pathData);",
          "    this.calculateSegmentLengths();",
          "    // Clear accumulate cache when path changes"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:132:32",
      "file": "services/audioPathAnimator.ts",
      "line": 132,
      "column": 32,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": ".filter((n) => !Number.isNaN(n));",
      "context": {
        "before": [
          "        .trim()",
          "        .split(/[\\s,]+/)",
          "        .map(Number)"
        ],
        "after": [
          "",
          "      switch (type) {",
          "        case \"M\":"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:220:36",
      "file": "services/audioPathAnimator.ts",
      "line": 220,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private calculateSegmentLengths(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Calculate lengths for each segment",
          "   */"
        ],
        "after": [
          "    let totalLength = 0;",
          "",
          "    for (const segment of this.pathSegments) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:340:50",
      "file": "services/audioPathAnimator.ts",
      "line": 340,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateAmplitudeMode(audioValue: number): void {",
      "context": {
        "before": [
          "    return { ...this.state };",
          "  }",
          ""
        ],
        "after": [
          "    // Apply amplitude curve (power function for noise gate effect)",
          "    const processedValue = audioValue ** this.config.amplitudeCurve;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:364:68",
      "file": "services/audioPathAnimator.ts",
      "line": 364,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateAccumulateMode(audioValue: number, isBeat: boolean): void {",
      "context": {
        "before": [
          "    );",
          "  }",
          ""
        ],
        "after": [
          "    // Check for beat-triggered direction flip",
          "    if (",
          "      this.config.flipOnBeat &&"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:507:10",
      "file": "services/audioPathAnimator.ts",
      "line": 507,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset animator state",
          "   */"
        ],
        "after": [
          "    this.state = {",
          "      position: 0,",
          "      direction: 1,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioPathAnimator.ts:532:50",
      "file": "services/audioPathAnimator.ts",
      "line": 532,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfig(updates: Partial<PathAnimatorConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update config",
          "   */"
        ],
        "after": [
          "    Object.assign(this.config, updates);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:164:34",
      "file": "services/audioReactiveMapping.ts",
      "line": 164,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPeakData(peakData: PeakData): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set peak data for peak-based features",
          "   */"
        ],
        "after": [
          "    this.peakData = peakData;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:173:36",
      "file": "services/audioReactiveMapping.ts",
      "line": 173,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addMapping(mapping: AudioMapping): void {",
      "context": {
        "before": [
          "   * Only initializes temporal state for NEW mappings.",
          "   * Existing mappings preserve their temporal state (smoothing, release, toggles).",
          "   */"
        ],
        "after": [
          "    const isNew = !this.mappings.has(mapping.id);",
          "    this.mappings.set(mapping.id, mapping);",
          "    // Only initialize temporal state for new mappings"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:187:28",
      "file": "services/audioReactiveMapping.ts",
      "line": 187,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeMapping(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a mapping",
          "   */"
        ],
        "after": [
          "    this.mappings.delete(id);",
          "    this.smoothedValues.delete(id);",
          "    this.releaseEnvelopes.delete(id);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:199:23",
      "file": "services/audioReactiveMapping.ts",
      "line": 199,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetTemporalState(): void {",
      "context": {
        "before": [
          "   * Call this when seeking non-sequentially to ensure determinism.",
          "   * Temporal state must be reset on frame jumps.",
          "   */"
        ],
        "after": [
          "    // Reset all smoothed values to 0",
          "    for (const id of this.smoothedValues.keys()) {",
          "      this.smoothedValues.set(id, 0);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:217:60",
      "file": "services/audioReactiveMapping.ts",
      "line": 217,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateMapping(id: string, updates: Partial<AudioMapping>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update an existing mapping",
          "   */"
        ],
        "after": [
          "    const mapping = this.mappings.get(id);",
          "    if (mapping) {",
          "      Object.assign(mapping, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:540:19",
      "file": "services/audioReactiveMapping.ts",
      "line": 540,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetSmoothing(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset smoothing state",
          "   */"
        ],
        "after": [
          "    this.smoothedValues.clear();",
          "    this.releaseEnvelopes.clear();",
          "    this.beatToggleStates.clear();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:554:39",
      "file": "services/audioReactiveMapping.ts",
      "line": 554,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAnalysis(analysis: AudioAnalysis): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update analysis data",
          "   */"
        ],
        "after": [
          "    this.analysis = analysis;",
          "    this.resetSmoothing();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:562:10",
      "file": "services/audioReactiveMapping.ts",
      "line": 562,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all mappings",
          "   */"
        ],
        "after": [
          "    this.mappings.clear();",
          "    this.smoothedValues.clear();",
          "    this.releaseEnvelopes.clear();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioReactiveMapping.ts:579:40",
      "file": "services/audioReactiveMapping.ts",
      "line": 579,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deserialize(mappings: AudioMapping[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Load mappings from serialized data",
          "   */"
        ],
        "after": [
          "    this.clear();",
          "    for (const mapping of mappings) {",
          "      this.addMapping(mapping);"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioWorkerClient.ts:128:34",
      "file": "services/audioWorkerClient.ts",
      "line": 128,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function terminateWorker(): void {",
      "context": {
        "before": [
          "/**",
          " * Terminate the worker (call when no longer needed)",
          " */"
        ],
        "after": [
          "  if (worker) {",
          "    worker.terminate();",
          "    worker = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/audioWorkerClient.ts:139:33",
      "file": "services/audioWorkerClient.ts",
      "line": 139,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function cancelAnalysis(): void {",
      "context": {
        "before": [
          "/**",
          " * Cancel the current analysis",
          " */"
        ],
        "after": [
          "  if (worker) {",
          "    worker.postMessage({ type: \"cancel\" });",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/bezierBoolean.ts:60:27",
      "file": "services/bezierBoolean.ts",
      "line": 60,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function initializePaper(): void {",
      "context": {
        "before": [
          "/**",
          " * Initialize Paper.js in headless mode (no canvas)",
          " */"
        ],
        "after": [
          "  if (paperInitialized) return;",
          "",
          "  // Paper.js needs a canvas or can run headless"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/camera3DVisualization.ts:77:14",
      "file": "services/camera3DVisualization.ts",
      "line": 77,
      "column": 14,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (Number.isNaN(right.x)) {",
      "context": {
        "before": [
          "  // Get right and up vectors",
          "  const worldUp = vec3(0, -1, 0); // Y-down in AE coordinate system",
          "  let right = normalizeVec3(crossVec3(forward, worldUp));"
        ],
        "after": [
          "    right = vec3(1, 0, 0);",
          "  }",
          "  const up = normalizeVec3(crossVec3(right, forward));"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/camera3DVisualization.ts:181:14",
      "file": "services/camera3DVisualization.ts",
      "line": 181,
      "column": 14,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (Number.isNaN(right.x)) {",
      "context": {
        "before": [
          "",
          "  const worldUp = vec3(0, -1, 0);",
          "  let right = normalizeVec3(crossVec3(forward, worldUp));"
        ],
        "after": [
          "    right = vec3(1, 0, 0);",
          "  }",
          "  const up = normalizeVec3(crossVec3(right, forward));"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/camera3DVisualization.ts:332:14",
      "file": "services/camera3DVisualization.ts",
      "line": 332,
      "column": 14,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (Number.isNaN(right.x)) {",
      "context": {
        "before": [
          "",
          "  const worldUp = vec3(0, -1, 0);",
          "  let right = normalizeVec3(crossVec3(forward, worldUp));"
        ],
        "after": [
          "    right = vec3(1, 0, 0);",
          "  }",
          "  const up = normalizeVec3(crossVec3(right, forward));"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/cameraEnhancements.ts:393:48",
      "file": "services/cameraEnhancements.ts",
      "line": 393,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfig(config: Partial<CameraShakeConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update configuration",
          "   */"
        ],
        "after": [
          "    this.config = { ...this.config, ...config };",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:307:24",
      "file": "services/cameraTrackingImport.ts",
      "line": 307,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data.reconstruction?.camera_poses?.map((pose) => ({",
      "context": {
        "before": [
          "",
          "  // Convert camera path if reconstruction exists",
          "  const cameraPath: CameraPose[] ="
        ],
        "after": [
          "      frame: pose.frame,",
          "      position: {",
          "        x: pose.location[0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:307:38",
      "file": "services/cameraTrackingImport.ts",
      "line": 307,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data.reconstruction?.camera_poses?.map((pose) => ({",
      "context": {
        "before": [
          "",
          "  // Convert camera path if reconstruction exists",
          "  const cameraPath: CameraPose[] ="
        ],
        "after": [
          "      frame: pose.frame,",
          "      position: {",
          "        x: pose.location[0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:324:24",
      "file": "services/cameraTrackingImport.ts",
      "line": 324,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data.reconstruction?.points?.map((pt, i) => ({",
      "context": {
        "before": [
          "",
          "  // Convert 3D points",
          "  const trackPoints3D: TrackPoint3D[] ="
        ],
        "after": [
          "      id: `pt_${i}`,",
          "      position: { x: pt.co[0], y: pt.co[1], z: pt.co[2] },",
          "      color: pt.color"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:324:32",
      "file": "services/cameraTrackingImport.ts",
      "line": 324,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "data.reconstruction?.points?.map((pt, i) => ({",
      "context": {
        "before": [
          "",
          "  // Convert 3D points",
          "  const trackPoints3D: TrackPoint3D[] ="
        ],
        "after": [
          "      id: `pt_${i}`,",
          "      position: { x: pt.co[0], y: pt.co[1], z: pt.co[2] },",
          "      color: pt.color"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:458:29",
      "file": "services/cameraTrackingImport.ts",
      "line": 458,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transformedPath[0]?.position ?? { x: 0, y: 0, z: 0 },",
      "context": {
        "before": [
          "        // Position uses { x, y, z? } - z is optional but we include it for 3D",
          "        const positionProp = createAnimatableProperty(",
          "          \"position\","
        ],
        "after": [
          "          \"position\",",
          "          \"Transform\",",
          "        );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:468:31",
      "file": "services/cameraTrackingImport.ts",
      "line": 468,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotationKeyframes[0]?.value ?? { x: 0, y: 0, z: 0 },",
      "context": {
        "before": [
          "        // Use orientation for 3D rotation (vector3), rotation is for 2D (number)",
          "        const orientationProp = createAnimatableProperty(",
          "          \"orientation\","
        ],
        "after": [
          "          \"vector3\",",
          "          \"Transform\",",
          "        );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:533:24",
      "file": "services/cameraTrackingImport.ts",
      "line": 533,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "result.warnings?.push(",
      "context": {
        "before": [
          "      }",
          "",
          "      if (solve.trackPoints3D.length > maxNulls) {"
        ],
        "after": [
          "          `Only created ${maxNulls} null objects out of ${solve.trackPoints3D.length} track points`,",
          "        );",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:541:25",
      "file": "services/cameraTrackingImport.ts",
      "line": 541,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "options.pointCloud?.create &&",
      "context": {
        "before": [
          "",
          "    // Create point cloud layer if requested",
          "    if ("
        ],
        "after": [
          "      solve.trackPoints3D &&",
          "      solve.trackPoints3D.length > 0",
          "    ) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:683:39",
      "file": "services/cameraTrackingImport.ts",
      "line": 683,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const positionProp = layer.transform?.position;",
      "context": {
        "before": [
          "  const cameraPath: CameraPose[] = [];",
          "",
          "  // Get position and orientation (3D rotation) properties"
        ],
        "after": [
          "  // Use orientation for 3D rotation, fall back to individual rotationX/Y/Z",
          "  const orientationProp = layer.transform?.orientation;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:685:42",
      "file": "services/cameraTrackingImport.ts",
      "line": 685,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const orientationProp = layer.transform?.orientation;",
      "context": {
        "before": [
          "  // Get position and orientation (3D rotation) properties",
          "  const positionProp = layer.transform?.position;",
          "  // Use orientation for 3D rotation, fall back to individual rotationX/Y/Z"
        ],
        "after": [
          "",
          "  // Generate camera path for each frame with keyframes",
          "  const allFrames = new Set<number>();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:690:19",
      "file": "services/cameraTrackingImport.ts",
      "line": 690,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (positionProp?.keyframes) {",
      "context": {
        "before": [
          "  // Generate camera path for each frame with keyframes",
          "  const allFrames = new Set<number>();",
          ""
        ],
        "after": [
          "    positionProp.keyframes.forEach((kf) => allFrames.add(kf.frame));",
          "  }",
          "  if (orientationProp?.keyframes) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:693:22",
      "file": "services/cameraTrackingImport.ts",
      "line": 693,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (orientationProp?.keyframes) {",
      "context": {
        "before": [
          "  if (positionProp?.keyframes) {",
          "    positionProp.keyframes.forEach((kf) => allFrames.add(kf.frame));",
          "  }"
        ],
        "after": [
          "    orientationProp.keyframes.forEach((kf) => allFrames.add(kf.frame));",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:710:34",
      "file": "services/cameraTrackingImport.ts",
      "line": 710,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const posValue = positionProp?.value ?? { x: 0, y: 0 };",
      "context": {
        "before": [
          "",
          "  // If no keyframes, just export default pose",
          "  if (allFrames.size === 0) {"
        ],
        "after": [
          "    const pos = ensureZ(posValue);",
          "    const rot = orientationProp?.value ?? { x: 0, y: 0, z: 0 };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:712:32",
      "file": "services/cameraTrackingImport.ts",
      "line": 712,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rot = orientationProp?.value ?? { x: 0, y: 0, z: 0 };",
      "context": {
        "before": [
          "  if (allFrames.size === 0) {",
          "    const posValue = positionProp?.value ?? { x: 0, y: 0 };",
          "    const pos = ensureZ(posValue);"
        ],
        "after": [
          "",
          "    cameraPath.push({",
          "      frame: 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:744:25",
      "file": "services/cameraTrackingImport.ts",
      "line": 744,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fov = cameraData?.fov?.value ?? 50;",
      "context": {
        "before": [
          "    fov?: { value?: number };",
          "  };",
          ""
        ],
        "after": [
          "  const focalLength =",
          "    comp.settings.height / (2 * Math.tan((fov * Math.PI) / 180 / 2));",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrackingImport.ts:744:30",
      "file": "services/cameraTrackingImport.ts",
      "line": 744,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fov = cameraData?.fov?.value ?? 50;",
      "context": {
        "before": [
          "    fov?: { value?: number };",
          "  };",
          ""
        ],
        "after": [
          "  const focalLength =",
          "    comp.settings.height / (2 * Math.tan((fov * Math.PI) / 180 / 2));",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/cameraTrajectory.ts:573:2",
      "file": "services/cameraTrajectory.ts",
      "line": 573,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  camera: Camera3D,",
          "  config: TrajectoryConfig,",
          "  t: number, // Normalized time 0-1"
        ],
        "after": [
          "  const { position, target } = getTrajectoryPosition(config, t);",
          "",
          "  camera.position = position;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:689:34",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 689,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "workingColorSpace: settings?.workingColorSpace ?? \"sRGB\",",
      "context": {
        "before": [
          "",
          "  constructor(settings?: Partial<ColorSettings>) {",
          "    this.settings = {"
        ],
        "after": [
          "      viewTransform: settings?.viewTransform ?? \"sRGB\",",
          "      exportColorSpace: settings?.exportColorSpace ?? \"sRGB\",",
          "      linearCompositing: settings?.linearCompositing ?? false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:690:30",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 690,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "viewTransform: settings?.viewTransform ?? \"sRGB\",",
      "context": {
        "before": [
          "  constructor(settings?: Partial<ColorSettings>) {",
          "    this.settings = {",
          "      workingColorSpace: settings?.workingColorSpace ?? \"sRGB\","
        ],
        "after": [
          "      exportColorSpace: settings?.exportColorSpace ?? \"sRGB\",",
          "      linearCompositing: settings?.linearCompositing ?? false,",
          "      displayGamma: settings?.displayGamma ?? 2.2,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:691:33",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 691,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "exportColorSpace: settings?.exportColorSpace ?? \"sRGB\",",
      "context": {
        "before": [
          "    this.settings = {",
          "      workingColorSpace: settings?.workingColorSpace ?? \"sRGB\",",
          "      viewTransform: settings?.viewTransform ?? \"sRGB\","
        ],
        "after": [
          "      linearCompositing: settings?.linearCompositing ?? false,",
          "      displayGamma: settings?.displayGamma ?? 2.2,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:692:34",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 692,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "linearCompositing: settings?.linearCompositing ?? false,",
      "context": {
        "before": [
          "      workingColorSpace: settings?.workingColorSpace ?? \"sRGB\",",
          "      viewTransform: settings?.viewTransform ?? \"sRGB\",",
          "      exportColorSpace: settings?.exportColorSpace ?? \"sRGB\","
        ],
        "after": [
          "      displayGamma: settings?.displayGamma ?? 2.2,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:693:29",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 693,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "displayGamma: settings?.displayGamma ?? 2.2,",
      "context": {
        "before": [
          "      viewTransform: settings?.viewTransform ?? \"sRGB\",",
          "      exportColorSpace: settings?.exportColorSpace ?? \"sRGB\",",
          "      linearCompositing: settings?.linearCompositing ?? false,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:705:51",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 705,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateSettings(settings: Partial<ColorSettings>): void {",
      "context": {
        "before": [
          "    return { ...this.settings };",
          "  }",
          ""
        ],
        "after": [
          "    Object.assign(this.settings, settings);",
          "    logger.debug(\"Color settings updated:\", this.settings);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:710:47",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 710,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setWorkingColorSpace(colorSpace: ColorSpace): void {",
      "context": {
        "before": [
          "    logger.debug(\"Color settings updated:\", this.settings);",
          "  }",
          ""
        ],
        "after": [
          "    this.settings.workingColorSpace = colorSpace;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:714:45",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 714,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setViewTransform(transform: ViewTransform): void {",
      "context": {
        "before": [
          "    this.settings.workingColorSpace = colorSpace;",
          "  }",
          ""
        ],
        "after": [
          "    this.settings.viewTransform = transform;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/colorManagement/ColorProfileService.ts:718:41",
      "file": "services/colorManagement/ColorProfileService.ts",
      "line": 718,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLinearCompositing(enabled: boolean): void {",
      "context": {
        "before": [
          "    this.settings.viewTransform = transform;",
          "  }",
          ""
        ],
        "after": [
          "    this.settings.linearCompositing = enabled;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:387:24",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 387,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disconnectWebSocket(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Disconnect WebSocket",
          "   */"
        ],
        "after": [
          "    if (this.ws) {",
          "      this.ws.close();",
          "      this.ws = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:399:12",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 399,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "destroy(): void {",
      "context": {
        "before": [
          "   * Clean up all resources (WebSocket, handlers)",
          "   * Call this when the client is no longer needed",
          "   */"
        ],
        "after": [
          "    this.disconnectWebSocket();",
          "    comfyLogger.debug(\"ComfyUI client destroyed\");",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:414:56",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 414,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "onMessage(type: string, handler: (data: any) => void): void {",
      "context": {
        "before": [
          "  /**",
          "   * Register a message handler for a specific message type",
          "   */"
        ],
        "after": [
          "    this.messageHandlers.set(type, handler);",
          "  }",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:421:27",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 421,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "offMessage(type: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a message handler",
          "   */"
        ],
        "after": [
          "    this.messageHandlers.delete(type);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:425:44",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 425,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleWebSocketMessage(data: any): void {",
      "context": {
        "before": [
          "    this.messageHandlers.delete(type);",
          "  }",
          ""
        ],
        "after": [
          "    const { type } = data;",
          "",
          "    // Call registered handler"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:521:19",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 521,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "      // Progress updates",
          "      this.onMessage(\"progress\", (data) => {",
          "        checkTimeout();"
        ],
        "after": [
          "          status: \"executing\",",
          "          currentStep: data.data.value,",
          "          totalSteps: data.data.max,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:533:21",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 533,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "      this.onMessage(\"executing\", (data) => {",
          "        checkTimeout();",
          "        if (data.data.prompt_id === promptId) {"
        ],
        "after": [
          "            status: \"executing\",",
          "            currentNode: data.data.node,",
          "            percentage: 10, // Approximate"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:547:21",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 547,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "          completed = true;",
          "          cleanup();",
          ""
        ],
        "after": [
          "            status: \"completed\",",
          "            percentage: 100,",
          "          });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:563:21",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 563,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "        if (data.data.prompt_id === promptId) {",
          "          cleanup();",
          ""
        ],
        "after": [
          "            status: \"error\",",
          "            percentage: 0,",
          "          });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:588:15",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 588,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "    // Queue the prompt",
          "    const { prompt_id } = await this.queuePrompt(workflow);",
          ""
        ],
        "after": [
          "      status: \"queued\",",
          "      percentage: 0,",
          "    });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/comfyuiClient.ts:650:56",
      "file": "services/comfyui/comfyuiClient.ts",
      "line": 650,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setComfyUIServer(serverAddress: string): void {",
      "context": {
        "before": [
          "  return defaultClient;",
          "}",
          ""
        ],
        "after": [
          "  defaultClient = new ComfyUIClient({ serverAddress });",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:102:63",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 102,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function validateWorkflowParams(params: WorkflowParams): void {",
      "context": {
        "before": [
          " * Throws an error if any required parameter is invalid.",
          " * CRITICAL: Validates motionData property names match model requirements.",
          " */"
        ],
        "after": [
          "  const errors: string[] = [];",
          "",
          "  // Validate motionData structure for targets that require it"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:120:15",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 120,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(params.width) || params.width < MIN_DIMENSION) {",
      "context": {
        "before": [
          "",
          "  // Validate dimensions have both lower and upper bounds to prevent",
          "  // memory exhaustion from unreasonably large canvas allocations"
        ],
        "after": [
          "    errors.push(",
          "      `Invalid width: ${params.width}. Must be at least ${MIN_DIMENSION}.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:130:15",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 130,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(params.height) || params.height < MIN_DIMENSION) {",
      "context": {
        "before": [
          "    );",
          "  }",
          ""
        ],
        "after": [
          "    errors.push(",
          "      `Invalid height: ${params.height}. Must be at least ${MIN_DIMENSION}.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:141:15",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 141,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(params.frameCount) || params.frameCount <= 0) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Validate frame count to prevent unbounded generation requests"
        ],
        "after": [
          "    errors.push(",
          "      `Invalid frameCount: ${params.frameCount}. Must be a positive number.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:152:15",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 152,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(params.fps) || params.fps <= 0) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Validate FPS to prevent unreasonable values that could cause issues"
        ],
        "after": [
          "    errors.push(`Invalid fps: ${params.fps}. Must be a positive number.`);",
          "  } else if (params.fps > MAX_FPS) {",
          "    errors.push(`Invalid fps: ${params.fps}. Must be at most ${MAX_FPS}.`);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:169:24",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 169,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function resetNodeIds(): void {",
      "context": {
        "before": [
          "",
          "let nodeIdCounter = 1;",
          ""
        ],
        "after": [
          "  nodeIdCounter = 1;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:781:56",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 781,
      "column": 56,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (params.trajType === \"custom\" && params.cameraData?.trajectory) {",
      "context": {
        "before": [
          "",
          "  // Create camera trajectory",
          "  const trajId = nextNodeId();"
        ],
        "after": [
          "    workflow[trajId] = createNode(",
          "      \"Uni3CCustomTrajectory\",",
          "      {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2234:47",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2234,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "tracks: JSON.stringify(params.motionData?.tracks || []),",
      "context": {
        "before": [
          "    \"WanVideoAddWanMoveTracks\",",
          "    {",
          "      wan_model: conn(wanLoaderId),"
        ],
        "after": [
          "      num_frames: params.frameCount,",
          "      width: params.width,",
          "      height: params.height,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2371:53",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2371,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "trajectories: JSON.stringify(params.motionData?.trajectories || []),",
      "context": {
        "before": [
          "    \"WanVideoATITracks\",",
          "    {",
          "      wan_model: conn(wanLoaderId),"
        ],
        "after": [
          "      num_frames: params.frameCount,",
          "      width: params.width,",
          "      height: params.height,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2478:49",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2478,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "matrices: JSON.stringify(params.cameraData?.matrices || []),",
      "context": {
        "before": [
          "  workflow[cameraMatricesId] = createNode(",
          "    \"CameraComfyUI_LoadMatrices\",",
          "    {"
        ],
        "after": [
          "      num_frames: params.frameCount,",
          "    },",
          "    \"Load Camera Matrices\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2698:22",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2698,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "node.class_type?.includes(\"Save\") ||",
      "context": {
        "before": [
          "  // Note: class_type may be undefined/null for invalid nodes (already reported as error above)",
          "  const hasOutput = Object.values(workflow).some(",
          "    (node) =>"
        ],
        "after": [
          "      node.class_type?.includes(\"Output\") ||",
          "      node.class_type?.includes(\"Preview\"),",
          "  );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2699:22",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2699,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "node.class_type?.includes(\"Output\") ||",
      "context": {
        "before": [
          "  const hasOutput = Object.values(workflow).some(",
          "    (node) =>",
          "      node.class_type?.includes(\"Save\") ||"
        ],
        "after": [
          "      node.class_type?.includes(\"Preview\"),",
          "  );",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/comfyui/workflowTemplates.ts:2700:22",
      "file": "services/comfyui/workflowTemplates.ts",
      "line": 2700,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "node.class_type?.includes(\"Preview\"),",
      "context": {
        "before": [
          "    (node) =>",
          "      node.class_type?.includes(\"Save\") ||",
          "      node.class_type?.includes(\"Output\") ||"
        ],
        "after": [
          "  );",
          "",
          "  if (!hasOutput) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/conditioningRenderer.ts:637:40",
      "file": "services/conditioningRenderer.ts",
      "line": 637,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resize(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Resize the renderer",
          "   */"
        ],
        "after": [
          "    this.config.width = width;",
          "    this.config.height = height;",
          "    if (this.canvas instanceof OffscreenCanvas) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:340:34",
      "file": "services/dataImport.ts",
      "line": 340,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearDataAssets(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear all data assets",
          " */"
        ],
        "after": [
          "  dataAssets.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:421:28",
      "file": "services/dataImport.ts",
      "line": 421,
      "column": 28,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "obj[header] = Number.isNaN(numValue) ? value : numValue;",
      "context": {
        "before": [
          "      const value = row[index];",
          "      // Try to parse as number",
          "      const numValue = parseFloat(value);"
        ],
        "after": [
          "    });",
          "    return obj;",
          "  });"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:466:21",
      "file": "services/dataImport.ts",
      "line": 466,
      "column": 21,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "return Number.isNaN(numValue) ? value : numValue;",
      "context": {
        "before": [
          "",
          "      // Try to parse as number",
          "      const numValue = parseFloat(value);"
        ],
        "after": [
          "    },",
          "",
          "    numRows: () => asset.numRows,"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:576:17",
      "file": "services/dataImport.ts",
      "line": 576,
      "column": 17,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (!Number.isNaN(value)) {",
      "context": {
        "before": [
          "  let sum = 0;",
          "  for (const row of asset.rows) {",
          "    const value = parseFloat(row[colIndex]);"
        ],
        "after": [
          "      sum += value;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:601:17",
      "file": "services/dataImport.ts",
      "line": 601,
      "column": 17,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (!Number.isNaN(value) && value > max) {",
      "context": {
        "before": [
          "  let max = -Infinity;",
          "  for (const row of asset.rows) {",
          "    const value = parseFloat(row[colIndex]);"
        ],
        "after": [
          "      max = value;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/dataImport.ts:626:17",
      "file": "services/dataImport.ts",
      "line": 626,
      "column": 17,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (!Number.isNaN(value) && value < min) {",
      "context": {
        "before": [
          "  let min = Infinity;",
          "  for (const row of asset.rows) {",
          "    const value = parseFloat(row[colIndex]);"
        ],
        "after": [
          "      min = value;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:752:22",
      "file": "services/depthflow.ts",
      "line": 752,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initWebGL(): void {",
      "context": {
        "before": [
          "    this.initWebGL();",
          "  }",
          ""
        ],
        "after": [
          "    const gl = this.outputCanvas.getContext(\"webgl2\", {",
          "      premultipliedAlpha: false,",
          "      preserveDrawingBuffer: true,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:854:69",
      "file": "services/depthflow.ts",
      "line": 854,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSource(image: ImageData | HTMLImageElement | HTMLCanvasElement): void {",
      "context": {
        "before": [
          "    return shader;",
          "  }",
          ""
        ],
        "after": [
          "    if (image instanceof ImageData) {",
          "      this.sourceCanvas.width = image.width;",
          "      this.sourceCanvas.height = image.height;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:877:71",
      "file": "services/depthflow.ts",
      "line": 877,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthMap(depth: ImageData | HTMLImageElement | HTMLCanvasElement): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (depth instanceof ImageData) {",
          "      this.depthCanvas.width = depth.width;",
          "      this.depthCanvas.height = depth.height;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:895:51",
      "file": "services/depthflow.ts",
      "line": 895,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateTexture(which: \"source\" | \"depth\"): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const gl = this.gl!;",
          "    const canvas = which === \"source\" ? this.sourceCanvas : this.depthCanvas;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:918:46",
      "file": "services/depthflow.ts",
      "line": 918,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfig(config: Partial<DepthflowConfig>): void {",
      "context": {
        "before": [
          "    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);",
          "  }",
          ""
        ],
        "after": [
          "    this.config = { ...this.config, ...config };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/depthflow.ts:1259:12",
      "file": "services/depthflow.ts",
      "line": 1259,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "    return this.outputCanvas;",
          "  }",
          ""
        ],
        "after": [
          "    if (this.gl) {",
          "      if (this.sourceTexture) this.gl.deleteTexture(this.sourceTexture);",
          "      if (this.depthTexture) this.gl.deleteTexture(this.depthTexture);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:36:2",
      "file": "services/effectProcessor.ts",
      "line": 36,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  effectKey: string,",
          "  params: EvaluatedEffectParams,",
          "  audioModifiers: AudioReactiveModifiers,"
        ],
        "after": [
          "  // Glow effect - apply audio-reactive intensity, radius, and threshold modifiers",
          "  // glow_intensity (0-500%), glow_radius (0-200px), glow_threshold (0-100 luminance cutoff)",
          "  if (effectKey === \"glow\" || effectKey === \"cinematic-bloom\") {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:212:4",
      "file": "services/effectProcessor.ts",
      "line": 212,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    params: EvaluatedEffectParams,",
          "    inputCanvas: HTMLCanvasElement,",
          "    result: ImageData,"
        ],
        "after": [
          "    // Evict oldest if at capacity",
          "    while (this.cache.size >= this.maxSize) {",
          "      const firstKey = this.cache.keys().next().value;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:230:31",
      "file": "services/effectProcessor.ts",
      "line": 230,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidate(effectId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Invalidate cache for a specific effect",
          "   */"
        ],
        "after": [
          "    this.cache.delete(effectId);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:237:10",
      "file": "services/effectProcessor.ts",
      "line": 237,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all cached results",
          "   */"
        ],
        "after": [
          "    this.cache.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:256:36",
      "file": "services/effectProcessor.ts",
      "line": 256,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearEffectCaches(): void {",
      "context": {
        "before": [
          " * Clear effect processor caches",
          " * Call when loading a new project or clearing memory",
          " */"
        ],
        "after": [
          "  effectCache.clear();",
          "  canvasPool.clear();",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:278:41",
      "file": "services/effectProcessor.ts",
      "line": 278,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function cleanupEffectResources(): void {",
      "context": {
        "before": [
          " * Clean up unused resources",
          " * Call periodically (e.g., every minute) to free memory",
          " */"
        ],
        "after": [
          "  canvasPool.cleanup();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:322:2",
      "file": "services/effectProcessor.ts",
      "line": 322,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function registerEffectRenderer(",
          "  effectKey: string,",
          "  renderer: EffectRenderer,"
        ],
        "after": [
          "  effectRenderers.set(effectKey, renderer);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effectProcessor.ts:788:57",
      "file": "services/effectProcessor.ts",
      "line": 788,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function releaseCanvas(canvas: HTMLCanvasElement): void {",
      "context": {
        "before": [
          " * Release a canvas back to the pool when done",
          " * Call this after effect processing to enable reuse",
          " */"
        ],
        "after": [
          "  canvasPool.release(canvas);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:266:16",
      "file": "services/effects/audioVisualizer.ts",
      "line": 266,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (audioData?.frequencyBands && frame < audioData.frameCount) {",
      "context": {
        "before": [
          "): number[] {",
          "  const spectrum: number[] = new Array(bands).fill(0);",
          ""
        ],
        "after": [
          "    // Use real audio data",
          "    const { sub, bass, lowMid, mid, highMid, high } = audioData.frequencyBands;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:465:16",
      "file": "services/effects/audioVisualizer.ts",
      "line": 465,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (audioData?.amplitudeEnvelope && frame < audioData.frameCount) {",
      "context": {
        "before": [
          "  const waveform: number[] = new Array(samples).fill(0);",
          "  const halfSamples = Math.floor(samples / 2);",
          ""
        ],
        "after": [
          "    // Use real audio data, centered on current frame",
          "    for (let i = 0; i < samples; i++) {",
          "      const sampleFrame = frame - halfSamples + i;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/audioVisualizer.ts:501:49",
      "file": "services/effects/audioVisualizer.ts",
      "line": 501,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerAudioVisualizerEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register audio visualizer effects with the effect processor",
          " */"
        ],
        "after": [
          "  // Audio Spectrum Effect",
          "  registerEffectRenderer(",
          "    \"audio-spectrum\","
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:386:12",
      "file": "services/effects/blurRenderer.ts",
      "line": 386,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clean up WebGL resources",
          "   */"
        ],
        "after": [
          "    if (this.gl) {",
          "      if (this.program) this.gl.deleteProgram(this.program);",
          "      if (this.texture) this.gl.deleteTexture(this.texture);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:417:35",
      "file": "services/effects/blurRenderer.ts",
      "line": 417,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function disposeWebGLBlur(): void {",
      "context": {
        "before": [
          "/**",
          " * Dispose WebGL blur resources",
          " */"
        ],
        "after": [
          "  webglBlurContext.dispose();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:502:2",
      "file": "services/effects/blurRenderer.ts",
      "line": 502,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  imageData: ImageData,",
          "  radiusX: number,",
          "  radiusY: number,"
        ],
        "after": [
          "  const pixels = imageData.data;",
          "  const width = imageData.width;",
          "  const height = imageData.height;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:510:15",
      "file": "services/effects/blurRenderer.ts",
      "line": 510,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(radiusX)) radiusX = 0;",
      "context": {
        "before": [
          "  // Clamp radii (handle NaN - Math.round(NaN) stays NaN, bypassing clamp)",
          "  radiusX = Math.round(radiusX);",
          "  radiusY = Math.round(radiusY);"
        ],
        "after": [
          "  if (!Number.isFinite(radiusY)) radiusY = 0;",
          "  radiusX = Math.max(0, Math.min(255, radiusX));",
          "  radiusY = Math.max(0, Math.min(255, radiusY));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:511:15",
      "file": "services/effects/blurRenderer.ts",
      "line": 511,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(radiusY)) radiusY = 0;",
      "context": {
        "before": [
          "  radiusX = Math.round(radiusX);",
          "  radiusY = Math.round(radiusY);",
          "  if (!Number.isFinite(radiusX)) radiusX = 0;"
        ],
        "after": [
          "  radiusX = Math.max(0, Math.min(255, radiusX));",
          "  radiusY = Math.max(0, Math.min(255, radiusY));",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:536:2",
      "file": "services/effects/blurRenderer.ts",
      "line": 536,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  width: number,",
          "  height: number,",
          "  radius: number,"
        ],
        "after": [
          "  const div = radius + radius + 1;",
          "  const widthMinus1 = width - 1;",
          "  const mulSum = MUL_TABLE[radius];"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:692:2",
      "file": "services/effects/blurRenderer.ts",
      "line": 692,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  width: number,",
          "  height: number,",
          "  radius: number,"
        ],
        "after": [
          "  const div = radius + radius + 1;",
          "  const heightMinus1 = height - 1;",
          "  const mulSum = MUL_TABLE[radius];"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:882:29",
      "file": "services/effects/blurRenderer.ts",
      "line": 882,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const blurriness = Number.isFinite(blurrinessRaw)",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  const blurrinessRaw = params.blurriness ?? 10;"
        ],
        "after": [
          "    ? Math.max(0, blurrinessRaw)",
          "    : 0;",
          "  const dimensions = params.blur_dimensions ?? \"both\";"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1023:28",
      "file": "services/effects/blurRenderer.ts",
      "line": 1023,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const direction = Number.isFinite(directionRaw)",
      "context": {
        "before": [
          "  params: EvaluatedEffectParams,",
          "): EffectStackResult {",
          "  const directionRaw = params.direction ?? 0;"
        ],
        "after": [
          "    ? (directionRaw * Math.PI) / 180",
          "    : 0;",
          "  const blurLengthRaw = params.blur_length ?? 10;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1027:29",
      "file": "services/effects/blurRenderer.ts",
      "line": 1027,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const blurLength = Number.isFinite(blurLengthRaw)",
      "context": {
        "before": [
          "    ? (directionRaw * Math.PI) / 180",
          "    : 0;",
          "  const blurLengthRaw = params.blur_length ?? 10;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(500, blurLengthRaw))",
          "    : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1109:25",
      "file": "services/effects/blurRenderer.ts",
      "line": 1109,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const amount = Number.isFinite(amountRaw)",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  const type = params.type ?? \"spin\";",
          "  const amountRaw = params.amount ?? 10;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(100, amountRaw))",
          "    : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1115:28",
      "file": "services/effects/blurRenderer.ts",
      "line": 1115,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const centerXRaw = center?.x ?? (params.center_x ?? 50) / 100;",
      "context": {
        "before": [
          "",
          "  // Support both point format (from definition: { x: 0.5, y: 0.5 }) and legacy center_x/center_y",
          "  const center = params.center as { x: number; y: number } | undefined;"
        ],
        "after": [
          "  const centerYRaw = center?.y ?? (params.center_y ?? 50) / 100;",
          "  const centerX = Number.isFinite(centerXRaw) ? centerXRaw : 0.5;",
          "  const centerY = Number.isFinite(centerYRaw) ? centerYRaw : 0.5;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1116:28",
      "file": "services/effects/blurRenderer.ts",
      "line": 1116,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const centerYRaw = center?.y ?? (params.center_y ?? 50) / 100;",
      "context": {
        "before": [
          "  // Support both point format (from definition: { x: 0.5, y: 0.5 }) and legacy center_x/center_y",
          "  const center = params.center as { x: number; y: number } | undefined;",
          "  const centerXRaw = center?.x ?? (params.center_x ?? 50) / 100;"
        ],
        "after": [
          "  const centerX = Number.isFinite(centerXRaw) ? centerXRaw : 0.5;",
          "  const centerY = Number.isFinite(centerYRaw) ? centerYRaw : 0.5;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1117:26",
      "file": "services/effects/blurRenderer.ts",
      "line": 1117,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const centerX = Number.isFinite(centerXRaw) ? centerXRaw : 0.5;",
      "context": {
        "before": [
          "  const center = params.center as { x: number; y: number } | undefined;",
          "  const centerXRaw = center?.x ?? (params.center_x ?? 50) / 100;",
          "  const centerYRaw = center?.y ?? (params.center_y ?? 50) / 100;"
        ],
        "after": [
          "  const centerY = Number.isFinite(centerYRaw) ? centerYRaw : 0.5;",
          "",
          "  // Support both 'antialiasing' (from definition) and legacy 'quality'"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1118:26",
      "file": "services/effects/blurRenderer.ts",
      "line": 1118,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const centerY = Number.isFinite(centerYRaw) ? centerYRaw : 0.5;",
      "context": {
        "before": [
          "  const centerXRaw = center?.x ?? (params.center_x ?? 50) / 100;",
          "  const centerYRaw = center?.y ?? (params.center_y ?? 50) / 100;",
          "  const centerX = Number.isFinite(centerXRaw) ? centerXRaw : 0.5;"
        ],
        "after": [
          "",
          "  // Support both 'antialiasing' (from definition) and legacy 'quality'",
          "  const antialiasing = params.antialiasing ?? params.quality ?? \"high\";"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1256:25",
      "file": "services/effects/blurRenderer.ts",
      "line": 1256,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const radius = Number.isFinite(radiusRaw)",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Support both 'blur_radius' (from definition) and legacy 'radius'",
          "  const radiusRaw = Math.round(params.blur_radius ?? params.radius ?? 5);"
        ],
        "after": [
          "    ? Math.max(0, Math.min(100, radiusRaw))",
          "    : 0;",
          "  const iterationsRaw = params.iterations ?? 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1260:29",
      "file": "services/effects/blurRenderer.ts",
      "line": 1260,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const iterations = Number.isFinite(iterationsRaw)",
      "context": {
        "before": [
          "    ? Math.max(0, Math.min(100, radiusRaw))",
          "    : 0;",
          "  const iterationsRaw = params.iterations ?? 1;"
        ],
        "after": [
          "    ? Math.max(1, Math.min(5, iterationsRaw))",
          "    : 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1359:25",
      "file": "services/effects/blurRenderer.ts",
      "line": 1359,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const amount = Number.isFinite(amountRaw) ? amountRaw : 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Support both 'sharpen_amount' (from definition) and legacy 'amount'",
          "  const amountRaw = (params.sharpen_amount ?? params.amount ?? 50) / 100;"
        ],
        "after": [
          "  const radiusRaw = params.radius ?? 1;",
          "  const radius = Number.isFinite(radiusRaw)",
          "    ? Math.max(1, Math.min(100, radiusRaw))"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1361:25",
      "file": "services/effects/blurRenderer.ts",
      "line": 1361,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const radius = Number.isFinite(radiusRaw)",
      "context": {
        "before": [
          "  const amountRaw = (params.sharpen_amount ?? params.amount ?? 50) / 100;",
          "  const amount = Number.isFinite(amountRaw) ? amountRaw : 0;",
          "  const radiusRaw = params.radius ?? 1;"
        ],
        "after": [
          "    ? Math.max(1, Math.min(100, radiusRaw))",
          "    : 1;",
          "  const thresholdRaw = params.threshold ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1365:28",
      "file": "services/effects/blurRenderer.ts",
      "line": 1365,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const threshold = Number.isFinite(thresholdRaw)",
      "context": {
        "before": [
          "    ? Math.max(1, Math.min(100, radiusRaw))",
          "    : 1;",
          "  const thresholdRaw = params.threshold ?? 0;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(255, thresholdRaw))",
          "    : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/blurRenderer.ts:1411:38",
      "file": "services/effects/blurRenderer.ts",
      "line": 1411,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerBlurEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register all blur effect renderers",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"gaussian-blur\", gaussianBlurRenderer);",
          "  registerEffectRenderer(\"directional-blur\", directionalBlurRenderer);",
          "  registerEffectRenderer(\"radial-blur\", radialBlurRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:231:2",
      "file": "services/effects/cinematicBloom.ts",
      "line": 231,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  kernel: Float32Array,",
          "  horizontal: boolean,",
          "  channel: number, // 0=R, 1=G, 2=B, 3=A"
        ],
        "after": [
          "  const kernelSize = kernel.length;",
          "  const kernelHalf = Math.floor(kernelSize / 2);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:526:2",
      "file": "services/effects/cinematicBloom.ts",
      "line": 526,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  width: number,",
          "  height: number,",
          "  intensity: number,"
        ],
        "after": [
          "  for (let y = 0; y < height; y++) {",
          "    for (let x = 0; x < width; x++) {",
          "      const dirtIdx = y * width + x;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:712:33",
      "file": "services/effects/cinematicBloom.ts",
      "line": 712,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const sourceCtx = sourceCanvas?.getContext(\"2d\");",
      "context": {
        "before": [
          "  // Use _sourceCanvas if provided (for additive stacking), otherwise use input",
          "  // This ensures stacked blooms extract from original layer, not from previous bloom output",
          "  const sourceCanvas = params._sourceCanvas as HTMLCanvasElement | undefined;"
        ],
        "after": [
          "  let originalData = sourceCtx",
          "    ? sourceCtx.getImageData(0, 0, width, height)",
          "    : input.ctx.getImageData(0, 0, width, height);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/cinematicBloom.ts:824:48",
      "file": "services/effects/cinematicBloom.ts",
      "line": 824,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerCinematicBloomEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register cinematic bloom effect renderers",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"cinematic-bloom\", cinematicBloomRenderer);",
          "  registerEffectRenderer(\"glow\", glowRenderer);",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:41:24",
      "file": "services/effects/colorGrading.ts",
      "line": 41,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const liftR = Number.isFinite(liftRRaw)",
      "context": {
        "before": [
          "  const liftRRaw = params.lift_red ?? 0;",
          "  const liftGRaw = params.lift_green ?? 0;",
          "  const liftBRaw = params.lift_blue ?? 0;"
        ],
        "after": [
          "    ? Math.max(-1, Math.min(1, liftRRaw))",
          "    : 0;",
          "  const liftG = Number.isFinite(liftGRaw)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:44:24",
      "file": "services/effects/colorGrading.ts",
      "line": 44,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const liftG = Number.isFinite(liftGRaw)",
      "context": {
        "before": [
          "  const liftR = Number.isFinite(liftRRaw)",
          "    ? Math.max(-1, Math.min(1, liftRRaw))",
          "    : 0;"
        ],
        "after": [
          "    ? Math.max(-1, Math.min(1, liftGRaw))",
          "    : 0;",
          "  const liftB = Number.isFinite(liftBRaw)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:47:24",
      "file": "services/effects/colorGrading.ts",
      "line": 47,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const liftB = Number.isFinite(liftBRaw)",
      "context": {
        "before": [
          "  const liftG = Number.isFinite(liftGRaw)",
          "    ? Math.max(-1, Math.min(1, liftGRaw))",
          "    : 0;"
        ],
        "after": [
          "    ? Math.max(-1, Math.min(1, liftBRaw))",
          "    : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:55:25",
      "file": "services/effects/colorGrading.ts",
      "line": 55,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gammaR = Number.isFinite(gammaRRaw)",
      "context": {
        "before": [
          "  const gammaRRaw = params.gamma_red ?? 1;",
          "  const gammaGRaw = params.gamma_green ?? 1;",
          "  const gammaBRaw = params.gamma_blue ?? 1;"
        ],
        "after": [
          "    ? Math.max(0.1, Math.min(4, gammaRRaw))",
          "    : 1;",
          "  const gammaG = Number.isFinite(gammaGRaw)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:58:25",
      "file": "services/effects/colorGrading.ts",
      "line": 58,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gammaG = Number.isFinite(gammaGRaw)",
      "context": {
        "before": [
          "  const gammaR = Number.isFinite(gammaRRaw)",
          "    ? Math.max(0.1, Math.min(4, gammaRRaw))",
          "    : 1;"
        ],
        "after": [
          "    ? Math.max(0.1, Math.min(4, gammaGRaw))",
          "    : 1;",
          "  const gammaB = Number.isFinite(gammaBRaw)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:61:25",
      "file": "services/effects/colorGrading.ts",
      "line": 61,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gammaB = Number.isFinite(gammaBRaw)",
      "context": {
        "before": [
          "  const gammaG = Number.isFinite(gammaGRaw)",
          "    ? Math.max(0.1, Math.min(4, gammaGRaw))",
          "    : 1;"
        ],
        "after": [
          "    ? Math.max(0.1, Math.min(4, gammaBRaw))",
          "    : 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:69:24",
      "file": "services/effects/colorGrading.ts",
      "line": 69,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gainR = Number.isFinite(gainRRaw)",
      "context": {
        "before": [
          "  const gainRRaw = params.gain_red ?? 1;",
          "  const gainGRaw = params.gain_green ?? 1;",
          "  const gainBRaw = params.gain_blue ?? 1;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(4, gainRRaw))",
          "    : 1;",
          "  const gainG = Number.isFinite(gainGRaw)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:72:24",
      "file": "services/effects/colorGrading.ts",
      "line": 72,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gainG = Number.isFinite(gainGRaw)",
      "context": {
        "before": [
          "  const gainR = Number.isFinite(gainRRaw)",
          "    ? Math.max(0, Math.min(4, gainRRaw))",
          "    : 1;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(4, gainGRaw))",
          "    : 1;",
          "  const gainB = Number.isFinite(gainBRaw)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:75:24",
      "file": "services/effects/colorGrading.ts",
      "line": 75,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gainB = Number.isFinite(gainBRaw)",
      "context": {
        "before": [
          "  const gainG = Number.isFinite(gainGRaw)",
          "    ? Math.max(0, Math.min(4, gainGRaw))",
          "    : 1;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(4, gainBRaw))",
          "    : 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:192:51",
      "file": "services/effects/colorGrading.ts",
      "line": 192,
      "column": 51,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const num = typeof val === \"number\" && Number.isFinite(val) ? val : def;",
      "context": {
        "before": [
          "    min?: number,",
          "    max?: number,",
          "  ): number => {"
        ],
        "after": [
          "    if (min !== undefined && max !== undefined)",
          "      return Math.max(min, Math.min(max, num));",
          "    return num;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:608:12",
      "file": "services/effects/colorGrading.ts",
      "line": 608,
      "column": 12,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(refPixelsRaw) &&",
      "context": {
        "before": [
          "  const refPixelsRaw = params.reference_pixels as number | undefined;",
          "  const refPixels =",
          "    typeof refPixelsRaw === \"number\" &&"
        ],
        "after": [
          "    refPixelsRaw > 0",
          "      ? refPixelsRaw",
          "      : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:613:27",
      "file": "services/effects/colorGrading.ts",
      "line": 613,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const strength = Number.isFinite(strengthRaw)",
      "context": {
        "before": [
          "      ? refPixelsRaw",
          "      : 0;",
          "  const strengthRaw = (params.strength ?? 100) / 100;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(1, strengthRaw))",
          "    : 0;",
          "  const matchLuminance = params.match_luminance ?? true;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorGrading.ts:767:46",
      "file": "services/effects/colorGrading.ts",
      "line": 767,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerColorGradingEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register all color grading effect renderers",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"lift-gamma-gain\", liftGammaGainRenderer);",
          "  registerEffectRenderer(\"hsl-secondary\", hslSecondaryRenderer);",
          "  registerEffectRenderer(\"hue-vs-curves\", hueVsCurvesRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:64:29",
      "file": "services/effects/colorRenderer.ts",
      "line": 64,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const brightness = Number.isFinite(rawBrightness) ? rawBrightness / 100 : 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawBrightness = params.brightness ?? 0;"
        ],
        "after": [
          "  const rawContrast = params.contrast ?? 0;",
          "  const contrast = Number.isFinite(rawContrast) ? rawContrast / 100 : 0;",
          "  const useLegacy = params.use_legacy ?? false;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:66:27",
      "file": "services/effects/colorRenderer.ts",
      "line": 66,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const contrast = Number.isFinite(rawContrast) ? rawContrast / 100 : 0;",
      "context": {
        "before": [
          "  const rawBrightness = params.brightness ?? 0;",
          "  const brightness = Number.isFinite(rawBrightness) ? rawBrightness / 100 : 0;",
          "  const rawContrast = params.contrast ?? 0;"
        ],
        "after": [
          "  const useLegacy = params.use_legacy ?? false;",
          "",
          "  // No change needed"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:195:27",
      "file": "services/effects/colorRenderer.ts",
      "line": 195,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const hueShift = Number.isFinite(rawHue) ? rawHue / 360 : 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawHue = params.master_hue ?? 0;"
        ],
        "after": [
          "  const rawSat = params.master_saturation ?? 0;",
          "  const saturationShift = Number.isFinite(rawSat) ? rawSat / 100 : 0;",
          "  const rawLight = params.master_lightness ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:197:34",
      "file": "services/effects/colorRenderer.ts",
      "line": 197,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const saturationShift = Number.isFinite(rawSat) ? rawSat / 100 : 0;",
      "context": {
        "before": [
          "  const rawHue = params.master_hue ?? 0;",
          "  const hueShift = Number.isFinite(rawHue) ? rawHue / 360 : 0;",
          "  const rawSat = params.master_saturation ?? 0;"
        ],
        "after": [
          "  const rawLight = params.master_lightness ?? 0;",
          "  const lightnessShift = Number.isFinite(rawLight) ? rawLight / 100 : 0;",
          "  const colorize = params.colorize ?? false;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:199:33",
      "file": "services/effects/colorRenderer.ts",
      "line": 199,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const lightnessShift = Number.isFinite(rawLight) ? rawLight / 100 : 0;",
      "context": {
        "before": [
          "  const rawSat = params.master_saturation ?? 0;",
          "  const saturationShift = Number.isFinite(rawSat) ? rawSat / 100 : 0;",
          "  const rawLight = params.master_lightness ?? 0;"
        ],
        "after": [
          "  const colorize = params.colorize ?? false;",
          "",
          "  // No change needed"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:279:29",
      "file": "services/effects/colorRenderer.ts",
      "line": 279,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const inputBlack = Number.isFinite(rawInputBlack) ? rawInputBlack : 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawInputBlack = params.input_black ?? 0;"
        ],
        "after": [
          "  const rawInputWhite = params.input_white ?? 255;",
          "  const inputWhite = Number.isFinite(rawInputWhite) ? rawInputWhite : 255;",
          "  const rawGamma = params.gamma ?? 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:281:29",
      "file": "services/effects/colorRenderer.ts",
      "line": 281,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const inputWhite = Number.isFinite(rawInputWhite) ? rawInputWhite : 255;",
      "context": {
        "before": [
          "  const rawInputBlack = params.input_black ?? 0;",
          "  const inputBlack = Number.isFinite(rawInputBlack) ? rawInputBlack : 0;",
          "  const rawInputWhite = params.input_white ?? 255;"
        ],
        "after": [
          "  const rawGamma = params.gamma ?? 1;",
          "  const gamma = Number.isFinite(rawGamma) && rawGamma > 0 ? rawGamma : 1;",
          "  const rawOutputBlack = params.output_black ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:283:24",
      "file": "services/effects/colorRenderer.ts",
      "line": 283,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gamma = Number.isFinite(rawGamma) && rawGamma > 0 ? rawGamma : 1;",
      "context": {
        "before": [
          "  const rawInputWhite = params.input_white ?? 255;",
          "  const inputWhite = Number.isFinite(rawInputWhite) ? rawInputWhite : 255;",
          "  const rawGamma = params.gamma ?? 1;"
        ],
        "after": [
          "  const rawOutputBlack = params.output_black ?? 0;",
          "  const outputBlack = Number.isFinite(rawOutputBlack) ? rawOutputBlack : 0;",
          "  const rawOutputWhite = params.output_white ?? 255;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:285:30",
      "file": "services/effects/colorRenderer.ts",
      "line": 285,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const outputBlack = Number.isFinite(rawOutputBlack) ? rawOutputBlack : 0;",
      "context": {
        "before": [
          "  const rawGamma = params.gamma ?? 1;",
          "  const gamma = Number.isFinite(rawGamma) && rawGamma > 0 ? rawGamma : 1;",
          "  const rawOutputBlack = params.output_black ?? 0;"
        ],
        "after": [
          "  const rawOutputWhite = params.output_white ?? 255;",
          "  const outputWhite = Number.isFinite(rawOutputWhite) ? rawOutputWhite : 255;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:287:30",
      "file": "services/effects/colorRenderer.ts",
      "line": 287,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const outputWhite = Number.isFinite(rawOutputWhite) ? rawOutputWhite : 255;",
      "context": {
        "before": [
          "  const rawOutputBlack = params.output_black ?? 0;",
          "  const outputBlack = Number.isFinite(rawOutputBlack) ? rawOutputBlack : 0;",
          "  const rawOutputWhite = params.output_white ?? 255;"
        ],
        "after": [
          "",
          "  // No change needed",
          "  if ("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:360:25",
      "file": "services/effects/colorRenderer.ts",
      "line": 360,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const amount = Number.isFinite(rawAmount) ? rawAmount / 100 : 1;",
      "context": {
        "before": [
          "  const whiteColor = params.map_white_to ?? { r: 255, g: 255, b: 255 };",
          "  // Validate amount (NaN causes black pixel corruption)",
          "  const rawAmount = params.amount_to_tint ?? 100;"
        ],
        "after": [
          "",
          "  // No change at 0 amount",
          "  if (amount === 0) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:534:24",
      "file": "services/effects/colorRenderer.ts",
      "line": 534,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const blend = Number.isFinite(rawBlend) ? rawBlend / 100 : 1;",
      "context": {
        "before": [
          "  const alphaCurve = params.alpha_curve as CurvePoint[] | undefined;",
          "  // Validate blend param (NaN causes black pixel corruption)",
          "  const rawBlend = params.blend_with_original ?? 100;"
        ],
        "after": [
          "",
          "  // Check if any curves are defined",
          "  const hasCurves ="
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:672:28",
      "file": "services/effects/colorRenderer.ts",
      "line": 672,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 128;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawThreshold = params.glow_threshold ?? 128;"
        ],
        "after": [
          "  const rawRadius = params.glow_radius ?? 20;",
          "  const radius = Number.isFinite(rawRadius) ? Math.max(0, rawRadius) : 20;",
          "  // Support both new 'glow_intensity' (0-10 range) and legacy (0-400 percentage)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:674:25",
      "file": "services/effects/colorRenderer.ts",
      "line": 674,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const radius = Number.isFinite(rawRadius) ? Math.max(0, rawRadius) : 20;",
      "context": {
        "before": [
          "  const rawThreshold = params.glow_threshold ?? 128;",
          "  const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 128;",
          "  const rawRadius = params.glow_radius ?? 20;"
        ],
        "after": [
          "  // Support both new 'glow_intensity' (0-10 range) and legacy (0-400 percentage)",
          "  const rawIntensity = params.glow_intensity ?? 100;",
          "  const validIntensity = Number.isFinite(rawIntensity) ? rawIntensity : 100;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:677:33",
      "file": "services/effects/colorRenderer.ts",
      "line": 677,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const validIntensity = Number.isFinite(rawIntensity) ? rawIntensity : 100;",
      "context": {
        "before": [
          "  const radius = Number.isFinite(rawRadius) ? Math.max(0, rawRadius) : 20;",
          "  // Support both new 'glow_intensity' (0-10 range) and legacy (0-400 percentage)",
          "  const rawIntensity = params.glow_intensity ?? 100;"
        ],
        "after": [
          "  const intensity =",
          "    validIntensity <= 10 ? validIntensity : validIntensity / 100;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:696:36",
      "file": "services/effects/colorRenderer.ts",
      "line": 696,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const colorLoopingSpeed = Number.isFinite(rawLoopSpeed) ? rawLoopSpeed : 1;",
      "context": {
        "before": [
          "  // Color Looping (animated color cycling)",
          "  const colorLooping = params.color_looping ?? \"none\";",
          "  const rawLoopSpeed = params.color_looping_speed ?? 1;"
        ],
        "after": [
          "",
          "  // Glow Dimensions (horizontal, vertical, or both)",
          "  const glowDimensions = params.glow_dimensions ?? \"both\";"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:715:14",
      "file": "services/effects/colorRenderer.ts",
      "line": 715,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(params._fps) && params._fps > 0 ? params._fps : 16;",
      "context": {
        "before": [
          "    // Use injected FPS from context, fallback to 16 (WAN standard)",
          "    // Validate fps (nullish coalescing doesn't catch NaN)",
          "    const fps ="
        ],
        "after": [
          "    const time = frame / fps;",
          "    const cycle = (time * colorLoopingSpeed) % 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:758:33",
      "file": "services/effects/colorRenderer.ts",
      "line": 758,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const sourceCtx = sourceCanvas?.getContext(\"2d\");",
      "context": {
        "before": [
          "  const thresholdCtx = thresholdCanvas.getContext(\"2d\")!;",
          "",
          "  // Get image data from source canvas (original) or input canvas (chain)"
        ],
        "after": [
          "  const inputData = sourceCtx",
          "    ? sourceCtx.getImageData(0, 0, width, height)",
          "    : input.ctx.getImageData(0, 0, width, height);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:923:26",
      "file": "services/effects/colorRenderer.ts",
      "line": 923,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const opacity = Number.isFinite(rawOpacity) ? rawOpacity / 100 : 0.5;",
      "context": {
        "before": [
          "  const shadowColor = params.shadow_color ?? { r: 0, g: 0, b: 0, a: 0.5 };",
          "  // Validate numeric params (NaN causes visual corruption)",
          "  const rawOpacity = params.opacity ?? 50;"
        ],
        "after": [
          "  const rawDirection = params.direction ?? 135;",
          "  const direction = Number.isFinite(rawDirection)",
          "    ? (rawDirection * Math.PI) / 180"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:925:28",
      "file": "services/effects/colorRenderer.ts",
      "line": 925,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const direction = Number.isFinite(rawDirection)",
      "context": {
        "before": [
          "  const rawOpacity = params.opacity ?? 50;",
          "  const opacity = Number.isFinite(rawOpacity) ? rawOpacity / 100 : 0.5;",
          "  const rawDirection = params.direction ?? 135;"
        ],
        "after": [
          "    ? (rawDirection * Math.PI) / 180",
          "    : (135 * Math.PI) / 180;",
          "  const rawDistance = params.distance ?? 5;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:929:27",
      "file": "services/effects/colorRenderer.ts",
      "line": 929,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const distance = Number.isFinite(rawDistance) ? rawDistance : 5;",
      "context": {
        "before": [
          "    ? (rawDirection * Math.PI) / 180",
          "    : (135 * Math.PI) / 180;",
          "  const rawDistance = params.distance ?? 5;"
        ],
        "after": [
          "  const rawSoftness = params.softness ?? 5;",
          "  const softness = Number.isFinite(rawSoftness) ? rawSoftness : 5;",
          "  const shadowOnly = params.shadow_only ?? false;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:931:27",
      "file": "services/effects/colorRenderer.ts",
      "line": 931,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const softness = Number.isFinite(rawSoftness) ? rawSoftness : 5;",
      "context": {
        "before": [
          "  const rawDistance = params.distance ?? 5;",
          "  const distance = Number.isFinite(rawDistance) ? rawDistance : 5;",
          "  const rawSoftness = params.softness ?? 5;"
        ],
        "after": [
          "  const shadowOnly = params.shadow_only ?? false;",
          "",
          "  const output = createMatchingCanvas(input.canvas);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:990:19",
      "file": "services/effects/colorRenderer.ts",
      "line": 990,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(raw) ? raw / 100 : def / 100;",
      "context": {
        "before": [
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const safeDiv100 = (val: unknown, def: number) => {",
          "    const raw = (val ?? def) as number;"
        ],
        "after": [
          "  };",
          "  const shadowR = safeDiv100(params.shadow_red, 0);",
          "  const shadowG = safeDiv100(params.shadow_green, 0);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1100:27",
      "file": "services/effects/colorRenderer.ts",
      "line": 1100,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const exposure = Number.isFinite(rawExposure) ? rawExposure : 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawExposure = params.exposure ?? 0;"
        ],
        "after": [
          "  const rawOffset = params.offset ?? 0;",
          "  const offset = Number.isFinite(rawOffset) ? rawOffset : 0;",
          "  const rawGamma = params.gamma ?? 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1102:25",
      "file": "services/effects/colorRenderer.ts",
      "line": 1102,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const offset = Number.isFinite(rawOffset) ? rawOffset : 0;",
      "context": {
        "before": [
          "  const rawExposure = params.exposure ?? 0;",
          "  const exposure = Number.isFinite(rawExposure) ? rawExposure : 0;",
          "  const rawOffset = params.offset ?? 0;"
        ],
        "after": [
          "  const rawGamma = params.gamma ?? 1;",
          "  const gamma = Number.isFinite(rawGamma) && rawGamma > 0 ? rawGamma : 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1104:24",
      "file": "services/effects/colorRenderer.ts",
      "line": 1104,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const gamma = Number.isFinite(rawGamma) && rawGamma > 0 ? rawGamma : 1;",
      "context": {
        "before": [
          "  const rawOffset = params.offset ?? 0;",
          "  const offset = Number.isFinite(rawOffset) ? rawOffset : 0;",
          "  const rawGamma = params.gamma ?? 1;"
        ],
        "after": [
          "",
          "  // No change if all values are default",
          "  if (exposure === 0 && offset === 0 && gamma === 1) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1171:27",
      "file": "services/effects/colorRenderer.ts",
      "line": 1171,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const vibrance = Number.isFinite(rawVibrance) ? rawVibrance / 100 : 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawVibrance = params.vibrance ?? 0;"
        ],
        "after": [
          "  const rawSaturation = params.saturation ?? 0;",
          "  const saturation = Number.isFinite(rawSaturation) ? rawSaturation / 100 : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1173:29",
      "file": "services/effects/colorRenderer.ts",
      "line": 1173,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const saturation = Number.isFinite(rawSaturation) ? rawSaturation / 100 : 0;",
      "context": {
        "before": [
          "  const rawVibrance = params.vibrance ?? 0;",
          "  const vibrance = Number.isFinite(rawVibrance) ? rawVibrance / 100 : 0;",
          "  const rawSaturation = params.saturation ?? 0;"
        ],
        "after": [
          "",
          "  // No change if all values are 0",
          "  if (vibrance === 0 && saturation === 0) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1253:24",
      "file": "services/effects/colorRenderer.ts",
      "line": 1253,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const blend = Number.isFinite(rawBlend) ? rawBlend / 100 : 1;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate blend param (NaN causes black pixel corruption)",
          "  const rawBlend = params.blend ?? 100;"
        ],
        "after": [
          "  const channel = params.channel ?? \"rgb\";",
          "",
          "  if (blend === 0) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1338:25",
      "file": "services/effects/colorRenderer.ts",
      "line": 1338,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const levels = Number.isFinite(rawLevels)",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate levels (NaN bypasses Math.max/min clamps, corrupting LUT)",
          "  const rawLevels = params.levels ?? 6;"
        ],
        "after": [
          "    ? Math.max(2, Math.min(256, rawLevels))",
          "    : 6;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1391:28",
      "file": "services/effects/colorRenderer.ts",
      "line": 1391,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 128;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate threshold param (NaN causes incorrect threshold comparison)",
          "  const rawThreshold = params.threshold ?? 128;"
        ],
        "after": [
          "",
          "  const output = createMatchingCanvas(input.canvas);",
          "  const imageData = input.ctx.getImageData("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1444:25",
      "file": "services/effects/colorRenderer.ts",
      "line": 1444,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const amount = Number.isFinite(rawAmount) ? rawAmount / 100 : 0;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes black pixel corruption)",
          "  const rawAmount = params.amount ?? 0;"
        ],
        "after": [
          "  const rawMidpoint = params.midpoint ?? 50;",
          "  const midpoint = Number.isFinite(rawMidpoint) ? rawMidpoint / 100 : 0.5;",
          "  const rawRoundness = params.roundness ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1446:27",
      "file": "services/effects/colorRenderer.ts",
      "line": 1446,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const midpoint = Number.isFinite(rawMidpoint) ? rawMidpoint / 100 : 0.5;",
      "context": {
        "before": [
          "  const rawAmount = params.amount ?? 0;",
          "  const amount = Number.isFinite(rawAmount) ? rawAmount / 100 : 0;",
          "  const rawMidpoint = params.midpoint ?? 50;"
        ],
        "after": [
          "  const rawRoundness = params.roundness ?? 0;",
          "  const roundness = Number.isFinite(rawRoundness) ? rawRoundness / 100 : 0;",
          "  const rawFeather = params.feather ?? 50;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1448:28",
      "file": "services/effects/colorRenderer.ts",
      "line": 1448,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const roundness = Number.isFinite(rawRoundness) ? rawRoundness / 100 : 0;",
      "context": {
        "before": [
          "  const rawMidpoint = params.midpoint ?? 50;",
          "  const midpoint = Number.isFinite(rawMidpoint) ? rawMidpoint / 100 : 0.5;",
          "  const rawRoundness = params.roundness ?? 0;"
        ],
        "after": [
          "  const rawFeather = params.feather ?? 50;",
          "  const feather = Number.isFinite(rawFeather) ? rawFeather / 100 : 0.5;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1450:26",
      "file": "services/effects/colorRenderer.ts",
      "line": 1450,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const feather = Number.isFinite(rawFeather) ? rawFeather / 100 : 0.5;",
      "context": {
        "before": [
          "  const rawRoundness = params.roundness ?? 0;",
          "  const roundness = Number.isFinite(rawRoundness) ? rawRoundness / 100 : 0;",
          "  const rawFeather = params.feather ?? 50;"
        ],
        "after": [
          "",
          "  // No change needed",
          "  if (amount === 0) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1660:28",
      "file": "services/effects/colorRenderer.ts",
      "line": 1660,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const intensity = Number.isFinite(rawIntensity) ? rawIntensity / 100 : 1;",
      "context": {
        "before": [
          "  const lutData = params.lutData as string;",
          "  // Validate intensity param (NaN causes black pixel corruption)",
          "  const rawIntensity = params.intensity ?? 100;"
        ],
        "after": [
          "",
          "  if (!lutData || intensity === 0) {",
          "    return input;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1722:63",
      "file": "services/effects/colorRenderer.ts",
      "line": 1722,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerLUT(name: string, cubeContent: string): void {",
      "context": {
        "before": [
          "/**",
          " * Register a LUT in the cache by name",
          " */"
        ],
        "after": [
          "  const lut = parseCubeLUT(cubeContent);",
          "  lutCache.set(name, lut);",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1737:32",
      "file": "services/effects/colorRenderer.ts",
      "line": 1737,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearLUTCache(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear LUT cache",
          " */"
        ],
        "after": [
          "  lutCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/colorRenderer.ts:1751:39",
      "file": "services/effects/colorRenderer.ts",
      "line": 1751,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerColorEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register all color correction effect renderers",
          " */"
        ],
        "after": [
          "  // Register basic color effects",
          "  registerEffectRenderer(\"brightness-contrast\", brightnessContrastRenderer);",
          "  registerEffectRenderer(\"hue-saturation\", hueSaturationRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/distortRenderer.ts:46:51",
      "file": "services/effects/distortRenderer.ts",
      "line": 46,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializePermutationTable(seed: number): void {",
      "context": {
        "before": [
          "    this.initializePermutationTable(seed);",
          "  }",
          ""
        ],
        "after": [
          "    // Mulberry32 seeded random",
          "    const mulberry32 = (s: number) => {",
          "      return () => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/distortRenderer.ts:173:49",
      "file": "services/effects/distortRenderer.ts",
      "line": 173,
      "column": 49,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const num = typeof val === \"number\" && Number.isFinite(val) ? val : def;",
      "context": {
        "before": [
          "  min?: number,",
          "  max?: number,",
          "): number {"
        ],
        "after": [
          "  if (min !== undefined && max !== undefined) {",
          "    return Math.max(min, Math.min(max, num));",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/distortRenderer.ts:1239:41",
      "file": "services/effects/distortRenderer.ts",
      "line": 1239,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerDistortEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register all distort effect renderers",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"transform\", transformRenderer);",
          "  registerEffectRenderer(\"warp\", warpRenderer);",
          "  registerEffectRenderer(\"displacement-map\", displacementMapRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/expressionControlRenderer.ts:112:53",
      "file": "services/effects/expressionControlRenderer.ts",
      "line": 112,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerExpressionControlRenderers(): void {",
      "context": {
        "before": [
          "/**",
          " * Register all Expression Control renderers",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"slider-control\", sliderControlRenderer);",
          "  registerEffectRenderer(\"checkbox-control\", checkboxControlRenderer);",
          "  registerEffectRenderer(\"dropdown-menu-control\", dropdownMenuControlRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:95:4",
      "file": "services/effects/generateRenderer.ts",
      "line": 95,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    octave: number,",
          "    seed: number,",
          "    tile: Float32Array,"
        ],
        "after": [
          "    // Evict oldest if at capacity",
          "    while (this.cache.size >= this.maxSize) {",
          "      const firstKey = this.cache.keys().next().value;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:117:10",
      "file": "services/effects/generateRenderer.ts",
      "line": 117,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all cached tiles",
          "   */"
        ],
        "after": [
          "    this.cache.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:135:38",
      "file": "services/effects/generateRenderer.ts",
      "line": 135,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearNoiseTileCache(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear noise tile cache",
          " */"
        ],
        "after": [
          "  noiseTileCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:169:26",
      "file": "services/effects/generateRenderer.ts",
      "line": 169,
      "column": 26,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const opacity = Number.isFinite(rawOpacity) ? rawOpacity / 100 : 1;",
      "context": {
        "before": [
          "  const color = params.color ?? { r: 255, g: 0, b: 0, a: 1 };",
          "  // Validate opacity (NaN causes visual corruption)",
          "  const rawOpacity = params.opacity ?? 100;"
        ],
        "after": [
          "  const invert = params.invert ?? false;",
          "",
          "  const { width, height } = input.canvas;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/generateRenderer.ts:847:42",
      "file": "services/effects/generateRenderer.ts",
      "line": 847,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerGenerateEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register all generate effect renderers",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"fill\", fillRenderer);",
          "  registerEffectRenderer(\"gradient-ramp\", gradientRampRenderer);",
          "  registerEffectRenderer(\"fractal-noise\", fractalNoiseRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/index.ts:23:36",
      "file": "services/effects/index.ts",
      "line": 23,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function initializeEffects(): void {",
      "context": {
        "before": [
          " * Initialize all effect renderers",
          " * Call this once at application startup",
          " */"
        ],
        "after": [
          "  registerBlurEffects();",
          "  registerColorEffects();",
          "  registerDistortEffects();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:56:47",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 56,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setCurrentFrame(frame: number): void {",
      "context": {
        "before": [
          "/**",
          " * Set current frame for getValue calls",
          " */"
        ],
        "after": [
          "  currentFrame = frame;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:93:58",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 93,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function releaseMatchingCanvas(canvas: HTMLCanvasElement): void {",
      "context": {
        "before": [
          "/**",
          " * Release a canvas back to the pool",
          " */"
        ],
        "after": [
          "  canvasPool.release(canvas);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:130:62",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 130,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function applyBlur(canvas: HTMLCanvasElement, radius: number): void {",
      "context": {
        "before": [
          "/**",
          " * Apply Gaussian blur to canvas",
          " */"
        ],
        "after": [
          "  if (radius <= 0) return;",
          "  const ctx = canvas.getContext(\"2d\")!;",
          "  ctx.filter = `blur(${radius}px)`;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1133:24",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1133,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.dropShadow?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 1. Drop Shadow (renders behind)"
        ],
        "after": [
          "    result = renderDropShadowStyle(result, styles.dropShadow, globalLight);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1138:25",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1138,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.innerShadow?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 2. Inner Shadow"
        ],
        "after": [
          "    result = renderInnerShadowStyle(result, styles.innerShadow, globalLight);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1143:23",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1143,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.outerGlow?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 3. Outer Glow (renders behind)"
        ],
        "after": [
          "    result = renderOuterGlowStyle(result, styles.outerGlow);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1148:23",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1148,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.innerGlow?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 4. Inner Glow"
        ],
        "after": [
          "    result = renderInnerGlowStyle(result, styles.innerGlow);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1153:25",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1153,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.bevelEmboss?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 5. Bevel and Emboss"
        ],
        "after": [
          "    result = renderBevelEmbossStyle(result, styles.bevelEmboss, globalLight);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1158:19",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1158,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.satin?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 6. Satin"
        ],
        "after": [
          "    result = renderSatinStyle(result, styles.satin);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1163:26",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1163,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.colorOverlay?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 7. Color Overlay"
        ],
        "after": [
          "    result = renderColorOverlayStyle(result, styles.colorOverlay);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1168:29",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1168,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.gradientOverlay?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 8. Gradient Overlay"
        ],
        "after": [
          "    result = renderGradientOverlayStyle(result, styles.gradientOverlay);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/layerStyleRenderer.ts:1173:20",
      "file": "services/effects/layerStyleRenderer.ts",
      "line": 1173,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (styles.stroke?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // 9. Stroke (renders on top)"
        ],
        "after": [
          "    result = renderStrokeStyle(result, styles.stroke);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/maskRenderer.ts:27:71",
      "file": "services/effects/maskRenderer.ts",
      "line": 27,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function renderMaskPath(ctx: CanvasRenderingContext2D, path: MaskPath): void {",
      "context": {
        "before": [
          "/**",
          " * Render a bezier mask path to a canvas context",
          " */"
        ],
        "after": [
          "  if (path.vertices.length < 2) return;",
          "",
          "  ctx.beginPath();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/maskRenderer.ts:374:66",
      "file": "services/effects/maskRenderer.ts",
      "line": 374,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function cachePath(maskId: string, frame: number, path: MaskPath): void {",
      "context": {
        "before": [
          "/**",
          " * Cache current path for next frame's motion calculation",
          " */"
        ],
        "after": [
          "  previousPathCache.set(maskId, { frame, path });",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/maskRenderer.ts:390:43",
      "file": "services/effects/maskRenderer.ts",
      "line": 390,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearMaskPathCacheOnSeek(): void {",
      "context": {
        "before": [
          " * - Playhead jump operations",
          " * - Project load/reset",
          " */"
        ],
        "after": [
          "  previousPathCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:400:2",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 400,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  dstA: Point2D,",
          "  dstB: Point2D,",
          "  dstC: Point2D,"
        ],
        "after": [
          "  const { width, height, data: dst } = outputData;",
          "  const { width: srcWidth, height: srcHeight, data: src } = inputData;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:578:2",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 578,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  pins: WarpPin[] = [],",
          "  frame: number = 0,",
          "  enableOverlap: boolean = false,"
        ],
        "after": [
          "  const { width, height } = outputCtx.canvas;",
          "",
          "  // Get input image data"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:650:2",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 650,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  triangles: Uint32Array,",
          "  _vertexCount: number,",
          "  triangleCount: number,"
        ],
        "after": [
          "  ctx.strokeStyle = \"rgba(0, 255, 0, 0.5)\";",
          "  ctx.lineWidth = 1;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:682:2",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 682,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  ctx: CanvasRenderingContext2D,",
          "  pins: WarpPin[],",
          "  frame: number,"
        ],
        "after": [
          "  for (const pin of pins) {",
          "    const { position, rotation, scale } = evaluatePinAtFrame(pin, frame);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:777:41",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 777,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const pins: WarpPin[] = effectInstance?.pins ?? [];",
      "context": {
        "before": [
          "  const showPins = params.show_pins ?? true;",
          "",
          "  // Get pins from effect instance (injected by render pipeline)"
        ],
        "after": [
          "",
          "  // No pins = no deformation",
          "  if (pins.length === 0) {"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:787:40",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 787,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const effectId = effectInstance?.id ?? \"temp\";",
      "context": {
        "before": [
          "      output.ctx.drawImage(input.canvas, 0, 0);",
          "",
          "      if (showMesh) {"
        ],
        "after": [
          "        const { mesh } = getOrGenerateMesh(effectId, input.canvas, params, []);",
          "        renderMeshWireframe(",
          "          output.ctx,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:803:34",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 803,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const effectId = effectInstance?.id ?? `temp-${Date.now()}`;",
      "context": {
        "before": [
          "    return input;",
          "  }",
          ""
        ],
        "after": [
          "",
          "  // Get or generate mesh",
          "  const { mesh, weights } = getOrGenerateMesh("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:856:43",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 856,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerMeshDeformEffect(): void {",
      "context": {
        "before": [
          "/**",
          " * Register mesh-deform effect renderer",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"mesh-deform\", meshDeformRenderer);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/meshDeformRenderer.ts:863:40",
      "file": "services/effects/meshDeformRenderer.ts",
      "line": 863,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearMeshDeformCaches(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear mesh caches (call when loading new project)",
          " */"
        ],
        "after": [
          "  meshCaches.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/perspectiveRenderer.ts:97:29",
      "file": "services/effects/perspectiveRenderer.ts",
      "line": 97,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const depthData = depthMap?.data;",
      "context": {
        "before": [
          "  );",
          "",
          "  const data = output.data;"
        ],
        "after": [
          "",
          "  const fogR = params.fogColor.r;",
          "  const fogG = params.fogColor.g;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/perspectiveRenderer.ts:173:29",
      "file": "services/effects/perspectiveRenderer.ts",
      "line": 173,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const depthData = depthMap?.data;",
      "context": {
        "before": [
          "  );",
          "",
          "  const data = output.data;"
        ],
        "after": [
          "",
          "  const range = params.farDepth - params.nearDepth;",
          "  const softnessFactor = params.softness / 100;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/perspectiveRenderer.ts:249:31",
      "file": "services/effects/perspectiveRenderer.ts",
      "line": 249,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rightData = rightImage?.data || leftImage.data;",
      "context": {
        "before": [
          "  );",
          "",
          "  const leftData = leftImage.data;"
        ],
        "after": [
          "  const outData = output.data;",
          "",
          "  // Apply convergence offset"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:49:28",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 49,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.25;",
      "context": {
        "before": [
          "  const direction = params.direction ?? \"horizontal\";",
          "  // Validate numeric params (NaN causes visual corruption)",
          "  const rawThreshold = params.threshold ?? 0.25;"
        ],
        "after": [
          "  const rawSmoothing = params.smoothing ?? 0.1;",
          "  const smoothing = Number.isFinite(rawSmoothing) ? rawSmoothing : 0.1;",
          "  const sortBy = params.sort_by ?? \"saturation\";"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:51:28",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 51,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const smoothing = Number.isFinite(rawSmoothing) ? rawSmoothing : 0.1;",
      "context": {
        "before": [
          "  const rawThreshold = params.threshold ?? 0.25;",
          "  const threshold = Number.isFinite(rawThreshold) ? rawThreshold : 0.25;",
          "  const rawSmoothing = params.smoothing ?? 0.1;"
        ],
        "after": [
          "  const sortBy = params.sort_by ?? \"saturation\";",
          "  const reverse = params.reverse ?? false;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:186:31",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 186,
      "column": 31,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const glitchAmount = Number.isFinite(rawGlitchAmount) ? rawGlitchAmount : 5;",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN causes visual corruption and bypasses === 0 check)",
          "  const rawGlitchAmount = params.glitch_amount ?? 5;"
        ],
        "after": [
          "  const colorOffset = params.color_offset ?? true;",
          "  const rawBlockSize = params.block_size ?? 8;",
          "  const blockSize = Number.isFinite(rawBlockSize)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:189:28",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 189,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const blockSize = Number.isFinite(rawBlockSize)",
      "context": {
        "before": [
          "  const glitchAmount = Number.isFinite(rawGlitchAmount) ? rawGlitchAmount : 5;",
          "  const colorOffset = params.color_offset ?? true;",
          "  const rawBlockSize = params.block_size ?? 8;"
        ],
        "after": [
          "    ? Math.max(1, rawBlockSize)",
          "    : 8;",
          "  const rawSeed = params.seed ?? 12345;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:193:23",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 193,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const seed = Number.isFinite(rawSeed) ? rawSeed : 12345;",
      "context": {
        "before": [
          "    ? Math.max(1, rawBlockSize)",
          "    : 8;",
          "  const rawSeed = params.seed ?? 12345;"
        ],
        "after": [
          "  const scanlines = params.scanlines ?? true;",
          "",
          "  if (glitchAmount === 0) return input;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/stylizeRenderer.ts:1139:41",
      "file": "services/effects/stylizeRenderer.ts",
      "line": 1139,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerStylizeEffects(): void {",
      "context": {
        "before": [
          "/**",
          " * Register all stylize effect renderers",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"pixel-sort\", pixelSortRenderer);",
          "  registerEffectRenderer(\"glitch\", glitchRenderer);",
          "  registerEffectRenderer(\"vhs\", vhsRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:40:28",
      "file": "services/effects/timeRenderer.ts",
      "line": 40,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayer(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the layer this buffer is associated with",
          "   */"
        ],
        "after": [
          "    if (this.layerId !== layerId) {",
          "      this.clear();",
          "      this.layerId = layerId;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:51:50",
      "file": "services/effects/timeRenderer.ts",
      "line": 51,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "store(frame: number, canvas: HTMLCanvasElement): void {",
      "context": {
        "before": [
          "   * Store a frame in the buffer.",
          "   * Uses frame number for timestamp instead of Date.now() for determinism.",
          "   */"
        ],
        "after": [
          "    const ctx = canvas.getContext(\"2d\");",
          "    if (!ctx) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:133:10",
      "file": "services/effects/timeRenderer.ts",
      "line": 133,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear the buffer",
          "   */"
        ],
        "after": [
          "    this.buffer = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:141:32",
      "file": "services/effects/timeRenderer.ts",
      "line": 141,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cleanup(currentFrame: number): void {",
      "context": {
        "before": [
          "   * Remove old entries based on frame distance.",
          "   * Uses frame-based cleanup instead of wall-clock time for determinism.",
          "   */"
        ],
        "after": [
          "    // Keep frames within maxFrames distance of current frame",
          "    const maxFrameDistance = this.maxFrames * 2; // Allow some buffer for echo effects",
          "    this.buffer = this.buffer.filter("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:184:39",
      "file": "services/effects/timeRenderer.ts",
      "line": 184,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearAllFrameBuffers(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear all frame buffers (call on project change)",
          " */"
        ],
        "after": [
          "  frameBuffers.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:230:12",
      "file": "services/effects/timeRenderer.ts",
      "line": 230,
      "column": 12,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(params._fps) && params._fps > 0 ? params._fps : 16;",
      "context": {
        "before": [
          "  const frame = params._frame ?? 0;",
          "  // Validate fps (nullish coalescing doesn't catch NaN)",
          "  const fps ="
        ],
        "after": [
          "",
          "  // Extract parameters with defaults",
          "  // Validate numeric params (NaN bypasses Math.max/min clamps)"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:235:27",
      "file": "services/effects/timeRenderer.ts",
      "line": 235,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const echoTime = Number.isFinite(rawEchoTime) ? rawEchoTime : -1 / fps;",
      "context": {
        "before": [
          "  // Extract parameters with defaults",
          "  // Validate numeric params (NaN bypasses Math.max/min clamps)",
          "  const rawEchoTime = params.echo_time ?? -1 / fps;"
        ],
        "after": [
          "  const rawNumEchoes = params.number_of_echoes ?? 8;",
          "  const numEchoes = Number.isFinite(rawNumEchoes)",
          "    ? Math.max(1, Math.min(50, rawNumEchoes))"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:237:28",
      "file": "services/effects/timeRenderer.ts",
      "line": 237,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const numEchoes = Number.isFinite(rawNumEchoes)",
      "context": {
        "before": [
          "  const rawEchoTime = params.echo_time ?? -1 / fps;",
          "  const echoTime = Number.isFinite(rawEchoTime) ? rawEchoTime : -1 / fps;",
          "  const rawNumEchoes = params.number_of_echoes ?? 8;"
        ],
        "after": [
          "    ? Math.max(1, Math.min(50, rawNumEchoes))",
          "    : 8;",
          "  const rawIntensity = params.starting_intensity ?? 1.0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:241:36",
      "file": "services/effects/timeRenderer.ts",
      "line": 241,
      "column": 36,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const startingIntensity = Number.isFinite(rawIntensity)",
      "context": {
        "before": [
          "    ? Math.max(1, Math.min(50, rawNumEchoes))",
          "    : 8;",
          "  const rawIntensity = params.starting_intensity ?? 1.0;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(1, rawIntensity))",
          "    : 1.0;",
          "  const rawDecay = params.decay ?? 0.5;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:245:24",
      "file": "services/effects/timeRenderer.ts",
      "line": 245,
      "column": 24,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const decay = Number.isFinite(rawDecay)",
      "context": {
        "before": [
          "    ? Math.max(0, Math.min(1, rawIntensity))",
          "    : 1.0;",
          "  const rawDecay = params.decay ?? 0.5;"
        ],
        "after": [
          "    ? Math.max(0, Math.min(1, rawDecay))",
          "    : 0.5;",
          "  const operator: EchoOperator = params.echo_operator ?? \"add\";"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:373:28",
      "file": "services/effects/timeRenderer.ts",
      "line": 373,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const targetFps = Number.isFinite(rawTargetFps)",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN bypasses Math.max/min clamps)",
          "  const rawTargetFps = params.frame_rate ?? 12;"
        ],
        "after": [
          "    ? Math.max(1, Math.min(60, rawTargetFps))",
          "    : 12;",
          "  const frame = params._frame ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:379:12",
      "file": "services/effects/timeRenderer.ts",
      "line": 379,
      "column": 12,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(params._fps) && params._fps > 0 ? params._fps : 16;",
      "context": {
        "before": [
          "  const frame = params._frame ?? 0;",
          "  // Validate fps to prevent division by NaN",
          "  const fps ="
        ],
        "after": [
          "  const layerId = params._layerId ?? \"default\";",
          "",
          "  // Calculate which \"posterized\" frame this belongs to"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:493:34",
      "file": "services/effects/timeRenderer.ts",
      "line": 493,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const maxDisplacement = Number.isFinite(rawMaxDisplacement)",
      "context": {
        "before": [
          "): EffectStackResult {",
          "  // Validate numeric params (NaN bypasses === 0 check)",
          "  const rawMaxDisplacement = params.max_displacement ?? 10;"
        ],
        "after": [
          "    ? rawMaxDisplacement",
          "    : 10;",
          "  const mapType = params.map_type ?? \"gradient-h\";"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:498:27",
      "file": "services/effects/timeRenderer.ts",
      "line": 498,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const mapScale = Number.isFinite(rawMapScale) ? rawMapScale : 1;",
      "context": {
        "before": [
          "    : 10;",
          "  const mapType = params.map_type ?? \"gradient-h\";",
          "  const rawMapScale = params.map_scale ?? 1;"
        ],
        "after": [
          "  const rawBias = params.time_offset_bias ?? 0;",
          "  const bias = Number.isFinite(rawBias) ? rawBias : 0;",
          "  const frame = params._frame ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:500:23",
      "file": "services/effects/timeRenderer.ts",
      "line": 500,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const bias = Number.isFinite(rawBias) ? rawBias : 0;",
      "context": {
        "before": [
          "  const rawMapScale = params.map_scale ?? 1;",
          "  const mapScale = Number.isFinite(rawMapScale) ? rawMapScale : 1;",
          "  const rawBias = params.time_offset_bias ?? 0;"
        ],
        "after": [
          "  const frame = params._frame ?? 0;",
          "  const layerId = params._layerId ?? \"default\";",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:636:50",
      "file": "services/effects/timeRenderer.ts",
      "line": 636,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearFrozenFrame(layerId: string): void {",
      "context": {
        "before": [
          "/**",
          " * Clear a frozen frame cache for a layer",
          " */"
        ],
        "after": [
          "  frozenFrames.delete(`${layerId}_freeze`);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:643:39",
      "file": "services/effects/timeRenderer.ts",
      "line": 643,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearAllFrozenFrames(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear all frozen frame caches",
          " */"
        ],
        "after": [
          "  frozenFrames.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:659:45",
      "file": "services/effects/timeRenderer.ts",
      "line": 659,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearTimeEffectStateOnSeek(): void {",
      "context": {
        "before": [
          " * - Playhead jump operations",
          " * - Project load/reset",
          " */"
        ],
        "after": [
          "  clearAllFrameBuffers();",
          "  clearAllFrozenFrames();",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:762:2",
      "file": "services/effects/timeRenderer.ts",
      "line": 762,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  motionBlurAmount: number,",
          "  width: number,",
          "  height: number,"
        ],
        "after": [
          "  const blockSize = 8; // Motion estimation block size",
          "  const searchRadius = 8; // Search radius for motion vectors",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/effects/timeRenderer.ts:1026:38",
      "file": "services/effects/timeRenderer.ts",
      "line": 1026,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerTimeEffects(): void {",
      "context": {
        "before": [
          " * Register all time effect renderers",
          " * Note: Timewarp is NOT an effect - it's a layer property that modifies timing",
          " */"
        ],
        "after": [
          "  registerEffectRenderer(\"echo\", echoRenderer);",
          "  registerEffectRenderer(\"posterize-time\", posterizeTimeRenderer);",
          "  registerEffectRenderer(\"freeze-frame\", freezeFrameRenderer);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/atiExport.ts:175:35",
      "file": "services/export/atiExport.ts",
      "line": 175,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "vis = visibility[trackIdx]?.[f] ?? true;",
      "context": {
        "before": [
          "",
          "      if (f < numFrames && f < track.length) {",
          "        [x, y] = track[f];"
        ],
        "after": [
          "      } else if (track.length > 0) {",
          "        // Pad with last known position",
          "        const lastIdx = Math.min(numFrames - 1, track.length - 1);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/atiExport.ts:180:35",
      "file": "services/export/atiExport.ts",
      "line": 180,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "vis = visibility[trackIdx]?.[lastIdx] ?? true;",
      "context": {
        "before": [
          "        // Pad with last known position",
          "        const lastIdx = Math.min(numFrames - 1, track.length - 1);",
          "        [x, y] = track[lastIdx];"
        ],
        "after": [
          "      } else {",
          "        x = width / 2;",
          "        y = height / 2;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/atiExport.ts:297:30",
      "file": "services/export/atiExport.ts",
      "line": 297,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const numFrames = points[0]?.length ?? 0;",
      "context": {
        "before": [
          "  fps: number = 16,",
          "): WanMoveTrajectory {",
          "  const numPoints = points.length;"
        ],
        "after": [
          "",
          "  // Convert to WanMove format",
          "  const tracks: number[][][] = points.map((track) =>"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/backendDepthService.ts:115:48",
      "file": "services/export/backendDepthService.ts",
      "line": 115,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "`Depth map generated: ${result.metadata?.width}x${result.metadata?.height}`,",
      "context": {
        "before": [
          "      }",
          "",
          "      logger.info("
        ],
        "after": [
          "      );",
          "",
          "      return result as DepthGenerationResult;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/backendDepthService.ts:115:74",
      "file": "services/export/backendDepthService.ts",
      "line": 115,
      "column": 74,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "`Depth map generated: ${result.metadata?.width}x${result.metadata?.height}`,",
      "context": {
        "before": [
          "      }",
          "",
          "      logger.info("
        ],
        "after": [
          "      );",
          "",
          "      return result as DepthGenerationResult;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/backendDepthService.ts:186:49",
      "file": "services/export/backendDepthService.ts",
      "line": 186,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "`Normal map generated: ${result.metadata?.width}x${result.metadata?.height}`,",
      "context": {
        "before": [
          "      }",
          "",
          "      logger.info("
        ],
        "after": [
          "      );",
          "",
          "      return result as NormalGenerationResult;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/backendDepthService.ts:186:75",
      "file": "services/export/backendDepthService.ts",
      "line": 186,
      "column": 75,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "`Normal map generated: ${result.metadata?.width}x${result.metadata?.height}`,",
      "context": {
        "before": [
          "      }",
          "",
          "      logger.info("
        ],
        "after": [
          "      );",
          "",
          "      return result as NormalGenerationResult;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:84:7",
      "file": "services/export/cameraExportFormats.ts",
      "line": 84,
      "column": 7,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kf?.position ?? camera.position;",
      "context": {
        "before": [
          "",
          "  // Helper to get value with fallback",
          "  const getPos = (kf: CameraKeyframe | null | undefined) =>"
        ],
        "after": [
          "  const getOri = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.orientation ?? camera.orientation;",
          "  const getFocal = (kf: CameraKeyframe | null | undefined) =>"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:86:7",
      "file": "services/export/cameraExportFormats.ts",
      "line": 86,
      "column": 7,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kf?.orientation ?? camera.orientation;",
      "context": {
        "before": [
          "  const getPos = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.position ?? camera.position;",
          "  const getOri = (kf: CameraKeyframe | null | undefined) =>"
        ],
        "after": [
          "  const getFocal = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.focalLength ?? camera.focalLength;",
          "  const getZoom = (kf: CameraKeyframe | null | undefined) =>"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:88:7",
      "file": "services/export/cameraExportFormats.ts",
      "line": 88,
      "column": 7,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kf?.focalLength ?? camera.focalLength;",
      "context": {
        "before": [
          "  const getOri = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.orientation ?? camera.orientation;",
          "  const getFocal = (kf: CameraKeyframe | null | undefined) =>"
        ],
        "after": [
          "  const getZoom = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.zoom ?? camera.zoom;",
          "  const getFocusDist = (kf: CameraKeyframe | null | undefined) =>"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:90:7",
      "file": "services/export/cameraExportFormats.ts",
      "line": 90,
      "column": 7,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kf?.zoom ?? camera.zoom;",
      "context": {
        "before": [
          "  const getFocal = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.focalLength ?? camera.focalLength;",
          "  const getZoom = (kf: CameraKeyframe | null | undefined) =>"
        ],
        "after": [
          "  const getFocusDist = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.focusDistance ?? camera.depthOfField.focusDistance;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:92:7",
      "file": "services/export/cameraExportFormats.ts",
      "line": 92,
      "column": 7,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kf?.focusDistance ?? camera.depthOfField.focusDistance;",
      "context": {
        "before": [
          "  const getZoom = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.zoom ?? camera.zoom;",
          "  const getFocusDist = (kf: CameraKeyframe | null | undefined) =>"
        ],
        "after": [
          "",
          "  if (prev?.frame === next?.frame) {",
          "    return {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:94:11",
      "file": "services/export/cameraExportFormats.ts",
      "line": 94,
      "column": 11,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prev?.frame === next?.frame) {",
      "context": {
        "before": [
          "  const getFocusDist = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.focusDistance ?? camera.depthOfField.focusDistance;",
          ""
        ],
        "after": [
          "    return {",
          "      position: getPos(prev),",
          "      rotation: getOri(prev),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:94:27",
      "file": "services/export/cameraExportFormats.ts",
      "line": 94,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prev?.frame === next?.frame) {",
      "context": {
        "before": [
          "  const getFocusDist = (kf: CameraKeyframe | null | undefined) =>",
          "    kf?.focusDistance ?? camera.depthOfField.focusDistance;",
          ""
        ],
        "after": [
          "    return {",
          "      position: getPos(prev),",
          "      rotation: getOri(prev),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:105:25",
      "file": "services/export/cameraExportFormats.ts",
      "line": 105,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const prevFrame = prev?.frame ?? 0;",
      "context": {
        "before": [
          "  }",
          "",
          "  // Interpolate"
        ],
        "after": [
          "  const nextFrame = next?.frame ?? prevFrame;",
          "  const t = nextFrame === prevFrame ? 0 : (frame - prevFrame) / (nextFrame - prevFrame);",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:106:25",
      "file": "services/export/cameraExportFormats.ts",
      "line": 106,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const nextFrame = next?.frame ?? prevFrame;",
      "context": {
        "before": [
          "",
          "  // Interpolate",
          "  const prevFrame = prev?.frame ?? 0;"
        ],
        "after": [
          "  const t = nextFrame === prevFrame ? 0 : (frame - prevFrame) / (nextFrame - prevFrame);",
          "",
          "  const prevPos = getPos(prev);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:161:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 161,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
      "context": {
        "before": [
          "  // Guard against NaN/Infinity from invalid keyframe interpolation or corrupted",
          "  // camera state. NaN values would propagate through matrix math and produce",
          "  // an invalid view matrix. Fallback to identity-like values (0) for safety."
        ],
        "after": [
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:162:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 162,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
      "context": {
        "before": [
          "  // camera state. NaN values would propagate through matrix math and produce",
          "  // an invalid view matrix. Fallback to identity-like values (0) for safety.",
          "  const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;"
        ],
        "after": [
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;",
          "  const posY = Number.isFinite(position.y) ? position.y : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:163:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 163,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
      "context": {
        "before": [
          "  // an invalid view matrix. Fallback to identity-like values (0) for safety.",
          "  const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;"
        ],
        "after": [
          "  const posX = Number.isFinite(position.x) ? position.x : 0;",
          "  const posY = Number.isFinite(position.y) ? position.y : 0;",
          "  const posZ = Number.isFinite(position.z) ? position.z : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:164:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 164,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posX = Number.isFinite(position.x) ? position.x : 0;",
      "context": {
        "before": [
          "  const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;"
        ],
        "after": [
          "  const posY = Number.isFinite(position.y) ? position.y : 0;",
          "  const posZ = Number.isFinite(position.z) ? position.z : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:165:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 165,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posY = Number.isFinite(position.y) ? position.y : 0;",
      "context": {
        "before": [
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;"
        ],
        "after": [
          "  const posZ = Number.isFinite(position.z) ? position.z : 0;",
          "",
          "  // Convert degrees to radians"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:166:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 166,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posZ = Number.isFinite(position.z) ? position.z : 0;",
      "context": {
        "before": [
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;",
          "  const posY = Number.isFinite(position.y) ? position.y : 0;"
        ],
        "after": [
          "",
          "  // Convert degrees to radians",
          "  const rx = (rotX * Math.PI) / 180;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:219:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 219,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(aspectRatio) || aspectRatio <= 0) {",
      "context": {
        "before": [
          "  farClip: number = 1000,",
          "): number[][] {",
          "  // Aspect ratio must be positive and finite for valid projection matrix"
        ],
        "after": [
          "    throw new Error(",
          "      `Invalid aspectRatio: ${aspectRatio}. Must be a positive finite number.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:230:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 230,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(nearClip) || nearClip <= 0) {",
      "context": {
        "before": [
          "  let validNear = nearClip;",
          "  let validFar = farClip;",
          ""
        ],
        "after": [
          "    console.warn(",
          "      `Invalid nearClip: ${nearClip}. Using fallback value 0.1.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:237:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 237,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(farClip) || farClip <= validNear) {",
      "context": {
        "before": [
          "    validNear = 0.1;",
          "  }",
          ""
        ],
        "after": [
          "    console.warn(",
          "      `Invalid farClip: ${farClip} (must be > nearClip ${validNear}). Using fallback value 1000.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:246:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 246,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(cam.focalLength)) {",
      "context": {
        "before": [
          "",
          "  // Default to 50mm focal length (standard lens) if value is invalid",
          "  let focalLength = cam.focalLength;"
        ],
        "after": [
          "    console.warn(",
          "      `Invalid focalLength: ${cam.focalLength}. Using fallback value 50mm.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:686:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 686,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(width) || width <= 0) {",
      "context": {
        "before": [
          "  const { width, height, fps, frameCount } = options;",
          "",
          "  // Validate dimensions - throw for any invalid value (zero, negative, NaN, Infinity)"
        ],
        "after": [
          "    throw new Error(",
          "      `Invalid dimensions: ${width}x${height}. Width and height must be positive finite numbers.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:691:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 691,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(height) || height <= 0) {",
      "context": {
        "before": [
          "      `Invalid dimensions: ${width}x${height}. Width and height must be positive finite numbers.`,",
          "    );",
          "  }"
        ],
        "after": [
          "    throw new Error(",
          "      `Invalid dimensions: ${width}x${height}. Width and height must be positive finite numbers.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:698:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 698,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(fps) || fps <= 0) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Validate FPS - throw for any invalid value"
        ],
        "after": [
          "    throw new Error(",
          "      `Invalid fps: ${fps}. FPS must be a positive finite number.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:705:15",
      "file": "services/export/cameraExportFormats.ts",
      "line": 705,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frameCount) || frameCount < 1) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Validate frame count - throw for any invalid value"
        ],
        "after": [
          "    throw new Error(",
          "      `Invalid frameCount: ${frameCount}. Frame count must be at least 1.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:773:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 773,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
      "context": {
        "before": [
          "  const { position, rotation } = cam;",
          "",
          "  // Guard against NaN/Infinity"
        ],
        "after": [
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:774:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 774,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
      "context": {
        "before": [
          "",
          "  // Guard against NaN/Infinity",
          "  const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;"
        ],
        "after": [
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;",
          "  const posY = Number.isFinite(position.y) ? position.y : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:775:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 775,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
      "context": {
        "before": [
          "  // Guard against NaN/Infinity",
          "  const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;"
        ],
        "after": [
          "  const posX = Number.isFinite(position.x) ? position.x : 0;",
          "  const posY = Number.isFinite(position.y) ? position.y : 0;",
          "  const posZ = Number.isFinite(position.z) ? position.z : 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:776:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 776,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posX = Number.isFinite(position.x) ? position.x : 0;",
      "context": {
        "before": [
          "  const rotX = Number.isFinite(rotation.x) ? rotation.x : 0;",
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;"
        ],
        "after": [
          "  const posY = Number.isFinite(position.y) ? position.y : 0;",
          "  const posZ = Number.isFinite(position.z) ? position.z : 0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:777:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 777,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posY = Number.isFinite(position.y) ? position.y : 0;",
      "context": {
        "before": [
          "  const rotY = Number.isFinite(rotation.y) ? rotation.y : 0;",
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;"
        ],
        "after": [
          "  const posZ = Number.isFinite(position.z) ? position.z : 0;",
          "",
          "  // Convert degrees to radians"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/cameraExportFormats.ts:778:23",
      "file": "services/export/cameraExportFormats.ts",
      "line": 778,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const posZ = Number.isFinite(position.z) ? position.z : 0;",
      "context": {
        "before": [
          "  const rotZ = Number.isFinite(rotation.z) ? rotation.z : 0;",
          "  const posX = Number.isFinite(position.x) ? position.x : 0;",
          "  const posY = Number.isFinite(position.y) ? position.y : 0;"
        ],
        "after": [
          "",
          "  // Convert degrees to radians",
          "  const rx = (rotX * Math.PI) / 180;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:132:15",
      "file": "services/export/depthRenderer.ts",
      "line": 132,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(minDepth) || !Number.isFinite(maxDepth)) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Handle empty scene: if no layers updated min/max, default to farClip"
        ],
        "after": [
          "    minDepth = f32FarClip;",
          "    maxDepth = f32FarClip;",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:132:45",
      "file": "services/export/depthRenderer.ts",
      "line": 132,
      "column": 45,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(minDepth) || !Number.isFinite(maxDepth)) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Handle empty scene: if no layers updated min/max, default to farClip"
        ],
        "after": [
          "    minDepth = f32FarClip;",
          "    maxDepth = f32FarClip;",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:157:35",
      "file": "services/export/depthRenderer.ts",
      "line": 157,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const position = layer.transform?.position;",
      "context": {
        "before": [
          " * Get layer Z depth at frame",
          " */",
          "function getLayerDepth(layer: Layer, frame: number): number {"
        ],
        "after": [
          "  if (!position) return 0;",
          "",
          "  // Check for animated position"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:186:28",
      "file": "services/export/depthRenderer.ts",
      "line": 186,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layer.opacity.keyframes?.length > 0",
      "context": {
        "before": [
          "  if (",
          "    layer.opacity &&",
          "    \"keyframes\" in layer.opacity &&"
        ],
        "after": [
          "  ) {",
          "    const interpolated = interpolateValue(layer.opacity.keyframes, frame);",
          "    return (interpolated ?? 100) / 100;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:214:35",
      "file": "services/export/depthRenderer.ts",
      "line": 214,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const position = layer.transform?.position;",
      "context": {
        "before": [
          "  let x = 0,",
          "    y = 0;",
          ""
        ],
        "after": [
          "  if (position && \"value\" in position) {",
          "    const value = position.value;",
          "    if (Array.isArray(value)) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:230:32",
      "file": "services/export/depthRenderer.ts",
      "line": 230,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const scale = layer.transform?.scale;",
      "context": {
        "before": [
          "  // Get scale from transform",
          "  let scaleX = 1,",
          "    scaleY = 1;"
        ],
        "after": [
          "  if (scale && \"value\" in scale) {",
          "    const value = scale.value;",
          "    if (Array.isArray(value)) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:246:38",
      "file": "services/export/depthRenderer.ts",
      "line": 246,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const anchorPoint = layer.transform?.anchorPoint;",
      "context": {
        "before": [
          "  // Get anchor point from transform",
          "  let anchorX = 0.5,",
          "    anchorY = 0.5;"
        ],
        "after": [
          "  if (anchorPoint && \"value\" in anchorPoint) {",
          "    const value = anchorPoint.value;",
          "    if (Array.isArray(value)) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:299:2",
      "file": "services/export/depthRenderer.ts",
      "line": 299,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  screenHeight: number,",
          "  nearClip: number,",
          "  farClip: number,"
        ],
        "after": [
          "  const depthData = (layer as any).depthMapData as Uint8Array | Float32Array;",
          "  const depthWidth = (layer as any).depthWidth || bounds.width;",
          "  const depthHeight = (layer as any).depthHeight || bounds.height;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:358:2",
      "file": "services/export/depthRenderer.ts",
      "line": 358,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  frame: number,",
          "  nearClip: number,",
          "  farClip: number,"
        ],
        "after": [
          "  // Access the engine's particle layer to get active particles",
          "  const engine = (window as any).__latticeEngine;",
          "  if (!engine) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:364:44",
      "file": "services/export/depthRenderer.ts",
      "line": 364,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const particleLayer = engine.getLayerById?.(layer.id);",
      "context": {
        "before": [
          "  if (!engine) return;",
          "",
          "  // Get the particle layer from the engine"
        ],
        "after": [
          "  if (!particleLayer || typeof particleLayer.getActiveParticles !== \"function\") {",
          "    return;",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:380:17",
      "file": "services/export/depthRenderer.ts",
      "line": 380,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(p.x) || !Number.isFinite(p.y) || !Number.isFinite(p.z)) {",
      "context": {
        "before": [
          "  // Render each particle as a circular depth splat",
          "  for (const p of particles) {",
          "    // Validate particle position"
        ],
        "after": [
          "      continue;",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:380:42",
      "file": "services/export/depthRenderer.ts",
      "line": 380,
      "column": 42,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(p.x) || !Number.isFinite(p.y) || !Number.isFinite(p.z)) {",
      "context": {
        "before": [
          "  // Render each particle as a circular depth splat",
          "  for (const p of particles) {",
          "    // Validate particle position"
        ],
        "after": [
          "      continue;",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:380:67",
      "file": "services/export/depthRenderer.ts",
      "line": 380,
      "column": 67,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(p.x) || !Number.isFinite(p.y) || !Number.isFinite(p.z)) {",
      "context": {
        "before": [
          "  // Render each particle as a circular depth splat",
          "  for (const p of particles) {",
          "    // Validate particle position"
        ],
        "after": [
          "      continue;",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:427:2",
      "file": "services/export/depthRenderer.ts",
      "line": 427,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  opacity: number,",
          "  screenWidth: number,",
          "  screenHeight: number,"
        ],
        "after": [
          "  const startX = Math.floor(bounds.x);",
          "  const startY = Math.floor(bounds.y);",
          "  const endX = Math.min(screenWidth, Math.ceil(bounds.x + bounds.width));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:510:15",
      "file": "services/export/depthRenderer.ts",
      "line": 510,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(width) || width <= 0) {",
      "context": {
        "before": [
          "  const { depthBuffer, width, height, minDepth, maxDepth } = result;",
          "",
          "  // Validate dimensions - zero or negative dimensions are invalid"
        ],
        "after": [
          "    throw new Error(`Invalid dimensions: width=${width}. Width must be a positive number.`);",
          "  }",
          "  if (!Number.isFinite(height) || height <= 0) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:513:15",
      "file": "services/export/depthRenderer.ts",
      "line": 513,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(height) || height <= 0) {",
      "context": {
        "before": [
          "  if (!Number.isFinite(width) || width <= 0) {",
          "    throw new Error(`Invalid dimensions: width=${width}. Width must be a positive number.`);",
          "  }"
        ],
        "after": [
          "    throw new Error(`Invalid dimensions: height=${height}. Height must be a positive number.`);",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/export/depthRenderer.ts:951:15",
      "file": "services/export/depthRenderer.ts",
      "line": 951,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(i + 1, totalFrames);",
      "context": {
        "before": [
          "    // This returns the path that would be used",
          "    outputPaths.push(outputPath);",
          ""
        ],
        "after": [
          "  }",
          "",
          "  return outputPaths;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:76:25",
      "file": "services/export/exportPipeline.ts",
      "line": 76,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private checkAborted(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.aborted) {",
          "      throw new Error(\"Export aborted\");",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:82:60",
      "file": "services/export/exportPipeline.ts",
      "line": 82,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateProgress(progress: Partial<ExportProgress>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.onProgress({",
          "      stage: \"preparing\",",
          "      stageProgress: 0,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:317:31",
      "file": "services/export/exportPipeline.ts",
      "line": 317,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const az = a.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "    const sortedLayers = [...this.layers]",
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {"
        ],
        "after": [
          "        const bz = b.transform?.position?.value?.z ?? 0;",
          "        return az - bz;",
          "      });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:317:41",
      "file": "services/export/exportPipeline.ts",
      "line": 317,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const az = a.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "    const sortedLayers = [...this.layers]",
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {"
        ],
        "after": [
          "        const bz = b.transform?.position?.value?.z ?? 0;",
          "        return az - bz;",
          "      });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:317:48",
      "file": "services/export/exportPipeline.ts",
      "line": 317,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const az = a.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "    const sortedLayers = [...this.layers]",
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {"
        ],
        "after": [
          "        const bz = b.transform?.position?.value?.z ?? 0;",
          "        return az - bz;",
          "      });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:318:31",
      "file": "services/export/exportPipeline.ts",
      "line": 318,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const bz = b.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {",
          "        const az = a.transform?.position?.value?.z ?? 0;"
        ],
        "after": [
          "        return az - bz;",
          "      });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:318:41",
      "file": "services/export/exportPipeline.ts",
      "line": 318,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const bz = b.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {",
          "        const az = a.transform?.position?.value?.z ?? 0;"
        ],
        "after": [
          "        return az - bz;",
          "      });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:318:48",
      "file": "services/export/exportPipeline.ts",
      "line": 318,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const bz = b.transform?.position?.value?.z ?? 0;",
      "context": {
        "before": [
          "      .filter((layer) => layer.visible)",
          "      .sort((a, b) => {",
          "        const az = a.transform?.position?.value?.z ?? 0;"
        ],
        "after": [
          "        return az - bz;",
          "      });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:348:49",
      "file": "services/export/exportPipeline.ts",
      "line": 348,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": ": ((evaluated.transform.rotation as any)?.z ?? 0);",
      "context": {
        "before": [
          "    const rotation =",
          "      typeof evaluated.transform.rotation === \"number\"",
          "        ? evaluated.transform.rotation"
        ],
        "after": [
          "    const opacity = evaluated.opacity;",
          "",
          "    ctx.save();"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:361:44",
      "file": "services/export/exportPipeline.ts",
      "line": 361,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.type === \"image\" && layerData?.src) {",
      "context": {
        "before": [
          "",
          "    // Draw layer content",
          "    const layerData = layer.data as any;"
        ],
        "after": [
          "      // Create image from content URL",
          "      const img = await this.loadImage(layerData.src);",
          "      ctx.drawImage(img, -img.width / 2, -img.height / 2);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:365:51",
      "file": "services/export/exportPipeline.ts",
      "line": 365,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "} else if (layer.type === \"solid\" && layerData?.color) {",
      "context": {
        "before": [
          "      // Create image from content URL",
          "      const img = await this.loadImage(layerData.src);",
          "      ctx.drawImage(img, -img.width / 2, -img.height / 2);"
        ],
        "after": [
          "      ctx.fillStyle = layerData.color || \"#000000\";",
          "      const width = layerData.width ?? 100;",
          "      const height = layerData.height ?? 100;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:370:50",
      "file": "services/export/exportPipeline.ts",
      "line": 370,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "} else if (layer.type === \"text\" && layerData?.text) {",
      "context": {
        "before": [
          "      const width = layerData.width ?? 100;",
          "      const height = layerData.height ?? 100;",
          "      ctx.fillRect(-width / 2, -height / 2, width, height);"
        ],
        "after": [
          "      // Render text with evaluated properties",
          "      const textContent = evaluated.properties.textContent ?? layerData.text;",
          "      const fontSize ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:617:4",
      "file": "services/export/exportPipeline.ts",
      "line": 617,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    data: Uint8ClampedArray,",
          "    width: number,",
          "    height: number,"
        ],
        "after": [
          "    const grayscale = new Float32Array(width * height);",
          "",
          "    // Convert to grayscale"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:664:48",
      "file": "services/export/exportPipeline.ts",
      "line": 664,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyLineart(data: Uint8ClampedArray): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    for (let i = 0; i < data.length; i += 4) {",
          "      const gray = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114;",
          "      const val = gray > 128 ? 255 : 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/exportPipeline.ts:678:4",
      "file": "services/export/exportPipeline.ts",
      "line": 678,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    data: Uint8ClampedArray,",
          "    width: number,",
          "    height: number,"
        ],
        "after": [
          "    // Similar to edge detection but with Gaussian blur",
          "    this.applyEdgeDetection(data, width, height);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/frameSequenceExporter.ts:137:59",
      "file": "services/export/frameSequenceExporter.ts",
      "line": 137,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function downloadBlob(blob: Blob, filename: string): void {",
      "context": {
        "before": [
          "/**",
          " * Download a blob as a file",
          " */"
        ],
        "after": [
          "  const url = URL.createObjectURL(blob);",
          "  const a = document.createElement(\"a\");",
          "  a.href = url;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/frameSequenceExporter.ts:282:21",
      "file": "services/export/frameSequenceExporter.ts",
      "line": 282,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(frame - startFrame + 1, totalFrames);",
      "context": {
        "before": [
          "          });",
          "",
          "          result.totalSize += blob.size;"
        ],
        "after": [
          "        } catch (error) {",
          "          result.errors.push(`Frame ${frame}: ${error}`);",
          "        }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/frameSequenceExporter.ts:298:21",
      "file": "services/export/frameSequenceExporter.ts",
      "line": 298,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(frame - startFrame + 1, totalFrames);",
      "context": {
        "before": [
          "        try {",
          "          const canvas = await renderFrame(frame);",
          "          frames.push({ canvas, frameNumber: frame });"
        ],
        "after": [
          "        } catch (error) {",
          "          result.errors.push(`Frame ${frame}: ${error}`);",
          "        }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/meshDeformExport.ts:248:2",
      "file": "services/export/meshDeformExport.ts",
      "line": 248,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  cx: number,",
          "  cy: number,",
          "  depthValue: number,"
        ],
        "after": [
          "  // Calculate bounding box",
          "  const minX = Math.max(0, Math.floor(Math.min(ax, bx, cx)));",
          "  const maxX = Math.min(width - 1, Math.ceil(Math.max(ax, bx, cx)));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/meshDeformExport.ts:371:2",
      "file": "services/export/meshDeformExport.ts",
      "line": 371,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  by: number,",
          "  cx: number,",
          "  cy: number,"
        ],
        "after": [
          "  // Calculate bounding box",
          "  const minX = Math.max(0, Math.floor(Math.min(ax, bx, cx)));",
          "  const maxX = Math.min(width - 1, Math.ceil(Math.max(ax, bx, cx)));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/meshDeformExport.ts:445:2",
      "file": "services/export/meshDeformExport.ts",
      "line": 445,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  by: number,",
          "  cx: number,",
          "  cy: number,"
        ],
        "after": [
          "  const minX = Math.max(0, Math.floor(Math.min(ax, bx, cx)));",
          "  const maxX = Math.min(width - 1, Math.ceil(Math.max(ax, bx, cx)));",
          "  const minY = Math.max(0, Math.floor(Math.min(ay, by, cy)));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/poseExport.ts:129:2",
      "file": "services/export/poseExport.ts",
      "line": 129,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  ctx: CanvasRenderingContext2D,",
          "  pose: Pose,",
          "  config: PoseExportConfig,"
        ],
        "after": [
          "  const { keypoints } = pose;",
          "  const { width, height } = config;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:163:22",
      "file": "services/export/vaceControlExport.ts",
      "line": 163,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private buildPath(): void {",
      "context": {
        "before": [
          "    this.buildPath();",
          "  }",
          ""
        ],
        "after": [
          "    const { controlPoints, closed } = this.config;",
          "",
          "    if (controlPoints.length < 2) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:183:34",
      "file": "services/export/vaceControlExport.ts",
      "line": 183,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: p0.x + (p0.handleOut?.x || 0),",
      "context": {
        "before": [
          "      const curve = createBezierCurve(",
          "        { x: p0.x, y: p0.y, z: p0.z || 0 },",
          "        {"
        ],
        "after": [
          "          y: p0.y + (p0.handleOut?.y || 0),",
          "          z: (p0.z || 0) + (p0.handleOut?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:184:34",
      "file": "services/export/vaceControlExport.ts",
      "line": 184,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: p0.y + (p0.handleOut?.y || 0),",
      "context": {
        "before": [
          "        { x: p0.x, y: p0.y, z: p0.z || 0 },",
          "        {",
          "          x: p0.x + (p0.handleOut?.x || 0),"
        ],
        "after": [
          "          z: (p0.z || 0) + (p0.handleOut?.z || 0),",
          "        },",
          "        {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:185:41",
      "file": "services/export/vaceControlExport.ts",
      "line": 185,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: (p0.z || 0) + (p0.handleOut?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: p0.x + (p0.handleOut?.x || 0),",
          "          y: p0.y + (p0.handleOut?.y || 0),"
        ],
        "after": [
          "        },",
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:188:33",
      "file": "services/export/vaceControlExport.ts",
      "line": 188,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: p1.x + (p1.handleIn?.x || 0),",
      "context": {
        "before": [
          "          z: (p0.z || 0) + (p0.handleOut?.z || 0),",
          "        },",
          "        {"
        ],
        "after": [
          "          y: p1.y + (p1.handleIn?.y || 0),",
          "          z: (p1.z || 0) + (p1.handleIn?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:189:33",
      "file": "services/export/vaceControlExport.ts",
      "line": 189,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: p1.y + (p1.handleIn?.y || 0),",
      "context": {
        "before": [
          "        },",
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),"
        ],
        "after": [
          "          z: (p1.z || 0) + (p1.handleIn?.z || 0),",
          "        },",
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:190:40",
      "file": "services/export/vaceControlExport.ts",
      "line": 190,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: (p1.z || 0) + (p1.handleIn?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: p1.x + (p1.handleIn?.x || 0),",
          "          y: p1.y + (p1.handleIn?.y || 0),"
        ],
        "after": [
          "        },",
          "        { x: p1.x, y: p1.y, z: p1.z || 0 },",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:206:38",
      "file": "services/export/vaceControlExport.ts",
      "line": 206,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: last.x + (last.handleOut?.x || 0),",
      "context": {
        "before": [
          "      const closingCurve = createBezierCurve(",
          "        { x: last.x, y: last.y, z: last.z || 0 },",
          "        {"
        ],
        "after": [
          "          y: last.y + (last.handleOut?.y || 0),",
          "          z: (last.z || 0) + (last.handleOut?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:207:38",
      "file": "services/export/vaceControlExport.ts",
      "line": 207,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: last.y + (last.handleOut?.y || 0),",
      "context": {
        "before": [
          "        { x: last.x, y: last.y, z: last.z || 0 },",
          "        {",
          "          x: last.x + (last.handleOut?.x || 0),"
        ],
        "after": [
          "          z: (last.z || 0) + (last.handleOut?.z || 0),",
          "        },",
          "        {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:208:45",
      "file": "services/export/vaceControlExport.ts",
      "line": 208,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: (last.z || 0) + (last.handleOut?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: last.x + (last.handleOut?.x || 0),",
          "          y: last.y + (last.handleOut?.y || 0),"
        ],
        "after": [
          "        },",
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:211:39",
      "file": "services/export/vaceControlExport.ts",
      "line": 211,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: first.x + (first.handleIn?.x || 0),",
      "context": {
        "before": [
          "          z: (last.z || 0) + (last.handleOut?.z || 0),",
          "        },",
          "        {"
        ],
        "after": [
          "          y: first.y + (first.handleIn?.y || 0),",
          "          z: (first.z || 0) + (first.handleIn?.z || 0),",
          "        },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:212:39",
      "file": "services/export/vaceControlExport.ts",
      "line": 212,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: first.y + (first.handleIn?.y || 0),",
      "context": {
        "before": [
          "        },",
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),"
        ],
        "after": [
          "          z: (first.z || 0) + (first.handleIn?.z || 0),",
          "        },",
          "        { x: first.x, y: first.y, z: first.z || 0 },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:213:46",
      "file": "services/export/vaceControlExport.ts",
      "line": 213,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: (first.z || 0) + (first.handleIn?.z || 0),",
      "context": {
        "before": [
          "        {",
          "          x: first.x + (first.handleIn?.x || 0),",
          "          y: first.y + (first.handleIn?.y || 0),"
        ],
        "after": [
          "        },",
          "        { x: first.x, y: first.y, z: first.z || 0 },",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:346:2",
      "file": "services/export/vaceControlExport.ts",
      "line": 346,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  ctx: CanvasRenderingContext2D,",
          "  state: PathFollowerState,",
          "  config: PathFollowerConfig,"
        ],
        "after": [
          "  if (!state.visible || state.opacity <= 0) return;",
          "",
          "  const { shape, size, fillColor, strokeColor, strokeWidth } = config;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/vaceControlExport.ts:436:32",
      "file": "services/export/vaceControlExport.ts",
      "line": 436,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeFollowers(): void {",
      "context": {
        "before": [
          "    this.initializeFollowers();",
          "  }",
          ""
        ],
        "after": [
          "    this.pathFollowers = this.config.pathFollowers.map(",
          "      (followerConfig) => new PathFollower(followerConfig),",
          "    );"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/videoEncoder.ts:279:11",
      "file": "services/export/videoEncoder.ts",
      "line": 279,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cancel(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Cancel encoding",
          "   */"
        ],
        "after": [
          "    if (this.encoder) {",
          "      this.encoder.close();",
          "      this.encoder = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/videoEncoder.ts:295:4",
      "file": "services/export/videoEncoder.ts",
      "line": 295,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private handleChunk(",
          "    chunk: EncodedVideoChunk,",
          "    metadata?: EncodedVideoChunkMetadata,"
        ],
        "after": [
          "    // Pass chunk to the appropriate muxer",
          "    if (this.mp4Muxer) {",
          "      this.mp4Muxer.addVideoChunk(chunk, metadata);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/videoEncoder.ts:389:69",
      "file": "services/export/videoEncoder.ts",
      "line": 389,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function downloadVideo(video: EncodedVideo, filename: string): void {",
      "context": {
        "before": [
          "/**",
          " * Download encoded video",
          " */"
        ],
        "after": [
          "  const extension = video.mimeType.includes(\"webm\") ? \"webm\" : \"mp4\";",
          "  const fullFilename = filename.includes(\".\")",
          "    ? filename"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:461:42",
      "file": "services/export/wanMoveExport.ts",
      "line": 461,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transposedVis[f][n] = visibility[n]?.[f] ?? true;",
      "context": {
        "before": [
          "  for (let f = 0; f < numFrames; f++) {",
          "    transposedVis[f] = [];",
          "    for (let n = 0; n < numPoints; n++) {"
        ],
        "after": [
          "    }",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/export/wanMoveExport.ts:1548:2",
      "file": "services/export/wanMoveExport.ts",
      "line": 1548,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  trajectory: WanMoveTrajectory | ColoredTrajectory,",
          "  frame: number,",
          "  options: RenderOptions = {},"
        ],
        "after": [
          "  const {",
          "    background = \"#0a0a0a\",",
          "    showTrails = true,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/exportTemplates.ts:136:26",
      "file": "services/exportTemplates.ts",
      "line": 136,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private saveToStorage(): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    try {",
          "      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.store));",
          "    } catch (e) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/exportTemplates.ts:250:26",
      "file": "services/exportTemplates.ts",
      "line": 250,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLastUsed(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Mark a template as last used",
          "   */"
        ],
        "after": [
          "    if (this.getTemplate(id)) {",
          "      this.store.lastUsedTemplateId = id;",
          "      this.saveToStorage();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/exportTemplates.ts:320:20",
      "file": "services/exportTemplates.ts",
      "line": 320,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetToDefaults(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset to default templates only",
          "   */"
        ],
        "after": [
          "    this.store = {",
          "      templates: [...DEFAULT_TEMPLATES],",
          "    };"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/expressions/audioExpressions.ts:110:15",
      "file": "services/expressions/audioExpressions.ts",
      "line": 110,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(framesPerSecond) || framesPerSecond <= 0) {",
      "context": {
        "before": [
          "  const { time } = ctx;",
          "",
          "  // Guard against invalid framesPerSecond (prevents division by zero)"
        ],
        "after": [
          "    return time; // Passthrough: return original time unchanged",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/easing.ts:23:15",
      "file": "services/expressions/easing.ts",
      "line": 23,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(t)) return 0;",
      "context": {
        "before": [
          " * Normalize easing input: clamp to [0,1] range, return 0 for invalid",
          " */",
          "function normalizeT(t: number): number {"
        ],
        "after": [
          "  return Math.max(0, Math.min(1, t));",
          "}",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/easing.ts:226:15",
      "file": "services/expressions/easing.ts",
      "line": 226,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(rawT)) return 0;",
      "context": {
        "before": [
          "",
          "// Step functions",
          "export const stepStart: EasingFunction = (rawT) => {"
        ],
        "after": [
          "  return rawT <= 0 ? 0 : 1;",
          "};",
          "export const stepEnd: EasingFunction = (rawT) => {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/easing.ts:230:15",
      "file": "services/expressions/easing.ts",
      "line": 230,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(rawT)) return 0;",
      "context": {
        "before": [
          "  return rawT <= 0 ? 0 : 1;",
          "};",
          "export const stepEnd: EasingFunction = (rawT) => {"
        ],
        "after": [
          "  return rawT >= 1 ? 1 : 0;",
          "};",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/easing.ts:249:25",
      "file": "services/expressions/easing.ts",
      "line": 249,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeX1 = Number.isFinite(x1) ? Math.max(0, Math.min(1, x1)) : 0;",
      "context": {
        "before": [
          "  y2: number,",
          "): EasingFunction {",
          "  // Validate and clamp control points (CSS spec: x values must be in [0,1])"
        ],
        "after": [
          "  const safeY1 = Number.isFinite(y1) ? y1 : 0;",
          "  const safeX2 = Number.isFinite(x2) ? Math.max(0, Math.min(1, x2)) : 1;",
          "  const safeY2 = Number.isFinite(y2) ? y2 : 1;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/easing.ts:250:25",
      "file": "services/expressions/easing.ts",
      "line": 250,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeY1 = Number.isFinite(y1) ? y1 : 0;",
      "context": {
        "before": [
          "): EasingFunction {",
          "  // Validate and clamp control points (CSS spec: x values must be in [0,1])",
          "  const safeX1 = Number.isFinite(x1) ? Math.max(0, Math.min(1, x1)) : 0;"
        ],
        "after": [
          "  const safeX2 = Number.isFinite(x2) ? Math.max(0, Math.min(1, x2)) : 1;",
          "  const safeY2 = Number.isFinite(y2) ? y2 : 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/easing.ts:251:25",
      "file": "services/expressions/easing.ts",
      "line": 251,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeX2 = Number.isFinite(x2) ? Math.max(0, Math.min(1, x2)) : 1;",
      "context": {
        "before": [
          "  // Validate and clamp control points (CSS spec: x values must be in [0,1])",
          "  const safeX1 = Number.isFinite(x1) ? Math.max(0, Math.min(1, x1)) : 0;",
          "  const safeY1 = Number.isFinite(y1) ? y1 : 0;"
        ],
        "after": [
          "  const safeY2 = Number.isFinite(y2) ? y2 : 1;",
          "",
          "  const epsilon = 1e-6;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/easing.ts:252:25",
      "file": "services/expressions/easing.ts",
      "line": 252,
      "column": 25,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeY2 = Number.isFinite(y2) ? y2 : 1;",
      "context": {
        "before": [
          "  const safeX1 = Number.isFinite(x1) ? Math.max(0, Math.min(1, x1)) : 0;",
          "  const safeY1 = Number.isFinite(y1) ? y1 : 0;",
          "  const safeX2 = Number.isFinite(x2) ? Math.max(0, Math.min(1, x2)) : 1;"
        ],
        "after": [
          "",
          "  const epsilon = 1e-6;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:58:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 58,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(duration) || duration === 0) return startValue;",
      "context": {
        "before": [
          "    if (time <= startTime) return startValue;",
          "    if (time >= endTime) return endValue;",
          "    const duration = endTime - startTime;"
        ],
        "after": [
          "    const t = (time - startTime) / duration;",
          "    return startValue + (endValue - startValue) * t;",
          "  },"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:64:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 64,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(period) || period === 0) return 0;",
      "context": {
        "before": [
          "  },",
          "",
          "  periodic(time: number, period: number): number {"
        ],
        "after": [
          "    return (time % period) / period;",
          "  },",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:70:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 70,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(time) ||",
      "context": {
        "before": [
          "",
          "  sawtooth(time: number, frequency: number, amplitude: number = 1): number {",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(frequency) ||",
          "      !Number.isFinite(amplitude)",
          "    )"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:71:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 71,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(frequency) ||",
      "context": {
        "before": [
          "  sawtooth(time: number, frequency: number, amplitude: number = 1): number {",
          "    if (",
          "      !Number.isFinite(time) ||"
        ],
        "after": [
          "      !Number.isFinite(amplitude)",
          "    )",
          "      return 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:72:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 72,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(amplitude)",
      "context": {
        "before": [
          "    if (",
          "      !Number.isFinite(time) ||",
          "      !Number.isFinite(frequency) ||"
        ],
        "after": [
          "    )",
          "      return 0;",
          "    const t = time * frequency;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:81:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 81,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(time) ||",
      "context": {
        "before": [
          "",
          "  triangle(time: number, frequency: number, amplitude: number = 1): number {",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(frequency) ||",
          "      !Number.isFinite(amplitude)",
          "    )"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:82:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 82,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(frequency) ||",
      "context": {
        "before": [
          "  triangle(time: number, frequency: number, amplitude: number = 1): number {",
          "    if (",
          "      !Number.isFinite(time) ||"
        ],
        "after": [
          "      !Number.isFinite(amplitude)",
          "    )",
          "      return 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:83:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 83,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(amplitude)",
      "context": {
        "before": [
          "    if (",
          "      !Number.isFinite(time) ||",
          "      !Number.isFinite(frequency) ||"
        ],
        "after": [
          "    )",
          "      return 0;",
          "    const t = time * frequency;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:92:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 92,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(time) ||",
      "context": {
        "before": [
          "",
          "  square(time: number, frequency: number, amplitude: number = 1): number {",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(frequency) ||",
          "      !Number.isFinite(amplitude)",
          "    )"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:93:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 93,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(frequency) ||",
      "context": {
        "before": [
          "  square(time: number, frequency: number, amplitude: number = 1): number {",
          "    if (",
          "      !Number.isFinite(time) ||"
        ],
        "after": [
          "      !Number.isFinite(amplitude)",
          "    )",
          "      return 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:94:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 94,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(amplitude)",
      "context": {
        "before": [
          "    if (",
          "      !Number.isFinite(time) ||",
          "      !Number.isFinite(frequency) ||"
        ],
        "after": [
          "    )",
          "      return 0;",
          "    const t = time * frequency;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:142:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 142,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(range) || range === 0) return outMin;",
      "context": {
        "before": [
          "    outMax: number,",
          "  ): number {",
          "    const range = inMax - inMin;"
        ],
        "after": [
          "    return outMin + (outMax - outMin) * ((value - inMin) / range);",
          "  },",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:148:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 148,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(range) || range === 0) return 0;",
      "context": {
        "before": [
          "",
          "  normalize(value: number, min: number, max: number): number {",
          "    const range = max - min;"
        ],
        "after": [
          "    return (value - min) / range;",
          "  },",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:154:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 154,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(range) || range === 0) {",
      "context": {
        "before": [
          "",
          "  smoothstep(edge0: number, edge1: number, x: number): number {",
          "    const range = edge1 - edge0;"
        ],
        "after": [
          "      return x < edge0 ? 0 : 1;",
          "    }",
          "    const t = mathExpressions.clamp((x - edge0) / range, 0, 1);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:163:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 163,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(range) || range === 0) {",
      "context": {
        "before": [
          "",
          "  smootherstep(edge0: number, edge1: number, x: number): number {",
          "    const range = edge1 - edge0;"
        ],
        "after": [
          "      return x < edge0 ? 0 : 1;",
          "    }",
          "    const t = mathExpressions.clamp((x - edge0) / range, 0, 1);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:171:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 171,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(b) || b === 0) return 0;",
      "context": {
        "before": [
          "  },",
          "",
          "  mod(a: number, b: number): number {"
        ],
        "after": [
          "    if (!Number.isFinite(a)) return 0;",
          "    return ((a % b) + b) % b;",
          "  },"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:172:17",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 172,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(a)) return 0;",
      "context": {
        "before": [
          "",
          "  mod(a: number, b: number): number {",
          "    if (!Number.isFinite(b) || b === 0) return 0;"
        ],
        "after": [
          "    return ((a % b) + b) % b;",
          "  },",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:206:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 206,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(mean) ||",
      "context": {
        "before": [
          "    seed: number = 12345,",
          "  ): number {",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(stdDev) ||",
          "      !Number.isFinite(seed)",
          "    ) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:207:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 207,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(stdDev) ||",
      "context": {
        "before": [
          "  ): number {",
          "    if (",
          "      !Number.isFinite(mean) ||"
        ],
        "after": [
          "      !Number.isFinite(seed)",
          "    ) {",
          "      return 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:208:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 208,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(seed)",
      "context": {
        "before": [
          "    if (",
          "      !Number.isFinite(mean) ||",
          "      !Number.isFinite(stdDev) ||"
        ],
        "after": [
          "    ) {",
          "      return 0;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:217:23",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 217,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const u1 = Number.isFinite(u1Raw) ? Math.max(0.0001, u1Raw) : 0.0001;",
      "context": {
        "before": [
          "      return x - Math.floor(x);",
          "    };",
          "    const u1Raw = seededRand(seed);"
        ],
        "after": [
          "    const u2Raw = seededRand(seed + 1);",
          "    const u2 = Number.isFinite(u2Raw) ? u2Raw : 0;",
          "    const z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:219:23",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 219,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const u2 = Number.isFinite(u2Raw) ? u2Raw : 0;",
      "context": {
        "before": [
          "    const u1Raw = seededRand(seed);",
          "    const u1 = Number.isFinite(u1Raw) ? Math.max(0.0001, u1Raw) : 0.0001;",
          "    const u2Raw = seededRand(seed + 1);"
        ],
        "after": [
          "    const z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);",
          "    return mean + z0 * stdDev;",
          "  },"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:242:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 242,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(range) || range === 0) {",
      "context": {
        "before": [
          "): number | number[] {",
          "  const range = tMax - tMin;",
          "  let normalized: number;"
        ],
        "after": [
          "    normalized = t < tMin ? 0 : 1;",
          "  } else {",
          "    normalized = (t - tMin) / range;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:273:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 273,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(range) || range === 0) {",
      "context": {
        "before": [
          "): number | number[] {",
          "  const range = tMax - tMin;",
          "  let normalized: number;"
        ],
        "after": [
          "    normalized = t < tMin ? 0 : 1;",
          "  } else {",
          "    normalized = (t - tMin) / range;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:301:15",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 301,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(range) || range === 0) {",
      "context": {
        "before": [
          "): number | number[] {",
          "  const range = tMax - tMin;",
          "  let normalized: number;"
        ],
        "after": [
          "    normalized = t < tMin ? 0 : 1;",
          "  } else {",
          "    normalized = (t - tMin) / range;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:471:22",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 471,
      "column": 22,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const fps = Number.isFinite(ctx.fps) && ctx.fps > 0 ? ctx.fps : 30;",
      "context": {
        "before": [
          "",
          "// Helper to create thisComp object",
          "function _createThisCompObject(ctx: ExpressionContext) {"
        ],
        "after": [
          "  const duration = Number.isFinite(ctx.duration) ? ctx.duration : 0;",
          "",
          "  return {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:472:27",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 472,
      "column": 27,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const duration = Number.isFinite(ctx.duration) ? ctx.duration : 0;",
      "context": {
        "before": [
          "// Helper to create thisComp object",
          "function _createThisCompObject(ctx: ExpressionContext) {",
          "  const fps = Number.isFinite(ctx.fps) && ctx.fps > 0 ? ctx.fps : 30;"
        ],
        "after": [
          "",
          "  return {",
          "    duration: duration,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:479:29",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 479,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "numLayers: ctx.allLayers?.length ?? 0,",
      "context": {
        "before": [
          "    frameDuration: 1 / fps,",
          "    width: ctx.compWidth ?? 1920,",
          "    height: ctx.compHeight ?? 1080,"
        ],
        "after": [
          "    layer: (nameOrIndex: string | number) => {",
          "      const getLayerProperty = ctx.getLayerProperty;",
          "      const getLayerEffectParam = ctx.getLayerEffectParam;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:486:40",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 486,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerInfo = ctx.allLayers?.find((l) => l.index === nameOrIndex);",
      "context": {
        "before": [
          "      let layerId: string;",
          "",
          "      if (typeof nameOrIndex === \"number\") {"
        ],
        "after": [
          "        layerId = layerInfo?.id ?? `layer_${nameOrIndex}`;",
          "      } else {",
          "        const layerInfo = ctx.allLayers?.find((l) => l.name === nameOrIndex);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:487:28",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 487,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layerId = layerInfo?.id ?? `layer_${nameOrIndex}`;",
      "context": {
        "before": [
          "",
          "      if (typeof nameOrIndex === \"number\") {",
          "        const layerInfo = ctx.allLayers?.find((l) => l.index === nameOrIndex);"
        ],
        "after": [
          "      } else {",
          "        const layerInfo = ctx.allLayers?.find((l) => l.name === nameOrIndex);",
          "        layerId = layerInfo?.id ?? nameOrIndex;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:489:40",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 489,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerInfo = ctx.allLayers?.find((l) => l.name === nameOrIndex);",
      "context": {
        "before": [
          "        const layerInfo = ctx.allLayers?.find((l) => l.index === nameOrIndex);",
          "        layerId = layerInfo?.id ?? `layer_${nameOrIndex}`;",
          "      } else {"
        ],
        "after": [
          "        layerId = layerInfo?.id ?? nameOrIndex;",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:490:28",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 490,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layerId = layerInfo?.id ?? nameOrIndex;",
      "context": {
        "before": [
          "        layerId = layerInfo?.id ?? `layer_${nameOrIndex}`;",
          "      } else {",
          "        const layerInfo = ctx.allLayers?.find((l) => l.name === nameOrIndex);"
        ],
        "after": [
          "      }",
          "",
          "      const getTransform = (): LayerTransform => ({"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:494:36",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 494,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: (getLayerProperty?.(",
      "context": {
        "before": [
          "      }",
          "",
          "      const getTransform = (): LayerTransform => ({"
        ],
        "after": [
          "          layerId,",
          "          \"transform.position\",",
          "        ) as number[]) ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:498:33",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 498,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: (getLayerProperty?.(layerId, \"transform.scale\") as number[]) ?? [",
      "context": {
        "before": [
          "          layerId,",
          "          \"transform.position\",",
          "        ) as number[]) ?? [0, 0, 0],"
        ],
        "after": [
          "          100, 100, 100,",
          "        ],",
          "        rotation: (getLayerProperty?.("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:501:36",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 501,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: (getLayerProperty?.(",
      "context": {
        "before": [
          "        scale: (getLayerProperty?.(layerId, \"transform.scale\") as number[]) ?? [",
          "          100, 100, 100,",
          "        ],"
        ],
        "after": [
          "          layerId,",
          "          \"transform.rotation\",",
          "        ) as number[]) ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:505:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 505,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchor: (getLayerProperty?.(",
      "context": {
        "before": [
          "          layerId,",
          "          \"transform.rotation\",",
          "        ) as number[]) ?? [0, 0, 0],"
        ],
        "after": [
          "          layerId,",
          "          \"transform.anchorPoint\",",
          "        ) as number[]) ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:513:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 513,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return getLayerEffectParam?.(layerId, effectName, paramName) ?? 0;",
      "context": {
        "before": [
          "",
          "      const createEffectAccessor = (effectName: string) => {",
          "        const accessor = (paramName: string) => {"
        ],
        "after": [
          "        };",
          "        accessor.param = accessor;",
          "        // Slider Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:518:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 518,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"value\") ?? 0;",
      "context": {
        "before": [
          "        accessor.param = accessor;",
          "        // Slider Control",
          "        accessor.value ="
        ],
        "after": [
          "        accessor.slider =",
          "          getLayerEffectParam?.(layerId, effectName, \"slider\") ??",
          "          getLayerEffectParam?.(layerId, effectName, \"Slider\") ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:520:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 520,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"slider\") ??",
      "context": {
        "before": [
          "        accessor.value =",
          "          getLayerEffectParam?.(layerId, effectName, \"value\") ?? 0;",
          "        accessor.slider ="
        ],
        "after": [
          "          getLayerEffectParam?.(layerId, effectName, \"Slider\") ??",
          "          0;",
          "        // Angle Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:521:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 521,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"Slider\") ??",
      "context": {
        "before": [
          "          getLayerEffectParam?.(layerId, effectName, \"value\") ?? 0;",
          "        accessor.slider =",
          "          getLayerEffectParam?.(layerId, effectName, \"slider\") ??"
        ],
        "after": [
          "          0;",
          "        // Angle Control",
          "        accessor.angle ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:525:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 525,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"angle\") ??",
      "context": {
        "before": [
          "          0;",
          "        // Angle Control",
          "        accessor.angle ="
        ],
        "after": [
          "          getLayerEffectParam?.(layerId, effectName, \"Angle\") ??",
          "          0;",
          "        // Checkbox Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:526:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 526,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"Angle\") ??",
      "context": {
        "before": [
          "        // Angle Control",
          "        accessor.angle =",
          "          getLayerEffectParam?.(layerId, effectName, \"angle\") ??"
        ],
        "after": [
          "          0;",
          "        // Checkbox Control",
          "        accessor.checkbox ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:530:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 530,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"checkbox\") ??",
      "context": {
        "before": [
          "          0;",
          "        // Checkbox Control",
          "        accessor.checkbox ="
        ],
        "after": [
          "          getLayerEffectParam?.(layerId, effectName, \"Checkbox\") ??",
          "          false;",
          "        // Color Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:531:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 531,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"Checkbox\") ??",
      "context": {
        "before": [
          "        // Checkbox Control",
          "        accessor.checkbox =",
          "          getLayerEffectParam?.(layerId, effectName, \"checkbox\") ??"
        ],
        "after": [
          "          false;",
          "        // Color Control",
          "        accessor.color = getLayerEffectParam?.(layerId, effectName, \"color\") ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:534:45",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 534,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.color = getLayerEffectParam?.(layerId, effectName, \"color\") ??",
      "context": {
        "before": [
          "          getLayerEffectParam?.(layerId, effectName, \"Checkbox\") ??",
          "          false;",
          "        // Color Control"
        ],
        "after": [
          "          getLayerEffectParam?.(layerId, effectName, \"Color\") ?? [1, 1, 1, 1];",
          "        // Point Control (2D and 3D)",
          "        accessor.point = getLayerEffectParam?.(layerId, effectName, \"point\") ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:535:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 535,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"Color\") ?? [1, 1, 1, 1];",
      "context": {
        "before": [
          "          false;",
          "        // Color Control",
          "        accessor.color = getLayerEffectParam?.(layerId, effectName, \"color\") ??"
        ],
        "after": [
          "        // Point Control (2D and 3D)",
          "        accessor.point = getLayerEffectParam?.(layerId, effectName, \"point\") ??",
          "          getLayerEffectParam?.(layerId, effectName, \"Point\") ?? [0, 0];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:537:45",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 537,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.point = getLayerEffectParam?.(layerId, effectName, \"point\") ??",
      "context": {
        "before": [
          "        accessor.color = getLayerEffectParam?.(layerId, effectName, \"color\") ??",
          "          getLayerEffectParam?.(layerId, effectName, \"Color\") ?? [1, 1, 1, 1];",
          "        // Point Control (2D and 3D)"
        ],
        "after": [
          "          getLayerEffectParam?.(layerId, effectName, \"Point\") ?? [0, 0];",
          "        accessor.point3D = getLayerEffectParam?.(",
          "          layerId,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:538:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 538,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"Point\") ?? [0, 0];",
      "context": {
        "before": [
          "          getLayerEffectParam?.(layerId, effectName, \"Color\") ?? [1, 1, 1, 1];",
          "        // Point Control (2D and 3D)",
          "        accessor.point = getLayerEffectParam?.(layerId, effectName, \"point\") ??"
        ],
        "after": [
          "        accessor.point3D = getLayerEffectParam?.(",
          "          layerId,",
          "          effectName,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:539:47",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 539,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.point3D = getLayerEffectParam?.(",
      "context": {
        "before": [
          "        // Point Control (2D and 3D)",
          "        accessor.point = getLayerEffectParam?.(layerId, effectName, \"point\") ??",
          "          getLayerEffectParam?.(layerId, effectName, \"Point\") ?? [0, 0];"
        ],
        "after": [
          "          layerId,",
          "          effectName,",
          "          \"point3D\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:544:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 544,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"3D Point\") ?? [0, 0, 0];",
      "context": {
        "before": [
          "          effectName,",
          "          \"point3D\",",
          "        ) ??"
        ],
        "after": [
          "        // Dropdown Menu Control",
          "        accessor.menu =",
          "          getLayerEffectParam?.(layerId, effectName, \"menu\") ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:547:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 547,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"menu\") ??",
      "context": {
        "before": [
          "          getLayerEffectParam?.(layerId, effectName, \"3D Point\") ?? [0, 0, 0];",
          "        // Dropdown Menu Control",
          "        accessor.menu ="
        ],
        "after": [
          "          getLayerEffectParam?.(layerId, effectName, \"Menu\") ??",
          "          1;",
          "        // Layer Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:548:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 548,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"Menu\") ??",
      "context": {
        "before": [
          "        // Dropdown Menu Control",
          "        accessor.menu =",
          "          getLayerEffectParam?.(layerId, effectName, \"menu\") ??"
        ],
        "after": [
          "          1;",
          "        // Layer Control",
          "        accessor.layer ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:552:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 552,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"layer\") ??",
      "context": {
        "before": [
          "          1;",
          "        // Layer Control",
          "        accessor.layer ="
        ],
        "after": [
          "          getLayerEffectParam?.(layerId, effectName, \"Layer\") ??",
          "          null;",
          "        return accessor;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:553:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 553,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayerEffectParam?.(layerId, effectName, \"Layer\") ??",
      "context": {
        "before": [
          "        // Layer Control",
          "        accessor.layer =",
          "          getLayerEffectParam?.(layerId, effectName, \"layer\") ??"
        ],
        "after": [
          "          null;",
          "        return accessor;",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:559:28",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 559,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "name: ctx.allLayers?.find((l) => l.id === layerId)?.name ?? \"\",",
      "context": {
        "before": [
          "      };",
          "",
          "      return {"
        ],
        "after": [
          "        index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:559:59",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 559,
      "column": 59,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "name: ctx.allLayers?.find((l) => l.id === layerId)?.name ?? \"\",",
      "context": {
        "before": [
          "      };",
          "",
          "      return {"
        ],
        "after": [
          "        index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:560:29",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 560,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
      "context": {
        "before": [
          "",
          "      return {",
          "        name: ctx.allLayers?.find((l) => l.id === layerId)?.name ?? \"\","
        ],
        "after": [
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],",
          "        rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:560:60",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 560,
      "column": 60,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
      "context": {
        "before": [
          "",
          "      return {",
          "        name: ctx.allLayers?.find((l) => l.id === layerId)?.name ?? \"\","
        ],
        "after": [
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],",
          "        rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:561:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 561,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
      "context": {
        "before": [
          "      return {",
          "        name: ctx.allLayers?.find((l) => l.id === layerId)?.name ?? \"\",",
          "        index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,"
        ],
        "after": [
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],",
          "        rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,",
          "        opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:562:32",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 562,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],",
      "context": {
        "before": [
          "        name: ctx.allLayers?.find((l) => l.id === layerId)?.name ?? \"\",",
          "        index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],"
        ],
        "after": [
          "        rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,",
          "        opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,",
          "        anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? ["
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:563:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 563,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,",
      "context": {
        "before": [
          "        index: ctx.allLayers?.find((l) => l.id === layerId)?.index ?? 0,",
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],"
        ],
        "after": [
          "        opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,",
          "        anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
          "          0, 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:564:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 564,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,",
      "context": {
        "before": [
          "        position: getLayerProperty?.(layerId, \"transform.position\") ?? [0, 0],",
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],",
          "        rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,"
        ],
        "after": [
          "        anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
          "          0, 0,",
          "        ],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:565:38",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 565,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
      "context": {
        "before": [
          "        scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [100, 100],",
          "        rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? 0,",
          "        opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,"
        ],
        "after": [
          "          0, 0,",
          "        ],",
          "        origin: getLayerProperty?.(layerId, \"transform.origin\") ?? [0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:568:33",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 568,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "origin: getLayerProperty?.(layerId, \"transform.origin\") ?? [0, 0],",
      "context": {
        "before": [
          "        anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
          "          0, 0,",
          "        ],"
        ],
        "after": [
          "        transform: {",
          "          position: getLayerProperty?.(layerId, \"transform.position\") ?? [",
          "            0, 0, 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:570:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 570,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: getLayerProperty?.(layerId, \"transform.position\") ?? [",
      "context": {
        "before": [
          "        ],",
          "        origin: getLayerProperty?.(layerId, \"transform.origin\") ?? [0, 0],",
          "        transform: {"
        ],
        "after": [
          "            0, 0, 0,",
          "          ],",
          "          rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? ["
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:573:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 573,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? [",
      "context": {
        "before": [
          "          position: getLayerProperty?.(layerId, \"transform.position\") ?? [",
          "            0, 0, 0,",
          "          ],"
        ],
        "after": [
          "            0, 0, 0,",
          "          ],",
          "          scale: getLayerProperty?.(layerId, \"transform.scale\") ?? ["
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:576:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 576,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [",
      "context": {
        "before": [
          "          rotation: getLayerProperty?.(layerId, \"transform.rotation\") ?? [",
          "            0, 0, 0,",
          "          ],"
        ],
        "after": [
          "            100, 100, 100,",
          "          ],",
          "          opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:579:36",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 579,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,",
      "context": {
        "before": [
          "          scale: getLayerProperty?.(layerId, \"transform.scale\") ?? [",
          "            100, 100, 100,",
          "          ],"
        ],
        "after": [
          "          anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
          "            0, 0, 0,",
          "          ],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:580:40",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 580,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
      "context": {
        "before": [
          "            100, 100, 100,",
          "          ],",
          "          opacity: getLayerProperty?.(layerId, \"transform.opacity\") ?? 100,"
        ],
        "after": [
          "            0, 0, 0,",
          "          ],",
          "          origin: getLayerProperty?.(layerId, \"transform.origin\") ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:583:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 583,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "origin: getLayerProperty?.(layerId, \"transform.origin\") ?? [0, 0, 0],",
      "context": {
        "before": [
          "          anchorPoint: getLayerProperty?.(layerId, \"transform.anchorPoint\") ?? [",
          "            0, 0, 0,",
          "          ],"
        ],
        "after": [
          "        },",
          "        toComp: (point: number[]) => toComp(point, getTransform()),",
          "        fromComp: (point: number[]) => fromComp(point, getTransform()),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:602:33",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 602,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: ctx.layerTransform?.position ?? [0, 0, 0],",
      "context": {
        "before": [
          "    index: ctx.layerIndex,",
          "    inPoint: ctx.inPoint,",
          "    outPoint: ctx.outPoint,"
        ],
        "after": [
          "    rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "    scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "    opacity: ctx.layerTransform?.opacity ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:603:33",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 603,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
      "context": {
        "before": [
          "    inPoint: ctx.inPoint,",
          "    outPoint: ctx.outPoint,",
          "    position: ctx.layerTransform?.position ?? [0, 0, 0],"
        ],
        "after": [
          "    scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "    opacity: ctx.layerTransform?.opacity ?? 100,",
          "    anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:604:30",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 604,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
      "context": {
        "before": [
          "    outPoint: ctx.outPoint,",
          "    position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "    rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],"
        ],
        "after": [
          "    opacity: ctx.layerTransform?.opacity ?? 100,",
          "    anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    origin: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:605:32",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 605,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "opacity: ctx.layerTransform?.opacity ?? 100,",
      "context": {
        "before": [
          "    position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "    rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "    scale: ctx.layerTransform?.scale ?? [100, 100, 100],"
        ],
        "after": [
          "    anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    transform: {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:606:36",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 606,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "    rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "    scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "    opacity: ctx.layerTransform?.opacity ?? 100,"
        ],
        "after": [
          "    origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    transform: {",
          "      position: ctx.layerTransform?.position ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:607:31",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 607,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "    scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "    opacity: ctx.layerTransform?.opacity ?? 100,",
          "    anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ],
        "after": [
          "    transform: {",
          "      position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "      rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:609:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 609,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: ctx.layerTransform?.position ?? [0, 0, 0],",
      "context": {
        "before": [
          "    anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    transform: {"
        ],
        "after": [
          "      rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "      scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "      opacity: ctx.layerTransform?.opacity ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:610:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 610,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
      "context": {
        "before": [
          "    origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    transform: {",
          "      position: ctx.layerTransform?.position ?? [0, 0, 0],"
        ],
        "after": [
          "      scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "      opacity: ctx.layerTransform?.opacity ?? 100,",
          "      anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:611:32",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 611,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
      "context": {
        "before": [
          "    transform: {",
          "      position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "      rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],"
        ],
        "after": [
          "      opacity: ctx.layerTransform?.opacity ?? 100,",
          "      anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      origin: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:612:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 612,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "opacity: ctx.layerTransform?.opacity ?? 100,",
      "context": {
        "before": [
          "      position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "      rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "      scale: ctx.layerTransform?.scale ?? [100, 100, 100],"
        ],
        "after": [
          "      anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:613:38",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 613,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "      rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "      scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "      opacity: ctx.layerTransform?.opacity ?? 100,"
        ],
        "after": [
          "      origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    },",
          "    effect: (effectName: string) => {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:614:33",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 614,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "      scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "      opacity: ctx.layerTransform?.opacity ?? 100,",
          "      anchorPoint: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ],
        "after": [
          "    },",
          "    effect: (effectName: string) => {",
          "      const eff = ctx.layerEffects?.find("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:617:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 617,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const eff = ctx.layerEffects?.find(",
      "context": {
        "before": [
          "      origin: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "    },",
          "    effect: (effectName: string) => {"
        ],
        "after": [
          "        (e) => e.name === effectName || e.effectKey === effectName,",
          "      );",
          "      const accessor = (paramName: string) => {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:626:27",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 626,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.value = eff?.parameters.value ?? 0;",
      "context": {
        "before": [
          "      };",
          "      accessor.param = accessor;",
          "      // Slider Control"
        ],
        "after": [
          "      accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
          "      // Angle Control",
          "      accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:627:28",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 627,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
      "context": {
        "before": [
          "      accessor.param = accessor;",
          "      // Slider Control",
          "      accessor.value = eff?.parameters.value ?? 0;"
        ],
        "after": [
          "      // Angle Control",
          "      accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
          "      // Checkbox Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:627:54",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 627,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
      "context": {
        "before": [
          "      accessor.param = accessor;",
          "      // Slider Control",
          "      accessor.value = eff?.parameters.value ?? 0;"
        ],
        "after": [
          "      // Angle Control",
          "      accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
          "      // Checkbox Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:629:27",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 629,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
      "context": {
        "before": [
          "      accessor.value = eff?.parameters.value ?? 0;",
          "      accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
          "      // Angle Control"
        ],
        "after": [
          "      // Checkbox Control",
          "      accessor.checkbox =",
          "        eff?.parameters.checkbox ?? eff?.parameters.Checkbox ?? false;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:629:52",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 629,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
      "context": {
        "before": [
          "      accessor.value = eff?.parameters.value ?? 0;",
          "      accessor.slider = eff?.parameters.slider ?? eff?.parameters.Slider ?? 0;",
          "      // Angle Control"
        ],
        "after": [
          "      // Checkbox Control",
          "      accessor.checkbox =",
          "        eff?.parameters.checkbox ?? eff?.parameters.Checkbox ?? false;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:632:12",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 632,
      "column": 12,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "eff?.parameters.checkbox ?? eff?.parameters.Checkbox ?? false;",
      "context": {
        "before": [
          "      accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
          "      // Checkbox Control",
          "      accessor.checkbox ="
        ],
        "after": [
          "      // Color Control",
          "      accessor.color = eff?.parameters.color ??",
          "        eff?.parameters.Color ?? [1, 1, 1, 1];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:632:40",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 632,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "eff?.parameters.checkbox ?? eff?.parameters.Checkbox ?? false;",
      "context": {
        "before": [
          "      accessor.angle = eff?.parameters.angle ?? eff?.parameters.Angle ?? 0;",
          "      // Checkbox Control",
          "      accessor.checkbox ="
        ],
        "after": [
          "      // Color Control",
          "      accessor.color = eff?.parameters.color ??",
          "        eff?.parameters.Color ?? [1, 1, 1, 1];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:634:27",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 634,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.color = eff?.parameters.color ??",
      "context": {
        "before": [
          "      accessor.checkbox =",
          "        eff?.parameters.checkbox ?? eff?.parameters.Checkbox ?? false;",
          "      // Color Control"
        ],
        "after": [
          "        eff?.parameters.Color ?? [1, 1, 1, 1];",
          "      // Point Control (2D and 3D)",
          "      accessor.point = eff?.parameters.point ?? eff?.parameters.Point ?? [0, 0];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:635:12",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 635,
      "column": 12,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "eff?.parameters.Color ?? [1, 1, 1, 1];",
      "context": {
        "before": [
          "        eff?.parameters.checkbox ?? eff?.parameters.Checkbox ?? false;",
          "      // Color Control",
          "      accessor.color = eff?.parameters.color ??"
        ],
        "after": [
          "      // Point Control (2D and 3D)",
          "      accessor.point = eff?.parameters.point ?? eff?.parameters.Point ?? [0, 0];",
          "      accessor.point3D = eff?.parameters.point3D ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:637:27",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 637,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.point = eff?.parameters.point ?? eff?.parameters.Point ?? [0, 0];",
      "context": {
        "before": [
          "      accessor.color = eff?.parameters.color ??",
          "        eff?.parameters.Color ?? [1, 1, 1, 1];",
          "      // Point Control (2D and 3D)"
        ],
        "after": [
          "      accessor.point3D = eff?.parameters.point3D ??",
          "        eff?.parameters[\"3D Point\"] ?? [0, 0, 0];",
          "      // Dropdown Menu Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:637:52",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 637,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.point = eff?.parameters.point ?? eff?.parameters.Point ?? [0, 0];",
      "context": {
        "before": [
          "      accessor.color = eff?.parameters.color ??",
          "        eff?.parameters.Color ?? [1, 1, 1, 1];",
          "      // Point Control (2D and 3D)"
        ],
        "after": [
          "      accessor.point3D = eff?.parameters.point3D ??",
          "        eff?.parameters[\"3D Point\"] ?? [0, 0, 0];",
          "      // Dropdown Menu Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:638:29",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 638,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.point3D = eff?.parameters.point3D ??",
      "context": {
        "before": [
          "        eff?.parameters.Color ?? [1, 1, 1, 1];",
          "      // Point Control (2D and 3D)",
          "      accessor.point = eff?.parameters.point ?? eff?.parameters.Point ?? [0, 0];"
        ],
        "after": [
          "        eff?.parameters[\"3D Point\"] ?? [0, 0, 0];",
          "      // Dropdown Menu Control",
          "      accessor.menu = eff?.parameters.menu ?? eff?.parameters.Menu ?? 1;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:639:12",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 639,
      "column": 12,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "eff?.parameters[\"3D Point\"] ?? [0, 0, 0];",
      "context": {
        "before": [
          "      // Point Control (2D and 3D)",
          "      accessor.point = eff?.parameters.point ?? eff?.parameters.Point ?? [0, 0];",
          "      accessor.point3D = eff?.parameters.point3D ??"
        ],
        "after": [
          "      // Dropdown Menu Control",
          "      accessor.menu = eff?.parameters.menu ?? eff?.parameters.Menu ?? 1;",
          "      // Layer Control"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:641:26",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 641,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.menu = eff?.parameters.menu ?? eff?.parameters.Menu ?? 1;",
      "context": {
        "before": [
          "      accessor.point3D = eff?.parameters.point3D ??",
          "        eff?.parameters[\"3D Point\"] ?? [0, 0, 0];",
          "      // Dropdown Menu Control"
        ],
        "after": [
          "      // Layer Control",
          "      accessor.layer = eff?.parameters.layer ?? eff?.parameters.Layer ?? null;",
          "      return accessor;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:641:50",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 641,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.menu = eff?.parameters.menu ?? eff?.parameters.Menu ?? 1;",
      "context": {
        "before": [
          "      accessor.point3D = eff?.parameters.point3D ??",
          "        eff?.parameters[\"3D Point\"] ?? [0, 0, 0];",
          "      // Dropdown Menu Control"
        ],
        "after": [
          "      // Layer Control",
          "      accessor.layer = eff?.parameters.layer ?? eff?.parameters.Layer ?? null;",
          "      return accessor;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:643:27",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 643,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.layer = eff?.parameters.layer ?? eff?.parameters.Layer ?? null;",
      "context": {
        "before": [
          "      // Dropdown Menu Control",
          "      accessor.menu = eff?.parameters.menu ?? eff?.parameters.Menu ?? 1;",
          "      // Layer Control"
        ],
        "after": [
          "      return accessor;",
          "    },",
          "    sourceRectAtTime: ("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:643:52",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 643,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "accessor.layer = eff?.parameters.layer ?? eff?.parameters.Layer ?? null;",
      "context": {
        "before": [
          "      // Dropdown Menu Control",
          "      accessor.menu = eff?.parameters.menu ?? eff?.parameters.Menu ?? 1;",
          "      // Layer Control"
        ],
        "after": [
          "      return accessor;",
          "    },",
          "    sourceRectAtTime: ("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:654:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 654,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: ctx.layerTransform?.position ?? [0, 0, 0],",
      "context": {
        "before": [
          "    },",
          "    toComp: (point: number[]) => {",
          "      const transform: LayerTransform = {"
        ],
        "after": [
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:655:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 655,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
      "context": {
        "before": [
          "    toComp: (point: number[]) => {",
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],"
        ],
        "after": [
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:656:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 656,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
      "context": {
        "before": [
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],"
        ],
        "after": [
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };",
          "      return toComp(point, transform);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:657:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 657,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],"
        ],
        "after": [
          "      };",
          "      return toComp(point, transform);",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:663:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 663,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: ctx.layerTransform?.position ?? [0, 0, 0],",
      "context": {
        "before": [
          "    },",
          "    fromComp: (point: number[]) => {",
          "      const transform: LayerTransform = {"
        ],
        "after": [
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:664:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 664,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
      "context": {
        "before": [
          "    fromComp: (point: number[]) => {",
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],"
        ],
        "after": [
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:665:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 665,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
      "context": {
        "before": [
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],"
        ],
        "after": [
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };",
          "      return fromComp(point, transform);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:666:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 666,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],"
        ],
        "after": [
          "      };",
          "      return fromComp(point, transform);",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:672:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 672,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: ctx.layerTransform?.position ?? [0, 0, 0],",
      "context": {
        "before": [
          "    },",
          "    toWorld: (point: number[]) => {",
          "      const transform: LayerTransform = {"
        ],
        "after": [
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:673:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 673,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
      "context": {
        "before": [
          "    toWorld: (point: number[]) => {",
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],"
        ],
        "after": [
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:674:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 674,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
      "context": {
        "before": [
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],"
        ],
        "after": [
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };",
          "      return toWorld(point, transform);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:675:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 675,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],"
        ],
        "after": [
          "      };",
          "      return toWorld(point, transform);",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:681:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 681,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "position: ctx.layerTransform?.position ?? [0, 0, 0],",
      "context": {
        "before": [
          "    },",
          "    fromWorld: (point: number[]) => {",
          "      const transform: LayerTransform = {"
        ],
        "after": [
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:682:34",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 682,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
      "context": {
        "before": [
          "    fromWorld: (point: number[]) => {",
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],"
        ],
        "after": [
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:683:37",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 683,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],",
      "context": {
        "before": [
          "      const transform: LayerTransform = {",
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],"
        ],
        "after": [
          "        anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
          "      };",
          "      return fromWorld(point, transform);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionEvaluator.ts:684:35",
      "file": "services/expressions/expressionEvaluator.ts",
      "line": 684,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "anchor: ctx.layerTransform?.origin ?? [0, 0, 0],",
      "context": {
        "before": [
          "        position: ctx.layerTransform?.position ?? [0, 0, 0],",
          "        scale: ctx.layerTransform?.scale ?? [100, 100, 100],",
          "        rotation: ctx.layerTransform?.rotation ?? [0, 0, 0],"
        ],
        "after": [
          "      };",
          "      return fromWorld(point, transform);",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionHelpers.ts:125:15",
      "file": "services/expressions/expressionHelpers.ts",
      "line": 125,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frameDelta) || frameDelta === 0) return before.value;",
      "context": {
        "before": [
          "  if (!after) return before.value;",
          "",
          "  const frameDelta = after.frame - before.frame;"
        ],
        "after": [
          "  const t = (frame - before.frame) / frameDelta;",
          "  const easedT = applyEasing(t, before.interpolation);",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionValidator.ts:45:14",
      "file": "services/expressions/expressionValidator.ts",
      "line": 45,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!expr?.enabled) return;",
      "context": {
        "before": [
          "    expr: PropertyExpression | undefined,",
          "    location: string,",
          "  ) {"
        ],
        "after": [
          "",
          "    // Only custom type has user code - presets/functions are safe (hardcoded)",
          "    if ("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionValidator.ts:50:18",
      "file": "services/expressions/expressionValidator.ts",
      "line": 50,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "expr.params?.code &&",
      "context": {
        "before": [
          "    // Only custom type has user code - presets/functions are safe (hardcoded)",
          "    if (",
          "      expr.type === \"custom\" &&"
        ],
        "after": [
          "      typeof expr.params.code === \"string\"",
          "    ) {",
          "      expressions.push({ location, code: expr.params.code });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionValidator.ts:62:14",
      "file": "services/expressions/expressionValidator.ts",
      "line": 62,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!prop?.expression) return;",
      "context": {
        "before": [
          "    prop: AnimatableProperty<unknown> | undefined,",
          "    location: string,",
          "  ) {"
        ],
        "after": [
          "    checkPropertyExpression(prop.expression as PropertyExpression, location);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionValidator.ts:101:15",
      "file": "services/expressions/expressionValidator.ts",
      "line": 101,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (data?.animators) {",
      "context": {
        "before": [
          "    // Text layer - check text animators' expression selectors",
          "    if (layer.type === \"text\") {",
          "      const data = layer.data as { animators?: TextAnimator[] };"
        ],
        "after": [
          "        data.animators.forEach((anim, i) => {",
          "          // Check expression selector",
          "          const exprSel = anim.expressionSelector as"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionValidator.ts:107:22",
      "file": "services/expressions/expressionValidator.ts",
      "line": 107,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (exprSel?.enabled && exprSel.amountExpression) {",
      "context": {
        "before": [
          "          const exprSel = anim.expressionSelector as",
          "            | TextExpressionSelector",
          "            | undefined;"
        ],
        "after": [
          "            expressions.push({",
          "              location: `${layerLoc}.textAnimator[${anim.name || i}].expressionSelector`,",
          "              code: exprSel.amountExpression,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/expressionValidator.ts:135:18",
      "file": "services/expressions/expressionValidator.ts",
      "line": 135,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (p?.expression) {",
      "context": {
        "before": [
          "        if (effect.parameters) {",
          "          for (const [key, param] of Object.entries(effect.parameters)) {",
          "            const p = param as AnimatableProperty<unknown>;"
        ],
        "after": [
          "              checkPropertyExpression(",
          "                p.expression as PropertyExpression,",
          "                `${layerLoc}.effect[${effect.name || ei}].${key}`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/jitterExpressions.ts:41:15",
      "file": "services/expressions/jitterExpressions.ts",
      "line": 41,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(octaves) || octaves < 1) {",
      "context": {
        "before": [
          "  const { value } = ctx;",
          "",
          "  // Guard against invalid octaves (prevents infinite loop)"
        ],
        "after": [
          "    octaves = 1;",
          "  } else if (octaves > 10) {",
          "    octaves = 10; // Cap at 10 - more octaves add negligible detail"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/jitterExpressions.ts:68:17",
      "file": "services/expressions/jitterExpressions.ts",
      "line": 68,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(denominator) || denominator === 0) {",
      "context": {
        "before": [
          "",
          "    // Guard against division by zero",
          "    const denominator = 1 + (octaves - 1) * amplitudeMultiplier;"
        ],
        "after": [
          "      return result; // Return unnormalized if normalization factor is invalid",
          "    }",
          "    return result / denominator;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/jitterExpressions.ts:95:15",
      "file": "services/expressions/jitterExpressions.ts",
      "line": 95,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frequency) || frequency <= 0) {",
      "context": {
        "before": [
          "  const t = time ?? ctx.time;",
          "",
          "  // Guard against invalid frequency (prevents division by zero)"
        ],
        "after": [
          "    frequency = 5; // Use default frequency",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/jitterExpressions.ts:100:15",
      "file": "services/expressions/jitterExpressions.ts",
      "line": 100,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(octaves) || octaves < 1) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Guard against invalid octaves (prevents infinite loop)"
        ],
        "after": [
          "    octaves = 1;",
          "  } else if (octaves > 10) {",
          "    octaves = 10; // Cap at 10 - more octaves add negligible detail"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:111:62",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 111,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function extractPaths(contents: ShapeLayerData[\"contents\"]): void {",
      "context": {
        "before": [
          "",
          "  // Extract paths from shape layer contents",
          "  const paths: BezierPath[] = [];"
        ],
        "after": [
          "    for (const item of contents) {",
          "      if (item.type === \"path\") {",
          "        // Path shape has a path property with vertices"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:116:27",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 116,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (pathShape.path?.value?.vertices) {",
      "context": {
        "before": [
          "      if (item.type === \"path\") {",
          "        // Path shape has a path property with vertices",
          "        const pathShape = item as { path: { value: BezierPath } };"
        ],
        "after": [
          "          paths.push(pathShape.path.value);",
          "        }",
          "      } else if (item.type === \"group\") {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:116:34",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 116,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (pathShape.path?.value?.vertices) {",
      "context": {
        "before": [
          "      if (item.type === \"path\") {",
          "        // Path shape has a path property with vertices",
          "        const pathShape = item as { path: { value: BezierPath } };"
        ],
        "after": [
          "          paths.push(pathShape.path.value);",
          "        }",
          "      } else if (item.type === \"group\") {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:135:29",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 135,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const x = vertex.point?.x ?? 0;",
      "context": {
        "before": [
          "  paths.forEach((path: BezierPath) => {",
          "    const vertices = path.vertices ?? [];",
          "    vertices.forEach((vertex: BezierVertex) => {"
        ],
        "after": [
          "      const y = vertex.point?.y ?? 0;",
          "      minX = Math.min(minX, x);",
          "      minY = Math.min(minY, y);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:136:29",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 136,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const y = vertex.point?.y ?? 0;",
      "context": {
        "before": [
          "    const vertices = path.vertices ?? [];",
          "    vertices.forEach((vertex: BezierVertex) => {",
          "      const x = vertex.point?.x ?? 0;"
        ],
        "after": [
          "      minX = Math.min(minX, x);",
          "      minY = Math.min(minY, y);",
          "      maxX = Math.max(maxX, x);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:144:15",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 144,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(minX)) {",
      "context": {
        "before": [
          "    });",
          "  });",
          ""
        ],
        "after": [
          "    return { top: 0, left: 0, width: 100, height: 100 };",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:154:67",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 154,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function findStrokeWidth(contents: ShapeLayerData[\"contents\"]): void {",
      "context": {
        "before": [
          "  if (includeExtents) {",
          "    // Find stroke width from stroke shapes in contents",
          "    let maxStrokeWidth = 0;"
        ],
        "after": [
          "      for (const item of contents) {",
          "        if (item.type === \"stroke\") {",
          "          const strokeWidth = typeof item.width?.value === \"number\" ? item.width.value : 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:157:48",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 157,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const strokeWidth = typeof item.width?.value === \"number\" ? item.width.value : 0;",
      "context": {
        "before": [
          "    function findStrokeWidth(contents: ShapeLayerData[\"contents\"]): void {",
          "      for (const item of contents) {",
          "        if (item.type === \"stroke\") {"
        ],
        "after": [
          "          maxStrokeWidth = Math.max(maxStrokeWidth, strokeWidth);",
          "        } else if (item.type === \"group\") {",
          "          findStrokeWidth(item.contents);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:226:20",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 226,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "text: layerData?.text ?? \"\",",
      "context": {
        "before": [
          " */",
          "export function textSource(layerData: TextData): TextSourceInfo {",
          "  return {"
        ],
        "after": [
          "    fontSize: layerData?.fontSize ?? 72,",
          "    fontFamily: layerData?.fontFamily ?? \"Arial\",",
          "    fontStyle: layerData?.fontStyle ?? \"normal\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:227:24",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 227,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontSize: layerData?.fontSize ?? 72,",
      "context": {
        "before": [
          "export function textSource(layerData: TextData): TextSourceInfo {",
          "  return {",
          "    text: layerData?.text ?? \"\","
        ],
        "after": [
          "    fontFamily: layerData?.fontFamily ?? \"Arial\",",
          "    fontStyle: layerData?.fontStyle ?? \"normal\",",
          "    fillColor: layerData?.fill ?? \"#FFFFFF\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:228:26",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 228,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontFamily: layerData?.fontFamily ?? \"Arial\",",
      "context": {
        "before": [
          "  return {",
          "    text: layerData?.text ?? \"\",",
          "    fontSize: layerData?.fontSize ?? 72,"
        ],
        "after": [
          "    fontStyle: layerData?.fontStyle ?? \"normal\",",
          "    fillColor: layerData?.fill ?? \"#FFFFFF\",",
          "    strokeColor: layerData?.stroke ?? \"#000000\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:229:25",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 229,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontStyle: layerData?.fontStyle ?? \"normal\",",
      "context": {
        "before": [
          "    text: layerData?.text ?? \"\",",
          "    fontSize: layerData?.fontSize ?? 72,",
          "    fontFamily: layerData?.fontFamily ?? \"Arial\","
        ],
        "after": [
          "    fillColor: layerData?.fill ?? \"#FFFFFF\",",
          "    strokeColor: layerData?.stroke ?? \"#000000\",",
          "    strokeWidth: layerData?.strokeWidth ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:230:25",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 230,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fillColor: layerData?.fill ?? \"#FFFFFF\",",
      "context": {
        "before": [
          "    fontSize: layerData?.fontSize ?? 72,",
          "    fontFamily: layerData?.fontFamily ?? \"Arial\",",
          "    fontStyle: layerData?.fontStyle ?? \"normal\","
        ],
        "after": [
          "    strokeColor: layerData?.stroke ?? \"#000000\",",
          "    strokeWidth: layerData?.strokeWidth ?? 0,",
          "    tracking: layerData?.letterSpacing ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:231:27",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 231,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "strokeColor: layerData?.stroke ?? \"#000000\",",
      "context": {
        "before": [
          "    fontFamily: layerData?.fontFamily ?? \"Arial\",",
          "    fontStyle: layerData?.fontStyle ?? \"normal\",",
          "    fillColor: layerData?.fill ?? \"#FFFFFF\","
        ],
        "after": [
          "    strokeWidth: layerData?.strokeWidth ?? 0,",
          "    tracking: layerData?.letterSpacing ?? 0,",
          "    leading: layerData?.lineHeight ?? 1.2,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:232:27",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 232,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "strokeWidth: layerData?.strokeWidth ?? 0,",
      "context": {
        "before": [
          "    fontStyle: layerData?.fontStyle ?? \"normal\",",
          "    fillColor: layerData?.fill ?? \"#FFFFFF\",",
          "    strokeColor: layerData?.stroke ?? \"#000000\","
        ],
        "after": [
          "    tracking: layerData?.letterSpacing ?? 0,",
          "    leading: layerData?.lineHeight ?? 1.2,",
          "  };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:233:24",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 233,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "tracking: layerData?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "    fillColor: layerData?.fill ?? \"#FFFFFF\",",
          "    strokeColor: layerData?.stroke ?? \"#000000\",",
          "    strokeWidth: layerData?.strokeWidth ?? 0,"
        ],
        "after": [
          "    leading: layerData?.lineHeight ?? 1.2,",
          "  };",
          "}"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:234:23",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 234,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "leading: layerData?.lineHeight ?? 1.2,",
      "context": {
        "before": [
          "    strokeColor: layerData?.stroke ?? \"#000000\",",
          "    strokeWidth: layerData?.strokeWidth ?? 0,",
          "    tracking: layerData?.letterSpacing ?? 0,"
        ],
        "after": [
          "  };",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/layerContentExpressions.ts:268:34",
      "file": "services/expressions/layerContentExpressions.ts",
      "line": 268,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const param = effect.parameters?.[paramKey];",
      "context": {
        "before": [
          "  if (!effect) return null;",
          "",
          "  const paramKey = parameterName.toLowerCase().replace(/\\s+/g, \"_\");"
        ],
        "after": [
          "",
          "  if (!param) return null;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:96:32",
      "file": "services/expressions/motionExpressions.ts",
      "line": 96,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeAmplitude = Number.isFinite(amplitude) ? amplitude : 0.1;",
      "context": {
        "before": [
          "  const { time, keyframes, value, velocity } = ctx;",
          "",
          "  // Validate parameters"
        ],
        "after": [
          "  const safeFrequency = Number.isFinite(frequency) ? frequency : 2.0;",
          "  const safeDecay = Number.isFinite(decay) ? Math.max(0.001, decay) : 2.0;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:97:32",
      "file": "services/expressions/motionExpressions.ts",
      "line": 97,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeFrequency = Number.isFinite(frequency) ? frequency : 2.0;",
      "context": {
        "before": [
          "",
          "  // Validate parameters",
          "  const safeAmplitude = Number.isFinite(amplitude) ? amplitude : 0.1;"
        ],
        "after": [
          "  const safeDecay = Number.isFinite(decay) ? Math.max(0.001, decay) : 2.0;",
          "",
          "  if (keyframes.length === 0) return value;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:98:28",
      "file": "services/expressions/motionExpressions.ts",
      "line": 98,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeDecay = Number.isFinite(decay) ? Math.max(0.001, decay) : 2.0;",
      "context": {
        "before": [
          "  // Validate parameters",
          "  const safeAmplitude = Number.isFinite(amplitude) ? amplitude : 0.1;",
          "  const safeFrequency = Number.isFinite(frequency) ? frequency : 2.0;"
        ],
        "after": [
          "",
          "  if (keyframes.length === 0) return value;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:150:33",
      "file": "services/expressions/motionExpressions.ts",
      "line": 150,
      "column": 33,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeElasticity = Number.isFinite(elasticity)",
      "context": {
        "before": [
          "  const { time, keyframes, value } = ctx;",
          "",
          "  // Validate parameters"
        ],
        "after": [
          "    ? Math.max(0, Math.min(1, elasticity))",
          "    : 0.7;",
          "  const safeGravity = Number.isFinite(gravity) && gravity > 0 ? gravity : 4000;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:153:30",
      "file": "services/expressions/motionExpressions.ts",
      "line": 153,
      "column": 30,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeGravity = Number.isFinite(gravity) && gravity > 0 ? gravity : 4000;",
      "context": {
        "before": [
          "  const safeElasticity = Number.isFinite(elasticity)",
          "    ? Math.max(0, Math.min(1, elasticity))",
          "    : 0.7;"
        ],
        "after": [
          "",
          "  if (keyframes.length === 0) return value;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:217:32",
      "file": "services/expressions/motionExpressions.ts",
      "line": 217,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeAmplitude = Number.isFinite(amplitude) ? amplitude : 1;",
      "context": {
        "before": [
          "  const { time, keyframes, value } = ctx;",
          "",
          "  // Validate parameters"
        ],
        "after": [
          "  const safePeriod = Number.isFinite(period) && period > 0 ? period : 0.3;",
          "",
          "  if (keyframes.length === 0) return value;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/motionExpressions.ts:218:29",
      "file": "services/expressions/motionExpressions.ts",
      "line": 218,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safePeriod = Number.isFinite(period) && period > 0 ? period : 0.3;",
      "context": {
        "before": [
          "",
          "  // Validate parameters",
          "  const safeAmplitude = Number.isFinite(amplitude) ? amplitude : 1;"
        ],
        "after": [
          "",
          "  if (keyframes.length === 0) return value;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/sesEvaluator.ts:605:17",
      "file": "services/expressions/sesEvaluator.ts",
      "line": 605,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(result)) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // SECURITY: Check for NaN/Infinity"
        ],
        "after": [
          "      console.warn(\"[SES] Expression returned non-finite number:\", result);",
          "      return null;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/expressions/workerEvaluator.ts:150:11",
      "file": "services/expressions/workerEvaluator.ts",
      "line": 150,
      "column": 11,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "worker?.postMessage({ id, code, context });",
      "context": {
        "before": [
          "    pending.set(id, { resolve, timer });",
          "",
          "    // Send to worker"
        ],
        "after": [
          "  });",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/expressions/workerEvaluator.ts:164:34",
      "file": "services/expressions/workerEvaluator.ts",
      "line": 164,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function terminateWorker(): void {",
      "context": {
        "before": [
          "/**",
          " * Terminate the worker (cleanup)",
          " */"
        ],
        "after": [
          "  if (worker) {",
          "    worker.terminate();",
          "    worker = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:131:19",
      "file": "services/frameCache.ts",
      "line": 131,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "add(key: string): void {",
      "context": {
        "before": [
          "  private head: LRUNode | null = null; // Oldest",
          "  private tail: LRUNode | null = null; // Most recent",
          ""
        ],
        "after": [
          "    if (this.nodeMap.has(key)) {",
          "      this.moveToEnd(key);",
          "      return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:150:25",
      "file": "services/frameCache.ts",
      "line": 150,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "moveToEnd(key: string): void {",
      "context": {
        "before": [
          "    this.nodeMap.set(key, node);",
          "  }",
          ""
        ],
        "after": [
          "    const node = this.nodeMap.get(key);",
          "    if (!node || node === this.tail) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:166:22",
      "file": "services/frameCache.ts",
      "line": 166,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "remove(key: string): void {",
      "context": {
        "before": [
          "    this.tail = node;",
          "  }",
          ""
        ],
        "after": [
          "    const node = this.nodeMap.get(key);",
          "    if (!node) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:179:21",
      "file": "services/frameCache.ts",
      "line": 179,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.head?.key ?? null;",
      "context": {
        "before": [
          "  }",
          "",
          "  getOldest(): string | null {"
        ],
        "after": [
          "  }",
          "",
          "  has(key: string): boolean {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:186:10",
      "file": "services/frameCache.ts",
      "line": 186,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "    return this.nodeMap.has(key);",
          "  }",
          ""
        ],
        "after": [
          "    this.nodeMap.clear();",
          "    this.head = null;",
          "    this.tail = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:243:69",
      "file": "services/frameCache.ts",
      "line": 243,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderCallback(callback: (frame: number) => Promise<ImageData>): void {",
      "context": {
        "before": [
          "   * Set the frame render callback",
          "   * This is called to render frames for pre-caching",
          "   */"
        ],
        "after": [
          "    this.renderFrame = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:253:17",
      "file": "services/frameCache.ts",
      "line": 253,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frame)) {",
      "context": {
        "before": [
          "   */",
          "  private getCacheKey(frame: number, compositionId: string): string {",
          "    // NaN frames would create key \"comp:NaN\" causing all NaN frames to collide"
        ],
        "after": [
          "      throw new Error(`Invalid frame number: ${frame}`);",
          "    }",
          "    return `${compositionId}:${frame}`;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:352:15",
      "file": "services/frameCache.ts",
      "line": 352,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(width) ||",
      "context": {
        "before": [
          "    const width = imageData.width;",
          "    const height = imageData.height;",
          "    if ("
        ],
        "after": [
          "      !Number.isFinite(height) ||",
          "      width <= 0 ||",
          "      height <= 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:353:15",
      "file": "services/frameCache.ts",
      "line": 353,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "!Number.isFinite(height) ||",
      "context": {
        "before": [
          "    const height = imageData.height;",
          "    if (",
          "      !Number.isFinite(width) ||"
        ],
        "after": [
          "      width <= 0 ||",
          "      height <= 0",
          "    ) {"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:410:47",
      "file": "services/frameCache.ts",
      "line": 410,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "remove(frame: number, compositionId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a cached frame - O(1)",
          "   */"
        ],
        "after": [
          "    const key = this.getCacheKey(frame, compositionId);",
          "    const cached = this.cache.get(key);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:441:42",
      "file": "services/frameCache.ts",
      "line": 441,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearComposition(compositionId: string): void {",
      "context": {
        "before": [
          "   * Clear all cached frames for a composition - O(k) where k = frames for this composition",
          "   * Uses secondary index for direct lookup instead of O(n) iteration",
          "   */"
        ],
        "after": [
          "    const keySet = this.compositionKeyMap.get(compositionId);",
          "    if (!keySet) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:462:10",
      "file": "services/frameCache.ts",
      "line": 462,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all cached frames",
          "   */"
        ],
        "after": [
          "    this.cache.clear();",
          "    this.lru.clear();",
          "    this.compositionKeyMap.clear();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:474:58",
      "file": "services/frameCache.ts",
      "line": 474,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidate(compositionId: string, newStateHash: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Invalidate cache for a composition (when state changes)",
          "   */"
        ],
        "after": [
          "    const oldHash = this.stateHashCache.get(compositionId);",
          "",
          "    if (oldHash !== newStateHash) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:508:14",
      "file": "services/frameCache.ts",
      "line": 508,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(rawWindow) && rawWindow > 0",
      "context": {
        "before": [
          "    // Validate preCacheWindow to prevent infinite loop from invalid values",
          "    const rawWindow = this.config.preCacheWindow;",
          "    const window ="
        ],
        "after": [
          "        ? Math.min(rawWindow, 1000)",
          "        : 10;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:564:18",
      "file": "services/frameCache.ts",
      "line": 564,
      "column": 18,
      "pattern": ": void",
      "severity": "LOW",
      "code": "abortPreCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Abort any ongoing pre-cache operation",
          "   */"
        ],
        "after": [
          "    if (this.preCacheAbort) {",
          "      this.preCacheAbort.abort();",
          "      this.preCacheAbort = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/frameCache.ts:597:47",
      "file": "services/frameCache.ts",
      "line": 597,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfig(config: Partial<FrameCacheConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update configuration",
          "   */"
        ],
        "after": [
          "    this.config = { ...this.config, ...config };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gaussianSplatting.ts:561:54",
      "file": "services/gaussianSplatting.ts",
      "line": 561,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setQuality(quality: Partial<GaussianRenderQuality>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set render quality",
          "   */"
        ],
        "after": [
          "    this.quality = { ...this.quality, ...quality };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gaussianSplatting.ts:575:21",
      "file": "services/gaussianSplatting.ts",
      "line": 575,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "unload(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Unload a scene",
          "   */"
        ],
        "after": [
          "    this.scenes.delete(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gaussianSplatting.ts:582:10",
      "file": "services/gaussianSplatting.ts",
      "line": 582,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Unload all scenes",
          "   */"
        ],
        "after": [
          "    this.scenes.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gaussianSplatting.ts:644:2",
      "file": "services/gaussianSplatting.ts",
      "line": 644,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function reorderBuffers(",
          "  geometry: THREE.BufferGeometry,",
          "  sortedIndices: Uint32Array,"
        ],
        "after": [
          "  const position = geometry.getAttribute(\"position\") as THREE.BufferAttribute;",
          "  const color = geometry.getAttribute(\"color\") as THREE.BufferAttribute;",
          "  const size = geometry.getAttribute(\"size\") as THREE.BufferAttribute;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:135:2",
      "file": "services/globalLight.ts",
      "line": 135,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function setGlobalLightAngle(",
          "  compositionId: string,",
          "  angle: number,"
        ],
        "after": [
          "  const settings = getGlobalLight(compositionId);",
          "  settings.angle.value = normalizeAngle(angle);",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:146:2",
      "file": "services/globalLight.ts",
      "line": 146,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function setGlobalLightAltitude(",
          "  compositionId: string,",
          "  altitude: number,"
        ],
        "after": [
          "  const settings = getGlobalLight(compositionId);",
          "  settings.altitude.value = clamp(altitude, 0, 90);",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:158:2",
      "file": "services/globalLight.ts",
      "line": 158,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositionId: string,",
          "  angle: number,",
          "  altitude: number,"
        ],
        "after": [
          "  setGlobalLightAngle(compositionId, angle);",
          "  setGlobalLightAltitude(compositionId, altitude);",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:169:2",
      "file": "services/globalLight.ts",
      "line": 169,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function setGlobalLightSettings(",
          "  compositionId: string,",
          "  settings: GlobalLightSettings,"
        ],
        "after": [
          "  globalLightCache.set(compositionId, settings);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:183:2",
      "file": "services/globalLight.ts",
      "line": 183,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function enableGlobalLightAngleAnimation(",
          "  compositionId: string,",
          "  enabled: boolean = true,"
        ],
        "after": [
          "  const settings = getGlobalLight(compositionId);",
          "  settings.angle.animated = enabled;",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:194:2",
      "file": "services/globalLight.ts",
      "line": 194,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function enableGlobalLightAltitudeAnimation(",
          "  compositionId: string,",
          "  enabled: boolean = true,"
        ],
        "after": [
          "  const settings = getGlobalLight(compositionId);",
          "  settings.altitude.animated = enabled;",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:267:57",
      "file": "services/globalLight.ts",
      "line": 267,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function removeGlobalLight(compositionId: string): void {",
      "context": {
        "before": [
          " * Remove global light settings for a composition",
          " * Called when a composition is deleted",
          " */"
        ],
        "after": [
          "  globalLightCache.delete(compositionId);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:274:40",
      "file": "services/globalLight.ts",
      "line": 274,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearGlobalLightCache(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear all cached global light settings",
          " */"
        ],
        "after": [
          "  globalLightCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/globalLight.ts:297:2",
      "file": "services/globalLight.ts",
      "line": 297,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function deserializeGlobalLight(",
          "  compositionId: string,",
          "  settings: GlobalLightSettings,"
        ],
        "after": [
          "  globalLightCache.set(compositionId, settings);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/glsl/GLSLEngine.ts:664:49",
      "file": "services/glsl/GLSLEngine.ts",
      "line": 664,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setUniforms(uniforms: Partial<ShaderUniforms>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set uniforms on the current shader",
          "   */"
        ],
        "after": [
          "    if (!this.gl || !this.program) return;",
          "",
          "    const gl = this.gl;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/glsl/GLSLEngine.ts:838:12",
      "file": "services/glsl/GLSLEngine.ts",
      "line": 838,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose of WebGL resources",
          "   */"
        ],
        "after": [
          "    // Remove context loss event listeners",
          "    if (this.canvas) {",
          "      if (this.contextLostHandler) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/glsl/GLSLEngine.ts:885:36",
      "file": "services/glsl/GLSLEngine.ts",
      "line": 885,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function disposeGLSLEngine(): void {",
      "context": {
        "before": [
          "/**",
          " * Dispose of the singleton GLSL engine",
          " */"
        ],
        "after": [
          "  if (glslEngineInstance) {",
          "    glslEngineInstance.dispose();",
          "    glslEngineInstance = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/glsl/ShaderEffects.ts:1126:12",
      "file": "services/glsl/ShaderEffects.ts",
      "line": 1126,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose resources",
          "   */"
        ],
        "after": [
          "    this.engine.dispose();",
          "    this.currentEffect = null;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/glsl/ShaderEffects.ts:1145:47",
      "file": "services/glsl/ShaderEffects.ts",
      "line": 1145,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function disposeShaderEffectProcessor(): void {",
      "context": {
        "before": [
          "  return processorInstance;",
          "}",
          ""
        ],
        "after": [
          "  if (processorInstance) {",
          "    processorInstance.dispose();",
          "    processorInstance = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuBenchmark.ts:225:40",
      "file": "services/gpuBenchmark.ts",
      "line": 225,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const bestEffect = sortedBySpeedup[0]?.effectKey || \"none\";",
      "context": {
        "before": [
          "  const averageSpeedup = totalCpuTime / Math.max(totalGpuTime, 0.001);",
          "",
          "  const sortedBySpeedup = [...results].sort((a, b) => b.speedup - a.speedup);"
        ],
        "after": [
          "  const worstEffect =",
          "    sortedBySpeedup[sortedBySpeedup.length - 1]?.effectKey || \"none\";",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/gpuBenchmark.ts:227:48",
      "file": "services/gpuBenchmark.ts",
      "line": 227,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "sortedBySpeedup[sortedBySpeedup.length - 1]?.effectKey || \"none\";",
      "context": {
        "before": [
          "  const sortedBySpeedup = [...results].sort((a, b) => b.speedup - a.speedup);",
          "  const bestEffect = sortedBySpeedup[0]?.effectKey || \"none\";",
          "  const worstEffect ="
        ],
        "after": [
          "",
          "  const summary = {",
          "    totalCpuTime,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/gpuBenchmark.ts:261:61",
      "file": "services/gpuBenchmark.ts",
      "line": 261,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function printBenchmarkResults(suite: BenchmarkSuite): void {",
      "context": {
        "before": [
          "/**",
          " * Print benchmark results to console",
          " */"
        ],
        "after": [
          "  console.log(\"\\n=== GPU Effect Benchmark Results ===\\n\");",
          "  console.log(`GPU Available: ${suite.summary.gpuAvailable}`);",
          "  console.log(`Render Path: ${suite.summary.renderPath}`);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuDetection.ts:49:28",
      "file": "services/gpuDetection.ts",
      "line": 49,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "deviceName = info?.device || info?.description || \"\";",
      "context": {
        "before": [
          "        if (\"info\" in adapter) {",
          "          // Newer API",
          "          const info = (adapter as any).info;"
        ],
        "after": [
          "        }",
          "",
          "        // Detect Blackwell (RTX 50 series)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/gpuDetection.ts:49:44",
      "file": "services/gpuDetection.ts",
      "line": 49,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "deviceName = info?.device || info?.description || \"\";",
      "context": {
        "before": [
          "        if (\"info\" in adapter) {",
          "          // Newer API",
          "          const info = (adapter as any).info;"
        ],
        "after": [
          "        }",
          "",
          "        // Detect Blackwell (RTX 50 series)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:368:30",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 368,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "release(texture: ImageData): void {",
      "context": {
        "before": [
          "  /**",
          "   * Release a texture back to the pool",
          "   */"
        ],
        "after": [
          "    const entry = this.pool.find((e) => e.texture === texture);",
          "    if (entry) {",
          "      entry.inUse = false;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:379:12",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 379,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cleanup(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clean up old textures",
          "   */"
        ],
        "after": [
          "    const now = Date.now();",
          "    this.pool = this.pool.filter(",
          "      (entry) => entry.inUse || now - entry.lastUsed <= this.maxAge,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:389:10",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 389,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all pooled textures",
          "   */"
        ],
        "after": [
          "    this.pool = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:481:30",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 481,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private buildEffectRoutes(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Build routing table for effects based on GPU availability",
          "   */"
        ],
        "after": [
          "    this.effectRoutes.clear();",
          "",
          "    for (const mapping of EFFECT_GPU_MAPPINGS) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:556:22",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 556,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (mapping?.webgpuMethod) {",
      "context": {
        "before": [
          "    try {",
          "      switch (route) {",
          "        case \"webgpu\":"
        ],
        "after": [
          "            return await this.processWebGPU(",
          "              effectKey,",
          "              input,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:566:22",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 566,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (mapping?.webglShader) {",
      "context": {
        "before": [
          "          }",
          "          break;",
          "        case \"webgl2\":"
        ],
        "after": [
          "            return await this.processWebGL(",
          "              effectKey,",
          "              input,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:851:37",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 851,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "releaseTexture(texture: ImageData): void {",
      "context": {
        "before": [
          "  /**",
          "   * Release a texture back to the pool",
          "   */"
        ],
        "after": [
          "    this.texturePool.release(texture);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:889:12",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 889,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cleanup(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clean up resources",
          "   */"
        ],
        "after": [
          "    this.texturePool.cleanup();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuEffectDispatcher.ts:896:12",
      "file": "services/gpuEffectDispatcher.ts",
      "line": 896,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    this.texturePool.clear();",
          "    this.effectRoutes.clear();",
          "    webgpuRenderer.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:310:4",
      "file": "services/gpuParticleRenderer.ts",
      "line": 310,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    particles: readonly Particle[],",
          "    canvasWidth: number,",
          "    canvasHeight: number,"
        ],
        "after": [
          "    const count = Math.min(particles.length, this.config.maxParticles);",
          "    this.activeCount = count;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:369:50",
      "file": "services/gpuParticleRenderer.ts",
      "line": 369,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSpriteTexture(texture: THREE.Texture | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set sprite texture for particle rendering",
          "   */"
        ],
        "after": [
          "    this.spriteTexture = texture;",
          "    this.material.uniforms.uSprite.value = texture;",
          "    this.material.uniforms.uUseSprite.value = texture !== null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:387:47",
      "file": "services/gpuParticleRenderer.ts",
      "line": 387,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setDepthTexture(texture: THREE.DepthTexture): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set depth texture for soft particles",
          "   */"
        ],
        "after": [
          "    this.depthTexture = texture;",
          "    this.material.uniforms.uDepthTexture.value = texture;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:395:47",
      "file": "services/gpuParticleRenderer.ts",
      "line": 395,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setResolution(width: number, height: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update resolution for soft particles",
          "   */"
        ],
        "after": [
          "    this.material.uniforms.uResolution.value.set(width, height);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:402:49",
      "file": "services/gpuParticleRenderer.ts",
      "line": 402,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCameraClipPlanes(near: number, far: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update camera near/far for soft particles",
          "   */"
        ],
        "after": [
          "    this.material.uniforms.uNear.value = near;",
          "    this.material.uniforms.uFar.value = far;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:410:49",
      "file": "services/gpuParticleRenderer.ts",
      "line": 410,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBlendMode(mode: RenderOptions[\"blendMode\"]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set blend mode",
          "   */"
        ],
        "after": [
          "    switch (mode) {",
          "      case \"additive\":",
          "        this.material.blending = THREE.AdditiveBlending;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:433:53",
      "file": "services/gpuParticleRenderer.ts",
      "line": 433,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMotionBlur(enabled: boolean, strength?: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set motion blur enabled/strength",
          "   */"
        ],
        "after": [
          "    this.material.uniforms.uMotionBlur.value = enabled;",
          "    if (strength !== undefined) {",
          "      this.material.uniforms.uMotionBlurStrength.value = strength;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:443:56",
      "file": "services/gpuParticleRenderer.ts",
      "line": 443,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSoftParticles(enabled: boolean, distance?: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set soft particles enabled",
          "   */"
        ],
        "after": [
          "    this.material.uniforms.uSoftParticles.value = enabled;",
          "    if (distance !== undefined) {",
          "      this.material.uniforms.uSoftDistance.value = distance;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:453:52",
      "file": "services/gpuParticleRenderer.ts",
      "line": 453,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEmissive(enabled: boolean, intensity?: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set emissive rendering for bloom",
          "   */"
        ],
        "after": [
          "    this.material.uniforms.uEmissive.value = enabled;",
          "    if (intensity !== undefined) {",
          "      this.material.uniforms.uEmissiveIntensity.value = intensity;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:463:30",
      "file": "services/gpuParticleRenderer.ts",
      "line": 463,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSizeScale(scale: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set size scale",
          "   */"
        ],
        "after": [
          "    this.material.uniforms.uSizeScale.value = scale;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:470:24",
      "file": "services/gpuParticleRenderer.ts",
      "line": 470,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTime(time: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update time uniform",
          "   */"
        ],
        "after": [
          "    this.material.uniforms.uTime.value = time;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:491:12",
      "file": "services/gpuParticleRenderer.ts",
      "line": 491,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose resources",
          "   */"
        ],
        "after": [
          "    this.geometry.dispose();",
          "    this.material.dispose();",
          "    if (this.spriteTexture) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:553:4",
      "file": "services/gpuParticleRenderer.ts",
      "line": 553,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    particles: readonly Particle[],",
          "    canvasWidth: number,",
          "    canvasHeight: number,"
        ],
        "after": [
          "    const count = Math.min(particles.length, this.maxInstances);",
          "    this.activeCount = count;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/gpuParticleRenderer.ts:602:12",
      "file": "services/gpuParticleRenderer.ts",
      "line": 602,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose resources",
          "   */"
        ],
        "after": [
          "    this.mesh.geometry.dispose();",
          "    if (this.mesh.material instanceof THREE.Material) {",
          "      this.mesh.material.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/interpolation.ts:128:10",
      "file": "services/interpolation.ts",
      "line": 128,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear the cache (call on project load)",
          "   */"
        ],
        "after": [
          "    this.cache.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/interpolation.ts:147:35",
      "file": "services/interpolation.ts",
      "line": 147,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearBezierCache(): void {",
      "context": {
        "before": [
          " * Clear the bezier cache",
          " * Call this when loading a new project to free memory",
          " */"
        ],
        "after": [
          "  bezierCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/interpolation.ts:215:19",
      "file": "services/interpolation.ts",
      "line": 215,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(distance) && distance > 0 ? distance : 1;",
      "context": {
        "before": [
          "    const dy = v2Vec.y - v1Vec.y;",
          "    const distance = Math.sqrt(dx * dx + dy * dy);",
          "    // Return 1 as fallback if distance is 0 or invalid (prevents division by zero)"
        ],
        "after": [
          "  }",
          "  return 1; // Default for non-numeric types",
          "}"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/interpolation.ts:296:26",
      "file": "services/interpolation.ts",
      "line": 296,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (property.expression?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Apply expression if present"
        ],
        "after": [
          "    value = applyPropertyExpression(",
          "      property,",
          "      value,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/interpolation.ts:639:17",
      "file": "services/interpolation.ts",
      "line": 639,
      "column": 17,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "return Number.isNaN(val) ? 0 : Math.max(0, Math.min(255, val));",
      "context": {
        "before": [
          " */",
          "function parseHexComponent(hex: string, start: number, end: number): number {",
          "  const val = parseInt(hex.slice(start, end), 16);"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/interpolation.ts:737:38",
      "file": "services/interpolation.ts",
      "line": 737,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearPathMorphCache(): void {",
      "context": {
        "before": [
          " * Clear the path morph cache",
          " * Call this when loading a new project to free memory",
          " */"
        ],
        "after": [
          "  pathMorphCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/interpolation.ts:805:2",
      "file": "services/interpolation.ts",
      "line": 805,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  keyframe: Keyframe<T>,",
          "  presetName: keyof typeof EASING_PRESETS_NORMALIZED,",
          "  _direction: \"in\" | \"out\" | \"both\" = \"both\","
        ],
        "after": [
          "  // For the new system, we simply set the interpolation type to 'bezier'",
          "  // The actual easing is applied through named easings in the interpolation property",
          "  keyframe.interpolation = presetName === \"linear\" ? \"linear\" : \"bezier\";"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/jsonValidation.ts:83:47",
      "file": "services/jsonValidation.ts",
      "line": 83,
      "column": 47,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "return typeof value === \"number\" && !Number.isNaN(value);",
      "context": {
        "before": [
          " * Check if value is a valid number (not NaN)",
          " */",
          "export function isNumber(value: unknown): value is number {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:128:17",
      "file": "services/layerDecomposition.ts",
      "line": 128,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"starting\", 0);",
      "context": {
        "before": [
          "    onProgress?: (stage: string, progress: number) => void,",
          "  ): Promise<void> {",
          "    try {"
        ],
        "after": [
          "",
          "      const response = await fetch(",
          "        `${this.baseUrl}/lattice/decomposition/download`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:154:17",
      "file": "services/layerDecomposition.ts",
      "line": 154,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"complete\", 100);",
      "context": {
        "before": [
          "        );",
          "      }",
          ""
        ],
        "after": [
          "      logger.info(\"Model download complete\");",
          "    } catch (error) {",
          "      logger.error(\"Model download failed:\", error);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:256:39",
      "file": "services/layerDecomposition.ts",
      "line": 256,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "throw new Error(memCheck.warning?.message || \"Insufficient GPU memory\");",
      "context": {
        "before": [
          "    // Check if we have enough memory before loading",
          "    const memCheck = canAllocate(VRAM_ESTIMATES[\"model:qwen-image-layered\"]);",
          "    if (!memCheck.canProceed) {"
        ],
        "after": [
          "    }",
          "",
          "    try {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:378:17",
      "file": "services/layerDecomposition.ts",
      "line": 378,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"checking\", \"Checking model status...\");",
      "context": {
        "before": [
          "",
          "    try {",
          "      // Check status"
        ],
        "after": [
          "      const status = await this.getStatus();",
          "",
          "      // Download if needed"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:383:19",
      "file": "services/layerDecomposition.ts",
      "line": 383,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"downloading\", \"Downloading model (28.8GB)...\");",
      "context": {
        "before": [
          "",
          "      // Download if needed",
          "      if (!status.downloaded) {"
        ],
        "after": [
          "        await this.downloadModel();",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:389:19",
      "file": "services/layerDecomposition.ts",
      "line": 389,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"loading\", \"Loading model into GPU memory...\");",
      "context": {
        "before": [
          "",
          "      // Load if needed",
          "      if (!status.loaded) {"
        ],
        "after": [
          "        await this.loadModel();",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:394:17",
      "file": "services/layerDecomposition.ts",
      "line": 394,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"decomposing\", \"Decomposing image into layers...\");",
      "context": {
        "before": [
          "      }",
          "",
          "      // Decompose"
        ],
        "after": [
          "      const layers = await this.decompose(imageDataUrl, options);",
          "",
          "      // Generate semantic labels if requested"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:399:19",
      "file": "services/layerDecomposition.ts",
      "line": 399,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"labeling\", \"Generating semantic labels...\");",
      "context": {
        "before": [
          "",
          "      // Generate semantic labels if requested",
          "      if (generateLabels && layers.length > 0) {"
        ],
        "after": [
          "        await this.generateSemanticLabels(layers);",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:403:17",
      "file": "services/layerDecomposition.ts",
      "line": 403,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"complete\", `Generated ${layers.length} layers`);",
      "context": {
        "before": [
          "        await this.generateSemanticLabels(layers);",
          "      }",
          ""
        ],
        "after": [
          "      return layers;",
          "    } finally {",
          "      // Auto-unload to free GPU memory (critical for large workflows)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerDecomposition.ts:408:19",
      "file": "services/layerDecomposition.ts",
      "line": 408,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"cleanup\", \"Freeing GPU memory...\");",
      "context": {
        "before": [
          "    } finally {",
          "      // Auto-unload to free GPU memory (critical for large workflows)",
          "      if (autoUnload) {"
        ],
        "after": [
          "        try {",
          "          await this.unloadModel();",
          "          logger.info(\"Model auto-unloaded to free GPU memory\");"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:48:48",
      "file": "services/layerEvaluationCache.ts",
      "line": 48,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function markLayerDirty(layerId: string): void {",
      "context": {
        "before": [
          " * Mark a layer as dirty (property changed)",
          " * Should be called whenever a layer property is modified",
          " */"
        ],
        "after": [
          "  const current = layerVersions.get(layerId) ?? 0;",
          "  layerVersions.set(layerId, current + 1);",
          "  globalVersion++;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:57:37",
      "file": "services/layerEvaluationCache.ts",
      "line": 57,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function markAllLayersDirty(): void {",
      "context": {
        "before": [
          "/**",
          " * Mark all layers as dirty (e.g., project reload)",
          " */"
        ],
        "after": [
          "  layerVersions.clear();",
          "  globalVersion++;",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:139:2",
      "file": "services/layerEvaluationCache.ts",
      "line": 139,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  layerId: string,",
          "  frame: number,",
          "  evaluatedLayer: EvaluatedLayer,"
        ],
        "after": [
          "  // Evict old entries if cache is full",
          "  if (evaluationCache.size >= MAX_CACHE_SIZE) {",
          "    evictOldEntries(MAX_CACHE_SIZE / 4); // Evict 25% of cache"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:156:40",
      "file": "services/layerEvaluationCache.ts",
      "line": 156,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function evictOldEntries(count: number): void {",
      "context": {
        "before": [
          "/**",
          " * Evict oldest entries to make room",
          " */"
        ],
        "after": [
          "  // Sort entries by access time",
          "  const entries = Array.from(evaluationCache.entries()).sort(",
          "    ([, a], [, b]) => a.accessTime - b.accessTime,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:171:49",
      "file": "services/layerEvaluationCache.ts",
      "line": 171,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearLayerCache(layerId: string): void {",
      "context": {
        "before": [
          "/**",
          " * Clear cache for a specific layer",
          " */"
        ],
        "after": [
          "  const keysToDelete: string[] = [];",
          "  for (const key of evaluationCache.keys()) {",
          "    if (key.startsWith(`${layerId}:`)) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:184:39",
      "file": "services/layerEvaluationCache.ts",
      "line": 184,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearEvaluationCache(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear entire cache",
          " */"
        ],
        "after": [
          "  evaluationCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:244:33",
      "file": "services/layerEvaluationCache.ts",
      "line": 244,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.separateDimensions?.position &&",
      "context": {
        "before": [
          "  // Evaluate position - check for separate dimensions first",
          "  let position: { x: number; y: number; z?: number };",
          "  if ("
        ],
        "after": [
          "    transform.positionX &&",
          "    transform.positionY",
          "  ) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/layerEvaluationCache.ts:268:33",
      "file": "services/layerEvaluationCache.ts",
      "line": 268,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.separateDimensions?.scale &&",
      "context": {
        "before": [
          "  // Evaluate scale - check for separate dimensions first",
          "  let scale: { x: number; y: number; z?: number };",
          "  if ("
        ],
        "after": [
          "    transform.scaleX &&",
          "    transform.scaleY",
          "  ) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/lazyLoader.ts:147:39",
      "file": "services/lazyLoader.ts",
      "line": 147,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function preloadCommonModules(): void {",
      "context": {
        "before": [
          " * Preload modules that will likely be needed soon",
          " * Call this during idle time or after initial render",
          " */"
        ],
        "after": [
          "  // Use requestIdleCallback for non-critical preloading",
          "  const preload = () => {",
          "    // Preload in order of likely usage"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/lazyLoader.ts:165:39",
      "file": "services/lazyLoader.ts",
      "line": 165,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function preloadExportModules(): void {",
      "context": {
        "before": [
          "/**",
          " * Preload export-related modules (call when user opens export dialog)",
          " */"
        ],
        "after": [
          "  loadJSZip().catch(() => {});",
          "  loadMP4Muxer().catch(() => {});",
          "  loadWebMMuxer().catch(() => {});"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/lazyLoader.ts:178:46",
      "file": "services/lazyLoader.ts",
      "line": 178,
      "column": 46,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearModuleCache(key: string): void {",
      "context": {
        "before": [
          "/**",
          " * Clear a specific cached module",
          " */"
        ],
        "after": [
          "  moduleCache.delete(key);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/lazyLoader.ts:185:38",
      "file": "services/lazyLoader.ts",
      "line": 185,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearAllModuleCache(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear all cached modules",
          " */"
        ],
        "after": [
          "  moduleCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/maskGenerator.ts:163:4",
      "file": "services/maskGenerator.ts",
      "line": 163,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    y: number,",
          "    x: number,",
          "    value: number,"
        ],
        "after": [
          "    if (y >= 0 && y < height && x >= 0 && x < width) {",
          "      mask[y * width + x] = value;",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/maskGenerator.ts:532:4",
      "file": "services/maskGenerator.ts",
      "line": 532,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    vertices: [number, number][],",
          "    w: number,",
          "    h: number,"
        ],
        "after": [
          "    if (vertices.length < 3) return;",
          "",
          "    // Find bounding box"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/maskGenerator.ts:731:27",
      "file": "services/maskGenerator.ts",
      "line": 731,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const baseSeed = options?.seed ?? Date.now();",
      "context": {
        "before": [
          "  options?: Partial<MaskGeneratorOptions>,",
          "): Uint8Array[] {",
          "  const masks: Uint8Array[] = [];"
        ],
        "after": [
          "",
          "  for (let i = 0; i < frameCount; i++) {",
          "    masks.push("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:149:44",
      "file": "services/materialSystem.ts",
      "line": 149,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize(renderer: THREE.WebGLRenderer): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize with WebGL renderer (required for PMREM)",
          "   */"
        ],
        "after": [
          "    this.pmremGenerator = new THREE.PMREMGenerator(renderer);",
          "    this.pmremGenerator.compileEquirectangularShader();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:159:4",
      "file": "services/materialSystem.ts",
      "line": 159,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  setAssetGetter(",
          "    getter: (assetId: string) => AssetReference | undefined,"
        ],
        "after": [
          "    this.assetGetter = getter;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:188:16",
      "file": "services/materialSystem.ts",
      "line": 188,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (asset?.data) {",
      "context": {
        "before": [
          "    let url = urlOrAssetId;",
          "    if (this.assetGetter) {",
          "      const asset = this.assetGetter(urlOrAssetId);"
        ],
        "after": [
          "        url = asset.data;",
          "      }",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:201:22",
      "file": "services/materialSystem.ts",
      "line": 201,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (options?.repeat) {",
      "context": {
        "before": [
          "          this.configureTextureForMapType(texture, mapType);",
          "",
          "          // Apply options"
        ],
        "after": [
          "            texture.repeat.set(options.repeat.x, options.repeat.y);",
          "            texture.wrapS = THREE.RepeatWrapping;",
          "            texture.wrapT = THREE.RepeatWrapping;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:206:22",
      "file": "services/materialSystem.ts",
      "line": 206,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (options?.offset) {",
      "context": {
        "before": [
          "            texture.wrapS = THREE.RepeatWrapping;",
          "            texture.wrapT = THREE.RepeatWrapping;",
          "          }"
        ],
        "after": [
          "            texture.offset.set(options.offset.x, options.offset.y);",
          "          }",
          "          if (options?.rotation !== undefined) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:209:22",
      "file": "services/materialSystem.ts",
      "line": 209,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (options?.rotation !== undefined) {",
      "context": {
        "before": [
          "          if (options?.offset) {",
          "            texture.offset.set(options.offset.x, options.offset.y);",
          "          }"
        ],
        "after": [
          "            texture.rotation = options.rotation * (Math.PI / 180);",
          "          }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:228:4",
      "file": "services/materialSystem.ts",
      "line": 228,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private configureTextureForMapType(",
          "    texture: THREE.Texture,",
          "    mapType: TextureMapType,"
        ],
        "after": [
          "    // Default settings",
          "    texture.generateMipmaps = true;",
          "    texture.minFilter = THREE.LinearMipmapLinearFilter;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:464:16",
      "file": "services/materialSystem.ts",
      "line": 464,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (asset?.data) {",
      "context": {
        "before": [
          "    let url = urlOrAssetId;",
          "    if (this.assetGetter) {",
          "      const asset = this.assetGetter(urlOrAssetId);"
        ],
        "after": [
          "        url = asset.data;",
          "      }",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:479:32",
      "file": "services/materialSystem.ts",
      "line": 479,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.pmremGenerator?.fromEquirectangular(texture).texture;",
      "context": {
        "before": [
          "        (texture) => {",
          "          // Generate PMREM from equirectangular HDR",
          "          const envMap ="
        ],
        "after": [
          "          texture.dispose();",
          "",
          "          if (!envMap) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:504:59",
      "file": "services/materialSystem.ts",
      "line": 504,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEnvironmentConfig(config: Partial<EnvironmentConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set environment configuration",
          "   */"
        ],
        "after": [
          "    Object.assign(this.envConfig, config);",
          "",
          "    // Update material env map intensity"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:532:34",
      "file": "services/materialSystem.ts",
      "line": 532,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateMaterialsEnvMap(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update all materials with current environment map",
          "   */"
        ],
        "after": [
          "    for (const material of this.materialCache.values()) {",
          "      material.envMap = this.envConfig.enabled ? this.envMap : null;",
          "      material.envMapIntensity = this.envConfig.intensity;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:724:4",
      "file": "services/materialSystem.ts",
      "line": 724,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  updateMaterial(",
          "    materialId: string,",
          "    updates: Partial<PBRMaterialConfig>,"
        ],
        "after": [
          "    const material = this.materialCache.get(materialId);",
          "    if (!material) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:782:38",
      "file": "services/materialSystem.ts",
      "line": 782,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disposeMaterial(materialId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose a material",
          "   */"
        ],
        "after": [
          "    const material = this.materialCache.get(materialId);",
          "    if (material) {",
          "      material.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/materialSystem.ts:793:12",
      "file": "services/materialSystem.ts",
      "line": 793,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    // Dispose textures",
          "    for (const texture of this.textureCache.values()) {",
          "      texture.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/math3d.ts:47:80",
      "file": "services/math3d.ts",
      "line": 47,
      "column": 80,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setMath3DWarnHandler(handler: (event: Math3DWarnEvent) => void): void {",
      "context": {
        "before": [
          " * - Collect telemetry",
          " * - Show user notifications",
          " */"
        ],
        "after": [
          "  math3dWarnHandler = handler;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/math3d.ts:51:93",
      "file": "services/math3d.ts",
      "line": 51,
      "column": 93,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function math3dWarn(type: Math3DWarning, message: string, context?: Record<string, unknown>): void {",
      "context": {
        "before": [
          "  math3dWarnHandler = handler;",
          "}",
          ""
        ],
        "after": [
          "  math3dWarnHandler({ type, message, context });",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:306:20",
      "file": "services/matteExporter.ts",
      "line": 306,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!splineData?.controlPoints || splineData.controlPoints.length < 2)",
      "context": {
        "before": [
          "    if (!pathLayer || pathLayer.type !== \"spline\") return;",
          "",
          "    const splineData = pathLayer.data as SplineData;"
        ],
        "after": [
          "      return;",
          "",
          "    // Build path commands from control points"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:413:4",
      "file": "services/matteExporter.ts",
      "line": 413,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    fontSize: number,",
          "    scaleX: number,",
          "    scaleY: number,"
        ],
        "after": [
          "    // Get transform",
          "    const positionProp = layer.transform.position;",
          "    const position = interpolateProperty(positionProp, frame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:488:61",
      "file": "services/matteExporter.ts",
      "line": 488,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private initializeParticleSystems(project: LatticeProject): void {",
      "context": {
        "before": [
          "  /**",
          "   * Initialize particle systems for all particle layers",
          "   */"
        ],
        "after": [
          "    this.particleSystems.clear();",
          "",
          "    const particleLayers = project.layers.filter("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:538:4",
      "file": "services/matteExporter.ts",
      "line": 538,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private stepParticleSystemsToFrame(",
          "    project: LatticeProject,",
          "    frame: number,"
        ],
        "after": [
          "    // Only step if this isn't the first frame (systems already initialized at frame 0)",
          "    if (frame === 0) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:566:4",
      "file": "services/matteExporter.ts",
      "line": 566,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    layer: Layer,",
          "    width: number,",
          "    height: number,"
        ],
        "after": [
          "    const system = this.particleSystems.get(layer.id);",
          "    if (!system) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/matteExporter.ts:589:12",
      "file": "services/matteExporter.ts",
      "line": 589,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clean up resources",
          "   */"
        ],
        "after": [
          "    this.offscreenCanvas = null;",
          "    this.ctx = null;",
          "    this.particleSystems.clear();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/memoryBudget.ts:240:2",
      "file": "services/memoryBudget.ts",
      "line": 240,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    canUnload?: boolean;",
          "    unloadFn?: () => Promise<void>;",
          "  },"
        ],
        "after": [
          "  const allocation: MemoryAllocation = {",
          "    id,",
          "    name,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/memoryBudget.ts:247:23",
      "file": "services/memoryBudget.ts",
      "line": 247,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "canUnload: options?.canUnload ?? false,",
      "context": {
        "before": [
          "    category,",
          "    estimatedMB,",
          "    timestamp: Date.now(),"
        ],
        "after": [
          "    unloadFn: options?.unloadFn,",
          "  };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/memoryBudget.ts:248:22",
      "file": "services/memoryBudget.ts",
      "line": 248,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "unloadFn: options?.unloadFn,",
      "context": {
        "before": [
          "    estimatedMB,",
          "    timestamp: Date.now(),",
          "    canUnload: options?.canUnload ?? false,"
        ],
        "after": [
          "  };",
          "",
          "  allocations.set(id, allocation);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/memoryBudget.ts:263:49",
      "file": "services/memoryBudget.ts",
      "line": 263,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function unregisterAllocation(id: string): void {",
      "context": {
        "before": [
          "/**",
          " * Unregister a memory allocation",
          " */"
        ],
        "after": [
          "  const alloc = allocations.get(id);",
          "  if (alloc) {",
          "    allocations.delete(id);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/memoryBudget.ts:276:66",
      "file": "services/memoryBudget.ts",
      "line": 276,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function updateAllocation(id: string, estimatedMB: number): void {",
      "context": {
        "before": [
          "/**",
          " * Update an existing allocation's size",
          " */"
        ],
        "after": [
          "  const alloc = allocations.get(id);",
          "  if (alloc) {",
          "    alloc.estimatedMB = estimatedMB;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/memoryBudget.ts:535:30",
      "file": "services/memoryBudget.ts",
      "line": 535,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function checkAndLogWarning(): void {",
      "context": {
        "before": [
          "  return `${Math.round(mb)}MB`;",
          "}",
          ""
        ],
        "after": [
          "  const warning = getWarning();",
          "  if (warning) {",
          "    if (warning.level === \"critical\") {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshDeformation3D.ts:408:2",
      "file": "services/meshDeformation3D.ts",
      "line": 408,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function applySquashStretchToObject(",
          "  object: THREE.Object3D,",
          "  scale: Vec3,"
        ],
        "after": [
          "  object.scale.set(scale.x, scale.y, scale.z);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshDeformation3D.ts:420:2",
      "file": "services/meshDeformation3D.ts",
      "line": 420,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  originalPositions: Float32Array,",
          "  pins: Deformation3DPin[],",
          "  frame: number,"
        ],
        "after": [
          "  const positions = geometry.attributes.position;",
          "  const vertexCount = positions.count;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshDeformation3D.ts:458:4",
      "file": "services/meshDeformation3D.ts",
      "line": 458,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    geometry?: THREE.BufferGeometry,",
          "    squashStretch?: Partial<SquashStretchConfig>,",
          "    bounce?: Partial<BounceConfig>,"
        ],
        "after": [
          "    this.pinsByLayer.set(layerId, []);",
          "",
          "    if (geometry) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshDeformation3D.ts:528:30",
      "file": "services/meshDeformation3D.ts",
      "line": 528,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearLayer(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear a layer's deformation data",
          "   */"
        ],
        "after": [
          "    this.pinsByLayer.delete(layerId);",
          "    this.originalGeometries.delete(layerId);",
          "    this.squashStretchConfigs.delete(layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshDeformation3D.ts:538:13",
      "file": "services/meshDeformation3D.ts",
      "line": 538,
      "column": 13,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAll(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all data",
          "   */"
        ],
        "after": [
          "    this.pinsByLayer.clear();",
          "    this.originalGeometries.clear();",
          "    this.squashStretchConfigs.clear();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:162:40",
      "file": "services/meshParticleManager.ts",
      "line": 162,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "boundingBox: geometry.boundingBox?.clone() ?? new THREE.Box3(),",
      "context": {
        "before": [
          "      name,",
          "      source,",
          "      geometry,"
        ],
        "after": [
          "      boundingSphere: geometry.boundingSphere?.clone() ?? new THREE.Sphere(),",
          "      vertexCount: geometry.getAttribute(\"position\")?.count ?? 0,",
          "      faceCount: geometry.index"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:163:46",
      "file": "services/meshParticleManager.ts",
      "line": 163,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "boundingSphere: geometry.boundingSphere?.clone() ?? new THREE.Sphere(),",
      "context": {
        "before": [
          "      source,",
          "      geometry,",
          "      boundingBox: geometry.boundingBox?.clone() ?? new THREE.Box3(),"
        ],
        "after": [
          "      vertexCount: geometry.getAttribute(\"position\")?.count ?? 0,",
          "      faceCount: geometry.index",
          "        ? geometry.index.count / 3"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:164:53",
      "file": "services/meshParticleManager.ts",
      "line": 164,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "vertexCount: geometry.getAttribute(\"position\")?.count ?? 0,",
      "context": {
        "before": [
          "      geometry,",
          "      boundingBox: geometry.boundingBox?.clone() ?? new THREE.Box3(),",
          "      boundingSphere: geometry.boundingSphere?.clone() ?? new THREE.Sphere(),"
        ],
        "after": [
          "      faceCount: geometry.index",
          "        ? geometry.index.count / 3",
          "        : (geometry.getAttribute(\"position\")?.count ?? 0) / 3,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:167:45",
      "file": "services/meshParticleManager.ts",
      "line": 167,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": ": (geometry.getAttribute(\"position\")?.count ?? 0) / 3,",
      "context": {
        "before": [
          "      vertexCount: geometry.getAttribute(\"position\")?.count ?? 0,",
          "      faceCount: geometry.index",
          "        ? geometry.index.count / 3"
        ],
        "after": [
          "      config,",
          "    };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:292:22",
      "file": "services/meshParticleManager.ts",
      "line": 292,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "name ?? `${type?.charAt(0).toUpperCase()}${type?.slice(1)}`;",
      "context": {
        "before": [
          "",
          "    const id = `primitive_${type}_${size}_${detail}`;",
          "    const displayName ="
        ],
        "after": [
          "",
          "    return this.registerMesh(id, displayName, geometry, \"primitive\", {",
          "      source: \"primitive\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:292:54",
      "file": "services/meshParticleManager.ts",
      "line": 292,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "name ?? `${type?.charAt(0).toUpperCase()}${type?.slice(1)}`;",
      "context": {
        "before": [
          "",
          "    const id = `primitive_${type}_${size}_${detail}`;",
          "    const displayName ="
        ],
        "after": [
          "",
          "    return this.registerMesh(id, displayName, geometry, \"primitive\", {",
          "      source: \"primitive\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:379:4",
      "file": "services/meshParticleManager.ts",
      "line": 379,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      scale: THREE.Vector3 | number;",
          "      color?: THREE.Color;",
          "    }>,"
        ],
        "after": [
          "    const instance = this.instancedMeshes.get(meshId);",
          "    if (!instance) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:498:4",
      "file": "services/meshParticleManager.ts",
      "line": 498,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    meshId: string,",
          "    lodGeometries: THREE.BufferGeometry[],",
          "    lodDistances: number[],"
        ],
        "after": [
          "    const registration = this.meshRegistry.get(meshId);",
          "    if (!registration) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:646:29",
      "file": "services/meshParticleManager.ts",
      "line": 646,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "unregisterMesh(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Unregister a mesh",
          "   */"
        ],
        "after": [
          "    const registration = this.meshRegistry.get(id);",
          "    if (registration) {",
          "      registration.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:650:33",
      "file": "services/meshParticleManager.ts",
      "line": 650,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "registration.lodGeometries?.forEach((g) => g.dispose());",
      "context": {
        "before": [
          "    const registration = this.meshRegistry.get(id);",
          "    if (registration) {",
          "      registration.geometry.dispose();"
        ],
        "after": [
          "    }",
          "    this.meshRegistry.delete(id);",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:666:12",
      "file": "services/meshParticleManager.ts",
      "line": 666,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    // Dispose all geometries",
          "    for (const registration of this.meshRegistry.values()) {",
          "      registration.geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshParticleManager.ts:670:33",
      "file": "services/meshParticleManager.ts",
      "line": 670,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "registration.lodGeometries?.forEach((g) => g.dispose());",
      "context": {
        "before": [
          "    // Dispose all geometries",
          "    for (const registration of this.meshRegistry.values()) {",
          "      registration.geometry.dispose();"
        ],
        "after": [
          "    }",
          "    this.meshRegistry.clear();",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:474:27",
      "file": "services/meshWarpDeformation.ts",
      "line": 474,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "inFront: pin.inFront?.value,",
      "context": {
        "before": [
          "      position: { ...pin.position.value },",
          "      rotation: pin.rotation.value,",
          "      scale: pin.scale.value,"
        ],
        "after": [
          "    }));",
          "",
          "    // Triangulate the mesh (control points + pins)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:524:29",
      "file": "services/meshWarpDeformation.ts",
      "line": 524,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearMesh(layerId: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear cached mesh for a layer",
          "   */"
        ],
        "after": [
          "    this.meshCache.delete(layerId);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:535:4",
      "file": "services/meshWarpDeformation.ts",
      "line": 535,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    layerId: string,",
          "    pins: WarpPin[],",
          "    options: WarpWeightOptions = DEFAULT_WARP_WEIGHT_OPTIONS,"
        ],
        "after": [
          "    const mesh = this.meshCache.get(layerId);",
          "    if (!mesh) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:557:4",
      "file": "services/meshWarpDeformation.ts",
      "line": 557,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    layerId: string,",
          "    pin: WarpPin,",
          "    options: WarpWeightOptions = DEFAULT_WARP_WEIGHT_OPTIONS,"
        ],
        "after": [
          "    const mesh = this.meshCache.get(layerId);",
          "    if (!mesh) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:578:4",
      "file": "services/meshWarpDeformation.ts",
      "line": 578,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    layerId: string,",
          "    pinId: string,",
          "    options: WarpWeightOptions = DEFAULT_WARP_WEIGHT_OPTIONS,"
        ],
        "after": [
          "    const mesh = this.meshCache.get(layerId);",
          "    if (!mesh) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:658:39",
      "file": "services/meshWarpDeformation.ts",
      "line": 658,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.meshCache.get(layerId)?.pins ?? [];",
      "context": {
        "before": [
          "   * Get all pins for a layer",
          "   */",
          "  getPins(layerId: string): WarpPin[] {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:669:4",
      "file": "services/meshWarpDeformation.ts",
      "line": 669,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    pinId: string,",
          "    x: number,",
          "    y: number,"
        ],
        "after": [
          "    const mesh = this.meshCache.get(layerId);",
          "    if (!mesh) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/meshWarpDeformation.ts:682:19",
      "file": "services/meshWarpDeformation.ts",
      "line": 682,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAllMeshes(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all cached meshes",
          "   */"
        ],
        "after": [
          "    this.meshCache.clear();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:209:54",
      "file": "services/midi/MIDIService.ts",
      "line": 209,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private registerInput(id: string, input: MIDIInput): void {",
      "context": {
        "before": [
          "    return this.getDevices().filter((d) => d.type === \"output\");",
          "  }",
          ""
        ],
        "after": [
          "    this.inputs.set(id, input);",
          "    input.onmidimessage = (event) => this.handleMIDIMessage(id, event);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:214:56",
      "file": "services/midi/MIDIService.ts",
      "line": 214,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleStateChange(event: MIDIConnectionEvent): void {",
      "context": {
        "before": [
          "    input.onmidimessage = (event) => this.handleMIDIMessage(id, event);",
          "  }",
          ""
        ],
        "after": [
          "    const port = event.port;",
          "    if (!port) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:244:71",
      "file": "services/midi/MIDIService.ts",
      "line": 244,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleMIDIMessage(deviceId: string, event: MIDIMessageEvent): void {",
      "context": {
        "before": [
          "  // MESSAGE HANDLING",
          "  // =============================================================================",
          ""
        ],
        "after": [
          "    if (!event.data || event.data.length < 1) return;",
          "",
          "    const message = this.parseMIDIMessage(event.data, event.timeStamp);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:336:44",
      "file": "services/midi/MIDIService.ts",
      "line": 336,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateState(message: MIDIMessage): void {",
      "context": {
        "before": [
          "    return message;",
          "  }",
          ""
        ],
        "after": [
          "    if (",
          "      message.type === \"control-change\" &&",
          "      message.controller !== undefined &&"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:367:49",
      "file": "services/midi/MIDIService.ts",
      "line": 367,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addGlobalListener(callback: MIDIEventCallback): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add a listener for all MIDI messages",
          "   */"
        ],
        "after": [
          "    this.globalListeners.add(callback);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:374:52",
      "file": "services/midi/MIDIService.ts",
      "line": 374,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeGlobalListener(callback: MIDIEventCallback): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a global listener",
          "   */"
        ],
        "after": [
          "    this.globalListeners.delete(callback);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:381:67",
      "file": "services/midi/MIDIService.ts",
      "line": 381,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addDeviceListener(deviceId: string, callback: MIDIEventCallback): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add a listener for a specific device",
          "   */"
        ],
        "after": [
          "    if (!this.listeners.has(deviceId)) {",
          "      this.listeners.set(deviceId, new Set());",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:385:33",
      "file": "services/midi/MIDIService.ts",
      "line": 385,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.listeners.get(deviceId)?.add(callback);",
      "context": {
        "before": [
          "    if (!this.listeners.has(deviceId)) {",
          "      this.listeners.set(deviceId, new Set());",
          "    }"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:391:70",
      "file": "services/midi/MIDIService.ts",
      "line": 391,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeDeviceListener(deviceId: string, callback: MIDIEventCallback): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a device-specific listener",
          "   */"
        ],
        "after": [
          "    this.listeners.get(deviceId)?.delete(callback);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:392:33",
      "file": "services/midi/MIDIService.ts",
      "line": 392,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.listeners.get(deviceId)?.delete(callback);",
      "context": {
        "before": [
          "   * Remove a device-specific listener",
          "   */",
          "  removeDeviceListener(deviceId: string, callback: MIDIEventCallback): void {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:664:12",
      "file": "services/midi/MIDIService.ts",
      "line": 664,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose of MIDI service",
          "   */"
        ],
        "after": [
          "    // Remove all listeners from inputs",
          "    this.inputs.forEach((input) => {",
          "      input.onmidimessage = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midi/MIDIService.ts:701:37",
      "file": "services/midi/MIDIService.ts",
      "line": 701,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function disposeMIDIService(): void {",
      "context": {
        "before": [
          "  return midiServiceInstance;",
          "}",
          ""
        ],
        "after": [
          "  if (midiServiceInstance) {",
          "    midiServiceInstance.dispose();",
          "    midiServiceInstance = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/midiToKeyframes.ts:273:35",
      "file": "services/midiToKeyframes.ts",
      "line": 273,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "let currentBpm = tempoChanges[0]?.bpm ?? 120;",
      "context": {
        "before": [
          "",
          "  let totalSeconds = 0;",
          "  let lastTick = 0;"
        ],
        "after": [
          "",
          "  // Process each tempo change up to the target tick",
          "  for (const change of tempoChanges) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/midiToKeyframes.ts:661:28",
      "file": "services/midiToKeyframes.ts",
      "line": 661,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(config.noteRange?.max ?? 127) - (config.noteRange?.min ?? 0);",
      "context": {
        "before": [
          "      case \"notePitch\": {",
          "        // Value based on note number",
          "        const pitchRange ="
        ],
        "after": [
          "        const normalizedPitch =",
          "          (note.noteNumber - (config.noteRange?.min ?? 0)) / pitchRange;",
          "        value ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/midiToKeyframes.ts:661:61",
      "file": "services/midiToKeyframes.ts",
      "line": 661,
      "column": 61,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(config.noteRange?.max ?? 127) - (config.noteRange?.min ?? 0);",
      "context": {
        "before": [
          "      case \"notePitch\": {",
          "        // Value based on note number",
          "        const pitchRange ="
        ],
        "after": [
          "        const normalizedPitch =",
          "          (note.noteNumber - (config.noteRange?.min ?? 0)) / pitchRange;",
          "        value ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/midiToKeyframes.ts:663:47",
      "file": "services/midiToKeyframes.ts",
      "line": 663,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(note.noteNumber - (config.noteRange?.min ?? 0)) / pitchRange;",
      "context": {
        "before": [
          "        const pitchRange =",
          "          (config.noteRange?.max ?? 127) - (config.noteRange?.min ?? 0);",
          "        const normalizedPitch ="
        ],
        "after": [
          "        value =",
          "          config.valueMin +",
          "          normalizedPitch * (config.valueMax - config.valueMin);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:102:22",
      "file": "services/modelExport.ts",
      "line": 102,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fov: cameras[0]?.angleOfView ?? 39.6,",
      "context": {
        "before": [
          "    metadata: {",
          "      frameCount: cameras.length,",
          "      fps,"
        ],
        "after": [
          "      nearClip: cameras[0]?.nearClip ?? 1,",
          "      farClip: cameras[0]?.farClip ?? 10000,",
          "      width,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:103:27",
      "file": "services/modelExport.ts",
      "line": 103,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "nearClip: cameras[0]?.nearClip ?? 1,",
      "context": {
        "before": [
          "      frameCount: cameras.length,",
          "      fps,",
          "      fov: cameras[0]?.angleOfView ?? 39.6,"
        ],
        "after": [
          "      farClip: cameras[0]?.farClip ?? 10000,",
          "      width,",
          "      height,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:104:26",
      "file": "services/modelExport.ts",
      "line": 104,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "farClip: cameras[0]?.farClip ?? 10000,",
      "context": {
        "before": [
          "      fps,",
          "      fov: cameras[0]?.angleOfView ?? 39.6,",
          "      nearClip: cameras[0]?.nearClip ?? 1,"
        ],
        "after": [
          "      width,",
          "      height,",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:141:36",
      "file": "services/modelExport.ts",
      "line": 141,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const numFrames = trajectories[0]?.points.length ?? 0;",
      "context": {
        "before": [
          "  height: number,",
          "  fps: number,",
          "): WanMoveTrajectory {"
        ],
        "after": [
          "",
          "  return {",
          "    tracks: trajectories.map((t) => t.points.map((p) => [p.x, p.y])),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:318:62",
      "file": "services/modelExport.ts",
      "line": 318,
      "column": 62,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (splineData.animated && splineData.animatedControlPoints?.length) {",
      "context": {
        "before": [
          "  const frameCount = endFrame - startFrame + 1;",
          "",
          "  // Check if using animated control points"
        ],
        "after": [
          "    return splineData.animatedControlPoints.map((acp) => {",
          "      const points: Array<{ frame: number; x: number; y: number }> = [];",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/modelExport.ts:1189:54",
      "file": "services/modelExport.ts",
      "line": 1189,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const shape = [trajectories.length, trajectories[0]?.length || 0, 2];",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "  const header = createNpyHeader(shape, \"<f4\");",
          "",
          "  // Create float32 data"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/motionBlur.ts:130:53",
      "file": "services/motionBlur.ts",
      "line": 130,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSettings(settings: Partial<MotionBlurSettings>): void {",
      "context": {
        "before": [
          "  // SETTINGS",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.settings = { ...this.settings, ...settings };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/motionBlur.ts:138:40",
      "file": "services/motionBlur.ts",
      "line": 138,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resize(width: number, height: number): void {",
      "context": {
        "before": [
          "    return { ...this.settings };",
          "  }",
          ""
        ],
        "after": [
          "    this.workCanvas = new OffscreenCanvas(width, height);",
          "    this.workCtx = this.workCanvas.getContext(\"2d\")!;",
          "    this.outputCanvas = new OffscreenCanvas(width, height);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/motionBlur.ts:243:4",
      "file": "services/motionBlur.ts",
      "line": 243,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    canvas: OffscreenCanvas | HTMLCanvasElement,",
          "    velocity: VelocityData,",
          "    frame: number,"
        ],
        "after": [
          "    // Clone the canvas",
          "    const cloned = new OffscreenCanvas(canvas.width, canvas.height);",
          "    const ctx = cloned.getContext(\"2d\")!;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/motionBlur.ts:606:16",
      "file": "services/motionBlur.ts",
      "line": 606,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearBuffer(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear frame buffer (call when seeking or starting new playback)",
          "   */"
        ],
        "after": [
          "    this.frameBuffer = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/motionReactivity.ts:363:51",
      "file": "services/motionReactivity.ts",
      "line": 363,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearMotionCache(layerId?: string): void {",
      "context": {
        "before": [
          "/**",
          " * Clear motion state cache for a layer",
          " */"
        ],
        "after": [
          "  if (layerId) {",
          "    motionStateCache.delete(layerId);",
          "  } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/motionRecording.ts:449:44",
      "file": "services/motionRecording.ts",
      "line": 449,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "start(initialX: number, initialY: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Start recording session",
          "   */"
        ],
        "after": [
          "    this.samples = [];",
          "    this.startTime = performance.now();",
          "    this.lastSampleTime = 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/motionRecording.ts:463:34",
      "file": "services/motionRecording.ts",
      "line": 463,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addSample(x: number, y: number): void {",
      "context": {
        "before": [
          "   * Add a sample during recording",
          "   * Respects minimum sample interval for performance",
          "   */"
        ],
        "after": [
          "    if (!this.isRecording) return;",
          "",
          "    const now = performance.now();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:426:32",
      "file": "services/particleGPU.ts",
      "line": 426,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "    this.device = caps.device;",
          "    this.adapter = caps.adapter;",
          "    // Validate maxParticles to prevent buffer allocation errors"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 1_000_000)",
          "      : 10000;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:489:26",
      "file": "services/particleGPU.ts",
      "line": 489,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private createBuffers(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Create GPU buffers for particle data",
          "   */"
        ],
        "after": [
          "    if (!this.device) return;",
          "",
          "    const particleCount = this.maxParticles;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:595:41",
      "file": "services/particleGPU.ts",
      "line": 595,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "uploadParticles(data: GPUParticleData): void {",
      "context": {
        "before": [
          "  /**",
          "   * Upload particle data to GPU",
          "   */"
        ],
        "after": [
          "    if (!this.device || !this.initialized) return;",
          "",
          "    // Cast Float32Array to BufferSource for WebGPU compatibility"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:628:4",
      "file": "services/particleGPU.ts",
      "line": 628,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    config: GPUParticleConfig,",
          "    gravityWells: GPUGravityWell[],",
          "    vortices: GPUVortex[],"
        ],
        "after": [
          "    if (!this.device || !this.initialized) return;",
          "",
          "    // Config buffer"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:684:40",
      "file": "services/particleGPU.ts",
      "line": 684,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispatchUpdate(particleCount: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Run the particle update compute shader",
          "   */"
        ],
        "after": [
          "    if (!this.device || !this.initialized || !this.updatePipeline) return;",
          "",
          "    // Create bind group if needed"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:726:4",
      "file": "services/particleGPU.ts",
      "line": 726,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    sizeStart: number,",
          "    sizeEnd: number,",
          "    easingType: number,"
        ],
        "after": [
          "    if (!this.device || !this.initialized || !this.modulationPipeline) return;",
          "",
          "    // Upload modulation config"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:822:37",
      "file": "services/particleGPU.ts",
      "line": 822,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "await this.stagingPositionBuffer?.mapAsync(GPUMapMode.READ);",
      "context": {
        "before": [
          "    this.device.queue.submit([commandEncoder.finish()]);",
          "",
          "    // Map and read staging buffers"
        ],
        "after": [
          "    await this.stagingVelocityBuffer?.mapAsync(GPUMapMode.READ);",
          "    await this.stagingPropertiesBuffer?.mapAsync(GPUMapMode.READ);",
          "    await this.stagingColorBuffer?.mapAsync(GPUMapMode.READ);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:823:37",
      "file": "services/particleGPU.ts",
      "line": 823,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "await this.stagingVelocityBuffer?.mapAsync(GPUMapMode.READ);",
      "context": {
        "before": [
          "",
          "    // Map and read staging buffers",
          "    await this.stagingPositionBuffer?.mapAsync(GPUMapMode.READ);"
        ],
        "after": [
          "    await this.stagingPropertiesBuffer?.mapAsync(GPUMapMode.READ);",
          "    await this.stagingColorBuffer?.mapAsync(GPUMapMode.READ);",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:824:39",
      "file": "services/particleGPU.ts",
      "line": 824,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "await this.stagingPropertiesBuffer?.mapAsync(GPUMapMode.READ);",
      "context": {
        "before": [
          "    // Map and read staging buffers",
          "    await this.stagingPositionBuffer?.mapAsync(GPUMapMode.READ);",
          "    await this.stagingVelocityBuffer?.mapAsync(GPUMapMode.READ);"
        ],
        "after": [
          "    await this.stagingColorBuffer?.mapAsync(GPUMapMode.READ);",
          "",
          "    const posRange = this.stagingPositionBuffer?.getMappedRange();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:825:34",
      "file": "services/particleGPU.ts",
      "line": 825,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "await this.stagingColorBuffer?.mapAsync(GPUMapMode.READ);",
      "context": {
        "before": [
          "    await this.stagingPositionBuffer?.mapAsync(GPUMapMode.READ);",
          "    await this.stagingVelocityBuffer?.mapAsync(GPUMapMode.READ);",
          "    await this.stagingPropertiesBuffer?.mapAsync(GPUMapMode.READ);"
        ],
        "after": [
          "",
          "    const posRange = this.stagingPositionBuffer?.getMappedRange();",
          "    const velRange = this.stagingVelocityBuffer?.getMappedRange();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:827:48",
      "file": "services/particleGPU.ts",
      "line": 827,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const posRange = this.stagingPositionBuffer?.getMappedRange();",
      "context": {
        "before": [
          "    await this.stagingPropertiesBuffer?.mapAsync(GPUMapMode.READ);",
          "    await this.stagingColorBuffer?.mapAsync(GPUMapMode.READ);",
          ""
        ],
        "after": [
          "    const velRange = this.stagingVelocityBuffer?.getMappedRange();",
          "    const propRange = this.stagingPropertiesBuffer?.getMappedRange();",
          "    const colorRange = this.stagingColorBuffer?.getMappedRange();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:828:48",
      "file": "services/particleGPU.ts",
      "line": 828,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const velRange = this.stagingVelocityBuffer?.getMappedRange();",
      "context": {
        "before": [
          "    await this.stagingColorBuffer?.mapAsync(GPUMapMode.READ);",
          "",
          "    const posRange = this.stagingPositionBuffer?.getMappedRange();"
        ],
        "after": [
          "    const propRange = this.stagingPropertiesBuffer?.getMappedRange();",
          "    const colorRange = this.stagingColorBuffer?.getMappedRange();",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:829:51",
      "file": "services/particleGPU.ts",
      "line": 829,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const propRange = this.stagingPropertiesBuffer?.getMappedRange();",
      "context": {
        "before": [
          "",
          "    const posRange = this.stagingPositionBuffer?.getMappedRange();",
          "    const velRange = this.stagingVelocityBuffer?.getMappedRange();"
        ],
        "after": [
          "    const colorRange = this.stagingColorBuffer?.getMappedRange();",
          "",
          "    const positions = posRange ? new Float32Array(posRange.slice(0)) : new Float32Array(0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:830:47",
      "file": "services/particleGPU.ts",
      "line": 830,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const colorRange = this.stagingColorBuffer?.getMappedRange();",
      "context": {
        "before": [
          "    const posRange = this.stagingPositionBuffer?.getMappedRange();",
          "    const velRange = this.stagingVelocityBuffer?.getMappedRange();",
          "    const propRange = this.stagingPropertiesBuffer?.getMappedRange();"
        ],
        "after": [
          "",
          "    const positions = posRange ? new Float32Array(posRange.slice(0)) : new Float32Array(0);",
          "    const velocities = velRange ? new Float32Array(velRange.slice(0)) : new Float32Array(0);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:837:31",
      "file": "services/particleGPU.ts",
      "line": 837,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingPositionBuffer?.unmap();",
      "context": {
        "before": [
          "    const properties = propRange ? new Float32Array(propRange.slice(0)) : new Float32Array(0);",
          "    const colors = colorRange ? new Float32Array(colorRange.slice(0)) : new Float32Array(0);",
          ""
        ],
        "after": [
          "    this.stagingVelocityBuffer?.unmap();",
          "    this.stagingPropertiesBuffer?.unmap();",
          "    this.stagingColorBuffer?.unmap();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:838:31",
      "file": "services/particleGPU.ts",
      "line": 838,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingVelocityBuffer?.unmap();",
      "context": {
        "before": [
          "    const colors = colorRange ? new Float32Array(colorRange.slice(0)) : new Float32Array(0);",
          "",
          "    this.stagingPositionBuffer?.unmap();"
        ],
        "after": [
          "    this.stagingPropertiesBuffer?.unmap();",
          "    this.stagingColorBuffer?.unmap();",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:839:33",
      "file": "services/particleGPU.ts",
      "line": 839,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingPropertiesBuffer?.unmap();",
      "context": {
        "before": [
          "",
          "    this.stagingPositionBuffer?.unmap();",
          "    this.stagingVelocityBuffer?.unmap();"
        ],
        "after": [
          "    this.stagingColorBuffer?.unmap();",
          "",
          "    return {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:840:28",
      "file": "services/particleGPU.ts",
      "line": 840,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingColorBuffer?.unmap();",
      "context": {
        "before": [
          "    this.stagingPositionBuffer?.unmap();",
          "    this.stagingVelocityBuffer?.unmap();",
          "    this.stagingPropertiesBuffer?.unmap();"
        ],
        "after": [
          "",
          "    return {",
          "      positions,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:858:12",
      "file": "services/particleGPU.ts",
      "line": 858,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose GPU resources",
          "   */"
        ],
        "after": [
          "    this.positionBuffer?.destroy();",
          "    this.velocityBuffer?.destroy();",
          "    this.propertiesBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:859:24",
      "file": "services/particleGPU.ts",
      "line": 859,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.positionBuffer?.destroy();",
      "context": {
        "before": [
          "   * Dispose GPU resources",
          "   */",
          "  dispose(): void {"
        ],
        "after": [
          "    this.velocityBuffer?.destroy();",
          "    this.propertiesBuffer?.destroy();",
          "    this.colorBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:860:24",
      "file": "services/particleGPU.ts",
      "line": 860,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.velocityBuffer?.destroy();",
      "context": {
        "before": [
          "   */",
          "  dispose(): void {",
          "    this.positionBuffer?.destroy();"
        ],
        "after": [
          "    this.propertiesBuffer?.destroy();",
          "    this.colorBuffer?.destroy();",
          "    this.configBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:861:26",
      "file": "services/particleGPU.ts",
      "line": 861,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.propertiesBuffer?.destroy();",
      "context": {
        "before": [
          "  dispose(): void {",
          "    this.positionBuffer?.destroy();",
          "    this.velocityBuffer?.destroy();"
        ],
        "after": [
          "    this.colorBuffer?.destroy();",
          "    this.configBuffer?.destroy();",
          "    this.gravityWellBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:862:21",
      "file": "services/particleGPU.ts",
      "line": 862,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.colorBuffer?.destroy();",
      "context": {
        "before": [
          "    this.positionBuffer?.destroy();",
          "    this.velocityBuffer?.destroy();",
          "    this.propertiesBuffer?.destroy();"
        ],
        "after": [
          "    this.configBuffer?.destroy();",
          "    this.gravityWellBuffer?.destroy();",
          "    this.vortexBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:863:22",
      "file": "services/particleGPU.ts",
      "line": 863,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.configBuffer?.destroy();",
      "context": {
        "before": [
          "    this.velocityBuffer?.destroy();",
          "    this.propertiesBuffer?.destroy();",
          "    this.colorBuffer?.destroy();"
        ],
        "after": [
          "    this.gravityWellBuffer?.destroy();",
          "    this.vortexBuffer?.destroy();",
          "    this.modulationConfigBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:864:27",
      "file": "services/particleGPU.ts",
      "line": 864,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.gravityWellBuffer?.destroy();",
      "context": {
        "before": [
          "    this.propertiesBuffer?.destroy();",
          "    this.colorBuffer?.destroy();",
          "    this.configBuffer?.destroy();"
        ],
        "after": [
          "    this.vortexBuffer?.destroy();",
          "    this.modulationConfigBuffer?.destroy();",
          "    this.stagingPositionBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:865:22",
      "file": "services/particleGPU.ts",
      "line": 865,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.vortexBuffer?.destroy();",
      "context": {
        "before": [
          "    this.colorBuffer?.destroy();",
          "    this.configBuffer?.destroy();",
          "    this.gravityWellBuffer?.destroy();"
        ],
        "after": [
          "    this.modulationConfigBuffer?.destroy();",
          "    this.stagingPositionBuffer?.destroy();",
          "    this.stagingVelocityBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:866:32",
      "file": "services/particleGPU.ts",
      "line": 866,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.modulationConfigBuffer?.destroy();",
      "context": {
        "before": [
          "    this.configBuffer?.destroy();",
          "    this.gravityWellBuffer?.destroy();",
          "    this.vortexBuffer?.destroy();"
        ],
        "after": [
          "    this.stagingPositionBuffer?.destroy();",
          "    this.stagingVelocityBuffer?.destroy();",
          "    this.stagingPropertiesBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:867:31",
      "file": "services/particleGPU.ts",
      "line": 867,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingPositionBuffer?.destroy();",
      "context": {
        "before": [
          "    this.gravityWellBuffer?.destroy();",
          "    this.vortexBuffer?.destroy();",
          "    this.modulationConfigBuffer?.destroy();"
        ],
        "after": [
          "    this.stagingVelocityBuffer?.destroy();",
          "    this.stagingPropertiesBuffer?.destroy();",
          "    this.stagingColorBuffer?.destroy();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:868:31",
      "file": "services/particleGPU.ts",
      "line": 868,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingVelocityBuffer?.destroy();",
      "context": {
        "before": [
          "    this.vortexBuffer?.destroy();",
          "    this.modulationConfigBuffer?.destroy();",
          "    this.stagingPositionBuffer?.destroy();"
        ],
        "after": [
          "    this.stagingPropertiesBuffer?.destroy();",
          "    this.stagingColorBuffer?.destroy();",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:869:33",
      "file": "services/particleGPU.ts",
      "line": 869,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingPropertiesBuffer?.destroy();",
      "context": {
        "before": [
          "    this.modulationConfigBuffer?.destroy();",
          "    this.stagingPositionBuffer?.destroy();",
          "    this.stagingVelocityBuffer?.destroy();"
        ],
        "after": [
          "    this.stagingColorBuffer?.destroy();",
          "",
          "    this.positionBuffer = null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:870:28",
      "file": "services/particleGPU.ts",
      "line": 870,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.stagingColorBuffer?.destroy();",
      "context": {
        "before": [
          "    this.stagingPositionBuffer?.destroy();",
          "    this.stagingVelocityBuffer?.destroy();",
          "    this.stagingPropertiesBuffer?.destroy();"
        ],
        "after": [
          "",
          "    this.positionBuffer = null;",
          "    this.velocityBuffer = null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:932:32",
      "file": "services/particleGPU.ts",
      "line": 932,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.maxParticles = Number.isFinite(maxParticles) && maxParticles > 0",
      "context": {
        "before": [
          "",
          "  constructor(maxParticles: number) {",
          "    // Validate maxParticles to prevent Float32Array allocation errors"
        ],
        "after": [
          "      ? Math.min(Math.floor(maxParticles), 1_000_000)",
          "      : 10000;",
          "    // Allocate CPU arrays"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:972:16",
      "file": "services/particleGPU.ts",
      "line": 972,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "uploadToGPU(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Upload particles to GPU (if enabled)",
          "   */"
        ],
        "after": [
          "    if (!this.useGPU || !this.gpu) return;",
          "",
          "    this.gpu.uploadParticles({"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:1013:4",
      "file": "services/particleGPU.ts",
      "line": 1013,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    config: GPUParticleConfig,",
          "    gravityWells: GPUGravityWell[],",
          "    vortices: GPUVortex[],"
        ],
        "after": [
          "    const dt = config.deltaTime;",
          "    const friction = 1 - config.friction;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:1134:34",
      "file": "services/particleGPU.ts",
      "line": 1134,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setParticleCount(count: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set particle count",
          "   */"
        ],
        "after": [
          "    this.particleCount = Math.min(count, this.maxParticles);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:1236:12",
      "file": "services/particleGPU.ts",
      "line": 1236,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose resources",
          "   */"
        ],
        "after": [
          "    this.gpu?.dispose();",
          "    this.gpu = null;",
          "    this.useGPU = false;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:1237:13",
      "file": "services/particleGPU.ts",
      "line": 1237,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.gpu?.dispose();",
      "context": {
        "before": [
          "   * Dispose resources",
          "   */",
          "  dispose(): void {"
        ],
        "after": [
          "    this.gpu = null;",
          "    this.useGPU = false;",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleGPU.ts:1259:46",
      "file": "services/particleGPU.ts",
      "line": 1259,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const adapter = await navigator.gpu?.requestAdapter();",
      "context": {
        "before": [
          "      // Check WebGPU availability",
          "      if (typeof navigator !== \"undefined\" && \"gpu\" in navigator) {",
          "        try {"
        ],
        "after": [
          "          return !!adapter;",
          "        } catch {",
          "          return false;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particles/particleDefaults.ts:41:50",
      "file": "services/particles/particleDefaults.ts",
      "line": 41,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function resetIdCounter(value: number = 0): void {",
      "context": {
        "before": [
          "/**",
          " * Reset ID counter (for testing purposes)",
          " */"
        ],
        "after": [
          "  idCounter = value;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:62:2",
      "file": "services/particles/particleRenderer.ts",
      "line": 62,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  height: number,",
          "  context: ParticleRenderContext,",
          "  spatialGrid?: SpatialGrid,"
        ],
        "after": [
          "  const {",
          "    particles,",
          "    renderOptions: options,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:89:26",
      "file": "services/particles/particleRenderer.ts",
      "line": 89,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (options.connections?.enabled && spatialGrid) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Render particle connections first, before particles"
        ],
        "after": [
          "    renderConnections(",
          "      ctx,",
          "      width,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:177:2",
      "file": "services/particles/particleRenderer.ts",
      "line": 177,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  options: RenderOptions,",
          "  emitters: Map<string, EmitterConfig>,",
          "  spriteCache: Map<string, HTMLImageElement | ImageBitmap>,"
        ],
        "after": [
          "  // Calculate velocity magnitude",
          "  const velocityMag = Math.sqrt(p.vx * p.vx + p.vy * p.vy);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:271:2",
      "file": "services/particles/particleRenderer.ts",
      "line": 271,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  options?: RenderOptions,",
          "  emitters?: Map<string, EmitterConfig>,",
          "  spriteCache?: Map<string, HTMLImageElement | ImageBitmap>,"
        ],
        "after": [
          "  // Set fill color if provided",
          "  if (color) {",
          "    ctx.fillStyle = `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3] / 255})`;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:330:2",
      "file": "services/particles/particleRenderer.ts",
      "line": 330,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  ctx: CanvasRenderingContext2D,",
          "  size: number,",
          "  shape: RenderOptions[\"particleShape\"],"
        ],
        "after": [
          "  switch (shape) {",
          "    case \"circle\":",
          "      ctx.beginPath();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:370:2",
      "file": "services/particles/particleRenderer.ts",
      "line": 370,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  options: RenderOptions | undefined,",
          "  emitters: Map<string, EmitterConfig>,",
          "  spriteCache: Map<string, HTMLImageElement | ImageBitmap>,"
        ],
        "after": [
          "  const emitter = emitters.get(particle.emitterId);",
          "  if (!emitter?.sprite?.enabled) {",
          "    // Fallback to circle if no sprite"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:372:15",
      "file": "services/particles/particleRenderer.ts",
      "line": 372,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!emitter?.sprite?.enabled) {",
      "context": {
        "before": [
          "  spriteCache: Map<string, HTMLImageElement | ImageBitmap>,",
          "): void {",
          "  const emitter = emitters.get(particle.emitterId);"
        ],
        "after": [
          "    // Fallback to circle if no sprite",
          "    ctx.beginPath();",
          "    ctx.arc(x, y, size / 2, 0, Math.PI * 2);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:372:23",
      "file": "services/particles/particleRenderer.ts",
      "line": 372,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!emitter?.sprite?.enabled) {",
      "context": {
        "before": [
          "  spriteCache: Map<string, HTMLImageElement | ImageBitmap>,",
          "): void {",
          "  const emitter = emitters.get(particle.emitterId);"
        ],
        "after": [
          "    // Fallback to circle if no sprite",
          "    ctx.beginPath();",
          "    ctx.arc(x, y, size / 2, 0, Math.PI * 2);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:393:38",
      "file": "services/particles/particleRenderer.ts",
      "line": 393,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "ctx.imageSmoothingEnabled = options?.spriteSmoothing ?? true;",
      "context": {
        "before": [
          "  ctx.save();",
          "",
          "  // Set image smoothing"
        ],
        "after": [
          "",
          "  // Apply opacity based on particle age if enabled",
          "  let alpha = particle.color[3] / 255;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:397:14",
      "file": "services/particles/particleRenderer.ts",
      "line": 397,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (options?.spriteOpacityByAge) {",
      "context": {
        "before": [
          "",
          "  // Apply opacity based on particle age if enabled",
          "  let alpha = particle.color[3] / 255;"
        ],
        "after": [
          "    // Guard against lifetime=0 to prevent division by zero",
          "    const safeLifetime = particle.lifetime > 0 ? particle.lifetime : 1;",
          "    const lifeRatio = particle.age / safeLifetime;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:460:2",
      "file": "services/particles/particleRenderer.ts",
      "line": 460,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  spikes: number,",
          "  outerRadius: number,",
          "  innerRadius: number,"
        ],
        "after": [
          "  ctx.beginPath();",
          "  let rotation = -Math.PI / 2;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:497:2",
      "file": "services/particles/particleRenderer.ts",
      "line": 497,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  config: ConnectionConfig,",
          "  spatialGrid: SpatialGrid,",
          "  getNeighbors: (p: Particle, grid: SpatialGrid) => Particle[],"
        ],
        "after": [
          "  if (!config.enabled || particles.length < 2) {",
          "    return;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/particleRenderer.ts:562:17",
      "file": "services/particles/particleRenderer.ts",
      "line": 562,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (connConfig?.enabled && particles.length >= 2) {",
      "context": {
        "before": [
          "",
          "  // Draw connections as black (exclude) if enabled",
          "  const connConfig = renderOptions.connections;"
        ],
        "after": [
          "    ctx.strokeStyle = \"#000000\";",
          "    ctx.lineWidth = connConfig.lineWidth * 2; // Slightly thicker for matte",
          "    // Note: For mask rendering, we use a simplified connection approach"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particles/SeededRandom.ts:25:10",
      "file": "services/particles/SeededRandom.ts",
      "line": 25,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** Reset to initial seed */"
        ],
        "after": [
          "    this.state = this.initialSeed;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/SeededRandom.ts:30:24",
      "file": "services/particles/SeededRandom.ts",
      "line": 30,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSeed(seed: number): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** Reset to a new seed */"
        ],
        "after": [
          "    this.initialSeed = seed;",
          "    this.state = seed;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particles/SeededRandom.ts:41:26",
      "file": "services/particles/SeededRandom.ts",
      "line": 41,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setState(state: number): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  /** Restore state from checkpoint */"
        ],
        "after": [
          "    this.state = state;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:178:24",
      "file": "services/particleSystem.ts",
      "line": 178,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSeed(seed: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set new seed and reset RNG",
          "   */"
        ],
        "after": [
          "    this.rng.setSeed(seed);",
          "    // Recreate noise with new seed",
          "    this.noise2D = createNoise2D(() => this.rng.next());"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:187:29",
      "file": "services/particleSystem.ts",
      "line": 187,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setNoiseTime(time: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set noise time for turbulence continuity (used in deserialization)",
          "   */"
        ],
        "after": [
          "    this.noiseTime = Number.isFinite(time) && time >= 0 ? time : 0;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:188:29",
      "file": "services/particleSystem.ts",
      "line": 188,
      "column": 29,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "this.noiseTime = Number.isFinite(time) && time >= 0 ? time : 0;",
      "context": {
        "before": [
          "   * Set noise time for turbulence continuity (used in deserialization)",
          "   */",
          "  setNoiseTime(time: number): void {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:194:43",
      "file": "services/particleSystem.ts",
      "line": 194,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setRenderOptions(options: RenderOptions): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set render options (used in deserialization)",
          "   */"
        ],
        "after": [
          "    this.renderOptions = options;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:209:57",
      "file": "services/particleSystem.ts",
      "line": 209,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSplineProvider(provider: SplinePathProvider | null): void {",
      "context": {
        "before": [
          "   * Set the spline path provider callback",
          "   * This allows emitters with shape='spline' to query spline positions",
          "   */"
        ],
        "after": [
          "    this.splineProvider = provider;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:224:33",
      "file": "services/particleSystem.ts",
      "line": 224,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCurrentFrame(frame: number): void {",
      "context": {
        "before": [
          "   * Set the current frame for spline queries",
          "   * Called by the engine before stepping the simulation",
          "   */"
        ],
        "after": [
          "    this.currentFrame = frame;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:242:20",
      "file": "services/particleSystem.ts",
      "line": 242,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (emitter?.sprite) {",
      "context": {
        "before": [
          "      img.onload = () => {",
          "        this.spriteCache.set(emitterId, img);",
          "        const emitter = this.emitters.get(emitterId);"
        ],
        "after": [
          "          emitter.sprite.imageData = img;",
          "        }",
          "        resolve();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:258:4",
      "file": "services/particleSystem.ts",
      "line": 258,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  setSpriteImage(",
          "    emitterId: string,",
          "    image: HTMLImageElement | ImageBitmap,"
        ],
        "after": [
          "    this.spriteCache.set(emitterId, image);",
          "    const emitter = this.emitters.get(emitterId);",
          "    if (emitter?.sprite) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:261:16",
      "file": "services/particleSystem.ts",
      "line": 261,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (emitter?.sprite) {",
      "context": {
        "before": [
          "  ): void {",
          "    this.spriteCache.set(emitterId, image);",
          "    const emitter = this.emitters.get(emitterId);"
        ],
        "after": [
          "      emitter.sprite.imageData = image;",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:277:36",
      "file": "services/particleSystem.ts",
      "line": 277,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addEmitter(config: EmitterConfig): void {",
      "context": {
        "before": [
          "  // Emitter Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.emitters.set(config.id, { ...config });",
          "    this.emissionAccumulators.set(config.id, 0);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:292:61",
      "file": "services/particleSystem.ts",
      "line": 292,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateEmitter(id: string, updates: Partial<EmitterConfig>): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const emitter = this.emitters.get(id);",
          "    if (emitter) {",
          "      Object.assign(emitter, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:299:28",
      "file": "services/particleSystem.ts",
      "line": 299,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeEmitter(id: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.emitters.delete(id);",
          "    this.emissionAccumulators.delete(id);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:316:44",
      "file": "services/particleSystem.ts",
      "line": 316,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addGravityWell(config: GravityWellConfig): void {",
      "context": {
        "before": [
          "  // Gravity Well Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.gravityWells.set(config.id, { ...config });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:320:69",
      "file": "services/particleSystem.ts",
      "line": 320,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateGravityWell(id: string, updates: Partial<GravityWellConfig>): void {",
      "context": {
        "before": [
          "    this.gravityWells.set(config.id, { ...config });",
          "  }",
          ""
        ],
        "after": [
          "    const well = this.gravityWells.get(id);",
          "    if (well) {",
          "      Object.assign(well, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:327:32",
      "file": "services/particleSystem.ts",
      "line": 327,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeGravityWell(id: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.gravityWells.delete(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:339:34",
      "file": "services/particleSystem.ts",
      "line": 339,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addVortex(config: VortexConfig): void {",
      "context": {
        "before": [
          "  // Vortex Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.vortices.set(config.id, { ...config });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:343:59",
      "file": "services/particleSystem.ts",
      "line": 343,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateVortex(id: string, updates: Partial<VortexConfig>): void {",
      "context": {
        "before": [
          "    this.vortices.set(config.id, { ...config });",
          "  }",
          ""
        ],
        "after": [
          "    const vortex = this.vortices.get(id);",
          "    if (vortex) {",
          "      Object.assign(vortex, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:350:27",
      "file": "services/particleSystem.ts",
      "line": 350,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeVortex(id: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.vortices.delete(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:362:52",
      "file": "services/particleSystem.ts",
      "line": 362,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addLorenzAttractor(config: LorenzAttractorConfig): void {",
      "context": {
        "before": [
          "  // Lorenz Attractor Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.lorenzAttractors.set(config.id, { ...config });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:369:4",
      "file": "services/particleSystem.ts",
      "line": 369,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  updateLorenzAttractor(",
          "    id: string,",
          "    updates: Partial<LorenzAttractorConfig>,"
        ],
        "after": [
          "    const attractor = this.lorenzAttractors.get(id);",
          "    if (attractor) {",
          "      Object.assign(attractor, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:376:36",
      "file": "services/particleSystem.ts",
      "line": 376,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeLorenzAttractor(id: string): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    this.lorenzAttractors.delete(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:388:41",
      "file": "services/particleSystem.ts",
      "line": 388,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addModulation(mod: ParticleModulation): void {",
      "context": {
        "before": [
          "  // Modulation Management",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.modulations.push({ ...mod });",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:392:31",
      "file": "services/particleSystem.ts",
      "line": 392,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeModulation(id: string): void {",
      "context": {
        "before": [
          "    this.modulations.push({ ...mod });",
          "  }",
          ""
        ],
        "after": [
          "    const index = this.modulations.findIndex((m) => m.id === id);",
          "    if (index >= 0) {",
          "      this.modulations.splice(index, 1);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:407:42",
      "file": "services/particleSystem.ts",
      "line": 407,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setBoundaryMask(mask: ImageData | null): void {",
      "context": {
        "before": [
          "  // Boundary Mask",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.boundaryMask = mask;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:415:68",
      "file": "services/particleSystem.ts",
      "line": 415,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFeatureValue(param: string, value: number, emitterId?: string): void {",
      "context": {
        "before": [
          "  // Audio Reactivity",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const key = emitterId ? `${emitterId}:${param}` : `*:${param}`;",
          "    this.featureOverrides.set(key, value);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:435:30",
      "file": "services/particleSystem.ts",
      "line": 435,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "step(deltaTime: number = 1): void {",
      "context": {
        "before": [
          "  // Simulation",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    // 1. Spawn new particles from emitters",
          "    this.emitters.forEach((emitter, id) => {",
          "      if (!emitter.enabled) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:602:18",
      "file": "services/particleSystem.ts",
      "line": 602,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (emitter?.sprite?.alignToVelocity && (p.vx !== 0 || p.vy !== 0)) {",
      "context": {
        "before": [
          "",
          "      // f3. Align to velocity if emitter configured for it",
          "      const emitter = this.emitters.get(p.emitterId);"
        ],
        "after": [
          "        p.rotation = Math.atan2(p.vy, p.vx);",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:602:26",
      "file": "services/particleSystem.ts",
      "line": 602,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (emitter?.sprite?.alignToVelocity && (p.vx !== 0 || p.vy !== 0)) {",
      "context": {
        "before": [
          "",
          "      // f3. Align to velocity if emitter configured for it",
          "      const emitter = this.emitters.get(p.emitterId);"
        ],
        "after": [
          "        p.rotation = Math.atan2(p.vy, p.vx);",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:607:18",
      "file": "services/particleSystem.ts",
      "line": 607,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (emitter?.sprite?.isSheet && emitter.sprite.totalFrames > 1) {",
      "context": {
        "before": [
          "      }",
          "",
          "      // f4. Update sprite animation frame"
        ],
        "after": [
          "        this.updateSpriteFrame(p, emitter.sprite, deltaTime);",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:607:26",
      "file": "services/particleSystem.ts",
      "line": 607,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (emitter?.sprite?.isSheet && emitter.sprite.totalFrames > 1) {",
      "context": {
        "before": [
          "      }",
          "",
          "      // f4. Update sprite animation frame"
        ],
        "after": [
          "        this.updateSpriteFrame(p, emitter.sprite, deltaTime);",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:648:28",
      "file": "services/particleSystem.ts",
      "line": 648,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.config.collision?.enabled &&",
      "context": {
        "before": [
          "",
          "    // Particle-to-particle collision detection (after all positions updated)",
          "    if ("
        ],
        "after": [
          "      this.config.collision.particleCollision",
          "    ) {",
          "      this.handleParticleCollisions();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:655:30",
      "file": "services/particleSystem.ts",
      "line": 655,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (this.config.collision?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Floor/ceiling/wall collision"
        ],
        "after": [
          "      this.handleEnvironmentCollisions();",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:671:4",
      "file": "services/particleSystem.ts",
      "line": 671,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    p: Particle,",
          "    sprite: SpriteConfig,",
          "    _deltaTime: number,"
        ],
        "after": [
          "    const totalFrames = sprite.totalFrames;",
          "    // Note: lifeRatio calculation removed - was unused dead code with potential div/0",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:722:37",
      "file": "services/particleSystem.ts",
      "line": 722,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleParticleCollisions(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Handle particle-to-particle collisions using spatial hashing",
          "   */"
        ],
        "after": [
          "    const collision = this.config.collision;",
          "    if (!collision || !collision.particleCollision) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:737:34",
      "file": "services/particleSystem.ts",
      "line": 737,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.collisionGrid.get(key)?.push(p);",
      "context": {
        "before": [
          "      if (!this.collisionGrid.has(key)) {",
          "        this.collisionGrid.set(key, []);",
          "      }"
        ],
        "after": [
          "    }",
          "",
          "    // Check collisions within neighboring cells"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:833:40",
      "file": "services/particleSystem.ts",
      "line": 833,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleEnvironmentCollisions(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Handle floor, ceiling, and wall collisions",
          "   */"
        ],
        "after": [
          "    const collision = this.config.collision;",
          "    if (!collision?.enabled) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:835:19",
      "file": "services/particleSystem.ts",
      "line": 835,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!collision?.enabled) return;",
      "context": {
        "before": [
          "   */",
          "  private handleEnvironmentCollisions(): void {",
          "    const collision = this.config.collision;"
        ],
        "after": [
          "",
          "    const bounciness = collision.bounciness;",
          "    const friction = collision.friction;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:875:48",
      "file": "services/particleSystem.ts",
      "line": 875,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private spawnParticle(emitter: EmitterConfig): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (this.particles.length >= this.config.maxParticles) return;",
          "",
          "    // Calculate spawn position based on emitter shape"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:910:15",
      "file": "services/particleSystem.ts",
      "line": 910,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (sprite?.rotationEnabled) {",
      "context": {
        "before": [
          "    let rotation = 0;",
          "    let angularVelocity = 0;",
          "    const sprite = emitter.sprite;"
        ],
        "after": [
          "      rotation = this.rng.angle(); // Random initial rotation (seeded)",
          "      const rotSpeed = sprite.rotationSpeed * (Math.PI / 180); // Convert to radians",
          "      const rotVariance = sprite.rotationSpeedVariance * (Math.PI / 180);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:918:15",
      "file": "services/particleSystem.ts",
      "line": 918,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (sprite?.alignToVelocity) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Align to velocity if configured"
        ],
        "after": [
          "      rotation = angle;",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:924:15",
      "file": "services/particleSystem.ts",
      "line": 924,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (sprite?.isSheet && sprite.playMode === \"random\") {",
      "context": {
        "before": [
          "",
          "    // Calculate sprite frame for animated sprites (using seeded RNG)",
          "    let spriteIndex = 0;"
        ],
        "after": [
          "      spriteIndex = this.rng.int(0, sprite.totalFrames - 1);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1528:4",
      "file": "services/particleSystem.ts",
      "line": 1528,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  setDepthMapProvider(",
          "    provider: (layerId: string, frame: number) => ImageData | null,"
        ],
        "after": [
          "    this.depthMapProvider = provider;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1537:4",
      "file": "services/particleSystem.ts",
      "line": 1537,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "   */",
          "  setMaskProvider(",
          "    provider: (layerId: string, frame: number) => ImageData | null,"
        ],
        "after": [
          "    this.maskProvider = provider;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1544:23",
      "file": "services/particleSystem.ts",
      "line": 1544,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearEmissionCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear the image emission cache (call when source layers change)",
          "   */"
        ],
        "after": [
          "    this.imageEmissionCache.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1729:47",
      "file": "services/particleSystem.ts",
      "line": 1729,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleBoundaryCollision(p: Particle): void {",
      "context": {
        "before": [
          "    return points;",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.boundaryMask) return;",
          "",
          "    const px = Math.floor(p.x * this.boundaryMask.width);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1770:44",
      "file": "services/particleSystem.ts",
      "line": 1770,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleCanvasBoundary(p: Particle): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    switch (this.config.boundaryBehavior) {",
          "      case \"bounce\":",
          "        if (p.x < 0) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1804:40",
      "file": "services/particleSystem.ts",
      "line": 1804,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyModulations(p: Particle): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    // Guard against lifetime=0 to prevent division by zero",
          "    const safeLifetime = p.lifetime > 0 ? p.lifetime : 1;",
          "    const lifeRatio = p.age / safeLifetime;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1854:58",
      "file": "services/particleSystem.ts",
      "line": 1854,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private applyTurbulence(p: Particle, deltaTime: number): void {",
      "context": {
        "before": [
          "  // Turbulence",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const turbFields = this.config.turbulenceFields || [];",
          "    for (const turb of turbFields) {",
          "      if (!turb.enabled) continue;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1868:42",
      "file": "services/particleSystem.ts",
      "line": 1868,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addTurbulence(config: TurbulenceConfig): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.config.turbulenceFields) this.config.turbulenceFields = [];",
          "    this.config.turbulenceFields.push(config);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1873:67",
      "file": "services/particleSystem.ts",
      "line": 1873,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateTurbulence(id: string, updates: Partial<TurbulenceConfig>): void {",
      "context": {
        "before": [
          "    this.config.turbulenceFields.push(config);",
          "  }",
          ""
        ],
        "after": [
          "    const turb = this.config.turbulenceFields?.find((t) => t.id === id);",
          "    if (turb) Object.assign(turb, updates);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1874:46",
      "file": "services/particleSystem.ts",
      "line": 1874,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const turb = this.config.turbulenceFields?.find((t) => t.id === id);",
      "context": {
        "before": [
          "  }",
          "",
          "  updateTurbulence(id: string, updates: Partial<TurbulenceConfig>): void {"
        ],
        "after": [
          "    if (turb) Object.assign(turb, updates);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1878:31",
      "file": "services/particleSystem.ts",
      "line": 1878,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeTurbulence(id: string): void {",
      "context": {
        "before": [
          "    if (turb) Object.assign(turb, updates);",
          "  }",
          ""
        ],
        "after": [
          "    if (this.config.turbulenceFields) {",
          "      this.config.turbulenceFields = this.config.turbulenceFields.filter(",
          "        (t) => t.id !== id,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1898:53",
      "file": "services/particleSystem.ts",
      "line": 1898,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private triggerSubEmitters(deadParticle: Particle): void {",
      "context": {
        "before": [
          "   * Trigger sub-emitters when a particle dies",
          "   * DETERMINISM: Uses seeded RNG (this.rng) for all randomness",
          "   */"
        ],
        "after": [
          "    const subEmitters = this.config.subEmitters || [];",
          "    for (const sub of subEmitters) {",
          "      if (!sub.enabled) continue;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1955:42",
      "file": "services/particleSystem.ts",
      "line": 1955,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addSubEmitter(config: SubEmitterConfig): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    if (!this.config.subEmitters) this.config.subEmitters = [];",
          "    this.config.subEmitters.push(config);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1960:67",
      "file": "services/particleSystem.ts",
      "line": 1960,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateSubEmitter(id: string, updates: Partial<SubEmitterConfig>): void {",
      "context": {
        "before": [
          "    this.config.subEmitters.push(config);",
          "  }",
          ""
        ],
        "after": [
          "    const sub = this.config.subEmitters?.find((s) => s.id === id);",
          "    if (sub) Object.assign(sub, updates);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1961:40",
      "file": "services/particleSystem.ts",
      "line": 1961,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const sub = this.config.subEmitters?.find((s) => s.id === id);",
      "context": {
        "before": [
          "  }",
          "",
          "  updateSubEmitter(id: string, updates: Partial<SubEmitterConfig>): void {"
        ],
        "after": [
          "    if (sub) Object.assign(sub, updates);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1965:31",
      "file": "services/particleSystem.ts",
      "line": 1965,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeSubEmitter(id: string): void {",
      "context": {
        "before": [
          "    if (sub) Object.assign(sub, updates);",
          "  }",
          ""
        ],
        "after": [
          "    if (this.config.subEmitters) {",
          "      this.config.subEmitters = this.config.subEmitters.filter(",
          "        (s) => s.id !== id,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1981:50",
      "file": "services/particleSystem.ts",
      "line": 1981,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "triggerBurst(emitterId: string, count?: number): void {",
      "context": {
        "before": [
          "  // Burst on Beat",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    const emitter = this.emitters.get(emitterId);",
          "    if (!emitter || !emitter.enabled) return;",
          "    const burstCount = count ?? emitter.burstCount ?? 20;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:1990:21",
      "file": "services/particleSystem.ts",
      "line": 1990,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "triggerAllBursts(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    for (const emitter of this.emitters.values()) {",
          "      if (emitter.burstOnBeat && emitter.enabled) {",
          "        this.triggerBurst(emitter.id);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2003:52",
      "file": "services/particleSystem.ts",
      "line": 2003,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const cellSize = this.renderOptions.connections?.maxDistance || 100;",
      "context": {
        "before": [
          "  // ============================================================================",
          "",
          "  private buildSpatialGrid(): SpatialGrid {"
        ],
        "after": [
          "    const cells = new Map<string, Particle[]>();",
          "    for (const p of this.particles) {",
          "      const cellX = Math.floor((p.x * 1000) / cellSize); // Scale normalized coords"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2010:21",
      "file": "services/particleSystem.ts",
      "line": 2010,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "cells.get(key)?.push(p);",
      "context": {
        "before": [
          "      const cellY = Math.floor((p.y * 1000) / cellSize);",
          "      const key = `${cellX},${cellY}`;",
          "      if (!cells.has(key)) cells.set(key, []);"
        ],
        "after": [
          "    }",
          "    return { cellSize, cells };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2020:10",
      "file": "services/particleSystem.ts",
      "line": 2020,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "   * DETERMINISM: This resets ALL state including RNG for reproducible simulation.",
          "   * After reset(), stepping to frame N will produce identical results.",
          "   */"
        ],
        "after": [
          "    this.particles = [];",
          "    this.particlePool = []; // Clear pool to free memory",
          "    this.frameCount = 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2044:22",
      "file": "services/particleSystem.ts",
      "line": 2044,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetEmitterSeeds(): void {",
      "context": {
        "before": [
          "   * Reset emitter seeds to initial state (legacy method, reset() now does this)",
          "   * @deprecated Use reset() instead, which now resets RNG automatically",
          "   */"
        ],
        "after": [
          "    // Reset the main RNG to its initial seed",
          "    this.rng.reset();",
          "    // Recreate noise with reset RNG for turbulence"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2072:14",
      "file": "services/particleSystem.ts",
      "line": 2072,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearPool(): void {",
      "context": {
        "before": [
          "   * Clear the particle pool to free memory",
          "   * Call this when memory pressure is high",
          "   */"
        ],
        "after": [
          "    this.particlePool = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2106:4",
      "file": "services/particleSystem.ts",
      "line": 2106,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      readonly collisionCount?: number;",
          "    }[],",
          "    frameCount: number,"
        ],
        "after": [
          "    // Clear existing particles",
          "    this.particles = [];",
          "    this.trailHistory.clear();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2156:11",
      "file": "services/particleSystem.ts",
      "line": 2156,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "warmup(): void {",
      "context": {
        "before": [
          "    this.frameCount = frameCount;",
          "  }",
          ""
        ],
        "after": [
          "    for (let i = 0; i < this.config.warmupPeriod; i++) {",
          "      this.step(1);",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2174:52",
      "file": "services/particleSystem.ts",
      "line": 2174,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfig(updates: Partial<ParticleSystemConfig>): void {",
      "context": {
        "before": [
          "    return { ...this.config };",
          "  }",
          ""
        ],
        "after": [
          "    Object.assign(this.config, updates);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2187:4",
      "file": "services/particleSystem.ts",
      "line": 2187,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    width: number,",
          "    height: number,",
          "    options: RenderOptions = createDefaultRenderOptions(),"
        ],
        "after": [
          "    // Cache render options for spatial grid",
          "    this.renderOptions = options;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/particleSystem.ts:2201:44",
      "file": "services/particleSystem.ts",
      "line": 2201,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const spatialGrid = options.connections?.enabled",
      "context": {
        "before": [
          "    };",
          "",
          "    // Build spatial grid for connections"
        ],
        "after": [
          "      ? this.buildSpatialGrid()",
          "      : undefined;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/pathMorphing.ts:767:32",
      "file": "services/pathMorphing.ts",
      "line": 767,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (typeof (v.point as any)?.x !== \"number\") return false;",
      "context": {
        "before": [
          "  if (obj.vertices.length > 0) {",
          "    const v = obj.vertices[0] as Record<string, unknown>;",
          "    if (typeof v !== \"object\" || v === null) return false;"
        ],
        "after": [
          "    if (typeof (v.point as any)?.y !== \"number\") return false;",
          "  }",
          ""
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/pathMorphing.ts:768:32",
      "file": "services/pathMorphing.ts",
      "line": 768,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (typeof (v.point as any)?.y !== \"number\") return false;",
      "context": {
        "before": [
          "    const v = obj.vertices[0] as Record<string, unknown>;",
          "    if (typeof v !== \"object\" || v === null) return false;",
          "    if (typeof (v.point as any)?.x !== \"number\") return false;"
        ],
        "after": [
          "  }",
          "",
          "  return true;"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:211:28",
      "file": "services/persistenceService.ts",
      "line": 211,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const name = project.meta?.name || \"Untitled Project\";",
      "context": {
        "before": [
          "  const db = await getDB();",
          "",
          "  const id = projectId || getProjectId(project);"
        ],
        "after": [
          "",
          "  const stored: StoredProject = {",
          "    id,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:478:62",
      "file": "services/persistenceService.ts",
      "line": 478,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function saveSettings(settings: Partial<UserSettings>): void {",
      "context": {
        "before": [
          "  return { ...DEFAULT_SETTINGS };",
          "}",
          ""
        ],
        "after": [
          "  try {",
          "    const current = getSettings();",
          "    const merged = { ...current, ...settings };"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:500:2",
      "file": "services/persistenceService.ts",
      "line": 500,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function setSetting<K extends keyof UserSettings>(",
          "  key: K,",
          "  value: UserSettings[K],"
        ],
        "after": [
          "  saveSettings({ [key]: value });",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:520:55",
      "file": "services/persistenceService.ts",
      "line": 520,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function saveRecentProjects(projects: RecentProject[]): void {",
      "context": {
        "before": [
          "  return [];",
          "}",
          ""
        ],
        "after": [
          "  try {",
          "    localStorage.setItem(",
          "      LOCAL_STORAGE_KEYS.RECENT_PROJECTS,"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:531:60",
      "file": "services/persistenceService.ts",
      "line": 531,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function addToRecentProjects(project: RecentProject): void {",
      "context": {
        "before": [
          "  }",
          "}",
          ""
        ],
        "after": [
          "  const settings = getSettings();",
          "  let recent = getRecentProjects();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:547:60",
      "file": "services/persistenceService.ts",
      "line": 547,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function removeFromRecentProjects(projectId: string): void {",
      "context": {
        "before": [
          "  saveRecentProjects(recent);",
          "}",
          ""
        ],
        "after": [
          "  const recent = getRecentProjects().filter((p) => p.id !== projectId);",
          "  saveRecentProjects(recent);",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:552:38",
      "file": "services/persistenceService.ts",
      "line": 552,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearRecentProjects(): void {",
      "context": {
        "before": [
          "  saveRecentProjects(recent);",
          "}",
          ""
        ],
        "after": [
          "  saveRecentProjects([]);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/persistenceService.ts:568:45",
      "file": "services/persistenceService.ts",
      "line": 568,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setLastProjectId(id: string): void {",
      "context": {
        "before": [
          "  }",
          "}",
          ""
        ],
        "after": [
          "  try {",
          "    localStorage.setItem(LOCAL_STORAGE_KEYS.LAST_PROJECT_ID, id);",
          "  } catch (e) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:62:32",
      "file": "services/physics/JointSystem.ts",
      "line": 62,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addJoint(config: JointConfig): void {",
      "context": {
        "before": [
          "  private joints: Map<string, JointConfig> = new Map();",
          "  private brokenJoints: Set<string> = new Set();",
          ""
        ],
        "after": [
          "    this.joints.set(config.id, config);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:66:26",
      "file": "services/physics/JointSystem.ts",
      "line": 66,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeJoint(id: string): void {",
      "context": {
        "before": [
          "    this.joints.set(config.id, config);",
          "  }",
          ""
        ],
        "after": [
          "    this.joints.delete(id);",
          "    this.brokenJoints.delete(id);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:86:4",
      "file": "services/physics/JointSystem.ts",
      "line": 86,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    getBody: GetBodyFn,",
          "    applyImpulse: ApplyImpulseFn,",
          "    dt: number,"
        ],
        "after": [
          "    for (const joint of this.joints.values()) {",
          "      if (this.brokenJoints.has(joint.id)) continue;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:194:20",
      "file": "services/physics/JointSystem.ts",
      "line": 194,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (joint.motor?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Motor (if enabled)"
        ],
        "after": [
          "      const relativeAngle = bodyB.angle - bodyA.angle;",
          "      let targetAngularVelocity = joint.motor.speed;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:422:20",
      "file": "services/physics/JointSystem.ts",
      "line": 422,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (joint.motor?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Motor"
        ],
        "after": [
          "      const relVel = vec2.dot(vec2.sub(bodyB.velocity, bodyA.velocity), axis);",
          "      const motorError = joint.motor.speed - relVel;",
          "      const motorImpulse = Math.max("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:498:20",
      "file": "services/physics/JointSystem.ts",
      "line": 498,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (joint.motor?.enabled) {",
      "context": {
        "before": [
          "    }",
          "",
          "    // Motor (rotation)"
        ],
        "after": [
          "      const relativeAngularVelocity =",
          "        bodyB.angularVelocity - bodyA.angularVelocity;",
          "      const motorError = joint.motor.speed - relativeAngularVelocity;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:706:10",
      "file": "services/physics/JointSystem.ts",
      "line": 706,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all joints",
          "   */"
        ],
        "after": [
          "    this.joints.clear();",
          "    this.brokenJoints.clear();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/JointSystem.ts:724:55",
      "file": "services/physics/JointSystem.ts",
      "line": 724,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "loadState(states: { id: string; broken: boolean }[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Load joint state from serialization",
          "   */"
        ],
        "after": [
          "    this.brokenJoints.clear();",
          "    for (const state of states) {",
          "      if (state.broken) {"
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:52:10",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 52,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reset(): void {",
      "context": {
        "before": [
          "    this.state = seed;",
          "  }",
          ""
        ],
        "after": [
          "    this.state = this.initialSeed;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:163:39",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 163,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addBody(bodyConfig: RigidBodyConfig): void {",
      "context": {
        "before": [
          "    this.config = config;",
          "  }",
          ""
        ],
        "after": [
          "    // Calculate inverse mass for physics simulation.",
          "    // Static/dead bodies have infinite mass (inverseMass = 0).",
          "    // Dynamic bodies with mass=0 default to mass=1 to prevent division by zero."
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:201:25",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 201,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeBody(id: string): void {",
      "context": {
        "before": [
          "    this.bodies.set(bodyConfig.id, body);",
          "  }",
          ""
        ],
        "after": [
          "    this.bodies.delete(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:243:70",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 243,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyForce(bodyId: string, force: PhysicsVec2, point?: PhysicsVec2): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const body = this.bodies.get(bodyId);",
          "    if (!body || body.inverseMass === 0) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:259:4",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 259,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    bodyId: string,",
          "    impulse: PhysicsVec2,",
          "    point?: PhysicsVec2,"
        ],
        "after": [
          "    const body = this.bodies.get(bodyId);",
          "    if (!body || body.inverseMass === 0) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:278:24",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 278,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "integrate(dt: number): void {",
      "context": {
        "before": [
          "    body.sleepTime = 0;",
          "  }",
          ""
        ],
        "after": [
          "    for (const body of this.bodies.values()) {",
          "      if (body.config.type === \"static\" || body.config.type === \"dead\")",
          "        continue;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:344:38",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 344,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "loadState(states: RigidBodyState[]): void {",
      "context": {
        "before": [
          "    return states;",
          "  }",
          ""
        ],
        "after": [
          "    for (const state of states) {",
          "      const body = this.bodies.get(state.id);",
          "      if (body) {"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:770:38",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 770,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addSoftBody(config: SoftBodyConfig): void {",
      "context": {
        "before": [
          "  private softBodyParticles: Map<string, string[]> = new Map(); // softBodyId -> particleIds",
          "  private softBodyConstraints: Map<string, string[]> = new Map(); // softBodyId -> constraintIds",
          ""
        ],
        "after": [
          "    const particleIds: string[] = [];",
          "    const constraintIds: string[] = [];",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:809:29",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 809,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeSoftBody(id: string): void {",
      "context": {
        "before": [
          "    this.softBodyConstraints.set(config.id, constraintIds);",
          "  }",
          ""
        ],
        "after": [
          "    const particleIds = this.softBodyParticles.get(id);",
          "    const constraintIds = this.softBodyConstraints.get(id);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:828:53",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 828,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyForce(particleId: string, force: PhysicsVec2): void {",
      "context": {
        "before": [
          "    this.softBodyConstraints.delete(id);",
          "  }",
          ""
        ],
        "after": [
          "    const particle = this.particles.get(particleId);",
          "    if (particle && !particle.pinned) {",
          "      particle.acceleration = vec2.add("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:838:38",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 838,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyForceToAll(force: PhysicsVec2): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    for (const particle of this.particles.values()) {",
          "      if (!particle.pinned) {",
          "        particle.acceleration = vec2.add(particle.acceleration, force);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:846:48",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 846,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "integrate(dt: number, damping: number = 0.98): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const dtSq = dt * dt;",
          "",
          "    for (const particle of this.particles.values()) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:867:39",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 867,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "solveConstraints(iterations: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    for (let i = 0; i < iterations; i++) {",
          "      for (const constraint of this.constraints.values()) {",
          "        if (constraint.broken) continue;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:919:47",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 919,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": ".filter((id) => this.constraints.get(id)?.broken)",
      "context": {
        "before": [
          "    });",
          "",
          "    const brokenConstraints = (constraintIds || [])"
        ],
        "after": [
          "      .map((id) => id);",
          "",
          "    return {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:929:55",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 929,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "loadState(_softBodyId: string, state: SoftBodyState): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    for (const ps of state.particles) {",
          "      const particle = this.particles.get(ps.id);",
          "      if (particle) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:961:35",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 961,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "createCloth(config: ClothConfig): void {",
      "context": {
        "before": [
          "    }",
          "  > = new Map();",
          ""
        ],
        "after": [
          "    const particles: InternalVerletParticle[] = [];",
          "    const constraints: InternalVerletConstraint[] = [];",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1086:26",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1086,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeCloth(id: string): void {",
      "context": {
        "before": [
          "    this.cloths.set(config.id, { config, particles, constraints });",
          "  }",
          ""
        ],
        "after": [
          "    this.cloths.delete(id);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1090:50",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1090,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyForce(clothId: string, force: PhysicsVec2): void {",
      "context": {
        "before": [
          "    this.cloths.delete(id);",
          "  }",
          ""
        ],
        "after": [
          "    const cloth = this.cloths.get(clothId);",
          "    if (!cloth) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1101:24",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1101,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "integrate(dt: number): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    const dtSq = dt * dt;",
          "",
          "    for (const cloth of this.cloths.values()) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1124:21",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1124,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "solveConstraints(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    for (const cloth of this.cloths.values()) {",
          "      const iterations = cloth.config.iterations;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1195:48",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1195,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "loadState(clothId: string, state: ClothState): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    const cloth = this.cloths.get(clothId);",
          "    if (!cloth) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1240:39",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1240,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setForceFields(fields: ForceField[]): void {",
      "context": {
        "before": [
          "    this.random = new PhysicsRandom(seed);",
          "  }",
          ""
        ],
        "after": [
          "    this.forceFields = fields;",
          "  }",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1248:4",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1248,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    frame: number,",
          "    bodies: InternalRigidBody[],",
          "    applyForce: (bodyId: string, force: PhysicsVec2) => void,"
        ],
        "after": [
          "    for (const field of this.forceFields) {",
          "      if (!field.enabled) continue;",
          "      if (frame < field.startFrame) continue;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1489:49",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1489,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfig(config: Partial<PhysicsSpaceConfig>): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Configuration"
        ],
        "after": [
          "    this.config = { ...this.config, ...config };",
          "    this.rigidBodySimulator = new RigidBodySimulator(this.config);",
          "    this.collisionResolver = new CollisionResolver(this.config);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1496:39",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1496,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setForceFields(fields: ForceField[]): void {",
      "context": {
        "before": [
          "    this.clearCache();",
          "  }",
          ""
        ],
        "after": [
          "    this.forceFieldProcessor.setForceFields(fields);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1502:40",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1502,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addRigidBody(config: RigidBodyConfig): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Body management"
        ],
        "after": [
          "    this.rigidBodySimulator.addBody(config);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1507:30",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1507,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeRigidBody(id: string): void {",
      "context": {
        "before": [
          "    this.clearCache();",
          "  }",
          ""
        ],
        "after": [
          "    this.rigidBodySimulator.removeBody(id);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1512:38",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1512,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addSoftBody(config: SoftBodyConfig): void {",
      "context": {
        "before": [
          "    this.clearCache();",
          "  }",
          ""
        ],
        "after": [
          "    this.softBodySimulator.addSoftBody(config);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1517:29",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1517,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeSoftBody(id: string): void {",
      "context": {
        "before": [
          "    this.clearCache();",
          "  }",
          ""
        ],
        "after": [
          "    this.softBodySimulator.removeSoftBody(id);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1522:32",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1522,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addCloth(config: ClothConfig): void {",
      "context": {
        "before": [
          "    this.clearCache();",
          "  }",
          ""
        ],
        "after": [
          "    this.clothSimulator.createCloth(config);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1527:26",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1527,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeCloth(id: string): void {",
      "context": {
        "before": [
          "    this.clearCache();",
          "  }",
          ""
        ],
        "after": [
          "    this.clothSimulator.removeCloth(id);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1536:54",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1536,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addRagdoll(ragdollId: string, bones: RagdollBone[]): void {",
      "context": {
        "before": [
          "   * Register a ragdoll for state tracking",
          "   * The ragdoll's rigid bodies should already be added via addRigidBody",
          "   */"
        ],
        "after": [
          "    this.ragdollRegistry.set(ragdollId, bones);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1545:35",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1545,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeRagdoll(ragdollId: string): void {",
      "context": {
        "before": [
          "   * Remove a ragdoll from state tracking",
          "   * Note: This does NOT remove the underlying rigid bodies",
          "   */"
        ],
        "after": [
          "    this.ragdollRegistry.delete(ragdollId);",
          "    this.clearCache();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1608:38",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1608,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private simulateStep(frame: number): void {",
      "context": {
        "before": [
          "    return this.getState(targetFrame);",
          "  }",
          ""
        ],
        "after": [
          "    const dt = this.config.timeStep;",
          "    const bodies = this.rigidBodySimulator.getAllBodies();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1692:40",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1692,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private saveCheckpoint(frame: number): void {",
      "context": {
        "before": [
          "    };",
          "  }",
          ""
        ],
        "after": [
          "    this.checkpoints.set(frame, {",
          "      frame,",
          "      rigidBodyStates: this.rigidBodySimulator.getState(),"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1706:15",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1706,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "    });",
          "  }",
          ""
        ],
        "after": [
          "    this.checkpoints.clear();",
          "    this.lastSimulatedFrame = -1;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1742:31",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1742,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameData.get(body.id)?.push({",
      "context": {
        "before": [
          "        if (!frameData.has(body.id)) {",
          "          frameData.set(body.id, []);",
          "        }"
        ],
        "after": [
          "          frame,",
          "          position: body.position,",
          "          angle: body.angle,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/physics/PhysicsEngine.ts:1868:12",
      "file": "services/physics/PhysicsEngine.ts",
      "line": 1868,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Cleanup"
        ],
        "after": [
          "    this.checkpoints.clear();",
          "    this.isInitialized = false;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/physics/RagdollBuilder.ts:589:2",
      "file": "services/physics/RagdollBuilder.ts",
      "line": 589,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    angle: number,",
          "    angularVelocity: number,",
          "  ) => void,"
        ],
        "after": [
          "  for (const boneState of state.bones) {",
          "    const bodyId = `${state.id}_${boneState.id}`;",
          "    setBodyState("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:255:5",
      "file": "services/plugins/PluginManager.ts",
      "line": 255,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    getLayer: (id: string) => any;",
          "    getComposition: (id: string) => any;",
          "    getAsset: (id: string) => any;"
        ],
        "after": [
          "    this.getProjectFn = access.getProject;",
          "    this.getCurrentFrameFn = access.getCurrentFrame;",
          "    this.getSelectedLayersFn = access.getSelectedLayers;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:275:5",
      "file": "services/plugins/PluginManager.ts",
      "line": 275,
      "column": 5,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "    onRegisterExporter?: (exporter: ExporterDefinition) => void;",
          "    onRegisterTool?: (tool: ToolDefinition) => void;",
          "    onShowNotification?: (message: string, type: string) => void;"
        ],
        "after": [
          "    Object.assign(this, callbacks);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:383:42",
      "file": "services/plugins/PluginManager.ts",
      "line": 383,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getProject: () => this.getProjectFn?.() ?? null,",
      "context": {
        "before": [
          "  private createPluginAPI(plugin: LoadedPlugin): LatticePluginAPI {",
          "    return {",
          "      // Read-only access"
        ],
        "after": [
          "      getCurrentFrame: () => this.getCurrentFrameFn?.() ?? 0,",
          "      getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],",
          "      getLayer: (id) => this.getLayerFn?.(id) ?? null,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:384:52",
      "file": "services/plugins/PluginManager.ts",
      "line": 384,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getCurrentFrame: () => this.getCurrentFrameFn?.() ?? 0,",
      "context": {
        "before": [
          "    return {",
          "      // Read-only access",
          "      getProject: () => this.getProjectFn?.() ?? null,"
        ],
        "after": [
          "      getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],",
          "      getLayer: (id) => this.getLayerFn?.(id) ?? null,",
          "      getComposition: (id) => this.getCompositionFn?.(id) ?? null,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:385:56",
      "file": "services/plugins/PluginManager.ts",
      "line": 385,
      "column": 56,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],",
      "context": {
        "before": [
          "      // Read-only access",
          "      getProject: () => this.getProjectFn?.() ?? null,",
          "      getCurrentFrame: () => this.getCurrentFrameFn?.() ?? 0,"
        ],
        "after": [
          "      getLayer: (id) => this.getLayerFn?.(id) ?? null,",
          "      getComposition: (id) => this.getCompositionFn?.(id) ?? null,",
          "      getAsset: (id) => this.getAssetFn?.(id) ?? null,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:386:40",
      "file": "services/plugins/PluginManager.ts",
      "line": 386,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getLayer: (id) => this.getLayerFn?.(id) ?? null,",
      "context": {
        "before": [
          "      getProject: () => this.getProjectFn?.() ?? null,",
          "      getCurrentFrame: () => this.getCurrentFrameFn?.() ?? 0,",
          "      getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],"
        ],
        "after": [
          "      getComposition: (id) => this.getCompositionFn?.(id) ?? null,",
          "      getAsset: (id) => this.getAssetFn?.(id) ?? null,",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:387:52",
      "file": "services/plugins/PluginManager.ts",
      "line": 387,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getComposition: (id) => this.getCompositionFn?.(id) ?? null,",
      "context": {
        "before": [
          "      getCurrentFrame: () => this.getCurrentFrameFn?.() ?? 0,",
          "      getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],",
          "      getLayer: (id) => this.getLayerFn?.(id) ?? null,"
        ],
        "after": [
          "      getAsset: (id) => this.getAssetFn?.(id) ?? null,",
          "",
          "      // Events"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:388:40",
      "file": "services/plugins/PluginManager.ts",
      "line": 388,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getAsset: (id) => this.getAssetFn?.(id) ?? null,",
      "context": {
        "before": [
          "      getSelectedLayers: () => this.getSelectedLayersFn?.() ?? [],",
          "      getLayer: (id) => this.getLayerFn?.(id) ?? null,",
          "      getComposition: (id) => this.getCompositionFn?.(id) ?? null,"
        ],
        "after": [
          "",
          "      // Events",
          "      on: (event, callback) => {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:399:49",
      "file": "services/plugins/PluginManager.ts",
      "line": 399,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "plugin.registrations.events.get(event)?.add(callback);",
      "context": {
        "before": [
          "            event,",
          "            plugin.registrations.events.get(event) || new Set(),",
          "          );"
        ],
        "after": [
          "        }",
          "        return () => this.eventListeners.get(event)?.delete(callback);",
          "      },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:401:52",
      "file": "services/plugins/PluginManager.ts",
      "line": 401,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return () => this.eventListeners.get(event)?.delete(callback);",
      "context": {
        "before": [
          "          );",
          "          plugin.registrations.events.get(event)?.add(callback);",
          "        }"
        ],
        "after": [
          "      },",
          "",
          "      off: (event, callback) => {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:405:39",
      "file": "services/plugins/PluginManager.ts",
      "line": 405,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.eventListeners.get(event)?.delete(callback);",
      "context": {
        "before": [
          "      },",
          "",
          "      off: (event, callback) => {"
        ],
        "after": [
          "        plugin.registrations.events.get(event)?.delete(callback);",
          "      },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:406:47",
      "file": "services/plugins/PluginManager.ts",
      "line": 406,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "plugin.registrations.events.get(event)?.delete(callback);",
      "context": {
        "before": [
          "",
          "      off: (event, callback) => {",
          "        this.eventListeners.get(event)?.delete(callback);"
        ],
        "after": [
          "      },",
          "",
          "      // UI registration"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:412:29",
      "file": "services/plugins/PluginManager.ts",
      "line": 412,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onRegisterPanel?.(panel);",
      "context": {
        "before": [
          "      // UI registration",
          "      registerPanel: (panel) => {",
          "        plugin.registrations.panels.push(panel.id);"
        ],
        "after": [
          "      },",
          "",
          "      registerMenuItem: (item) => {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:417:32",
      "file": "services/plugins/PluginManager.ts",
      "line": 417,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onRegisterMenuItem?.(item);",
      "context": {
        "before": [
          "",
          "      registerMenuItem: (item) => {",
          "        plugin.registrations.menuItems.push(item.id);"
        ],
        "after": [
          "      },",
          "",
          "      registerContextMenu: (menu) => {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:422:35",
      "file": "services/plugins/PluginManager.ts",
      "line": 422,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onRegisterContextMenu?.(menu);",
      "context": {
        "before": [
          "",
          "      registerContextMenu: (menu) => {",
          "        plugin.registrations.contextMenus.push(menu.id);"
        ],
        "after": [
          "      },",
          "",
          "      // Effect registration"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:428:30",
      "file": "services/plugins/PluginManager.ts",
      "line": 428,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onRegisterEffect?.(effect);",
      "context": {
        "before": [
          "      // Effect registration",
          "      registerEffect: (effect) => {",
          "        plugin.registrations.effects.push(effect.id);"
        ],
        "after": [
          "      },",
          "",
          "      // Exporter registration"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:434:32",
      "file": "services/plugins/PluginManager.ts",
      "line": 434,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onRegisterExporter?.(exporter);",
      "context": {
        "before": [
          "      // Exporter registration",
          "      registerExporter: (exporter) => {",
          "        plugin.registrations.exporters.push(exporter.id);"
        ],
        "after": [
          "      },",
          "",
          "      // Tool registration"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:440:28",
      "file": "services/plugins/PluginManager.ts",
      "line": 440,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onRegisterTool?.(tool);",
      "context": {
        "before": [
          "      // Tool registration",
          "      registerTool: (tool) => {",
          "        plugin.registrations.tools.push(tool.id);"
        ],
        "after": [
          "      },",
          "",
          "      // Notifications"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:445:32",
      "file": "services/plugins/PluginManager.ts",
      "line": 445,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onShowNotification?.(message, type);",
      "context": {
        "before": [
          "",
          "      // Notifications",
          "      showNotification: (message, type = \"info\") => {"
        ],
        "after": [
          "      },",
          "",
          "      // Logging"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:461:59",
      "file": "services/plugins/PluginManager.ts",
      "line": 461,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private cleanupPluginRegistrations(plugin: LoadedPlugin): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clean up all registrations from a plugin",
          "   */"
        ],
        "after": [
          "    // Remove event listeners",
          "    for (const [event, callbacks] of plugin.registrations.events) {",
          "      const listeners = this.eventListeners.get(event);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:483:43",
      "file": "services/plugins/PluginManager.ts",
      "line": 483,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "emit(event: PluginEvent, ...args: any[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Emit an event to all plugins",
          "   */"
        ],
        "after": [
          "    const listeners = this.eventListeners.get(event);",
          "    if (!listeners) return;",
          ""
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/plugins/PluginManager.ts:534:39",
      "file": "services/plugins/PluginManager.ts",
      "line": 534,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return plugin.manifest.permissions?.includes(permission) ?? false;",
      "context": {
        "before": [
          "  hasPermission(pluginId: string, permission: PluginPermission): boolean {",
          "    const plugin = this.plugins.get(pluginId);",
          "    if (!plugin) return false;"
        ],
        "after": [
          "  }",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/preprocessorService.ts:781:15",
      "file": "services/preprocessorService.ts",
      "line": 781,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"Rendering source layer...\");",
      "context": {
        "before": [
          "  error?: string;",
          "}> {",
          "  try {"
        ],
        "after": [
          "",
          "    // Get source layer image",
          "    const sourceImage = await renderLayerToImage("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/preprocessorService.ts:793:15",
      "file": "services/preprocessorService.ts",
      "line": 793,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(",
      "context": {
        "before": [
          "      return { success: false, error: \"Failed to render source layer\" };",
          "    }",
          ""
        ],
        "after": [
          "      \"Processing with \" +",
          "        (PREPROCESSOR_REGISTRY[preprocessorId]?.display_name ||",
          "          preprocessorId) +"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/preprocessorService.ts:795:47",
      "file": "services/preprocessorService.ts",
      "line": 795,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(PREPROCESSOR_REGISTRY[preprocessorId]?.display_name ||",
      "context": {
        "before": [
          "",
          "    onProgress?.(",
          "      \"Processing with \" +"
        ],
        "after": [
          "          preprocessorId) +",
          "        \"...\",",
          "    );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/preprocessorService.ts:811:15",
      "file": "services/preprocessorService.ts",
      "line": 811,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"Creating asset...\");",
      "context": {
        "before": [
          "      return { success: false, error: result.error || \"Preprocessor failed\" };",
          "    }",
          ""
        ],
        "after": [
          "",
          "    // Create asset from result",
          "    const assetId = await createAssetFromBase64("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:82:32",
      "file": "services/projectCollection.ts",
      "line": 82,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "projectName: project.meta?.name || \"Untitled Project\",",
      "context": {
        "before": [
          "",
          "    const zip = new JSZip();",
          "    const manifest: CollectionManifest = {"
        ],
        "after": [
          "      exportDate: new Date().toISOString(),",
          "      latticeVersion: \"1.0.0\",",
          "      assetCount: 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:93:17",
      "file": "services/projectCollection.ts",
      "line": 93,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "",
          "    try {",
          "      // Phase 1: Scanning"
        ],
        "after": [
          "        phase: \"scanning\",",
          "        current: 0,",
          "        total: assets.size + 1,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:129:19",
      "file": "services/projectCollection.ts",
      "line": 129,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "        manifest.totalSizeBytes += sizeBytes;",
          "        collected++;",
          ""
        ],
        "after": [
          "          phase: \"collecting\",",
          "          current: collected,",
          "          total: totalItems,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:171:21",
      "file": "services/projectCollection.ts",
      "line": 171,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "          manifest.assetCount++;",
          "          collected++;",
          ""
        ],
        "after": [
          "            phase: \"collecting\",",
          "            current: collected,",
          "            total: totalItems,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:197:17",
      "file": "services/projectCollection.ts",
      "line": 197,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "      }",
          "",
          "      // Phase 3: Compressing"
        ],
        "after": [
          "        phase: \"compressing\",",
          "        current: 0,",
          "        total: 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:212:21",
      "file": "services/projectCollection.ts",
      "line": 212,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "          compressionOptions: { level: 6 },",
          "        },",
          "        (metadata) => {"
        ],
        "after": [
          "            phase: \"compressing\",",
          "            current: Math.round(metadata.percent),",
          "            total: 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:223:17",
      "file": "services/projectCollection.ts",
      "line": 223,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "      );",
          "",
          "      // Phase 4: Complete"
        ],
        "after": [
          "        phase: \"complete\",",
          "        current: totalItems,",
          "        total: totalItems,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:235:17",
      "file": "services/projectCollection.ts",
      "line": 235,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.({",
      "context": {
        "before": [
          "    } catch (error) {",
          "      const errorMessage =",
          "        error instanceof Error ? error.message : \"Unknown error\";"
        ],
        "after": [
          "        phase: \"error\",",
          "        current: 0,",
          "        total: 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:249:10",
      "file": "services/projectCollection.ts",
      "line": 249,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "abort(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Abort an in-progress collection",
          "   */"
        ],
        "after": [
          "    if (this.abortController) {",
          "      this.abortController.abort();",
          "      this.abortController = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:259:71",
      "file": "services/projectCollection.ts",
      "line": 259,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "downloadZip(blob: Blob, filename: string = \"project-collection.zip\"): void {",
      "context": {
        "before": [
          "  /**",
          "   * Download the ZIP blob as a file",
          "   */"
        ],
        "after": [
          "    const url = URL.createObjectURL(blob);",
          "    const link = document.createElement(\"a\");",
          "    link.href = url;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/projectCollection.ts:289:20",
      "file": "services/projectCollection.ts",
      "line": 289,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (asset.url?.startsWith(\"blob:\")) {",
      "context": {
        "before": [
          "      }",
          "",
          "      // If asset has blob URL"
        ],
        "after": [
          "        const response = await fetch(asset.url);",
          "        return await response.blob();",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:85:34",
      "file": "services/projectMigration.ts",
      "line": 85,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.transform?.anchorPoint !== undefined) {",
      "context": {
        "before": [
          "          if (comp.layers) {",
          "            for (const layer of comp.layers) {",
          "              // Rename anchorPoint to origin"
        ],
        "after": [
          "                layer.transform.origin = layer.transform.anchorPoint;",
          "                delete layer.transform.anchorPoint;",
          "              }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:101:29",
      "file": "services/projectMigration.ts",
      "line": 101,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.data?.timeRemapEnabled !== undefined) {",
      "context": {
        "before": [
          "              }",
          "",
          "              // Rename timeRemap to speedMap for video layers"
        ],
        "after": [
          "                layer.data.speedMapEnabled = layer.data.timeRemapEnabled;",
          "                delete layer.data.timeRemapEnabled;",
          "              }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:105:29",
      "file": "services/projectMigration.ts",
      "line": 105,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.data?.timeRemap !== undefined) {",
      "context": {
        "before": [
          "                layer.data.speedMapEnabled = layer.data.timeRemapEnabled;",
          "                delete layer.data.timeRemapEnabled;",
          "              }"
        ],
        "after": [
          "                layer.data.speedMap = layer.data.timeRemap;",
          "                delete layer.data.timeRemap;",
          "              }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectMigration.ts:142:21",
      "file": "services/projectMigration.ts",
      "line": 142,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (typeof project?.schemaVersion === \"number\") {",
      "context": {
        "before": [
          " * Get the schema version from a project",
          " */",
          "export function getProjectVersion(project: any): number {"
        ],
        "after": [
          "    return project.schemaVersion;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectStorage.ts:168:43",
      "file": "services/projectStorage.ts",
      "line": 168,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "logger.info(`Found ${result.projects?.length || 0} projects`);",
      "context": {
        "before": [
          "    const result = await response.json();",
          "",
          "    if (result.status === \"success\") {"
        ],
        "after": [
          "    } else {",
          "      logger.error(`Failed to list projects: ${result.message}`);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectStorage.ts:244:2",
      "file": "services/projectStorage.ts",
      "line": 244,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function exportProjectAsFile(",
          "  project: LatticeProject,",
          "  filename?: string,"
        ],
        "after": [
          "  const name = filename || project.meta?.name || \"lattice-project\";",
          "  const safeName = name.replace(/[^a-zA-Z0-9-_]/g, \"_\");",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/projectStorage.ts:245:40",
      "file": "services/projectStorage.ts",
      "line": 245,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const name = filename || project.meta?.name || \"lattice-project\";",
      "context": {
        "before": [
          "  project: LatticeProject,",
          "  filename?: string,",
          "): void {"
        ],
        "after": [
          "  const safeName = name.replace(/[^a-zA-Z0-9-_]/g, \"_\");",
          "",
          "  const blob = new Blob([JSON.stringify(project, null, 2)], {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/projectStorage.ts:284:54",
      "file": "services/projectStorage.ts",
      "line": 284,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "logger.info(`Imported project: ${project.meta?.name || file.name}`);",
      "context": {
        "before": [
          "        validateProjectStructure(data, `Project file '${file.name}'`);",
          "",
          "        const project = data as LatticeProject;"
        ],
        "after": [
          "        resolve(project);",
          "      } catch (error) {",
          "        if (error instanceof ValidationError) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:214:51",
      "file": "services/propertyDriver.ts",
      "line": 214,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioAnalysis(analysis: AudioAnalysis | null): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the audio analysis data for audio-driven properties",
          "   */"
        ],
        "after": [
          "    this.audioAnalysis = analysis;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:221:44",
      "file": "services/propertyDriver.ts",
      "line": 221,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPropertyGetter(getter: PropertyGetter): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the property getter function (provided by store/engine)",
          "   */"
        ],
        "after": [
          "    this.propertyGetter = getter;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:297:27",
      "file": "services/propertyDriver.ts",
      "line": 297,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeDriver(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a driver",
          "   */"
        ],
        "after": [
          "    this.drivers.delete(id);",
          "    this.smoothedValues.delete(id);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:305:61",
      "file": "services/propertyDriver.ts",
      "line": 305,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateDriver(id: string, updates: Partial<PropertyDriver>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update a driver",
          "   */"
        ],
        "after": [
          "    const driver = this.drivers.get(id);",
          "    if (driver) {",
          "      Object.assign(driver, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:581:19",
      "file": "services/propertyDriver.ts",
      "line": 581,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetSmoothing(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset smoothing state",
          "   */"
        ],
        "after": [
          "    this.smoothedValues.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:588:10",
      "file": "services/propertyDriver.ts",
      "line": 588,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all drivers",
          "   */"
        ],
        "after": [
          "    this.drivers.clear();",
          "    this.smoothedValues.clear();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:603:41",
      "file": "services/propertyDriver.ts",
      "line": 603,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deserialize(drivers: PropertyDriver[]): void {",
      "context": {
        "before": [
          "  /**",
          "   * Load drivers from serialized data",
          "   */"
        ],
        "after": [
          "    this.clear();",
          "    for (const driver of drivers) {",
          "      this.addDriver(driver);"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/propertyDriver.ts:838:39",
      "file": "services/propertyDriver.ts",
      "line": 838,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const offsetValue = options.offset?.[coord];",
      "context": {
        "before": [
          "    driver.blendMode = \"replace\";",
          "",
          "    // Apply offset if specified"
        ],
        "after": [
          "    if (offsetValue !== undefined && offsetValue !== 0) {",
          "      driver.transforms.push({ type: \"offset\", amount: offsetValue });",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:281:51",
      "file": "services/propertyEvaluator.ts",
      "line": 281,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "\r",
          "  switch (mapping.feature) {\r",
          "    case \"amplitude\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"bass\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:284:48",
      "file": "services/propertyEvaluator.ts",
      "line": 284,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"bass\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"mid\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:284:54",
      "file": "services/propertyEvaluator.ts",
      "line": 284,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"bass\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"mid\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:287:48",
      "file": "services/propertyEvaluator.ts",
      "line": 287,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"mid\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"high\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.high?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:287:53",
      "file": "services/propertyEvaluator.ts",
      "line": 287,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.frequencyBands?.bass?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"mid\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"high\":\r",
          "      audioValue = audioAnalysis.frequencyBands?.high?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:290:48",
      "file": "services/propertyEvaluator.ts",
      "line": 290,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.frequencyBands?.high?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"high\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"spectralFlux\":\r",
          "    case \"onsets\":\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:290:54",
      "file": "services/propertyEvaluator.ts",
      "line": 290,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.frequencyBands?.high?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.frequencyBands?.mid?.[frameIndex] ?? 0;\r",
          "      break;\r",
          "    case \"high\":\r"
        ],
        "after": [
          "      break;\r",
          "    case \"spectralFlux\":\r",
          "    case \"onsets\":\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:295:39",
      "file": "services/propertyEvaluator.ts",
      "line": 295,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.beats?.includes(frameIndex) ? 1 : 0;",
      "context": {
        "before": [
          "    case \"spectralFlux\":\r",
          "    case \"onsets\":\r",
          "    case \"peaks\":\r"
        ],
        "after": [
          "      break;\r",
          "    default:\r",
          "      audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:298:51",
      "file": "services/propertyEvaluator.ts",
      "line": 298,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "audioValue = audioAnalysis.amplitudeEnvelope?.[frameIndex] ?? 0;",
      "context": {
        "before": [
          "      audioValue = audioAnalysis.beats?.includes(frameIndex) ? 1 : 0;\r",
          "      break;\r",
          "    default:\r"
        ],
        "after": [
          "  }\r",
          "\r",
          "  // Apply threshold (noise gate)\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/propertyEvaluator.ts:350:29",
      "file": "services/propertyEvaluator.ts",
      "line": 350,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return property.expression?.enabled === true;",
      "context": {
        "before": [
          " * Check if a property has an enabled expression\r",
          " */\r",
          "export function propertyHasExpression(property: AnimatableProperty<unknown>): boolean {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "/**\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:303:10",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 303,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "close(): void {",
      "context": {
        "before": [
          "    });",
          "  }",
          ""
        ],
        "after": [
          "    if (this.db) {",
          "      this.db.close();",
          "      this.db = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:391:4",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 391,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      width: number,",
          "      height: number,",
          "    ) => Promise<Blob>,"
        ],
        "after": [
          "    this.frameRenderer = renderer;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:488:10",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 488,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "start(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Start processing the queue",
          "   */"
        ],
        "after": [
          "    if (this.isRunning) return;",
          "",
          "    this.isRunning = true;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:502:10",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 502,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pause(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Pause the queue (current frame will complete)",
          "   */"
        ],
        "after": [
          "    this.isPaused = true;",
          "",
          "    if (this.activeJobId) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:519:11",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 519,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resume(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Resume the queue",
          "   */"
        ],
        "after": [
          "    if (!this.isPaused) return;",
          "",
          "    this.isPaused = false;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:539:9",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 539,
      "column": 9,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stop(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Stop the queue entirely",
          "   */"
        ],
        "after": [
          "    this.isRunning = false;",
          "    this.isPaused = false;",
          "    this.stopAutoSave();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:558:21",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 558,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cancelCurrentJob(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Cancel the currently rendering job",
          "   */"
        ],
        "after": [
          "    if (!this.activeJobId) return;",
          "",
          "    const job = this.jobs.get(this.activeJobId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:589:32",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 589,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onQueueEmptyCallback?.();",
      "context": {
        "before": [
          "    if (pendingJobs.length === 0) {",
          "      this.isRunning = false;",
          "      this.stopAutoSave();"
        ],
        "after": [
          "      logger.debug(\"Render queue empty\");",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:676:33",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 676,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onJobCompleteCallback?.(job.id, allFrames);",
      "context": {
        "before": [
          "      await this.db.saveJob(job);",
          "",
          "      this.notifyProgress(job.id, job.progress);"
        ],
        "after": [
          "",
          "      // Clear temporary frames from IndexedDB",
          "      await this.db.clearCompletedFrames(job.id);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:690:30",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 690,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onJobErrorCallback?.(job.id, job.progress.error);",
      "context": {
        "before": [
          "      await this.db.saveJob(job);",
          "",
          "      this.notifyProgress(job.id, job.progress);"
        ],
        "after": [
          "",
          "      logger.warn(`Render job failed: ${job.id}`, error);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:704:66",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 704,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private updateJobProgress(job: RenderJob, currentFrame: number): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update job progress",
          "   */"
        ],
        "after": [
          "    const framesRendered = currentFrame - job.startFrame + 1;",
          "    const totalFrames = job.progress.totalFrames;",
          "    const elapsedMs = Date.now() - this.startTime;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:727:26",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 727,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private startAutoSave(): void {",
      "context": {
        "before": [
          "  // AUTO-SAVE",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    if (this.autoSaveTimer !== null) return;",
          "",
          "    this.autoSaveTimer = window.setInterval(() => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:741:25",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 741,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private stopAutoSave(): void {",
      "context": {
        "before": [
          "    }, this.config.autoSaveInterval);",
          "  }",
          ""
        ],
        "after": [
          "    if (this.autoSaveTimer !== null) {",
          "      clearInterval(this.autoSaveTimer);",
          "      this.autoSaveTimer = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:754:4",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 754,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  onProgress(",
          "    callback: (jobId: string, progress: RenderJobProgress) => void,"
        ],
        "after": [
          "    this.onProgressCallback = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:760:4",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 760,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "",
          "  onJobComplete(",
          "    callback: (jobId: string, frames: RenderedFrame[]) => void,"
        ],
        "after": [
          "    this.onJobCompleteCallback = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:764:63",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 764,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "onJobError(callback: (jobId: string, error: string) => void): void {",
      "context": {
        "before": [
          "    this.onJobCompleteCallback = callback;",
          "  }",
          ""
        ],
        "after": [
          "    this.onJobErrorCallback = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:768:37",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 768,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "onQueueEmpty(callback: () => void): void {",
      "context": {
        "before": [
          "    this.onJobErrorCallback = callback;",
          "  }",
          ""
        ],
        "after": [
          "    this.onQueueEmptyCallback = callback;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:772:69",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 772,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private notifyProgress(jobId: string, progress: RenderJobProgress): void {",
      "context": {
        "before": [
          "    this.onQueueEmptyCallback = callback;",
          "  }",
          ""
        ],
        "after": [
          "    this.onProgressCallback?.(jobId, progress);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:773:28",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 773,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.onProgressCallback?.(jobId, progress);",
      "context": {
        "before": [
          "  }",
          "",
          "  private notifyProgress(jobId: string, progress: RenderJobProgress): void {"
        ],
        "after": [
          "  }",
          "",
          "  // ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:808:43",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 808,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "? (this.jobs.get(this.activeJobId)?.progress.framesPerSecond ?? 0)",
      "context": {
        "before": [
          "        return sum + (j.progress.currentFrame - j.startFrame);",
          "      }, 0),",
          "      averageFps: this.activeJobId"
        ],
        "after": [
          "        : 0,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/renderQueue/RenderQueueManager.ts:817:12",
      "file": "services/renderQueue/RenderQueueManager.ts",
      "line": 817,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  // CLEANUP",
          "  // ============================================================================",
          ""
        ],
        "after": [
          "    this.stop();",
          "    this.db.close();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/security/jsonSanitizer.ts:216:38",
      "file": "services/security/jsonSanitizer.ts",
      "line": 216,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (type === \"number\" && !Number.isFinite(value as number)) {",
      "context": {
        "before": [
          "",
          "  if (type === \"boolean\" || type === \"number\") {",
          "    // Check for NaN/Infinity (not valid JSON but could slip through)"
        ],
        "after": [
          "      warnings.push(`Non-finite number replaced with null: ${value}`);",
          "      return null;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:177:52",
      "file": "services/security/rateLimits.ts",
      "line": 177,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function saveStoredLimits(limits: StoredRateLimits): void {",
      "context": {
        "before": [
          "/**",
          " * Save rate limits to localStorage.",
          " */"
        ],
        "after": [
          "  try {",
          "    localStorage.setItem(STORAGE_KEY, JSON.stringify(limits));",
          "  } catch (error) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:203:29",
      "file": "services/security/rateLimits.ts",
      "line": 203,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function saveSessionCounts(): void {",
      "context": {
        "before": [
          "/**",
          " * Save session counts to sessionStorage.",
          " */"
        ],
        "after": [
          "  try {",
          "    sessionStorage.setItem(SESSION_KEY, JSON.stringify(sessionCounts));",
          "  } catch (error) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/security/rateLimits.ts:371:60",
      "file": "services/security/rateLimits.ts",
      "line": 371,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setRateLimitConfig(config: RateLimitConfig): void {",
      "context": {
        "before": [
          " * Set custom rate limit configuration.",
          " * Overrides defaults for specific tools.",
          " */"
        ],
        "after": [
          "  customLimits[config.toolName] = config;",
          "  console.log(",
          "    `[SECURITY] Rate limit configured for ${config.toolName}:`,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/segmentToMask.ts:90:24",
      "file": "services/segmentToMask.ts",
      "line": 90,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const width = data[0]?.length ?? 0;",
      "context": {
        "before": [
          "    : imageDataToArray(mask, threshold);",
          "",
          "  const height = data.length;"
        ],
        "after": [
          "",
          "  if (height === 0 || width === 0) return [];",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:278:28",
      "file": "services/spriteSheet.ts",
      "line": 278,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameWidth: frames[0]?.source.width ?? 0,",
      "context": {
        "before": [
          "      rows,",
          "      frames,",
          "      totalFrames: frames.length,"
        ],
        "after": [
          "      frameHeight: frames[0]?.source.height ?? 0,",
          "      imageWidth,",
          "      imageHeight,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:279:29",
      "file": "services/spriteSheet.ts",
      "line": 279,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameHeight: frames[0]?.source.height ?? 0,",
      "context": {
        "before": [
          "      frames,",
          "      totalFrames: frames.length,",
          "      frameWidth: frames[0]?.source.width ?? 0,"
        ],
        "after": [
          "      imageWidth,",
          "      imageHeight,",
          "      animations: new Map(),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:288:22",
      "file": "services/spriteSheet.ts",
      "line": 288,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (metadata.meta?.frameTags) {",
      "context": {
        "before": [
          "    };",
          "",
          "    // Parse animations from frame tags"
        ],
        "after": [
          "      for (const tag of metadata.meta.frameTags) {",
          "        const animFrames: number[] = [];",
          "        for (let i = tag.from; i <= tag.to; i++) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:416:60",
      "file": "services/spriteSheet.ts",
      "line": 416,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addAnimation(sheetId: string, animation: SpriteAnimation): void {",
      "context": {
        "before": [
          "  /**",
          "   * Add a custom animation to a sprite sheet",
          "   */"
        ],
        "after": [
          "    const sheet = this.sheets.get(sheetId);",
          "    if (!sheet) {",
          "      console.warn(`Sprite sheet not found: ${sheetId}`);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:504:33",
      "file": "services/spriteSheet.ts",
      "line": 504,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "spriteFrameRate: animation?.frameRate ?? sheet.defaultFrameRate,",
      "context": {
        "before": [
          "      spriteSheetColumns: sheet.columns,",
          "      spriteSheetRows: sheet.rows,",
          "      animateSprite: true,"
        ],
        "after": [
          "      randomStartFrame: true,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:517:15",
      "file": "services/spriteSheet.ts",
      "line": 517,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!sheet?.texture) return null;",
      "context": {
        "before": [
          "    frameIndex: number,",
          "  ): THREE.SpriteMaterial | null {",
          "    const sheet = this.sheets.get(sheetId);"
        ],
        "after": [
          "",
          "    const frame = sheet.frames[frameIndex];",
          "    if (!frame) return null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:541:4",
      "file": "services/spriteSheet.ts",
      "line": 541,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    material: THREE.SpriteMaterial,",
          "    sheetId: string,",
          "    frameIndex: number,"
        ],
        "after": [
          "    const sheet = this.sheets.get(sheetId);",
          "    if (!sheet?.texture || !material.map) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:543:15",
      "file": "services/spriteSheet.ts",
      "line": 543,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!sheet?.texture || !material.map) return;",
      "context": {
        "before": [
          "    frameIndex: number,",
          "  ): void {",
          "    const sheet = this.sheets.get(sheetId);"
        ],
        "after": [
          "",
          "    const frame = sheet.frames[frameIndex];",
          "    if (!frame) return;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:582:36",
      "file": "services/spriteSheet.ts",
      "line": 582,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.sheets.get(sheetId)?.texture;",
      "context": {
        "before": [
          "   * Get texture for a sprite sheet",
          "   */",
          "  getTexture(sheetId: string): THREE.Texture | undefined {"
        ],
        "after": [
          "  }",
          "",
          "  // =========================================================================="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:592:26",
      "file": "services/spriteSheet.ts",
      "line": 592,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeSheet(id: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a sprite sheet",
          "   */"
        ],
        "after": [
          "    const sheet = this.sheets.get(id);",
          "    if (sheet?.texture) {",
          "      sheet.texture.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:594:14",
      "file": "services/spriteSheet.ts",
      "line": 594,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (sheet?.texture) {",
      "context": {
        "before": [
          "   */",
          "  removeSheet(id: string): void {",
          "    const sheet = this.sheets.get(id);"
        ],
        "after": [
          "      sheet.texture.dispose();",
          "    }",
          "    this.sheets.delete(id);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/spriteSheet.ts:603:12",
      "file": "services/spriteSheet.ts",
      "line": 603,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all resources",
          "   */"
        ],
        "after": [
          "    for (const sheet of this.sheets.values()) {",
          "      if (sheet.texture) {",
          "        sheet.texture.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/spriteValidation.ts:84:40",
      "file": "services/spriteValidation.ts",
      "line": 84,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const ext = filename.split(\".\").pop()?.toLowerCase() || \"\";",
      "context": {
        "before": [
          " * Get file extension from filename",
          " */",
          "export function getFileExtension(filename: string): string {"
        ],
        "after": [
          "  return ext;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:265:27",
      "file": "services/svgExport.ts",
      "line": 265,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const pos = t.position?.value as { x?: number; y?: number } | undefined;",
      "context": {
        "before": [
          "    const t = layer.transform;",
          "    if (!t) return \"\";",
          ""
        ],
        "after": [
          "    if (pos && (pos.x || pos.y)) {",
          "      transforms.push(`translate(${pos.x || 0},${pos.y || 0})`);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:270:27",
      "file": "services/svgExport.ts",
      "line": 270,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rot = t.rotation?.value as number | undefined;",
      "context": {
        "before": [
          "      transforms.push(`translate(${pos.x || 0},${pos.y || 0})`);",
          "    }",
          ""
        ],
        "after": [
          "    if (rot) {",
          "      transforms.push(`rotate(${rot})`);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:275:26",
      "file": "services/svgExport.ts",
      "line": 275,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const scale = t.scale?.value as { x?: number; y?: number } | undefined;",
      "context": {
        "before": [
          "      transforms.push(`rotate(${rot})`);",
          "    }",
          ""
        ],
        "after": [
          "    if (scale && (scale.x !== 100 || scale.y !== 100)) {",
          "      transforms.push(",
          "        `scale(${(scale.x || 100) / 100},${(scale.y || 100) / 100})`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:349:21",
      "file": "services/svgExport.ts",
      "line": 349,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "width: options?.viewBox?.width ?? 1920,",
      "context": {
        "before": [
          "): string {",
          "  const composition = {",
          "    settings: {"
        ],
        "after": [
          "      height: options?.viewBox?.height ?? 1080,",
          "    },",
          "  };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:349:30",
      "file": "services/svgExport.ts",
      "line": 349,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "width: options?.viewBox?.width ?? 1920,",
      "context": {
        "before": [
          "): string {",
          "  const composition = {",
          "    settings: {"
        ],
        "after": [
          "      height: options?.viewBox?.height ?? 1080,",
          "    },",
          "  };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:350:22",
      "file": "services/svgExport.ts",
      "line": 350,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "height: options?.viewBox?.height ?? 1080,",
      "context": {
        "before": [
          "  const composition = {",
          "    settings: {",
          "      width: options?.viewBox?.width ?? 1920,"
        ],
        "after": [
          "    },",
          "  };",
          "  return svgExportService.exportComposition(composition, layers, options).svg;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExport.ts:350:31",
      "file": "services/svgExport.ts",
      "line": 350,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "height: options?.viewBox?.height ?? 1080,",
      "context": {
        "before": [
          "  const composition = {",
          "    settings: {",
          "      width: options?.viewBox?.width ?? 1920,"
        ],
        "after": [
          "    },",
          "  };",
          "  return svgExportService.exportComposition(composition, layers, options).svg;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:367:43",
      "file": "services/svgExtrusion.ts",
      "line": 367,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fillColor = shapePath.userData?.style?.fill;",
      "context": {
        "before": [
          "      if (shapes.length === 0) return;",
          "",
          "      // Get fill color"
        ],
        "after": [
          "      const color = new THREE.Color(",
          "        fillColor && fillColor !== \"none\" ? fillColor : \"#ffffff\",",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:367:50",
      "file": "services/svgExtrusion.ts",
      "line": 367,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fillColor = shapePath.userData?.style?.fill;",
      "context": {
        "before": [
          "      if (shapes.length === 0) return;",
          "",
          "      // Get fill color"
        ],
        "after": [
          "      const color = new THREE.Color(",
          "        fillColor && fillColor !== \"none\" ? fillColor : \"#ffffff\",",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:373:45",
      "file": "services/svgExtrusion.ts",
      "line": 373,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fillOpacity = shapePath.userData?.style?.fillOpacity ?? 1;",
      "context": {
        "before": [
          "      );",
          "",
          "      // Get fill opacity"
        ],
        "after": [
          "",
          "      // Get stroke",
          "      const strokeColor = shapePath.userData?.style?.stroke;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:373:52",
      "file": "services/svgExtrusion.ts",
      "line": 373,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fillOpacity = shapePath.userData?.style?.fillOpacity ?? 1;",
      "context": {
        "before": [
          "      );",
          "",
          "      // Get fill opacity"
        ],
        "after": [
          "",
          "      // Get stroke",
          "      const strokeColor = shapePath.userData?.style?.stroke;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:376:45",
      "file": "services/svgExtrusion.ts",
      "line": 376,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const strokeColor = shapePath.userData?.style?.stroke;",
      "context": {
        "before": [
          "      const fillOpacity = shapePath.userData?.style?.fillOpacity ?? 1;",
          "",
          "      // Get stroke"
        ],
        "after": [
          "      const strokeWidth = shapePath.userData?.style?.strokeWidth ?? 0;",
          "",
          "      // Calculate bounds for this path"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:376:52",
      "file": "services/svgExtrusion.ts",
      "line": 376,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const strokeColor = shapePath.userData?.style?.stroke;",
      "context": {
        "before": [
          "      const fillOpacity = shapePath.userData?.style?.fillOpacity ?? 1;",
          "",
          "      // Get stroke"
        ],
        "after": [
          "      const strokeWidth = shapePath.userData?.style?.strokeWidth ?? 0;",
          "",
          "      // Calculate bounds for this path"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:377:45",
      "file": "services/svgExtrusion.ts",
      "line": 377,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const strokeWidth = shapePath.userData?.style?.strokeWidth ?? 0;",
      "context": {
        "before": [
          "",
          "      // Get stroke",
          "      const strokeColor = shapePath.userData?.style?.stroke;"
        ],
        "after": [
          "",
          "      // Calculate bounds for this path",
          "      const pathBounds = this.calculatePathBounds(shapes);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:377:52",
      "file": "services/svgExtrusion.ts",
      "line": 377,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const strokeWidth = shapePath.userData?.style?.strokeWidth ?? 0;",
      "context": {
        "before": [
          "",
          "      // Get stroke",
          "      const strokeColor = shapePath.userData?.style?.stroke;"
        ],
        "after": [
          "",
          "      // Calculate bounds for this path",
          "      const pathBounds = this.calculatePathBounds(shapes);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:756:31",
      "file": "services/svgExtrusion.ts",
      "line": 756,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "else totalIndices += pos?.count ?? 0;",
      "context": {
        "before": [
          "",
          "      const idx = geom.getIndex();",
          "      if (idx) totalIndices += idx.count;"
        ],
        "after": [
          "",
          "      if (!geom.getAttribute(\"normal\")) hasNormals = false;",
          "      if (!geom.getAttribute(\"uv\")) hasUVs = false;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:1011:27",
      "file": "services/svgExtrusion.ts",
      "line": 1011,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "geometry.boundingBox?.getCenter(center);",
      "context": {
        "before": [
          "    if (config.centerOrigin !== false) {",
          "      geometry.computeBoundingBox();",
          "      const center = new THREE.Vector3();"
        ],
        "after": [
          "      geometry.translate(-center.x, -center.y, -center.z);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:1147:15",
      "file": "services/svgExtrusion.ts",
      "line": 1147,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear caches",
          "   */"
        ],
        "after": [
          "    this.documentCache.clear();",
          "    for (const geometry of this.meshCache.values()) {",
          "      geometry.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/svgExtrusion.ts:1158:12",
      "file": "services/svgExtrusion.ts",
      "line": 1158,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose resources",
          "   */"
        ],
        "after": [
          "    this.clearCache();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:47:56",
      "file": "services/templateBuilder.ts",
      "line": 47,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearTemplate(composition: Composition): void {",
      "context": {
        "before": [
          "/**",
          " * Clear template configuration from a composition",
          " */"
        ],
        "after": [
          "  composition.templateConfig = undefined;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:62:2",
      "file": "services/templateBuilder.ts",
      "line": 62,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      \"name\" | \"description\" | \"author\" | \"version\" | \"tags\" | \"posterFrame\"",
          "    >",
          "  >,"
        ],
        "after": [
          "  Object.assign(config, updates);",
          "  config.modified = new Date().toISOString();",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:239:2",
      "file": "services/templateBuilder.ts",
      "line": 239,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function reorderExposedProperties(",
          "  config: TemplateConfig,",
          "  propertyIds: string[],"
        ],
        "after": [
          "  const reordered: ExposedProperty[] = [];",
          "",
          "  propertyIds.forEach((id, index) => {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:324:2",
      "file": "services/templateBuilder.ts",
      "line": 324,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function reorderGroups(",
          "  config: TemplateConfig,",
          "  groupIds: string[],"
        ],
        "after": [
          "  groupIds.forEach((id, index) => {",
          "    const group = config.groups.find((g) => g.id === id);",
          "    if (group) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:753:31",
      "file": "services/templateBuilder.ts",
      "line": 753,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "groups.get(prop.groupId)?.push(prop);",
      "context": {
        "before": [
          "  // Organize properties",
          "  config.exposedProperties.forEach((prop) => {",
          "    if (prop.groupId && groups.has(prop.groupId)) {"
        ],
        "after": [
          "    } else {",
          "      ungrouped.push(prop);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/templateBuilder.ts:762:34",
      "file": "services/templateBuilder.ts",
      "line": 762,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "groups.get(comment.groupId)?.push(comment);",
      "context": {
        "before": [
          "  // Organize comments",
          "  config.comments.forEach((comment) => {",
          "    if (comment.groupId && groups.has(comment.groupId)) {"
        ],
        "after": [
          "    } else {",
          "      ungrouped.push(comment);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textAnimator.ts:907:30",
      "file": "services/textAnimator.ts",
      "line": 907,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (animator.wigglySelector?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Apply Wiggly Selector if enabled"
        ],
        "after": [
          "    const wigglyInfluence = calculateWigglyInfluence(",
          "      charIndex,",
          "      totalChars,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textAnimator.ts:923:34",
      "file": "services/textAnimator.ts",
      "line": 923,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (animator.expressionSelector?.enabled) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Apply Expression Selector if enabled"
        ],
        "after": [
          "    influence = calculateExpressionInfluence(",
          "      charIndex,",
          "      totalChars,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textAnimator.ts:947:26",
      "file": "services/textAnimator.ts",
      "line": 947,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "randomSeed: overrides?.randomSeed ?? Math.floor(Math.random() * 99999),",
      "context": {
        "before": [
          "  return {",
          "    ...DEFAULT_WIGGLY_SELECTOR,",
          "    ...overrides,"
        ],
        "after": [
          "  };",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textMeasurement.ts:310:26",
      "file": "services/textMeasurement.ts",
      "line": 310,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function cleanup(): void {",
      "context": {
        "before": [
          "/**",
          " * Cleanup cached resources",
          " */"
        ],
        "after": [
          "  measureCanvas = null;",
          "  measureContext = null;",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:100:36",
      "file": "services/textOnPath.ts",
      "line": 100,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private build(resolution: number): void {",
      "context": {
        "before": [
          "    this.build(resolution);",
          "  }",
          ""
        ],
        "after": [
          "    this.entries = [];",
          "    let accumulatedLength = 0;",
          "    let prevPoint = this.curve.getPointAt(0);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:192:66",
      "file": "services/textOnPath.ts",
      "line": 192,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPath(controlPoints: ControlPoint[], closed: boolean = false): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set the path from control points",
          "   */"
        ],
        "after": [
          "    if (controlPoints.length < 2) {",
          "      this.curve = null;",
          "      this.arcLengthTable = null;"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:211:31",
      "file": "services/textOnPath.ts",
      "line": 211,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p0.x + (p0.handleOut?.x ?? 0),",
      "context": {
        "before": [
          "      const bezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p0.y + (p0.handleOut?.y ?? 0)),",
          "          z0,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:212:33",
      "file": "services/textOnPath.ts",
      "line": 212,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p0.y + (p0.handleOut?.y ?? 0)),",
      "context": {
        "before": [
          "        new THREE.Vector3(p0.x, -p0.y, z0),",
          "        new THREE.Vector3(",
          "          p0.x + (p0.handleOut?.x ?? 0),"
        ],
        "after": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:216:30",
      "file": "services/textOnPath.ts",
      "line": 216,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p1.x + (p1.handleIn?.x ?? 0),",
      "context": {
        "before": [
          "          z0,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(p1.y + (p1.handleIn?.y ?? 0)),",
          "          z1,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:217:32",
      "file": "services/textOnPath.ts",
      "line": 217,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(p1.y + (p1.handleIn?.y ?? 0)),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          p1.x + (p1.handleIn?.x ?? 0),"
        ],
        "after": [
          "          z1,",
          "        ),",
          "        new THREE.Vector3(p1.x, -p1.y, z1),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:237:45",
      "file": "services/textOnPath.ts",
      "line": 237,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lastPoint.x + (lastPoint.handleOut?.x ?? 0),",
      "context": {
        "before": [
          "      const closingBezier = new THREE.CubicBezierCurve3(",
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(lastPoint.y + (lastPoint.handleOut?.y ?? 0)),",
          "          zLast,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:238:47",
      "file": "services/textOnPath.ts",
      "line": 238,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(lastPoint.y + (lastPoint.handleOut?.y ?? 0)),",
      "context": {
        "before": [
          "        new THREE.Vector3(lastPoint.x, -lastPoint.y, zLast),",
          "        new THREE.Vector3(",
          "          lastPoint.x + (lastPoint.handleOut?.x ?? 0),"
        ],
        "after": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:242:46",
      "file": "services/textOnPath.ts",
      "line": 242,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "firstPoint.x + (firstPoint.handleIn?.x ?? 0),",
      "context": {
        "before": [
          "          zLast,",
          "        ),",
          "        new THREE.Vector3("
        ],
        "after": [
          "          -(firstPoint.y + (firstPoint.handleIn?.y ?? 0)),",
          "          zFirst,",
          "        ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:243:48",
      "file": "services/textOnPath.ts",
      "line": 243,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "-(firstPoint.y + (firstPoint.handleIn?.y ?? 0)),",
      "context": {
        "before": [
          "        ),",
          "        new THREE.Vector3(",
          "          firstPoint.x + (firstPoint.handleIn?.x ?? 0),"
        ],
        "after": [
          "          zFirst,",
          "        ),",
          "        new THREE.Vector3(firstPoint.x, -firstPoint.y, zFirst),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:259:50",
      "file": "services/textOnPath.ts",
      "line": 259,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCurve(curve: THREE.CurvePath<THREE.Vector3>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Set path from THREE.js CurvePath directly",
          "   */"
        ],
        "after": [
          "    this.curve = curve;",
          "    this.arcLengthTable = new ArcLengthTable(curve);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:268:31",
      "file": "services/textOnPath.ts",
      "line": 268,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.arcLengthTable?.totalLength ?? 0;",
      "context": {
        "before": [
          "   * Get total path length",
          "   */",
          "  getTotalLength(): number {"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textOnPath.ts:430:12",
      "file": "services/textOnPath.ts",
      "line": 430,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose resources",
          "   */"
        ],
        "after": [
          "    this.curve = null;",
          "    this.arcLengthTable = null;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:257:31",
      "file": "services/textShaper.ts",
      "line": 257,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (isVariableFont && fvar?.axes) {",
      "context": {
        "before": [
          "    const isVariableFont = !!fvar;",
          "",
          "    const variableAxes: VariableFontAxis[] = [];"
        ],
        "after": [
          "      for (const axis of fvar.axes) {",
          "        variableAxes.push({",
          "          tag: axis.tag,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:261:26",
      "file": "services/textShaper.ts",
      "line": 261,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "name: axis.name?.en || axis.tag,",
      "context": {
        "before": [
          "      for (const axis of fvar.axes) {",
          "        variableAxes.push({",
          "          tag: axis.tag,"
        ],
        "after": [
          "          min: axis.minValue,",
          "          default: axis.defaultValue,",
          "          max: axis.maxValue,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:274:64",
      "file": "services/textShaper.ts",
      "line": 274,
      "column": 64,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lineGap: (font.tables as { hhea?: { lineGap?: number } })?.hhea?.lineGap ?? 0,",
      "context": {
        "before": [
          "      ascender: font.ascender,",
          "      descender: font.descender,",
          "      // Access internal OpenType tables - not fully typed in opentype.js definitions"
        ],
        "after": [
          "      capHeight: (font.tables as { os2?: { sCapHeight?: number } })?.os2?.sCapHeight ?? font.ascender * 0.7,",
          "      xHeight: (font.tables as { os2?: { sxHeight?: number } })?.os2?.sxHeight ?? font.ascender * 0.5,",
          "      hasKerning:"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:274:70",
      "file": "services/textShaper.ts",
      "line": 274,
      "column": 70,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "lineGap: (font.tables as { hhea?: { lineGap?: number } })?.hhea?.lineGap ?? 0,",
      "context": {
        "before": [
          "      ascender: font.ascender,",
          "      descender: font.descender,",
          "      // Access internal OpenType tables - not fully typed in opentype.js definitions"
        ],
        "after": [
          "      capHeight: (font.tables as { os2?: { sCapHeight?: number } })?.os2?.sCapHeight ?? font.ascender * 0.7,",
          "      xHeight: (font.tables as { os2?: { sxHeight?: number } })?.os2?.sxHeight ?? font.ascender * 0.5,",
          "      hasKerning:"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:275:68",
      "file": "services/textShaper.ts",
      "line": 275,
      "column": 68,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "capHeight: (font.tables as { os2?: { sCapHeight?: number } })?.os2?.sCapHeight ?? font.ascender * 0.7,",
      "context": {
        "before": [
          "      descender: font.descender,",
          "      // Access internal OpenType tables - not fully typed in opentype.js definitions",
          "      lineGap: (font.tables as { hhea?: { lineGap?: number } })?.hhea?.lineGap ?? 0,"
        ],
        "after": [
          "      xHeight: (font.tables as { os2?: { sxHeight?: number } })?.os2?.sxHeight ?? font.ascender * 0.5,",
          "      hasKerning:",
          "        font.kerningPairs !== undefined &&"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:275:73",
      "file": "services/textShaper.ts",
      "line": 275,
      "column": 73,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "capHeight: (font.tables as { os2?: { sCapHeight?: number } })?.os2?.sCapHeight ?? font.ascender * 0.7,",
      "context": {
        "before": [
          "      descender: font.descender,",
          "      // Access internal OpenType tables - not fully typed in opentype.js definitions",
          "      lineGap: (font.tables as { hhea?: { lineGap?: number } })?.hhea?.lineGap ?? 0,"
        ],
        "after": [
          "      xHeight: (font.tables as { os2?: { sxHeight?: number } })?.os2?.sxHeight ?? font.ascender * 0.5,",
          "      hasKerning:",
          "        font.kerningPairs !== undefined &&"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:276:64",
      "file": "services/textShaper.ts",
      "line": 276,
      "column": 64,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "xHeight: (font.tables as { os2?: { sxHeight?: number } })?.os2?.sxHeight ?? font.ascender * 0.5,",
      "context": {
        "before": [
          "      // Access internal OpenType tables - not fully typed in opentype.js definitions",
          "      lineGap: (font.tables as { hhea?: { lineGap?: number } })?.hhea?.lineGap ?? 0,",
          "      capHeight: (font.tables as { os2?: { sCapHeight?: number } })?.os2?.sCapHeight ?? font.ascender * 0.7,"
        ],
        "after": [
          "      hasKerning:",
          "        font.kerningPairs !== undefined &&",
          "        Object.keys(font.kerningPairs).length > 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:276:69",
      "file": "services/textShaper.ts",
      "line": 276,
      "column": 69,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "xHeight: (font.tables as { os2?: { sxHeight?: number } })?.os2?.sxHeight ?? font.ascender * 0.5,",
      "context": {
        "before": [
          "      // Access internal OpenType tables - not fully typed in opentype.js definitions",
          "      lineGap: (font.tables as { hhea?: { lineGap?: number } })?.hhea?.lineGap ?? 0,",
          "      capHeight: (font.tables as { os2?: { sCapHeight?: number } })?.os2?.sCapHeight ?? font.ascender * 0.7,"
        ],
        "after": [
          "      hasKerning:",
          "        font.kerningPairs !== undefined &&",
          "        Object.keys(font.kerningPairs).length > 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:324:18",
      "file": "services/textShaper.ts",
      "line": 324,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(notdef?.advanceWidth ?? font.unitsPerEm * 0.5) * scale;",
      "context": {
        "before": [
          "        // Use notdef glyph",
          "        const notdef = font.glyphs.get(0);",
          "        const advanceWidth ="
        ],
        "after": [
          "        glyphs.push({",
          "          character: char,",
          "          charIndex: i,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:431:18",
      "file": "services/textShaper.ts",
      "line": 431,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(notdef?.advanceWidth ?? font.unitsPerEm * 0.5) * scale;",
      "context": {
        "before": [
          "      if (!glyph) {",
          "        const notdef = font.glyphs.get(0);",
          "        const advanceWidth ="
        ],
        "after": [
          "        glyphs.push({",
          "          character: char,",
          "          charIndex: i,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:518:22",
      "file": "services/textShaper.ts",
      "line": 518,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kern: options?.kern ?? true,",
      "context": {
        "before": [
          "    try {",
          "      const shaped = this.shapeSync(text, fontFamily, {",
          "        fontSize,"
        ],
        "after": [
          "        letterSpacing: options?.letterSpacing ?? 0,",
          "      });",
          "      return shaped.glyphs.map((g) => g.xAdvance);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:519:31",
      "file": "services/textShaper.ts",
      "line": 519,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "letterSpacing: options?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "      const shaped = this.shapeSync(text, fontFamily, {",
          "        fontSize,",
          "        kern: options?.kern ?? true,"
        ],
        "after": [
          "      });",
          "      return shaped.glyphs.map((g) => g.xAdvance);",
          "    } catch {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:540:22",
      "file": "services/textShaper.ts",
      "line": 540,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kern: options?.kern ?? true,",
      "context": {
        "before": [
          "    try {",
          "      const shaped = this.shapeSync(text, fontFamily, {",
          "        fontSize,"
        ],
        "after": [
          "        letterSpacing: options?.letterSpacing ?? 0,",
          "      });",
          "      return shaped.glyphs.map((g) => g.x);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:541:31",
      "file": "services/textShaper.ts",
      "line": 541,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "letterSpacing: options?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "      const shaped = this.shapeSync(text, fontFamily, {",
          "        fontSize,",
          "        kern: options?.kern ?? true,"
        ],
        "after": [
          "      });",
          "      return shaped.glyphs.map((g) => g.x);",
          "    } catch {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:594:18",
      "file": "services/textShaper.ts",
      "line": 594,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return cached?.metrics ?? null;",
      "context": {
        "before": [
          "   */",
          "  getFontMetrics(fontFamily: string): FontMetrics | null {",
          "    const cached = fontCache.get(fontFamily.toLowerCase());"
        ],
        "after": [
          "  }",
          "",
          "  /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:600:15",
      "file": "services/textShaper.ts",
      "line": 600,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all caches",
          "   */"
        ],
        "after": [
          "    fontCache.clear();",
          "    shapingCache.clear();",
          "    logger.debug(\"TextShaper caches cleared\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:609:22",
      "file": "services/textShaper.ts",
      "line": 609,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearShapingCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear shaping cache only (keep fonts)",
          "   */"
        ],
        "after": [
          "    shapingCache.clear();",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textShaper.ts:635:61",
      "file": "services/textShaper.ts",
      "line": 635,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private addToShapingCache(key: string, result: ShapedText): void {",
      "context": {
        "before": [
          "    return `${fontFamily.toLowerCase()}:${opts.fontSize}:${opts.kern}:${opts.letterSpacing}:${text}`;",
          "  }",
          ""
        ],
        "after": [
          "    // Evict oldest entries if cache is full",
          "    if (shapingCache.size >= MAX_SHAPING_CACHE_SIZE) {",
          "      const firstKey = shapingCache.keys().next().value;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:111:65",
      "file": "services/textToVector.ts",
      "line": 111,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function registerFontUrl(fontFamily: string, url: string): void {",
      "context": {
        "before": [
          "/**",
          " * Register a font URL for a font family name",
          " */"
        ],
        "after": [
          "  fontUrlMap.set(fontFamily.toLowerCase(), url);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:160:33",
      "file": "services/textToVector.ts",
      "line": 160,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearFontCache(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear font cache",
          " */"
        ],
        "after": [
          "  fontCache.clear();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:394:27",
      "file": "services/textToVector.ts",
      "line": 394,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fontSize = options?.fontSize ?? textData.fontSize ?? 72;",
      "context": {
        "before": [
          "",
          "  const text = textData.text || \"\";",
          "  const fontFamily = textData.font || \"Arial\";"
        ],
        "after": [
          "",
          "  const result = await textToVector(text, fontFamily, { ...options, fontSize });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:399:35",
      "file": "services/textToVector.ts",
      "line": 399,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const groupByCharacter = options?.groupByCharacter ?? true;",
      "context": {
        "before": [
          "  const result = await textToVector(text, fontFamily, { ...options, fontSize });",
          "",
          "  const layers: Partial<Layer>[] = [];"
        ],
        "after": [
          "",
          "  const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;",
          "  const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:401:38",
      "file": "services/textToVector.ts",
      "line": 401,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;",
      "context": {
        "before": [
          "  const layers: Partial<Layer>[] = [];",
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          ""
        ],
        "after": [
          "  const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
          "",
          "  if (groupByCharacter) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:401:48",
      "file": "services/textToVector.ts",
      "line": 401,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;",
      "context": {
        "before": [
          "  const layers: Partial<Layer>[] = [];",
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          ""
        ],
        "after": [
          "  const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
          "",
          "  if (groupByCharacter) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:401:63",
      "file": "services/textToVector.ts",
      "line": 401,
      "column": 63,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;",
      "context": {
        "before": [
          "  const layers: Partial<Layer>[] = [];",
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          ""
        ],
        "after": [
          "  const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
          "",
          "  if (groupByCharacter) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:402:38",
      "file": "services/textToVector.ts",
      "line": 402,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
      "context": {
        "before": [
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          "",
          "  const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;"
        ],
        "after": [
          "",
          "  if (groupByCharacter) {",
          "    for (const charGroup of result.characters) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:402:48",
      "file": "services/textToVector.ts",
      "line": 402,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
      "context": {
        "before": [
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          "",
          "  const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;"
        ],
        "after": [
          "",
          "  if (groupByCharacter) {",
          "    for (const charGroup of result.characters) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:402:63",
      "file": "services/textToVector.ts",
      "line": 402,
      "column": 63,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layerY = (textLayer.transform?.position?.value as any)?.y ?? 0;",
      "context": {
        "before": [
          "  const groupByCharacter = options?.groupByCharacter ?? true;",
          "",
          "  const layerX = (textLayer.transform?.position?.value as any)?.x ?? 0;"
        ],
        "after": [
          "",
          "  if (groupByCharacter) {",
          "    for (const charGroup of result.characters) {"
        ]
      },
      "typeInfo": "Type assertion to 'any'",
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:413:35",
      "file": "services/textToVector.ts",
      "line": 413,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "closed: charGroup.paths[0]?.closed ?? false,",
      "context": {
        "before": [
          "      const splineData: SplineData = {",
          "        pathData: \"\",",
          "        controlPoints,"
        ],
        "after": [
          "        stroke: \"#ffffff\",",
          "        strokeWidth: 2,",
          "        fill: \"transparent\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:434:32",
      "file": "services/textToVector.ts",
      "line": 434,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "textLayer.transform?.rotation ??",
      "context": {
        "before": [
          "            \"position\",",
          "          ),",
          "          rotation:"
        ],
        "after": [
          "            createAnimatableProperty(\"Rotation\", 0, \"number\"),",
          "          scale:",
          "            textLayer.transform?.scale ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:437:32",
      "file": "services/textToVector.ts",
      "line": 437,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "textLayer.transform?.scale ??",
      "context": {
        "before": [
          "            textLayer.transform?.rotation ??",
          "            createAnimatableProperty(\"Rotation\", 0, \"number\"),",
          "          scale:"
        ],
        "after": [
          "            createAnimatableProperty(\"Scale\", { x: 100, y: 100 }, \"position\"),",
          "          anchorPoint: createAnimatableProperty(",
          "            \"Anchor Point\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:455:33",
      "file": "services/textToVector.ts",
      "line": 455,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "closed: result.allPaths[0]?.closed ?? false,",
      "context": {
        "before": [
          "    const splineData: SplineData = {",
          "      pathData: \"\",",
          "      controlPoints: allControlPoints,"
        ],
        "after": [
          "      stroke: \"#ffffff\",",
          "      strokeWidth: 2,",
          "      fill: \"transparent\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:476:30",
      "file": "services/textToVector.ts",
      "line": 476,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "textLayer.transform?.rotation ??",
      "context": {
        "before": [
          "          \"position\",",
          "        ),",
          "        rotation:"
        ],
        "after": [
          "          createAnimatableProperty(\"Rotation\", 0, \"number\"),",
          "        scale:",
          "          textLayer.transform?.scale ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:479:30",
      "file": "services/textToVector.ts",
      "line": 479,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "textLayer.transform?.scale ??",
      "context": {
        "before": [
          "          textLayer.transform?.rotation ??",
          "          createAnimatableProperty(\"Rotation\", 0, \"number\"),",
          "        scale:"
        ],
        "after": [
          "          createAnimatableProperty(\"Scale\", { x: 100, y: 100 }, \"position\"),",
          "        anchorPoint: createAnimatableProperty(",
          "          \"Anchor Point\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:575:15",
      "file": "services/textToVector.ts",
      "line": 575,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: options?.x ?? 0,",
      "context": {
        "before": [
          "  options?: TextToVectorFromUrlOptions,",
          "): Promise<TextToVectorResult> {",
          "  const opts = {"
        ],
        "after": [
          "    y: options?.y ?? 0,",
          "    kerning: options?.kerning ?? true,",
          "    letterSpacing: options?.letterSpacing ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:576:15",
      "file": "services/textToVector.ts",
      "line": 576,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: options?.y ?? 0,",
      "context": {
        "before": [
          "): Promise<TextToVectorResult> {",
          "  const opts = {",
          "    x: options?.x ?? 0,"
        ],
        "after": [
          "    kerning: options?.kerning ?? true,",
          "    letterSpacing: options?.letterSpacing ?? 0,",
          "  };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:577:21",
      "file": "services/textToVector.ts",
      "line": 577,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "kerning: options?.kerning ?? true,",
      "context": {
        "before": [
          "  const opts = {",
          "    x: options?.x ?? 0,",
          "    y: options?.y ?? 0,"
        ],
        "after": [
          "    letterSpacing: options?.letterSpacing ?? 0,",
          "  };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:578:27",
      "file": "services/textToVector.ts",
      "line": 578,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "letterSpacing: options?.letterSpacing ?? 0,",
      "context": {
        "before": [
          "    x: options?.x ?? 0,",
          "    y: options?.y ?? 0,",
          "    kerning: options?.kerning ?? true,"
        ],
        "after": [
          "  };",
          "",
          "  // Load font from URL"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/textToVector.ts:660:38",
      "file": "services/textToVector.ts",
      "line": 660,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fontFamily: font.names.fontFamily?.en || \"Unknown\",",
      "context": {
        "before": [
          "    characters,",
          "    bounds,",
          "    text,"
        ],
        "after": [
          "    fontSize,",
          "  };",
          "}"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:111:50",
      "file": "services/timelineSnap.ts",
      "line": 111,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (config.snapToBeats && context.audioAnalysis?.onsets) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Audio beat snapping"
        ],
        "after": [
          "    for (const onset of context.audioAnalysis.onsets) {",
          "      const distance = Math.abs(frame - onset);",
          "      if (distance <= thresholdFrames) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:125:45",
      "file": "services/timelineSnap.ts",
      "line": 125,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (config.snapToPeaks && context.peakData?.indices) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Audio peak snapping"
        ],
        "after": [
          "    for (const peakFrame of context.peakData.indices) {",
          "      const distance = Math.abs(frame - peakFrame);",
          "      if (distance <= thresholdFrames) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:216:2",
      "file": "services/timelineSnap.ts",
      "line": 216,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  thresholdFrames: number,",
          "  pixelsPerFrame: number,",
          "  targets: SnapResult[],"
        ],
        "after": [
          "  const properties: AnimatableProperty<any>[] = [",
          "    layer.transform.position,",
          "    layer.transform.scale,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:250:23",
      "file": "services/timelineSnap.ts",
      "line": 250,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return audioAnalysis?.onsets ?? [];",
      "context": {
        "before": [
          " * Get all beat frames from audio analysis",
          " */",
          "export function getBeatFrames(audioAnalysis: AudioAnalysis | null): number[] {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:257:18",
      "file": "services/timelineSnap.ts",
      "line": 257,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return peakData?.indices ?? [];",
      "context": {
        "before": [
          " * Get all peak frames from peak data",
          " */",
          "export function getPeakFrames(peakData: PeakData | null): number[] {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:268:21",
      "file": "services/timelineSnap.ts",
      "line": 268,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!audioAnalysis?.onsets) return false;",
      "context": {
        "before": [
          "  audioAnalysis: AudioAnalysis | null,",
          "  thresholdFrames: number = 2,",
          "): boolean {"
        ],
        "after": [
          "",
          "  return audioAnalysis.onsets.some(",
          "    (onset) => Math.abs(frame - onset) <= thresholdFrames,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/timelineSnap.ts:282:21",
      "file": "services/timelineSnap.ts",
      "line": 282,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!audioAnalysis?.onsets || audioAnalysis.onsets.length === 0) {",
      "context": {
        "before": [
          "  frame: number,",
          "  audioAnalysis: AudioAnalysis | null,",
          "): number | null {"
        ],
        "after": [
          "    return null;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/timelineWaveform.ts:215:48",
      "file": "services/timelineWaveform.ts",
      "line": 215,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearWaveformCache(id?: string): void {",
      "context": {
        "before": [
          "/**",
          " * Clear waveform cache for an ID",
          " */"
        ],
        "after": [
          "  if (id) {",
          "    waveformCache.delete(id);",
          "  } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/timelineWaveform.ts:234:2",
      "file": "services/timelineWaveform.ts",
      "line": 234,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  canvas: HTMLCanvasElement,",
          "  waveform: WaveformData,",
          "  options: WaveformRenderOptions,"
        ],
        "after": [
          "  const ctx = canvas.getContext(\"2d\");",
          "  if (!ctx) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/timelineWaveform.ts:396:2",
      "file": "services/timelineWaveform.ts",
      "line": 396,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  canvas: HTMLCanvasElement,",
          "  waveform: WaveformData,",
          "  config: TimelineWaveformConfig,"
        ],
        "after": [
          "  const {",
          "    layerColor,",
          "    startFrame,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:141:39",
      "file": "services/trackPointService.ts",
      "line": 141,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function deleteSelectedTracks(): void {",
      "context": {
        "before": [
          "/**",
          " * Delete selected tracks",
          " */"
        ],
        "after": [
          "  for (const trackId of state.selectedTrackIds) {",
          "    state.tracks.delete(trackId);",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:158:2",
      "file": "services/trackPointService.ts",
      "line": 158,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  x: number,",
          "  y: number,",
          "  confidence: number = 1.0,"
        ],
        "after": [
          "  const track = state.tracks.get(trackId);",
          "  if (track && !track.locked) {",
          "    track.positions.set(frame, { x, y, confidence });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:173:15",
      "file": "services/trackPointService.ts",
      "line": 173,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return track?.positions.get(frame) ?? null;",
      "context": {
        "before": [
          "  frame: number,",
          "): { x: number; y: number; confidence: number } | null {",
          "  const track = state.tracks.get(trackId);"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:179:68",
      "file": "services/trackPointService.ts",
      "line": 179,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function removeTrackPosition(trackId: string, frame: number): void {",
      "context": {
        "before": [
          "/**",
          " * Remove track position at a specific frame",
          " */"
        ],
        "after": [
          "  const track = state.tracks.get(trackId);",
          "  if (track && !track.locked) {",
          "    track.positions.delete(frame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:251:72",
      "file": "services/trackPointService.ts",
      "line": 251,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function selectTrack(trackId: string, additive: boolean = false): void {",
      "context": {
        "before": [
          "/**",
          " * Select a track",
          " */"
        ],
        "after": [
          "  if (!additive) {",
          "    state.selectedTrackIds.clear();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:267:47",
      "file": "services/trackPointService.ts",
      "line": 267,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function deselectTrack(trackId: string): void {",
      "context": {
        "before": [
          "/**",
          " * Deselect a track",
          " */"
        ],
        "after": [
          "  state.selectedTrackIds.delete(trackId);",
          "  if (state.activeTrackId === trackId) {",
          "    state.activeTrackId = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:282:33",
      "file": "services/trackPointService.ts",
      "line": 282,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearSelection(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear all track selections",
          " */"
        ],
        "after": [
          "  for (const track of state.tracks.values()) {",
          "    track.selected = false;",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:293:55",
      "file": "services/trackPointService.ts",
      "line": 293,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setActiveTrack(trackId: string | null): void {",
      "context": {
        "before": [
          "/**",
          " * Set active track (for editing)",
          " */"
        ],
        "after": [
          "  state.activeTrackId = trackId;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:300:65",
      "file": "services/trackPointService.ts",
      "line": 300,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setTrackLocked(trackId: string, locked: boolean): void {",
      "context": {
        "before": [
          "/**",
          " * Lock/unlock a track",
          " */"
        ],
        "after": [
          "  const track = state.tracks.get(trackId);",
          "  if (track) {",
          "    track.locked = locked;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:310:59",
      "file": "services/trackPointService.ts",
      "line": 310,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function renameTrack(trackId: string, name: string): void {",
      "context": {
        "before": [
          "/**",
          " * Rename a track",
          " */"
        ],
        "after": [
          "  const track = state.tracks.get(trackId);",
          "  if (track) {",
          "    track.name = name;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:320:62",
      "file": "services/trackPointService.ts",
      "line": 320,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setTrackColor(trackId: string, color: string): void {",
      "context": {
        "before": [
          "/**",
          " * Set track color",
          " */"
        ],
        "after": [
          "  const track = state.tracks.get(trackId);",
          "  if (track) {",
          "    track.color = color;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:330:58",
      "file": "services/trackPointService.ts",
      "line": 330,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setGroundPlane(plane: GroundPlane | null): void {",
      "context": {
        "before": [
          "/**",
          " * Set ground plane for 3D alignment",
          " */"
        ],
        "after": [
          "  state.groundPlane = plane;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:346:14",
      "file": "services/trackPointService.ts",
      "line": 346,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!track1?.position3D || !track2?.position3D || !track3?.position3D) {",
      "context": {
        "before": [
          "  const track2 = state.tracks.get(trackId2);",
          "  const track3 = state.tracks.get(trackId3);",
          ""
        ],
        "after": [
          "    console.warn(\"Cannot define ground plane: tracks must have 3D positions\");",
          "    return null;",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:346:37",
      "file": "services/trackPointService.ts",
      "line": 346,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!track1?.position3D || !track2?.position3D || !track3?.position3D) {",
      "context": {
        "before": [
          "  const track2 = state.tracks.get(trackId2);",
          "  const track3 = state.tracks.get(trackId3);",
          ""
        ],
        "after": [
          "    console.warn(\"Cannot define ground plane: tracks must have 3D positions\");",
          "    return null;",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:346:60",
      "file": "services/trackPointService.ts",
      "line": 346,
      "column": 60,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!track1?.position3D || !track2?.position3D || !track3?.position3D) {",
      "context": {
        "before": [
          "  const track2 = state.tracks.get(trackId2);",
          "  const track3 = state.tracks.get(trackId3);",
          ""
        ],
        "after": [
          "    console.warn(\"Cannot define ground plane: tracks must have 3D positions\");",
          "    return null;",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:393:13",
      "file": "services/trackPointService.ts",
      "line": 393,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!track?.position3D) {",
      "context": {
        "before": [
          " */",
          "export function setOrigin3D(trackId: string): boolean {",
          "  const track = state.tracks.get(trackId);"
        ],
        "after": [
          "    console.warn(\"Cannot set origin: track must have 3D position\");",
          "    return false;",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:405:60",
      "file": "services/trackPointService.ts",
      "line": 405,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function importTrackPoints2D(points: TrackPoint2D[]): void {",
      "context": {
        "before": [
          "/**",
          " * Import tracks from TrackPoint2D array (from camera tracking import)",
          " */"
        ],
        "after": [
          "  // Group points by track ID prefix",
          "  const trackGroups = new Map<string, TrackPoint2D[]>();",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:416:29",
      "file": "services/trackPointService.ts",
      "line": 416,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "trackGroups.get(trackId)?.push(point);",
      "context": {
        "before": [
          "    if (!trackGroups.has(trackId)) {",
          "      trackGroups.set(trackId, []);",
          "    }"
        ],
        "after": [
          "  }",
          "",
          "  // Create tracks from groups"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:424:28",
      "file": "services/trackPointService.ts",
      "line": 424,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "color: trackPoints[0]?.color ?? generateTrackColor(),",
      "context": {
        "before": [
          "    const track = createTrack({",
          "      name: `Imported ${baseId}`,",
          "      type: \"imported\","
        ],
        "after": [
          "    });",
          "",
          "    for (const point of trackPoints) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:440:60",
      "file": "services/trackPointService.ts",
      "line": 440,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function importTrackPoints3D(points: TrackPoint3D[]): void {",
      "context": {
        "before": [
          "/**",
          " * Import 3D track points (from camera tracking import)",
          " */"
        ],
        "after": [
          "  for (const point of points) {",
          "    const track = createTrack({",
          "      name: point.id,"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/trackPointService.ts:454:33",
      "file": "services/trackPointService.ts",
      "line": 454,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearAllTracks(): void {",
      "context": {
        "before": [
          "/**",
          " * Clear all tracks",
          " */"
        ],
        "after": [
          "  state.tracks.clear();",
          "  state.selectedTrackIds.clear();",
          "  state.activeTrackId = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:217:25",
      "file": "services/vectorize.ts",
      "line": 217,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "memCheck.warning?.message || \"Insufficient GPU memory for StarVector\",",
      "context": {
        "before": [
          "    const memCheck = canAllocate(VRAM_ESTIMATES[\"model:starvector\"] || 2500);",
          "    if (!memCheck.canProceed) {",
          "      throw new Error("
        ],
        "after": [
          "      );",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:254:39",
      "file": "services/vectorize.ts",
      "line": 254,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "throw new Error(memCheck.warning?.message || \"Insufficient GPU memory\");",
      "context": {
        "before": [
          "    // Check memory before loading",
          "    const memCheck = canAllocate(VRAM_ESTIMATES[\"model:starvector\"] || 2500);",
          "    if (!memCheck.canProceed) {"
        ],
        "after": [
          "    }",
          "",
          "    try {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:258:17",
      "file": "services/vectorize.ts",
      "line": 258,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"downloading\", \"Downloading StarVector model (~2.5GB)...\");",
      "context": {
        "before": [
          "    }",
          "",
          "    try {"
        ],
        "after": [
          "",
          "      const response = await fetch(",
          "        `${this.baseUrl}/lattice/vectorize/download-starvector`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:285:17",
      "file": "services/vectorize.ts",
      "line": 285,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"complete\", \"StarVector model loaded\");",
      "context": {
        "before": [
          "        },",
          "      );",
          ""
        ],
        "after": [
          "      logger.info(\"StarVector model loaded\");",
          "    } catch (error) {",
          "      logger.error(\"Failed to load StarVector:\", error);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:342:17",
      "file": "services/vectorize.ts",
      "line": 342,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"checking\", \"Checking StarVector model...\");",
      "context": {
        "before": [
          "",
          "    if (mode === \"ai\") {",
          "      // Check if StarVector is loaded"
        ],
        "after": [
          "      const status = await this.getStatus();",
          "",
          "      if (!status.starvector.loaded) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:347:21",
      "file": "services/vectorize.ts",
      "line": 347,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"downloading\", \"Downloading StarVector model...\");",
      "context": {
        "before": [
          "",
          "      if (!status.starvector.loaded) {",
          "        if (!status.starvector.downloaded) {"
        ],
        "after": [
          "        }",
          "        await this.loadStarVectorModel(onProgress);",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:352:17",
      "file": "services/vectorize.ts",
      "line": 352,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"vectorizing\", \"Running AI vectorization...\");",
      "context": {
        "before": [
          "        await this.loadStarVectorModel(onProgress);",
          "      }",
          ""
        ],
        "after": [
          "      return await this.vectorizeWithAI(imageDataUrl, options.aiOptions);",
          "    }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorize.ts:357:15",
      "file": "services/vectorize.ts",
      "line": 357,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"tracing\", \"Tracing image to vectors...\");",
      "context": {
        "before": [
          "    }",
          "",
          "    // Default to VTracer (fast, works with any image)"
        ],
        "after": [
          "    return await this.trace(imageDataUrl, options.traceOptions);",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/vectorLOD.ts:157:31",
      "file": "services/vectorLOD.ts",
      "line": 157,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(layerId?: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear LOD cache for a specific layer or all layers",
          "   */"
        ],
        "after": [
          "    if (layerId) {",
          "      this.lodCache.delete(layerId);",
          "    } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/vectorLOD.ts:377:24",
      "file": "services/vectorLOD.ts",
      "line": 377,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!splineData.lod?.enabled) return false;",
      "context": {
        "before": [
          "   * Check if LOD should be used for a spline",
          "   */",
          "  shouldUseLOD(splineData: SplineData, context: LODContext): boolean {"
        ],
        "after": [
          "",
          "    const pointCount = splineData.controlPoints.length;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/video/transitions.ts:149:2",
      "file": "services/video/transitions.ts",
      "line": 149,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  fromData: ImageData,",
          "  toData: ImageData,",
          "  progress: number,"
        ],
        "after": [
          "  const data = output.createImageData(fromData.width, fromData.height);",
          "  const from = fromData.data;",
          "  const to = toData.data;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/video/transitions.ts:174:2",
      "file": "services/video/transitions.ts",
      "line": 174,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  toData: ImageData,",
          "  progress: number,",
          "  blendFn: (a: number, b: number) => number,"
        ],
        "after": [
          "  const data = output.createImageData(fromData.width, fromData.height);",
          "  const from = fromData.data;",
          "  const to = toData.data;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/video/transitions.ts:205:2",
      "file": "services/video/transitions.ts",
      "line": 205,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  toData: ImageData,",
          "  progress: number,",
          "  seed: number = 12345,"
        ],
        "after": [
          "  const data = output.createImageData(fromData.width, fromData.height);",
          "  const from = fromData.data;",
          "  const to = toData.data;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/video/transitions.ts:246:2",
      "file": "services/video/transitions.ts",
      "line": 246,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  progress: number,",
          "  direction: \"left\" | \"right\" | \"up\" | \"down\",",
          "  softness: number = 0.1,"
        ],
        "after": [
          "  const { width, height } = fromData;",
          "  const data = output.createImageData(width, height);",
          "  const from = fromData.data;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/video/transitions.ts:315:2",
      "file": "services/video/transitions.ts",
      "line": 315,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  centerX: number = 0.5,",
          "  centerY: number = 0.5,",
          "  softness: number = 0.05,"
        ],
        "after": [
          "  const { width, height } = fromData;",
          "  const data = output.createImageData(width, height);",
          "  const from = fromData.data;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/video/transitions.ts:368:2",
      "file": "services/video/transitions.ts",
      "line": 368,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  centerX: number = 0.5,",
          "  centerY: number = 0.5,",
          "  softness: number = 0.1,"
        ],
        "after": [
          "  const { width, height } = fromData;",
          "  const data = output.createImageData(width, height);",
          "  const from = fromData.data;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:115:50",
      "file": "services/videoDecoder.ts",
      "line": 115,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "set(frameNumber: number, frame: VideoFrameInfo): void {",
      "context": {
        "before": [
          "    return frame || null;",
          "  }",
          ""
        ],
        "after": [
          "    // Evict if at capacity",
          "    while (this.cache.size >= this.maxSize && this.accessOrder.length > 0) {",
          "      const oldest = this.accessOrder.shift()!;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:134:10",
      "file": "services/videoDecoder.ts",
      "line": 134,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "    return this.cache.has(frameNumber);",
          "  }",
          ""
        ],
        "after": [
          "    for (const frame of this.cache.values()) {",
          "      frame.bitmap.close();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:341:37",
      "file": "services/videoDecoder.ts",
      "line": 341,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const maxFrame = (this.videoInfo?.frameCount ?? 1) - 1;",
      "context": {
        "before": [
          "    }",
          "",
          "    // Clamp frame number"
        ],
        "after": [
          "    const clampedFrame = Math.max(0, Math.min(frameNumber, maxFrame));",
          "",
          "    // Check cache first"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:422:34",
      "file": "services/videoDecoder.ts",
      "line": 422,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "width: this.videoInfo?.width ?? 0,",
      "context": {
        "before": [
          "          resolve({",
          "            frameNumber,",
          "            timestamp,"
        ],
        "after": [
          "            height: this.videoInfo?.height ?? 0,",
          "            bitmap,",
          "          });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:423:35",
      "file": "services/videoDecoder.ts",
      "line": 423,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "height: this.videoInfo?.height ?? 0,",
      "context": {
        "before": [
          "            frameNumber,",
          "            timestamp,",
          "            width: this.videoInfo?.width ?? 0,"
        ],
        "after": [
          "            bitmap,",
          "          });",
          "        } catch (error) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:440:48",
      "file": "services/videoDecoder.ts",
      "line": 440,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleDecodedFrame(frame: VideoFrame): void {",
      "context": {
        "before": [
          "  /**",
          "   * Handle decoded frame from WebCodecs",
          "   */"
        ],
        "after": [
          "    this.decodedFrames.push(frame);",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:457:37",
      "file": "services/videoDecoder.ts",
      "line": 457,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const maxFrame = (this.videoInfo?.frameCount ?? 1) - 1;",
      "context": {
        "before": [
          "    }",
          "",
          "    const start = Math.max(0, startFrame);"
        ],
        "after": [
          "    const end = Math.min(endFrame, maxFrame);",
          "",
          "    const promises: Promise<void>[] = [];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:512:15",
      "file": "services/videoDecoder.ts",
      "line": 512,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearCache(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear the frame cache",
          "   */"
        ],
        "after": [
          "    this.frameCache.clear();",
          "    logger.debug(\"Frame cache cleared\");",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:540:12",
      "file": "services/videoDecoder.ts",
      "line": 540,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose of all resources",
          "   */"
        ],
        "after": [
          "    // Clear cache",
          "    this.frameCache.clear();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:614:21",
      "file": "services/videoDecoder.ts",
      "line": 614,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "oldDecoder?.dispose();",
      "context": {
        "before": [
          "        const oldest = this.decoders.keys().next().value;",
          "        if (oldest) {",
          "          const oldDecoder = this.decoders.get(oldest);"
        ],
        "after": [
          "          this.decoders.delete(oldest);",
          "        }",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:630:34",
      "file": "services/videoDecoder.ts",
      "line": 630,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeDecoder(videoUrl: string): void {",
      "context": {
        "before": [
          "  /**",
          "   * Remove a specific decoder",
          "   */"
        ],
        "after": [
          "    const decoder = this.decoders.get(videoUrl);",
          "    if (decoder) {",
          "      decoder.dispose();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/videoDecoder.ts:641:10",
      "file": "services/videoDecoder.ts",
      "line": 641,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all decoders",
          "   */"
        ],
        "after": [
          "    for (const decoder of this.decoders.values()) {",
          "      decoder.dispose();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:85:22",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 85,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "modelId: config?.modelId ?? \"rule-based\",",
      "context": {
        "before": [
          "",
          "  constructor(config?: Partial<VisionModelConfig>) {",
          "    this.config = {"
        ],
        "after": [
          "      apiEndpoint: config?.apiEndpoint,",
          "      apiKey: config?.apiKey,",
          "      maxTokens: config?.maxTokens ?? 2048,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:86:26",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 86,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "apiEndpoint: config?.apiEndpoint,",
      "context": {
        "before": [
          "  constructor(config?: Partial<VisionModelConfig>) {",
          "    this.config = {",
          "      modelId: config?.modelId ?? \"rule-based\","
        ],
        "after": [
          "      apiKey: config?.apiKey,",
          "      maxTokens: config?.maxTokens ?? 2048,",
          "      temperature: config?.temperature ?? 0.7,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:87:21",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 87,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "apiKey: config?.apiKey,",
      "context": {
        "before": [
          "    this.config = {",
          "      modelId: config?.modelId ?? \"rule-based\",",
          "      apiEndpoint: config?.apiEndpoint,"
        ],
        "after": [
          "      maxTokens: config?.maxTokens ?? 2048,",
          "      temperature: config?.temperature ?? 0.7,",
          "    };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:88:24",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 88,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "maxTokens: config?.maxTokens ?? 2048,",
      "context": {
        "before": [
          "      modelId: config?.modelId ?? \"rule-based\",",
          "      apiEndpoint: config?.apiEndpoint,",
          "      apiKey: config?.apiKey,"
        ],
        "after": [
          "      temperature: config?.temperature ?? 0.7,",
          "    };",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:89:26",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 89,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "temperature: config?.temperature ?? 0.7,",
      "context": {
        "before": [
          "      apiEndpoint: config?.apiEndpoint,",
          "      apiKey: config?.apiKey,",
          "      maxTokens: config?.maxTokens ?? 2048,"
        ],
        "after": [
          "    };",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:416:45",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 416,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const content = result.data.choices[0]?.message?.content;",
      "context": {
        "before": [
          "        );",
          "      }",
          ""
        ],
        "after": [
          "",
          "      return this.parseAIResponse(content, prompt);",
          "    } catch (error) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:416:54",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 416,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const content = result.data.choices[0]?.message?.content;",
      "context": {
        "before": [
          "        );",
          "      }",
          ""
        ],
        "after": [
          "",
          "      return this.parseAIResponse(content, prompt);",
          "    } catch (error) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:483:53",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 483,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const responseContent = result.data.content[0]?.text;",
      "context": {
        "before": [
          "        );",
          "      }",
          ""
        ],
        "after": [
          "",
          "      return this.parseAIResponse(responseContent, prompt);",
          "    } catch (error) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/visionAuthoring/MotionIntentResolver.ts:597:48",
      "file": "services/visionAuthoring/MotionIntentResolver.ts",
      "line": 597,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setConfig(config: Partial<VisionModelConfig>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update configuration",
          "   */"
        ],
        "after": [
          "    this.config = { ...this.config, ...config };",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1254:19",
      "file": "services/webgpuRenderer.ts",
      "line": 1254,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "params.color?.r ?? 1,",
      "context": {
        "before": [
          "      params.intensity,",
          "      params.threshold ?? 0.5,",
          "      0, // padding"
        ],
        "after": [
          "      params.color?.g ?? 1,",
          "      params.color?.b ?? 1,",
          "      1, // alpha"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1255:19",
      "file": "services/webgpuRenderer.ts",
      "line": 1255,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "params.color?.g ?? 1,",
      "context": {
        "before": [
          "      params.threshold ?? 0.5,",
          "      0, // padding",
          "      params.color?.r ?? 1,"
        ],
        "after": [
          "      params.color?.b ?? 1,",
          "      1, // alpha",
          "    ]);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1256:19",
      "file": "services/webgpuRenderer.ts",
      "line": 1256,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "params.color?.b ?? 1,",
      "context": {
        "before": [
          "      0, // padding",
          "      params.color?.r ?? 1,",
          "      params.color?.g ?? 1,"
        ],
        "after": [
          "      1, // alpha",
          "    ]);",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "services/webgpuRenderer.ts:1451:12",
      "file": "services/webgpuRenderer.ts",
      "line": 1451,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose of WebGPU resources",
          "   */"
        ],
        "after": [
          "    if (this.capabilities.device) {",
          "      this.capabilities.device.destroy();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:76:25",
      "file": "services/workerPool.ts",
      "line": 76,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private spawnWorkers(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Spawn initial workers",
          "   */"
        ],
        "after": [
          "    for (let i = 0; i < this.config.workerCount; i++) {",
          "      this.spawnWorker();",
          "    }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:85:24",
      "file": "services/workerPool.ts",
      "line": 85,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private spawnWorker(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Spawn a single worker",
          "   */"
        ],
        "after": [
          "    const worker = new Worker(",
          "      new URL(\"@/workers/computeWorker.ts\", import.meta.url),",
          "      { type: \"module\" },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:115:4",
      "file": "services/workerPool.ts",
      "line": 115,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  private handleWorkerMessage(",
          "    state: WorkerState,",
          "    response: WorkerResponse,"
        ],
        "after": [
          "    state.busy = false;",
          "    state.taskCount++;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:142:67",
      "file": "services/workerPool.ts",
      "line": 142,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private handleWorkerError(state: WorkerState, error: ErrorEvent): void {",
      "context": {
        "before": [
          "  /**",
          "   * Handle worker error",
          "   */"
        ],
        "after": [
          "    state.busy = false;",
          "",
          "    // Reject all pending tasks for this worker"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:157:44",
      "file": "services/workerPool.ts",
      "line": 157,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private recycleWorker(state: WorkerState): void {",
      "context": {
        "before": [
          "  /**",
          "   * Recycle a worker (terminate and spawn new)",
          "   */"
        ],
        "after": [
          "    const index = this.workers.indexOf(state);",
          "    if (index > -1) {",
          "      state.worker.terminate();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:190:25",
      "file": "services/workerPool.ts",
      "line": 190,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "private processQueue(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Process the task queue",
          "   */"
        ],
        "after": [
          "    while (this.taskQueue.length > 0) {",
          "      const worker = this.getAvailableWorker();",
          "      if (!worker) break;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:208:4",
      "file": "services/workerPool.ts",
      "line": 208,
      "column": 4,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    message: WorkerMessage,",
          "    resolve: (r: unknown) => void,",
          "    reject: (e: Error) => void,"
        ],
        "after": [
          "    state.busy = true;",
          "",
          "    const pending: PendingTask = {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:350:12",
      "file": "services/workerPool.ts",
      "line": 350,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Dispose all workers",
          "   */"
        ],
        "after": [
          "    this.isDisposed = true;",
          "",
          "    // Reject all pending tasks"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "services/workerPool.ts:392:36",
      "file": "services/workerPool.ts",
      "line": 392,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function disposeWorkerPool(): void {",
      "context": {
        "before": [
          "/**",
          " * Dispose the global worker pool",
          " */"
        ],
        "after": [
          "  if (globalWorkerPool) {",
          "    globalWorkerPool.dispose();",
          "    globalWorkerPool = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:98:58",
      "file": "stores/animationStore/index.ts",
      "line": 98,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setWorkArea(start: number | null, end: number | null): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set work area bounds",
          "     */"
        ],
        "after": [
          "      this.workAreaStart = start;",
          "      this.workAreaEnd = end;",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:106:20",
      "file": "stores/animationStore/index.ts",
      "line": 106,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearWorkArea(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear work area",
          "     */"
        ],
        "after": [
          "      this.workAreaStart = null;",
          "      this.workAreaEnd = null;",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:114:35",
      "file": "stores/animationStore/index.ts",
      "line": 114,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLoopPlayback(loop: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set loop playback mode",
          "     */"
        ],
        "after": [
          "      this.loopPlayback = loop;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:125:38",
      "file": "stores/animationStore/index.ts",
      "line": 125,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "play(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Start playback",
          "     */"
        ],
        "after": [
          "      playImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:132:39",
      "file": "stores/animationStore/index.ts",
      "line": 132,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pause(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Pause playback",
          "     */"
        ],
        "after": [
          "      pauseImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:139:48",
      "file": "stores/animationStore/index.ts",
      "line": 139,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "togglePlayback(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle playback state",
          "     */"
        ],
        "after": [
          "      togglePlaybackImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:146:57",
      "file": "stores/animationStore/index.ts",
      "line": 146,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrame(store: AnimationStoreAccess, frame: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set current frame",
          "     */"
        ],
        "after": [
          "      setFrameImpl(store, frame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:153:43",
      "file": "stores/animationStore/index.ts",
      "line": 153,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "nextFrame(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Advance to next frame",
          "     */"
        ],
        "after": [
          "      nextFrameImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:160:43",
      "file": "stores/animationStore/index.ts",
      "line": 160,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "prevFrame(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Go to previous frame",
          "     */"
        ],
        "after": [
          "      prevFrameImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:167:55",
      "file": "stores/animationStore/index.ts",
      "line": 167,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpFrames(store: AnimationStoreAccess, n: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Jump forward or backward by N frames",
          "     */"
        ],
        "after": [
          "      jumpFramesImpl(store, n);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:178:43",
      "file": "stores/animationStore/index.ts",
      "line": 178,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "goToStart(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Jump to first frame",
          "     */"
        ],
        "after": [
          "      goToStartImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:185:41",
      "file": "stores/animationStore/index.ts",
      "line": 185,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "goToEnd(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Jump to last frame",
          "     */"
        ],
        "after": [
          "      goToEndImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:192:70",
      "file": "stores/animationStore/index.ts",
      "line": 192,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToNextKeyframe(store: AnimationStoreAccess, layerId?: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Jump to the next keyframe (K key behavior)",
          "     */"
        ],
        "after": [
          "      jumpToNextKeyframeImpl(store, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:199:70",
      "file": "stores/animationStore/index.ts",
      "line": 199,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToPrevKeyframe(store: AnimationStoreAccess, layerId?: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Jump to the previous keyframe (J key behavior)",
          "     */"
        ],
        "after": [
          "      jumpToPrevKeyframeImpl(store, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:242:47",
      "file": "stores/animationStore/index.ts",
      "line": 242,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSnapConfig(config: Partial<SnapConfig>): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set snap configuration",
          "     */"
        ],
        "after": [
          "      this.snapConfig = { ...this.snapConfig, ...config };",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:249:21",
      "file": "stores/animationStore/index.ts",
      "line": 249,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleSnapping(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle snapping on/off",
          "     */"
        ],
        "after": [
          "      this.snapConfig.enabled = !this.snapConfig.enabled;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:264:6",
      "file": "stores/animationStore/index.ts",
      "line": 264,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        | \"peaks\"",
          "        | \"layerBounds\"",
          "        | \"playhead\","
        ],
        "after": [
          "      // Type-safe snap toggle mapping",
          "      type BooleanSnapKey =",
          "        | \"snapToGrid\""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:293:34",
      "file": "stores/animationStore/index.ts",
      "line": 293,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTimelineZoom(zoom: number): void {",
      "context": {
        "before": [
          "     * Set timeline zoom level",
          "     * @param zoom Zoom level (0.1 to 10, where 1.0 = 100%)",
          "     */"
        ],
        "after": [
          "      this.timelineZoom = Math.max(0.1, Math.min(10, zoom));",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/index.ts:313:40",
      "file": "stores/animationStore/index.ts",
      "line": 313,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const targetFrame = frame ?? comp?.currentFrame ?? 0;",
      "context": {
        "before": [
          "     */",
          "    getFrameState(store: FrameEvaluationAccess, frame?: number): FrameState {",
          "      const comp = store.getActiveComp();"
        ],
        "after": [
          "",
          "      // Get audio reactive data from audioStore",
          "      const audioStore = useAudioStore();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/animationStore/navigation.ts:17:55",
      "file": "stores/animationStore/navigation.ts",
      "line": 17,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function goToStart(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "/**",
          " * Jump to first frame",
          " */"
        ],
        "after": [
          "  const comp = store.getActiveComp();",
          "  if (!comp) return;",
          "  if (comp.currentFrame !== 0) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/navigation.ts:30:53",
      "file": "stores/animationStore/navigation.ts",
      "line": 30,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function goToEnd(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "/**",
          " * Jump to last frame",
          " */"
        ],
        "after": [
          "  const comp = store.getActiveComp();",
          "  if (!comp) return;",
          "  const lastFrame = comp.settings.frameCount - 1;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/navigation.ts:49:2",
      "file": "stores/animationStore/navigation.ts",
      "line": 49,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function jumpToNextKeyframe(",
          "  store: AnimationStoreAccess,",
          "  layerId?: string,"
        ],
        "after": [
          "  const layerIds = layerId",
          "    ? [layerId]",
          "    : useSelectionStore().selectedLayerIds.length > 0"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/navigation.ts:75:2",
      "file": "stores/animationStore/navigation.ts",
      "line": 75,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function jumpToPrevKeyframe(",
          "  store: AnimationStoreAccess,",
          "  layerId?: string,"
        ],
        "after": [
          "  const layerIds = layerId",
          "    ? [layerId]",
          "    : useSelectionStore().selectedLayerIds.length > 0"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:15:50",
      "file": "stores/animationStore/playback.ts",
      "line": 15,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function play(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "/**",
          " * Start playback",
          " */"
        ],
        "after": [
          "  const playback = usePlaybackStore();",
          "  if (playback.isPlaying) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:37:51",
      "file": "stores/animationStore/playback.ts",
      "line": 37,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function pause(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "/**",
          " * Pause playback",
          " */"
        ],
        "after": [
          "  const playback = usePlaybackStore();",
          "  playback.stop();",
          "  // Note: playbackStore.isPlaying is already set to false by playback.stop()"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:46:60",
      "file": "stores/animationStore/playback.ts",
      "line": 46,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function togglePlayback(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "/**",
          " * Toggle playback state",
          " */"
        ],
        "after": [
          "  const playback = usePlaybackStore();",
          "  if (playback.isPlaying) {",
          "    pause(store);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:59:69",
      "file": "stores/animationStore/playback.ts",
      "line": 59,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setFrame(store: AnimationStoreAccess, frame: number): void {",
      "context": {
        "before": [
          " * Set current frame",
          " * Clears temporal effect state when frame changes non-sequentially.",
          " */"
        ],
        "after": [
          "  const comp = store.getActiveComp();",
          "  if (!comp) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:64:15",
      "file": "stores/animationStore/playback.ts",
      "line": 64,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frame)) return;",
      "context": {
        "before": [
          "  if (!comp) return;",
          "",
          "  // Validate frame (NaN bypasses Math.max/min)"
        ],
        "after": [
          "",
          "  const newFrame = Math.max(0, Math.min(frame, comp.settings.frameCount - 1));",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:81:55",
      "file": "stores/animationStore/playback.ts",
      "line": 81,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function nextFrame(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "/**",
          " * Advance to next frame",
          " */"
        ],
        "after": [
          "  const comp = store.getActiveComp();",
          "  if (!comp) return;",
          "  if (comp.currentFrame < comp.settings.frameCount - 1) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:92:55",
      "file": "stores/animationStore/playback.ts",
      "line": 92,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function prevFrame(store: AnimationStoreAccess): void {",
      "context": {
        "before": [
          "/**",
          " * Go to previous frame",
          " */"
        ],
        "after": [
          "  const comp = store.getActiveComp();",
          "  if (!comp) return;",
          "  if (comp.currentFrame > 0) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:103:67",
      "file": "stores/animationStore/playback.ts",
      "line": 103,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function jumpFrames(store: AnimationStoreAccess, n: number): void {",
      "context": {
        "before": [
          "/**",
          " * Jump forward or backward by N frames",
          " */"
        ],
        "after": [
          "  const comp = store.getActiveComp();",
          "  if (!comp) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/animationStore/playback.ts:108:15",
      "file": "stores/animationStore/playback.ts",
      "line": 108,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(n)) return;",
      "context": {
        "before": [
          "  if (!comp) return;",
          "",
          "  // Validate n (NaN bypasses Math.max/min)"
        ],
        "after": [
          "",
          "  const newFrame = Math.max(",
          "    0,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:348:68",
      "file": "stores/assetStore.ts",
      "line": 348,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateMaterial(id: string, updates: Partial<PBRMaterialConfig>): void {",
      "context": {
        "before": [
          "    /**",
          "     * Update material configuration",
          "     */"
        ],
        "after": [
          "      const stored = this.materials.get(id);",
          "      if (!stored) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:385:31",
      "file": "stores/assetStore.ts",
      "line": 385,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteMaterial(id: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Delete a material",
          "     */"
        ],
        "after": [
          "      this.materials.delete(id);",
          "      if (this.selectedMaterialId === id) {",
          "        this.selectedMaterialId = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:522:6",
      "file": "stores/assetStore.ts",
      "line": 522,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      svgId: string,",
          "      pathIndex: number,",
          "      config: Partial<SVGLayerConfig>,"
        ],
        "after": [
          "      const stored = this.svgDocuments.get(svgId);",
          "      if (!stored || pathIndex >= stored.layerConfigs.length) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:564:34",
      "file": "stores/assetStore.ts",
      "line": 564,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteSvgDocument(id: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Delete an SVG document",
          "     */"
        ],
        "after": [
          "      // Remove from local cache only (svgExtrusionService.clearCache() clears all)",
          "      this.svgDocuments.delete(id);",
          "      if (this.selectedSvgId === id) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:670:20",
      "file": "stores/assetStore.ts",
      "line": 670,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return result?.mesh || null;",
      "context": {
        "before": [
          "        maxInstances,",
          "        material || undefined,",
          "      );"
        ],
        "after": [
          "    },",
          "",
          "    /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:676:35",
      "file": "stores/assetStore.ts",
      "line": 676,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteMeshParticle(id: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Delete a mesh particle",
          "     */"
        ],
        "after": [
          "      meshParticleManager.unregisterMesh(id);",
          "      this.meshParticles.delete(id);",
          "      if (this.selectedMeshParticleId === id) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:705:26",
      "file": "stores/assetStore.ts",
      "line": 705,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "name: options?.name || file.name.replace(/\\.[^.]+$/, \"\"),",
      "context": {
        "before": [
          "          columns,",
          "          rows,",
          "          {"
        ],
        "after": [
          "            frameRate: options?.frameRate,",
          "          },",
          "        );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:706:31",
      "file": "stores/assetStore.ts",
      "line": 706,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameRate: options?.frameRate,",
      "context": {
        "before": [
          "          rows,",
          "          {",
          "            name: options?.name || file.name.replace(/\\.[^.]+$/, \"\"),"
        ],
        "after": [
          "          },",
          "        );",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:738:35",
      "file": "stores/assetStore.ts",
      "line": 738,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const showWarnings = options?.showWarnings ?? true;",
      "context": {
        "before": [
          "      options?: { name?: string; showWarnings?: boolean },",
          "    ): Promise<AssetImportResult & { validation?: SpriteValidationResult }> {",
          "      const toastStore = useToastStore();"
        ],
        "after": [
          "",
          "      // Validate first",
          "      const validation = await loadAndValidateSprite(file);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:747:64",
      "file": "stores/assetStore.ts",
      "line": 747,
      "column": 64,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "validation.issues.find((i) => i.severity === \"error\")?.message ||",
      "context": {
        "before": [
          "        // Handle blocking errors",
          "        this.handleValidationIssues(validation.issues, toastStore, true);",
          "        this.lastError ="
        ],
        "after": [
          "          \"Validation failed\";",
          "        return { success: false, error: this.lastError, validation };",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:762:29",
      "file": "stores/assetStore.ts",
      "line": 762,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "`Sprite \"${options?.name || file.name}\" imported successfully`,",
      "context": {
        "before": [
          "",
          "      if (result.success) {",
          "        toastStore.success("
        ],
        "after": [
          "        );",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:781:35",
      "file": "stores/assetStore.ts",
      "line": 781,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const showWarnings = options?.showWarnings ?? true;",
      "context": {
        "before": [
          "      AssetImportResult & { validation?: SpritesheetValidationResult }",
          "    > {",
          "      const toastStore = useToastStore();"
        ],
        "after": [
          "",
          "      // Validate first",
          "      const validation = await loadAndValidateSpritesheet(file, columns, rows);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:790:64",
      "file": "stores/assetStore.ts",
      "line": 790,
      "column": 64,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "validation.issues.find((i) => i.severity === \"error\")?.message ||",
      "context": {
        "before": [
          "        // Handle blocking errors",
          "        this.handleValidationIssues(validation.issues, toastStore, true);",
          "        this.lastError ="
        ],
        "after": [
          "          \"Validation failed\";",
          "        return { success: false, error: this.lastError, validation };",
          "      }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:806:35",
      "file": "stores/assetStore.ts",
      "line": 806,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "`Sprite sheet \"${options?.name || file.name}\" imported: ${meta.totalFrames} frames (${meta.frameWidth}x${meta.frameHeight}px each)`,",
      "context": {
        "before": [
          "      if (result.success && validation.metadata) {",
          "        const meta = validation.metadata;",
          "        toastStore.success("
        ],
        "after": [
          "        );",
          "      }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:820:6",
      "file": "stores/assetStore.ts",
      "line": 820,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      issues: SpriteValidationIssue[],",
          "      toastStore: ReturnType<typeof useToastStore>,",
          "      errorsOnly: boolean = false,"
        ],
        "after": [
          "      for (const issue of issues) {",
          "        if (issue.severity === \"error\") {",
          "          toastStore.error(issue.message);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:838:6",
      "file": "stores/assetStore.ts",
      "line": 838,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      name: string,",
          "      frames: number[],",
          "      options?: { frameRate?: number; loop?: boolean; pingPong?: boolean },"
        ],
        "after": [
          "      spriteSheetService.addAnimation(sheetId, {",
          "        name,",
          "        frames,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:842:27",
      "file": "stores/assetStore.ts",
      "line": 842,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameRate: options?.frameRate ?? 24,",
      "context": {
        "before": [
          "      spriteSheetService.addAnimation(sheetId, {",
          "        name,",
          "        frames,"
        ],
        "after": [
          "        loop: options?.loop ?? true,",
          "        pingPong: options?.pingPong ?? false,",
          "      });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:843:22",
      "file": "stores/assetStore.ts",
      "line": 843,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "loop: options?.loop ?? true,",
      "context": {
        "before": [
          "        name,",
          "        frames,",
          "        frameRate: options?.frameRate ?? 24,"
        ],
        "after": [
          "        pingPong: options?.pingPong ?? false,",
          "      });",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:844:26",
      "file": "stores/assetStore.ts",
      "line": 844,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "pingPong: options?.pingPong ?? false,",
      "context": {
        "before": [
          "        frames,",
          "        frameRate: options?.frameRate ?? 24,",
          "        loop: options?.loop ?? true,"
        ],
        "after": [
          "      });",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:860:34",
      "file": "stores/assetStore.ts",
      "line": 860,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteSpriteSheet(id: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Delete a sprite sheet",
          "     */"
        ],
        "after": [
          "      const stored = this.spriteSheets.get(id);",
          "      if (stored?.textureUrl) {",
          "        URL.revokeObjectURL(stored.textureUrl);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:862:17",
      "file": "stores/assetStore.ts",
      "line": 862,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (stored?.textureUrl) {",
      "context": {
        "before": [
          "     */",
          "    deleteSpriteSheet(id: string): void {",
          "      const stored = this.spriteSheets.get(id);"
        ],
        "after": [
          "        URL.revokeObjectURL(stored.textureUrl);",
          "      }",
          "      spriteSheetService.removeSheet(id);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:894:29",
      "file": "stores/assetStore.ts",
      "line": 894,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "intensity: options?.intensity ?? this.environment.intensity,",
      "context": {
        "before": [
          "        this.environment = {",
          "          ...this.environment,",
          "          url,"
        ],
        "after": [
          "          rotation: options?.rotation ?? this.environment.rotation,",
          "          useAsBackground:",
          "            options?.useAsBackground ?? this.environment.useAsBackground,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:895:28",
      "file": "stores/assetStore.ts",
      "line": 895,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "rotation: options?.rotation ?? this.environment.rotation,",
      "context": {
        "before": [
          "          ...this.environment,",
          "          url,",
          "          intensity: options?.intensity ?? this.environment.intensity,"
        ],
        "after": [
          "          useAsBackground:",
          "            options?.useAsBackground ?? this.environment.useAsBackground,",
          "          enabled: true,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:897:20",
      "file": "stores/assetStore.ts",
      "line": 897,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "options?.useAsBackground ?? this.environment.useAsBackground,",
      "context": {
        "before": [
          "          intensity: options?.intensity ?? this.environment.intensity,",
          "          rotation: options?.rotation ?? this.environment.rotation,",
          "          useAsBackground:"
        ],
        "after": [
          "          enabled: true,",
          "        };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:941:59",
      "file": "stores/assetStore.ts",
      "line": 941,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateEnvironment(settings: Partial<EnvironmentState>): void {",
      "context": {
        "before": [
          "    /**",
          "     * Update environment settings",
          "     */"
        ],
        "after": [
          "      this.environment = { ...this.environment, ...settings };",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:948:23",
      "file": "stores/assetStore.ts",
      "line": 948,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearEnvironment(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear environment",
          "     */"
        ],
        "after": [
          "      if (this.environment.url && !this.environment.presetName) {",
          "        URL.revokeObjectURL(this.environment.url);",
          "      }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:970:17",
      "file": "stores/assetStore.ts",
      "line": 970,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearError(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear last error",
          "     */"
        ],
        "after": [
          "      this.lastError = null;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/assetStore.ts:977:14",
      "file": "stores/assetStore.ts",
      "line": 977,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "dispose(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Dispose all assets and free resources",
          "     */"
        ],
        "after": [
          "      // Revoke all blob URLs",
          "      for (const stored of this.materials.values()) {",
          "        for (const key of Object.keys(stored.config)) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:112:15",
      "file": "stores/audioKeyframeStore.ts",
      "line": 112,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(safeFps) || safeFps <= 0) {",
      "context": {
        "before": [
          "  smoothing: number,\r",
          "): { both: number[]; left: number[]; right: number[] } {\r",
          "  let safeFps = fps;\r"
        ],
        "after": [
          "    safeFps = 30;\r",
          "  }\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:116:15",
      "file": "stores/audioKeyframeStore.ts",
      "line": 116,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frameCount) || frameCount <= 0) {",
      "context": {
        "before": [
          "    safeFps = 30;\r",
          "  }\r",
          "\r"
        ],
        "after": [
          "    return { both: [], left: [], right: [] };\r",
          "  }\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:187:28",
      "file": "stores/audioKeyframeStore.ts",
      "line": 187,
      "column": 28,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeScale = Number.isFinite(scale) ? scale : 100;",
      "context": {
        "before": [
          "  scale: number,\r",
          "): AnimatableProperty<number> {\r",
          "  const id = `prop_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;\r"
        ],
        "after": [
          "\r",
          "  const keyframes: Keyframe<number>[] = amplitudes.map((amp, frame) => ({\r",
          "    id: `kf_${id}_${frame}`,\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:192:19",
      "file": "stores/audioKeyframeStore.ts",
      "line": 192,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "value: Number.isFinite(amp) ? amp * safeScale : 0,",
      "context": {
        "before": [
          "  const keyframes: Keyframe<number>[] = amplitudes.map((amp, frame) => ({\r",
          "    id: `kf_${id}_${frame}`,\r",
          "    frame,\r"
        ],
        "after": [
          "    interpolation: \"linear\" as const,\r",
          "    inHandle: { frame: 0, value: 0, enabled: false },\r",
          "    outHandle: { frame: 0, value: 0, enabled: false },\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:230:6",
      "file": "stores/audioKeyframeStore.ts",
      "line": 230,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: AudioKeyframeStoreAccess,\r",
          "      layerId: string,\r",
          "      config: Partial<PathAnimatorConfig> = {},\r"
        ],
        "after": [
          "      const animator = new AudioPathAnimator(config);\r",
          "      store.pathAnimators.set(layerId, animator);\r",
          "    },\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:242:6",
      "file": "stores/audioKeyframeStore.ts",
      "line": 242,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: AudioKeyframeStoreAccess,\r",
          "      layerId: string,\r",
          "      pathData: string,\r"
        ],
        "after": [
          "      const animator = store.pathAnimators.get(layerId);\r",
          "      if (animator) {\r",
          "        animator.setPath(pathData);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:256:6",
      "file": "stores/audioKeyframeStore.ts",
      "line": 256,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: AudioKeyframeStoreAccess,\r",
          "      layerId: string,\r",
          "      config: Partial<PathAnimatorConfig>,\r"
        ],
        "after": [
          "      const animator = store.pathAnimators.get(layerId);\r",
          "      if (animator) {\r",
          "        animator.setConfig(config);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:266:73",
      "file": "stores/audioKeyframeStore.ts",
      "line": 266,
      "column": 73,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removePathAnimator(store: AudioKeyframeStoreAccess, layerId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Remove path animator\r",
          "     */\r"
        ],
        "after": [
          "      store.pathAnimators.delete(layerId);\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:283:57",
      "file": "stores/audioKeyframeStore.ts",
      "line": 283,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updatePathAnimators(store: AudioKeyframeStoreAccess): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Update all path animators for current frame\r",
          "     */\r"
        ],
        "after": [
          "      const audioStore = useAudioStore();\r",
          "      if (!audioStore.audioAnalysis) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:287:42",
      "file": "stores/audioKeyframeStore.ts",
      "line": 287,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const frame = store.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      const audioStore = useAudioStore();\r",
          "      if (!audioStore.audioAnalysis) return;\r",
          "\r"
        ],
        "after": [
          "      const amplitude = audioStore.getFeatureAtFrame(store, \"amplitude\", frame);\r",
          "      const isBeat = audioStore.isBeatAtFrame(frame);\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:299:56",
      "file": "stores/audioKeyframeStore.ts",
      "line": 299,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetPathAnimators(store: AudioKeyframeStoreAccess): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Reset all path animators\r",
          "     */\r"
        ],
        "after": [
          "      for (const animator of store.pathAnimators.values()) {\r",
          "        animator.reset();\r",
          "      }\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:336:37",
      "file": "stores/audioKeyframeStore.ts",
      "line": 336,
      "column": 37,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const amplitudeScale = Number.isFinite(rawScale) ? rawScale : 100;",
      "context": {
        "before": [
          "        smoothing: rawSmoothing = 0,\r",
          "      } = options;\r",
          "\r"
        ],
        "after": [
          "      const smoothing = Number.isFinite(rawSmoothing)\r",
          "        ? Math.max(0, Math.min(1, rawSmoothing))\r",
          "        : 0;\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:337:32",
      "file": "stores/audioKeyframeStore.ts",
      "line": 337,
      "column": 32,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const smoothing = Number.isFinite(rawSmoothing)",
      "context": {
        "before": [
          "      } = options;\r",
          "\r",
          "      const amplitudeScale = Number.isFinite(rawScale) ? rawScale : 100;\r"
        ],
        "after": [
          "        ? Math.max(0, Math.min(1, rawSmoothing))\r",
          "        : 0;\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:628:36",
      "file": "stores/audioKeyframeStore.ts",
      "line": 628,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (analysis.spectralCentroid?.length > 0) {",
      "context": {
        "before": [
          "      }\r",
          "\r",
          "      // Spectral features section\r"
        ],
        "after": [
          "        const normalizedCentroid = analysis.spectralCentroid.map((v) =>\r",
          "          Math.min(1, v / 10000),\r",
          "        );\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:643:32",
      "file": "stores/audioKeyframeStore.ts",
      "line": 643,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (analysis.spectralFlux?.length > 0) {",
      "context": {
        "before": [
          "        result.spectral.centroid = centroidProp.id;\r",
          "      }\r",
          "\r"
        ],
        "after": [
          "        const fluxProp = createAmplitudeProperty(\r",
          "          \"Spectral - Flux\",\r",
          "          smoothing > 0\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:655:35",
      "file": "stores/audioKeyframeStore.ts",
      "line": 655,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (analysis.spectralRolloff?.length > 0) {",
      "context": {
        "before": [
          "        result.spectral.flux = fluxProp.id;\r",
          "      }\r",
          "\r"
        ],
        "after": [
          "        const normalizedRolloff = analysis.spectralRolloff.map((v) =>\r",
          "          Math.min(1, v / 10000),\r",
          "        );\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:670:36",
      "file": "stores/audioKeyframeStore.ts",
      "line": 670,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (analysis.spectralFlatness?.length > 0) {",
      "context": {
        "before": [
          "        result.spectral.rolloff = rolloffProp.id;\r",
          "      }\r",
          "\r"
        ],
        "after": [
          "        const flatnessProp = createAmplitudeProperty(\r",
          "          \"Spectral - Flatness\",\r",
          "          smoothing > 0\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:683:29",
      "file": "stores/audioKeyframeStore.ts",
      "line": 683,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (analysis.rmsEnergy?.length > 0) {",
      "context": {
        "before": [
          "      }\r",
          "\r",
          "      // Dynamics section\r"
        ],
        "after": [
          "        const rmsProp = createAmplitudeProperty(\r",
          "          \"Dynamics - RMS Energy\",\r",
          "          smoothing > 0\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioKeyframeStore.ts:695:36",
      "file": "stores/audioKeyframeStore.ts",
      "line": 695,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (analysis.zeroCrossingRate?.length > 0) {",
      "context": {
        "before": [
          "        result.dynamics.rms = rmsProp.id;\r",
          "      }\r",
          "\r"
        ],
        "after": [
          "        const zcrProp = createAmplitudeProperty(\r",
          "          \"Dynamics - Zero Crossing Rate\",\r",
          "          smoothing > 0\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:106:43",
      "file": "stores/audioStore.ts",
      "line": 106,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "duration: (state) => state.audioBuffer?.duration ?? 0,",
      "context": {
        "before": [
          "    isLoading: (state) =>",
          "      state.loadingState === \"decoding\" || state.loadingState === \"analyzing\",",
          "    hasError: (state) => state.loadingState === \"error\","
        ],
        "after": [
          "    bpm: (state) => state.audioAnalysis?.bpm ?? 0,",
          "    frameCount: (state) => state.audioAnalysis?.frameCount ?? 0,",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:107:40",
      "file": "stores/audioStore.ts",
      "line": 107,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "bpm: (state) => state.audioAnalysis?.bpm ?? 0,",
      "context": {
        "before": [
          "      state.loadingState === \"decoding\" || state.loadingState === \"analyzing\",",
          "    hasError: (state) => state.loadingState === \"error\",",
          "    duration: (state) => state.audioBuffer?.duration ?? 0,"
        ],
        "after": [
          "    frameCount: (state) => state.audioAnalysis?.frameCount ?? 0,",
          "",
          "    // Waveform integration helpers"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:108:47",
      "file": "stores/audioStore.ts",
      "line": 108,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameCount: (state) => state.audioAnalysis?.frameCount ?? 0,",
      "context": {
        "before": [
          "    hasError: (state) => state.loadingState === \"error\",",
          "    duration: (state) => state.audioBuffer?.duration ?? 0,",
          "    bpm: (state) => state.audioAnalysis?.bpm ?? 0,"
        ],
        "after": [
          "",
          "    // Waveform integration helpers",
          "    /** Check if audio buffer is loaded (for waveform rendering) */"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:140:28",
      "file": "stores/audioStore.ts",
      "line": 140,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "state.audioAnalysis?.bpm,",
      "context": {
        "before": [
          "    getBPM:",
          "      (state) =>",
          "      (_assetId?: string): number | undefined =>"
        ],
        "after": [
          "",
          "    // Stem reactivity getters",
          "    /** Get list of available stem names */"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:153:24",
      "file": "stores/audioStore.ts",
      "line": 153,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return stemData?.analysis ?? state.audioAnalysis;",
      "context": {
        "before": [
          "    activeAnalysis: (state) => {",
          "      if (state.activeStemName) {",
          "        const stemData = state.stemBuffers.get(state.activeStemName);"
        ],
        "after": [
          "      }",
          "      return state.audioAnalysis;",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:161:24",
      "file": "stores/audioStore.ts",
      "line": 161,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return stemData?.buffer ?? state.audioBuffer;",
      "context": {
        "before": [
          "    activeBuffer: (state) => {",
          "      if (state.activeStemName) {",
          "        const stemData = state.stemBuffers.get(state.activeStemName);"
        ],
        "after": [
          "      }",
          "      return state.audioBuffer;",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:228:17",
      "file": "stores/audioStore.ts",
      "line": 228,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cancelLoad(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Cancel ongoing audio analysis",
          "     */"
        ],
        "after": [
          "      cancelAnalysis();",
          "      this.loadingState = \"idle\";",
          "      this.loadingProgress = 0;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:239:12",
      "file": "stores/audioStore.ts",
      "line": 239,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear loaded audio",
          "     */"
        ],
        "after": [
          "      this.cancelLoad();",
          "      this.audioFile = null;",
          "      this.audioBuffer = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:253:31",
      "file": "stores/audioStore.ts",
      "line": 253,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeReactiveMapper(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Initialize the audio reactive mapper",
          "     */"
        ],
        "after": [
          "      if (!this.audioAnalysis) return;",
          "",
          "      this.reactiveMapper = new AudioReactiveMapper(this.audioAnalysis);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:279:23",
      "file": "stores/audioStore.ts",
      "line": 279,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frame ?? store?.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "    ): number {",
          "      if (!this.audioAnalysis) return 0;",
          "      const targetFrame ="
        ],
        "after": [
          "      return getFeatureAtFrameService(this.audioAnalysis, feature, targetFrame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:279:40",
      "file": "stores/audioStore.ts",
      "line": 279,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frame ?? store?.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "    ): number {",
          "      if (!this.audioAnalysis) return 0;",
          "      const targetFrame ="
        ],
        "after": [
          "      return getFeatureAtFrameService(this.audioAnalysis, feature, targetFrame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:298:36",
      "file": "stores/audioStore.ts",
      "line": 298,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPeakData(peakData: PeakData): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set peak data",
          "     */"
        ],
        "after": [
          "      this.peakData = peakData;",
          "      if (this.reactiveMapper) {",
          "        this.reactiveMapper.setPeakData(peakData);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:329:69",
      "file": "stores/audioStore.ts",
      "line": 329,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addLegacyMapping(layerId: string, mapping: AudioParticleMapping): void {",
      "context": {
        "before": [
          "    /**",
          "     * Apply audio reactivity mapping to particle layer (legacy)",
          "     */"
        ],
        "after": [
          "      const existing = this.legacyMappings.get(layerId) || [];",
          "      existing.push(mapping);",
          "      this.legacyMappings.set(layerId, existing);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:338:56",
      "file": "stores/audioStore.ts",
      "line": 338,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeLegacyMapping(layerId: string, index: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Remove legacy audio mapping",
          "     */"
        ],
        "after": [
          "      const mappings = this.legacyMappings.get(layerId);",
          "      if (mappings) {",
          "        mappings.splice(index, 1);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:362:38",
      "file": "stores/audioStore.ts",
      "line": 362,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addMapping(mapping: AudioMapping): void {",
      "context": {
        "before": [
          "    /**",
          "     * Add new audio mapping",
          "     */"
        ],
        "after": [
          "      this.reactiveMappings.push(mapping);",
          "",
          "      if (this.reactiveMapper) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:373:37",
      "file": "stores/audioStore.ts",
      "line": 373,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeMapping(mappingId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Remove audio mapping by ID",
          "     */"
        ],
        "after": [
          "      const index = this.reactiveMappings.findIndex((m) => m.id === mappingId);",
          "      if (index >= 0) {",
          "        this.reactiveMappings.splice(index, 1);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:387:69",
      "file": "stores/audioStore.ts",
      "line": 387,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateMapping(mappingId: string, updates: Partial<AudioMapping>): void {",
      "context": {
        "before": [
          "    /**",
          "     * Update audio mapping",
          "     */"
        ],
        "after": [
          "      const mapping = this.reactiveMappings.find((m) => m.id === mappingId);",
          "      if (mapping) {",
          "        Object.assign(mapping, updates);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:455:30",
      "file": "stores/audioStore.ts",
      "line": 455,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setVolume(volume: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set audio volume (0-100)",
          "     */"
        ],
        "after": [
          "      this.volume = Math.max(0, Math.min(100, volume));",
          "      this.updateGainNode();",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:463:29",
      "file": "stores/audioStore.ts",
      "line": 463,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMuted(muted: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set muted state",
          "     */"
        ],
        "after": [
          "      this.muted = muted;",
          "      this.updateGainNode();",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:471:18",
      "file": "stores/audioStore.ts",
      "line": 471,
      "column": 18,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleMuted(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle muted state",
          "     */"
        ],
        "after": [
          "      this.muted = !this.muted;",
          "      this.updateGainNode();",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:479:21",
      "file": "stores/audioStore.ts",
      "line": 479,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateGainNode(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Update gain node with current volume/muted state",
          "     */"
        ],
        "after": [
          "      if (this.gainNode) {",
          "        const effectiveVolume = this.muted ? 0 : this.volume / 100;",
          "        this.gainNode.gain.setValueAtTime("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:484:28",
      "file": "stores/audioStore.ts",
      "line": 484,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.audioContext?.currentTime ?? 0,",
      "context": {
        "before": [
          "        const effectiveVolume = this.muted ? 0 : this.volume / 100;",
          "        this.gainNode.gain.setValueAtTime(",
          "          effectiveVolume,"
        ],
        "after": [
          "        );",
          "      }",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:508:51",
      "file": "stores/audioStore.ts",
      "line": 508,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "playAudioFromFrame(frame: number, fps: number): void {",
      "context": {
        "before": [
          "     * @param frame - Current frame to start from",
          "     * @param fps - Frames per second for time calculation",
          "     */"
        ],
        "after": [
          "      if (!this.audioBuffer) {",
          "        storeLogger.debug(\"No audio loaded\");",
          "        return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:556:16",
      "file": "stores/audioStore.ts",
      "line": 556,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stopAudio(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Stop audio playback",
          "     */"
        ],
        "after": [
          "      if (this.audioSource) {",
          "        try {",
          "          this.audioSource.stop();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:575:52",
      "file": "stores/audioStore.ts",
      "line": 575,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleAudioPlayback(frame: number, fps: number): void {",
      "context": {
        "before": [
          "     * @param frame - Current frame",
          "     * @param fps - Frames per second",
          "     */"
        ],
        "after": [
          "      if (this.isPlayingAudio) {",
          "        this.stopAudio();",
          "      } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:600:43",
      "file": "stores/audioStore.ts",
      "line": 600,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "scrubAudio(frame: number, fps: number): void {",
      "context": {
        "before": [
          "     * @param frame - Frame to scrub to",
          "     * @param fps - Frames per second",
          "     */"
        ],
        "after": [
          "      if (!this.audioBuffer) return;",
          "",
          "      const context = this.ensureAudioContext();"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:693:43",
      "file": "stores/audioStore.ts",
      "line": 693,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setActiveStem(stemName: string | null): void {",
      "context": {
        "before": [
          "     * Set the active stem for audio reactivity",
          "     * @param stemName - Name of the stem to use, or null for main audio",
          "     */"
        ],
        "after": [
          "      if (stemName !== null && !this.stemBuffers.has(stemName)) {",
          "        storeLogger.warn(`Stem ${stemName} not found, using main audio`);",
          "        this.activeStemName = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:710:44",
      "file": "stores/audioStore.ts",
      "line": 710,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeReactiveMapperForActiveStem(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Initialize reactive mapper for the currently active stem/main audio",
          "     */"
        ],
        "after": [
          "      const analysis = this.activeStemName",
          "        ? this.stemBuffers.get(this.activeStemName)?.analysis",
          "        : this.audioAnalysis;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:712:52",
      "file": "stores/audioStore.ts",
      "line": 712,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "? this.stemBuffers.get(this.activeStemName)?.analysis",
      "context": {
        "before": [
          "     */",
          "    initializeReactiveMapperForActiveStem(): void {",
          "      const analysis = this.activeStemName"
        ],
        "after": [
          "        : this.audioAnalysis;",
          "",
          "      if (!analysis) return;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:737:52",
      "file": "stores/audioStore.ts",
      "line": 737,
      "column": 52,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "? this.stemBuffers.get(this.activeStemName)?.analysis",
      "context": {
        "before": [
          "     */",
          "    getActiveFeatureAtFrame(feature: string, frame: number): number {",
          "      const analysis = this.activeStemName"
        ],
        "after": [
          "        : this.audioAnalysis;",
          "",
          "      if (!analysis) return 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:749:44",
      "file": "stores/audioStore.ts",
      "line": 749,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.stemBuffers.get(stemName)?.analysis ?? null;",
      "context": {
        "before": [
          "     * @param stemName - Name of the stem",
          "     */",
          "    getStemAnalysis(stemName: string): AudioAnalysis | null {"
        ],
        "after": [
          "    },",
          "",
          "    /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:757:44",
      "file": "stores/audioStore.ts",
      "line": 757,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.stemBuffers.get(stemName)?.buffer ?? null;",
      "context": {
        "before": [
          "     * @param stemName - Name of the stem",
          "     */",
          "    getStemBuffer(stemName: string): AudioBuffer | null {"
        ],
        "after": [
          "    },",
          "",
          "    /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:772:33",
      "file": "stores/audioStore.ts",
      "line": 772,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeStem(stemName: string): void {",
      "context": {
        "before": [
          "     * Remove a specific stem",
          "     * @param stemName - Name of the stem to remove",
          "     */"
        ],
        "after": [
          "      this.stemBuffers.delete(stemName);",
          "",
          "      // If the removed stem was active, switch back to main audio"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioStore.ts:785:17",
      "file": "stores/audioStore.ts",
      "line": 785,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearStems(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear all loaded stems",
          "     */"
        ],
        "after": [
          "      this.stemBuffers.clear();",
          "      this.activeStemName = null;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/audioSync.ts:54:2",
      "file": "stores/audioSync.ts",
      "line": 54,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    loadingPhase: string;",
          "    loadingError: string | null;",
          "  },"
        ],
        "after": [
          "  // If no source provided, get from audioStore (requires Pinia context)",
          "  const audioSource = source ?? useAudioStore();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cacheStore.ts:62:68",
      "file": "stores/cacheStore.ts",
      "line": 62,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrameCacheEnabled(store: CacheStoreAccess, enabled: boolean): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Enable or disable frame caching\r",
          "     */\r"
        ],
        "after": [
          "      store.frameCacheEnabled = enabled;\r",
          "      if (!enabled) {\r",
          "        this.clearFrameCache();\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cacheStore.ts:131:50",
      "file": "stores/cacheStore.ts",
      "line": 131,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidateFrameCache(store: CacheStoreAccess): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Invalidate frame cache (called when project changes)\r",
          "     */\r"
        ],
        "after": [
          "      // Update project state hash\r",
          "      store.projectStateHash = this.computeProjectHash(store);\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cacheStore.ts:143:22",
      "file": "stores/cacheStore.ts",
      "line": 143,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearFrameCache(): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Clear all cached frames\r",
          "     */\r"
        ],
        "after": [
          "      const cache = getFrameCache();\r",
          "      cache.clear();\r",
          "      storeLogger.info(\"Frame cache cleared\");\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cacheStore.ts:167:32",
      "file": "stores/cacheStore.ts",
      "line": 167,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layerCount: comp.layers?.length ?? 0,",
      "context": {
        "before": [
          "\r",
          "      // Create a simplified fingerprint of the composition state\r",
          "      const fingerprint = {\r"
        ],
        "after": [
          "        layerIds: comp.layers?.map((l) => l.id).join(\",\") ?? \"\",\r",
          "        modified: store.project.meta.modified,\r",
          "        settings: comp.settings,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/cacheStore.ts:168:30",
      "file": "stores/cacheStore.ts",
      "line": 168,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "layerIds: comp.layers?.map((l) => l.id).join(\",\") ?? \"\",",
      "context": {
        "before": [
          "      // Create a simplified fingerprint of the composition state\r",
          "      const fingerprint = {\r",
          "        layerCount: comp.layers?.length ?? 0,\r"
        ],
        "after": [
          "        modified: store.project.meta.modified,\r",
          "        settings: comp.settings,\r",
          "      };\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:35:15",
      "file": "stores/cameraStore.ts",
      "line": 35,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(a) || !Number.isFinite(b)) return false;",
      "context": {
        "before": [
          " * Safely compare frame numbers, handling NaN values\r",
          " */\r",
          "function framesEqual(a: number, b: number): boolean {\r"
        ],
        "after": [
          "  return a === b;\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:35:38",
      "file": "stores/cameraStore.ts",
      "line": 35,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(a) || !Number.isFinite(b)) return false;",
      "context": {
        "before": [
          " * Safely compare frame numbers, handling NaN values\r",
          " */\r",
          "function framesEqual(a: number, b: number): boolean {\r"
        ],
        "after": [
          "  return a === b;\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:43:17",
      "file": "stores/cameraStore.ts",
      "line": 43,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(frame) ? frame! : fallback;",
      "context": {
        "before": [
          " * Validate and sanitize frame number input\r",
          " */\r",
          "function safeFrame(frame: number | undefined | null, fallback = 0): number {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "// ============================================================================\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:103:13",
      "file": "stores/cameraStore.ts",
      "line": 103,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "comp?.settings.width || 1024,",
      "context": {
        "before": [
          "      // Create the camera object\r",
          "      const camera = createDefaultCamera(\r",
          "        cameraId,\r"
        ],
        "after": [
          "        comp?.settings.height || 1024,\r",
          "      );\r",
          "      camera.name = cameraName;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:104:13",
      "file": "stores/cameraStore.ts",
      "line": 104,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "comp?.settings.height || 1024,",
      "context": {
        "before": [
          "      const camera = createDefaultCamera(\r",
          "        cameraId,\r",
          "        comp?.settings.width || 1024,\r"
        ],
        "after": [
          "      );\r",
          "      camera.name = cameraName;\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:118:31",
      "file": "stores/cameraStore.ts",
      "line": 118,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const frameCount = (comp?.settings.frameCount || 81) - 1;",
      "context": {
        "before": [
          "\r",
          "      // Create the layer\r",
          "      const layerId = `layer_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;\r"
        ],
        "after": [
          "      const layer: Layer = {\r",
          "        id: layerId,\r",
          "        name: cameraName,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:174:6",
      "file": "stores/cameraStore.ts",
      "line": 174,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: CameraStoreAccess,\r",
          "      cameraId: string,\r",
          "      updates: Partial<Camera3D>,\r"
        ],
        "after": [
          "      const camera = store.cameras.get(cameraId);\r",
          "      if (!camera) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:185:64",
      "file": "stores/cameraStore.ts",
      "line": 185,
      "column": 64,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setActiveCamera(store: CameraStoreAccess, cameraId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Set the active camera\r",
          "     */\r"
        ],
        "after": [
          "      if (!store.cameras.has(cameraId)) return;\r",
          "\r",
          "      store.activeCameraId = cameraId;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:205:61",
      "file": "stores/cameraStore.ts",
      "line": 205,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteCamera(store: CameraStoreAccess, cameraId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Delete a camera and its layer\r",
          "     */\r"
        ],
        "after": [
          "      const layers = store.getActiveCompLayers();\r",
          "\r",
          "      // Find the associated layer\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:211:61",
      "file": "stores/cameraStore.ts",
      "line": 211,
      "column": 61,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "l.type === \"camera\" && (l.data as CameraLayerData)?.cameraId === cameraId,",
      "context": {
        "before": [
          "      // Find the associated layer\r",
          "      const layerIndex = layers.findIndex(\r",
          "        (l) =>\r"
        ],
        "after": [
          "      );\r",
          "\r",
          "      // Remove the layer if found\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:260:6",
      "file": "stores/cameraStore.ts",
      "line": 260,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: CameraStoreAccess,\r",
          "      cameraId: string,\r",
          "      keyframe: CameraKeyframe,\r"
        ],
        "after": [
          "      let keyframes = store.cameraKeyframes.get(cameraId);\r",
          "      if (!keyframes) {\r",
          "        keyframes = [];\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:289:6",
      "file": "stores/cameraStore.ts",
      "line": 289,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: CameraStoreAccess,\r",
          "      cameraId: string,\r",
          "      frame: number,\r"
        ],
        "after": [
          "      const keyframes = store.cameraKeyframes.get(cameraId);\r",
          "      if (!keyframes) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:355:83",
      "file": "stores/cameraStore.ts",
      "line": 355,
      "column": 83,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateViewportState(store: CameraStoreAccess, updates: Partial<ViewportState>): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Update the viewport state\r",
          "     */\r"
        ],
        "after": [
          "      Object.assign(store.viewportState, updates);\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/cameraStore.ts:362:79",
      "file": "stores/cameraStore.ts",
      "line": 362,
      "column": 79,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateViewOptions(store: CameraStoreAccess, updates: Partial<ViewOptions>): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Update view options\r",
          "     */\r"
        ],
        "after": [
          "      Object.assign(store.viewOptions, updates);\r",
          "    },\r",
          "  },\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:71:30",
      "file": "stores/compositionStore.ts",
      "line": 71,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rawFps = settings?.fps ?? activeComp?.settings.fps ?? DEFAULT_FPS;",
      "context": {
        "before": [
          "      const id = `comp_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;\r",
          "      const activeComp = store.project.compositions[store.activeCompositionId];\r",
          "\r"
        ],
        "after": [
          "      const validFps = validateFps(rawFps);\r",
          "\r",
          "      const defaultSettings: CompositionSettings = {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:71:49",
      "file": "stores/compositionStore.ts",
      "line": 71,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rawFps = settings?.fps ?? activeComp?.settings.fps ?? DEFAULT_FPS;",
      "context": {
        "before": [
          "      const id = `comp_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;\r",
          "      const activeComp = store.project.compositions[store.activeCompositionId];\r",
          "\r"
        ],
        "after": [
          "      const validFps = validateFps(rawFps);\r",
          "\r",
          "      const defaultSettings: CompositionSettings = {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:75:24",
      "file": "stores/compositionStore.ts",
      "line": 75,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "width: settings?.width ?? activeComp?.settings.width ?? 1024,",
      "context": {
        "before": [
          "      const validFps = validateFps(rawFps);\r",
          "\r",
          "      const defaultSettings: CompositionSettings = {\r"
        ],
        "after": [
          "        height: settings?.height ?? activeComp?.settings.height ?? 1024,\r",
          "        frameCount: settings?.frameCount ?? activeComp?.settings.frameCount ?? 81,\r",
          "        fps: validFps,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:75:45",
      "file": "stores/compositionStore.ts",
      "line": 75,
      "column": 45,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "width: settings?.width ?? activeComp?.settings.width ?? 1024,",
      "context": {
        "before": [
          "      const validFps = validateFps(rawFps);\r",
          "\r",
          "      const defaultSettings: CompositionSettings = {\r"
        ],
        "after": [
          "        height: settings?.height ?? activeComp?.settings.height ?? 1024,\r",
          "        frameCount: settings?.frameCount ?? activeComp?.settings.frameCount ?? 81,\r",
          "        fps: validFps,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:76:25",
      "file": "stores/compositionStore.ts",
      "line": 76,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "height: settings?.height ?? activeComp?.settings.height ?? 1024,",
      "context": {
        "before": [
          "\r",
          "      const defaultSettings: CompositionSettings = {\r",
          "        width: settings?.width ?? activeComp?.settings.width ?? 1024,\r"
        ],
        "after": [
          "        frameCount: settings?.frameCount ?? activeComp?.settings.frameCount ?? 81,\r",
          "        fps: validFps,\r",
          "        duration: 0,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:76:47",
      "file": "stores/compositionStore.ts",
      "line": 76,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "height: settings?.height ?? activeComp?.settings.height ?? 1024,",
      "context": {
        "before": [
          "\r",
          "      const defaultSettings: CompositionSettings = {\r",
          "        width: settings?.width ?? activeComp?.settings.width ?? 1024,\r"
        ],
        "after": [
          "        frameCount: settings?.frameCount ?? activeComp?.settings.frameCount ?? 81,\r",
          "        fps: validFps,\r",
          "        duration: 0,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:77:29",
      "file": "stores/compositionStore.ts",
      "line": 77,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameCount: settings?.frameCount ?? activeComp?.settings.frameCount ?? 81,",
      "context": {
        "before": [
          "      const defaultSettings: CompositionSettings = {\r",
          "        width: settings?.width ?? activeComp?.settings.width ?? 1024,\r",
          "        height: settings?.height ?? activeComp?.settings.height ?? 1024,\r"
        ],
        "after": [
          "        fps: validFps,\r",
          "        duration: 0,\r",
          "        backgroundColor: settings?.backgroundColor ?? \"#050505\",\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:77:55",
      "file": "stores/compositionStore.ts",
      "line": 77,
      "column": 55,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameCount: settings?.frameCount ?? activeComp?.settings.frameCount ?? 81,",
      "context": {
        "before": [
          "      const defaultSettings: CompositionSettings = {\r",
          "        width: settings?.width ?? activeComp?.settings.width ?? 1024,\r",
          "        height: settings?.height ?? activeComp?.settings.height ?? 1024,\r"
        ],
        "after": [
          "        fps: validFps,\r",
          "        duration: 0,\r",
          "        backgroundColor: settings?.backgroundColor ?? \"#050505\",\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:80:34",
      "file": "stores/compositionStore.ts",
      "line": 80,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "backgroundColor: settings?.backgroundColor ?? \"#050505\",",
      "context": {
        "before": [
          "        frameCount: settings?.frameCount ?? activeComp?.settings.frameCount ?? 81,\r",
          "        fps: validFps,\r",
          "        duration: 0,\r"
        ],
        "after": [
          "        autoResizeToContent: settings?.autoResizeToContent ?? true,\r",
          "        frameBlendingEnabled: settings?.frameBlendingEnabled ?? false,\r",
          "      };\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:81:38",
      "file": "stores/compositionStore.ts",
      "line": 81,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "autoResizeToContent: settings?.autoResizeToContent ?? true,",
      "context": {
        "before": [
          "        fps: validFps,\r",
          "        duration: 0,\r",
          "        backgroundColor: settings?.backgroundColor ?? \"#050505\",\r"
        ],
        "after": [
          "        frameBlendingEnabled: settings?.frameBlendingEnabled ?? false,\r",
          "      };\r",
          "      defaultSettings.duration = defaultSettings.frameCount / defaultSettings.fps;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:82:39",
      "file": "stores/compositionStore.ts",
      "line": 82,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "frameBlendingEnabled: settings?.frameBlendingEnabled ?? false,",
      "context": {
        "before": [
          "        duration: 0,\r",
          "        backgroundColor: settings?.backgroundColor ?? \"#050505\",\r",
          "        autoResizeToContent: settings?.autoResizeToContent ?? true,\r"
        ],
        "after": [
          "      };\r",
          "      defaultSettings.duration = defaultSettings.frameCount / defaultSettings.fps;\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:138:86",
      "file": "stores/compositionStore.ts",
      "line": 138,
      "column": 86,
      "pattern": ": void",
      "severity": "LOW",
      "code": "renameComposition(store: CompositionStoreAccess, compId: string, newName: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Rename a composition.\r",
          "     */\r"
        ],
        "after": [
          "      const comp = store.project.compositions[compId];\r",
          "      if (comp) comp.name = newName;\r",
          "    },\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:150:6",
      "file": "stores/compositionStore.ts",
      "line": 150,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: CompositionStoreAccess,\r",
          "      compId: string,\r",
          "      settings: Partial<CompositionSettings>,\r"
        ],
        "after": [
          "      const comp = store.project.compositions[compId];\r",
          "      if (!comp) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:181:71",
      "file": "stores/compositionStore.ts",
      "line": 181,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enableFrameBlending(store: CompositionStoreAccess, compId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Enable frame blending for a composition.\r",
          "     */\r"
        ],
        "after": [
          "      this.updateCompositionSettings(store, compId, { frameBlendingEnabled: true });\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:188:72",
      "file": "stores/compositionStore.ts",
      "line": 188,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableFrameBlending(store: CompositionStoreAccess, compId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Disable frame blending for a composition.\r",
          "     */\r"
        ],
        "after": [
          "      this.updateCompositionSettings(store, compId, { frameBlendingEnabled: false });\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:195:71",
      "file": "stores/compositionStore.ts",
      "line": 195,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleFrameBlending(store: CompositionStoreAccess, compId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Toggle frame blending for a composition.\r",
          "     */\r"
        ],
        "after": [
          "      const comp = store.project.compositions[compId];\r",
          "      if (!comp) return;\r",
          "      this.updateCompositionSettings(store, compId, {\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:217:69",
      "file": "stores/compositionStore.ts",
      "line": 217,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "switchComposition(store: CompositionStoreAccess, compId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Switch to a different composition (tab).\r",
          "     */\r"
        ],
        "after": [
          "      if (!store.project.compositions[compId]) {\r",
          "        storeLogger.warn(\"Composition not found:\", compId);\r",
          "        return;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:238:71",
      "file": "stores/compositionStore.ts",
      "line": 238,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "closeCompositionTab(store: CompositionStoreAccess, compId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Close a composition tab.\r",
          "     */\r"
        ],
        "after": [
          "      if (store.openCompositionIds.length <= 1) {\r",
          "        storeLogger.warn(\"Cannot close the last tab\");\r",
          "        return;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:257:67",
      "file": "stores/compositionStore.ts",
      "line": 257,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enterNestedComp(store: CompositionStoreAccess, compId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Enter a nested comp (double-click on nested comp layer).\r",
          "     */\r"
        ],
        "after": [
          "      if (!store.project.compositions[compId]) {\r",
          "        storeLogger.warn(\"Nested comp not found:\", compId);\r",
          "        return;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:272:48",
      "file": "stores/compositionStore.ts",
      "line": 272,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "navigateBack(store: CompositionStoreAccess): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Navigate back one level in the breadcrumb trail.\r",
          "     */\r"
        ],
        "after": [
          "      if (store.compositionBreadcrumbs.length <= 1) {\r",
          "        storeLogger.warn(\"Already at root composition\");\r",
          "        return;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:288:71",
      "file": "stores/compositionStore.ts",
      "line": 288,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "navigateToBreadcrumb(store: CompositionStoreAccess, index: number): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Navigate to a specific breadcrumb index.\r",
          "     */\r"
        ],
        "after": [
          "      if (!Number.isInteger(index) || index < 0 || index >= store.compositionBreadcrumbs.length) {\r",
          "        return;\r",
          "      }\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositionStore.ts:305:52",
      "file": "stores/compositionStore.ts",
      "line": 305,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetBreadcrumbs(store: CompositionStoreAccess): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Reset breadcrumbs to main composition.\r",
          "     */\r"
        ],
        "after": [
          "      store.compositionBreadcrumbs = [store.project.mainCompositionId];\r",
          "      this.switchComposition(store, store.project.mainCompositionId);\r",
          "    },\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:276:36",
      "file": "stores/compositorStore.ts",
      "line": 276,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.activeComposition?.settings.width || 1024;",
      "context": {
        "before": [
          "      return this.sourceImage !== null;",
          "    },",
          "    width(): number {"
        ],
        "after": [
          "    },",
          "    height(): number {",
          "      return this.activeComposition?.settings.height || 1024;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:279:36",
      "file": "stores/compositorStore.ts",
      "line": 279,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.activeComposition?.settings.height || 1024;",
      "context": {
        "before": [
          "      return this.activeComposition?.settings.width || 1024;",
          "    },",
          "    height(): number {"
        ],
        "after": [
          "    },",
          "    frameCount(): number {",
          "      return this.activeComposition?.settings.frameCount || 81;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:282:36",
      "file": "stores/compositorStore.ts",
      "line": 282,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.activeComposition?.settings.frameCount || 81;",
      "context": {
        "before": [
          "      return this.activeComposition?.settings.height || 1024;",
          "    },",
          "    frameCount(): number {"
        ],
        "after": [
          "    },",
          "    fps(): number {",
          "      return this.activeComposition?.settings.fps || 16;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:285:36",
      "file": "stores/compositorStore.ts",
      "line": 285,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.activeComposition?.settings.fps || 16;",
      "context": {
        "before": [
          "      return this.activeComposition?.settings.frameCount || 81;",
          "    },",
          "    fps(): number {"
        ],
        "after": [
          "    },",
          "    duration(): number {",
          "      return this.activeComposition?.settings.duration || 5;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:288:36",
      "file": "stores/compositorStore.ts",
      "line": 288,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.activeComposition?.settings.duration || 5;",
      "context": {
        "before": [
          "      return this.activeComposition?.settings.fps || 16;",
          "    },",
          "    duration(): number {"
        ],
        "after": [
          "    },",
          "    backgroundColor(): string {",
          "      return this.activeComposition?.settings.backgroundColor || \"#050505\";"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:291:36",
      "file": "stores/compositorStore.ts",
      "line": 291,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return this.activeComposition?.settings.backgroundColor || \"#050505\";",
      "context": {
        "before": [
          "      return this.activeComposition?.settings.duration || 5;",
          "    },",
          "    backgroundColor(): string {"
        ],
        "after": [
          "    },",
          "",
          "    // Timeline zoom (delegated to animationStore)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:312:18",
      "file": "stores/compositorStore.ts",
      "line": 312,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.currentFrame || 0;",
      "context": {
        "before": [
          "    // Current frame - per composition",
          "    currentFrame(state): number {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "    },",
          "    currentTime(): number {",
          "      const comp = this.activeComposition;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:323:18",
      "file": "stores/compositorStore.ts",
      "line": 323,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.layers || [];",
      "context": {
        "before": [
          "    // Layers - from active composition",
          "    layers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "    },",
          "    visibleLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:327:26",
      "file": "stores/compositorStore.ts",
      "line": 327,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = comp?.layers || [];",
      "context": {
        "before": [
          "    },",
          "    visibleLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "      return layers.filter((l: Layer) => l.visible);",
          "    },",
          "    // Layers displayed in timeline (respects minimized filter)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:333:26",
      "file": "stores/compositorStore.ts",
      "line": 333,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = comp?.layers || [];",
      "context": {
        "before": [
          "    // Layers displayed in timeline (respects minimized filter)",
          "    displayedLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "      const uiStore = useUIStore();",
          "      if (uiStore.hideMinimizedLayers) {",
          "        return layers.filter((l: Layer) => !l.minimized);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:360:19",
      "file": "stores/compositorStore.ts",
      "line": 360,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return (comp?.layers || []).filter((l: Layer) =>",
      "context": {
        "before": [
          "    selectedLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];",
          "      const selectionStore = useSelectionStore();"
        ],
        "after": [
          "        selectionStore.selectedLayerIds.includes(l.id),",
          "      );",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:369:14",
      "file": "stores/compositorStore.ts",
      "line": 369,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(comp?.layers || []).find(",
      "context": {
        "before": [
          "      if (selectionStore.selectedLayerIds.length !== 1) return null;",
          "      const comp = state.project.compositions[state.activeCompositionId];",
          "      return ("
        ],
        "after": [
          "          (l: Layer) => l.id === selectionStore.selectedLayerIds[0],",
          "        ) || null",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:389:32",
      "file": "stores/compositorStore.ts",
      "line": 389,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return { id, name: comp?.name || \"Unknown\" };",
      "context": {
        "before": [
          "    breadcrumbPath(): Array<{ id: string; name: string }> {",
          "      return this.compositionBreadcrumbs.map((id: string) => {",
          "        const comp = this.project.compositions[id];"
        ],
        "after": [
          "      });",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:409:26",
      "file": "stores/compositorStore.ts",
      "line": 409,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = comp?.layers || [];",
      "context": {
        "before": [
          "    allCameras: (state): Camera3D[] => Array.from(state.cameras.values()),",
          "    cameraLayers(state): Layer[] {",
          "      const comp = state.project.compositions[state.activeCompositionId];"
        ],
        "after": [
          "      return layers.filter((l: Layer) => l.type === \"camera\");",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:435:18",
      "file": "stores/compositorStore.ts",
      "line": 435,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.layers || [];",
      "context": {
        "before": [
          "     */",
          "    getActiveCompLayers(): Layer[] {",
          "      const comp = this.project.compositions[this.activeCompositionId];"
        ],
        "after": [
          "    },",
          "",
          "    /**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:460:38",
      "file": "stores/compositorStore.ts",
      "line": 460,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "switchComposition(compId: string): void {",
      "context": {
        "before": [
          "      return useCompositionStore().deleteComposition(this, compId);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().switchComposition(this, compId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:464:40",
      "file": "stores/compositorStore.ts",
      "line": 464,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "closeCompositionTab(compId: string): void {",
      "context": {
        "before": [
          "      useCompositionStore().switchComposition(this, compId);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().closeCompositionTab(this, compId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:468:36",
      "file": "stores/compositorStore.ts",
      "line": 468,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enterNestedComp(compId: string): void {",
      "context": {
        "before": [
          "      useCompositionStore().closeCompositionTab(this, compId);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().enterNestedComp(this, compId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:472:19",
      "file": "stores/compositorStore.ts",
      "line": 472,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "navigateBack(): void {",
      "context": {
        "before": [
          "      useCompositionStore().enterNestedComp(this, compId);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().navigateBack(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:476:40",
      "file": "stores/compositorStore.ts",
      "line": 476,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "navigateToBreadcrumb(index: number): void {",
      "context": {
        "before": [
          "      useCompositionStore().navigateBack(this);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().navigateToBreadcrumb(this, index);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:480:23",
      "file": "stores/compositorStore.ts",
      "line": 480,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetBreadcrumbs(): void {",
      "context": {
        "before": [
          "      useCompositionStore().navigateToBreadcrumb(this, index);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().resetBreadcrumbs(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:484:55",
      "file": "stores/compositorStore.ts",
      "line": 484,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "renameComposition(compId: string, newName: string): void {",
      "context": {
        "before": [
          "      useCompositionStore().resetBreadcrumbs(this);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().renameComposition(this, compId, newName);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:491:6",
      "file": "stores/compositorStore.ts",
      "line": 491,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updateCompositionSettings(",
          "      compId: string,",
          "      settings: Partial<CompositionSettings>,"
        ],
        "after": [
          "      useCompositionStore().updateCompositionSettings(this, compId, settings);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:499:40",
      "file": "stores/compositorStore.ts",
      "line": 499,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enableFrameBlending(compId: string): void {",
      "context": {
        "before": [
          "      return useCompositionStore().getComposition(this, compId);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().enableFrameBlending(this, compId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:503:41",
      "file": "stores/compositorStore.ts",
      "line": 503,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableFrameBlending(compId: string): void {",
      "context": {
        "before": [
          "      useCompositionStore().enableFrameBlending(this, compId);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().disableFrameBlending(this, compId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:507:40",
      "file": "stores/compositorStore.ts",
      "line": 507,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleFrameBlending(compId: string): void {",
      "context": {
        "before": [
          "      useCompositionStore().disableFrameBlending(this, compId);",
          "    },",
          ""
        ],
        "after": [
          "      useCompositionStore().toggleFrameBlending(this, compId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:529:7",
      "file": "stores/compositorStore.ts",
      "line": 529,
      "column": 7,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "      width: number;",
          "      height: number;",
          "      frame_count: number;"
        ],
        "after": [
          "      useProjectStore().loadInputs(this, inputs);",
          "",
          "      // Save initial state to history"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:563:33",
      "file": "stores/compositorStore.ts",
      "line": 563,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteLayer(layerId: string): void {",
      "context": {
        "before": [
          "     * Delete a layer",
          "",
          "     */"
        ],
        "after": [
          "      useLayerStore().deleteLayer(this, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:578:25",
      "file": "stores/compositorStore.ts",
      "line": 578,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "copySelectedLayers(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Copy selected layers to clipboard",
          "     */"
        ],
        "after": [
          "      useLayerStore().copySelectedLayers(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:592:24",
      "file": "stores/compositorStore.ts",
      "line": 592,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cutSelectedLayers(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Cut selected layers (copy + delete)",
          "     */"
        ],
        "after": [
          "      useLayerStore().cutSelectedLayers(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:599:22",
      "file": "stores/compositorStore.ts",
      "line": 599,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectAllLayers(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select all layers in the active composition",
          "     */"
        ],
        "after": [
          "      useLayerStore().selectAllLayers(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:606:27",
      "file": "stores/compositorStore.ts",
      "line": 606,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteSelectedLayers(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Delete all selected layers",
          "     */"
        ],
        "after": [
          "      useLayerStore().deleteSelectedLayers(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:621:58",
      "file": "stores/compositorStore.ts",
      "line": 621,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateLayer(layerId: string, updates: Partial<Layer>): void {",
      "context": {
        "before": [
          "     * Update layer properties",
          "",
          "     */"
        ],
        "after": [
          "      useLayerStore().updateLayer(this, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:633:6",
      "file": "stores/compositorStore.ts",
      "line": 633,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updateLayerData(",
          "      layerId: string,",
          "      dataUpdates: Partial<AnyLayerData> & Record<string, unknown>,"
        ],
        "after": [
          "      useLayerStore().updateLayerData(this, layerId, dataUpdates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:644:6",
      "file": "stores/compositorStore.ts",
      "line": 644,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    addSplineControlPoint(",
          "      layerId: string,",
          "      point: SplineControlPoint,"
        ],
        "after": [
          "      useLayerStore().addSplineControlPoint(this, layerId, point);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:656:6",
      "file": "stores/compositorStore.ts",
      "line": 656,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      point: SplineControlPoint,",
          "      index: number,"
        ],
        "after": [
          "      useLayerStore().insertSplineControlPoint(this, layerId, point, index);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:668:6",
      "file": "stores/compositorStore.ts",
      "line": 668,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      pointId: string,",
          "      updates: Partial<SplineControlPoint>,"
        ],
        "after": [
          "      useLayerStore().updateSplineControlPoint(this, layerId, pointId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:676:63",
      "file": "stores/compositorStore.ts",
      "line": 676,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteSplineControlPoint(layerId: string, pointId: string): void {",
      "context": {
        "before": [
          "     * Delete a spline control point",
          "",
          "     */"
        ],
        "after": [
          "      useLayerStore().deleteSplineControlPoint(this, layerId, pointId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:684:43",
      "file": "stores/compositorStore.ts",
      "line": 684,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enableSplineAnimation(layerId: string): void {",
      "context": {
        "before": [
          "     * Enable animation mode on a spline layer (converts to keyframeable control points)",
          "",
          "     */"
        ],
        "after": [
          "      useLayerStore().enableSplineAnimation(this, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:704:6",
      "file": "stores/compositorStore.ts",
      "line": 704,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        | \"handleOut.x\"",
          "        | \"handleOut.y\",",
          "      frame: number,"
        ],
        "after": [
          "      useLayerStore().addSplinePointKeyframe(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:722:6",
      "file": "stores/compositorStore.ts",
      "line": 722,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      pointId: string,",
          "      frame: number,"
        ],
        "after": [
          "      useLayerStore().addSplinePointPositionKeyframe(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:742:6",
      "file": "stores/compositorStore.ts",
      "line": 742,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      y: number,",
          "      frame: number,",
          "      addKeyframe: boolean = false,"
        ],
        "after": [
          "      useLayerStore().updateSplinePointWithKeyframe(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:786:55",
      "file": "stores/compositorStore.ts",
      "line": 786,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "simplifySpline(layerId: string, tolerance: number): void {",
      "context": {
        "before": [
          "     * @param tolerance - Distance threshold in pixels (higher = more simplification)",
          "",
          "     */"
        ],
        "after": [
          "      useLayerStore().simplifySpline(this, layerId, tolerance);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:795:57",
      "file": "stores/compositorStore.ts",
      "line": 795,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "smoothSplineHandles(layerId: string, amount: number): void {",
      "context": {
        "before": [
          "     * @param amount - Smoothing amount 0-100 (100 = fully smooth)",
          "",
          "     */"
        ],
        "after": [
          "      useLayerStore().smoothSplineHandles(this, layerId, amount);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:832:35",
      "file": "stores/compositorStore.ts",
      "line": 832,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayer3D(layerId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle 3D mode for a layer",
          "     */"
        ],
        "after": [
          "      useLayerStore().toggleLayer3D(this, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:839:49",
      "file": "stores/compositorStore.ts",
      "line": 839,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "moveLayer(layerId: string, newIndex: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Reorder layers",
          "     */"
        ],
        "after": [
          "      useLayerStore().moveLayer(this, layerId, newIndex);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:850:6",
      "file": "stores/compositorStore.ts",
      "line": 850,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    replaceLayerSource(",
          "      layerId: string,",
          "      newSource: LayerSourceReplacement,"
        ],
        "after": [
          "      useLayerStore().replaceLayerSource(this, layerId, newSource);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:857:22",
      "file": "stores/compositorStore.ts",
      "line": 857,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayerLock(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle locked state for selected layers",
          "     */"
        ],
        "after": [
          "      useLayerStore().toggleLayerLock(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:864:28",
      "file": "stores/compositorStore.ts",
      "line": 864,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayerVisibility(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle visibility for selected layers",
          "     */"
        ],
        "after": [
          "      useLayerStore().toggleLayerVisibility(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:871:22",
      "file": "stores/compositorStore.ts",
      "line": 871,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayerSolo(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle solo state for selected layers",
          "     */"
        ],
        "after": [
          "      useLayerStore().toggleLayerSolo(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:878:19",
      "file": "stores/compositorStore.ts",
      "line": 878,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "bringToFront(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Move selected layers to the front (top of stack)",
          "     */"
        ],
        "after": [
          "      useLayerStore().bringToFront(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:885:17",
      "file": "stores/compositorStore.ts",
      "line": 885,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "sendToBack(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Move selected layers to the back (bottom of stack)",
          "     */"
        ],
        "after": [
          "      useLayerStore().sendToBack(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:892:19",
      "file": "stores/compositorStore.ts",
      "line": 892,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "bringForward(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Move selected layers forward by one position",
          "     */"
        ],
        "after": [
          "      useLayerStore().bringForward(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:899:19",
      "file": "stores/compositorStore.ts",
      "line": 899,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "sendBackward(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Move selected layers backward by one position",
          "     */"
        ],
        "after": [
          "      useLayerStore().sendBackward(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:906:57",
      "file": "stores/compositorStore.ts",
      "line": 906,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayer(layerId: string, addToSelection = false): void {",
      "context": {
        "before": [
          "    /**",
          "     * Selection",
          "     */"
        ],
        "after": [
          "      useLayerStore().selectLayer(this, layerId, addToSelection);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:910:35",
      "file": "stores/compositorStore.ts",
      "line": 910,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deselectLayer(layerId: string): void {",
      "context": {
        "before": [
          "      useLayerStore().selectLayer(this, layerId, addToSelection);",
          "    },",
          ""
        ],
        "after": [
          "      useLayerStore().deselectLayer(this, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:917:61",
      "file": "stores/compositorStore.ts",
      "line": 917,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerParent(layerId: string, parentId: string | null): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set a layer's parent for parenting/hierarchy",
          "     */"
        ],
        "after": [
          "      useLayerStore().setLayerParent(this, layerId, parentId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:933:6",
      "file": "stores/compositorStore.ts",
      "line": 933,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    timeStretchLayer(",
          "      layerId: string,",
          "      options: TimeStretchOptions,"
        ],
        "after": [
          "      useLayerStore().timeStretchLayer(this, layerId, options);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:941:34",
      "file": "stores/compositorStore.ts",
      "line": 941,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reverseLayer(layerId: string): void {",
      "context": {
        "before": [
          "     * Reverse layer playback by negating speed",
          "     * @param layerId - Target layer ID",
          "     */"
        ],
        "after": [
          "      useLayerStore().reverseLayer(this, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:950:43",
      "file": "stores/compositorStore.ts",
      "line": 950,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "freezeFrameAtPlayhead(layerId: string): void {",
      "context": {
        "before": [
          "     * Uses speedMap with hold keyframes",
          "     * @param layerId - Target layer ID",
          "     */"
        ],
        "after": [
          "      const comp = this.getActiveComp();",
          "      const storeWithFrame = {",
          "        ...this,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:954:27",
      "file": "stores/compositorStore.ts",
      "line": 954,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "currentFrame: comp?.currentFrame ?? 0,",
      "context": {
        "before": [
          "      const comp = this.getActiveComp();",
          "      const storeWithFrame = {",
          "        ...this,"
        ],
        "after": [
          "        fps: comp?.settings.fps ?? 30,",
          "        // Explicitly bind pushHistory to preserve 'this' context",
          "        pushHistory: this.pushHistory.bind(this),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:955:18",
      "file": "stores/compositorStore.ts",
      "line": 955,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fps: comp?.settings.fps ?? 30,",
      "context": {
        "before": [
          "      const storeWithFrame = {",
          "        ...this,",
          "        currentFrame: comp?.currentFrame ?? 0,"
        ],
        "after": [
          "        // Explicitly bind pushHistory to preserve 'this' context",
          "        pushHistory: this.pushHistory.bind(this),",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:972:27",
      "file": "stores/compositorStore.ts",
      "line": 972,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "currentFrame: comp?.currentFrame ?? 0,",
      "context": {
        "before": [
          "      const comp = this.getActiveComp();",
          "      const storeWithFrame = {",
          "        ...this,"
        ],
        "after": [
          "        fps: comp?.settings.fps ?? 30,",
          "        // Explicitly bind pushHistory to preserve 'this' context",
          "        pushHistory: this.pushHistory.bind(this),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:973:18",
      "file": "stores/compositorStore.ts",
      "line": 973,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "fps: comp?.settings.fps ?? 30,",
      "context": {
        "before": [
          "      const storeWithFrame = {",
          "        ...this,",
          "        currentFrame: comp?.currentFrame ?? 0,"
        ],
        "after": [
          "        // Explicitly bind pushHistory to preserve 'this' context",
          "        pushHistory: this.pushHistory.bind(this),",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:980:21",
      "file": "stores/compositorStore.ts",
      "line": 980,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearSelection(): void {",
      "context": {
        "before": [
          "      return useLayerStore().splitLayerAtPlayhead(storeWithFrame, layerId);",
          "    },",
          ""
        ],
        "after": [
          "      useLayerStore().clearSelection(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:987:48",
      "file": "stores/compositorStore.ts",
      "line": 987,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectProperty(propertyPath: string | null): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select a property path for graph editor focus",
          "     */"
        ],
        "after": [
          "      useSelectionStore().setSelectedPropertyPath(propertyPath);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1012:11",
      "file": "stores/compositorStore.ts",
      "line": 1012,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "play(): void {",
      "context": {
        "before": [
          "    // PLAYBACK CONTROLS (delegated to animationStore)",
          "    // ============================================================",
          ""
        ],
        "after": [
          "      useAnimationStore().play(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1016:12",
      "file": "stores/compositorStore.ts",
      "line": 1016,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pause(): void {",
      "context": {
        "before": [
          "      useAnimationStore().play(this);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().pause(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1020:21",
      "file": "stores/compositorStore.ts",
      "line": 1020,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "togglePlayback(): void {",
      "context": {
        "before": [
          "      useAnimationStore().pause(this);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().togglePlayback(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1024:28",
      "file": "stores/compositorStore.ts",
      "line": 1024,
      "column": 28,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrame(frame: number): void {",
      "context": {
        "before": [
          "      useAnimationStore().togglePlayback(this);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().setFrame(this, frame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1028:16",
      "file": "stores/compositorStore.ts",
      "line": 1028,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "nextFrame(): void {",
      "context": {
        "before": [
          "      useAnimationStore().setFrame(this, frame);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().nextFrame(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1032:16",
      "file": "stores/compositorStore.ts",
      "line": 1032,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "prevFrame(): void {",
      "context": {
        "before": [
          "      useAnimationStore().nextFrame(this);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().prevFrame(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1036:16",
      "file": "stores/compositorStore.ts",
      "line": 1036,
      "column": 16,
      "pattern": ": void",
      "severity": "LOW",
      "code": "goToStart(): void {",
      "context": {
        "before": [
          "      useAnimationStore().prevFrame(this);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().goToStart(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1040:14",
      "file": "stores/compositorStore.ts",
      "line": 1040,
      "column": 14,
      "pattern": ": void",
      "severity": "LOW",
      "code": "goToEnd(): void {",
      "context": {
        "before": [
          "      useAnimationStore().goToStart(this);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().goToEnd(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1044:26",
      "file": "stores/compositorStore.ts",
      "line": 1044,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpFrames(n: number): void {",
      "context": {
        "before": [
          "      useAnimationStore().goToEnd(this);",
          "    },",
          ""
        ],
        "after": [
          "      useAnimationStore().jumpFrames(this, n);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1053:6",
      "file": "stores/compositorStore.ts",
      "line": 1053,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "     */",
          "    setTool(",
          "      tool: \"select\" | \"pen\" | \"text\" | \"hand\" | \"zoom\" | \"segment\","
        ],
        "after": [
          "      if (tool === \"segment\") {",
          "        // Segment tool is compositor-specific",
          "        this.segmentToolActive = true;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1068:42",
      "file": "stores/compositorStore.ts",
      "line": 1068,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSegmentMode(mode: \"point\" | \"box\"): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set segmentation mode (point or box)",
          "     */"
        ],
        "after": [
          "      this.segmentMode = mode;",
          "      this.clearSegmentPendingMask();",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1076:30",
      "file": "stores/compositorStore.ts",
      "line": 1076,
      "column": 30,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearSegmentPendingMask(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear pending segmentation mask",
          "     */"
        ],
        "after": [
          "      this.segmentPendingMask = null;",
          "      this.segmentBoxStart = null;",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1084:71",
      "file": "stores/compositorStore.ts",
      "line": 1084,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSegmentPendingMask(mask: CompositorState[\"segmentPendingMask\"]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set pending segmentation mask (preview before creating layer)",
          "     */"
        ],
        "after": [
          "      this.segmentPendingMask = mask;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1091:63",
      "file": "stores/compositorStore.ts",
      "line": 1091,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSegmentBoxStart(point: { x: number; y: number } | null): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set box selection start point",
          "     */"
        ],
        "after": [
          "      this.segmentBoxStart = point;",
          "    },",
          ""
        ]
      },
      "typeInfo": "Object type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1098:40",
      "file": "stores/compositorStore.ts",
      "line": 1098,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSegmentLoading(loading: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set segmentation loading state",
          "     */"
        ],
        "after": [
          "      this.segmentIsLoading = loading;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1127:102",
      "file": "stores/compositorStore.ts",
      "line": 1127,
      "column": 102,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShapeToolOptions(options: Parameters<ReturnType<typeof useUIStore>[\"setShapeToolOptions\"]>[0]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set shape tool options (from toolbar)",
          "     */"
        ],
        "after": [
          "      useUIStore().setShapeToolOptions(options);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1134:18",
      "file": "stores/compositorStore.ts",
      "line": 1134,
      "column": 18,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pushHistory(): void {",
      "context": {
        "before": [
          "    /**",
          "     * History management (delegated to projectStore)",
          "     */"
        ],
        "after": [
          "      useProjectStore().pushHistory(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1138:11",
      "file": "stores/compositorStore.ts",
      "line": 1138,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "undo(): void {",
      "context": {
        "before": [
          "      useProjectStore().pushHistory(this);",
          "    },",
          ""
        ],
        "after": [
          "      useProjectStore().undo(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1142:11",
      "file": "stores/compositorStore.ts",
      "line": 1142,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "redo(): void {",
      "context": {
        "before": [
          "      useProjectStore().undo(this);",
          "    },",
          ""
        ],
        "after": [
          "      useProjectStore().redo(this);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1231:24",
      "file": "stores/compositorStore.ts",
      "line": 1231,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleCurveEditor(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle curve editor visibility",
          "     */"
        ],
        "after": [
          "      useUIStore().toggleCurveEditorVisible();",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1238:44",
      "file": "stores/compositorStore.ts",
      "line": 1238,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCurveEditorVisible(visible: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set curve editor visibility directly",
          "     */"
        ],
        "after": [
          "      useUIStore().setCurveEditorVisible(visible);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1245:32",
      "file": "stores/compositorStore.ts",
      "line": 1245,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleHideMinimizedLayers(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle hide minimized layers in timeline",
          "     */"
        ],
        "after": [
          "      useUIStore().toggleHideMinimizedLayers();",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1250:26",
      "file": "stores/compositorStore.ts",
      "line": 1250,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleHideShyLayers(): void {",
      "context": {
        "before": [
          "    },",
          "",
          "    /** @deprecated Use toggleHideMinimizedLayers instead */"
        ],
        "after": [
          "      useUIStore().toggleHideMinimizedLayers();",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1257:42",
      "file": "stores/compositorStore.ts",
      "line": 1257,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setHideMinimizedLayers(hide: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set hide minimized layers state",
          "     */"
        ],
        "after": [
          "      useUIStore().setHideMinimizedLayers(hide);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1262:36",
      "file": "stores/compositorStore.ts",
      "line": 1262,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setHideShyLayers(hide: boolean): void {",
      "context": {
        "before": [
          "    },",
          "",
          "    /** @deprecated Use setHideMinimizedLayers instead */"
        ],
        "after": [
          "      useUIStore().setHideMinimizedLayers(hide);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1299:6",
      "file": "stores/compositorStore.ts",
      "line": 1299,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      propertyName: string,",
          "      keyframeId: string,"
        ],
        "after": [
          "      useKeyframeStore().removeKeyframe(this, layerId, propertyName, keyframeId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1310:6",
      "file": "stores/compositorStore.ts",
      "line": 1310,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      propertyPath: string,",
          "      value: PropertyValue,"
        ],
        "after": [
          "      useKeyframeStore().setPropertyValue(this, layerId, propertyPath, value);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1337:6",
      "file": "stores/compositorStore.ts",
      "line": 1337,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      propertyPath: string,",
          "      animated: boolean,"
        ],
        "after": [
          "      useKeyframeStore().setPropertyAnimated(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1350:14",
      "file": "stores/compositorStore.ts",
      "line": 1350,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": ")?.value,",
      "context": {
        "before": [
          "            findPropertyByPath(",
          "              this.getActiveCompLayers().find((l) => l.id === layerId)!,",
          "              propertyPath,"
        ],
        "after": [
          "          );",
          "        },",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1364:6",
      "file": "stores/compositorStore.ts",
      "line": 1364,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      newFrame: number,"
        ],
        "after": [
          "      useKeyframeStore().moveKeyframe(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1385:6",
      "file": "stores/compositorStore.ts",
      "line": 1385,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        keyframeId: string;",
          "      }>,",
          "      frameDelta: number,"
        ],
        "after": [
          "      useKeyframeStore().moveKeyframes(this, keyframes, frameDelta);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1397:6",
      "file": "stores/compositorStore.ts",
      "line": 1397,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      newValue: number,"
        ],
        "after": [
          "      useKeyframeStore().setKeyframeValue(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1415:6",
      "file": "stores/compositorStore.ts",
      "line": 1415,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      interpolation: InterpolationType,"
        ],
        "after": [
          "      useKeyframeStore().setKeyframeInterpolation(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1461:6",
      "file": "stores/compositorStore.ts",
      "line": 1461,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      updates: { frame?: number; value?: PropertyValue },"
        ],
        "after": [
          "      useKeyframeStore().updateKeyframe(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1480:6",
      "file": "stores/compositorStore.ts",
      "line": 1480,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      keyframeId: string,",
          "      handleType: \"in\" | \"out\",",
          "      handle: BezierHandle,"
        ],
        "after": [
          "      useKeyframeStore().setKeyframeHandle(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1502:6",
      "file": "stores/compositorStore.ts",
      "line": 1502,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        inHandle?: { x: number; y: number };",
          "        outHandle?: { x: number; y: number };",
          "      },"
        ],
        "after": [
          "      if (handles.inHandle) {",
          "        useKeyframeStore().setKeyframeHandle(",
          "          this,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1541:6",
      "file": "stores/compositorStore.ts",
      "line": 1541,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      controlMode: \"smooth\" | \"corner\" | \"symmetric\","
        ],
        "after": [
          "      useKeyframeStore().setKeyframeControlMode(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1571:6",
      "file": "stores/compositorStore.ts",
      "line": 1571,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      handleType: \"in\" | \"out\",",
          "      handle: BezierHandle,",
          "      breakHandle: boolean = false,"
        ],
        "after": [
          "      useKeyframeStore().setKeyframeHandleWithMode(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1717:50",
      "file": "stores/compositorStore.ts",
      "line": 1717,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "renameLayer(layerId: string, newName: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Rename a layer by ID",
          "     */"
        ],
        "after": [
          "      return useLayerStore().renameLayer(this, layerId, newName);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1732:6",
      "file": "stores/compositorStore.ts",
      "line": 1732,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updateParticleLayerData(",
          "      layerId: string,",
          "      updates: Partial<ParticleLayerData>,"
        ],
        "after": [
          "      useParticleStore().updateParticleLayerData(this, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1736:71",
      "file": "stores/compositorStore.ts",
      "line": 1736,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addParticleEmitter(layerId: string, config: ParticleEmitterConfig): void {",
      "context": {
        "before": [
          "      useParticleStore().updateParticleLayerData(this, layerId, updates);",
          "    },",
          ""
        ],
        "after": [
          "      useParticleStore().addParticleEmitter(this, layerId, config);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1744:6",
      "file": "stores/compositorStore.ts",
      "line": 1744,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      emitterId: string,",
          "      updates: Partial<ParticleEmitterConfig>,"
        ],
        "after": [
          "      useParticleStore().updateParticleEmitter(this, layerId, emitterId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1748:62",
      "file": "stores/compositorStore.ts",
      "line": 1748,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeParticleEmitter(layerId: string, emitterId: string): void {",
      "context": {
        "before": [
          "      useParticleStore().updateParticleEmitter(this, layerId, emitterId, updates);",
          "    },",
          ""
        ],
        "after": [
          "      useParticleStore().removeParticleEmitter(this, layerId, emitterId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1766:6",
      "file": "stores/compositorStore.ts",
      "line": 1766,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updateDepthflowConfig(",
          "      layerId: string,",
          "      updates: Partial<DepthflowLayerData[\"config\"]>,"
        ],
        "after": [
          "      useDepthflowStore().updateDepthflowConfig(this, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1781:71",
      "file": "stores/compositorStore.ts",
      "line": 1781,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateVideoLayerData(layerId: string, updates: Partial<VideoData>): void {",
      "context": {
        "before": [
          "      return useVideoStore().createVideoLayer(this, file, autoResizeComposition);",
          "    },",
          ""
        ],
        "after": [
          "      useVideoStore().updateVideoLayerData(this, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1785:68",
      "file": "stores/compositorStore.ts",
      "line": 1785,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "onVideoMetadataLoaded(layerId: string, metadata: VideoMetadata): void {",
      "context": {
        "before": [
          "      useVideoStore().updateVideoLayerData(this, layerId, updates);",
          "    },",
          ""
        ],
        "after": [
          "      useVideoStore().onVideoMetadataLoaded(this, layerId, metadata);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1793:6",
      "file": "stores/compositorStore.ts",
      "line": 1793,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      width: number,",
          "      height: number,",
          "      frameCount?: number,"
        ],
        "after": [
          "      useVideoStore().resizeComposition(this, width, height, frameCount);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1813:6",
      "file": "stores/compositorStore.ts",
      "line": 1813,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updateNestedCompLayerData(",
          "      layerId: string,",
          "      updates: Partial<NestedCompData>,"
        ],
        "after": [
          "      useLayerStore().updateNestedCompLayerData(this, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1872:57",
      "file": "stores/compositorStore.ts",
      "line": 1872,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addEffectToLayer(layerId: string, effectKey: string): void {",
      "context": {
        "before": [
          "    // EFFECT ACTIONS (delegated to effectStore)",
          "    // ============================================================",
          ""
        ],
        "after": [
          "      useEffectStore().addEffectToLayer(this, layerId, effectKey);",
          "    },",
          "    removeEffectFromLayer(layerId: string, effectId: string): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1875:61",
      "file": "stores/compositorStore.ts",
      "line": 1875,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeEffectFromLayer(layerId: string, effectId: string): void {",
      "context": {
        "before": [
          "    addEffectToLayer(layerId: string, effectKey: string): void {",
          "      useEffectStore().addEffectToLayer(this, layerId, effectKey);",
          "    },"
        ],
        "after": [
          "      useEffectStore().removeEffectFromLayer(this, layerId, effectId);",
          "    },",
          "    updateEffectParameter("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1883:6",
      "file": "stores/compositorStore.ts",
      "line": 1883,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      effectId: string,",
          "      paramKey: string,",
          "      value: PropertyValue,"
        ],
        "after": [
          "      useEffectStore().updateEffectParameter(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1897:6",
      "file": "stores/compositorStore.ts",
      "line": 1897,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      effectId: string,",
          "      paramKey: string,",
          "      animated: boolean,"
        ],
        "after": [
          "      useEffectStore().setEffectParamAnimated(",
          "        this,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1906:52",
      "file": "stores/compositorStore.ts",
      "line": 1906,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleEffect(layerId: string, effectId: string): void {",
      "context": {
        "before": [
          "        animated,",
          "      );",
          "    },"
        ],
        "after": [
          "      useEffectStore().toggleEffect(this, layerId, effectId);",
          "    },",
          "    reorderEffects(layerId: string, fromIndex: number, toIndex: number): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:1909:72",
      "file": "stores/compositorStore.ts",
      "line": 1909,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reorderEffects(layerId: string, fromIndex: number, toIndex: number): void {",
      "context": {
        "before": [
          "    toggleEffect(layerId: string, effectId: string): void {",
          "      useEffectStore().toggleEffect(this, layerId, effectId);",
          "    },"
        ],
        "after": [
          "      useEffectStore().reorderEffects(this, layerId, fromIndex, toIndex);",
          "    },",
          "    getEffectParameterValue("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2064:63",
      "file": "stores/compositorStore.ts",
      "line": 2064,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateCamera(cameraId: string, updates: Partial<Camera3D>): void {",
      "context": {
        "before": [
          "    getCamera(cameraId: string): Camera3D | null {",
          "      return useCameraStore().getCamera(this, cameraId);",
          "    },"
        ],
        "after": [
          "      useCameraStore().updateCamera(this, cameraId, updates);",
          "    },",
          "    setActiveCamera(cameraId: string): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2067:38",
      "file": "stores/compositorStore.ts",
      "line": 2067,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setActiveCamera(cameraId: string): void {",
      "context": {
        "before": [
          "    updateCamera(cameraId: string, updates: Partial<Camera3D>): void {",
          "      useCameraStore().updateCamera(this, cameraId, updates);",
          "    },"
        ],
        "after": [
          "      useCameraStore().setActiveCamera(this, cameraId);",
          "    },",
          "    deleteCamera(cameraId: string): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2070:35",
      "file": "stores/compositorStore.ts",
      "line": 2070,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteCamera(cameraId: string): void {",
      "context": {
        "before": [
          "    setActiveCamera(cameraId: string): void {",
          "      useCameraStore().setActiveCamera(this, cameraId);",
          "    },"
        ],
        "after": [
          "      useCameraStore().deleteCamera(this, cameraId);",
          "    },",
          "    getCameraKeyframes(cameraId: string): CameraKeyframe[] {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2076:66",
      "file": "stores/compositorStore.ts",
      "line": 2076,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addCameraKeyframe(cameraId: string, keyframe: CameraKeyframe): void {",
      "context": {
        "before": [
          "    getCameraKeyframes(cameraId: string): CameraKeyframe[] {",
          "      return useCameraStore().getCameraKeyframes(this, cameraId);",
          "    },"
        ],
        "after": [
          "      useCameraStore().addCameraKeyframe(this, cameraId, keyframe);",
          "    },",
          "    removeCameraKeyframe(cameraId: string, frame: number): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2079:58",
      "file": "stores/compositorStore.ts",
      "line": 2079,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeCameraKeyframe(cameraId: string, frame: number): void {",
      "context": {
        "before": [
          "    addCameraKeyframe(cameraId: string, keyframe: CameraKeyframe): void {",
          "      useCameraStore().addCameraKeyframe(this, cameraId, keyframe);",
          "    },"
        ],
        "after": [
          "      useCameraStore().removeCameraKeyframe(this, cameraId, frame);",
          "    },",
          "    getCameraAtFrame(cameraId: string, frame: number): Camera3D | null {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2088:57",
      "file": "stores/compositorStore.ts",
      "line": 2088,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateViewportState(updates: Partial<ViewportState>): void {",
      "context": {
        "before": [
          "    getActiveCameraAtFrame(frame?: number): Camera3D | null {",
          "      return useCameraStore().getActiveCameraAtFrame(this, frame ?? this.currentFrame);",
          "    },"
        ],
        "after": [
          "      useCameraStore().updateViewportState(this, updates);",
          "    },",
          "    updateViewOptions(updates: Partial<ViewOptions>): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2091:53",
      "file": "stores/compositorStore.ts",
      "line": 2091,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateViewOptions(updates: Partial<ViewOptions>): void {",
      "context": {
        "before": [
          "    updateViewportState(updates: Partial<ViewportState>): void {",
          "      useCameraStore().updateViewportState(this, updates);",
          "    },"
        ],
        "after": [
          "      useCameraStore().updateViewOptions(this, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2102:22",
      "file": "stores/compositorStore.ts",
      "line": 2102,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cancelAudioLoad(): void {",
      "context": {
        "before": [
          "    async loadAudio(file: File): Promise<void> {",
          "      await useAudioStore().loadAudio(file, this.project.composition.fps);",
          "    },"
        ],
        "after": [
          "      useAudioStore().cancelLoad();",
          "    },",
          "    clearAudio(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2105:17",
      "file": "stores/compositorStore.ts",
      "line": 2105,
      "column": 17,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAudio(): void {",
      "context": {
        "before": [
          "    cancelAudioLoad(): void {",
          "      useAudioStore().cancelLoad();",
          "    },"
        ],
        "after": [
          "      useAudioStore().clear();",
          "      this.pathAnimators.clear();",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2109:35",
      "file": "stores/compositorStore.ts",
      "line": 2109,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioVolume(volume: number): void {",
      "context": {
        "before": [
          "      useAudioStore().clear();",
          "      this.pathAnimators.clear();",
          "    },"
        ],
        "after": [
          "      useAudioStore().setVolume(volume);",
          "    },",
          "    setAudioMuted(muted: boolean): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2112:34",
      "file": "stores/compositorStore.ts",
      "line": 2112,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setAudioMuted(muted: boolean): void {",
      "context": {
        "before": [
          "    setAudioVolume(volume: number): void {",
          "      useAudioStore().setVolume(volume);",
          "    },"
        ],
        "after": [
          "      useAudioStore().setMuted(muted);",
          "    },",
          "    toggleAudioMute(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2115:22",
      "file": "stores/compositorStore.ts",
      "line": 2115,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleAudioMute(): void {",
      "context": {
        "before": [
          "    setAudioMuted(muted: boolean): void {",
          "      useAudioStore().setMuted(muted);",
          "    },"
        ],
        "after": [
          "      useAudioStore().toggleMuted();",
          "    },",
          "    getAudioFeatureAtFrame(feature: string, frame?: number): number {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2124:6",
      "file": "stores/compositorStore.ts",
      "line": 2124,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    applyAudioToParticles(",
          "      layerId: string,",
          "      mapping: AudioParticleMapping,"
        ],
        "after": [
          "      useAudioStore().addLegacyMapping(layerId, mapping);",
          "    },",
          "    removeLegacyAudioMapping(layerId: string, index: number): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2127:61",
      "file": "stores/compositorStore.ts",
      "line": 2127,
      "column": 61,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeLegacyAudioMapping(layerId: string, index: number): void {",
      "context": {
        "before": [
          "    ): void {",
          "      useAudioStore().addLegacyMapping(layerId, mapping);",
          "    },"
        ],
        "after": [
          "      useAudioStore().removeLegacyMapping(layerId, index);",
          "    },",
          "    getAudioMappingsForLayer(layerId: string): AudioParticleMapping[] {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2133:36",
      "file": "stores/compositorStore.ts",
      "line": 2133,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPeakData(peakData: PeakData): void {",
      "context": {
        "before": [
          "    getAudioMappingsForLayer(layerId: string): AudioParticleMapping[] {",
          "      return useAudioStore().getLegacyMappings(layerId);",
          "    },"
        ],
        "after": [
          "      useAudioStore().setPeakData(peakData);",
          "    },",
          "    detectAudioPeaks(config: PeakDetectionConfig): PeakData | null {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2139:43",
      "file": "stores/compositorStore.ts",
      "line": 2139,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addAudioMapping(mapping: AudioMapping): void {",
      "context": {
        "before": [
          "    detectAudioPeaks(config: PeakDetectionConfig): PeakData | null {",
          "      return useAudioStore().detectPeaks(config);",
          "    },"
        ],
        "after": [
          "      useAudioStore().addMapping(mapping);",
          "    },",
          "    removeAudioMapping(mappingId: string): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2142:42",
      "file": "stores/compositorStore.ts",
      "line": 2142,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeAudioMapping(mappingId: string): void {",
      "context": {
        "before": [
          "    addAudioMapping(mapping: AudioMapping): void {",
          "      useAudioStore().addMapping(mapping);",
          "    },"
        ],
        "after": [
          "      useAudioStore().removeMapping(mappingId);",
          "    },",
          "    updateAudioMapping("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2148:6",
      "file": "stores/compositorStore.ts",
      "line": 2148,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updateAudioMapping(",
          "      mappingId: string,",
          "      updates: Partial<AudioMapping>,"
        ],
        "after": [
          "      useAudioStore().updateMapping(mappingId, updates);",
          "    },",
          "    getAudioMappings(): AudioMapping[] {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2158:56",
      "file": "stores/compositorStore.ts",
      "line": 2158,
      "column": 56,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const targetFrame = frame ?? this.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      return useAudioStore().getMappedValueAtFrame(mappingId, frame);",
          "    },",
          "    getAllMappedValuesAtFrame(frame?: number): Map<TargetParameter, number> {"
        ],
        "after": [
          "      return useAudioStore().getAllMappedValuesAtFrame(targetFrame);",
          "    },",
          "    getActiveMappingsForLayer(layerId: string): AudioMapping[] {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2171:41",
      "file": "stores/compositorStore.ts",
      "line": 2171,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const frame = this.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      return useAudioStore().getValuesForLayerAtFrame(layerId, frame);",
          "    },",
          "    isBeatAtCurrentFrame(): boolean {"
        ],
        "after": [
          "      return useAudioStore().isBeatAtFrame(frame);",
          "    },",
          "    convertAudioToKeyframes("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2225:47",
      "file": "stores/compositorStore.ts",
      "line": 2225,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSnapConfig(config: Partial<SnapConfig>): void {",
      "context": {
        "before": [
          "    getAudioPeakFrames(): number[] {",
          "      return getPeakFrames(useAudioStore().peakData);",
          "    },"
        ],
        "after": [
          "      useAnimationStore().setSnapConfig(config);",
          "    },",
          "    toggleSnapping(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2228:21",
      "file": "stores/compositorStore.ts",
      "line": 2228,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleSnapping(): void {",
      "context": {
        "before": [
          "    setSnapConfig(config: Partial<SnapConfig>): void {",
          "      useAnimationStore().setSnapConfig(config);",
          "    },"
        ],
        "after": [
          "      useAnimationStore().toggleSnapping();",
          "    },",
          "    toggleSnapType("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2239:6",
      "file": "stores/compositorStore.ts",
      "line": 2239,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        | \"peaks\"",
          "        | \"layerBounds\"",
          "        | \"playhead\","
        ],
        "after": [
          "      useAnimationStore().toggleSnapType(type);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2247:6",
      "file": "stores/compositorStore.ts",
      "line": 2247,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    createPathAnimator(",
          "      layerId: string,",
          "      config: Partial<PathAnimatorConfig> = {},"
        ],
        "after": [
          "      useAudioKeyframeStore().createPathAnimator(this, layerId, config);",
          "    },",
          "    setPathAnimatorPath(layerId: string, pathData: string): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2250:59",
      "file": "stores/compositorStore.ts",
      "line": 2250,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setPathAnimatorPath(layerId: string, pathData: string): void {",
      "context": {
        "before": [
          "    ): void {",
          "      useAudioKeyframeStore().createPathAnimator(this, layerId, config);",
          "    },"
        ],
        "after": [
          "      useAudioKeyframeStore().setPathAnimatorPath(this, layerId, pathData);",
          "    },",
          "    updatePathAnimatorConfig("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2256:6",
      "file": "stores/compositorStore.ts",
      "line": 2256,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updatePathAnimatorConfig(",
          "      layerId: string,",
          "      config: Partial<PathAnimatorConfig>,"
        ],
        "after": [
          "      useAudioKeyframeStore().updatePathAnimatorConfig(this, layerId, config);",
          "    },",
          "    removePathAnimator(layerId: string): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2259:40",
      "file": "stores/compositorStore.ts",
      "line": 2259,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removePathAnimator(layerId: string): void {",
      "context": {
        "before": [
          "    ): void {",
          "      useAudioKeyframeStore().updatePathAnimatorConfig(this, layerId, config);",
          "    },"
        ],
        "after": [
          "      useAudioKeyframeStore().removePathAnimator(this, layerId);",
          "    },",
          "    getPathAnimator(layerId: string): PathAnimatorAccess | undefined {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2265:26",
      "file": "stores/compositorStore.ts",
      "line": 2265,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updatePathAnimators(): void {",
      "context": {
        "before": [
          "    getPathAnimator(layerId: string): PathAnimatorAccess | undefined {",
          "      return useAudioKeyframeStore().getPathAnimator(this, layerId);",
          "    },"
        ],
        "after": [
          "      useAudioKeyframeStore().updatePathAnimators(this);",
          "    },",
          "    resetPathAnimators(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2268:25",
      "file": "stores/compositorStore.ts",
      "line": 2268,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetPathAnimators(): void {",
      "context": {
        "before": [
          "    updatePathAnimators(): void {",
          "      useAudioKeyframeStore().updatePathAnimators(this);",
          "    },"
        ],
        "after": [
          "      useAudioKeyframeStore().resetPathAnimators(this);",
          "    },",
          "    initializeAudioReactiveMapper(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2271:36",
      "file": "stores/compositorStore.ts",
      "line": 2271,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializeAudioReactiveMapper(): void {",
      "context": {
        "before": [
          "    resetPathAnimators(): void {",
          "      useAudioKeyframeStore().resetPathAnimators(this);",
          "    },"
        ],
        "after": [
          "      useAudioStore().initializeReactiveMapper();",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2296:19",
      "file": "stores/compositorStore.ts",
      "line": 2296,
      "column": 19,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearMarkers(): void {",
      "context": {
        "before": [
          "    ): boolean {",
          "      return useMarkerStore().updateMarker(this, markerId, updates);",
          "    },"
        ],
        "after": [
          "      useMarkerStore().clearMarkers(this);",
          "    },",
          "    getMarkers(): import(\"@/types/project\").Marker[] {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2320:23",
      "file": "stores/compositorStore.ts",
      "line": 2320,
      "column": 23,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToNextMarker(): void {",
      "context": {
        "before": [
          "    getPreviousMarker(frame: number): import(\"@/types/project\").Marker | null {",
          "      return useMarkerStore().getPreviousMarker(this, frame);",
          "    },"
        ],
        "after": [
          "      useMarkerStore().jumpToNextMarker(this);",
          "    },",
          "    jumpToPreviousMarker(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2323:27",
      "file": "stores/compositorStore.ts",
      "line": 2323,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToPreviousMarker(): void {",
      "context": {
        "before": [
          "    jumpToNextMarker(): void {",
          "      useMarkerStore().jumpToNextMarker(this);",
          "    },"
        ],
        "after": [
          "      useMarkerStore().jumpToPreviousMarker(this);",
          "    },",
          "    addMarkers("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2339:37",
      "file": "stores/compositorStore.ts",
      "line": 2339,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializePropertyDriverSystem(): void {",
      "context": {
        "before": [
          "    // PROPERTY DRIVER SYSTEM (delegated to expressionStore)",
          "    // ============================================================",
          ""
        ],
        "after": [
          "      useExpressionStore().initializePropertyDriverSystem(this);",
          "    },",
          "    // Evaluates property at frame, using composition's fps and duration for expressions"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2380:29",
      "file": "stores/compositorStore.ts",
      "line": 2380,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "this.getActiveComp()?.currentFrame ?? 0,",
      "context": {
        "before": [
          "      return useExpressionStore().getEvaluatedLayerProperties(",
          "        this,",
          "        layerId,"
        ],
        "after": [
          "      );",
          "    },",
          "    addPropertyDriver(driver: PropertyDriver): boolean {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2425:43",
      "file": "stores/compositorStore.ts",
      "line": 2425,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removePropertyDriver(driverId: string): void {",
      "context": {
        "before": [
          "        options,",
          "      );",
          "    },"
        ],
        "after": [
          "      useExpressionStore().removePropertyDriver(this, driverId);",
          "    },",
          "    updatePropertyDriver("
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2431:6",
      "file": "stores/compositorStore.ts",
      "line": 2431,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    updatePropertyDriver(",
          "      driverId: string,",
          "      updates: Partial<PropertyDriver>,"
        ],
        "after": [
          "      useExpressionStore().updatePropertyDriver(this, driverId, updates);",
          "    },",
          "    getDriversForLayer(layerId: string): PropertyDriver[] {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2437:43",
      "file": "stores/compositorStore.ts",
      "line": 2437,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "togglePropertyDriver(driverId: string): void {",
      "context": {
        "before": [
          "    getDriversForLayer(layerId: string): PropertyDriver[] {",
          "      return useExpressionStore().getDriversForLayer(this, layerId);",
          "    },"
        ],
        "after": [
          "      useExpressionStore().togglePropertyDriver(this, driverId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2449:45",
      "file": "stores/compositorStore.ts",
      "line": 2449,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetParticleSimulation(layerId: string): void {",
      "context": {
        "before": [
          "     * Reset a particle layer's simulation",
          "     * Called when particle configuration changes",
          "     */"
        ],
        "after": [
          "      particleSimulationRegistry.resetLayer(layerId);",
          "      storeLogger.debug(\"Reset particle simulation for layer:\", layerId);",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2458:34",
      "file": "stores/compositorStore.ts",
      "line": 2458,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAllParticleSimulations(): void {",
      "context": {
        "before": [
          "     * Clear all particle simulations",
          "     * Called on project load/new",
          "     */"
        ],
        "after": [
          "      particleSimulationRegistry.clear();",
          "      storeLogger.debug(\"Cleared all particle simulations\");",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2489:40",
      "file": "stores/compositorStore.ts",
      "line": 2489,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "enableAutosave(intervalMs?: number): void {",
      "context": {
        "before": [
          "    // AUTOSAVE/PROJECT ACTIONS (delegated to projectStore)",
          "    // ============================================================",
          ""
        ],
        "after": [
          "      useProjectStore().configureAutosave(",
          "        this,",
          "        { enabled: true, intervalMs },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2496:22",
      "file": "stores/compositorStore.ts",
      "line": 2496,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableAutosave(): void {",
      "context": {
        "before": [
          "        () => this.performAutosave(),",
          "      );",
          "    },"
        ],
        "after": [
          "      useProjectStore().stopAutosave(this);",
          "      this.autosaveEnabled = false;",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2500:25",
      "file": "stores/compositorStore.ts",
      "line": 2500,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "startAutosaveTimer(): void {",
      "context": {
        "before": [
          "      useProjectStore().stopAutosave(this);",
          "      this.autosaveEnabled = false;",
          "    },"
        ],
        "after": [
          "      useProjectStore().startAutosave(this, () => this.performAutosave());",
          "    },",
          "    stopAutosaveTimer(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2503:24",
      "file": "stores/compositorStore.ts",
      "line": 2503,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stopAutosaveTimer(): void {",
      "context": {
        "before": [
          "    startAutosaveTimer(): void {",
          "      useProjectStore().startAutosave(this, () => this.performAutosave());",
          "    },"
        ],
        "after": [
          "      useProjectStore().stopAutosave(this);",
          "    },",
          "    async performAutosave(): Promise<void> {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2509:25",
      "file": "stores/compositorStore.ts",
      "line": 2509,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "markUnsavedChanges(): void {",
      "context": {
        "before": [
          "    async performAutosave(): Promise<void> {",
          "      return useProjectStore().performAutosave(this);",
          "    },"
        ],
        "after": [
          "      useProjectStore().markUnsavedChanges(this);",
          "      this.invalidateFrameCache();",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2539:43",
      "file": "stores/compositorStore.ts",
      "line": 2539,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setFrameCacheEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "    async initializeFrameCache(): Promise<void> {",
          "      return useCacheStore().initializeCache(this);",
          "    },"
        ],
        "after": [
          "      useCacheStore().setFrameCacheEnabled(this, enabled);",
          "    },",
          "    getCachedFrame(frame: number): ImageData | null {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2557:27",
      "file": "stores/compositorStore.ts",
      "line": 2557,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "invalidateFrameCache(): void {",
      "context": {
        "before": [
          "    ): Promise<void> {",
          "      return useCacheStore().startPreCache(this, currentFrame, direction);",
          "    },"
        ],
        "after": [
          "      useCacheStore().invalidateFrameCache(this);",
          "    },",
          "    clearFrameCache(): void {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2560:22",
      "file": "stores/compositorStore.ts",
      "line": 2560,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearFrameCache(): void {",
      "context": {
        "before": [
          "    invalidateFrameCache(): void {",
          "      useCacheStore().invalidateFrameCache(this);",
          "    },"
        ],
        "after": [
          "      useCacheStore().clearFrameCache();",
          "    },",
          "    getFrameCacheStats(): CacheStats {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2577:34",
      "file": "stores/compositorStore.ts",
      "line": 2577,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTimelineZoom(zoom: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set timeline zoom level",
          "     */"
        ],
        "after": [
          "      useAnimationStore().setTimelineZoom(zoom);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2584:40",
      "file": "stores/compositorStore.ts",
      "line": 2584,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectAsset(assetId: string | null): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select an asset by ID",
          "     */"
        ],
        "after": [
          "      useProjectStore().selectAsset(this, assetId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2591:37",
      "file": "stores/compositorStore.ts",
      "line": 2591,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayers(layerIds: string[]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select multiple layers (delegates to selectionStore)",
          "     */"
        ],
        "after": [
          "      const selection = useSelectionStore();",
          "      selection.selectLayers(layerIds);",
          "    },"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2654:58",
      "file": "stores/compositorStore.ts",
      "line": 2654,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearKeyframes(layerId: string, propertyPath: string): void {",
      "context": {
        "before": [
          "     * @param layerId The layer ID",
          "     * @param propertyPath Path to the property (e.g., 'transform.position')",
          "     */"
        ],
        "after": [
          "      useKeyframeStore().clearKeyframes(this, layerId, propertyPath);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2732:41",
      "file": "stores/compositorStore.ts",
      "line": 2732,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToNextKeyframe(layerId?: string): void {",
      "context": {
        "before": [
          "     * Jump to the next keyframe (K key behavior)",
          "     * @param layerId Optional layer ID. If not provided, uses selected layers or all layers.",
          "     */"
        ],
        "after": [
          "      useAnimationStore().jumpToNextKeyframe(this, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2740:41",
      "file": "stores/compositorStore.ts",
      "line": 2740,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToPrevKeyframe(layerId?: string): void {",
      "context": {
        "before": [
          "     * Jump to the previous keyframe (J key behavior)",
          "     * @param layerId Optional layer ID. If not provided, uses selected layers or all layers.",
          "     */"
        ],
        "after": [
          "      useAnimationStore().jumpToPrevKeyframe(this, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/compositorStore.ts:2903:6",
      "file": "stores/compositorStore.ts",
      "line": 2903,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        origin?: { x: number; y: number; z?: number };",
          "        anchor?: { x: number; y: number; z?: number }; // Alias for origin",
          "      },"
        ],
        "after": [
          "      return useLayerStore().updateLayerTransform(this, layerId, updates);",
          "    },",
          "  },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:183:19",
      "file": "stores/decompositionStore.ts",
      "line": 183,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"decomposing\", \"Decomposing image into layers...\", 0);",
      "context": {
        "before": [
          "\r",
          "      try {\r",
          "        // Step 1: Decompose image using Qwen model\r"
        ],
        "after": [
          "\r",
          "        const decomposed = await service.decomposeWithAutoSetup(\r",
          "          imageDataUrl,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:202:19",
      "file": "stores/decompositionStore.ts",
      "line": 202,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"analyzing\", \"Analyzing layer depths...\", 50);",
      "context": {
        "before": [
          "        storeLogger.info(`Decomposition complete: ${decomposed.length} layers`);\r",
          "\r",
          "        // Step 2: Prepare layer analysis for depth estimation\r"
        ],
        "after": [
          "\r",
          "        const layerInputs: LayerAnalysisInput[] = decomposed.map(\r",
          "          (layer, index) => ({\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:217:23",
      "file": "stores/decompositionStore.ts",
      "line": 217,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"estimating\", \"Estimating layer depths with AI...\", 60);",
      "context": {
        "before": [
          "\r",
          "        if (autoDepthEstimation) {\r",
          "          try {\r"
        ],
        "after": [
          "            const estimator = getLLMDepthEstimator();\r",
          "            depthResult = await estimator.estimateDepths(layerInputs, {\r",
          "              provider: depthProvider,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:238:21",
      "file": "stores/decompositionStore.ts",
      "line": 238,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"creating\", \"Creating layer group...\", 70);",
      "context": {
        "before": [
          "        // Step 4: Create group layer if requested\r",
          "        let groupLayerId: string | undefined;\r",
          "        if (groupLayers) {\r"
        ],
        "after": [
          "          const groupLayer = store.createLayer(\"null\", groupName);\r",
          "          groupLayerId = groupLayer.id;\r",
          "        }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:244:19",
      "file": "stores/decompositionStore.ts",
      "line": 244,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"creating\", \"Creating layers...\", 75);",
      "context": {
        "before": [
          "        }\r",
          "\r",
          "        // Step 5: Create image layers sorted by depth (farthest first)\r"
        ],
        "after": [
          "\r",
          "        const sortedLayers = [...decomposed]\r",
          "          .map((layer, index) => ({\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:255:23",
      "file": "stores/decompositionStore.ts",
      "line": 255,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(b.depth?.estimatedDepth || 0) - (a.depth?.estimatedDepth || 0),",
      "context": {
        "before": [
          "          }))\r",
          "          .sort(\r",
          "            (a, b) =>\r"
        ],
        "after": [
          "          );\r",
          "\r",
          "        for (let i = 0; i < sortedLayers.length; i++) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:255:56",
      "file": "stores/decompositionStore.ts",
      "line": 255,
      "column": 56,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "(b.depth?.estimatedDepth || 0) - (a.depth?.estimatedDepth || 0),",
      "context": {
        "before": [
          "          }))\r",
          "          .sort(\r",
          "            (a, b) =>\r"
        ],
        "after": [
          "          );\r",
          "\r",
          "        for (let i = 0; i < sortedLayers.length; i++) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:261:21",
      "file": "stores/decompositionStore.ts",
      "line": 261,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(",
      "context": {
        "before": [
          "        for (let i = 0; i < sortedLayers.length; i++) {\r",
          "          const { decomposed: layer, depth } = sortedLayers[i];\r",
          "\r"
        ],
        "after": [
          "            \"creating\",\r",
          "            `Creating layer ${i + 1}/${sortedLayers.length}...`,\r",
          "            75 + (i / sortedLayers.length) * 20,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:270:18",
      "file": "stores/decompositionStore.ts",
      "line": 270,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depth?.contentDescription || layer.label,",
      "context": {
        "before": [
          "          const createdLayer = await createLayerFromDecomposed(\r",
          "            store,\r",
          "            layer,\r"
        ],
        "after": [
          "            depth?.suggestedZPosition || 0,\r",
          "          );\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:271:18",
      "file": "stores/decompositionStore.ts",
      "line": 271,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depth?.suggestedZPosition || 0,",
      "context": {
        "before": [
          "            store,\r",
          "            layer,\r",
          "            depth?.contentDescription || layer.label,\r"
        ],
        "after": [
          "          );\r",
          "\r",
          "          if (createdLayer) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:283:19",
      "file": "stores/decompositionStore.ts",
      "line": 283,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"complete\", `Created ${createdLayers.length} layers`, 100);",
      "context": {
        "before": [
          "        }\r",
          "\r",
          "        // Step 6: Finalize\r"
        ],
        "after": [
          "        store.project.meta.modified = new Date().toISOString();\r",
          "        store.pushHistory();\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:300:19",
      "file": "stores/decompositionStore.ts",
      "line": 300,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "onProgress?.(\"error\", errorMsg, 0);",
      "context": {
        "before": [
          "      } catch (error) {\r",
          "        const errorMsg = error instanceof Error ? error.message : \"Unknown error\";\r",
          "        storeLogger.error(\"Layer decomposition failed:\", error);\r"
        ],
        "after": [
          "\r",
          "        return {\r",
          "          success: false,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:326:40",
      "file": "stores/decompositionStore.ts",
      "line": 326,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "verified: status.verification?.verified ?? false,",
      "context": {
        "before": [
          "        return {\r",
          "          downloaded: status.downloaded,\r",
          "          loaded: status.loaded,\r"
        ],
        "after": [
          "          error: status.error || undefined,\r",
          "        };\r",
          "      } catch (error) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/decompositionStore.ts:372:20",
      "file": "stores/decompositionStore.ts",
      "line": 372,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "stopPolling?.();",
      "context": {
        "before": [
          "        }\r",
          "\r",
          "        await service.downloadModel();\r"
        ],
        "after": [
          "\r",
          "        return { success: true };\r",
          "      } catch (error) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/depthflowStore.ts:35:44",
      "file": "stores/depthflowStore.ts",
      "line": 35,
      "column": 44,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (typeof value !== \"number\" || !Number.isFinite(value)) {",
      "context": {
        "before": [
          " * Prevents NaN/Infinity corruption in layer data.\r",
          " */\r",
          "function sanitizeNumber(value: unknown, defaultValue: number): number {\r"
        ],
        "after": [
          "    return defaultValue;\r",
          "  }\r",
          "  return value;\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/depthflowStore.ts:109:6",
      "file": "stores/depthflowStore.ts",
      "line": 109,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: DepthflowStoreAccess,\r",
          "      layerId: string,\r",
          "      updates: Partial<DepthflowLayerData[\"config\"]>,\r"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r",
          "      if (!layer || layer.type !== \"depthflow\") {\r",
          "        return;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:159:48",
      "file": "stores/effectStore/index.ts",
      "line": 159,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function updateModified(store: LayerStyleStore): void {",
      "context": {
        "before": [
          "  return layer.layerStyles;",
          "}",
          ""
        ],
        "after": [
          "  store.project.meta.modified = new Date().toISOString();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:192:83",
      "file": "stores/effectStore/index.ts",
      "line": 192,
      "column": 83,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addEffectToLayer(store: EffectStoreAccess, layerId: string, effectKey: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Add effect to layer.",
          "     */"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "      if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:208:87",
      "file": "stores/effectStore/index.ts",
      "line": 208,
      "column": 87,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeEffectFromLayer(store: EffectStoreAccess, layerId: string, effectId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Remove effect from layer.",
          "     */"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "      if (!layer || !layer.effects) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:223:121",
      "file": "stores/effectStore/index.ts",
      "line": 223,
      "column": 121,
      "pattern": ": void",
      "severity": "LOW",
      "code": "updateEffectParameter(store: EffectStoreAccess, layerId: string, effectId: string, paramKey: string, value: unknown): void {",
      "context": {
        "before": [
          "    /**",
          "     * Update effect parameter value.",
          "     */"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "      if (!layer || !layer.effects) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:238:125",
      "file": "stores/effectStore/index.ts",
      "line": 238,
      "column": 125,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setEffectParamAnimated(store: EffectStoreAccess, layerId: string, effectId: string, paramKey: string, animated: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle effect parameter animation state.",
          "     */"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "      if (!layer || !layer.effects) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:267:78",
      "file": "stores/effectStore/index.ts",
      "line": 267,
      "column": 78,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleEffect(store: EffectStoreAccess, layerId: string, effectId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle effect enabled state.",
          "     */"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "      if (!layer || !layer.effects) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:282:98",
      "file": "stores/effectStore/index.ts",
      "line": 282,
      "column": 98,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reorderEffects(store: EffectStoreAccess, layerId: string, fromIndex: number, toIndex: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Reorder effects in stack.",
          "     */"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "      if (!layer || !layer.effects) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:298:81",
      "file": "stores/effectStore/index.ts",
      "line": 298,
      "column": 81,
      "pattern": ": void",
      "severity": "LOW",
      "code": "duplicateEffect(store: EffectStoreAccess, layerId: string, effectId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Duplicate effect on layer.",
          "     */"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "      if (!layer || !layer.effects) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:327:54",
      "file": "stores/effectStore/index.ts",
      "line": 327,
      "column": 54,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const rawFrame = frame ?? store.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "      if (!effect || !effect.parameters[paramKey]) return null;",
          "",
          "      const param = effect.parameters[paramKey];"
        ],
        "after": [
          "      const targetFrame = Number.isFinite(rawFrame) ? rawFrame : 0;",
          "",
          "      if (param.animated && param.keyframes.length > 0) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:328:34",
      "file": "stores/effectStore/index.ts",
      "line": 328,
      "column": 34,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const targetFrame = Number.isFinite(rawFrame) ? rawFrame : 0;",
      "context": {
        "before": [
          "",
          "      const param = effect.parameters[paramKey];",
          "      const rawFrame = frame ?? store.getActiveComp()?.currentFrame ?? 0;"
        ],
        "after": [
          "",
          "      if (param.animated && param.keyframes.length > 0) {",
          "        return interpolateProperty(param, targetFrame);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:344:85",
      "file": "stores/effectStore/index.ts",
      "line": 344,
      "column": 85,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerStylesEnabled(store: LayerStyleStore, layerId: string, enabled: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Enable or disable all layer styles for a layer.",
          "     */"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) {",
          "        storeLogger.warn(\"setLayerStylesEnabled: Layer not found\", { layerId });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:362:109",
      "file": "stores/effectStore/index.ts",
      "line": 362,
      "column": 109,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setStyleEnabled(store: LayerStyleStore, layerId: string, styleType: keyof LayerStyles, enabled: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Enable or disable a specific style type.",
          "     */"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) {",
          "        storeLogger.warn(\"setStyleEnabled: Layer not found\", { layerId });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:411:6",
      "file": "stores/effectStore/index.ts",
      "line": 411,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      styleType: T,",
          "      property: K,",
          "      value: unknown,"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) {",
          "        storeLogger.warn(\"updateStyleProperty: Layer not found\", { layerId });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:441:126",
      "file": "stores/effectStore/index.ts",
      "line": 441,
      "column": 126,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setStyle<T extends keyof LayerStyles>(store: LayerStyleStore, layerId: string, styleType: T, styleConfig: LayerStyles[T]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set entire style configuration.",
          "     */"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) {",
          "        storeLogger.warn(\"setStyle: Layer not found\", { layerId });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:459:86",
      "file": "stores/effectStore/index.ts",
      "line": 459,
      "column": 86,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLayerStyles(store: LayerStyleStore, layerId: string, layerStyles: LayerStyles): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set all layer styles at once.",
          "     */"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) {",
          "        storeLogger.warn(\"setLayerStyles: Layer not found\", { layerId });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:496:84",
      "file": "stores/effectStore/index.ts",
      "line": 496,
      "column": 84,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pasteLayerStyles(store: LayerStyleStore, layerId: string, styles?: LayerStyles): void {",
      "context": {
        "before": [
          "    /**",
          "     * Paste layer styles to a layer.",
          "     */"
        ],
        "after": [
          "      const stylesToPaste = styles ?? this.styleClipboard;",
          "      if (!stylesToPaste) {",
          "        storeLogger.warn(\"pasteLayerStyles: No styles provided\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:519:97",
      "file": "stores/effectStore/index.ts",
      "line": 519,
      "column": 97,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pasteLayerStylesToMultiple(store: LayerStyleStore, layerIds: string[], styles?: LayerStyles): void {",
      "context": {
        "before": [
          "    /**",
          "     * Paste layer styles to multiple layers.",
          "     */"
        ],
        "after": [
          "      const stylesToPaste = styles ?? this.styleClipboard;",
          "      if (!stylesToPaste) {",
          "        storeLogger.warn(\"pasteLayerStylesToMultiple: No styles provided\");"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:542:62",
      "file": "stores/effectStore/index.ts",
      "line": 542,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearLayerStyles(store: LayerStyleStore, layerId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear layer styles from a layer.",
          "     */"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) {",
          "        storeLogger.warn(\"clearLayerStyles: Layer not found\", { layerId });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:559:26",
      "file": "stores/effectStore/index.ts",
      "line": 559,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearStyleClipboard(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear the style clipboard.",
          "     */"
        ],
        "after": [
          "      this.styleClipboard = null;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:584:7",
      "file": "stores/effectStore/index.ts",
      "line": 584,
      "column": 7,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "      spread?: number;",
          "      size?: number;",
          "      opacity?: number;"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:615:7",
      "file": "stores/effectStore/index.ts",
      "line": 615,
      "column": 7,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "      size?: number;",
          "      position?: \"outside\" | \"inside\" | \"center\";",
          "      opacity?: number;"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:644:7",
      "file": "stores/effectStore/index.ts",
      "line": 644,
      "column": 7,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "      spread?: number;",
          "      size?: number;",
          "      opacity?: number;"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:672:7",
      "file": "stores/effectStore/index.ts",
      "line": 672,
      "column": 7,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "      color?: RGBA;",
          "      opacity?: number;",
          "      blendMode?: string;"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:704:7",
      "file": "stores/effectStore/index.ts",
      "line": 704,
      "column": 7,
      "pattern": ": void",
      "severity": "LOW",
      "code": "}): void {",
      "context": {
        "before": [
          "      soften?: number;",
          "      angle?: number;",
          "      altitude?: number;"
        ],
        "after": [
          "      const layer = getLayerById(store, layerId);",
          "      if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/effectStore/index.ts:736:82",
      "file": "stores/effectStore/index.ts",
      "line": 736,
      "column": 82,
      "pattern": ": void",
      "severity": "LOW",
      "code": "applyStylePreset(store: LayerStyleStore, layerId: string, presetName: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Apply a style preset to a layer.",
          "     */"
        ],
        "after": [
          "      const preset = STYLE_PRESETS[presetName];",
          "      if (!preset) {",
          "        storeLogger.warn(\"applyStylePreset: Preset not found\", { presetName });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/drivers.ts:29:2",
      "file": "stores/expressionStore/drivers.ts",
      "line": 29,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          " */",
          "export function initializePropertyDriverSystem(",
          "  store: ExpressionStoreAccess,"
        ],
        "after": [
          "  const expressionStore = useExpressionStore();",
          "  expressionStore.propertyDriverSystem = new PropertyDriverSystem();",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/drivers.ts:72:35",
      "file": "stores/expressionStore/drivers.ts",
      "line": 72,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const comp = store.getActiveComp?.();",
      "context": {
        "before": [
          "  if (!layer) return new Map();",
          "",
          "  // Get composition context for expressions"
        ],
        "after": [
          "  // Validate fps (nullish coalescing doesn't catch NaN)",
          "  const fps = Number.isFinite(store.fps) && store.fps > 0 ? store.fps : 16;",
          "  // Validate duration calculation to prevent NaN propagation"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/drivers.ts:74:22",
      "file": "stores/expressionStore/drivers.ts",
      "line": 74,
      "column": 22,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const fps = Number.isFinite(store.fps) && store.fps > 0 ? store.fps : 16;",
      "context": {
        "before": [
          "  // Get composition context for expressions",
          "  const comp = store.getActiveComp?.();",
          "  // Validate fps (nullish coalescing doesn't catch NaN)"
        ],
        "after": [
          "  // Validate duration calculation to prevent NaN propagation",
          "  const rawDuration = comp",
          "    ? comp.settings.frameCount / comp.settings.fps"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/drivers.ts:80:41",
      "file": "stores/expressionStore/drivers.ts",
      "line": 80,
      "column": 41,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "rawDuration !== undefined && Number.isFinite(rawDuration)",
      "context": {
        "before": [
          "    ? comp.settings.frameCount / comp.settings.fps",
          "    : undefined;",
          "  const duration ="
        ],
        "after": [
          "      ? rawDuration",
          "      : undefined;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/drivers.ts:261:2",
      "file": "stores/expressionStore/drivers.ts",
      "line": 261,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function removePropertyDriver(",
          "  store: ExpressionStoreAccess,",
          "  driverId: string,"
        ],
        "after": [
          "  const expressionStore = useExpressionStore();",
          "  const index = expressionStore.propertyDrivers.findIndex(",
          "    (d: PropertyDriver) => d.id === driverId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/drivers.ts:285:2",
      "file": "stores/expressionStore/drivers.ts",
      "line": 285,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  store: ExpressionStoreAccess,",
          "  driverId: string,",
          "  updates: Partial<PropertyDriver>,"
        ],
        "after": [
          "  const expressionStore = useExpressionStore();",
          "  const driver = expressionStore.propertyDrivers.find(",
          "    (d: PropertyDriver) => d.id === driverId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/drivers.ts:320:2",
      "file": "stores/expressionStore/drivers.ts",
      "line": 320,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function togglePropertyDriver(",
          "  store: ExpressionStoreAccess,",
          "  driverId: string,"
        ],
        "after": [
          "  const expressionStore = useExpressionStore();",
          "  const driver = expressionStore.propertyDrivers.find(",
          "    (d: PropertyDriver) => d.id === driverId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/index.ts:210:65",
      "file": "stores/expressionStore/index.ts",
      "line": 210,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initializePropertyDriverSystem(store: ExpressionStoreAccess): void {",
      "context": {
        "before": [
          "    /**",
          "     * Initialize the property driver system",
          "     */"
        ],
        "after": [
          "      initializePropertyDriverSystemImpl(store);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/index.ts:289:73",
      "file": "stores/expressionStore/index.ts",
      "line": 289,
      "column": 73,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removePropertyDriver(store: ExpressionStoreAccess, driverId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Remove a property driver",
          "     */"
        ],
        "after": [
          "      removePropertyDriverImpl(store, driverId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/index.ts:300:6",
      "file": "stores/expressionStore/index.ts",
      "line": 300,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: ExpressionStoreAccess,",
          "      driverId: string,",
          "      updates: Partial<PropertyDriver>,"
        ],
        "after": [
          "      updatePropertyDriverImpl(store, driverId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/expressionStore/index.ts:320:6",
      "file": "stores/expressionStore/index.ts",
      "line": 320,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    togglePropertyDriver(",
          "      store: ExpressionStoreAccess,",
          "      driverId: string,"
        ],
        "after": [
          "      togglePropertyDriverImpl(store, driverId);",
          "    },",
          "  },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/historyStore.ts:37:34",
      "file": "stores/historyStore.ts",
      "line": 37,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "push(project: LatticeProject): void {",
      "context": {
        "before": [
          "     * Push a new state to history",
          "     * This should be called after significant changes to the project",
          "     */"
        ],
        "after": [
          "      // Remove any future states if we're not at the end",
          "      if (this.index < this.stack.length - 1) {",
          "        this.stack = this.stack.slice(0, this.index + 1);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/historyStore.ts:100:12",
      "file": "stores/historyStore.ts",
      "line": 100,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear all history",
          "     */"
        ],
        "after": [
          "      this.stack = [];",
          "      this.index = -1;",
          "      storeLogger.debug(\"History cleared\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/historyStore.ts:109:40",
      "file": "stores/historyStore.ts",
      "line": 109,
      "column": 40,
      "pattern": ": void",
      "severity": "LOW",
      "code": "initialize(project: LatticeProject): void {",
      "context": {
        "before": [
          "    /**",
          "     * Initialize history with a starting state",
          "     */"
        ],
        "after": [
          "      this.clear();",
          "      this.push(project);",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/historyStore.ts:117:29",
      "file": "stores/historyStore.ts",
      "line": 117,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setMaxSize(size: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set maximum history size",
          "     */"
        ],
        "after": [
          "      this.maxSize = Math.max(1, size);",
          "      // Trim if needed",
          "      while (this.stack.length > this.maxSize) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/clipboard.ts:58:31",
      "file": "stores/keyframeStore/clipboard.ts",
      "line": 58,
      "column": 31,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "groupedByProperty.get(key)?.keyframeIds.push(sel.keyframeId);",
      "context": {
        "before": [
          "        keyframeIds: [],",
          "      });",
          "    }"
        ],
        "after": [
          "  }",
          "",
          "  // Find the earliest frame among all selected keyframes (for relative timing)"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/clipboard.ts:72:18",
      "file": "stores/keyframeStore/clipboard.ts",
      "line": 72,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!property?.keyframes) continue;",
      "context": {
        "before": [
          "    if (!layer) continue;",
          "",
          "    const property = findPropertyByPath(layer, group.propertyPath);"
        ],
        "after": [
          "",
          "    const selectedKeyframes = property.keyframes.filter((kf) =>",
          "      group.keyframeIds.includes(kf.id),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/clipboard.ts:97:18",
      "file": "stores/keyframeStore/clipboard.ts",
      "line": 97,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!property?.keyframes) continue;",
      "context": {
        "before": [
          "    if (!layer) continue;",
          "",
          "    const property = findPropertyByPath(layer, group.propertyPath);"
        ],
        "after": [
          "",
          "    const selectedKeyframes = property.keyframes.filter((kf) =>",
          "      group.keyframeIds.includes(kf.id),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:41:42",
      "file": "stores/keyframeStore/crud.ts",
      "line": 41,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const frame = safeFrame(atFrame ?? comp?.currentFrame, 0);",
      "context": {
        "before": [
          "): Keyframe<T> | null {",
          "  const comp = store.getActiveComp();",
          "  // Validate frame (nullish coalescing doesn't catch NaN)"
        ],
        "after": [
          "",
          "  storeLogger.debug(\"addKeyframe called:\", {",
          "    layerId,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:115:2",
      "file": "stores/keyframeStore/crud.ts",
      "line": 115,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  layerId: string,",
          "  propertyPath: string,",
          "  keyframeId: string,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:144:2",
      "file": "stores/keyframeStore/crud.ts",
      "line": 144,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  store: KeyframeStoreAccess,",
          "  layerId: string,",
          "  propertyPath: string,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:255:13",
      "file": "stores/keyframeStore/crud.ts",
      "line": 255,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (expr?.type === \"custom\" && expr?.params?.code) {",
      "context": {
        "before": [
          "    // 1. Project load (pre-validates all expressions)",
          "    // 2. Expression editor UI (validates before applying)",
          "    const expr = propertyData.expression;"
        ],
        "after": [
          "      storeLogger.error(",
          "        \"updateLayerProperty: Custom expressions must be applied through expression editor (requires async validation)\",",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:255:40",
      "file": "stores/keyframeStore/crud.ts",
      "line": 255,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (expr?.type === \"custom\" && expr?.params?.code) {",
      "context": {
        "before": [
          "    // 1. Project load (pre-validates all expressions)",
          "    // 2. Expression editor UI (validates before applying)",
          "    const expr = propertyData.expression;"
        ],
        "after": [
          "      storeLogger.error(",
          "        \"updateLayerProperty: Custom expressions must be applied through expression editor (requires async validation)\",",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:255:48",
      "file": "stores/keyframeStore/crud.ts",
      "line": 255,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (expr?.type === \"custom\" && expr?.params?.code) {",
      "context": {
        "before": [
          "    // 1. Project load (pre-validates all expressions)",
          "    // 2. Expression editor UI (validates before applying)",
          "    const expr = propertyData.expression;"
        ],
        "after": [
          "      storeLogger.error(",
          "        \"updateLayerProperty: Custom expressions must be applied through expression editor (requires async validation)\",",
          "      );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:290:2",
      "file": "stores/keyframeStore/crud.ts",
      "line": 290,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  propertyPath: string,",
          "  keyframeId: string,",
          "  newFrame: number,"
        ],
        "after": [
          "  // Validate frame before processing",
          "  if (!Number.isFinite(newFrame)) {",
          "    storeLogger.warn(\"moveKeyframe: Invalid frame value:\", newFrame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:292:15",
      "file": "stores/keyframeStore/crud.ts",
      "line": 292,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(newFrame)) {",
      "context": {
        "before": [
          "  newFrame: number,",
          "): void {",
          "  // Validate frame before processing"
        ],
        "after": [
          "    storeLogger.warn(\"moveKeyframe: Invalid frame value:\", newFrame);",
          "    return;",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:348:2",
      "file": "stores/keyframeStore/crud.ts",
      "line": 348,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    keyframeId: string;",
          "  }>,",
          "  frameDelta: number,"
        ],
        "after": [
          "  // Validate frameDelta",
          "  if (!Number.isFinite(frameDelta)) {",
          "    storeLogger.warn(\"moveKeyframes: Invalid frameDelta:\", frameDelta);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:350:15",
      "file": "stores/keyframeStore/crud.ts",
      "line": 350,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frameDelta)) {",
      "context": {
        "before": [
          "  frameDelta: number,",
          "): void {",
          "  // Validate frameDelta"
        ],
        "after": [
          "    storeLogger.warn(\"moveKeyframes: Invalid frameDelta:\", frameDelta);",
          "    return;",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:470:2",
      "file": "stores/keyframeStore/crud.ts",
      "line": 470,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  propertyPath: string,",
          "  keyframeId: string,",
          "  newValue: PropertyValue,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:507:2",
      "file": "stores/keyframeStore/crud.ts",
      "line": 507,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  propertyPath: string,",
          "  keyframeId: string,",
          "  updates: { frame?: number; value?: PropertyValue },"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/crud.ts:517:45",
      "file": "stores/keyframeStore/crud.ts",
      "line": 517,
      "column": 45,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (updates.frame !== undefined && Number.isFinite(updates.frame)) {",
      "context": {
        "before": [
          "  const keyframe = property.keyframes.find((kf) => kf.id === keyframeId);",
          "  if (!keyframe) return;",
          ""
        ],
        "after": [
          "    // Check for existing keyframe at target frame (same pattern as moveKeyframe)",
          "    const existingAtTarget = property.keyframes.find(",
          "      (kf) => kf.frame === updates.frame && kf.id !== keyframeId,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/dimensions.ts:109:44",
      "file": "stores/keyframeStore/dimensions.ts",
      "line": 109,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return layer.transform.separateDimensions?.position === true;",
      "context": {
        "before": [
          "  const layerStore = useLayerStore();",
          "  const layer = layerStore.getLayerById(store, layerId);",
          "  if (!layer) return false;"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/dimensions.ts:122:44",
      "file": "stores/keyframeStore/dimensions.ts",
      "line": 122,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return layer.transform.separateDimensions?.scale === true;",
      "context": {
        "before": [
          "  const layerStore = useLayerStore();",
          "  const layer = layerStore.getLayerById(store, layerId);",
          "  if (!layer) return false;"
        ],
        "after": [
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/evaluation.ts:264:21",
      "file": "stores/keyframeStore/evaluation.ts",
      "line": 264,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const frame = comp?.currentFrame ?? 0;",
      "context": {
        "before": [
          "  property: AnimatableProperty<T>,\r",
          "): T {\r",
          "  const comp = store.getActiveComp();\r"
        ],
        "after": [
          "  const fps = store.fps;\r",
          "  const duration = comp\r",
          "    ? comp.settings.frameCount / comp.settings.fps\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/expressions.ts:161:18",
      "file": "stores/keyframeStore/expressions.ts",
      "line": 161,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return property?.expression;",
      "context": {
        "before": [
          "  if (!layer) return undefined;",
          "",
          "  const property = findPropertyByPath(layer, propertyPath);"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/expressions.ts:176:18",
      "file": "stores/keyframeStore/expressions.ts",
      "line": 176,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return property?.expression !== undefined;",
      "context": {
        "before": [
          "  if (!layer) return false;",
          "",
          "  const property = findPropertyByPath(layer, propertyPath);"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/expressions.ts:242:27",
      "file": "stores/keyframeStore/expressions.ts",
      "line": 242,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!property.expression?.enabled) {",
      "context": {
        "before": [
          "    return 0;",
          "  }",
          ""
        ],
        "after": [
          "    storeLogger.warn(",
          "      \"convertExpressionToKeyframes: no active expression on property\",",
          "    );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/expressions.ts:252:23",
      "file": "stores/keyframeStore/expressions.ts",
      "line": 252,
      "column": 23,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const rate = Number.isFinite(sampleRate)",
      "context": {
        "before": [
          "  const start = startFrame ?? 0;",
          "  const end = endFrame ?? store.frameCount;",
          "  // Validate sampleRate (Math.round(NaN) = NaN, Math.max(1, NaN) = NaN)"
        ],
        "after": [
          "    ? Math.max(1, Math.round(sampleRate))",
          "    : 1;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/expressions.ts:328:29",
      "file": "stores/keyframeStore/expressions.ts",
      "line": 328,
      "column": 29,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return property.expression?.enabled === true;",
      "context": {
        "before": [
          "  const property = findPropertyByPath(layer, propertyPath);",
          "  if (!property) return false;",
          ""
        ],
        "after": [
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/helpers.ts:18:17",
      "file": "stores/keyframeStore/helpers.ts",
      "line": 18,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return Number.isFinite(frame) ? frame! : fallback;",
      "context": {
        "before": [
          " * Guards against NaN, undefined, null, and Infinity.",
          " */",
          "export function safeFrame(frame: number | undefined | null, fallback = 0): number {"
        ],
        "after": [
          "}",
          "",
          "// ============================================================================"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:194:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 194,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      propertyPath: string,",
          "      keyframeId: string,"
        ],
        "after": [
          "      removeKeyframeImpl(compositorStore, layerId, propertyPath, keyframeId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:202:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 202,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: KeyframeStoreAccess,",
          "      layerId: string,",
          "      propertyPath: string,"
        ],
        "after": [
          "      clearKeyframesImpl(compositorStore, layerId, propertyPath);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:221:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 221,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      newFrame: number,"
        ],
        "after": [
          "      moveKeyframeImpl(compositorStore, layerId, propertyPath, keyframeId, newFrame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:233:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 233,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        keyframeId: string;",
          "      }>,",
          "      frameDelta: number,"
        ],
        "after": [
          "      moveKeyframesImpl(compositorStore, keyframes, frameDelta);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:243:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 243,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      newValue: PropertyValue,"
        ],
        "after": [
          "      setKeyframeValueImpl(compositorStore, layerId, propertyPath, keyframeId, newValue);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:253:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 253,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      updates: { frame?: number; value?: PropertyValue },"
        ],
        "after": [
          "      updateKeyframeImpl(compositorStore, layerId, propertyPath, keyframeId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:267:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 267,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      interpolation: InterpolationType,"
        ],
        "after": [
          "      setKeyframeInterpolationImpl(compositorStore, layerId, propertyPath, keyframeId, interpolation);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:278:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 278,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      keyframeId: string,",
          "      handleType: \"in\" | \"out\",",
          "      handle: BezierHandle,"
        ],
        "after": [
          "      setKeyframeHandleImpl(compositorStore, layerId, propertyPath, keyframeId, handleType, handle);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:288:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 288,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      keyframeId: string,",
          "      controlMode: \"smooth\" | \"corner\" | \"symmetric\","
        ],
        "after": [
          "      setKeyframeControlModeImpl(compositorStore, layerId, propertyPath, keyframeId, controlMode);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:300:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 300,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      handleType: \"in\" | \"out\",",
          "      handle: BezierHandle,",
          "      breakHandle: boolean = false,"
        ],
        "after": [
          "      setKeyframeHandleWithModeImpl(",
          "        compositorStore,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:321:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 321,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      propertyPath: string,",
          "      value: PropertyValue,"
        ],
        "after": [
          "      setPropertyValueImpl(compositorStore, layerId, propertyPath, value);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/index.ts:331:6",
      "file": "stores/keyframeStore/index.ts",
      "line": 331,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      propertyPath: string,",
          "      animated: boolean,",
          "      addKeyframeCallback?: () => void,"
        ],
        "after": [
          "      setPropertyAnimatedImpl(compositorStore, layerId, propertyPath, animated, addKeyframeCallback);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/interpolation.ts:25:2",
      "file": "stores/keyframeStore/interpolation.ts",
      "line": 25,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  propertyPath: string,",
          "  keyframeId: string,",
          "  interpolation: InterpolationType,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/interpolation.ts:51:2",
      "file": "stores/keyframeStore/interpolation.ts",
      "line": 51,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  keyframeId: string,",
          "  handleType: \"in\" | \"out\",",
          "  handle: BezierHandle,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/interpolation.ts:86:2",
      "file": "stores/keyframeStore/interpolation.ts",
      "line": 86,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  propertyPath: string,",
          "  keyframeId: string,",
          "  controlMode: \"smooth\" | \"corner\" | \"symmetric\","
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/interpolation.ts:124:2",
      "file": "stores/keyframeStore/interpolation.ts",
      "line": 124,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  handleType: \"in\" | \"out\",",
          "  handle: BezierHandle,",
          "  breakHandle: boolean = false,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/property.ts:24:2",
      "file": "stores/keyframeStore/property.ts",
      "line": 24,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  layerId: string,",
          "  propertyPath: string,",
          "  value: PropertyValue,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/property.ts:35:47",
      "file": "stores/keyframeStore/property.ts",
      "line": 35,
      "column": 47,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const currentFrame = store.getActiveComp()?.currentFrame ?? 0;",
      "context": {
        "before": [
          "",
          "  // If animated and at a keyframe, update that keyframe's value too",
          "  if (property.animated && property.keyframes.length > 0) {"
        ],
        "after": [
          "    const existingKf = property.keyframes.find(",
          "      (kf) => kf.frame === currentFrame,",
          "    );"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/property.ts:58:2",
      "file": "stores/keyframeStore/property.ts",
      "line": 58,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  propertyPath: string,",
          "  animated: boolean,",
          "  addKeyframeCallback?: () => void,"
        ],
        "after": [
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/property.ts:74:25",
      "file": "stores/keyframeStore/property.ts",
      "line": 74,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const frame = comp?.currentFrame ?? 0;",
      "context": {
        "before": [
          "    } else {",
          "      // Direct implementation when no callback provided",
          "      const comp = store.getActiveComp();"
        ],
        "after": [
          "",
          "      const keyframe: Keyframe<PropertyValue> = {",
          "        id: `kf_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/query.ts:41:20",
      "file": "stores/keyframeStore/query.ts",
      "line": 41,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.opacity?.animated && layer.opacity.keyframes) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Check opacity"
        ],
        "after": [
          "    const kf = layer.opacity.keyframes.find((k) => k.frame === frame);",
          "    if (kf) {",
          "      results.push({ propertyPath: \"opacity\", keyframe: kf });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/query.ts:98:20",
      "file": "stores/keyframeStore/query.ts",
      "line": 98,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.opacity?.animated && layer.opacity.keyframes) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Collect from opacity"
        ],
        "after": [
          "    for (const kf of layer.opacity.keyframes) {",
          "      frames.add(kf.frame);",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:37:15",
      "file": "stores/keyframeStore/timing.ts",
      "line": 37,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(scaleFactor) || !Number.isFinite(anchorFrame)) {",
      "context": {
        "before": [
          "  anchorFrame: number = 0,",
          "): number {",
          "  // Validate numeric parameters"
        ],
        "after": [
          "    storeLogger.warn(\"scaleKeyframeTiming: Invalid parameters:\", {",
          "      scaleFactor,",
          "      anchorFrame,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:37:48",
      "file": "stores/keyframeStore/timing.ts",
      "line": 37,
      "column": 48,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(scaleFactor) || !Number.isFinite(anchorFrame)) {",
      "context": {
        "before": [
          "  anchorFrame: number = 0,",
          "): number {",
          "  // Validate numeric parameters"
        ],
        "after": [
          "    storeLogger.warn(\"scaleKeyframeTiming: Invalid parameters:\", {",
          "      scaleFactor,",
          "      anchorFrame,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:59:17",
      "file": "stores/keyframeStore/timing.ts",
      "line": 59,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (property?.keyframes && property.keyframes.length > 0) {",
      "context": {
        "before": [
          "    // findPropertyByPath already handles path normalization",
          "    const property = findPropertyByPath(layer, propPath);",
          ""
        ],
        "after": [
          "      // Scale each keyframe's frame number relative to anchor",
          "      for (const kf of property.keyframes) {",
          "        const relativeFrame = kf.frame - anchorFrame;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:110:17",
      "file": "stores/keyframeStore/timing.ts",
      "line": 110,
      "column": 17,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (property?.keyframes && property.keyframes.length >= 2) {",
      "context": {
        "before": [
          "  for (const propPath of propertiesToReverse) {",
          "    const property = findPropertyByPath(layer, propPath);",
          ""
        ],
        "after": [
          "      // Collect values in order",
          "      const values = property.keyframes.map((kf) => kf.value);",
          "      // Reverse the values"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:195:15",
      "file": "stores/keyframeStore/timing.ts",
      "line": 195,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return newKf?.id ?? null;",
      "context": {
        "before": [
          "    frame,",
          "  );",
          ""
        ],
        "after": [
          "}",
          "",
          "// ============================================================================"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/timing.ts:243:35",
      "file": "stores/keyframeStore/timing.ts",
      "line": 243,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (positionProp.keyframes?.[index]) {",
      "context": {
        "before": [
          "    if (result.success) {",
          "      // Update keyframe frames in place",
          "      result.keyframes.forEach((newKf, index) => {"
        ],
        "after": [
          "          positionProp.keyframes[index].frame = newKf.frame;",
          "        }",
          "      });"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:36:16",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 36,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!property?.keyframes) return false;",
      "context": {
        "before": [
          "  if (!layer) return false;",
          "",
          "  const property = findPropertyByPath(layer, propertyPath);"
        ],
        "after": [
          "",
          "  const kfIndex = property.keyframes.findIndex((kf) => kf.id === keyframeId);",
          "  if (kfIndex < 0) return false;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:57:22",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 57,
      "column": 22,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const fps = Number.isFinite(store.fps) && store.fps > 0 ? store.fps : 16;",
      "context": {
        "before": [
          "",
          "  // Convert velocity to value offset",
          "  // Velocity is in units per second, convert to units per frame segment"
        ],
        "after": [
          "  const inVelocityPerFrame = settings.incomingVelocity / fps;",
          "  const outVelocityPerFrame = settings.outgoingVelocity / fps;",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:97:16",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 97,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!property?.keyframes) return null;",
      "context": {
        "before": [
          "  if (!layer) return null;",
          "",
          "  const property = findPropertyByPath(layer, propertyPath);"
        ],
        "after": [
          "",
          "  const kfIndex = property.keyframes.findIndex((kf) => kf.id === keyframeId);",
          "  if (kfIndex < 0) return null;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:115:22",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 115,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "keyframe.inHandle?.enabled && inDuration > 0",
      "context": {
        "before": [
          "",
          "  // Extract influence from handle frame offset (guard against div/0)",
          "  const inInfluence ="
        ],
        "after": [
          "      ? (Math.abs(keyframe.inHandle.frame) / inDuration) * 100",
          "      : 33.33;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:120:23",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 120,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "keyframe.outHandle?.enabled && outDuration > 0",
      "context": {
        "before": [
          "      : 33.33;",
          "",
          "  const outInfluence ="
        ],
        "after": [
          "      ? (keyframe.outHandle.frame / outDuration) * 100",
          "      : 33.33;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:125:22",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 125,
      "column": 22,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const fps = Number.isFinite(store.fps) && store.fps > 0 ? store.fps : 16;",
      "context": {
        "before": [
          "      : 33.33;",
          "",
          "  // Convert value offset back to velocity (validate fps)"
        ],
        "after": [
          "  const inHandleFrame = Math.abs(keyframe.inHandle?.frame ?? 0);",
          "  const inVelocity =",
          "    keyframe.inHandle?.enabled && inHandleFrame > 0"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:126:51",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 126,
      "column": 51,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const inHandleFrame = Math.abs(keyframe.inHandle?.frame ?? 0);",
      "context": {
        "before": [
          "",
          "  // Convert value offset back to velocity (validate fps)",
          "  const fps = Number.isFinite(store.fps) && store.fps > 0 ? store.fps : 16;"
        ],
        "after": [
          "  const inVelocity =",
          "    keyframe.inHandle?.enabled && inHandleFrame > 0",
          "      ? (-keyframe.inHandle.value / inHandleFrame) * fps"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:128:22",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 128,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "keyframe.inHandle?.enabled && inHandleFrame > 0",
      "context": {
        "before": [
          "  const fps = Number.isFinite(store.fps) && store.fps > 0 ? store.fps : 16;",
          "  const inHandleFrame = Math.abs(keyframe.inHandle?.frame ?? 0);",
          "  const inVelocity ="
        ],
        "after": [
          "      ? (-keyframe.inHandle.value / inHandleFrame) * fps",
          "      : 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:132:44",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 132,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const outHandleFrame = keyframe.outHandle?.frame ?? 0;",
      "context": {
        "before": [
          "      ? (-keyframe.inHandle.value / inHandleFrame) * fps",
          "      : 0;",
          ""
        ],
        "after": [
          "  const outVelocity =",
          "    keyframe.outHandle?.enabled && outHandleFrame !== 0",
          "      ? (keyframe.outHandle.value / outHandleFrame) * fps"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/keyframeStore/velocity.ts:134:23",
      "file": "stores/keyframeStore/velocity.ts",
      "line": 134,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "keyframe.outHandle?.enabled && outHandleFrame !== 0",
      "context": {
        "before": [
          "",
          "  const outHandleFrame = keyframe.outHandle?.frame ?? 0;",
          "  const outVelocity ="
        ],
        "after": [
          "      ? (keyframe.outHandle.value / outHandleFrame) * fps",
          "      : 0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/batch.ts:120:15",
      "file": "stores/layerStore/batch.ts",
      "line": 120,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(startScale) || startScale === 0) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Validate scale values (prevent division by zero)"
        ],
        "after": [
          "    storeLogger.warn(",
          "      \"applyExponentialScale: startScale must be a non-zero finite number\",",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/batch.ts:126:15",
      "file": "stores/layerStore/batch.ts",
      "line": 126,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(endScale)) {",
      "context": {
        "before": [
          "    );",
          "    return 0;",
          "  }"
        ],
        "after": [
          "    storeLogger.warn(",
          "      \"applyExponentialScale: endScale must be a finite number\",",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/clipboard.ts:28:2",
      "file": "stores/layerStore/clipboard.ts",
      "line": 28,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  state: LayerState,",
          "  layers: Layer[],",
          "  keyframes: ClipboardKeyframe[] = [],"
        ],
        "after": [
          "  state.clipboard = {",
          "    layers: JSON.parse(JSON.stringify(layers)),",
          "    keyframes: JSON.parse(JSON.stringify(keyframes)),"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/clipboard.ts:41:50",
      "file": "stores/layerStore/clipboard.ts",
      "line": 41,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearClipboard(state: LayerState): void {",
      "context": {
        "before": [
          "/**",
          " * Clear clipboard contents",
          " */"
        ],
        "after": [
          "  state.clipboard = { layers: [], keyframes: [] };",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/clipboard.ts:65:2",
      "file": "stores/layerStore/clipboard.ts",
      "line": 65,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function copySelectedLayers(",
          "  state: LayerState,",
          "  compositorStore: CompositorStoreAccess,"
        ],
        "after": [
          "  const layers = compositorStore.getActiveCompLayers();",
          "  const selection = useSelectionStore();",
          "  const selectedLayers = layers.filter((l: Layer) =>"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/clipboard.ts:125:2",
      "file": "stores/layerStore/clipboard.ts",
      "line": 125,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function cutSelectedLayers(",
          "  state: LayerState,",
          "  compositorStore: CompositorStoreAccess,"
        ],
        "after": [
          "  copySelectedLayers(state, compositorStore);",
          "  const layerIds = [...useSelectionStore().selectedLayerIds];",
          "  for (const id of layerIds) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:71:19",
      "file": "stores/layerStore/crud.ts",
      "line": 71,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "splineData?.strokeWidth ?? 2,",
      "context": {
        "before": [
          "    layerProperties = [",
          "      createAnimatableProperty(",
          "        \"Stroke Width\","
        ],
        "after": [
          "        \"number\",",
          "        \"Stroke\",",
          "      ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:77:19",
      "file": "stores/layerStore/crud.ts",
      "line": 77,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "splineData?.strokeOpacity ?? 100,",
      "context": {
        "before": [
          "      ),",
          "      createAnimatableProperty(",
          "        \"Stroke Opacity\","
        ],
        "after": [
          "        \"number\",",
          "        \"Stroke\",",
          "      ),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:92:9",
      "file": "stores/layerStore/crud.ts",
      "line": 92,
      "column": 9,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "comp?.settings.width || compositorStore.project.composition.width || 1920;",
      "context": {
        "before": [
          "",
          "  // Create transform with position centered in composition",
          "  const compWidth ="
        ],
        "after": [
          "  const compHeight =",
          "    comp?.settings.height || compositorStore.project.composition.height || 1080;",
          "  const centeredTransform = createDefaultTransform();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:94:9",
      "file": "stores/layerStore/crud.ts",
      "line": 94,
      "column": 9,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "comp?.settings.height || compositorStore.project.composition.height || 1080;",
      "context": {
        "before": [
          "  const compWidth =",
          "    comp?.settings.width || compositorStore.project.composition.width || 1920;",
          "  const compHeight ="
        ],
        "after": [
          "  const centeredTransform = createDefaultTransform();",
          "  centeredTransform.position.value = { x: compWidth / 2, y: compHeight / 2 };",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:110:20",
      "file": "stores/layerStore/crud.ts",
      "line": 110,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "endFrame: (comp?.settings.frameCount || 81) - 1,",
      "context": {
        "before": [
          "    threeD: false,",
          "    motionBlur: false,",
          "    startFrame: 0,"
        ],
        "after": [
          "    inPoint: 0,",
          "    outPoint: (comp?.settings.frameCount || 81) - 1,",
          "    parentId: null,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:112:20",
      "file": "stores/layerStore/crud.ts",
      "line": 112,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "outPoint: (comp?.settings.frameCount || 81) - 1,",
      "context": {
        "before": [
          "    startFrame: 0,",
          "    endFrame: (comp?.settings.frameCount || 81) - 1,",
          "    inPoint: 0,"
        ],
        "after": [
          "    parentId: null,",
          "    blendMode: \"normal\",",
          "    opacity: createAnimatableProperty(\"opacity\", 100, \"number\"),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:155:2",
      "file": "stores/layerStore/crud.ts",
      "line": 155,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  options?: DeleteLayerOptions,"
        ],
        "after": [
          "  const layers = compositorStore.getActiveCompLayers();",
          "  const index = layers.findIndex((l: Layer) => l.id === layerId);",
          "  if (index === -1) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:171:25",
      "file": "stores/layerStore/crud.ts",
      "line": 171,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.followPath?.pathLayerId === layerId) {",
      "context": {
        "before": [
          "      layer.matteLayerId = undefined;",
          "      layer.matteType = undefined;",
          "    }"
        ],
        "after": [
          "      layer.followPath.enabled = false;",
          "      layer.followPath.pathLayerId = \"\";",
          "    }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:185:14",
      "file": "stores/layerStore/crud.ts",
      "line": 185,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (options?.onRemoveFromSelection) {",
      "context": {
        "before": [
          "  }",
          "",
          "  // Remove from selection"
        ],
        "after": [
          "    options.onRemoveFromSelection(layerId);",
          "  } else {",
          "    useSelectionStore().removeFromSelection(layerId);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:194:15",
      "file": "stores/layerStore/crud.ts",
      "line": 194,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!options?.skipHistory) {",
      "context": {
        "before": [
          "  clearLayerCache(layerId);",
          "  compositorStore.project.meta.modified = new Date().toISOString();",
          ""
        ],
        "after": [
          "    compositorStore.pushHistory();",
          "  }",
          "}"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:215:2",
      "file": "stores/layerStore/crud.ts",
      "line": 215,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  updates: Partial<Layer>,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l: Layer) => l.id === layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:248:2",
      "file": "stores/layerStore/crud.ts",
      "line": 248,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  dataUpdates: Partial<AnyLayerData> & Record<string, unknown>,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l: Layer) => l.id === layerId);",
          "  if (!layer || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:271:52",
      "file": "stores/layerStore/crud.ts",
      "line": 271,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function regenerateKeyframeIds(layer: Layer): void {",
      "context": {
        "before": [
          " * Regenerate all keyframe IDs in a layer to avoid conflicts",
          " * @internal",
          " */"
        ],
        "after": [
          "  type TransformProp = AnimatableProperty<PropertyValue> | undefined;",
          "",
          "  if (layer.transform) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:281:15",
      "file": "stores/layerStore/crud.ts",
      "line": 281,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (prop?.keyframes) {",
      "context": {
        "before": [
          "    >;",
          "    for (const key of Object.keys(layer.transform)) {",
          "      const prop = transformRecord[key];"
        ],
        "after": [
          "        prop.keyframes = prop.keyframes.map((kf: Keyframe<PropertyValue>) => ({",
          "          ...kf,",
          "          id: crypto.randomUUID(),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:351:2",
      "file": "stores/layerStore/crud.ts",
      "line": 351,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  newIndex: number,"
        ],
        "after": [
          "  if (!Number.isInteger(newIndex) || newIndex < 0) {",
          "    storeLogger.warn(\"moveLayer: Invalid index:\", newIndex);",
          "    return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:383:2",
      "file": "stores/layerStore/crud.ts",
      "line": 383,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  newName: string,"
        ],
        "after": [
          "  const layer = getLayerById(compositorStore, layerId);",
          "  if (!layer) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:428:2",
      "file": "stores/layerStore/crud.ts",
      "line": 428,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    origin?: { x: number; y: number; z?: number };",
          "    anchor?: { x: number; y: number; z?: number }; // Alias for origin",
          "  },"
        ],
        "after": [
          "  const layer = getLayerById(compositorStore, layerId);",
          "  if (!layer?.transform) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:430:13",
      "file": "stores/layerStore/crud.ts",
      "line": 430,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!layer?.transform) return;",
      "context": {
        "before": [
          "  },",
          "): void {",
          "  const layer = getLayerById(compositorStore, layerId);"
        ],
        "after": [
          "",
          "  // Cannot update transform of locked layers",
          "  if (layer.locked) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:441:17",
      "file": "stores/layerStore/crud.ts",
      "line": 441,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (updates.position !== undefined && layer.transform.position) {",
          "    // Validate position values are finite",
          "    const { x, y, z } = updates.position;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid position values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:441:40",
      "file": "stores/layerStore/crud.ts",
      "line": 441,
      "column": 40,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (updates.position !== undefined && layer.transform.position) {",
          "    // Validate position values are finite",
          "    const { x, y, z } = updates.position;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid position values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:441:83",
      "file": "stores/layerStore/crud.ts",
      "line": 441,
      "column": 83,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (updates.position !== undefined && layer.transform.position) {",
          "    // Validate position values are finite",
          "    const { x, y, z } = updates.position;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid position values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:450:17",
      "file": "stores/layerStore/crud.ts",
      "line": 450,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (updates.scale !== undefined && layer.transform.scale) {",
          "    // Validate scale values are finite",
          "    const { x, y, z } = updates.scale;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid scale values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:450:40",
      "file": "stores/layerStore/crud.ts",
      "line": 450,
      "column": 40,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (updates.scale !== undefined && layer.transform.scale) {",
          "    // Validate scale values are finite",
          "    const { x, y, z } = updates.scale;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid scale values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:450:83",
      "file": "stores/layerStore/crud.ts",
      "line": 450,
      "column": 83,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (updates.scale !== undefined && layer.transform.scale) {",
          "    // Validate scale values are finite",
          "    const { x, y, z } = updates.scale;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid scale values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:458:17",
      "file": "stores/layerStore/crud.ts",
      "line": 458,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(updates.rotation)) {",
      "context": {
        "before": [
          "  }",
          "  if (updates.rotation !== undefined && layer.transform.rotation) {",
          "    // Validate rotation is finite"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid rotation value (NaN/Infinity)\", updates.rotation);",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:466:17",
      "file": "stores/layerStore/crud.ts",
      "line": 466,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(updates.opacity) || updates.opacity < 0 || updates.opacity > 100) {",
      "context": {
        "before": [
          "  }",
          "  if (updates.opacity !== undefined) {",
          "    // Validate opacity is finite and in valid range"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid opacity value\", updates.opacity);",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:484:17",
      "file": "stores/layerStore/crud.ts",
      "line": 484,
      "column": 17,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (originUpdate !== undefined && layer.transform.origin) {",
          "    // Validate origin values are finite",
          "    const { x, y, z } = originUpdate;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid origin values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:484:40",
      "file": "stores/layerStore/crud.ts",
      "line": 484,
      "column": 40,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (originUpdate !== undefined && layer.transform.origin) {",
          "    // Validate origin values are finite",
          "    const { x, y, z } = originUpdate;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid origin values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:484:83",
      "file": "stores/layerStore/crud.ts",
      "line": 484,
      "column": 83,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(x) || !Number.isFinite(y) || (z !== undefined && !Number.isFinite(z))) {",
      "context": {
        "before": [
          "  if (originUpdate !== undefined && layer.transform.origin) {",
          "    // Validate origin values are finite",
          "    const { x, y, z } = originUpdate;"
        ],
        "after": [
          "      storeLogger.warn(\"updateLayerTransform: Invalid origin values (NaN/Infinity)\", { x, y, z });",
          "      return;",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:505:72",
      "file": "stores/layerStore/crud.ts",
      "line": 505,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function toggleLayerLock(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " *",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  const selectedIds = selectionStore.selectedLayerIds;",
          "  if (selectedIds.length === 0) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:530:2",
      "file": "stores/layerStore/crud.ts",
      "line": 530,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          " */",
          "export function toggleLayerVisibility(",
          "  compositorStore: CompositorStoreAccess,"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  const selectedIds = selectionStore.selectedLayerIds;",
          "  if (selectedIds.length === 0) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:554:72",
      "file": "stores/layerStore/crud.ts",
      "line": 554,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function toggleLayerSolo(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " *",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  const selectedIds = selectionStore.selectedLayerIds;",
          "  if (selectedIds.length === 0) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:581:69",
      "file": "stores/layerStore/crud.ts",
      "line": 581,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function bringToFront(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " *",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  const selectedIds = selectionStore.selectedLayerIds;",
          "  if (selectedIds.length === 0) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:626:67",
      "file": "stores/layerStore/crud.ts",
      "line": 626,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function sendToBack(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " *",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  const selectedIds = selectionStore.selectedLayerIds;",
          "  if (selectedIds.length === 0) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:671:69",
      "file": "stores/layerStore/crud.ts",
      "line": 671,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function bringForward(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " *",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  const selectedIds = selectionStore.selectedLayerIds;",
          "  if (selectedIds.length === 0) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/crud.ts:712:69",
      "file": "stores/layerStore/crud.ts",
      "line": 712,
      "column": 69,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function sendBackward(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " *",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  const selectedIds = selectionStore.selectedLayerIds;",
          "  if (selectedIds.length === 0) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:32:2",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 32,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  parentId: string | null,"
        ],
        "after": [
          "  const layers = compositorStore.getActiveCompLayers();",
          "  const layer = layers.find((l: Layer) => l.id === layerId);",
          "  if (!layer) return;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:77:2",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 77,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function toggleLayer3D(",
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,"
        ],
        "after": [
          "  const layer = compositorStore",
          "    .getActiveCompLayers()",
          "    .find((l: Layer) => l.id === layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:154:2",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 154,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  _compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  addToSelection = false,"
        ],
        "after": [
          "  const selection = useSelectionStore();",
          "  if (addToSelection) {",
          "    selection.addToSelection(layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:171:2",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 171,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function deselectLayer(",
          "  _compositorStore: CompositorStoreAccess,",
          "  layerId: string,"
        ],
        "after": [
          "  useSelectionStore().removeFromSelection(layerId);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:179:72",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 179,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function clearSelection(_compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " * Clear all layer selection (delegates to selectionStore)",
          " * @param _compositorStore - Unused, kept for API consistency",
          " */"
        ],
        "after": [
          "  useSelectionStore().clearLayerSelection();",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:187:72",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 187,
      "column": 72,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function selectAllLayers(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " * Select all layers in the active composition",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const layers = compositorStore.getActiveCompLayers?.() ?? [];",
          "  const selection = useSelectionStore();",
          "  selection.selectLayers(layers.map((l: Layer) => l.id));"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:188:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 188,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          " * @param compositorStore - The compositor store instance",
          " */",
          "export function selectAllLayers(compositorStore: CompositorStoreAccess): void {"
        ],
        "after": [
          "  const selection = useSelectionStore();",
          "  selection.selectLayers(layers.map((l: Layer) => l.id));",
          "}"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:197:77",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 197,
      "column": 77,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function deleteSelectedLayers(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          " * Delete all selected layers",
          " * @param compositorStore - The compositor store instance",
          " */"
        ],
        "after": [
          "  const selection = useSelectionStore();",
          "  const layerIds = [...selection.selectedLayerIds];",
          "  "
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:251:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 251,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "): Layer | null {"
        ],
        "after": [
          "  return layers.find((l: Layer) => l.id === layerId) ?? null;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:265:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 265,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => l.parentId === layerId);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:298:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 298,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getVisibleLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => l.visible);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:312:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 312,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  hideMinimized = false,",
          "): Layer[] {"
        ],
        "after": [
          "  if (hideMinimized) {",
          "    return layers.filter((l: Layer) => !l.minimized);",
          "  }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:327:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 327,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getRootLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => !l.parentId);",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:339:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 339,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getCameraLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  return layers.filter((l: Layer) => l.type === \"camera\");",
          "}",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:351:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 351,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "export function getSelectedLayers(",
          "  compositorStore: CompositorStoreAccess,",
          "): Layer[] {"
        ],
        "after": [
          "  const selectionStore = useSelectionStore();",
          "  return layers.filter((l: Layer) =>",
          "    selectionStore.selectedLayerIds.includes(l.id),"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/hierarchy.ts:368:53",
      "file": "stores/layerStore/hierarchy.ts",
      "line": 368,
      "column": 53,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = compositorStore.getActiveCompLayers?.() ?? [];",
      "context": {
        "before": [
          "): Layer | null {",
          "  const selectionStore = useSelectionStore();",
          "  if (selectionStore.selectedLayerIds.length !== 1) return null;"
        ],
        "after": [
          "  return (",
          "    layers.find((l: Layer) => l.id === selectionStore.selectedLayerIds[0]) ||",
          "    null"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:183:71",
      "file": "stores/layerStore/index.ts",
      "line": 183,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setClipboard(layers: Layer[], keyframes: ClipboardKeyframe[] = []): void {",
      "context": {
        "before": [
          "    // CLIPBOARD STATE",
          "    // ========================================================================",
          ""
        ],
        "after": [
          "      setClipboardImpl(this.$state, layers, keyframes);",
          "    },",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:187:21",
      "file": "stores/layerStore/index.ts",
      "line": 187,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearClipboard(): void {",
      "context": {
        "before": [
          "      setClipboardImpl(this.$state, layers, keyframes);",
          "    },",
          ""
        ],
        "after": [
          "      clearClipboardImpl(this.$state);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:211:6",
      "file": "stores/layerStore/index.ts",
      "line": 211,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      options?: DeleteLayerOptions,"
        ],
        "after": [
          "      deleteLayerImpl(compositorStore, layerId, options);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:219:6",
      "file": "stores/layerStore/index.ts",
      "line": 219,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      updates: Partial<Layer>,"
        ],
        "after": [
          "      updateLayerImpl(compositorStore, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:227:6",
      "file": "stores/layerStore/index.ts",
      "line": 227,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      dataUpdates: Partial<AnyLayerData> & Record<string, unknown>,"
        ],
        "after": [
          "      updateLayerDataImpl(compositorStore, layerId, dataUpdates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:242:6",
      "file": "stores/layerStore/index.ts",
      "line": 242,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      newIndex: number,"
        ],
        "after": [
          "      moveLayerImpl(compositorStore, layerId, newIndex);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:250:6",
      "file": "stores/layerStore/index.ts",
      "line": 250,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      newName: string,"
        ],
        "after": [
          "      renameLayerImpl(compositorStore, layerId, newName);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:265:6",
      "file": "stores/layerStore/index.ts",
      "line": 265,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        origin?: { x: number; y: number; z?: number };",
          "        anchor?: { x: number; y: number; z?: number };",
          "      },"
        ],
        "after": [
          "      updateLayerTransformImpl(compositorStore, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:269:60",
      "file": "stores/layerStore/index.ts",
      "line": 269,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayerLock(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      updateLayerTransformImpl(compositorStore, layerId, updates);",
          "    },",
          ""
        ],
        "after": [
          "      toggleLayerLockImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:273:66",
      "file": "stores/layerStore/index.ts",
      "line": 273,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayerVisibility(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      toggleLayerLockImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      toggleLayerVisibilityImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:277:60",
      "file": "stores/layerStore/index.ts",
      "line": 277,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayerSolo(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      toggleLayerVisibilityImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      toggleLayerSoloImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:281:57",
      "file": "stores/layerStore/index.ts",
      "line": 281,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "bringToFront(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      toggleLayerSoloImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      bringToFrontImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:285:55",
      "file": "stores/layerStore/index.ts",
      "line": 285,
      "column": 55,
      "pattern": ": void",
      "severity": "LOW",
      "code": "sendToBack(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      bringToFrontImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      sendToBackImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:289:57",
      "file": "stores/layerStore/index.ts",
      "line": 289,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "bringForward(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      sendToBackImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      bringForwardImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:293:57",
      "file": "stores/layerStore/index.ts",
      "line": 293,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "sendBackward(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      bringForwardImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      sendBackwardImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:298:41",
      "file": "stores/layerStore/index.ts",
      "line": 298,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "_regenerateKeyframeIds(layer: Layer): void {",
      "context": {
        "before": [
          "    },",
          "",
          "    /** @internal Used by clipboard operations */"
        ],
        "after": [
          "      regenerateKeyframeIds(layer);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:306:63",
      "file": "stores/layerStore/index.ts",
      "line": 306,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "copySelectedLayers(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "    // CLIPBOARD OPERATIONS",
          "    // ========================================================================",
          ""
        ],
        "after": [
          "      copySelectedLayersImpl(this.$state, compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:314:62",
      "file": "stores/layerStore/index.ts",
      "line": 314,
      "column": 62,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cutSelectedLayers(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      return pasteLayersImpl(this.$state, compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      cutSelectedLayersImpl(this.$state, compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:326:6",
      "file": "stores/layerStore/index.ts",
      "line": 326,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      parentId: string | null,"
        ],
        "after": [
          "      setLayerParentImpl(compositorStore, layerId, parentId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:330:75",
      "file": "stores/layerStore/index.ts",
      "line": 330,
      "column": 75,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayer3D(compositorStore: CompositorStoreAccess, layerId: string): void {",
      "context": {
        "before": [
          "      setLayerParentImpl(compositorStore, layerId, parentId);",
          "    },",
          ""
        ],
        "after": [
          "      toggleLayer3DImpl(compositorStore, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:342:6",
      "file": "stores/layerStore/index.ts",
      "line": 342,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      addToSelection = false,"
        ],
        "after": [
          "      selectLayerImpl(compositorStore, layerId, addToSelection);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:346:75",
      "file": "stores/layerStore/index.ts",
      "line": 346,
      "column": 75,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deselectLayer(compositorStore: CompositorStoreAccess, layerId: string): void {",
      "context": {
        "before": [
          "      selectLayerImpl(compositorStore, layerId, addToSelection);",
          "    },",
          ""
        ],
        "after": [
          "      deselectLayerImpl(compositorStore, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:350:59",
      "file": "stores/layerStore/index.ts",
      "line": 350,
      "column": 59,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearSelection(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      deselectLayerImpl(compositorStore, layerId);",
          "    },",
          ""
        ],
        "after": [
          "      clearSelectionImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:354:60",
      "file": "stores/layerStore/index.ts",
      "line": 354,
      "column": 60,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectAllLayers(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      clearSelectionImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      selectAllLayersImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:358:65",
      "file": "stores/layerStore/index.ts",
      "line": 358,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "deleteSelectedLayers(compositorStore: CompositorStoreAccess): void {",
      "context": {
        "before": [
          "      selectAllLayersImpl(compositorStore);",
          "    },",
          ""
        ],
        "after": [
          "      deleteSelectedLayersImpl(compositorStore);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:436:6",
      "file": "stores/layerStore/index.ts",
      "line": 436,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      updates: Partial<NestedCompData>,"
        ],
        "after": [
          "      updateNestedCompLayerDataImpl(compositorStore, layerId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:448:6",
      "file": "stores/layerStore/index.ts",
      "line": 448,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      newSource: LayerSourceReplacement,"
        ],
        "after": [
          "      replaceLayerSourceImpl(compositorStore, layerId, newSource);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:480:6",
      "file": "stores/layerStore/index.ts",
      "line": 480,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      options: TimeStretchOptions,"
        ],
        "after": [
          "      timeStretchLayerImpl(compositorStore, layerId, options);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:484:74",
      "file": "stores/layerStore/index.ts",
      "line": 484,
      "column": 74,
      "pattern": ": void",
      "severity": "LOW",
      "code": "reverseLayer(compositorStore: CompositorStoreAccess, layerId: string): void {",
      "context": {
        "before": [
          "      timeStretchLayerImpl(compositorStore, layerId, options);",
          "    },",
          ""
        ],
        "after": [
          "      reverseLayerImpl(compositorStore, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:491:6",
      "file": "stores/layerStore/index.ts",
      "line": 491,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    freezeFrameAtPlayhead(",
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,"
        ],
        "after": [
          "      freezeFrameAtPlayheadImpl(compositorStore, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:506:6",
      "file": "stores/layerStore/index.ts",
      "line": 506,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      fps?: number,"
        ],
        "after": [
          "      enableSpeedMapImpl(compositorStore, layerId, fps);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:513:6",
      "file": "stores/layerStore/index.ts",
      "line": 513,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    disableSpeedMap(",
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,"
        ],
        "after": [
          "      disableSpeedMapImpl(compositorStore, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:585:6",
      "file": "stores/layerStore/index.ts",
      "line": 585,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      point: SplineControlPoint,"
        ],
        "after": [
          "      addSplineControlPointImpl(compositorStore, layerId, point);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:594:6",
      "file": "stores/layerStore/index.ts",
      "line": 594,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      point: SplineControlPoint,",
          "      index: number,"
        ],
        "after": [
          "      insertSplineControlPointImpl(compositorStore, layerId, point, index);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:603:6",
      "file": "stores/layerStore/index.ts",
      "line": 603,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      pointId: string,",
          "      updates: Partial<SplineControlPoint>,"
        ],
        "after": [
          "      updateSplineControlPointImpl(compositorStore, layerId, pointId, updates);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:611:6",
      "file": "stores/layerStore/index.ts",
      "line": 611,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      pointId: string,"
        ],
        "after": [
          "      deleteSplineControlPointImpl(compositorStore, layerId, pointId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:618:6",
      "file": "stores/layerStore/index.ts",
      "line": 618,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    enableSplineAnimation(",
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,"
        ],
        "after": [
          "      enableSplineAnimationImpl(compositorStore, layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:635:6",
      "file": "stores/layerStore/index.ts",
      "line": 635,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        | \"handleOut.x\"",
          "        | \"handleOut.y\",",
          "      frame: number,"
        ],
        "after": [
          "      addSplinePointKeyframeImpl(compositorStore, layerId, pointId, property, frame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:644:6",
      "file": "stores/layerStore/index.ts",
      "line": 644,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      pointId: string,",
          "      frame: number,"
        ],
        "after": [
          "      addSplinePointPositionKeyframeImpl(compositorStore, layerId, pointId, frame);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:656:6",
      "file": "stores/layerStore/index.ts",
      "line": 656,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      y: number,",
          "      frame: number,",
          "      addKeyframe: boolean = false,"
        ],
        "after": [
          "      updateSplinePointWithKeyframeImpl(",
          "        compositorStore,",
          "        layerId,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:695:6",
      "file": "stores/layerStore/index.ts",
      "line": 695,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      tolerance: number,"
        ],
        "after": [
          "      simplifySplineImpl(compositorStore, layerId, tolerance);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/index.ts:703:6",
      "file": "stores/layerStore/index.ts",
      "line": 703,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      compositorStore: CompositorStoreAccess,",
          "      layerId: string,",
          "      amount: number,"
        ],
        "after": [
          "      smoothSplineHandlesImpl(compositorStore, layerId, amount);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/pathOperations.ts:130:48",
      "file": "stores/layerStore/pathOperations.ts",
      "line": 130,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const prevFrame = i > 0 ? (keyframes[i - 1]?.frame ?? 0) : 0;",
      "context": {
        "before": [
          "    const point = sampledPoints[i];",
          "",
          "    // Calculate frame distance to neighboring keyframes for handle influence"
        ],
        "after": [
          "    const nextFrame =",
          "      i < sampledPoints.length - 1",
          "        ? Math.round("
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:150:2",
      "file": "stores/layerStore/specialized.ts",
      "line": 150,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  newSource: LayerSourceReplacement,"
        ],
        "after": [
          "  const layer = compositorStore",
          "    .getActiveCompLayers()",
          "    .find((l: Layer) => l.id === layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:208:38",
      "file": "stores/layerStore/specialized.ts",
      "line": 208,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const ext = path.split(\".\").pop()?.toLowerCase() || \"\";",
      "context": {
        "before": [
          "  } else if (newSource.type === \"asset\" && assetId) {",
          "    // Generic asset replacement - determine new type from asset or file extension",
          "    const path = newSource.path || \"\";"
        ],
        "after": [
          "    const imageExts = [\"png\", \"jpg\", \"jpeg\", \"gif\", \"webp\", \"svg\"];",
          "    const videoExts = [\"mp4\", \"webm\", \"mov\", \"avi\"];",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:314:9",
      "file": "stores/layerStore/specialized.ts",
      "line": 314,
      "column": 9,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "comp?.settings.width || 1024,",
      "context": {
        "before": [
          "  // Create the camera object",
          "  const camera = createDefaultCamera(",
          "    cameraId,"
        ],
        "after": [
          "    comp?.settings.height || 1024,",
          "  );",
          "  camera.name = cameraName;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:315:9",
      "file": "stores/layerStore/specialized.ts",
      "line": 315,
      "column": 9,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "comp?.settings.height || 1024,",
      "context": {
        "before": [
          "  const camera = createDefaultCamera(",
          "    cameraId,",
          "    comp?.settings.width || 1024,"
        ],
        "after": [
          "  );",
          "  camera.name = cameraName;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/specialized.ts:434:2",
      "file": "stores/layerStore/specialized.ts",
      "line": 434,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  updates: Partial<NestedCompData>,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"nestedComp\") return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:49:2",
      "file": "stores/layerStore/spline.ts",
      "line": 49,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  point: SplineControlPoint,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:69:2",
      "file": "stores/layerStore/spline.ts",
      "line": 69,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  layerId: string,",
          "  point: SplineControlPoint,",
          "  index: number,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:94:2",
      "file": "stores/layerStore/spline.ts",
      "line": 94,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  layerId: string,",
          "  pointId: string,",
          "  updates: Partial<SplineControlPoint>,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:99:41",
      "file": "stores/layerStore/spline.ts",
      "line": 99,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const point = splineData.controlPoints?.find((p) => p.id === pointId);",
      "context": {
        "before": [
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          "",
          "  const splineData = layer.data as SplineData;"
        ],
        "after": [
          "  if (!point) return;",
          "",
          "  Object.assign(point, updates);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:113:2",
      "file": "stores/layerStore/spline.ts",
      "line": 113,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  pointId: string,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:138:2",
      "file": "stores/layerStore/spline.ts",
      "line": 138,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function enableSplineAnimation(",
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:187:2",
      "file": "stores/layerStore/spline.ts",
      "line": 187,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    | \"handleOut.x\"",
          "    | \"handleOut.y\",",
          "  frame: number,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:199:49",
      "file": "stores/layerStore/spline.ts",
      "line": 199,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const point = splineData.animatedControlPoints?.find((p) => p.id === pointId);",
      "context": {
        "before": [
          "  }",
          "",
          "  // Find the animated control point"
        ],
        "after": [
          "  if (!point) {",
          "    storeLogger.warn(\"Control point not found:\", pointId);",
          "    return;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:219:38",
      "file": "stores/layerStore/spline.ts",
      "line": 219,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatableProp = point.handleIn?.x;",
      "context": {
        "before": [
          "      animatableProp = point.depth;",
          "      break;",
          "    case \"handleIn.x\":"
        ],
        "after": [
          "      break;",
          "    case \"handleIn.y\":",
          "      animatableProp = point.handleIn?.y;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:222:38",
      "file": "stores/layerStore/spline.ts",
      "line": 222,
      "column": 38,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatableProp = point.handleIn?.y;",
      "context": {
        "before": [
          "      animatableProp = point.handleIn?.x;",
          "      break;",
          "    case \"handleIn.y\":"
        ],
        "after": [
          "      break;",
          "    case \"handleOut.x\":",
          "      animatableProp = point.handleOut?.x;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:225:39",
      "file": "stores/layerStore/spline.ts",
      "line": 225,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatableProp = point.handleOut?.x;",
      "context": {
        "before": [
          "      animatableProp = point.handleIn?.y;",
          "      break;",
          "    case \"handleOut.x\":"
        ],
        "after": [
          "      break;",
          "    case \"handleOut.y\":",
          "      animatableProp = point.handleOut?.y;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:228:39",
      "file": "stores/layerStore/spline.ts",
      "line": 228,
      "column": 39,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "animatableProp = point.handleOut?.y;",
      "context": {
        "before": [
          "      animatableProp = point.handleOut?.x;",
          "      break;",
          "    case \"handleOut.y\":"
        ],
        "after": [
          "      break;",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:282:2",
      "file": "stores/layerStore/spline.ts",
      "line": 282,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  layerId: string,",
          "  pointId: string,",
          "  frame: number,"
        ],
        "after": [
          "  addSplinePointKeyframe(compositorStore, layerId, pointId, \"x\", frame);",
          "  addSplinePointKeyframe(compositorStore, layerId, pointId, \"y\", frame);",
          "}"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:299:2",
      "file": "stores/layerStore/spline.ts",
      "line": 299,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  y: number,",
          "  frame: number,",
          "  addKeyframe: boolean = false,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:320:49",
      "file": "stores/layerStore/spline.ts",
      "line": 320,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const staticPoint = splineData.controlPoints?.find((p) => p.id === pointId);",
      "context": {
        "before": [
          "    }",
          "",
          "    // Also update the static version for backwards compatibility"
        ],
        "after": [
          "    if (staticPoint) {",
          "      staticPoint.x = x;",
          "      staticPoint.y = y;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:327:43",
      "file": "stores/layerStore/spline.ts",
      "line": 327,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const point = splineData.controlPoints?.find((p) => p.id === pointId);",
      "context": {
        "before": [
          "    }",
          "  } else {",
          "    // Update static control point"
        ],
        "after": [
          "    if (!point) return;",
          "",
          "    point.x = x;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:433:18",
      "file": "stores/layerStore/spline.ts",
      "line": 433,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (point.depth?.keyframes.length) return true;",
      "context": {
        "before": [
          "  // Check if any property has keyframes",
          "  if (point.x.keyframes.length > 0) return true;",
          "  if (point.y.keyframes.length > 0) return true;"
        ],
        "after": [
          "  if (point.handleIn?.x.keyframes.length) return true;",
          "  if (point.handleIn?.y.keyframes.length) return true;",
          "  if (point.handleOut?.x.keyframes.length) return true;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:434:21",
      "file": "stores/layerStore/spline.ts",
      "line": 434,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (point.handleIn?.x.keyframes.length) return true;",
      "context": {
        "before": [
          "  if (point.x.keyframes.length > 0) return true;",
          "  if (point.y.keyframes.length > 0) return true;",
          "  if (point.depth?.keyframes.length) return true;"
        ],
        "after": [
          "  if (point.handleIn?.y.keyframes.length) return true;",
          "  if (point.handleOut?.x.keyframes.length) return true;",
          "  if (point.handleOut?.y.keyframes.length) return true;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:435:21",
      "file": "stores/layerStore/spline.ts",
      "line": 435,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (point.handleIn?.y.keyframes.length) return true;",
      "context": {
        "before": [
          "  if (point.y.keyframes.length > 0) return true;",
          "  if (point.depth?.keyframes.length) return true;",
          "  if (point.handleIn?.x.keyframes.length) return true;"
        ],
        "after": [
          "  if (point.handleOut?.x.keyframes.length) return true;",
          "  if (point.handleOut?.y.keyframes.length) return true;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:436:22",
      "file": "stores/layerStore/spline.ts",
      "line": 436,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (point.handleOut?.x.keyframes.length) return true;",
      "context": {
        "before": [
          "  if (point.depth?.keyframes.length) return true;",
          "  if (point.handleIn?.x.keyframes.length) return true;",
          "  if (point.handleIn?.y.keyframes.length) return true;"
        ],
        "after": [
          "  if (point.handleOut?.y.keyframes.length) return true;",
          "",
          "  return false;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:437:22",
      "file": "stores/layerStore/spline.ts",
      "line": 437,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (point.handleOut?.y.keyframes.length) return true;",
      "context": {
        "before": [
          "  if (point.handleIn?.x.keyframes.length) return true;",
          "  if (point.handleIn?.y.keyframes.length) return true;",
          "  if (point.handleOut?.x.keyframes.length) return true;"
        ],
        "after": [
          "",
          "  return false;",
          "}"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:459:2",
      "file": "stores/layerStore/spline.ts",
      "line": 459,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  tolerance: number,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/spline.ts:582:2",
      "file": "stores/layerStore/spline.ts",
      "line": 582,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  amount: number,"
        ],
        "after": [
          "  const layer = compositorStore.getActiveCompLayers().find((l) => l.id === layerId);",
          "  if (!layer || layer.type !== \"spline\" || !layer.data) return;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/textConversion.ts:132:37",
      "file": "stores/layerStore/textConversion.ts",
      "line": 132,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "closed: charGroup.paths[0]?.closed ?? true,",
      "context": {
        "before": [
          "        const splineData: SplineData = {",
          "          pathData: \"\",",
          "          controlPoints: allControlPoints,"
        ],
        "after": [
          "          stroke: textData.stroke || \"\",",
          "          strokeWidth: textData.strokeWidth || 0,",
          "          fill: textData.fill || \"#ffffff\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/textConversion.ts:185:35",
      "file": "stores/layerStore/textConversion.ts",
      "line": 185,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "closed: result.allPaths[0]?.closed ?? true,",
      "context": {
        "before": [
          "      const splineData: SplineData = {",
          "        pathData: \"\",",
          "        controlPoints: allControlPoints,"
        ],
        "after": [
          "        stroke: textData.stroke || \"\",",
          "        strokeWidth: textData.strokeWidth || 0,",
          "        fill: textData.fill || \"#ffffff\","
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:41:2",
      "file": "stores/layerStore/time.ts",
      "line": 41,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  options: TimeStretchOptions,"
        ],
        "after": [
          "  const layer = compositorStore",
          "    .getActiveCompLayers()",
          "    .find((l: Layer) => l.id === layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:90:2",
      "file": "stores/layerStore/time.ts",
      "line": 90,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function reverseLayer(",
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,"
        ],
        "after": [
          "  const layer = compositorStore",
          "    .getActiveCompLayers()",
          "    .find((l: Layer) => l.id === layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:133:2",
      "file": "stores/layerStore/time.ts",
      "line": 133,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function freezeFrameAtPlayhead(",
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,"
        ],
        "after": [
          "  const layer = compositorStore",
          "    .getActiveCompLayers()",
          "    .find((l: Layer) => l.id === layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:152:12",
      "file": "stores/layerStore/time.ts",
      "line": 152,
      "column": 12,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(compositorStore.fps) && compositorStore.fps! > 0",
      "context": {
        "before": [
          "  const currentFrame = compositorStore.currentFrame ?? 0;",
          "  // Validate fps (nullish coalescing doesn't catch NaN)",
          "  const fps ="
        ],
        "after": [
          "      ? compositorStore.fps!",
          "      : 16;",
          "  const sourceTime = currentFrame / fps;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:183:44",
      "file": "stores/layerStore/time.ts",
      "line": 183,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "compositorStore.getActiveComp()?.settings.frameCount ??",
      "context": {
        "before": [
          "        id: `kf_freeze_end_${Date.now() + 1}`,",
          "        frame:",
          "          (layer.endFrame ??"
        ],
        "after": [
          "            81) - 1,",
          "        value: sourceTime,",
          "        interpolation: \"hold\" as const,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:230:36",
      "file": "stores/layerStore/time.ts",
      "line": 230,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "compositorStore.getActiveComp()?.settings.frameCount ??",
      "context": {
        "before": [
          "  const startFrame = layer.startFrame ?? 0;",
          "  const endFrame =",
          "    layer.endFrame ??"
        ],
        "after": [
          "    81;",
          "",
          "  if (currentFrame <= startFrame || currentFrame >= endFrame) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:254:14",
      "file": "stores/layerStore/time.ts",
      "line": 254,
      "column": 14,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(compositorStore.fps) && compositorStore.fps! > 0",
      "context": {
        "before": [
          "  if (isLayerOfType(newLayer, \"video\") && newLayer.data) {",
          "    // Validate fps (nullish coalescing doesn't catch NaN)",
          "    const fps ="
        ],
        "after": [
          "        ? compositorStore.fps!",
          "        : 16;",
          "    const originalStartTime = newLayer.data.startTime ?? 0;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:291:2",
      "file": "stores/layerStore/time.ts",
      "line": 291,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,",
          "  fps?: number,"
        ],
        "after": [
          "  const layer = compositorStore",
          "    .getActiveCompLayers()",
          "    .find((l: Layer) => l.id === layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:311:36",
      "file": "stores/layerStore/time.ts",
      "line": 311,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "compositorStore.getActiveComp()?.settings.frameCount ??",
      "context": {
        "before": [
          "  const layerStartFrame = layer.startFrame ?? 0;",
          "  const layerEndFrame =",
          "    layer.endFrame ??"
        ],
        "after": [
          "    81;",
          "",
          "  if (layer.data) {"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:369:2",
      "file": "stores/layerStore/time.ts",
      "line": 369,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function disableSpeedMap(",
          "  compositorStore: CompositorStoreAccess,",
          "  layerId: string,"
        ],
        "after": [
          "  const layer = compositorStore",
          "    .getActiveCompLayers()",
          "    .find((l: Layer) => l.id === layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/layerStore/time.ts:420:34",
      "file": "stores/layerStore/time.ts",
      "line": 420,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const isCurrentlyEnabled = data?.speedMapEnabled ?? false;",
      "context": {
        "before": [
          "",
          "  type ToggleableData = { speedMapEnabled?: boolean };",
          "  const data = layer.data as ToggleableData | null;"
        ],
        "after": [
          "",
          "  if (isCurrentlyEnabled) {",
          "    disableSpeedMap(compositorStore, layerId);"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:24:15",
      "file": "stores/markerStore.ts",
      "line": 24,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(a) || !Number.isFinite(b)) return false;",
      "context": {
        "before": [
          " * Returns false if either value is not finite.\r",
          " */\r",
          "function framesEqual(a: number, b: number): boolean {\r"
        ],
        "after": [
          "  return a === b;\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:24:38",
      "file": "stores/markerStore.ts",
      "line": 24,
      "column": 38,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(a) || !Number.isFinite(b)) return false;",
      "context": {
        "before": [
          " * Returns false if either value is not finite.\r",
          " */\r",
          "function framesEqual(a: number, b: number): boolean {\r"
        ],
        "after": [
          "  return a === b;\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:174:16",
      "file": "stores/markerStore.ts",
      "line": 174,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!comp?.markers) return false;",
      "context": {
        "before": [
          "     */\r",
          "    removeMarker(store: MarkerStoreAccess, markerId: string): boolean {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "\r",
          "      const index = comp.markers.findIndex((m) => m.id === markerId);\r",
          "      if (index < 0) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:196:16",
      "file": "stores/markerStore.ts",
      "line": 196,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!comp?.markers) return false;",
      "context": {
        "before": [
          "     */\r",
          "    removeMarkerAtFrame(store: MarkerStoreAccess, frame: number): boolean {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "\r",
          "      const index = comp.markers.findIndex((m) => framesEqual(m.frame, frame));\r",
          "      if (index < 0) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:219:16",
      "file": "stores/markerStore.ts",
      "line": 219,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!comp?.markers) return 0;",
      "context": {
        "before": [
          "     */\r",
          "    removeMarkersByColor(store: MarkerStoreAccess, color: string): number {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "\r",
          "      const originalLength = comp.markers.length;\r",
          "      comp.markers = comp.markers.filter((m) => m.color !== color);\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:253:16",
      "file": "stores/markerStore.ts",
      "line": 253,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!comp?.markers) return false;",
      "context": {
        "before": [
          "      updates: Partial<Omit<Marker, \"id\">>,\r",
          "    ): boolean {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "\r",
          "      const marker = comp.markers.find((m) => m.id === markerId);\r",
          "      if (!marker) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:259:49",
      "file": "stores/markerStore.ts",
      "line": 259,
      "column": 49,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (updates.frame !== undefined && Number.isFinite(updates.frame)) {",
      "context": {
        "before": [
          "      if (!marker) return false;\r",
          "\r",
          "      // Apply updates (validate frame to prevent NaN)\r"
        ],
        "after": [
          "        marker.frame = updates.frame;\r",
          "      }\r",
          "      if (updates.label !== undefined) marker.label = updates.label;\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:284:43",
      "file": "stores/markerStore.ts",
      "line": 284,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearMarkers(store: MarkerStoreAccess): void {",
      "context": {
        "before": [
          "     *\r",
          "     * @param store - Compositor store access\r",
          "     */\r"
        ],
        "after": [
          "      const comp = store.getActiveComp();\r",
          "      if (!comp) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:307:18",
      "file": "stores/markerStore.ts",
      "line": 307,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.markers || [];",
      "context": {
        "before": [
          "     */\r",
          "    getMarkers(store: MarkerStoreAccess): Marker[] {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    /**\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:319:18",
      "file": "stores/markerStore.ts",
      "line": 319,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.markers?.find((m) => m.id === markerId) || null;",
      "context": {
        "before": [
          "     */\r",
          "    getMarker(store: MarkerStoreAccess, markerId: string): Marker | null {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    /**\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:319:27",
      "file": "stores/markerStore.ts",
      "line": 319,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.markers?.find((m) => m.id === markerId) || null;",
      "context": {
        "before": [
          "     */\r",
          "    getMarker(store: MarkerStoreAccess, markerId: string): Marker | null {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    /**\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:331:18",
      "file": "stores/markerStore.ts",
      "line": 331,
      "column": 18,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.markers?.find((m) => m.frame === frame) || null;",
      "context": {
        "before": [
          "     */\r",
          "    getMarkerAtFrame(store: MarkerStoreAccess, frame: number): Marker | null {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    /**\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:331:27",
      "file": "stores/markerStore.ts",
      "line": 331,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return comp?.markers?.find((m) => m.frame === frame) || null;",
      "context": {
        "before": [
          "     */\r",
          "    getMarkerAtFrame(store: MarkerStoreAccess, frame: number): Marker | null {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    /**\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:348:16",
      "file": "stores/markerStore.ts",
      "line": 348,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!comp?.markers) return [];",
      "context": {
        "before": [
          "      endFrame: number,\r",
          "    ): Marker[] {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "\r",
          "      return comp.markers.filter(\r",
          "        (m) => m.frame >= startFrame && m.frame <= endFrame,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:364:16",
      "file": "stores/markerStore.ts",
      "line": 364,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!comp?.markers) return null;",
      "context": {
        "before": [
          "     */\r",
          "    getNextMarker(store: MarkerStoreAccess, frame: number): Marker | null {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "\r",
          "      return comp.markers.find((m) => m.frame > frame) || null;\r",
          "    },\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:378:16",
      "file": "stores/markerStore.ts",
      "line": 378,
      "column": 16,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!comp?.markers) return null;",
      "context": {
        "before": [
          "     */\r",
          "    getPreviousMarker(store: MarkerStoreAccess, frame: number): Marker | null {\r",
          "      const comp = store.getActiveComp();\r"
        ],
        "after": [
          "\r",
          "      const previousMarkers = comp.markers.filter((m) => m.frame < frame);\r",
          "      return previousMarkers.length > 0\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:396:47",
      "file": "stores/markerStore.ts",
      "line": 396,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToNextMarker(store: MarkerStoreAccess): void {",
      "context": {
        "before": [
          "     *\r",
          "     * @param store - Compositor store access\r",
          "     */\r"
        ],
        "after": [
          "      const nextMarker = this.getNextMarker(store, store.currentFrame);\r",
          "      if (nextMarker) {\r",
          "        store.setFrame(nextMarker.frame);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/markerStore.ts:409:51",
      "file": "stores/markerStore.ts",
      "line": 409,
      "column": 51,
      "pattern": ": void",
      "severity": "LOW",
      "code": "jumpToPreviousMarker(store: MarkerStoreAccess): void {",
      "context": {
        "before": [
          "     *\r",
          "     * @param store - Compositor store access\r",
          "     */\r"
        ],
        "after": [
          "      const prevMarker = this.getPreviousMarker(store, store.currentFrame);\r",
          "      if (prevMarker) {\r",
          "        store.setFrame(prevMarker.frame);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:118:44",
      "file": "stores/particlePreferences.ts",
      "line": 118,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const adapter = await navigator.gpu?.requestAdapter();",
      "context": {
        "before": [
          "    // Check WebGPU",
          "    if (typeof navigator !== \"undefined\" && \"gpu\" in navigator) {",
          "      try {"
        ],
        "after": [
          "        if (adapter) {",
          "          hasWebGPU.value = true;",
          "          // requestAdapterInfo is not available in all implementations"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:124:66",
      "file": "stores/particlePreferences.ts",
      "line": 124,
      "column": 66,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const info = await adapterWithInfo.requestAdapterInfo?.();",
      "context": {
        "before": [
          "          // requestAdapterInfo is not available in all implementations",
          "          try {",
          "            const adapterWithInfo = adapter as GPUAdapterWithInfo;"
        ],
        "after": [
          "            gpuName.value = info?.device || info?.description || \"WebGPU Device\";",
          "          } catch {",
          "            gpuName.value = \"WebGPU Device\";"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:125:33",
      "file": "stores/particlePreferences.ts",
      "line": 125,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "gpuName.value = info?.device || info?.description || \"WebGPU Device\";",
      "context": {
        "before": [
          "          try {",
          "            const adapterWithInfo = adapter as GPUAdapterWithInfo;",
          "            const info = await adapterWithInfo.requestAdapterInfo?.();"
        ],
        "after": [
          "          } catch {",
          "            gpuName.value = \"WebGPU Device\";",
          "          }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:125:49",
      "file": "stores/particlePreferences.ts",
      "line": 125,
      "column": 49,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "gpuName.value = info?.device || info?.description || \"WebGPU Device\";",
      "context": {
        "before": [
          "          try {",
          "            const adapterWithInfo = adapter as GPUAdapterWithInfo;",
          "            const info = await adapterWithInfo.requestAdapterInfo?.();"
        ],
        "after": [
          "          } catch {",
          "            gpuName.value = \"WebGPU Device\";",
          "          }"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:227:68",
      "file": "stores/particlePreferences.ts",
      "line": 227,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function updatePreferences(updates: Partial<ParticlePreferences>): void {",
      "context": {
        "before": [
          "  /**",
          "   * Update preferences",
          "   */"
        ],
        "after": [
          "    // Validate and sanitize numeric values",
          "    const sanitized = { ...updates };",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:234:19",
      "file": "stores/particlePreferences.ts",
      "line": 234,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(val) || val <= 0) {",
      "context": {
        "before": [
          "    // maxParticlesPerLayer: must be positive, between 1000 and 500000",
          "    if (sanitized.maxParticlesPerLayer !== undefined) {",
          "      const val = sanitized.maxParticlesPerLayer;"
        ],
        "after": [
          "        sanitized.maxParticlesPerLayer = defaultPreferences.maxParticlesPerLayer;",
          "      } else {",
          "        sanitized.maxParticlesPerLayer = Math.max(1000, Math.min(500000, Math.floor(val)));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:244:19",
      "file": "stores/particlePreferences.ts",
      "line": 244,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(val) || val <= 0) {",
      "context": {
        "before": [
          "    // cacheCheckpointInterval: must be positive, between 1 and 120",
          "    if (sanitized.cacheCheckpointInterval !== undefined) {",
          "      const val = sanitized.cacheCheckpointInterval;"
        ],
        "after": [
          "        sanitized.cacheCheckpointInterval = defaultPreferences.cacheCheckpointInterval;",
          "      } else {",
          "        sanitized.cacheCheckpointInterval = Math.max(1, Math.min(120, Math.floor(val)));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:254:19",
      "file": "stores/particlePreferences.ts",
      "line": 254,
      "column": 19,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(val) || val <= 0) {",
      "context": {
        "before": [
          "    // maxCacheMemoryMB: must be positive, between 128 and 2048",
          "    if (sanitized.maxCacheMemoryMB !== undefined) {",
          "      const val = sanitized.maxCacheMemoryMB;"
        ],
        "after": [
          "        sanitized.maxCacheMemoryMB = defaultPreferences.maxCacheMemoryMB;",
          "      } else {",
          "        sanitized.maxCacheMemoryMB = Math.max(128, Math.min(2048, Math.floor(val)));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:277:29",
      "file": "stores/particlePreferences.ts",
      "line": 277,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function resetToDefaults(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Reset to defaults",
          "   */"
        ],
        "after": [
          "    preferences.value = { ...defaultPreferences };",
          "    saveToLocalStorage();",
          "  }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:285:32",
      "file": "stores/particlePreferences.ts",
      "line": 285,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function saveToLocalStorage(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Save to local storage",
          "   */"
        ],
        "after": [
          "    try {",
          "      localStorage.setItem(\"lattice-particle-preferences\", JSON.stringify(preferences.value));",
          "    } catch {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:296:34",
      "file": "stores/particlePreferences.ts",
      "line": 296,
      "column": 34,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function loadFromLocalStorage(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Load from local storage",
          "   */"
        ],
        "after": [
          "    try {",
          "      const saved = localStorage.getItem(\"lattice-particle-preferences\");",
          "      if (saved) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:311:31",
      "file": "stores/particlePreferences.ts",
      "line": 311,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function applyLowEndPreset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Get preset for low-end systems",
          "   */"
        ],
        "after": [
          "    updatePreferences({",
          "      renderingBackend: \"webgl2\",",
          "      maxParticlesPerLayer: 10000,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particlePreferences.ts:327:32",
      "file": "stores/particlePreferences.ts",
      "line": 327,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function applyHighEndPreset(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Get preset for high-end systems",
          "   */"
        ],
        "after": [
          "    updatePreferences({",
          "      renderingBackend: \"auto\",",
          "      maxParticlesPerLayer: 500000,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particleStore.ts:106:19",
      "file": "stores/particleStore.ts",
      "line": 106,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "activeComp?.settings.width || store.project.composition.width;",
      "context": {
        "before": [
          "\r",
          "      const activeComp = store.getActiveComp();\r",
          "      const compWidth =\r"
        ],
        "after": [
          "      const compHeight =\r",
          "        activeComp?.settings.height || store.project.composition.height;\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/particleStore.ts:108:19",
      "file": "stores/particleStore.ts",
      "line": 108,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "activeComp?.settings.height || store.project.composition.height;",
      "context": {
        "before": [
          "      const compWidth =\r",
          "        activeComp?.settings.width || store.project.composition.width;\r",
          "      const compHeight =\r"
        ],
        "after": [
          "\r",
          "      const particleData: ParticleLayerData = {\r",
          "        systemConfig: {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/particleStore.ts:221:6",
      "file": "stores/particleStore.ts",
      "line": 221,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: ParticleStoreAccess,\r",
          "      layerId: string,\r",
          "      updates: Partial<ParticleLayerData>,\r"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r",
          "      if (!layer || layer.type !== \"particles\") return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particleStore.ts:241:6",
      "file": "stores/particleStore.ts",
      "line": 241,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: ParticleStoreAccess,\r",
          "      layerId: string,\r",
          "      config: ParticleEmitterConfig,\r"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r",
          "      if (!layer || layer.type !== \"particles\") return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particleStore.ts:263:6",
      "file": "stores/particleStore.ts",
      "line": 263,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,\r",
          "      emitterId: string,\r",
          "      updates: Partial<ParticleEmitterConfig>,\r"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r",
          "      if (!layer || layer.type !== \"particles\") return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/particleStore.ts:286:6",
      "file": "stores/particleStore.ts",
      "line": 286,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: ParticleStoreAccess,\r",
          "      layerId: string,\r",
          "      emitterId: string,\r"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r",
          "      if (!layer || layer.type !== \"particles\") return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:150:27",
      "file": "stores/physicsStore.ts",
      "line": 150,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disposePhysicsEngine(): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Dispose physics engine\r",
          "     */\r"
        ],
        "after": [
          "      physicsEngine = null;\r",
          "      compositionPhysicsStates.clear();\r",
          "      compositionForceFields.clear();\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:168:6",
      "file": "stores/physicsStore.ts",
      "line": 168,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: PhysicsStoreAccess,\r",
          "      layerId: string,\r",
          "      config: Partial<RigidBodyConfig> = {},\r"
        ],
        "after": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer) {\r",
          "        storeLogger.warn(\"Layer not found for physics:\", layerId);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:178:27",
      "file": "stores/physicsStore.ts",
      "line": 178,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const position = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:178:37",
      "file": "stores/physicsStore.ts",
      "line": 178,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const position = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:178:44",
      "file": "stores/physicsStore.ts",
      "line": 178,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const position = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:179:27",
      "file": "stores/physicsStore.ts",
      "line": 179,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const position = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const bodyConfig =\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:179:37",
      "file": "stores/physicsStore.ts",
      "line": 179,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const position = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const bodyConfig =\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:179:44",
      "file": "stores/physicsStore.ts",
      "line": 179,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const position = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const bodyConfig =\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:183:21",
      "file": "stores/physicsStore.ts",
      "line": 183,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "config.shape?.type === \"circle\"",
      "context": {
        "before": [
          "      };\r",
          "\r",
          "      const bodyConfig =\r"
        ],
        "after": [
          "          ? createCircleBody(layerId, layerId, {\r",
          "              position,\r",
          "              radius: config.shape.radius ?? 50,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:192:34",
      "file": "stores/physicsStore.ts",
      "line": 192,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "width: config.shape?.width ?? 100,",
      "context": {
        "before": [
          "            })\r",
          "          : createBoxBody(layerId, layerId, {\r",
          "              position,\r"
        ],
        "after": [
          "              height: config.shape?.height ?? 100,\r",
          "              mass: config.mass ?? 1,\r",
          "              isStatic: config.type === \"static\",\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:193:35",
      "file": "stores/physicsStore.ts",
      "line": 193,
      "column": 35,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "height: config.shape?.height ?? 100,",
      "context": {
        "before": [
          "          : createBoxBody(layerId, layerId, {\r",
          "              position,\r",
          "              width: config.shape?.width ?? 100,\r"
        ],
        "after": [
          "              mass: config.mass ?? 1,\r",
          "              isStatic: config.type === \"static\",\r",
          "            });\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:219:68",
      "file": "stores/physicsStore.ts",
      "line": 219,
      "column": 68,
      "pattern": ": void",
      "severity": "LOW",
      "code": "disableLayerPhysics(store: PhysicsStoreAccess, layerId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Disable physics for a layer\r",
          "     */\r"
        ],
        "after": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      engine.removeRigidBody(layerId);\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:236:6",
      "file": "stores/physicsStore.ts",
      "line": 236,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: PhysicsStoreAccess,\r",
          "      layerId: string,\r",
          "      updates: Partial<RigidBodyConfig>,\r"
        ],
        "after": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:240:77",
      "file": "stores/physicsStore.ts",
      "line": 240,
      "column": 77,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer) return;\r",
          "\r"
        ],
        "after": [
          "        | PhysicsLayerData\r",
          "        | undefined;\r",
          "      if (!physicsData?.physicsEnabled || !physicsData.rigidBody) return;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:243:23",
      "file": "stores/physicsStore.ts",
      "line": 243,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!physicsData?.physicsEnabled || !physicsData.rigidBody) return;",
      "context": {
        "before": [
          "      const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as\r",
          "        | PhysicsLayerData\r",
          "        | undefined;\r"
        ],
        "after": [
          "\r",
          "      const engine = this.getPhysicsEngine(store);\r",
          "      engine.removeRigidBody(layerId);\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:270:64",
      "file": "stores/physicsStore.ts",
      "line": 270,
      "column": 64,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addForceField(store: PhysicsStoreAccess, force: ForceField): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Add a force field to the physics simulation\r",
          "     */\r"
        ],
        "after": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const compId = store.activeCompositionId;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:291:65",
      "file": "stores/physicsStore.ts",
      "line": 291,
      "column": 65,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeForceField(store: PhysicsStoreAccess, forceId: string): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Remove a force field\r",
          "     */\r"
        ],
        "after": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const compId = store.activeCompositionId;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:310:6",
      "file": "stores/physicsStore.ts",
      "line": 310,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: PhysicsStoreAccess,\r",
          "      gravityX: number,\r",
          "      gravityY: number,\r"
        ],
        "after": [
          "      const safeGravityX = Number.isFinite(gravityX) ? gravityX : 0;\r",
          "      const safeGravityY = Number.isFinite(gravityY) ? gravityY : 0;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:311:35",
      "file": "stores/physicsStore.ts",
      "line": 311,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeGravityX = Number.isFinite(gravityX) ? gravityX : 0;",
      "context": {
        "before": [
          "      gravityX: number,\r",
          "      gravityY: number,\r",
          "    ): void {\r"
        ],
        "after": [
          "      const safeGravityY = Number.isFinite(gravityY) ? gravityY : 0;\r",
          "\r",
          "      const engine = this.getPhysicsEngine(store);\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:312:35",
      "file": "stores/physicsStore.ts",
      "line": 312,
      "column": 35,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "const safeGravityY = Number.isFinite(gravityY) ? gravityY : 0;",
      "context": {
        "before": [
          "      gravityY: number,\r",
          "    ): void {\r",
          "      const safeGravityX = Number.isFinite(gravityX) ? gravityX : 0;\r"
        ],
        "after": [
          "\r",
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const compId = store.activeCompositionId;\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:339:64",
      "file": "stores/physicsStore.ts",
      "line": 339,
      "column": 64,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stepPhysics(store: PhysicsStoreAccess, targetFrame: number): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Step the physics simulation to a specific frame\r",
          "     */\r"
        ],
        "after": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const state = engine.evaluateFrame(targetFrame);\r",
          "      this._applyPhysicsStateToLayers(store, state);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:348:75",
      "file": "stores/physicsStore.ts",
      "line": 348,
      "column": 75,
      "pattern": ": void",
      "severity": "LOW",
      "code": "evaluatePhysicsAtFrame(store: PhysicsStoreAccess, targetFrame: number): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Evaluate physics at a specific frame (for scrubbing)\r",
          "     */\r"
        ],
        "after": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      const state = engine.evaluateFrame(targetFrame);\r",
          "      this._applyPhysicsStateToLayers(store, state);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:357:54",
      "file": "stores/physicsStore.ts",
      "line": 357,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "resetPhysicsSimulation(store: PhysicsStoreAccess): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Reset physics simulation to initial state\r",
          "     */\r"
        ],
        "after": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "      engine.clearCache();\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:371:79",
      "file": "stores/physicsStore.ts",
      "line": 371,
      "column": 79,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      if (!comp) return;\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (physicsData?.physicsEnabled && physicsData.rigidBody) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:374:24",
      "file": "stores/physicsStore.ts",
      "line": 374,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (physicsData?.physicsEnabled && physicsData.rigidBody) {",
      "context": {
        "before": [
          "        const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as\r",
          "          | PhysicsLayerData\r",
          "          | undefined;\r"
        ],
        "after": [
          "          const initialPos = physicsData.rigidBody.position;\r",
          "          if (layer.transform?.position) {\r",
          "            layer.transform.position.value = {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:376:30",
      "file": "stores/physicsStore.ts",
      "line": 376,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.transform?.position) {",
      "context": {
        "before": [
          "          | undefined;\r",
          "        if (physicsData?.physicsEnabled && physicsData.rigidBody) {\r",
          "          const initialPos = physicsData.rigidBody.position;\r"
        ],
        "after": [
          "            layer.transform.position.value = {\r",
          "              x: initialPos?.x ?? 0,\r",
          "              y: initialPos?.y ?? 0,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:378:28",
      "file": "stores/physicsStore.ts",
      "line": 378,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: initialPos?.x ?? 0,",
      "context": {
        "before": [
          "          const initialPos = physicsData.rigidBody.position;\r",
          "          if (layer.transform?.position) {\r",
          "            layer.transform.position.value = {\r"
        ],
        "after": [
          "              y: initialPos?.y ?? 0,\r",
          "              z: layer.transform.position.value?.z ?? 0,\r",
          "            };\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:379:28",
      "file": "stores/physicsStore.ts",
      "line": 379,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: initialPos?.y ?? 0,",
      "context": {
        "before": [
          "          if (layer.transform?.position) {\r",
          "            layer.transform.position.value = {\r",
          "              x: initialPos?.x ?? 0,\r"
        ],
        "after": [
          "              z: layer.transform.position.value?.z ?? 0,\r",
          "            };\r",
          "          }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:380:48",
      "file": "stores/physicsStore.ts",
      "line": 380,
      "column": 48,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: layer.transform.position.value?.z ?? 0,",
      "context": {
        "before": [
          "            layer.transform.position.value = {\r",
          "              x: initialPos?.x ?? 0,\r",
          "              y: initialPos?.y ?? 0,\r"
        ],
        "after": [
          "            };\r",
          "          }\r",
          "        }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:395:6",
      "file": "stores/physicsStore.ts",
      "line": 395,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    _applyPhysicsStateToLayers(\r",
          "      store: PhysicsStoreAccess,\r",
          "      state: PhysicsSimulationState,\r"
        ],
        "after": [
          "      const comp = store.project.compositions[store.activeCompositionId];\r",
          "      if (!comp) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:400:79",
      "file": "stores/physicsStore.ts",
      "line": 400,
      "column": 79,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      if (!comp) return;\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (!physicsData?.physicsEnabled) continue;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:403:25",
      "file": "stores/physicsStore.ts",
      "line": 403,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!physicsData?.physicsEnabled) continue;",
      "context": {
        "before": [
          "        const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as\r",
          "          | PhysicsLayerData\r",
          "          | undefined;\r"
        ],
        "after": [
          "\r",
          "        const bodyState = state.rigidBodies.find((b) => b.id === layer.id);\r",
          "        if (!bodyState) continue;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:408:28",
      "file": "stores/physicsStore.ts",
      "line": 408,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.transform?.position) {",
      "context": {
        "before": [
          "        const bodyState = state.rigidBodies.find((b) => b.id === layer.id);\r",
          "        if (!bodyState) continue;\r",
          "\r"
        ],
        "after": [
          "          layer.transform.position.value = {\r",
          "            x: bodyState.position.x,\r",
          "            y: bodyState.position.y,\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:412:46",
      "file": "stores/physicsStore.ts",
      "line": 412,
      "column": 46,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: layer.transform.position.value?.z ?? 0,",
      "context": {
        "before": [
          "          layer.transform.position.value = {\r",
          "            x: bodyState.position.x,\r",
          "            y: bodyState.position.y,\r"
        ],
        "after": [
          "          };\r",
          "        }\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:416:28",
      "file": "stores/physicsStore.ts",
      "line": 416,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (layer.transform?.rotation) {",
      "context": {
        "before": [
          "          };\r",
          "        }\r",
          "\r"
        ],
        "after": [
          "          layer.transform.rotation.value = bodyState.angle * (180 / Math.PI);\r",
          "        }\r",
          "      }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:447:16",
      "file": "stores/physicsStore.ts",
      "line": 447,
      "column": 16,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(options.sampleInterval) && options.sampleInterval! > 0",
      "context": {
        "before": [
          "      const startFrame = options.startFrame ?? 0;\r",
          "      const endFrame = options.endFrame ?? comp.settings.frameCount - 1;\r",
          "      const sampleInterval: number =\r"
        ],
        "after": [
          "          ? options.sampleInterval!\r",
          "          : 1;\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:467:33",
      "file": "stores/physicsStore.ts",
      "line": 467,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: layer.transform?.position?.value?.z ?? 0,",
      "context": {
        "before": [
          "            value: {\r",
          "              x: bodyState.position.x,\r",
          "              y: bodyState.position.y,\r"
        ],
        "after": [
          "            },\r",
          "            interpolation: \"linear\",\r",
          "          });\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:467:43",
      "file": "stores/physicsStore.ts",
      "line": 467,
      "column": 43,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: layer.transform?.position?.value?.z ?? 0,",
      "context": {
        "before": [
          "            value: {\r",
          "              x: bodyState.position.x,\r",
          "              y: bodyState.position.y,\r"
        ],
        "after": [
          "            },\r",
          "            interpolation: \"linear\",\r",
          "          });\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:467:50",
      "file": "stores/physicsStore.ts",
      "line": 467,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: layer.transform?.position?.value?.z ?? 0,",
      "context": {
        "before": [
          "            value: {\r",
          "              x: bodyState.position.x,\r",
          "              y: bodyState.position.y,\r"
        ],
        "after": [
          "            },\r",
          "            interpolation: \"linear\",\r",
          "          });\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:515:79",
      "file": "stores/physicsStore.ts",
      "line": 515,
      "column": 79,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as",
      "context": {
        "before": [
          "      const results: BakeResult[] = [];\r",
          "\r",
          "      for (const layer of comp.layers) {\r"
        ],
        "after": [
          "          | PhysicsLayerData\r",
          "          | undefined;\r",
          "        if (physicsData?.physicsEnabled) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:518:24",
      "file": "stores/physicsStore.ts",
      "line": 518,
      "column": 24,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (physicsData?.physicsEnabled) {",
      "context": {
        "before": [
          "        const physicsData = (layer.data as unknown as Record<string, unknown>)?.physics as\r",
          "          | PhysicsLayerData\r",
          "          | undefined;\r"
        ],
        "after": [
          "          const result = await this.bakePhysicsToKeyframes(store, layer.id, options);\r",
          "          results.push(result);\r",
          "        }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:544:6",
      "file": "stores/physicsStore.ts",
      "line": 544,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "        pinnedTop?: boolean;\r",
          "        pinnedCorners?: boolean;\r",
          "      },\r"
        ],
        "after": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:551:27",
      "file": "stores/physicsStore.ts",
      "line": 551,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const origin = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:551:37",
      "file": "stores/physicsStore.ts",
      "line": 551,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const origin = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:551:44",
      "file": "stores/physicsStore.ts",
      "line": 551,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "x: layer.transform?.position?.value?.x ?? 0,",
      "context": {
        "before": [
          "      const engine = this.getPhysicsEngine(store);\r",
          "\r",
          "      const origin = {\r"
        ],
        "after": [
          "        y: layer.transform?.position?.value?.y ?? 0,\r",
          "      };\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:552:27",
      "file": "stores/physicsStore.ts",
      "line": 552,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const origin = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const clothConfig = createClothConfig(layerId, layerId, {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:552:37",
      "file": "stores/physicsStore.ts",
      "line": 552,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const origin = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const clothConfig = createClothConfig(layerId, layerId, {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:552:44",
      "file": "stores/physicsStore.ts",
      "line": 552,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "y: layer.transform?.position?.value?.y ?? 0,",
      "context": {
        "before": [
          "\r",
          "      const origin = {\r",
          "        x: layer.transform?.position?.value?.x ?? 0,\r"
        ],
        "after": [
          "      };\r",
          "\r",
          "      const clothConfig = createClothConfig(layerId, layerId, {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:588:6",
      "file": "stores/physicsStore.ts",
      "line": 588,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: PhysicsStoreAccess,\r",
          "      layerId: string,\r",
          "      preset: \"adult\" | \"child\" | \"cartoon\" = \"adult\",\r"
        ],
        "after": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer || layer.type !== \"pose\") {\r",
          "        storeLogger.warn(\"Ragdoll requires a pose layer\");\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:648:6",
      "file": "stores/physicsStore.ts",
      "line": 648,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,\r",
          "      group: number,\r",
          "      mask: number = 0xffffffff,\r"
        ],
        "after": [
          "      const layer = store.getLayerById(layerId);\r",
          "      if (!layer) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/physicsStore.ts:671:6",
      "file": "stores/physicsStore.ts",
      "line": 671,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      _layerIdA: string,\r",
          "      _layerIdB: string,\r",
          "      _canCollide: boolean,\r"
        ],
        "after": [
          "      storeLogger.warn(\"setLayersCanCollide not yet implemented\");\r",
          "    },\r",
          "  },\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:46:58",
      "file": "stores/playbackStore.ts",
      "line": 46,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setWorkArea(start: number | null, end: number | null): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set work area bounds",
          "     */"
        ],
        "after": [
          "      this.workAreaStart = start;",
          "      this.workAreaEnd = end;",
          "      storeLogger.debug(\"Work area set:\", { start, end });"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:55:20",
      "file": "stores/playbackStore.ts",
      "line": 55,
      "column": 20,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearWorkArea(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear work area",
          "     */"
        ],
        "after": [
          "      this.workAreaStart = null;",
          "      this.workAreaEnd = null;",
          "      storeLogger.debug(\"Work area cleared\");"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:73:6",
      "file": "stores/playbackStore.ts",
      "line": 73,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      frameCount: number,",
          "      currentFrame: number,",
          "      onFrame: (frame: number) => void,"
        ],
        "after": [
          "      if (this.isPlaying) return;",
          "",
          "      // Validate fps to prevent division by zero"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:142:11",
      "file": "stores/playbackStore.ts",
      "line": 142,
      "column": 11,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stop(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Stop playback",
          "     */"
        ],
        "after": [
          "      if (this.playbackRequestId !== null) {",
          "        cancelAnimationFrame(this.playbackRequestId);",
          "        this.playbackRequestId = null;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:160:6",
      "file": "stores/playbackStore.ts",
      "line": 160,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      frameCount: number,",
          "      currentFrame: number,",
          "      onFrame: (frame: number) => void,"
        ],
        "after": [
          "      if (this.isPlaying) {",
          "        this.stop();",
          "      } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:171:35",
      "file": "stores/playbackStore.ts",
      "line": 171,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setLoopPlayback(loop: boolean): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set loop playback mode",
          "     */"
        ],
        "after": [
          "      this.loopPlayback = loop;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:178:48",
      "file": "stores/playbackStore.ts",
      "line": 178,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "goToStart(onFrame: (frame: number) => void): void {",
      "context": {
        "before": [
          "    /**",
          "     * Go to first frame",
          "     */"
        ],
        "after": [
          "      this.stop();",
          "      onFrame(0);",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:186:66",
      "file": "stores/playbackStore.ts",
      "line": 186,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "goToEnd(frameCount: number, onFrame: (frame: number) => void): void {",
      "context": {
        "before": [
          "    /**",
          "     * Go to last frame",
          "     */"
        ],
        "after": [
          "      this.stop();",
          "      onFrame(frameCount - 1);",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:198:6",
      "file": "stores/playbackStore.ts",
      "line": 198,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      currentFrame: number,",
          "      frameCount: number,",
          "      onFrame: (frame: number) => void,"
        ],
        "after": [
          "      this.stop();",
          "      const newFrame = Math.min(currentFrame + 1, frameCount - 1);",
          "      onFrame(newFrame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:207:73",
      "file": "stores/playbackStore.ts",
      "line": 207,
      "column": 73,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stepBackward(currentFrame: number, onFrame: (frame: number) => void): void {",
      "context": {
        "before": [
          "    /**",
          "     * Step backward one frame",
          "     */"
        ],
        "after": [
          "      this.stop();",
          "      const newFrame = Math.max(currentFrame - 1, 0);",
          "      onFrame(newFrame);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/playbackStore.ts:220:6",
      "file": "stores/playbackStore.ts",
      "line": 220,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      frame: number,",
          "      frameCount: number,",
          "      onFrame: (frame: number) => void,"
        ],
        "after": [
          "      const clampedFrame = Math.max(0, Math.min(frame, frameCount - 1));",
          "      onFrame(clampedFrame);",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/presetStore.ts:134:26",
      "file": "stores/presetStore.ts",
      "line": 134,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p.description?.toLowerCase().includes(q) ||",
      "context": {
        "before": [
          "        return results.filter(",
          "          (p) =>",
          "            p.name.toLowerCase().includes(q) ||"
        ],
        "after": [
          "            p.tags?.some((t) => t.toLowerCase().includes(q)),",
          "        );",
          "      };"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/presetStore.ts:135:19",
      "file": "stores/presetStore.ts",
      "line": 135,
      "column": 19,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "p.tags?.some((t) => t.toLowerCase().includes(q)),",
      "context": {
        "before": [
          "          (p) =>",
          "            p.name.toLowerCase().includes(q) ||",
          "            p.description?.toLowerCase().includes(q) ||"
        ],
        "after": [
          "        );",
          "      };",
          "    },"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:111:41",
      "file": "stores/projectStore.ts",
      "line": 111,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return compositorStore.getActiveComp()?.settings.width || 1024;",
      "context": {
        "before": [
          "}\r",
          "\r",
          "export function getWidth(compositorStore: ProjectStoreAccess): number {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "export function getHeight(compositorStore: ProjectStoreAccess): number {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:115:41",
      "file": "stores/projectStore.ts",
      "line": 115,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return compositorStore.getActiveComp()?.settings.height || 1024;",
      "context": {
        "before": [
          "}\r",
          "\r",
          "export function getHeight(compositorStore: ProjectStoreAccess): number {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "export function getFrameCount(compositorStore: ProjectStoreAccess): number {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:119:41",
      "file": "stores/projectStore.ts",
      "line": 119,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return compositorStore.getActiveComp()?.settings.frameCount || 81;",
      "context": {
        "before": [
          "}\r",
          "\r",
          "export function getFrameCount(compositorStore: ProjectStoreAccess): number {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "export function getFps(compositorStore: ProjectStoreAccess): number {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:123:41",
      "file": "stores/projectStore.ts",
      "line": 123,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return compositorStore.getActiveComp()?.settings.fps || 16;",
      "context": {
        "before": [
          "}\r",
          "\r",
          "export function getFps(compositorStore: ProjectStoreAccess): number {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "export function getDuration(compositorStore: ProjectStoreAccess): number {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:127:41",
      "file": "stores/projectStore.ts",
      "line": 127,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return compositorStore.getActiveComp()?.settings.duration || 5;",
      "context": {
        "before": [
          "}\r",
          "\r",
          "export function getDuration(compositorStore: ProjectStoreAccess): number {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "export function getBackgroundColor(compositorStore: ProjectStoreAccess): string {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:131:41",
      "file": "stores/projectStore.ts",
      "line": 131,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return compositorStore.getActiveComp()?.settings.backgroundColor || \"#050505\";",
      "context": {
        "before": [
          "}\r",
          "\r",
          "export function getBackgroundColor(compositorStore: ProjectStoreAccess): string {\r"
        ],
        "after": [
          "}\r",
          "\r",
          "export function getCurrentTime(compositorStore: ProjectStoreAccess): number {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:139:89",
      "file": "stores/projectStore.ts",
      "line": 139,
      "column": 89,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function selectAsset(compositorStore: ProjectStoreAccess, assetId: string | null): void {",
      "context": {
        "before": [
          "  return comp ? comp.currentFrame / comp.settings.fps : 0;\r",
          "}\r",
          "\r"
        ],
        "after": [
          "  compositorStore.selectedAssetId = assetId;\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:153:2",
      "file": "stores/projectStore.ts",
      "line": 153,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "    height: number;\r",
          "    frame_count: number;\r",
          "  },\r"
        ],
        "after": [
          "  compositorStore.comfyuiNodeId = inputs.node_id;\r",
          "  compositorStore.sourceImage = inputs.source_image;\r",
          "  compositorStore.depthMap = inputs.depth_map;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:213:36",
      "file": "stores/projectStore.ts",
      "line": 213,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function invalidateParticleCaches(): void {",
      "context": {
        "before": [
          "// PARTICLE CACHE INVALIDATION\r",
          "// ============================================================================\r",
          "\r"
        ],
        "after": [
          "  const engine = (window as unknown as {\r",
          "    __latticeEngine?: { getLayers?: () => Array<{ clearCache?: () => void }> };\r",
          "  }).__latticeEngine;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:220:36",
      "file": "stores/projectStore.ts",
      "line": 220,
      "column": 36,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const layers = engine.getLayers?.() || [];",
      "context": {
        "before": [
          "  if (!engine) return;\r",
          "\r",
          "  try {\r"
        ],
        "after": [
          "    for (const layer of layers) {\r",
          "      if (layer && typeof layer.clearCache === \"function\") {\r",
          "        layer.clearCache();\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:368:77",
      "file": "stores/projectStore.ts",
      "line": 368,
      "column": 77,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectAsset(compositorStore: ProjectStoreAccess, assetId: string | null): void {",
      "context": {
        "before": [
          "      return getCurrentTime(compositorStore);\r",
          "    },\r",
          "\r"
        ],
        "after": [
          "      selectAsset(compositorStore, assetId);\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:372:94",
      "file": "stores/projectStore.ts",
      "line": 372,
      "column": 94,
      "pattern": ": void",
      "severity": "LOW",
      "code": "loadInputs(compositorStore: ProjectStoreAccess, inputs: Parameters<typeof loadInputs>[1]): void {",
      "context": {
        "before": [
          "      selectAsset(compositorStore, assetId);\r",
          "    },\r",
          "\r"
        ],
        "after": [
          "      loadInputs(compositorStore, inputs);\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:380:37",
      "file": "stores/projectStore.ts",
      "line": 380,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "pushHistory(store: ProjectStore): void {",
      "context": {
        "before": [
          "    // HISTORY MANAGEMENT\r",
          "    // ========================================================================\r",
          "\r"
        ],
        "after": [
          "      if (store.historyIndex < store.historyStack.length - 1) {\r",
          "        store.historyStack = store.historyStack.slice(0, store.historyIndex + 1);\r",
          "      }\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:419:38",
      "file": "stores/projectStore.ts",
      "line": 419,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearHistory(store: ProjectStore): void {",
      "context": {
        "before": [
          "      return store.historyIndex < store.historyStack.length - 1;\r",
          "    },\r",
          "\r"
        ],
        "after": [
          "      const snapshot = structuredClone(toRaw(store.project)) as typeof store.project;\r",
          "      store.historyStack = [snapshot];\r",
          "      store.historyIndex = 0;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:429:36",
      "file": "stores/projectStore.ts",
      "line": 429,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "newProject(store: ProjectStore): void {",
      "context": {
        "before": [
          "    // PROJECT INITIALIZATION\r",
          "    // ========================================================================\r",
          "\r"
        ],
        "after": [
          "      store.project = createDefaultProject();\r",
          "      store.lastSaveProjectId = null;\r",
          "      store.lastSaveTime = 0;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:655:79",
      "file": "stores/projectStore.ts",
      "line": 655,
      "column": 79,
      "pattern": ": void",
      "severity": "LOW",
      "code": "startAutosave(store: ProjectStore, performAutosaveFn: () => Promise<void>): void {",
      "context": {
        "before": [
          "    // AUTOSAVE\r",
          "    // ========================================================================\r",
          "\r"
        ],
        "after": [
          "      if (store.autosaveTimerId !== null || !store.autosaveEnabled) return;\r",
          "      store.autosaveTimerId = window.setInterval(performAutosaveFn, store.autosaveIntervalMs);\r",
          "      storeLogger.info(\"Autosave started with interval:\", store.autosaveIntervalMs);\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:661:38",
      "file": "stores/projectStore.ts",
      "line": 661,
      "column": 38,
      "pattern": ": void",
      "severity": "LOW",
      "code": "stopAutosave(store: ProjectStore): void {",
      "context": {
        "before": [
          "      storeLogger.info(\"Autosave started with interval:\", store.autosaveIntervalMs);\r",
          "    },\r",
          "\r"
        ],
        "after": [
          "      if (store.autosaveTimerId !== null && store.autosaveTimerId !== undefined) {\r",
          "        window.clearInterval(store.autosaveTimerId);\r",
          "        store.autosaveTimerId = null;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:673:6",
      "file": "stores/projectStore.ts",
      "line": 673,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: ProjectStore,\r",
          "      options: { enabled?: boolean; intervalMs?: number },\r",
          "      performAutosaveFn: () => Promise<void>,\r"
        ],
        "after": [
          "      if (options.enabled !== undefined) store.autosaveEnabled = options.enabled;\r",
          "      if (options.intervalMs !== undefined && Number.isFinite(options.intervalMs) && options.intervalMs > 0) {\r",
          "        store.autosaveIntervalMs = options.intervalMs;\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:675:54",
      "file": "stores/projectStore.ts",
      "line": 675,
      "column": 54,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (options.intervalMs !== undefined && Number.isFinite(options.intervalMs) && options.intervalMs > 0) {",
      "context": {
        "before": [
          "      performAutosaveFn: () => Promise<void>,\r",
          "    ): void {\r",
          "      if (options.enabled !== undefined) store.autosaveEnabled = options.enabled;\r"
        ],
        "after": [
          "        store.autosaveIntervalMs = options.intervalMs;\r",
          "      }\r",
          "      this.stopAutosave(store);\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:701:44",
      "file": "stores/projectStore.ts",
      "line": 701,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "markUnsavedChanges(store: ProjectStore): void {",
      "context": {
        "before": [
          "      }\r",
          "    },\r",
          "\r"
        ],
        "after": [
          "      store.hasUnsavedChanges = true;\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:775:41",
      "file": "stores/projectStore.ts",
      "line": 775,
      "column": 41,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (base64Data) assetsFolder?.file(filename, base64Data, { base64: true });",
      "context": {
        "before": [
          "        if (asset.data) {\r",
          "          if (asset.data.startsWith(\"data:\")) {\r",
          "            const base64Data = asset.data.split(\",\")[1];\r"
        ],
        "after": [
          "          } else if (asset.data.startsWith(\"blob:\") || asset.data.startsWith(\"http\")) {\r",
          "            const urlValidation = validateURL(asset.data, \"fetch\");\r",
          "            if (!urlValidation.valid) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:785:27",
      "file": "stores/projectStore.ts",
      "line": 785,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetsFolder?.file(filename, blob);",
      "context": {
        "before": [
          "            try {\r",
          "              const response = await fetch(urlValidation.sanitized || asset.data);\r",
          "              const blob = await response.blob();\r"
        ],
        "after": [
          "            } catch (e) {\r",
          "              storeLogger.warn(`Failed to fetch asset ${assetId}:`, e);\r",
          "            }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/projectStore.ts:790:25",
      "file": "stores/projectStore.ts",
      "line": 790,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "assetsFolder?.file(filename, asset.data, { base64: true });",
      "context": {
        "before": [
          "              storeLogger.warn(`Failed to fetch asset ${assetId}:`, e);\r",
          "            }\r",
          "          } else {\r"
        ],
        "after": [
          "          }\r",
          "        }\r",
          "      }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/segmentationStore.ts:171:57",
      "file": "stores/segmentationStore.ts",
      "line": 171,
      "column": 57,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (result.status !== \"success\" || !result.masks?.length) {",
      "context": {
        "before": [
          "      try {\r",
          "        const result = await segmentByPoint(store.sourceImage, point, options.model);\r",
          "\r"
        ],
        "after": [
          "          storeLogger.warn(\"Segmentation returned no masks:\", result.message);\r",
          "          return null;\r",
          "        }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/segmentationStore.ts:209:57",
      "file": "stores/segmentationStore.ts",
      "line": 209,
      "column": 57,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (result.status !== \"success\" || !result.masks?.length) {",
      "context": {
        "before": [
          "      try {\r",
          "        const result = await segmentByMultiplePoints(store.sourceImage, foregroundPoints, backgroundPoints, options.model);\r",
          "\r"
        ],
        "after": [
          "          storeLogger.warn(\"Segmentation returned no masks:\", result.message);\r",
          "          return null;\r",
          "        }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/segmentationStore.ts:245:57",
      "file": "stores/segmentationStore.ts",
      "line": 245,
      "column": 57,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (result.status !== \"success\" || !result.masks?.length) {",
      "context": {
        "before": [
          "      try {\r",
          "        const result = await segmentByBox(store.sourceImage, box, options.model);\r",
          "\r"
        ],
        "after": [
          "          storeLogger.warn(\"Segmentation returned no masks:\", result.message);\r",
          "          return null;\r",
          "        }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/segmentationStore.ts:283:57",
      "file": "stores/segmentationStore.ts",
      "line": 283,
      "column": 57,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (result.status !== \"success\" || !result.masks?.length) {",
      "context": {
        "before": [
          "          maxMasks: options.maxMasks,\r",
          "        });\r",
          "\r"
        ],
        "after": [
          "          storeLogger.warn(\"Auto segmentation returned no masks:\", result.message);\r",
          "          return [];\r",
          "        }\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:72:33",
      "file": "stores/selectionStore.ts",
      "line": 72,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayer(layerId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select a single layer (replaces current selection)",
          "     */"
        ],
        "after": [
          "      this.selectedLayerIds = [layerId];",
          "      this.lastSelectedLayerId = layerId;",
          "      storeLogger.debug(\"Selected layer:\", layerId);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:81:37",
      "file": "stores/selectionStore.ts",
      "line": 81,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayers(layerIds: string[]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select multiple layers (replaces current selection)",
          "     */"
        ],
        "after": [
          "      this.selectedLayerIds = [...layerIds];",
          "      if (layerIds.length > 0) {",
          "        this.lastSelectedLayerId = layerIds[layerIds.length - 1];"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:92:36",
      "file": "stores/selectionStore.ts",
      "line": 92,
      "column": 36,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addToSelection(layerId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Add layer to selection (multi-select)",
          "     */"
        ],
        "after": [
          "      if (!this.selectedLayerIds.includes(layerId)) {",
          "        this.selectedLayerIds.push(layerId);",
          "        this.lastSelectedLayerId = layerId;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:102:41",
      "file": "stores/selectionStore.ts",
      "line": 102,
      "column": 41,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeFromSelection(layerId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Remove layer from selection",
          "     */"
        ],
        "after": [
          "      const index = this.selectedLayerIds.indexOf(layerId);",
          "      if (index >= 0) {",
          "        this.selectedLayerIds.splice(index, 1);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:112:42",
      "file": "stores/selectionStore.ts",
      "line": 112,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleLayerSelection(layerId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle layer selection",
          "     */"
        ],
        "after": [
          "      if (this.selectedLayerIds.includes(layerId)) {",
          "        this.removeFromSelection(layerId);",
          "      } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:123:37",
      "file": "stores/selectionStore.ts",
      "line": 123,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleSelection(layerId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle layer selection (alias for toggleLayerSelection).",
          "     */"
        ],
        "after": [
          "      this.toggleLayerSelection(layerId);",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:138:6",
      "file": "stores/selectionStore.ts",
      "line": 138,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      modifiers: SelectionModifiers,",
          "      orderedLayerIds?: string[],"
        ],
        "after": [
          "      if (modifiers.shift && this.lastSelectedLayerId && orderedLayerIds) {",
          "        // Shift+click: Range select",
          "        this.selectRange(this.lastSelectedLayerId, layerId, orderedLayerIds);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:163:6",
      "file": "stores/selectionStore.ts",
      "line": 163,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      startLayerId: string,",
          "      endLayerId: string,",
          "      orderedLayerIds: string[],"
        ],
        "after": [
          "      const startIndex = orderedLayerIds.indexOf(startLayerId);",
          "      const endIndex = orderedLayerIds.indexOf(endLayerId);",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:185:26",
      "file": "stores/selectionStore.ts",
      "line": 185,
      "column": 26,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearLayerSelection(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear layer selection",
          "     */"
        ],
        "after": [
          "      this.selectedLayerIds = [];",
          "      this.lastSelectedLayerId = null;",
          "    },"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:193:21",
      "file": "stores/selectionStore.ts",
      "line": 193,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearSelection(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear layer selection (alias for clearLayerSelection).",
          "     */"
        ],
        "after": [
          "      this.clearLayerSelection();",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:208:48",
      "file": "stores/selectionStore.ts",
      "line": 208,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayerAbove(orderedLayerIds: string[]): void {",
      "context": {
        "before": [
          "     * Select layer above current selection (Ctrl+Up Arrow behavior)",
          "     * @param orderedLayerIds All layer IDs in display order (top to bottom)",
          "     */"
        ],
        "after": [
          "      if (orderedLayerIds.length === 0) return;",
          "",
          "      // If no selection, select the first (topmost) layer"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:238:48",
      "file": "stores/selectionStore.ts",
      "line": 238,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectLayerBelow(orderedLayerIds: string[]): void {",
      "context": {
        "before": [
          "     * Select layer below current selection (Ctrl+Down Arrow behavior)",
          "     * @param orderedLayerIds All layer IDs in display order (top to bottom)",
          "     */"
        ],
        "after": [
          "      if (orderedLayerIds.length === 0) return;",
          "",
          "      // If no selection, select the last (bottommost) layer"
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:271:39",
      "file": "stores/selectionStore.ts",
      "line": 271,
      "column": 39,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectKeyframe(keyframeId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select a single keyframe",
          "     */"
        ],
        "after": [
          "      this.selectedKeyframeIds = [keyframeId];",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:278:43",
      "file": "stores/selectionStore.ts",
      "line": 278,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectKeyframes(keyframeIds: string[]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select multiple keyframes",
          "     */"
        ],
        "after": [
          "      this.selectedKeyframeIds = [...keyframeIds];",
          "    },",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:285:47",
      "file": "stores/selectionStore.ts",
      "line": 285,
      "column": 47,
      "pattern": ": void",
      "severity": "LOW",
      "code": "addKeyframeToSelection(keyframeId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Add keyframe to selection",
          "     */"
        ],
        "after": [
          "      if (!this.selectedKeyframeIds.includes(keyframeId)) {",
          "        this.selectedKeyframeIds.push(keyframeId);",
          "      }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:294:52",
      "file": "stores/selectionStore.ts",
      "line": 294,
      "column": 52,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeKeyframeFromSelection(keyframeId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Remove keyframe from selection",
          "     */"
        ],
        "after": [
          "      const index = this.selectedKeyframeIds.indexOf(keyframeId);",
          "      if (index >= 0) {",
          "        this.selectedKeyframeIds.splice(index, 1);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:304:48",
      "file": "stores/selectionStore.ts",
      "line": 304,
      "column": 48,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleKeyframeSelection(keyframeId: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Toggle keyframe selection",
          "     */"
        ],
        "after": [
          "      if (this.selectedKeyframeIds.includes(keyframeId)) {",
          "        this.removeKeyframeFromSelection(keyframeId);",
          "      } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:315:29",
      "file": "stores/selectionStore.ts",
      "line": 315,
      "column": 29,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearKeyframeSelection(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear keyframe selection",
          "     */"
        ],
        "after": [
          "      this.selectedKeyframeIds = [];",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:337:6",
      "file": "stores/selectionStore.ts",
      "line": 337,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      pointIndex: number,",
          "      groupId?: string,"
        ],
        "after": [
          "      this.selectedControlPoints = [{ layerId, pointIndex, groupId }];",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:344:57",
      "file": "stores/selectionStore.ts",
      "line": 344,
      "column": 57,
      "pattern": ": void",
      "severity": "LOW",
      "code": "selectControlPoints(points: ControlPointSelection[]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Select multiple control points",
          "     */"
        ],
        "after": [
          "      this.selectedControlPoints = [...points];",
          "    },",
          ""
        ]
      },
      "typeInfo": "Array type detected",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:355:6",
      "file": "stores/selectionStore.ts",
      "line": 355,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      pointIndex: number,",
          "      groupId?: string,"
        ],
        "after": [
          "      const exists = this.selectedControlPoints.some(",
          "        (p) => p.layerId === layerId && p.pointIndex === pointIndex,",
          "      );"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:367:73",
      "file": "stores/selectionStore.ts",
      "line": 367,
      "column": 73,
      "pattern": ": void",
      "severity": "LOW",
      "code": "removeControlPointFromSelection(layerId: string, pointIndex: number): void {",
      "context": {
        "before": [
          "    /**",
          "     * Remove control point from selection",
          "     */"
        ],
        "after": [
          "      this.selectedControlPoints = this.selectedControlPoints.filter(",
          "        (p) => !(p.layerId === layerId && p.pointIndex === pointIndex),",
          "      );"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:380:6",
      "file": "stores/selectionStore.ts",
      "line": 380,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      layerId: string,",
          "      pointIndex: number,",
          "      groupId?: string,"
        ],
        "after": [
          "      const index = this.selectedControlPoints.findIndex(",
          "        (p) => p.layerId === layerId && p.pointIndex === pointIndex,",
          "      );"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:399:6",
      "file": "stores/selectionStore.ts",
      "line": 399,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      pointIndex: number,",
          "      modifiers: SelectionModifiers,",
          "      groupId?: string,"
        ],
        "after": [
          "      if (modifiers.ctrl) {",
          "        this.toggleControlPointSelection(layerId, pointIndex, groupId);",
          "      } else {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:417:6",
      "file": "stores/selectionStore.ts",
      "line": 417,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      groupId: string,",
          "      layerId: string,",
          "      pointIndicesInGroup: number[],"
        ],
        "after": [
          "      this.selectedControlPoints = pointIndicesInGroup.map((pointIndex) => ({",
          "        layerId,",
          "        pointIndex,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:438:6",
      "file": "stores/selectionStore.ts",
      "line": 438,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      groupId: string,",
          "      layerId: string,",
          "      pointIndicesInGroup: number[],"
        ],
        "after": [
          "      for (const pointIndex of pointIndicesInGroup) {",
          "        const exists = this.selectedControlPoints.some(",
          "          (p) => p.layerId === layerId && p.pointIndex === pointIndex,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:452:33",
      "file": "stores/selectionStore.ts",
      "line": 452,
      "column": 33,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearControlPointSelection(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear control point selection",
          "     */"
        ],
        "after": [
          "      this.selectedControlPoints = [];",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:479:49",
      "file": "stores/selectionStore.ts",
      "line": 479,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setSelectedPropertyPath(path: string | null): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set selected property path (for graph editor focus)",
          "     */"
        ],
        "after": [
          "      this.selectedPropertyPath = path;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:490:49",
      "file": "stores/selectionStore.ts",
      "line": 490,
      "column": 49,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setTool(tool: SelectionState[\"currentTool\"]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Set current tool",
          "     */"
        ],
        "after": [
          "      this.currentTool = tool;",
          "    },",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/selectionStore.ts:501:15",
      "file": "stores/selectionStore.ts",
      "line": 501,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clearAll(): void {",
      "context": {
        "before": [
          "    /**",
          "     * Clear all selections",
          "     */"
        ],
        "after": [
          "      this.selectedLayerIds = [];",
          "      this.lastSelectedLayerId = null;",
          "      this.selectedKeyframeIds = [];"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:107:15",
      "file": "stores/textAnimatorStore.ts",
      "line": 107,
      "column": 15,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return layer?.type === \"text\" ? layer : undefined;",
      "context": {
        "before": [
          "\r",
          "function getTextLayer(store: TextAnimatorStoreAccess, layerId: string): Layer | undefined {\r",
          "  const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r"
        ],
        "after": [
          "}\r",
          "\r",
          "function getTextData(layer: Layer): TextData | undefined {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:114:50",
      "file": "stores/textAnimatorStore.ts",
      "line": 114,
      "column": 50,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function ensureAnimatorsArray(textData: TextData): void {",
      "context": {
        "before": [
          "  return layer.data as TextData | undefined;\r",
          "}\r",
          "\r"
        ],
        "after": [
          "  if (!textData.animators) textData.animators = [];\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:118:56",
      "file": "stores/textAnimatorStore.ts",
      "line": 118,
      "column": 56,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function updateModified(store: TextAnimatorStoreAccess): void {",
      "context": {
        "before": [
          "  if (!textData.animators) textData.animators = [];\r",
          "}\r",
          "\r"
        ],
        "after": [
          "  store.project.meta.modified = new Date().toISOString();\r",
          "}\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:195:25",
      "file": "stores/textAnimatorStore.ts",
      "line": 195,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "textData.animators?.push(animator);",
      "context": {
        "before": [
          "        if (p.blur) animator.properties.blur = createAnimatableProperty(\"Blur\", p.blur.value, \"position\");\r",
          "      }\r",
          "\r"
        ],
        "after": [
          "      updateModified(store);\r",
          "      return animator;\r",
          "    },\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:205:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 205,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const index = textData.animators.findIndex((a) => a.id === animatorId);\r",
          "      if (index === -1) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:221:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 221,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r",
          "      if (!animator) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:239:22",
      "file": "stores/textAnimatorStore.ts",
      "line": 239,
      "column": 22,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return textData?.animators?.find((a) => a.id === animatorId) ?? null;",
      "context": {
        "before": [
          "      const layer = getTextLayer(store, layerId);\r",
          "      if (!layer) return null;\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    getTextAnimators(store: TextAnimatorStoreAccess, layerId: string): TextAnimator[] {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:239:33",
      "file": "stores/textAnimatorStore.ts",
      "line": 239,
      "column": 33,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return textData?.animators?.find((a) => a.id === animatorId) ?? null;",
      "context": {
        "before": [
          "      const layer = getTextLayer(store, layerId);\r",
          "      if (!layer) return null;\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    getTextAnimators(store: TextAnimatorStoreAccess, layerId: string): TextAnimator[] {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:245:32",
      "file": "stores/textAnimatorStore.ts",
      "line": 245,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return getTextData(layer)?.animators ?? [];",
      "context": {
        "before": [
          "    getTextAnimators(store: TextAnimatorStoreAccess, layerId: string): TextAnimator[] {\r",
          "      const layer = getTextLayer(store, layerId);\r",
          "      if (!layer) return [];\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    // ========================================================================\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:257:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 257,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r",
          "      if (!animator) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:281:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 281,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r",
          "      if (!animator) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:310:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 310,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r",
          "      if (!animator?.expressionSelector) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:313:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 313,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!animator?.expressionSelector) return false;",
      "context": {
        "before": [
          "      if (!textData?.animators) return false;\r",
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r"
        ],
        "after": [
          "\r",
          "      store.pushHistory();\r",
          "      animator.expressionSelector.enabled = false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:326:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 326,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r",
          "      if (!animator) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:351:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 351,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r",
          "      if (!animator?.wigglySelector) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:354:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 354,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!animator?.wigglySelector) return false;",
      "context": {
        "before": [
          "      if (!textData?.animators) return false;\r",
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r"
        ],
        "after": [
          "\r",
          "      store.pushHistory();\r",
          "      animator.wigglySelector.enabled = false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:378:40",
      "file": "stores/textAnimatorStore.ts",
      "line": 378,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fps = store.getActiveComp()?.settings?.fps || 16;",
      "context": {
        "before": [
          "      if (totalChars === 0) return [];\r",
          "\r",
          "      const animators = textData.animators || [];\r"
        ],
        "after": [
          "\r",
          "      const transforms: CharacterTransform[] = [];\r",
          "      for (let i = 0; i < totalChars; i++) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:378:50",
      "file": "stores/textAnimatorStore.ts",
      "line": 378,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fps = store.getActiveComp()?.settings?.fps || 16;",
      "context": {
        "before": [
          "      if (totalChars === 0) return [];\r",
          "\r",
          "      const animators = textData.animators || [];\r"
        ],
        "after": [
          "\r",
          "      const transforms: CharacterTransform[] = [];\r",
          "      for (let i = 0; i < totalChars; i++) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:466:42",
      "file": "stores/textAnimatorStore.ts",
      "line": 466,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const animator = textData.animators?.find((a) => a.id === animatorId);",
      "context": {
        "before": [
          "      const totalChars = text.length;\r",
          "      if (totalChars === 0) return [];\r",
          "\r"
        ],
        "after": [
          "      if (!animator) return [];\r",
          "\r",
          "      const fps = store.getActiveComp()?.settings?.fps || 16;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:469:40",
      "file": "stores/textAnimatorStore.ts",
      "line": 469,
      "column": 40,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fps = store.getActiveComp()?.settings?.fps || 16;",
      "context": {
        "before": [
          "      const animator = textData.animators?.find((a) => a.id === animatorId);\r",
          "      if (!animator) return [];\r",
          "\r"
        ],
        "after": [
          "      const values: number[] = [];\r",
          "\r",
          "      for (let i = 0; i < totalChars; i++) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:469:50",
      "file": "stores/textAnimatorStore.ts",
      "line": 469,
      "column": 50,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const fps = store.getActiveComp()?.settings?.fps || 16;",
      "context": {
        "before": [
          "      const animator = textData.animators?.find((a) => a.id === animatorId);\r",
          "      if (!animator) return [];\r",
          "\r"
        ],
        "after": [
          "      const values: number[] = [];\r",
          "\r",
          "      for (let i = 0; i < totalChars; i++) {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:491:42",
      "file": "stores/textAnimatorStore.ts",
      "line": 491,
      "column": 42,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const animator = textData.animators?.find((a) => a.id === animatorId);",
      "context": {
        "before": [
          "      const totalChars = text.length;\r",
          "      if (totalChars === 0 || charIndex < 0 || charIndex >= totalChars) return 0;\r",
          "\r"
        ],
        "after": [
          "      if (!animator) return 0;\r",
          "\r",
          "      return calculateCharacterInfluence(charIndex, totalChars, animator.rangeSelector, frame) * 100;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:506:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 506,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.animators) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "\r",
          "      const animator = textData.animators.find((a) => a.id === animatorId);\r",
          "      if (!animator) return false;\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:542:25",
      "file": "stores/textAnimatorStore.ts",
      "line": 542,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return !!(textData?.animators && textData.animators.length > 0);",
      "context": {
        "before": [
          "      const layer = getTextLayer(store, layerId);\r",
          "      if (!layer) return false;\r",
          "      const textData = getTextData(layer);\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    getTextContent(store: TextAnimatorStoreAccess, layerId: string): string | null {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:548:32",
      "file": "stores/textAnimatorStore.ts",
      "line": 548,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return getTextData(layer)?.text ?? null;",
      "context": {
        "before": [
          "    getTextContent(store: TextAnimatorStoreAccess, layerId: string): string | null {\r",
          "      const layer = getTextLayer(store, layerId);\r",
          "      if (!layer) return null;\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    setTextContent(store: TextAnimatorStoreAccess, layerId: string, text: string): boolean {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:597:66",
      "file": "stores/textAnimatorStore.ts",
      "line": 597,
      "column": 66,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return (getTextData(layer) as TextDataWithPath | undefined)?.pathConfig ?? null;",
      "context": {
        "before": [
          "    getTextPathConfig(store: TextAnimatorStoreAccess, layerId: string): TextPathConfig | null {\r",
          "      const layer = getTextLayer(store, layerId);\r",
          "      if (!layer) return null;\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    updateTextPath(store: TextAnimatorStoreAccess, layerId: string, updates: Partial<TextPathConfig>): boolean {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:605:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 605,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.pathConfig) return false;",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer) as TextDataWithPath | undefined;\r"
        ],
        "after": [
          "\r",
          "      store.pushHistory();\r",
          "      Object.assign(textData.pathConfig, updates);\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:624:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 624,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.pathConfig?.pathPoints || textData.pathConfig.pathPoints.length < 2) return [];",
      "context": {
        "before": [
          "      if (!layer) return [];\r",
          "\r",
          "      const textData = getTextData(layer) as TextDataWithPath | undefined;\r"
        ],
        "after": [
          "\r",
          "      const text = textData.text || \"\";\r",
          "      if (text.length === 0) return [];\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:624:32",
      "file": "stores/textAnimatorStore.ts",
      "line": 624,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.pathConfig?.pathPoints || textData.pathConfig.pathPoints.length < 2) return [];",
      "context": {
        "before": [
          "      if (!layer) return [];\r",
          "\r",
          "      const textData = getTextData(layer) as TextDataWithPath | undefined;\r"
        ],
        "after": [
          "\r",
          "      const text = textData.text || \"\";\r",
          "      if (text.length === 0) return [];\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:655:20",
      "file": "stores/textAnimatorStore.ts",
      "line": 655,
      "column": 20,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.pathConfig?.pathPoints || textData.pathConfig.pathPoints.length < 2) return 0;",
      "context": {
        "before": [
          "      if (!layer) return 0;\r",
          "\r",
          "      const textData = getTextData(layer) as TextDataWithPath | undefined;\r"
        ],
        "after": [
          "\r",
          "      const service = getPathService(layerId);\r",
          "      if (!service.hasPath()) service.setPath(textData.pathConfig.pathPoints, textData.pathConfig.closed ?? false);\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:655:32",
      "file": "stores/textAnimatorStore.ts",
      "line": 655,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "if (!textData?.pathConfig?.pathPoints || textData.pathConfig.pathPoints.length < 2) return 0;",
      "context": {
        "before": [
          "      if (!layer) return 0;\r",
          "\r",
          "      const textData = getTextData(layer) as TextDataWithPath | undefined;\r"
        ],
        "after": [
          "\r",
          "      const service = getPathService(layerId);\r",
          "      if (!service.hasPath()) service.setPath(textData.pathConfig.pathPoints, textData.pathConfig.closed ?? false);\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:668:25",
      "file": "stores/textAnimatorStore.ts",
      "line": 668,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return !!(textData?.pathConfig?.pathPoints && textData.pathConfig.pathPoints.length >= 2);",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer) as TextDataWithPath | undefined;\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    clearTextPath(store: TextAnimatorStoreAccess, layerId: string): boolean {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/textAnimatorStore.ts:668:37",
      "file": "stores/textAnimatorStore.ts",
      "line": 668,
      "column": 37,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "return !!(textData?.pathConfig?.pathPoints && textData.pathConfig.pathPoints.length >= 2);",
      "context": {
        "before": [
          "      if (!layer) return false;\r",
          "\r",
          "      const textData = getTextData(layer) as TextDataWithPath | undefined;\r"
        ],
        "after": [
          "    },\r",
          "\r",
          "    clearTextPath(store: TextAnimatorStoreAccess, layerId: string): boolean {\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "stores/toastStore.ts:55:35",
      "file": "stores/toastStore.ts",
      "line": 55,
      "column": 35,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function removeToast(id: string): void {",
      "context": {
        "before": [
          "    return id;",
          "  }",
          ""
        ],
        "after": [
          "    const index = toasts.value.findIndex((t) => t.id === id);",
          "    if (index !== -1) {",
          "      toasts.value.splice(index, 1);"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/toastStore.ts:62:22",
      "file": "stores/toastStore.ts",
      "line": 62,
      "column": 22,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function clearAll(): void {",
      "context": {
        "before": [
          "    }",
          "  }",
          ""
        ],
        "after": [
          "    toasts.value = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/uiStore.ts:56:44",
      "file": "stores/uiStore.ts",
      "line": 56,
      "column": 44,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setCurveEditorVisible(visible: boolean): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Set curve editor visibility\r",
          "     */\r"
        ],
        "after": [
          "      this.curveEditorVisible = visible;\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/uiStore.ts:63:31",
      "file": "stores/uiStore.ts",
      "line": 63,
      "column": 31,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleCurveEditorVisible(): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Toggle curve editor visibility\r",
          "     */\r"
        ],
        "after": [
          "      this.curveEditorVisible = !this.curveEditorVisible;\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/uiStore.ts:70:42",
      "file": "stores/uiStore.ts",
      "line": 70,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setHideMinimizedLayers(hide: boolean): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Set hide minimized layers state\r",
          "     */\r"
        ],
        "after": [
          "      this.hideMinimizedLayers = hide;\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/uiStore.ts:77:32",
      "file": "stores/uiStore.ts",
      "line": 77,
      "column": 32,
      "pattern": ": void",
      "severity": "LOW",
      "code": "toggleHideMinimizedLayers(): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Toggle hide minimized layers\r",
          "     */\r"
        ],
        "after": [
          "      this.hideMinimizedLayers = !this.hideMinimizedLayers;\r",
          "    },\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/uiStore.ts:84:71",
      "file": "stores/uiStore.ts",
      "line": 84,
      "column": 71,
      "pattern": ": void",
      "severity": "LOW",
      "code": "setShapeToolOptions(options: Partial<UIState[\"shapeToolOptions\"]>): void {",
      "context": {
        "before": [
          "    /**\r",
          "     * Update shape tool options\r",
          "     */\r"
        ],
        "after": [
          "      this.shapeToolOptions = { ...this.shapeToolOptions, ...options };\r",
          "    },\r",
          "  },\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/videoStore.ts:362:16",
      "file": "stores/videoStore.ts",
      "line": 362,
      "column": 16,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(compositionFps) && compositionFps > 0 ? compositionFps : 16;",
      "context": {
        "before": [
          "      const videoFps = metadata.fps!;\r",
          "\r",
          "      const safeCompFps =\r"
        ],
        "after": [
          "      const safeVideoFps =\r",
          "        Number.isFinite(videoFps) && videoFps > 0 ? videoFps : safeCompFps;\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/videoStore.ts:364:16",
      "file": "stores/videoStore.ts",
      "line": 364,
      "column": 16,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "Number.isFinite(videoFps) && videoFps > 0 ? videoFps : safeCompFps;",
      "context": {
        "before": [
          "      const safeCompFps =\r",
          "        Number.isFinite(compositionFps) && compositionFps > 0 ? compositionFps : 16;\r",
          "      const safeVideoFps =\r"
        ],
        "after": [
          "\r",
          "      const timeStretch = (safeVideoFps / safeCompFps) * 100;\r",
          "\r"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "stores/videoStore.ts:404:6",
      "file": "stores/videoStore.ts",
      "line": 404,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      pendingImport:\r",
          "        | VideoImportFpsMismatch[\"pendingImport\"]\r",
          "        | VideoImportFpsUnknown[\"pendingImport\"],\r"
        ],
        "after": [
          "      delete store.project.assets[pendingImport.assetId];\r",
          "      URL.revokeObjectURL(pendingImport.videoUrl);\r",
          "      storeLogger.debug(\"Cancelled video import:\", { assetId: pendingImport.assetId });\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/videoStore.ts:495:6",
      "file": "stores/videoStore.ts",
      "line": 495,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: VideoStoreAccess,\r",
          "      layerId: string,\r",
          "      updates: Partial<VideoData>,\r"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r",
          "      if (!layer || layer.type !== \"video\") return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/videoStore.ts:511:6",
      "file": "stores/videoStore.ts",
      "line": 511,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      store: VideoStoreAccess,\r",
          "      layerId: string,\r",
          "      metadata: VideoMetadata,\r"
        ],
        "after": [
          "      const layer = store.getActiveCompLayers().find((l) => l.id === layerId);\r",
          "      if (!layer || layer.type !== \"video\") return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "stores/videoStore.ts:543:6",
      "file": "stores/videoStore.ts",
      "line": 543,
      "column": 6,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "      width: number,\r",
          "      height: number,\r",
          "      frameCount?: number,\r"
        ],
        "after": [
          "      const comp = store.getActiveComp();\r",
          "      if (!comp) return;\r",
          "\r"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "types/animation.ts:179:15",
      "file": "types/animation.ts",
      "line": 179,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(frame)) {",
      "context": {
        "before": [
          "): Keyframe<T> {",
          "  // Validate frame to prevent silent interpolation failures",
          "  // NaN/Infinity frames cause incorrect animation output without any error"
        ],
        "after": [
          "    throw new Error(",
          "      `Invalid keyframe frame: ${frame}. Frame must be a finite number.`,",
          "    );"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "types/spline.ts:333:21",
      "file": "types/spline.ts",
      "line": 333,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "depth: acp.depth?.value,",
      "context": {
        "before": [
          "    id: acp.id,",
          "    x: acp.x.value,",
          "    y: acp.y.value,"
        ],
        "after": [
          "    handleIn: acp.handleIn",
          "      ? {",
          "          x: acp.handleIn.x.value,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:256:70",
      "file": "types/transform.ts",
      "line": 256,
      "column": 70,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function separatePositionDimensions(transform: LayerTransform): void {",
      "context": {
        "before": [
          " * Separate position into individual X, Y, Z properties.",
          " * Copies keyframes from the combined position property to separate dimension properties.",
          " */"
        ],
        "after": [
          "  const pos = transform.position;",
          "  const currentValue = pos.value;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "types/transform.ts:287:26",
      "file": "types/transform.ts",
      "line": 287,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.positionX?.keyframes.push({",
      "context": {
        "before": [
          "      const val = kf.value;",
          "",
          "      // X keyframe"
        ],
        "after": [
          "        ...kf,",
          "        id: `${kf.id}_x`,",
          "        value: val.x,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:294:26",
      "file": "types/transform.ts",
      "line": 294,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.positionY?.keyframes.push({",
      "context": {
        "before": [
          "      });",
          "",
          "      // Y keyframe"
        ],
        "after": [
          "        ...kf,",
          "        id: `${kf.id}_y`,",
          "        value: val.y,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:301:26",
      "file": "types/transform.ts",
      "line": 301,
      "column": 26,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.positionZ?.keyframes.push({",
      "context": {
        "before": [
          "      });",
          "",
          "      // Z keyframe"
        ],
        "after": [
          "        ...kf,",
          "        id: `${kf.id}_z`,",
          "        value: val.z ?? 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:320:66",
      "file": "types/transform.ts",
      "line": 320,
      "column": 66,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function linkPositionDimensions(transform: LayerTransform): void {",
      "context": {
        "before": [
          " * Link position dimensions back into a combined property.",
          " * Merges keyframes from X, Y, Z into the combined position property.",
          " */"
        ],
        "after": [
          "  if (!transform.positionX || !transform.positionY) return;",
          "",
          "  const posX = transform.positionX;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "types/transform.ts:331:12",
      "file": "types/transform.ts",
      "line": 331,
      "column": 12,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: posZ?.value ?? 0,",
      "context": {
        "before": [
          "  transform.position.value = {",
          "    x: posX.value,",
          "    y: posY.value,"
        ],
        "after": [
          "  };",
          "",
          "  // Merge keyframes - collect all unique frames"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:338:7",
      "file": "types/transform.ts",
      "line": 338,
      "column": 7,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "posZ?.keyframes.forEach((kf) => allFrames.add(kf.frame));",
      "context": {
        "before": [
          "  const allFrames = new Set<number>();",
          "  posX.keyframes.forEach((kf) => allFrames.add(kf.frame));",
          "  posY.keyframes.forEach((kf) => allFrames.add(kf.frame));"
        ],
        "after": [
          "",
          "  // Clear existing keyframes",
          "  transform.position.keyframes = [];"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:350:21",
      "file": "types/transform.ts",
      "line": 350,
      "column": 21,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const zKf = posZ?.keyframes.find((k) => k.frame === frame);",
      "context": {
        "before": [
          "  sortedFrames.forEach((frame) => {",
          "    const xKf = posX.keyframes.find((k) => k.frame === frame);",
          "    const yKf = posY.keyframes.find((k) => k.frame === frame);"
        ],
        "after": [
          "",
          "    // Get values (interpolate if keyframe doesn't exist at this frame)",
          "    const xVal ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:354:10",
      "file": "types/transform.ts",
      "line": 354,
      "column": 10,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "xKf?.value ?? getInterpolatedValue(posX.keyframes, frame) ?? posX.value;",
      "context": {
        "before": [
          "",
          "    // Get values (interpolate if keyframe doesn't exist at this frame)",
          "    const xVal ="
        ],
        "after": [
          "    const yVal =",
          "      yKf?.value ?? getInterpolatedValue(posY.keyframes, frame) ?? posY.value;",
          "    const zVal ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:356:10",
      "file": "types/transform.ts",
      "line": 356,
      "column": 10,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "yKf?.value ?? getInterpolatedValue(posY.keyframes, frame) ?? posY.value;",
      "context": {
        "before": [
          "    const xVal =",
          "      xKf?.value ?? getInterpolatedValue(posX.keyframes, frame) ?? posX.value;",
          "    const yVal ="
        ],
        "after": [
          "    const zVal =",
          "      zKf?.value ??",
          "      getInterpolatedValue(posZ?.keyframes ?? [], frame) ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:358:10",
      "file": "types/transform.ts",
      "line": 358,
      "column": 10,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "zKf?.value ??",
      "context": {
        "before": [
          "    const yVal =",
          "      yKf?.value ?? getInterpolatedValue(posY.keyframes, frame) ?? posY.value;",
          "    const zVal ="
        ],
        "after": [
          "      getInterpolatedValue(posZ?.keyframes ?? [], frame) ??",
          "      posZ?.value ??",
          "      0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:359:32",
      "file": "types/transform.ts",
      "line": 359,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getInterpolatedValue(posZ?.keyframes ?? [], frame) ??",
      "context": {
        "before": [
          "      yKf?.value ?? getInterpolatedValue(posY.keyframes, frame) ?? posY.value;",
          "    const zVal =",
          "      zKf?.value ??"
        ],
        "after": [
          "      posZ?.value ??",
          "      0;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:360:11",
      "file": "types/transform.ts",
      "line": 360,
      "column": 11,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "posZ?.value ??",
      "context": {
        "before": [
          "    const zVal =",
          "      zKf?.value ??",
          "      getInterpolatedValue(posZ?.keyframes ?? [], frame) ??"
        ],
        "after": [
          "      0;",
          "",
          "    // Use the first available keyframe as template for handles/interpolation"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:370:32",
      "file": "types/transform.ts",
      "line": 370,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "interpolation: templateKf?.interpolation ?? \"linear\",",
      "context": {
        "before": [
          "      id: `kf_pos_${frame}_${Date.now()}`,",
          "      frame,",
          "      value: { x: xVal, y: yVal, z: zVal },"
        ],
        "after": [
          "      inHandle: templateKf?.inHandle ?? { frame: -5, value: 0, enabled: false },",
          "      outHandle: templateKf?.outHandle ?? {",
          "        frame: 5,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:371:27",
      "file": "types/transform.ts",
      "line": 371,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "inHandle: templateKf?.inHandle ?? { frame: -5, value: 0, enabled: false },",
      "context": {
        "before": [
          "      frame,",
          "      value: { x: xVal, y: yVal, z: zVal },",
          "      interpolation: templateKf?.interpolation ?? \"linear\","
        ],
        "after": [
          "      outHandle: templateKf?.outHandle ?? {",
          "        frame: 5,",
          "        value: 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:372:28",
      "file": "types/transform.ts",
      "line": 372,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "outHandle: templateKf?.outHandle ?? {",
      "context": {
        "before": [
          "      value: { x: xVal, y: yVal, z: zVal },",
          "      interpolation: templateKf?.interpolation ?? \"linear\",",
          "      inHandle: templateKf?.inHandle ?? { frame: -5, value: 0, enabled: false },"
        ],
        "after": [
          "        frame: 5,",
          "        value: 0,",
          "        enabled: false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:377:30",
      "file": "types/transform.ts",
      "line": 377,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "controlMode: templateKf?.controlMode ?? \"smooth\",",
      "context": {
        "before": [
          "        value: 0,",
          "        enabled: false,",
          "      },"
        ],
        "after": [
          "    });",
          "  });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:395:67",
      "file": "types/transform.ts",
      "line": 395,
      "column": 67,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function separateScaleDimensions(transform: LayerTransform): void {",
      "context": {
        "before": [
          "/**",
          " * Separate scale into individual X, Y, Z properties.",
          " */"
        ],
        "after": [
          "  const scale = transform.scale;",
          "  const currentValue = scale.value;",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "types/transform.ts:423:23",
      "file": "types/transform.ts",
      "line": 423,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.scaleX?.keyframes.push({",
      "context": {
        "before": [
          "    scale.keyframes.forEach((kf) => {",
          "      const val = kf.value;",
          ""
        ],
        "after": [
          "        ...kf,",
          "        id: `${kf.id}_x`,",
          "        value: val.x,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:429:23",
      "file": "types/transform.ts",
      "line": 429,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.scaleY?.keyframes.push({",
      "context": {
        "before": [
          "        value: val.x,",
          "      });",
          ""
        ],
        "after": [
          "        ...kf,",
          "        id: `${kf.id}_y`,",
          "        value: val.y,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:435:23",
      "file": "types/transform.ts",
      "line": 435,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "transform.scaleZ?.keyframes.push({",
      "context": {
        "before": [
          "        value: val.y,",
          "      });",
          ""
        ],
        "after": [
          "        ...kf,",
          "        id: `${kf.id}_z`,",
          "        value: val.z ?? 100,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:452:63",
      "file": "types/transform.ts",
      "line": 452,
      "column": 63,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function linkScaleDimensions(transform: LayerTransform): void {",
      "context": {
        "before": [
          "/**",
          " * Link scale dimensions back into a combined property.",
          " */"
        ],
        "after": [
          "  if (!transform.scaleX || !transform.scaleY) return;",
          "",
          "  const scaleX = transform.scaleX;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "types/transform.ts:462:14",
      "file": "types/transform.ts",
      "line": 462,
      "column": 14,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "z: scaleZ?.value ?? 100,",
      "context": {
        "before": [
          "  transform.scale.value = {",
          "    x: scaleX.value,",
          "    y: scaleY.value,"
        ],
        "after": [
          "  };",
          "",
          "  const allFrames = new Set<number>();"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:468:9",
      "file": "types/transform.ts",
      "line": 468,
      "column": 9,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scaleZ?.keyframes.forEach((kf) => allFrames.add(kf.frame));",
      "context": {
        "before": [
          "  const allFrames = new Set<number>();",
          "  scaleX.keyframes.forEach((kf) => allFrames.add(kf.frame));",
          "  scaleY.keyframes.forEach((kf) => allFrames.add(kf.frame));"
        ],
        "after": [
          "",
          "  transform.scale.keyframes = [];",
          "  transform.scale.animated = allFrames.size > 0;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:478:23",
      "file": "types/transform.ts",
      "line": 478,
      "column": 23,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const zKf = scaleZ?.keyframes.find((k) => k.frame === frame);",
      "context": {
        "before": [
          "  sortedFrames.forEach((frame) => {",
          "    const xKf = scaleX.keyframes.find((k) => k.frame === frame);",
          "    const yKf = scaleY.keyframes.find((k) => k.frame === frame);"
        ],
        "after": [
          "",
          "    const xVal =",
          "      xKf?.value ??"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:481:10",
      "file": "types/transform.ts",
      "line": 481,
      "column": 10,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "xKf?.value ??",
      "context": {
        "before": [
          "    const zKf = scaleZ?.keyframes.find((k) => k.frame === frame);",
          "",
          "    const xVal ="
        ],
        "after": [
          "      getInterpolatedValue(scaleX.keyframes, frame) ??",
          "      scaleX.value;",
          "    const yVal ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:485:10",
      "file": "types/transform.ts",
      "line": 485,
      "column": 10,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "yKf?.value ??",
      "context": {
        "before": [
          "      getInterpolatedValue(scaleX.keyframes, frame) ??",
          "      scaleX.value;",
          "    const yVal ="
        ],
        "after": [
          "      getInterpolatedValue(scaleY.keyframes, frame) ??",
          "      scaleY.value;",
          "    const zVal ="
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:489:10",
      "file": "types/transform.ts",
      "line": 489,
      "column": 10,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "zKf?.value ??",
      "context": {
        "before": [
          "      getInterpolatedValue(scaleY.keyframes, frame) ??",
          "      scaleY.value;",
          "    const zVal ="
        ],
        "after": [
          "      getInterpolatedValue(scaleZ?.keyframes ?? [], frame) ??",
          "      scaleZ?.value ??",
          "      100;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:490:34",
      "file": "types/transform.ts",
      "line": 490,
      "column": 34,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "getInterpolatedValue(scaleZ?.keyframes ?? [], frame) ??",
      "context": {
        "before": [
          "      scaleY.value;",
          "    const zVal =",
          "      zKf?.value ??"
        ],
        "after": [
          "      scaleZ?.value ??",
          "      100;",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:491:13",
      "file": "types/transform.ts",
      "line": 491,
      "column": 13,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "scaleZ?.value ??",
      "context": {
        "before": [
          "    const zVal =",
          "      zKf?.value ??",
          "      getInterpolatedValue(scaleZ?.keyframes ?? [], frame) ??"
        ],
        "after": [
          "      100;",
          "",
          "    const templateKf = xKf || yKf || zKf;"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:500:32",
      "file": "types/transform.ts",
      "line": 500,
      "column": 32,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "interpolation: templateKf?.interpolation ?? \"linear\",",
      "context": {
        "before": [
          "      id: `kf_scale_${frame}_${Date.now()}`,",
          "      frame,",
          "      value: { x: xVal, y: yVal, z: zVal },"
        ],
        "after": [
          "      inHandle: templateKf?.inHandle ?? { frame: -5, value: 0, enabled: false },",
          "      outHandle: templateKf?.outHandle ?? {",
          "        frame: 5,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:501:27",
      "file": "types/transform.ts",
      "line": 501,
      "column": 27,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "inHandle: templateKf?.inHandle ?? { frame: -5, value: 0, enabled: false },",
      "context": {
        "before": [
          "      frame,",
          "      value: { x: xVal, y: yVal, z: zVal },",
          "      interpolation: templateKf?.interpolation ?? \"linear\","
        ],
        "after": [
          "      outHandle: templateKf?.outHandle ?? {",
          "        frame: 5,",
          "        value: 0,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:502:28",
      "file": "types/transform.ts",
      "line": 502,
      "column": 28,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "outHandle: templateKf?.outHandle ?? {",
      "context": {
        "before": [
          "      value: { x: xVal, y: yVal, z: zVal },",
          "      interpolation: templateKf?.interpolation ?? \"linear\",",
          "      inHandle: templateKf?.inHandle ?? { frame: -5, value: 0, enabled: false },"
        ],
        "after": [
          "        frame: 5,",
          "        value: 0,",
          "        enabled: false,"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "types/transform.ts:507:30",
      "file": "types/transform.ts",
      "line": 507,
      "column": 30,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "controlMode: templateKf?.controlMode ?? \"smooth\",",
      "context": {
        "before": [
          "        value: 0,",
          "        enabled: false,",
          "      },"
        ],
        "after": [
          "    });",
          "  });",
          ""
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "utils/canvasPool.ts:73:37",
      "file": "utils/canvasPool.ts",
      "line": 73,
      "column": 37,
      "pattern": ": void",
      "severity": "LOW",
      "code": "release(canvas: HTMLCanvasElement): void {",
      "context": {
        "before": [
          "   * Release a canvas back to the pool",
          "   * Call this when done with an effect result",
          "   */"
        ],
        "after": [
          "    const item = this.pool.find((p) => p.canvas === canvas);",
          "    if (item) {",
          "      item.inUse = false;"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/canvasPool.ts:84:12",
      "file": "utils/canvasPool.ts",
      "line": 84,
      "column": 12,
      "pattern": ": void",
      "severity": "LOW",
      "code": "cleanup(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clean up old unused canvases to free memory",
          "   */"
        ],
        "after": [
          "    const now = Date.now();",
          "    this.pool = this.pool.filter((item) => {",
          "      if (!item.inUse && now - item.lastUsed > this.maxAge) {"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/canvasPool.ts:98:10",
      "file": "utils/canvasPool.ts",
      "line": 98,
      "column": 10,
      "pattern": ": void",
      "severity": "LOW",
      "code": "clear(): void {",
      "context": {
        "before": [
          "  /**",
          "   * Clear all pooled canvases",
          "   */"
        ],
        "after": [
          "    this.pool = [];",
          "  }",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/colorUtils.ts:205:17",
      "file": "utils/colorUtils.ts",
      "line": 205,
      "column": 17,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (!Number.isNaN(r) && !Number.isNaN(g) && !Number.isNaN(b)) {",
      "context": {
        "before": [
          "    const g = parseInt(hex.slice(2, 4), 16);",
          "    const b = parseInt(hex.slice(4, 6), 16);",
          ""
        ],
        "after": [
          "      return [r, g, b];",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/colorUtils.ts:205:37",
      "file": "utils/colorUtils.ts",
      "line": 205,
      "column": 37,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (!Number.isNaN(r) && !Number.isNaN(g) && !Number.isNaN(b)) {",
      "context": {
        "before": [
          "    const g = parseInt(hex.slice(2, 4), 16);",
          "    const b = parseInt(hex.slice(4, 6), 16);",
          ""
        ],
        "after": [
          "      return [r, g, b];",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/colorUtils.ts:205:57",
      "file": "utils/colorUtils.ts",
      "line": 205,
      "column": 57,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (!Number.isNaN(r) && !Number.isNaN(g) && !Number.isNaN(b)) {",
      "context": {
        "before": [
          "    const g = parseInt(hex.slice(2, 4), 16);",
          "    const b = parseInt(hex.slice(4, 6), 16);",
          ""
        ],
        "after": [
          "      return [r, g, b];",
          "    }",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/colorUtils.ts:238:15",
      "file": "utils/colorUtils.ts",
      "line": 238,
      "column": 15,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "!Number.isNaN(r) &&",
      "context": {
        "before": [
          "    const a = parseInt(hex.slice(6, 8), 16) / 255;",
          "",
          "    if ("
        ],
        "after": [
          "      !Number.isNaN(g) &&",
          "      !Number.isNaN(b) &&",
          "      !Number.isNaN(a)"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/colorUtils.ts:239:15",
      "file": "utils/colorUtils.ts",
      "line": 239,
      "column": 15,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "!Number.isNaN(g) &&",
      "context": {
        "before": [
          "",
          "    if (",
          "      !Number.isNaN(r) &&"
        ],
        "after": [
          "      !Number.isNaN(b) &&",
          "      !Number.isNaN(a)",
          "    ) {"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/colorUtils.ts:240:15",
      "file": "utils/colorUtils.ts",
      "line": 240,
      "column": 15,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "!Number.isNaN(b) &&",
      "context": {
        "before": [
          "    if (",
          "      !Number.isNaN(r) &&",
          "      !Number.isNaN(g) &&"
        ],
        "after": [
          "      !Number.isNaN(a)",
          "    ) {",
          "      return [r, g, b, a];"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/colorUtils.ts:241:15",
      "file": "utils/colorUtils.ts",
      "line": 241,
      "column": 15,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "!Number.isNaN(a)",
      "context": {
        "before": [
          "      !Number.isNaN(r) &&",
          "      !Number.isNaN(g) &&",
          "      !Number.isNaN(b) &&"
        ],
        "after": [
          "    ) {",
          "      return [r, g, b, a];",
          "    }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/fpsUtils.ts:37:52",
      "file": "utils/fpsUtils.ts",
      "line": 37,
      "column": 52,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (fps === null || fps === undefined || !Number.isFinite(fps) || fps <= 0) {",
      "context": {
        "before": [
          "  fps: number | null | undefined,",
          "  fallback: number = DEFAULT_FPS,",
          "): number {"
        ],
        "after": [
          "    return fallback;",
          "  }",
          "  return Math.max(MIN_FPS, Math.min(MAX_FPS, fps));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/fpsUtils.ts:145:52",
      "file": "utils/fpsUtils.ts",
      "line": 145,
      "column": 52,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (fps === null || fps === undefined || !Number.isFinite(fps) || fps <= 0) {",
      "context": {
        "before": [
          "  fps: number | null | undefined,",
          "  context?: string,",
          "): asserts fps is number {"
        ],
        "after": [
          "    const ctx = context ? ` in ${context}` : \"\";",
          "    throw new Error(",
          "      `Invalid fps value${ctx}: ${fps}. FPS must be a positive number.`,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:27:25",
      "file": "utils/logger.ts",
      "line": 27,
      "column": 25,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "level: import.meta.env?.DEV ? \"debug\" : \"warn\",",
      "context": {
        "before": [
          "",
          "// Default configuration - can be overridden",
          "const config: LoggerConfig = {"
        ],
        "after": [
          "  prefix: \"[Lattice]\",",
          "  enableTimestamp: false,",
          "};"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:35:45",
      "file": "utils/logger.ts",
      "line": 35,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setLogLevel(level: LogLevel): void {",
      "context": {
        "before": [
          "/**",
          " * Set the global log level",
          " */"
        ],
        "after": [
          "  config.level = level;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:42:45",
      "file": "utils/logger.ts",
      "line": 42,
      "column": 45,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setLogPrefix(prefix: string): void {",
      "context": {
        "before": [
          "/**",
          " * Set the log prefix",
          " */"
        ],
        "after": [
          "  config.prefix = prefix;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:49:54",
      "file": "utils/logger.ts",
      "line": 49,
      "column": 54,
      "pattern": ": void",
      "severity": "LOW",
      "code": "export function setTimestampEnabled(enabled: boolean): void {",
      "context": {
        "before": [
          "/**",
          " * Enable/disable timestamps in logs",
          " */"
        ],
        "after": [
          "  config.enableTimestamp = enabled;",
          "}",
          ""
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:93:43",
      "file": "utils/logger.ts",
      "line": 93,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "debug(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          " */",
          "export function createLogger(context: string) {",
          "  return {"
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.log(formatMessage(\"DEBUG\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:99:42",
      "file": "utils/logger.ts",
      "line": 99,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "info(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"info\")) {",
          "        console.info(formatMessage(\"INFO\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:105:42",
      "file": "utils/logger.ts",
      "line": 105,
      "column": 42,
      "pattern": ": void",
      "severity": "LOW",
      "code": "warn(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"warn\")) {",
          "        console.warn(formatMessage(\"WARN\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:111:43",
      "file": "utils/logger.ts",
      "line": 111,
      "column": 43,
      "pattern": ": void",
      "severity": "LOW",
      "code": "error(message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"error\")) {",
          "        console.error(formatMessage(\"ERROR\", context, message), ...args);",
          "      }"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:120:58",
      "file": "utils/logger.ts",
      "line": 120,
      "column": 58,
      "pattern": ": void",
      "severity": "LOW",
      "code": "log(level: LogLevel, message: string, ...args: any[]): void {",
      "context": {
        "before": [
          "    /**",
          "     * Log with a specific level",
          "     */"
        ],
        "after": [
          "      switch (level) {",
          "        case \"debug\":",
          "          this.debug(message, ...args);"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:140:25",
      "file": "utils/logger.ts",
      "line": 140,
      "column": 25,
      "pattern": ": void",
      "severity": "LOW",
      "code": "group(label: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Group related logs (collapsible in console)",
          "     */"
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.group(formatMessage(\"\", context, label));",
          "      }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:146:15",
      "file": "utils/logger.ts",
      "line": 146,
      "column": 15,
      "pattern": ": void",
      "severity": "LOW",
      "code": "groupEnd(): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.groupEnd();",
          "      }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:155:21",
      "file": "utils/logger.ts",
      "line": 155,
      "column": 21,
      "pattern": ": void",
      "severity": "LOW",
      "code": "table(data: any): void {",
      "context": {
        "before": [
          "    /**",
          "     * Log a table (useful for arrays/objects)",
          "     */"
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.log(formatMessage(\"\", context, \"Table:\"));",
          "        console.table(data);"
        ]
      },
      "typeInfo": "Type is explicitly 'any'",
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:165:24",
      "file": "utils/logger.ts",
      "line": 165,
      "column": 24,
      "pattern": ": void",
      "severity": "LOW",
      "code": "time(label: string): void {",
      "context": {
        "before": [
          "    /**",
          "     * Measure time for an operation",
          "     */"
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.time(`${config.prefix} [${context}] ${label}`);",
          "      }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/logger.ts:171:27",
      "file": "utils/logger.ts",
      "line": 171,
      "column": 27,
      "pattern": ": void",
      "severity": "LOW",
      "code": "timeEnd(label: string): void {",
      "context": {
        "before": [
          "      }",
          "    },",
          ""
        ],
        "after": [
          "      if (shouldLog(\"debug\")) {",
          "        console.timeEnd(`${config.prefix} [${context}] ${label}`);",
          "      }"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:18:15",
      "file": "utils/numericSafety.ts",
      "line": 18,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(value)) return fallback;",
      "context": {
        "before": [
          " */",
          "export function ensureFinite(value: unknown, fallback: number): number {",
          "  if (typeof value !== \"number\") return fallback;"
        ],
        "after": [
          "  return value;",
          "}",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:30:14",
      "file": "utils/numericSafety.ts",
      "line": 30,
      "column": 14,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (Number.isNaN(value)) {",
      "context": {
        "before": [
          "  if (typeof value !== \"number\") {",
          "    throw new TypeError(`${name} must be a number, got ${typeof value}`);",
          "  }"
        ],
        "after": [
          "    throw new TypeError(`${name} must not be NaN`);",
          "  }",
          "  if (!Number.isFinite(value)) {"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:33:15",
      "file": "utils/numericSafety.ts",
      "line": 33,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(value)) {",
      "context": {
        "before": [
          "  if (Number.isNaN(value)) {",
          "    throw new TypeError(`${name} must not be NaN`);",
          "  }"
        ],
        "after": [
          "    throw new TypeError(`${name} must be finite, got ${value}`);",
          "  }",
          "  return value;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:53:15",
      "file": "utils/numericSafety.ts",
      "line": 53,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(result)) return fallback;",
      "context": {
        "before": [
          "): number {",
          "  if (denominator === 0) return fallback;",
          "  const result = numerator / denominator;"
        ],
        "after": [
          "  return result;",
          "}",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:64:15",
      "file": "utils/numericSafety.ts",
      "line": 64,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(result)) return 0;",
      "context": {
        "before": [
          "export function safeMod(value: number, divisor: number): number {",
          "  if (divisor === 0) return 0;",
          "  const result = ((value % divisor) + divisor) % divisor;"
        ],
        "after": [
          "  return result;",
          "}",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:73:15",
      "file": "utils/numericSafety.ts",
      "line": 73,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(value)) return 0;",
      "context": {
        "before": [
          " */",
          "export function safeSqrt(value: number): number {",
          "  if (value < 0) return 0;"
        ],
        "after": [
          "  return Math.sqrt(value);",
          "}",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:82:15",
      "file": "utils/numericSafety.ts",
      "line": 82,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(result)) return fallback;",
      "context": {
        "before": [
          " */",
          "export function safePow(base: number, exponent: number, fallback = 0): number {",
          "  const result = Math.pow(base, exponent);"
        ],
        "after": [
          "  return result;",
          "}",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:92:15",
      "file": "utils/numericSafety.ts",
      "line": 92,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(result)) return fallback;",
      "context": {
        "before": [
          "export function safeLog(value: number, fallback = 0): number {",
          "  if (value <= 0) return fallback;",
          "  const result = Math.log(value);"
        ],
        "after": [
          "  return result;",
          "}",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:105:14",
      "file": "utils/numericSafety.ts",
      "line": 105,
      "column": 14,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (Number.isNaN(value)) return min;",
      "context": {
        "before": [
          " * Handles NaN by returning min.",
          " */",
          "export function clamp(value: number, min: number, max: number): number {"
        ],
        "after": [
          "  if (value < min) return min;",
          "  if (value > max) return max;",
          "  return value;"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:153:15",
      "file": "utils/numericSafety.ts",
      "line": 153,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(diff)) {",
      "context": {
        "before": [
          "",
          "  // Check for overflow in (b - a)",
          "  const diff = safeB - safeA;"
        ],
        "after": [
          "    // Fallback: use the mathematically equivalent but more stable formula",
          "    // lerp(a, b, t) = a*(1-t) + b*t",
          "    const result = safeA * (1 - safeT) + safeB * safeT;"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/numericSafety.ts:173:15",
      "file": "utils/numericSafety.ts",
      "line": 173,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(diff)) {",
      "context": {
        "before": [
          "",
          "  // Check for overflow in (b - a)",
          "  const diff = safeB - safeA;"
        ],
        "after": [
          "    // Fallback: use the mathematically equivalent but more stable formula",
          "    const result = safeA * (1 - safeT) + safeB * safeT;",
          "    return ensureFinite(result, safeA);"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/schemaValidation.ts:478:44",
      "file": "utils/schemaValidation.ts",
      "line": 478,
      "column": 44,
      "pattern": "Optional Chaining",
      "severity": "LOW",
      "code": "const ext = sanitized.match(/\\.[^.]+$/)?.[0] || \"\";",
      "context": {
        "before": [
          "\r",
          "  // Limit length (most filesystems have 255 char limit)\r",
          "  if (sanitized.length > 200) {\r"
        ],
        "after": [
          "    sanitized = sanitized.slice(0, 200 - ext.length) + ext;\r",
          "  }\r",
          "\r"
        ]
      },
      "suggestion": "Review if optional chaining is necessary or if null check should be explicit",
      "category": "Optional Chaining",
      "fixed": false
    },
    {
      "id": "utils/security.ts:344:2",
      "file": "utils/security.ts",
      "line": 344,
      "column": 2,
      "pattern": ": void",
      "severity": "LOW",
      "code": "): void {",
      "context": {
        "before": [
          "export function validateProjectStructure(",
          "  data: unknown,",
          "  context: string = \"Project\","
        ],
        "after": [
          "  if (!isObject(data)) {",
          "    throw new ValidationError(",
          "      `${context}: Expected object, got ${typeof data}`,"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "utils/security.ts:389:18",
      "file": "utils/security.ts",
      "line": 389,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "(!Number.isFinite(settings.width) || (settings.width as number) <= 0)",
      "context": {
        "before": [
          "      const settings = comp.settings as Record<string, unknown>;",
          "      if (",
          "        settings.width !== undefined &&"
        ],
        "after": [
          "      ) {",
          "        throw new ValidationError(",
          "          `${context}: compositions.${compId}.settings.width must be a positive finite number`,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/security.ts:397:18",
      "file": "utils/security.ts",
      "line": 397,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "(!Number.isFinite(settings.height) || (settings.height as number) <= 0)",
      "context": {
        "before": [
          "      }",
          "      if (",
          "        settings.height !== undefined &&"
        ],
        "after": [
          "      ) {",
          "        throw new ValidationError(",
          "          `${context}: compositions.${compId}.settings.height must be a positive finite number`,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/security.ts:405:18",
      "file": "utils/security.ts",
      "line": 405,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "(!Number.isFinite(settings.frameCount) ||",
      "context": {
        "before": [
          "      }",
          "      if (",
          "        settings.frameCount !== undefined &&"
        ],
        "after": [
          "          (settings.frameCount as number) <= 0)",
          "      ) {",
          "        throw new ValidationError("
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/security.ts:414:18",
      "file": "utils/security.ts",
      "line": 414,
      "column": 18,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "(!Number.isFinite(settings.fps) || (settings.fps as number) <= 0)",
      "context": {
        "before": [
          "      }",
          "      if (",
          "        settings.fps !== undefined &&"
        ],
        "after": [
          "      ) {",
          "        throw new ValidationError(",
          "          `${context}: compositions.${compId}.settings.fps must be a positive finite number`,"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/typeGuards.ts:23:46",
      "file": "utils/typeGuards.ts",
      "line": 23,
      "column": 46,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "return typeof value === \"number\" && Number.isFinite(value);",
      "context": {
        "before": [
          " * Check if value is a finite number (not NaN, not Infinity)",
          " */",
          "export function isFiniteNumber(value: unknown): value is number {"
        ],
        "after": [
          "}",
          "",
          "/**"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/validation.ts:66:14",
      "file": "utils/validation.ts",
      "line": 66,
      "column": 14,
      "pattern": "isNaN()",
      "severity": "LOW",
      "code": "if (Number.isNaN(num)) {",
      "context": {
        "before": [
          "): ValidationResult<number> {",
          "  const num = typeof value === \"number\" ? value : Number(value);",
          ""
        ],
        "after": [
          "    if (options.allowNaN) return ok(num);",
          "    return fail(`${name} must be a valid number, got NaN`);",
          "  }"
        ]
      },
      "suggestion": "Replace with Number.isNaN() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "utils/validation.ts:71:15",
      "file": "utils/validation.ts",
      "line": 71,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(num)) {",
      "context": {
        "before": [
          "    return fail(`${name} must be a valid number, got NaN`);",
          "  }",
          ""
        ],
        "after": [
          "    return fail(`${name} must be a finite number, got ${value}`);",
          "  }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "workers/audioWorker.ts:117:53",
      "file": "workers/audioWorker.ts",
      "line": 117,
      "column": 53,
      "pattern": ": void",
      "severity": "LOW",
      "code": "function fft(real: Float32Array, imag: Float32Array): void {",
      "context": {
        "before": [
          " * Radix-2 Cooley-Tukey FFT",
          " * Much faster than naive DFT for power-of-2 sizes",
          " */"
        ],
        "after": [
          "  const n = real.length;",
          "",
          "  // Bit-reversal permutation"
        ]
      },
      "suggestion": "Review if function should return boolean/number/object instead",
      "category": "Return Type",
      "fixed": false
    },
    {
      "id": "workers/audioWorker.ts:203:15",
      "file": "workers/audioWorker.ts",
      "line": 203,
      "column": 15,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (!Number.isFinite(fps) || fps <= 0) {",
      "context": {
        "before": [
          " * Returns validated fps or default if invalid.",
          " */",
          "function validateFps(fps: number): number {"
        ],
        "after": [
          "    return DEFAULT_FPS;",
          "  }",
          "  return Math.max(1, Math.min(120, fps));"
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    },
    {
      "id": "workers/expressionWorker.ts:144:47",
      "file": "workers/expressionWorker.ts",
      "line": 144,
      "column": 47,
      "pattern": "isFinite()",
      "severity": "LOW",
      "code": "if (typeof result !== \"number\" || !Number.isFinite(result)) {",
      "context": {
        "before": [
          "    const result = compartment.evaluate(req.code);",
          "",
          "    // Validate result is a number"
        ],
        "after": [
          "      return { id: req.id, success: true, result: 0 };",
          "    }",
          ""
        ]
      },
      "suggestion": "Replace with Number.isFinite() for more accurate type checking",
      "category": "Legacy Function",
      "fixed": false
    }
  ]
}